var fR=Object.defineProperty;var dR=(n,t,e)=>t in n?fR(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var ct=(n,t,e)=>dR(n,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function e(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=e(r);fetch(r.href,o)}})();function uS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Jm={exports:{}},Sc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eT;function gR(){if(eT)return Sc;eT=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,r,o){var c=null;if(o!==void 0&&(c=""+o),r.key!==void 0&&(c=""+r.key),"key"in r){o={};for(var u in r)u!=="key"&&(o[u]=r[u])}else o=r;return r=o.ref,{$$typeof:n,type:i,key:c,ref:r!==void 0?r:null,props:o}}return Sc.Fragment=t,Sc.jsx=e,Sc.jsxs=e,Sc}var nT;function mR(){return nT||(nT=1,Jm.exports=gR()),Jm.exports}var I=mR(),Zm={exports:{}},Rt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iT;function pR(){if(iT)return Rt;iT=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),b=Symbol.iterator;function x(j){return j===null||typeof j!="object"?null:(j=b&&j[b]||j["@@iterator"],typeof j=="function"?j:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,D={};function L(j,tt,lt){this.props=j,this.context=tt,this.refs=D,this.updater=lt||w}L.prototype.isReactComponent={},L.prototype.setState=function(j,tt){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,tt,"setState")},L.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function F(){}F.prototype=L.prototype;function W(j,tt,lt){this.props=j,this.context=tt,this.refs=D,this.updater=lt||w}var J=W.prototype=new F;J.constructor=W,S(J,L.prototype),J.isPureReactComponent=!0;var $=Array.isArray;function nt(){}var M={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function O(j,tt,lt){var ut=lt.ref;return{$$typeof:n,type:j,key:tt,ref:ut!==void 0?ut:null,props:lt}}function P(j,tt){return O(j.type,tt,j.props)}function k(j){return typeof j=="object"&&j!==null&&j.$$typeof===n}function z(j){var tt={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(lt){return tt[lt]})}var N=/\/+/g;function kt(j,tt){return typeof j=="object"&&j!==null&&j.key!=null?z(""+j.key):tt.toString(36)}function Tt(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(nt,nt):(j.status="pending",j.then(function(tt){j.status==="pending"&&(j.status="fulfilled",j.value=tt)},function(tt){j.status==="pending"&&(j.status="rejected",j.reason=tt)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function Y(j,tt,lt,ut,vt){var St=typeof j;(St==="undefined"||St==="boolean")&&(j=null);var Gt=!1;if(j===null)Gt=!0;else switch(St){case"bigint":case"string":case"number":Gt=!0;break;case"object":switch(j.$$typeof){case n:case t:Gt=!0;break;case p:return Gt=j._init,Y(Gt(j._payload),tt,lt,ut,vt)}}if(Gt)return vt=vt(j),Gt=ut===""?"."+kt(j,0):ut,$(vt)?(lt="",Gt!=null&&(lt=Gt.replace(N,"$&/")+"/"),Y(vt,tt,lt,"",function($r){return $r})):vt!=null&&(k(vt)&&(vt=P(vt,lt+(vt.key==null||j&&j.key===vt.key?"":(""+vt.key).replace(N,"$&/")+"/")+Gt)),tt.push(vt)),1;Gt=0;var He=ut===""?".":ut+":";if($(j))for(var ge=0;ge<j.length;ge++)ut=j[ge],St=He+kt(ut,ge),Gt+=Y(ut,tt,lt,St,vt);else if(ge=x(j),typeof ge=="function")for(j=ge.call(j),ge=0;!(ut=j.next()).done;)ut=ut.value,St=He+kt(ut,ge++),Gt+=Y(ut,tt,lt,St,vt);else if(St==="object"){if(typeof j.then=="function")return Y(Tt(j),tt,lt,ut,vt);throw tt=String(j),Error("Objects are not valid as a React child (found: "+(tt==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":tt)+"). If you meant to render a collection of children, use an array instead.")}return Gt}function at(j,tt,lt){if(j==null)return j;var ut=[],vt=0;return Y(j,ut,"","",function(St){return tt.call(lt,St,vt++)}),ut}function gt(j){if(j._status===-1){var tt=j._result;tt=tt(),tt.then(function(lt){(j._status===0||j._status===-1)&&(j._status=1,j._result=lt)},function(lt){(j._status===0||j._status===-1)&&(j._status=2,j._result=lt)}),j._status===-1&&(j._status=0,j._result=tt)}if(j._status===1)return j._result.default;throw j._result}var ht=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var tt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(tt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},xt={map:at,forEach:function(j,tt,lt){at(j,function(){tt.apply(this,arguments)},lt)},count:function(j){var tt=0;return at(j,function(){tt++}),tt},toArray:function(j){return at(j,function(tt){return tt})||[]},only:function(j){if(!k(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return Rt.Activity=_,Rt.Children=xt,Rt.Component=L,Rt.Fragment=e,Rt.Profiler=r,Rt.PureComponent=W,Rt.StrictMode=i,Rt.Suspense=f,Rt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Rt.__COMPILER_RUNTIME={__proto__:null,c:function(j){return M.H.useMemoCache(j)}},Rt.cache=function(j){return function(){return j.apply(null,arguments)}},Rt.cacheSignal=function(){return null},Rt.cloneElement=function(j,tt,lt){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var ut=S({},j.props),vt=j.key;if(tt!=null)for(St in tt.key!==void 0&&(vt=""+tt.key),tt)!C.call(tt,St)||St==="key"||St==="__self"||St==="__source"||St==="ref"&&tt.ref===void 0||(ut[St]=tt[St]);var St=arguments.length-2;if(St===1)ut.children=lt;else if(1<St){for(var Gt=Array(St),He=0;He<St;He++)Gt[He]=arguments[He+2];ut.children=Gt}return O(j.type,vt,ut)},Rt.createContext=function(j){return j={$$typeof:c,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:o,_context:j},j},Rt.createElement=function(j,tt,lt){var ut,vt={},St=null;if(tt!=null)for(ut in tt.key!==void 0&&(St=""+tt.key),tt)C.call(tt,ut)&&ut!=="key"&&ut!=="__self"&&ut!=="__source"&&(vt[ut]=tt[ut]);var Gt=arguments.length-2;if(Gt===1)vt.children=lt;else if(1<Gt){for(var He=Array(Gt),ge=0;ge<Gt;ge++)He[ge]=arguments[ge+2];vt.children=He}if(j&&j.defaultProps)for(ut in Gt=j.defaultProps,Gt)vt[ut]===void 0&&(vt[ut]=Gt[ut]);return O(j,St,vt)},Rt.createRef=function(){return{current:null}},Rt.forwardRef=function(j){return{$$typeof:u,render:j}},Rt.isValidElement=k,Rt.lazy=function(j){return{$$typeof:p,_payload:{_status:-1,_result:j},_init:gt}},Rt.memo=function(j,tt){return{$$typeof:d,type:j,compare:tt===void 0?null:tt}},Rt.startTransition=function(j){var tt=M.T,lt={};M.T=lt;try{var ut=j(),vt=M.S;vt!==null&&vt(lt,ut),typeof ut=="object"&&ut!==null&&typeof ut.then=="function"&&ut.then(nt,ht)}catch(St){ht(St)}finally{tt!==null&&lt.types!==null&&(tt.types=lt.types),M.T=tt}},Rt.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Rt.use=function(j){return M.H.use(j)},Rt.useActionState=function(j,tt,lt){return M.H.useActionState(j,tt,lt)},Rt.useCallback=function(j,tt){return M.H.useCallback(j,tt)},Rt.useContext=function(j){return M.H.useContext(j)},Rt.useDebugValue=function(){},Rt.useDeferredValue=function(j,tt){return M.H.useDeferredValue(j,tt)},Rt.useEffect=function(j,tt){return M.H.useEffect(j,tt)},Rt.useEffectEvent=function(j){return M.H.useEffectEvent(j)},Rt.useId=function(){return M.H.useId()},Rt.useImperativeHandle=function(j,tt,lt){return M.H.useImperativeHandle(j,tt,lt)},Rt.useInsertionEffect=function(j,tt){return M.H.useInsertionEffect(j,tt)},Rt.useLayoutEffect=function(j,tt){return M.H.useLayoutEffect(j,tt)},Rt.useMemo=function(j,tt){return M.H.useMemo(j,tt)},Rt.useOptimistic=function(j,tt){return M.H.useOptimistic(j,tt)},Rt.useReducer=function(j,tt,lt){return M.H.useReducer(j,tt,lt)},Rt.useRef=function(j){return M.H.useRef(j)},Rt.useState=function(j){return M.H.useState(j)},Rt.useSyncExternalStore=function(j,tt,lt){return M.H.useSyncExternalStore(j,tt,lt)},Rt.useTransition=function(){return M.H.useTransition()},Rt.version="19.2.0",Rt}var sT;function Sy(){return sT||(sT=1,Zm.exports=pR()),Zm.exports}var yt=Sy();const yR=uS(yt);var tp={exports:{}},Ac={},ep={exports:{}},np={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rT;function _R(){return rT||(rT=1,(function(n){function t(Y,at){var gt=Y.length;Y.push(at);t:for(;0<gt;){var ht=gt-1>>>1,xt=Y[ht];if(0<r(xt,at))Y[ht]=at,Y[gt]=xt,gt=ht;else break t}}function e(Y){return Y.length===0?null:Y[0]}function i(Y){if(Y.length===0)return null;var at=Y[0],gt=Y.pop();if(gt!==at){Y[0]=gt;t:for(var ht=0,xt=Y.length,j=xt>>>1;ht<j;){var tt=2*(ht+1)-1,lt=Y[tt],ut=tt+1,vt=Y[ut];if(0>r(lt,gt))ut<xt&&0>r(vt,lt)?(Y[ht]=vt,Y[ut]=gt,ht=ut):(Y[ht]=lt,Y[tt]=gt,ht=tt);else if(ut<xt&&0>r(vt,gt))Y[ht]=vt,Y[ut]=gt,ht=ut;else break t}}return at}function r(Y,at){var gt=Y.sortIndex-at.sortIndex;return gt!==0?gt:Y.id-at.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();n.unstable_now=function(){return c.now()-u}}var f=[],d=[],p=1,_=null,b=3,x=!1,w=!1,S=!1,D=!1,L=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;function J(Y){for(var at=e(d);at!==null;){if(at.callback===null)i(d);else if(at.startTime<=Y)i(d),at.sortIndex=at.expirationTime,t(f,at);else break;at=e(d)}}function $(Y){if(S=!1,J(Y),!w)if(e(f)!==null)w=!0,nt||(nt=!0,z());else{var at=e(d);at!==null&&Tt($,at.startTime-Y)}}var nt=!1,M=-1,C=5,O=-1;function P(){return D?!0:!(n.unstable_now()-O<C)}function k(){if(D=!1,nt){var Y=n.unstable_now();O=Y;var at=!0;try{t:{w=!1,S&&(S=!1,F(M),M=-1),x=!0;var gt=b;try{e:{for(J(Y),_=e(f);_!==null&&!(_.expirationTime>Y&&P());){var ht=_.callback;if(typeof ht=="function"){_.callback=null,b=_.priorityLevel;var xt=ht(_.expirationTime<=Y);if(Y=n.unstable_now(),typeof xt=="function"){_.callback=xt,J(Y),at=!0;break e}_===e(f)&&i(f),J(Y)}else i(f);_=e(f)}if(_!==null)at=!0;else{var j=e(d);j!==null&&Tt($,j.startTime-Y),at=!1}}break t}finally{_=null,b=gt,x=!1}at=void 0}}finally{at?z():nt=!1}}}var z;if(typeof W=="function")z=function(){W(k)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,kt=N.port2;N.port1.onmessage=k,z=function(){kt.postMessage(null)}}else z=function(){L(k,0)};function Tt(Y,at){M=L(function(){Y(n.unstable_now())},at)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Y){Y.callback=null},n.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<Y?Math.floor(1e3/Y):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(Y){switch(b){case 1:case 2:case 3:var at=3;break;default:at=b}var gt=b;b=at;try{return Y()}finally{b=gt}},n.unstable_requestPaint=function(){D=!0},n.unstable_runWithPriority=function(Y,at){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var gt=b;b=Y;try{return at()}finally{b=gt}},n.unstable_scheduleCallback=function(Y,at,gt){var ht=n.unstable_now();switch(typeof gt=="object"&&gt!==null?(gt=gt.delay,gt=typeof gt=="number"&&0<gt?ht+gt:ht):gt=ht,Y){case 1:var xt=-1;break;case 2:xt=250;break;case 5:xt=1073741823;break;case 4:xt=1e4;break;default:xt=5e3}return xt=gt+xt,Y={id:p++,callback:at,priorityLevel:Y,startTime:gt,expirationTime:xt,sortIndex:-1},gt>ht?(Y.sortIndex=gt,t(d,Y),e(f)===null&&Y===e(d)&&(S?(F(M),M=-1):S=!0,Tt($,gt-ht))):(Y.sortIndex=xt,t(f,Y),w||x||(w=!0,nt||(nt=!0,z()))),Y},n.unstable_shouldYield=P,n.unstable_wrapCallback=function(Y){var at=b;return function(){var gt=b;b=at;try{return Y.apply(this,arguments)}finally{b=gt}}}})(np)),np}var aT;function bR(){return aT||(aT=1,ep.exports=_R()),ep.exports}var ip={exports:{}},cn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oT;function vR(){if(oT)return cn;oT=1;var n=Sy();function t(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(f,d,p){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:_==null?null:""+_,children:f,containerInfo:d,implementation:p}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return cn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,cn.createPortal=function(f,d){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return o(f,d,null,p)},cn.flushSync=function(f){var d=c.T,p=i.p;try{if(c.T=null,i.p=2,f)return f()}finally{c.T=d,i.p=p,i.d.f()}},cn.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,i.d.C(f,d))},cn.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},cn.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var p=d.as,_=u(p,d.crossOrigin),b=typeof d.integrity=="string"?d.integrity:void 0,x=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;p==="style"?i.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:_,integrity:b,fetchPriority:x}):p==="script"&&i.d.X(f,{crossOrigin:_,integrity:b,fetchPriority:x,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},cn.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var p=u(d.as,d.crossOrigin);i.d.M(f,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&i.d.M(f)},cn.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var p=d.as,_=u(p,d.crossOrigin);i.d.L(f,p,{crossOrigin:_,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},cn.preloadModule=function(f,d){if(typeof f=="string")if(d){var p=u(d.as,d.crossOrigin);i.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else i.d.m(f)},cn.requestFormReset=function(f){i.d.r(f)},cn.unstable_batchedUpdates=function(f,d){return f(d)},cn.useFormState=function(f,d,p){return c.H.useFormState(f,d,p)},cn.useFormStatus=function(){return c.H.useHostTransitionStatus()},cn.version="19.2.0",cn}var lT;function TR(){if(lT)return ip.exports;lT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),ip.exports=vR(),ip.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cT;function ER(){if(cT)return Ac;cT=1;var n=bR(),t=Sy(),e=TR();function i(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var a=s,l=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(l=a.return),s=a.return;while(s)}return a.tag===3?l:null}function c(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function u(s){if(s.tag===31){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function f(s){if(o(s)!==s)throw Error(i(188))}function d(s){var a=s.alternate;if(!a){if(a=o(s),a===null)throw Error(i(188));return a!==s?null:s}for(var l=s,h=a;;){var m=l.return;if(m===null)break;var y=m.alternate;if(y===null){if(h=m.return,h!==null){l=h;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===l)return f(m),s;if(y===h)return f(m),a;y=y.sibling}throw Error(i(188))}if(l.return!==h.return)l=m,h=y;else{for(var T=!1,A=m.child;A;){if(A===l){T=!0,l=m,h=y;break}if(A===h){T=!0,h=m,l=y;break}A=A.sibling}if(!T){for(A=y.child;A;){if(A===l){T=!0,l=y,h=m;break}if(A===h){T=!0,h=y,l=m;break}A=A.sibling}if(!T)throw Error(i(189))}}if(l.alternate!==h)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?s:a}function p(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=p(s),a!==null)return a;s=s.sibling}return null}var _=Object.assign,b=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),F=Symbol.for("react.consumer"),W=Symbol.for("react.context"),J=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),nt=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function z(s){return s===null||typeof s!="object"?null:(s=k&&s[k]||s["@@iterator"],typeof s=="function"?s:null)}var N=Symbol.for("react.client.reference");function kt(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===N?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case S:return"Fragment";case L:return"Profiler";case D:return"StrictMode";case $:return"Suspense";case nt:return"SuspenseList";case O:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case w:return"Portal";case W:return s.displayName||"Context";case F:return(s._context.displayName||"Context")+".Consumer";case J:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case M:return a=s.displayName||null,a!==null?a:kt(s.type)||"Memo";case C:a=s._payload,s=s._init;try{return kt(s(a))}catch{}}return null}var Tt=Array.isArray,Y=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,at=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,gt={pending:!1,data:null,method:null,action:null},ht=[],xt=-1;function j(s){return{current:s}}function tt(s){0>xt||(s.current=ht[xt],ht[xt]=null,xt--)}function lt(s,a){xt++,ht[xt]=s.current,s.current=a}var ut=j(null),vt=j(null),St=j(null),Gt=j(null);function He(s,a){switch(lt(St,a),lt(vt,s),lt(ut,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?Sv(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=Sv(a),s=Av(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}tt(ut),lt(ut,s)}function ge(){tt(ut),tt(vt),tt(St)}function $r(s){s.memoizedState!==null&&lt(Gt,s);var a=ut.current,l=Av(a,s.type);a!==l&&(lt(vt,s),lt(ut,l))}function eo(s){vt.current===s&&(tt(ut),tt(vt)),Gt.current===s&&(tt(Gt),vc._currentValue=gt)}var no,io;function Ci(s){if(no===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);no=a&&a[1]||"",io=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+no+s+io}var vl=!1;function Jr(s,a){if(!s||vl)return"";vl=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(a){var it=function(){throw Error()};if(Object.defineProperty(it.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(it,[])}catch(Q){var K=Q}Reflect.construct(s,[],it)}else{try{it.call()}catch(Q){K=Q}s.call(it.prototype)}}else{try{throw Error()}catch(Q){K=Q}(it=s())&&typeof it.catch=="function"&&it.catch(function(){})}}catch(Q){if(Q&&K&&typeof Q.stack=="string")return[Q.stack,K.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=h.DetermineComponentFrameRoot(),T=y[0],A=y[1];if(T&&A){var V=T.split(`
`),G=A.split(`
`);for(m=h=0;h<V.length&&!V[h].includes("DetermineComponentFrameRoot");)h++;for(;m<G.length&&!G[m].includes("DetermineComponentFrameRoot");)m++;if(h===V.length||m===G.length)for(h=V.length-1,m=G.length-1;1<=h&&0<=m&&V[h]!==G[m];)m--;for(;1<=h&&0<=m;h--,m--)if(V[h]!==G[m]){if(h!==1||m!==1)do if(h--,m--,0>m||V[h]!==G[m]){var Z=`
`+V[h].replace(" at new "," at ");return s.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",s.displayName)),Z}while(1<=h&&0<=m);break}}}finally{vl=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?Ci(l):""}function Tl(s,a){switch(s.tag){case 26:case 27:case 5:return Ci(s.type);case 16:return Ci("Lazy");case 13:return s.child!==a&&a!==null?Ci("Suspense Fallback"):Ci("Suspense");case 19:return Ci("SuspenseList");case 0:case 15:return Jr(s.type,!1);case 11:return Jr(s.type.render,!1);case 1:return Jr(s.type,!0);case 31:return Ci("Activity");default:return""}}function El(s){try{var a="",l=null;do a+=Tl(s,l),l=s,s=s.return;while(s);return a}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var Ie=Object.prototype.hasOwnProperty,qe=n.unstable_scheduleCallback,Us=n.unstable_cancelCallback,tg=n.unstable_shouldYield,Nu=n.unstable_requestPaint,_n=n.unstable_now,Zr=n.unstable_getCurrentPriorityLevel,xl=n.unstable_ImmediatePriority,Sl=n.unstable_UserBlockingPriority,Bs=n.unstable_NormalPriority,eg=n.unstable_LowPriority,ku=n.unstable_IdlePriority,Pu=n.log,Vu=n.unstable_setDisableYieldValue,oi=null,Ze=null;function Gn(s){if(typeof Pu=="function"&&Vu(s),Ze&&typeof Ze.setStrictMode=="function")try{Ze.setStrictMode(oi,s)}catch{}}var xe=Math.clz32?Math.clz32:zu,Lu=Math.log,so=Math.LN2;function zu(s){return s>>>=0,s===0?32:31-(Lu(s)/so|0)|0}var Ri=256,ta=262144,De=4194304;function Ii(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Di(s,a,l){var h=s.pendingLanes;if(h===0)return 0;var m=0,y=s.suspendedLanes,T=s.pingedLanes;s=s.warmLanes;var A=h&134217727;return A!==0?(h=A&~y,h!==0?m=Ii(h):(T&=A,T!==0?m=Ii(T):l||(l=A&~s,l!==0&&(m=Ii(l))))):(A=h&~y,A!==0?m=Ii(A):T!==0?m=Ii(T):l||(l=h&~s,l!==0&&(m=Ii(l)))),m===0?0:a!==0&&a!==m&&(a&y)===0&&(y=m&-m,l=a&-a,y>=l||y===32&&(l&4194048)!==0)?a:m}function li(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function ng(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ju(){var s=De;return De<<=1,(De&62914560)===0&&(De=4194304),s}function Mi(s){for(var a=[],l=0;31>l;l++)a.push(s);return a}function ea(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function ig(s,a,l,h,m,y){var T=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var A=s.entanglements,V=s.expirationTimes,G=s.hiddenUpdates;for(l=T&~l;0<l;){var Z=31-xe(l),it=1<<Z;A[Z]=0,V[Z]=-1;var K=G[Z];if(K!==null)for(G[Z]=null,Z=0;Z<K.length;Z++){var Q=K[Z];Q!==null&&(Q.lane&=-536870913)}l&=~it}h!==0&&na(s,h,0),y!==0&&m===0&&s.tag!==0&&(s.suspendedLanes|=y&~(T&~a))}function na(s,a,l){s.pendingLanes|=a,s.suspendedLanes&=~a;var h=31-xe(a);s.entangledLanes|=a,s.entanglements[h]=s.entanglements[h]|1073741824|l&261930}function Al(s,a){var l=s.entangledLanes|=a;for(s=s.entanglements;l;){var h=31-xe(l),m=1<<h;m&a|s[h]&a&&(s[h]|=a),l&=~m}}function wl(s,a){var l=a&-a;return l=(l&42)!==0?1:ia(l),(l&(s.suspendedLanes|a))!==0?0:l}function ia(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function rs(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Uu(){var s=at.p;return s!==0?s:(s=window.event,s===void 0?32:Wv(s.type))}function ci(s,a){var l=at.p;try{return at.p=s,a()}finally{at.p=l}}var ui=Math.random().toString(36).slice(2),Me="__reactFiber$"+ui,We="__reactProps$"+ui,Oi="__reactContainer$"+ui,ro="__reactEvents$"+ui,sg="__reactListeners$"+ui,Bu="__reactHandles$"+ui,Fu="__reactResources$"+ui,Ni="__reactMarker$"+ui;function ao(s){delete s[Me],delete s[We],delete s[ro],delete s[sg],delete s[Bu]}function ki(s){var a=s[Me];if(a)return a;for(var l=s.parentNode;l;){if(a=l[Oi]||l[Me]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(s=Ov(s);s!==null;){if(l=s[Me])return l;s=Ov(s)}return a}s=l,l=s.parentNode}return null}function Yn(s){if(s=s[Me]||s[Oi]){var a=s.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return s}return null}function Nn(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(i(33))}function Pi(s){var a=s[Fu];return a||(a=s[Fu]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Oe(s){s[Ni]=!0}var Cl=new Set,Rl={};function Vi(s,a){Li(s,a),Li(s+"Capture",a)}function Li(s,a){for(Rl[s]=a,s=0;s<a.length;s++)Cl.add(a[s])}var Il=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Dl={},Ml={};function Hu(s){return Ie.call(Ml,s)?!0:Ie.call(Dl,s)?!1:Il.test(s)?Ml[s]=!0:(Dl[s]=!0,!1)}function oo(s,a,l){if(Hu(a))if(l===null)s.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var h=a.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+l)}}function kn(s,a,l){if(l===null)s.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+l)}}function Ne(s,a,l,h){if(h===null)s.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(a,l,""+h)}}function Xe(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Fs(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Ol(s,a,l){var h=Object.getOwnPropertyDescriptor(s.constructor.prototype,a);if(!s.hasOwnProperty(a)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var m=h.get,y=h.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return m.call(this)},set:function(T){l=""+T,y.call(this,T)}}),Object.defineProperty(s,a,{enumerable:h.enumerable}),{getValue:function(){return l},setValue:function(T){l=""+T},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function Zt(s){if(!s._valueTracker){var a=Fs(s)?"checked":"value";s._valueTracker=Ol(s,a,""+s[a])}}function sa(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var l=a.getValue(),h="";return s&&(h=Fs(s)?s.checked?"true":"false":s.value),s=h,s!==l?(a.setValue(s),!0):!1}function zi(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var ra=/[\n"\\]/g;function Tn(s){return s.replace(ra,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function lo(s,a,l,h,m,y,T,A){s.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?s.type=T:s.removeAttribute("type"),a!=null?T==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+Xe(a)):s.value!==""+Xe(a)&&(s.value=""+Xe(a)):T!=="submit"&&T!=="reset"||s.removeAttribute("value"),a!=null?Nl(s,T,Xe(a)):l!=null?Nl(s,T,Xe(l)):h!=null&&s.removeAttribute("value"),m==null&&y!=null&&(s.defaultChecked=!!y),m!=null&&(s.checked=m&&typeof m!="function"&&typeof m!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?s.name=""+Xe(A):s.removeAttribute("name")}function qu(s,a,l,h,m,y,T,A){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(s.type=y),a!=null||l!=null){if(!(y!=="submit"&&y!=="reset"||a!=null)){Zt(s);return}l=l!=null?""+Xe(l):"",a=a!=null?""+Xe(a):l,A||a===s.value||(s.value=a),s.defaultValue=a}h=h??m,h=typeof h!="function"&&typeof h!="symbol"&&!!h,s.checked=A?s.checked:!!h,s.defaultChecked=!!h,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(s.name=T),Zt(s)}function Nl(s,a,l){a==="number"&&zi(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function Hs(s,a,l,h){if(s=s.options,a){a={};for(var m=0;m<l.length;m++)a["$"+l[m]]=!0;for(l=0;l<s.length;l++)m=a.hasOwnProperty("$"+s[l].value),s[l].selected!==m&&(s[l].selected=m),m&&h&&(s[l].defaultSelected=!0)}else{for(l=""+Xe(l),a=null,m=0;m<s.length;m++){if(s[m].value===l){s[m].selected=!0,h&&(s[m].defaultSelected=!0);return}a!==null||s[m].disabled||(a=s[m])}a!==null&&(a.selected=!0)}}function Gu(s,a,l){if(a!=null&&(a=""+Xe(a),a!==s.value&&(s.value=a),l==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=l!=null?""+Xe(l):""}function qs(s,a,l,h){if(a==null){if(h!=null){if(l!=null)throw Error(i(92));if(Tt(h)){if(1<h.length)throw Error(i(93));h=h[0]}l=h}l==null&&(l=""),a=l}l=Xe(a),s.defaultValue=l,h=s.textContent,h===l&&h!==""&&h!==null&&(s.value=h),Zt(s)}function En(s,a){if(a){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=a;return}}s.textContent=a}var Yu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function kl(s,a,l){var h=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?h?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":h?s.setProperty(a,l):typeof l!="number"||l===0||Yu.has(a)?a==="float"?s.cssFloat=l:s[a]=(""+l).trim():s[a]=l+"px"}function Pl(s,a,l){if(a!=null&&typeof a!="object")throw Error(i(62));if(s=s.style,l!=null){for(var h in l)!l.hasOwnProperty(h)||a!=null&&a.hasOwnProperty(h)||(h.indexOf("--")===0?s.setProperty(h,""):h==="float"?s.cssFloat="":s[h]="");for(var m in a)h=a[m],a.hasOwnProperty(m)&&l[m]!==h&&kl(s,m,h)}else for(var y in a)a.hasOwnProperty(y)&&kl(s,y,a[y])}function co(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ku=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Gs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function uo(s){return Gs.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function hi(){}var Vl=null;function Kn(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ys=null,ji=null;function aa(s){var a=Yn(s);if(a&&(s=a.stateNode)){var l=s[We]||null;t:switch(s=a.stateNode,a.type){case"input":if(lo(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Tn(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var h=l[a];if(h!==s&&h.form===s.form){var m=h[We]||null;if(!m)throw Error(i(90));lo(h,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(a=0;a<l.length;a++)h=l[a],h.form===s.form&&sa(h)}break t;case"textarea":Gu(s,l.value,l.defaultValue);break t;case"select":a=l.value,a!=null&&Hs(s,!!l.multiple,a,!1)}}}var ho=!1;function Ks(s,a,l){if(ho)return s(a,l);ho=!0;try{var h=s(a);return h}finally{if(ho=!1,(Ys!==null||ji!==null)&&(Uh(),Ys&&(a=Ys,s=ji,ji=Ys=null,aa(a),s)))for(a=0;a<s.length;a++)aa(s[a])}}function fi(s,a){var l=s.stateNode;if(l===null)return null;var h=l[We]||null;if(h===null)return null;l=h[a];t:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(s=s.type,h=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!h;break t;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(i(231,a,typeof l));return l}var Wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),oa=!1;if(Wn)try{var ie={};Object.defineProperty(ie,"passive",{get:function(){oa=!0}}),window.addEventListener("test",ie,ie),window.removeEventListener("test",ie,ie)}catch{oa=!1}var Ui=null,Ll=null,la=null;function zl(){if(la)return la;var s,a=Ll,l=a.length,h,m="value"in Ui?Ui.value:Ui.textContent,y=m.length;for(s=0;s<l&&a[s]===m[s];s++);var T=l-s;for(h=1;h<=T&&a[l-h]===m[y-h];h++);return la=m.slice(s,1<h?1-h:void 0)}function ca(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function as(){return!0}function di(){return!1}function tn(s){function a(l,h,m,y,T){this._reactName=l,this._targetInst=m,this.type=h,this.nativeEvent=y,this.target=T,this.currentTarget=null;for(var A in s)s.hasOwnProperty(A)&&(l=s[A],this[A]=l?l(y):y[A]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?as:di,this.isPropagationStopped=di,this}return _(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=as)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=as)},persist:function(){},isPersistent:as}),a}var os={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bi=tn(os),Ws=_({},os,{view:0,detail:0}),jl=tn(Ws),Xs,fo,Fi,go=_({},Ws,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qs,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Fi&&(Fi&&s.type==="mousemove"?(Xs=s.screenX-Fi.screenX,fo=s.screenY-Fi.screenY):fo=Xs=0,Fi=s),Xs)},movementY:function(s){return"movementY"in s?s.movementY:fo}}),Ul=tn(go),ua=_({},go,{dataTransfer:0}),Wu=tn(ua),Xu=_({},Ws,{relatedTarget:0}),ha=tn(Xu),Bl=_({},os,{animationName:0,elapsedTime:0,pseudoElement:0}),Qu=tn(Bl),mo=_({},os,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),$u=tn(mo),Ju=_({},os,{data:0}),Hi=tn(Ju),Zu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},th={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nh(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=eh[s])?!!a[s]:!1}function Qs(){return nh}var bn=_({},Ws,{key:function(s){if(s.key){var a=Zu[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=ca(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?th[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qs,charCode:function(s){return s.type==="keypress"?ca(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?ca(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),ih=tn(bn),sh=_({},go,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ls=tn(sh),g=_({},Ws,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qs}),v=tn(g),E=_({},os,{propertyName:0,elapsedTime:0,pseudoElement:0}),R=tn(E),H=_({},go,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),X=tn(H),ot=_({},os,{newState:0,oldState:0}),Mt=tn(ot),Se=[9,13,27,32],Qt=Wn&&"CompositionEvent"in window,me=null;Wn&&"documentMode"in document&&(me=document.documentMode);var Xn=Wn&&"TextEvent"in window&&!me,qi=Wn&&(!Qt||me&&8<me&&11>=me),gi=" ",mi=!1;function fa(s,a){switch(s){case"keyup":return Se.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function po(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var yo=!1;function Vw(s,a){switch(s){case"compositionend":return po(a);case"keypress":return a.which!==32?null:(mi=!0,gi);case"textInput":return s=a.data,s===gi&&mi?null:s;default:return null}}function Lw(s,a){if(yo)return s==="compositionend"||!Qt&&fa(s,a)?(s=zl(),la=Ll=Ui=null,yo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return qi&&a.locale!=="ko"?null:a.data;default:return null}}var zw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function P_(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!zw[s.type]:a==="textarea"}function V_(s,a,l,h){Ys?ji?ji.push(h):ji=[h]:Ys=h,a=Kh(a,"onChange"),0<a.length&&(l=new Bi("onChange","change",null,l,h),s.push({event:l,listeners:a}))}var Fl=null,Hl=null;function jw(s){_v(s,0)}function rh(s){var a=Nn(s);if(sa(a))return s}function L_(s,a){if(s==="change")return a}var z_=!1;if(Wn){var rg;if(Wn){var ag="oninput"in document;if(!ag){var j_=document.createElement("div");j_.setAttribute("oninput","return;"),ag=typeof j_.oninput=="function"}rg=ag}else rg=!1;z_=rg&&(!document.documentMode||9<document.documentMode)}function U_(){Fl&&(Fl.detachEvent("onpropertychange",B_),Hl=Fl=null)}function B_(s){if(s.propertyName==="value"&&rh(Hl)){var a=[];V_(a,Hl,s,Kn(s)),Ks(jw,a)}}function Uw(s,a,l){s==="focusin"?(U_(),Fl=a,Hl=l,Fl.attachEvent("onpropertychange",B_)):s==="focusout"&&U_()}function Bw(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return rh(Hl)}function Fw(s,a){if(s==="click")return rh(a)}function Hw(s,a){if(s==="input"||s==="change")return rh(a)}function qw(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var Pn=typeof Object.is=="function"?Object.is:qw;function ql(s,a){if(Pn(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var l=Object.keys(s),h=Object.keys(a);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var m=l[h];if(!Ie.call(a,m)||!Pn(s[m],a[m]))return!1}return!0}function F_(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function H_(s,a){var l=F_(s);s=0;for(var h;l;){if(l.nodeType===3){if(h=s+l.textContent.length,s<=a&&h>=a)return{node:l,offset:a-s};s=h}t:{for(;l;){if(l.nextSibling){l=l.nextSibling;break t}l=l.parentNode}l=void 0}l=F_(l)}}function q_(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?q_(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function G_(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=zi(s.document);a instanceof s.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)s=a.contentWindow;else break;a=zi(s.document)}return a}function og(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var Gw=Wn&&"documentMode"in document&&11>=document.documentMode,_o=null,lg=null,Gl=null,cg=!1;function Y_(s,a,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;cg||_o==null||_o!==zi(h)||(h=_o,"selectionStart"in h&&og(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Gl&&ql(Gl,h)||(Gl=h,h=Kh(lg,"onSelect"),0<h.length&&(a=new Bi("onSelect","select",null,a,l),s.push({event:a,listeners:h}),a.target=_o)))}function da(s,a){var l={};return l[s.toLowerCase()]=a.toLowerCase(),l["Webkit"+s]="webkit"+a,l["Moz"+s]="moz"+a,l}var bo={animationend:da("Animation","AnimationEnd"),animationiteration:da("Animation","AnimationIteration"),animationstart:da("Animation","AnimationStart"),transitionrun:da("Transition","TransitionRun"),transitionstart:da("Transition","TransitionStart"),transitioncancel:da("Transition","TransitionCancel"),transitionend:da("Transition","TransitionEnd")},ug={},K_={};Wn&&(K_=document.createElement("div").style,"AnimationEvent"in window||(delete bo.animationend.animation,delete bo.animationiteration.animation,delete bo.animationstart.animation),"TransitionEvent"in window||delete bo.transitionend.transition);function ga(s){if(ug[s])return ug[s];if(!bo[s])return s;var a=bo[s],l;for(l in a)if(a.hasOwnProperty(l)&&l in K_)return ug[s]=a[l];return s}var W_=ga("animationend"),X_=ga("animationiteration"),Q_=ga("animationstart"),Yw=ga("transitionrun"),Kw=ga("transitionstart"),Ww=ga("transitioncancel"),$_=ga("transitionend"),J_=new Map,hg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");hg.push("scrollEnd");function pi(s,a){J_.set(s,a),Vi(a,[s])}var ah=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Qn=[],vo=0,fg=0;function oh(){for(var s=vo,a=fg=vo=0;a<s;){var l=Qn[a];Qn[a++]=null;var h=Qn[a];Qn[a++]=null;var m=Qn[a];Qn[a++]=null;var y=Qn[a];if(Qn[a++]=null,h!==null&&m!==null){var T=h.pending;T===null?m.next=m:(m.next=T.next,T.next=m),h.pending=m}y!==0&&Z_(l,m,y)}}function lh(s,a,l,h){Qn[vo++]=s,Qn[vo++]=a,Qn[vo++]=l,Qn[vo++]=h,fg|=h,s.lanes|=h,s=s.alternate,s!==null&&(s.lanes|=h)}function dg(s,a,l,h){return lh(s,a,l,h),ch(s)}function ma(s,a){return lh(s,null,null,a),ch(s)}function Z_(s,a,l){s.lanes|=l;var h=s.alternate;h!==null&&(h.lanes|=l);for(var m=!1,y=s.return;y!==null;)y.childLanes|=l,h=y.alternate,h!==null&&(h.childLanes|=l),y.tag===22&&(s=y.stateNode,s===null||s._visibility&1||(m=!0)),s=y,y=y.return;return s.tag===3?(y=s.stateNode,m&&a!==null&&(m=31-xe(l),s=y.hiddenUpdates,h=s[m],h===null?s[m]=[a]:h.push(a),a.lane=l|536870912),y):null}function ch(s){if(50<dc)throw dc=0,Em=null,Error(i(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var To={};function Xw(s,a,l,h){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vn(s,a,l,h){return new Xw(s,a,l,h)}function gg(s){return s=s.prototype,!(!s||!s.isReactComponent)}function cs(s,a){var l=s.alternate;return l===null?(l=Vn(s.tag,a,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=a,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,a=s.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function t0(s,a){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,a=l.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function uh(s,a,l,h,m,y){var T=0;if(h=s,typeof s=="function")gg(s)&&(T=1);else if(typeof s=="string")T=tR(s,l,ut.current)?26:s==="html"||s==="head"||s==="body"?27:5;else t:switch(s){case O:return s=Vn(31,l,a,m),s.elementType=O,s.lanes=y,s;case S:return pa(l.children,m,y,a);case D:T=8,m|=24;break;case L:return s=Vn(12,l,a,m|2),s.elementType=L,s.lanes=y,s;case $:return s=Vn(13,l,a,m),s.elementType=$,s.lanes=y,s;case nt:return s=Vn(19,l,a,m),s.elementType=nt,s.lanes=y,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case W:T=10;break t;case F:T=9;break t;case J:T=11;break t;case M:T=14;break t;case C:T=16,h=null;break t}T=29,l=Error(i(130,s===null?"null":typeof s,"")),h=null}return a=Vn(T,l,a,m),a.elementType=s,a.type=h,a.lanes=y,a}function pa(s,a,l,h){return s=Vn(7,s,h,a),s.lanes=l,s}function mg(s,a,l){return s=Vn(6,s,null,a),s.lanes=l,s}function e0(s){var a=Vn(18,null,null,0);return a.stateNode=s,a}function pg(s,a,l){return a=Vn(4,s.children!==null?s.children:[],s.key,a),a.lanes=l,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var n0=new WeakMap;function $n(s,a){if(typeof s=="object"&&s!==null){var l=n0.get(s);return l!==void 0?l:(a={value:s,source:a,stack:El(a)},n0.set(s,a),a)}return{value:s,source:a,stack:El(a)}}var Eo=[],xo=0,hh=null,Yl=0,Jn=[],Zn=0,$s=null,Gi=1,Yi="";function us(s,a){Eo[xo++]=Yl,Eo[xo++]=hh,hh=s,Yl=a}function i0(s,a,l){Jn[Zn++]=Gi,Jn[Zn++]=Yi,Jn[Zn++]=$s,$s=s;var h=Gi;s=Yi;var m=32-xe(h)-1;h&=~(1<<m),l+=1;var y=32-xe(a)+m;if(30<y){var T=m-m%5;y=(h&(1<<T)-1).toString(32),h>>=T,m-=T,Gi=1<<32-xe(a)+m|l<<m|h,Yi=y+s}else Gi=1<<y|l<<m|h,Yi=s}function yg(s){s.return!==null&&(us(s,1),i0(s,1,0))}function _g(s){for(;s===hh;)hh=Eo[--xo],Eo[xo]=null,Yl=Eo[--xo],Eo[xo]=null;for(;s===$s;)$s=Jn[--Zn],Jn[Zn]=null,Yi=Jn[--Zn],Jn[Zn]=null,Gi=Jn[--Zn],Jn[Zn]=null}function s0(s,a){Jn[Zn++]=Gi,Jn[Zn++]=Yi,Jn[Zn++]=$s,Gi=a.id,Yi=a.overflow,$s=s}var en=null,ue=null,qt=!1,Js=null,ti=!1,bg=Error(i(519));function Zs(s){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Kl($n(a,s)),bg}function r0(s){var a=s.stateNode,l=s.type,h=s.memoizedProps;switch(a[Me]=s,a[We]=h,l){case"dialog":Vt("cancel",a),Vt("close",a);break;case"iframe":case"object":case"embed":Vt("load",a);break;case"video":case"audio":for(l=0;l<mc.length;l++)Vt(mc[l],a);break;case"source":Vt("error",a);break;case"img":case"image":case"link":Vt("error",a),Vt("load",a);break;case"details":Vt("toggle",a);break;case"input":Vt("invalid",a),qu(a,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":Vt("invalid",a);break;case"textarea":Vt("invalid",a),qs(a,h.value,h.defaultValue,h.children)}l=h.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||h.suppressHydrationWarning===!0||Ev(a.textContent,l)?(h.popover!=null&&(Vt("beforetoggle",a),Vt("toggle",a)),h.onScroll!=null&&Vt("scroll",a),h.onScrollEnd!=null&&Vt("scrollend",a),h.onClick!=null&&(a.onclick=hi),a=!0):a=!1,a||Zs(s,!0)}function a0(s){for(en=s.return;en;)switch(en.tag){case 5:case 31:case 13:ti=!1;return;case 27:case 3:ti=!0;return;default:en=en.return}}function So(s){if(s!==en)return!1;if(!qt)return a0(s),qt=!0,!1;var a=s.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||Lm(s.type,s.memoizedProps)),l=!l),l&&ue&&Zs(s),a0(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));ue=Mv(s)}else if(a===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));ue=Mv(s)}else a===27?(a=ue,dr(s.type)?(s=Fm,Fm=null,ue=s):ue=a):ue=en?ni(s.stateNode.nextSibling):null;return!0}function ya(){ue=en=null,qt=!1}function vg(){var s=Js;return s!==null&&(wn===null?wn=s:wn.push.apply(wn,s),Js=null),s}function Kl(s){Js===null?Js=[s]:Js.push(s)}var Tg=j(null),_a=null,hs=null;function tr(s,a,l){lt(Tg,a._currentValue),a._currentValue=l}function fs(s){s._currentValue=Tg.current,tt(Tg)}function Eg(s,a,l){for(;s!==null;){var h=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,h!==null&&(h.childLanes|=a)):h!==null&&(h.childLanes&a)!==a&&(h.childLanes|=a),s===l)break;s=s.return}}function xg(s,a,l,h){var m=s.child;for(m!==null&&(m.return=s);m!==null;){var y=m.dependencies;if(y!==null){var T=m.child;y=y.firstContext;t:for(;y!==null;){var A=y;y=m;for(var V=0;V<a.length;V++)if(A.context===a[V]){y.lanes|=l,A=y.alternate,A!==null&&(A.lanes|=l),Eg(y.return,l,s),h||(T=null);break t}y=A.next}}else if(m.tag===18){if(T=m.return,T===null)throw Error(i(341));T.lanes|=l,y=T.alternate,y!==null&&(y.lanes|=l),Eg(T,l,s),T=null}else T=m.child;if(T!==null)T.return=m;else for(T=m;T!==null;){if(T===s){T=null;break}if(m=T.sibling,m!==null){m.return=T.return,T=m;break}T=T.return}m=T}}function Ao(s,a,l,h){s=null;for(var m=a,y=!1;m!==null;){if(!y){if((m.flags&524288)!==0)y=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var T=m.alternate;if(T===null)throw Error(i(387));if(T=T.memoizedProps,T!==null){var A=m.type;Pn(m.pendingProps.value,T.value)||(s!==null?s.push(A):s=[A])}}else if(m===Gt.current){if(T=m.alternate,T===null)throw Error(i(387));T.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(s!==null?s.push(vc):s=[vc])}m=m.return}s!==null&&xg(a,s,l,h),a.flags|=262144}function fh(s){for(s=s.firstContext;s!==null;){if(!Pn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function ba(s){_a=s,hs=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function nn(s){return o0(_a,s)}function dh(s,a){return _a===null&&ba(s),o0(s,a)}function o0(s,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},hs===null){if(s===null)throw Error(i(308));hs=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else hs=hs.next=a;return l}var Qw=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(l,h){s.push(h)}};this.abort=function(){a.aborted=!0,s.forEach(function(l){return l()})}},$w=n.unstable_scheduleCallback,Jw=n.unstable_NormalPriority,ke={$$typeof:W,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Sg(){return{controller:new Qw,data:new Map,refCount:0}}function Wl(s){s.refCount--,s.refCount===0&&$w(Jw,function(){s.controller.abort()})}var Xl=null,Ag=0,wo=0,Co=null;function Zw(s,a){if(Xl===null){var l=Xl=[];Ag=0,wo=Rm(),Co={status:"pending",value:void 0,then:function(h){l.push(h)}}}return Ag++,a.then(l0,l0),a}function l0(){if(--Ag===0&&Xl!==null){Co!==null&&(Co.status="fulfilled");var s=Xl;Xl=null,wo=0,Co=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function tC(s,a){var l=[],h={status:"pending",value:null,reason:null,then:function(m){l.push(m)}};return s.then(function(){h.status="fulfilled",h.value=a;for(var m=0;m<l.length;m++)(0,l[m])(a)},function(m){for(h.status="rejected",h.reason=m,m=0;m<l.length;m++)(0,l[m])(void 0)}),h}var c0=Y.S;Y.S=function(s,a){Yb=_n(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&Zw(s,a),c0!==null&&c0(s,a)};var va=j(null);function wg(){var s=va.current;return s!==null?s:oe.pooledCache}function gh(s,a){a===null?lt(va,va.current):lt(va,a.pool)}function u0(){var s=wg();return s===null?null:{parent:ke._currentValue,pool:s}}var Ro=Error(i(460)),Cg=Error(i(474)),mh=Error(i(542)),ph={then:function(){}};function h0(s){return s=s.status,s==="fulfilled"||s==="rejected"}function f0(s,a,l){switch(l=s[l],l===void 0?s.push(a):l!==a&&(a.then(hi,hi),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,g0(s),s;default:if(typeof a.status=="string")a.then(hi,hi);else{if(s=oe,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=a,s.status="pending",s.then(function(h){if(a.status==="pending"){var m=a;m.status="fulfilled",m.value=h}},function(h){if(a.status==="pending"){var m=a;m.status="rejected",m.reason=h}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,g0(s),s}throw Ea=a,Ro}}function Ta(s){try{var a=s._init;return a(s._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Ea=l,Ro):l}}var Ea=null;function d0(){if(Ea===null)throw Error(i(459));var s=Ea;return Ea=null,s}function g0(s){if(s===Ro||s===mh)throw Error(i(483))}var Io=null,Ql=0;function yh(s){var a=Ql;return Ql+=1,Io===null&&(Io=[]),f0(Io,s,a)}function $l(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function _h(s,a){throw a.$$typeof===b?Error(i(525)):(s=Object.prototype.toString.call(a),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function m0(s){function a(B,U){if(s){var q=B.deletions;q===null?(B.deletions=[U],B.flags|=16):q.push(U)}}function l(B,U){if(!s)return null;for(;U!==null;)a(B,U),U=U.sibling;return null}function h(B){for(var U=new Map;B!==null;)B.key!==null?U.set(B.key,B):U.set(B.index,B),B=B.sibling;return U}function m(B,U){return B=cs(B,U),B.index=0,B.sibling=null,B}function y(B,U,q){return B.index=q,s?(q=B.alternate,q!==null?(q=q.index,q<U?(B.flags|=67108866,U):q):(B.flags|=67108866,U)):(B.flags|=1048576,U)}function T(B){return s&&B.alternate===null&&(B.flags|=67108866),B}function A(B,U,q,et){return U===null||U.tag!==6?(U=mg(q,B.mode,et),U.return=B,U):(U=m(U,q),U.return=B,U)}function V(B,U,q,et){var _t=q.type;return _t===S?Z(B,U,q.props.children,et,q.key):U!==null&&(U.elementType===_t||typeof _t=="object"&&_t!==null&&_t.$$typeof===C&&Ta(_t)===U.type)?(U=m(U,q.props),$l(U,q),U.return=B,U):(U=uh(q.type,q.key,q.props,null,B.mode,et),$l(U,q),U.return=B,U)}function G(B,U,q,et){return U===null||U.tag!==4||U.stateNode.containerInfo!==q.containerInfo||U.stateNode.implementation!==q.implementation?(U=pg(q,B.mode,et),U.return=B,U):(U=m(U,q.children||[]),U.return=B,U)}function Z(B,U,q,et,_t){return U===null||U.tag!==7?(U=pa(q,B.mode,et,_t),U.return=B,U):(U=m(U,q),U.return=B,U)}function it(B,U,q){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=mg(""+U,B.mode,q),U.return=B,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case x:return q=uh(U.type,U.key,U.props,null,B.mode,q),$l(q,U),q.return=B,q;case w:return U=pg(U,B.mode,q),U.return=B,U;case C:return U=Ta(U),it(B,U,q)}if(Tt(U)||z(U))return U=pa(U,B.mode,q,null),U.return=B,U;if(typeof U.then=="function")return it(B,yh(U),q);if(U.$$typeof===W)return it(B,dh(B,U),q);_h(B,U)}return null}function K(B,U,q,et){var _t=U!==null?U.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return _t!==null?null:A(B,U,""+q,et);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case x:return q.key===_t?V(B,U,q,et):null;case w:return q.key===_t?G(B,U,q,et):null;case C:return q=Ta(q),K(B,U,q,et)}if(Tt(q)||z(q))return _t!==null?null:Z(B,U,q,et,null);if(typeof q.then=="function")return K(B,U,yh(q),et);if(q.$$typeof===W)return K(B,U,dh(B,q),et);_h(B,q)}return null}function Q(B,U,q,et,_t){if(typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint")return B=B.get(q)||null,A(U,B,""+et,_t);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case x:return B=B.get(et.key===null?q:et.key)||null,V(U,B,et,_t);case w:return B=B.get(et.key===null?q:et.key)||null,G(U,B,et,_t);case C:return et=Ta(et),Q(B,U,q,et,_t)}if(Tt(et)||z(et))return B=B.get(q)||null,Z(U,B,et,_t,null);if(typeof et.then=="function")return Q(B,U,q,yh(et),_t);if(et.$$typeof===W)return Q(B,U,q,dh(U,et),_t);_h(U,et)}return null}function mt(B,U,q,et){for(var _t=null,Kt=null,pt=U,Nt=U=0,jt=null;pt!==null&&Nt<q.length;Nt++){pt.index>Nt?(jt=pt,pt=null):jt=pt.sibling;var Wt=K(B,pt,q[Nt],et);if(Wt===null){pt===null&&(pt=jt);break}s&&pt&&Wt.alternate===null&&a(B,pt),U=y(Wt,U,Nt),Kt===null?_t=Wt:Kt.sibling=Wt,Kt=Wt,pt=jt}if(Nt===q.length)return l(B,pt),qt&&us(B,Nt),_t;if(pt===null){for(;Nt<q.length;Nt++)pt=it(B,q[Nt],et),pt!==null&&(U=y(pt,U,Nt),Kt===null?_t=pt:Kt.sibling=pt,Kt=pt);return qt&&us(B,Nt),_t}for(pt=h(pt);Nt<q.length;Nt++)jt=Q(pt,B,Nt,q[Nt],et),jt!==null&&(s&&jt.alternate!==null&&pt.delete(jt.key===null?Nt:jt.key),U=y(jt,U,Nt),Kt===null?_t=jt:Kt.sibling=jt,Kt=jt);return s&&pt.forEach(function(_r){return a(B,_r)}),qt&&us(B,Nt),_t}function Et(B,U,q,et){if(q==null)throw Error(i(151));for(var _t=null,Kt=null,pt=U,Nt=U=0,jt=null,Wt=q.next();pt!==null&&!Wt.done;Nt++,Wt=q.next()){pt.index>Nt?(jt=pt,pt=null):jt=pt.sibling;var _r=K(B,pt,Wt.value,et);if(_r===null){pt===null&&(pt=jt);break}s&&pt&&_r.alternate===null&&a(B,pt),U=y(_r,U,Nt),Kt===null?_t=_r:Kt.sibling=_r,Kt=_r,pt=jt}if(Wt.done)return l(B,pt),qt&&us(B,Nt),_t;if(pt===null){for(;!Wt.done;Nt++,Wt=q.next())Wt=it(B,Wt.value,et),Wt!==null&&(U=y(Wt,U,Nt),Kt===null?_t=Wt:Kt.sibling=Wt,Kt=Wt);return qt&&us(B,Nt),_t}for(pt=h(pt);!Wt.done;Nt++,Wt=q.next())Wt=Q(pt,B,Nt,Wt.value,et),Wt!==null&&(s&&Wt.alternate!==null&&pt.delete(Wt.key===null?Nt:Wt.key),U=y(Wt,U,Nt),Kt===null?_t=Wt:Kt.sibling=Wt,Kt=Wt);return s&&pt.forEach(function(hR){return a(B,hR)}),qt&&us(B,Nt),_t}function ae(B,U,q,et){if(typeof q=="object"&&q!==null&&q.type===S&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case x:t:{for(var _t=q.key;U!==null;){if(U.key===_t){if(_t=q.type,_t===S){if(U.tag===7){l(B,U.sibling),et=m(U,q.props.children),et.return=B,B=et;break t}}else if(U.elementType===_t||typeof _t=="object"&&_t!==null&&_t.$$typeof===C&&Ta(_t)===U.type){l(B,U.sibling),et=m(U,q.props),$l(et,q),et.return=B,B=et;break t}l(B,U);break}else a(B,U);U=U.sibling}q.type===S?(et=pa(q.props.children,B.mode,et,q.key),et.return=B,B=et):(et=uh(q.type,q.key,q.props,null,B.mode,et),$l(et,q),et.return=B,B=et)}return T(B);case w:t:{for(_t=q.key;U!==null;){if(U.key===_t)if(U.tag===4&&U.stateNode.containerInfo===q.containerInfo&&U.stateNode.implementation===q.implementation){l(B,U.sibling),et=m(U,q.children||[]),et.return=B,B=et;break t}else{l(B,U);break}else a(B,U);U=U.sibling}et=pg(q,B.mode,et),et.return=B,B=et}return T(B);case C:return q=Ta(q),ae(B,U,q,et)}if(Tt(q))return mt(B,U,q,et);if(z(q)){if(_t=z(q),typeof _t!="function")throw Error(i(150));return q=_t.call(q),Et(B,U,q,et)}if(typeof q.then=="function")return ae(B,U,yh(q),et);if(q.$$typeof===W)return ae(B,U,dh(B,q),et);_h(B,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,U!==null&&U.tag===6?(l(B,U.sibling),et=m(U,q),et.return=B,B=et):(l(B,U),et=mg(q,B.mode,et),et.return=B,B=et),T(B)):l(B,U)}return function(B,U,q,et){try{Ql=0;var _t=ae(B,U,q,et);return Io=null,_t}catch(pt){if(pt===Ro||pt===mh)throw pt;var Kt=Vn(29,pt,null,B.mode);return Kt.lanes=et,Kt.return=B,Kt}finally{}}}var xa=m0(!0),p0=m0(!1),er=!1;function Rg(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ig(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function nr(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function ir(s,a,l){var h=s.updateQueue;if(h===null)return null;if(h=h.shared,($t&2)!==0){var m=h.pending;return m===null?a.next=a:(a.next=m.next,m.next=a),h.pending=a,a=ch(s),Z_(s,null,l),a}return lh(s,h,a,l),ch(s)}function Jl(s,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var h=a.lanes;h&=s.pendingLanes,l|=h,a.lanes=l,Al(s,l)}}function Dg(s,a){var l=s.updateQueue,h=s.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var m=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var T={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};y===null?m=y=T:y=y.next=T,l=l.next}while(l!==null);y===null?m=y=a:y=y.next=a}else m=y=a;l={baseState:h.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:h.shared,callbacks:h.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=a:s.next=a,l.lastBaseUpdate=a}var Mg=!1;function Zl(){if(Mg){var s=Co;if(s!==null)throw s}}function tc(s,a,l,h){Mg=!1;var m=s.updateQueue;er=!1;var y=m.firstBaseUpdate,T=m.lastBaseUpdate,A=m.shared.pending;if(A!==null){m.shared.pending=null;var V=A,G=V.next;V.next=null,T===null?y=G:T.next=G,T=V;var Z=s.alternate;Z!==null&&(Z=Z.updateQueue,A=Z.lastBaseUpdate,A!==T&&(A===null?Z.firstBaseUpdate=G:A.next=G,Z.lastBaseUpdate=V))}if(y!==null){var it=m.baseState;T=0,Z=G=V=null,A=y;do{var K=A.lane&-536870913,Q=K!==A.lane;if(Q?(zt&K)===K:(h&K)===K){K!==0&&K===wo&&(Mg=!0),Z!==null&&(Z=Z.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});t:{var mt=s,Et=A;K=a;var ae=l;switch(Et.tag){case 1:if(mt=Et.payload,typeof mt=="function"){it=mt.call(ae,it,K);break t}it=mt;break t;case 3:mt.flags=mt.flags&-65537|128;case 0:if(mt=Et.payload,K=typeof mt=="function"?mt.call(ae,it,K):mt,K==null)break t;it=_({},it,K);break t;case 2:er=!0}}K=A.callback,K!==null&&(s.flags|=64,Q&&(s.flags|=8192),Q=m.callbacks,Q===null?m.callbacks=[K]:Q.push(K))}else Q={lane:K,tag:A.tag,payload:A.payload,callback:A.callback,next:null},Z===null?(G=Z=Q,V=it):Z=Z.next=Q,T|=K;if(A=A.next,A===null){if(A=m.shared.pending,A===null)break;Q=A,A=Q.next,Q.next=null,m.lastBaseUpdate=Q,m.shared.pending=null}}while(!0);Z===null&&(V=it),m.baseState=V,m.firstBaseUpdate=G,m.lastBaseUpdate=Z,y===null&&(m.shared.lanes=0),lr|=T,s.lanes=T,s.memoizedState=it}}function y0(s,a){if(typeof s!="function")throw Error(i(191,s));s.call(a)}function _0(s,a){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)y0(l[s],a)}var Do=j(null),bh=j(0);function b0(s,a){s=Ts,lt(bh,s),lt(Do,a),Ts=s|a.baseLanes}function Og(){lt(bh,Ts),lt(Do,Do.current)}function Ng(){Ts=bh.current,tt(Do),tt(bh)}var Ln=j(null),ei=null;function sr(s){var a=s.alternate;lt(Ae,Ae.current&1),lt(Ln,s),ei===null&&(a===null||Do.current!==null||a.memoizedState!==null)&&(ei=s)}function kg(s){lt(Ae,Ae.current),lt(Ln,s),ei===null&&(ei=s)}function v0(s){s.tag===22?(lt(Ae,Ae.current),lt(Ln,s),ei===null&&(ei=s)):rr()}function rr(){lt(Ae,Ae.current),lt(Ln,Ln.current)}function zn(s){tt(Ln),ei===s&&(ei=null),tt(Ae)}var Ae=j(0);function vh(s){for(var a=s;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Um(l)||Bm(l)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var ds=0,Ot=null,se=null,Pe=null,Th=!1,Mo=!1,Sa=!1,Eh=0,ec=0,Oo=null,eC=0;function ve(){throw Error(i(321))}function Pg(s,a){if(a===null)return!1;for(var l=0;l<a.length&&l<s.length;l++)if(!Pn(s[l],a[l]))return!1;return!0}function Vg(s,a,l,h,m,y){return ds=y,Ot=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Y.H=s===null||s.memoizedState===null?ib:$g,Sa=!1,y=l(h,m),Sa=!1,Mo&&(y=E0(a,l,h,m)),T0(s),y}function T0(s){Y.H=sc;var a=se!==null&&se.next!==null;if(ds=0,Pe=se=Ot=null,Th=!1,ec=0,Oo=null,a)throw Error(i(300));s===null||Ve||(s=s.dependencies,s!==null&&fh(s)&&(Ve=!0))}function E0(s,a,l,h){Ot=s;var m=0;do{if(Mo&&(Oo=null),ec=0,Mo=!1,25<=m)throw Error(i(301));if(m+=1,Pe=se=null,s.updateQueue!=null){var y=s.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}Y.H=sb,y=a(l,h)}while(Mo);return y}function nC(){var s=Y.H,a=s.useState()[0];return a=typeof a.then=="function"?nc(a):a,s=s.useState()[0],(se!==null?se.memoizedState:null)!==s&&(Ot.flags|=1024),a}function Lg(){var s=Eh!==0;return Eh=0,s}function zg(s,a,l){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~l}function jg(s){if(Th){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Th=!1}ds=0,Pe=se=Ot=null,Mo=!1,ec=Eh=0,Oo=null}function vn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pe===null?Ot.memoizedState=Pe=s:Pe=Pe.next=s,Pe}function we(){if(se===null){var s=Ot.alternate;s=s!==null?s.memoizedState:null}else s=se.next;var a=Pe===null?Ot.memoizedState:Pe.next;if(a!==null)Pe=a,se=s;else{if(s===null)throw Ot.alternate===null?Error(i(467)):Error(i(310));se=s,s={memoizedState:se.memoizedState,baseState:se.baseState,baseQueue:se.baseQueue,queue:se.queue,next:null},Pe===null?Ot.memoizedState=Pe=s:Pe=Pe.next=s}return Pe}function xh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function nc(s){var a=ec;return ec+=1,Oo===null&&(Oo=[]),s=f0(Oo,s,a),a=Ot,(Pe===null?a.memoizedState:Pe.next)===null&&(a=a.alternate,Y.H=a===null||a.memoizedState===null?ib:$g),s}function Sh(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return nc(s);if(s.$$typeof===W)return nn(s)}throw Error(i(438,String(s)))}function Ug(s){var a=null,l=Ot.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var h=Ot.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(a={data:h.data.map(function(m){return m.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=xh(),Ot.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(s),h=0;h<s;h++)l[h]=P;return a.index++,l}function gs(s,a){return typeof a=="function"?a(s):a}function Ah(s){var a=we();return Bg(a,se,s)}function Bg(s,a,l){var h=s.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=l;var m=s.baseQueue,y=h.pending;if(y!==null){if(m!==null){var T=m.next;m.next=y.next,y.next=T}a.baseQueue=m=y,h.pending=null}if(y=s.baseState,m===null)s.memoizedState=y;else{a=m.next;var A=T=null,V=null,G=a,Z=!1;do{var it=G.lane&-536870913;if(it!==G.lane?(zt&it)===it:(ds&it)===it){var K=G.revertLane;if(K===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),it===wo&&(Z=!0);else if((ds&K)===K){G=G.next,K===wo&&(Z=!0);continue}else it={lane:0,revertLane:G.revertLane,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},V===null?(A=V=it,T=y):V=V.next=it,Ot.lanes|=K,lr|=K;it=G.action,Sa&&l(y,it),y=G.hasEagerState?G.eagerState:l(y,it)}else K={lane:it,revertLane:G.revertLane,gesture:G.gesture,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},V===null?(A=V=K,T=y):V=V.next=K,Ot.lanes|=it,lr|=it;G=G.next}while(G!==null&&G!==a);if(V===null?T=y:V.next=A,!Pn(y,s.memoizedState)&&(Ve=!0,Z&&(l=Co,l!==null)))throw l;s.memoizedState=y,s.baseState=T,s.baseQueue=V,h.lastRenderedState=y}return m===null&&(h.lanes=0),[s.memoizedState,h.dispatch]}function Fg(s){var a=we(),l=a.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var h=l.dispatch,m=l.pending,y=a.memoizedState;if(m!==null){l.pending=null;var T=m=m.next;do y=s(y,T.action),T=T.next;while(T!==m);Pn(y,a.memoizedState)||(Ve=!0),a.memoizedState=y,a.baseQueue===null&&(a.baseState=y),l.lastRenderedState=y}return[y,h]}function x0(s,a,l){var h=Ot,m=we(),y=qt;if(y){if(l===void 0)throw Error(i(407));l=l()}else l=a();var T=!Pn((se||m).memoizedState,l);if(T&&(m.memoizedState=l,Ve=!0),m=m.queue,Gg(w0.bind(null,h,m,s),[s]),m.getSnapshot!==a||T||Pe!==null&&Pe.memoizedState.tag&1){if(h.flags|=2048,No(9,{destroy:void 0},A0.bind(null,h,m,l,a),null),oe===null)throw Error(i(349));y||(ds&127)!==0||S0(h,a,l)}return l}function S0(s,a,l){s.flags|=16384,s={getSnapshot:a,value:l},a=Ot.updateQueue,a===null?(a=xh(),Ot.updateQueue=a,a.stores=[s]):(l=a.stores,l===null?a.stores=[s]:l.push(s))}function A0(s,a,l,h){a.value=l,a.getSnapshot=h,C0(a)&&R0(s)}function w0(s,a,l){return l(function(){C0(a)&&R0(s)})}function C0(s){var a=s.getSnapshot;s=s.value;try{var l=a();return!Pn(s,l)}catch{return!0}}function R0(s){var a=ma(s,2);a!==null&&Cn(a,s,2)}function Hg(s){var a=vn();if(typeof s=="function"){var l=s;if(s=l(),Sa){Gn(!0);try{l()}finally{Gn(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gs,lastRenderedState:s},a}function I0(s,a,l,h){return s.baseState=l,Bg(s,se,typeof h=="function"?h:gs)}function iC(s,a,l,h,m){if(Rh(s))throw Error(i(485));if(s=a.action,s!==null){var y={payload:m,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){y.listeners.push(T)}};Y.T!==null?l(!0):y.isTransition=!1,h(y),l=a.pending,l===null?(y.next=a.pending=y,D0(a,y)):(y.next=l.next,a.pending=l.next=y)}}function D0(s,a){var l=a.action,h=a.payload,m=s.state;if(a.isTransition){var y=Y.T,T={};Y.T=T;try{var A=l(m,h),V=Y.S;V!==null&&V(T,A),M0(s,a,A)}catch(G){qg(s,a,G)}finally{y!==null&&T.types!==null&&(y.types=T.types),Y.T=y}}else try{y=l(m,h),M0(s,a,y)}catch(G){qg(s,a,G)}}function M0(s,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(h){O0(s,a,h)},function(h){return qg(s,a,h)}):O0(s,a,l)}function O0(s,a,l){a.status="fulfilled",a.value=l,N0(a),s.state=l,a=s.pending,a!==null&&(l=a.next,l===a?s.pending=null:(l=l.next,a.next=l,D0(s,l)))}function qg(s,a,l){var h=s.pending;if(s.pending=null,h!==null){h=h.next;do a.status="rejected",a.reason=l,N0(a),a=a.next;while(a!==h)}s.action=null}function N0(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function k0(s,a){return a}function P0(s,a){if(qt){var l=oe.formState;if(l!==null){t:{var h=Ot;if(qt){if(ue){e:{for(var m=ue,y=ti;m.nodeType!==8;){if(!y){m=null;break e}if(m=ni(m.nextSibling),m===null){m=null;break e}}y=m.data,m=y==="F!"||y==="F"?m:null}if(m){ue=ni(m.nextSibling),h=m.data==="F!";break t}}Zs(h)}h=!1}h&&(a=l[0])}}return l=vn(),l.memoizedState=l.baseState=a,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:k0,lastRenderedState:a},l.queue=h,l=tb.bind(null,Ot,h),h.dispatch=l,h=Hg(!1),y=Qg.bind(null,Ot,!1,h.queue),h=vn(),m={state:a,dispatch:null,action:s,pending:null},h.queue=m,l=iC.bind(null,Ot,m,y,l),m.dispatch=l,h.memoizedState=s,[a,l,!1]}function V0(s){var a=we();return L0(a,se,s)}function L0(s,a,l){if(a=Bg(s,a,k0)[0],s=Ah(gs)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var h=nc(a)}catch(T){throw T===Ro?mh:T}else h=a;a=we();var m=a.queue,y=m.dispatch;return l!==a.memoizedState&&(Ot.flags|=2048,No(9,{destroy:void 0},sC.bind(null,m,l),null)),[h,y,s]}function sC(s,a){s.action=a}function z0(s){var a=we(),l=se;if(l!==null)return L0(a,l,s);we(),a=a.memoizedState,l=we();var h=l.queue.dispatch;return l.memoizedState=s,[a,h,!1]}function No(s,a,l,h){return s={tag:s,create:l,deps:h,inst:a,next:null},a=Ot.updateQueue,a===null&&(a=xh(),Ot.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=s.next=s:(h=l.next,l.next=s,s.next=h,a.lastEffect=s),s}function j0(){return we().memoizedState}function wh(s,a,l,h){var m=vn();Ot.flags|=s,m.memoizedState=No(1|a,{destroy:void 0},l,h===void 0?null:h)}function Ch(s,a,l,h){var m=we();h=h===void 0?null:h;var y=m.memoizedState.inst;se!==null&&h!==null&&Pg(h,se.memoizedState.deps)?m.memoizedState=No(a,y,l,h):(Ot.flags|=s,m.memoizedState=No(1|a,y,l,h))}function U0(s,a){wh(8390656,8,s,a)}function Gg(s,a){Ch(2048,8,s,a)}function rC(s){Ot.flags|=4;var a=Ot.updateQueue;if(a===null)a=xh(),Ot.updateQueue=a,a.events=[s];else{var l=a.events;l===null?a.events=[s]:l.push(s)}}function B0(s){var a=we().memoizedState;return rC({ref:a,nextImpl:s}),function(){if(($t&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function F0(s,a){return Ch(4,2,s,a)}function H0(s,a){return Ch(4,4,s,a)}function q0(s,a){if(typeof a=="function"){s=s();var l=a(s);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function G0(s,a,l){l=l!=null?l.concat([s]):null,Ch(4,4,q0.bind(null,a,s),l)}function Yg(){}function Y0(s,a){var l=we();a=a===void 0?null:a;var h=l.memoizedState;return a!==null&&Pg(a,h[1])?h[0]:(l.memoizedState=[s,a],s)}function K0(s,a){var l=we();a=a===void 0?null:a;var h=l.memoizedState;if(a!==null&&Pg(a,h[1]))return h[0];if(h=s(),Sa){Gn(!0);try{s()}finally{Gn(!1)}}return l.memoizedState=[h,a],h}function Kg(s,a,l){return l===void 0||(ds&1073741824)!==0&&(zt&261930)===0?s.memoizedState=a:(s.memoizedState=l,s=Wb(),Ot.lanes|=s,lr|=s,l)}function W0(s,a,l,h){return Pn(l,a)?l:Do.current!==null?(s=Kg(s,l,h),Pn(s,a)||(Ve=!0),s):(ds&42)===0||(ds&1073741824)!==0&&(zt&261930)===0?(Ve=!0,s.memoizedState=l):(s=Wb(),Ot.lanes|=s,lr|=s,a)}function X0(s,a,l,h,m){var y=at.p;at.p=y!==0&&8>y?y:8;var T=Y.T,A={};Y.T=A,Qg(s,!1,a,l);try{var V=m(),G=Y.S;if(G!==null&&G(A,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var Z=tC(V,h);ic(s,a,Z,Bn(s))}else ic(s,a,h,Bn(s))}catch(it){ic(s,a,{then:function(){},status:"rejected",reason:it},Bn())}finally{at.p=y,T!==null&&A.types!==null&&(T.types=A.types),Y.T=T}}function aC(){}function Wg(s,a,l,h){if(s.tag!==5)throw Error(i(476));var m=Q0(s).queue;X0(s,m,a,gt,l===null?aC:function(){return $0(s),l(h)})}function Q0(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:gt,baseState:gt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gs,lastRenderedState:gt},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gs,lastRenderedState:l},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function $0(s){var a=Q0(s);a.next===null&&(a=s.alternate.memoizedState),ic(s,a.next.queue,{},Bn())}function Xg(){return nn(vc)}function J0(){return we().memoizedState}function Z0(){return we().memoizedState}function oC(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var l=Bn();s=nr(l);var h=ir(a,s,l);h!==null&&(Cn(h,a,l),Jl(h,a,l)),a={cache:Sg()},s.payload=a;return}a=a.return}}function lC(s,a,l){var h=Bn();l={lane:h,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Rh(s)?eb(a,l):(l=dg(s,a,l,h),l!==null&&(Cn(l,s,h),nb(l,a,h)))}function tb(s,a,l){var h=Bn();ic(s,a,l,h)}function ic(s,a,l,h){var m={lane:h,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Rh(s))eb(a,m);else{var y=s.alternate;if(s.lanes===0&&(y===null||y.lanes===0)&&(y=a.lastRenderedReducer,y!==null))try{var T=a.lastRenderedState,A=y(T,l);if(m.hasEagerState=!0,m.eagerState=A,Pn(A,T))return lh(s,a,m,0),oe===null&&oh(),!1}catch{}finally{}if(l=dg(s,a,m,h),l!==null)return Cn(l,s,h),nb(l,a,h),!0}return!1}function Qg(s,a,l,h){if(h={lane:2,revertLane:Rm(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Rh(s)){if(a)throw Error(i(479))}else a=dg(s,l,h,2),a!==null&&Cn(a,s,2)}function Rh(s){var a=s.alternate;return s===Ot||a!==null&&a===Ot}function eb(s,a){Mo=Th=!0;var l=s.pending;l===null?a.next=a:(a.next=l.next,l.next=a),s.pending=a}function nb(s,a,l){if((l&4194048)!==0){var h=a.lanes;h&=s.pendingLanes,l|=h,a.lanes=l,Al(s,l)}}var sc={readContext:nn,use:Sh,useCallback:ve,useContext:ve,useEffect:ve,useImperativeHandle:ve,useLayoutEffect:ve,useInsertionEffect:ve,useMemo:ve,useReducer:ve,useRef:ve,useState:ve,useDebugValue:ve,useDeferredValue:ve,useTransition:ve,useSyncExternalStore:ve,useId:ve,useHostTransitionStatus:ve,useFormState:ve,useActionState:ve,useOptimistic:ve,useMemoCache:ve,useCacheRefresh:ve};sc.useEffectEvent=ve;var ib={readContext:nn,use:Sh,useCallback:function(s,a){return vn().memoizedState=[s,a===void 0?null:a],s},useContext:nn,useEffect:U0,useImperativeHandle:function(s,a,l){l=l!=null?l.concat([s]):null,wh(4194308,4,q0.bind(null,a,s),l)},useLayoutEffect:function(s,a){return wh(4194308,4,s,a)},useInsertionEffect:function(s,a){wh(4,2,s,a)},useMemo:function(s,a){var l=vn();a=a===void 0?null:a;var h=s();if(Sa){Gn(!0);try{s()}finally{Gn(!1)}}return l.memoizedState=[h,a],h},useReducer:function(s,a,l){var h=vn();if(l!==void 0){var m=l(a);if(Sa){Gn(!0);try{l(a)}finally{Gn(!1)}}}else m=a;return h.memoizedState=h.baseState=m,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:m},h.queue=s,s=s.dispatch=lC.bind(null,Ot,s),[h.memoizedState,s]},useRef:function(s){var a=vn();return s={current:s},a.memoizedState=s},useState:function(s){s=Hg(s);var a=s.queue,l=tb.bind(null,Ot,a);return a.dispatch=l,[s.memoizedState,l]},useDebugValue:Yg,useDeferredValue:function(s,a){var l=vn();return Kg(l,s,a)},useTransition:function(){var s=Hg(!1);return s=X0.bind(null,Ot,s.queue,!0,!1),vn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,l){var h=Ot,m=vn();if(qt){if(l===void 0)throw Error(i(407));l=l()}else{if(l=a(),oe===null)throw Error(i(349));(zt&127)!==0||S0(h,a,l)}m.memoizedState=l;var y={value:l,getSnapshot:a};return m.queue=y,U0(w0.bind(null,h,y,s),[s]),h.flags|=2048,No(9,{destroy:void 0},A0.bind(null,h,y,l,a),null),l},useId:function(){var s=vn(),a=oe.identifierPrefix;if(qt){var l=Yi,h=Gi;l=(h&~(1<<32-xe(h)-1)).toString(32)+l,a="_"+a+"R_"+l,l=Eh++,0<l&&(a+="H"+l.toString(32)),a+="_"}else l=eC++,a="_"+a+"r_"+l.toString(32)+"_";return s.memoizedState=a},useHostTransitionStatus:Xg,useFormState:P0,useActionState:P0,useOptimistic:function(s){var a=vn();a.memoizedState=a.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=Qg.bind(null,Ot,!0,l),l.dispatch=a,[s,a]},useMemoCache:Ug,useCacheRefresh:function(){return vn().memoizedState=oC.bind(null,Ot)},useEffectEvent:function(s){var a=vn(),l={impl:s};return a.memoizedState=l,function(){if(($t&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},$g={readContext:nn,use:Sh,useCallback:Y0,useContext:nn,useEffect:Gg,useImperativeHandle:G0,useInsertionEffect:F0,useLayoutEffect:H0,useMemo:K0,useReducer:Ah,useRef:j0,useState:function(){return Ah(gs)},useDebugValue:Yg,useDeferredValue:function(s,a){var l=we();return W0(l,se.memoizedState,s,a)},useTransition:function(){var s=Ah(gs)[0],a=we().memoizedState;return[typeof s=="boolean"?s:nc(s),a]},useSyncExternalStore:x0,useId:J0,useHostTransitionStatus:Xg,useFormState:V0,useActionState:V0,useOptimistic:function(s,a){var l=we();return I0(l,se,s,a)},useMemoCache:Ug,useCacheRefresh:Z0};$g.useEffectEvent=B0;var sb={readContext:nn,use:Sh,useCallback:Y0,useContext:nn,useEffect:Gg,useImperativeHandle:G0,useInsertionEffect:F0,useLayoutEffect:H0,useMemo:K0,useReducer:Fg,useRef:j0,useState:function(){return Fg(gs)},useDebugValue:Yg,useDeferredValue:function(s,a){var l=we();return se===null?Kg(l,s,a):W0(l,se.memoizedState,s,a)},useTransition:function(){var s=Fg(gs)[0],a=we().memoizedState;return[typeof s=="boolean"?s:nc(s),a]},useSyncExternalStore:x0,useId:J0,useHostTransitionStatus:Xg,useFormState:z0,useActionState:z0,useOptimistic:function(s,a){var l=we();return se!==null?I0(l,se,s,a):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:Ug,useCacheRefresh:Z0};sb.useEffectEvent=B0;function Jg(s,a,l,h){a=s.memoizedState,l=l(h,a),l=l==null?a:_({},a,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var Zg={enqueueSetState:function(s,a,l){s=s._reactInternals;var h=Bn(),m=nr(h);m.payload=a,l!=null&&(m.callback=l),a=ir(s,m,h),a!==null&&(Cn(a,s,h),Jl(a,s,h))},enqueueReplaceState:function(s,a,l){s=s._reactInternals;var h=Bn(),m=nr(h);m.tag=1,m.payload=a,l!=null&&(m.callback=l),a=ir(s,m,h),a!==null&&(Cn(a,s,h),Jl(a,s,h))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var l=Bn(),h=nr(l);h.tag=2,a!=null&&(h.callback=a),a=ir(s,h,l),a!==null&&(Cn(a,s,l),Jl(a,s,l))}};function rb(s,a,l,h,m,y,T){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(h,y,T):a.prototype&&a.prototype.isPureReactComponent?!ql(l,h)||!ql(m,y):!0}function ab(s,a,l,h){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,h),a.state!==s&&Zg.enqueueReplaceState(a,a.state,null)}function Aa(s,a){var l=a;if("ref"in a){l={};for(var h in a)h!=="ref"&&(l[h]=a[h])}if(s=s.defaultProps){l===a&&(l=_({},l));for(var m in s)l[m]===void 0&&(l[m]=s[m])}return l}function ob(s){ah(s)}function lb(s){console.error(s)}function cb(s){ah(s)}function Ih(s,a){try{var l=s.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(h){setTimeout(function(){throw h})}}function ub(s,a,l){try{var h=s.onCaughtError;h(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function tm(s,a,l){return l=nr(l),l.tag=3,l.payload={element:null},l.callback=function(){Ih(s,a)},l}function hb(s){return s=nr(s),s.tag=3,s}function fb(s,a,l,h){var m=l.type.getDerivedStateFromError;if(typeof m=="function"){var y=h.value;s.payload=function(){return m(y)},s.callback=function(){ub(a,l,h)}}var T=l.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(s.callback=function(){ub(a,l,h),typeof m!="function"&&(cr===null?cr=new Set([this]):cr.add(this));var A=h.stack;this.componentDidCatch(h.value,{componentStack:A!==null?A:""})})}function cC(s,a,l,h,m){if(l.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(a=l.alternate,a!==null&&Ao(a,l,m,!0),l=Ln.current,l!==null){switch(l.tag){case 31:case 13:return ei===null?Bh():l.alternate===null&&Te===0&&(Te=3),l.flags&=-257,l.flags|=65536,l.lanes=m,h===ph?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([h]):a.add(h),Am(s,h,m)),!1;case 22:return l.flags|=65536,h===ph?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([h])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([h]):l.add(h)),Am(s,h,m)),!1}throw Error(i(435,l.tag))}return Am(s,h,m),Bh(),!1}if(qt)return a=Ln.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=m,h!==bg&&(s=Error(i(422),{cause:h}),Kl($n(s,l)))):(h!==bg&&(a=Error(i(423),{cause:h}),Kl($n(a,l))),s=s.current.alternate,s.flags|=65536,m&=-m,s.lanes|=m,h=$n(h,l),m=tm(s.stateNode,h,m),Dg(s,m),Te!==4&&(Te=2)),!1;var y=Error(i(520),{cause:h});if(y=$n(y,l),fc===null?fc=[y]:fc.push(y),Te!==4&&(Te=2),a===null)return!0;h=$n(h,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,s=m&-m,l.lanes|=s,s=tm(l.stateNode,h,s),Dg(l,s),!1;case 1:if(a=l.type,y=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(cr===null||!cr.has(y))))return l.flags|=65536,m&=-m,l.lanes|=m,m=hb(m),fb(m,s,l,h),Dg(l,m),!1}l=l.return}while(l!==null);return!1}var em=Error(i(461)),Ve=!1;function sn(s,a,l,h){a.child=s===null?p0(a,null,l,h):xa(a,s.child,l,h)}function db(s,a,l,h,m){l=l.render;var y=a.ref;if("ref"in h){var T={};for(var A in h)A!=="ref"&&(T[A]=h[A])}else T=h;return ba(a),h=Vg(s,a,l,T,y,m),A=Lg(),s!==null&&!Ve?(zg(s,a,m),ms(s,a,m)):(qt&&A&&yg(a),a.flags|=1,sn(s,a,h,m),a.child)}function gb(s,a,l,h,m){if(s===null){var y=l.type;return typeof y=="function"&&!gg(y)&&y.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=y,mb(s,a,y,h,m)):(s=uh(l.type,null,h,a,a.mode,m),s.ref=a.ref,s.return=a,a.child=s)}if(y=s.child,!cm(s,m)){var T=y.memoizedProps;if(l=l.compare,l=l!==null?l:ql,l(T,h)&&s.ref===a.ref)return ms(s,a,m)}return a.flags|=1,s=cs(y,h),s.ref=a.ref,s.return=a,a.child=s}function mb(s,a,l,h,m){if(s!==null){var y=s.memoizedProps;if(ql(y,h)&&s.ref===a.ref)if(Ve=!1,a.pendingProps=h=y,cm(s,m))(s.flags&131072)!==0&&(Ve=!0);else return a.lanes=s.lanes,ms(s,a,m)}return nm(s,a,l,h,m)}function pb(s,a,l,h){var m=h.children,y=s!==null?s.memoizedState:null;if(s===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((a.flags&128)!==0){if(y=y!==null?y.baseLanes|l:l,s!==null){for(h=a.child=s.child,m=0;h!==null;)m=m|h.lanes|h.childLanes,h=h.sibling;h=m&~y}else h=0,a.child=null;return yb(s,a,y,l,h)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&gh(a,y!==null?y.cachePool:null),y!==null?b0(a,y):Og(),v0(a);else return h=a.lanes=536870912,yb(s,a,y!==null?y.baseLanes|l:l,l,h)}else y!==null?(gh(a,y.cachePool),b0(a,y),rr(),a.memoizedState=null):(s!==null&&gh(a,null),Og(),rr());return sn(s,a,m,l),a.child}function rc(s,a){return s!==null&&s.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function yb(s,a,l,h,m){var y=wg();return y=y===null?null:{parent:ke._currentValue,pool:y},a.memoizedState={baseLanes:l,cachePool:y},s!==null&&gh(a,null),Og(),v0(a),s!==null&&Ao(s,a,h,!0),a.childLanes=m,null}function Dh(s,a){return a=Oh({mode:a.mode,children:a.children},s.mode),a.ref=s.ref,s.child=a,a.return=s,a}function _b(s,a,l){return xa(a,s.child,null,l),s=Dh(a,a.pendingProps),s.flags|=2,zn(a),a.memoizedState=null,s}function uC(s,a,l){var h=a.pendingProps,m=(a.flags&128)!==0;if(a.flags&=-129,s===null){if(qt){if(h.mode==="hidden")return s=Dh(a,h),a.lanes=536870912,rc(null,s);if(kg(a),(s=ue)?(s=Dv(s,ti),s=s!==null&&s.data==="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:$s!==null?{id:Gi,overflow:Yi}:null,retryLane:536870912,hydrationErrors:null},l=e0(s),l.return=a,a.child=l,en=a,ue=null)):s=null,s===null)throw Zs(a);return a.lanes=536870912,null}return Dh(a,h)}var y=s.memoizedState;if(y!==null){var T=y.dehydrated;if(kg(a),m)if(a.flags&256)a.flags&=-257,a=_b(s,a,l);else if(a.memoizedState!==null)a.child=s.child,a.flags|=128,a=null;else throw Error(i(558));else if(Ve||Ao(s,a,l,!1),m=(l&s.childLanes)!==0,Ve||m){if(h=oe,h!==null&&(T=wl(h,l),T!==0&&T!==y.retryLane))throw y.retryLane=T,ma(s,T),Cn(h,s,T),em;Bh(),a=_b(s,a,l)}else s=y.treeContext,ue=ni(T.nextSibling),en=a,qt=!0,Js=null,ti=!1,s!==null&&s0(a,s),a=Dh(a,h),a.flags|=4096;return a}return s=cs(s.child,{mode:h.mode,children:h.children}),s.ref=a.ref,a.child=s,s.return=a,s}function Mh(s,a){var l=a.ref;if(l===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(s===null||s.ref!==l)&&(a.flags|=4194816)}}function nm(s,a,l,h,m){return ba(a),l=Vg(s,a,l,h,void 0,m),h=Lg(),s!==null&&!Ve?(zg(s,a,m),ms(s,a,m)):(qt&&h&&yg(a),a.flags|=1,sn(s,a,l,m),a.child)}function bb(s,a,l,h,m,y){return ba(a),a.updateQueue=null,l=E0(a,h,l,m),T0(s),h=Lg(),s!==null&&!Ve?(zg(s,a,y),ms(s,a,y)):(qt&&h&&yg(a),a.flags|=1,sn(s,a,l,y),a.child)}function vb(s,a,l,h,m){if(ba(a),a.stateNode===null){var y=To,T=l.contextType;typeof T=="object"&&T!==null&&(y=nn(T)),y=new l(h,y),a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Zg,a.stateNode=y,y._reactInternals=a,y=a.stateNode,y.props=h,y.state=a.memoizedState,y.refs={},Rg(a),T=l.contextType,y.context=typeof T=="object"&&T!==null?nn(T):To,y.state=a.memoizedState,T=l.getDerivedStateFromProps,typeof T=="function"&&(Jg(a,l,T,h),y.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(T=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),T!==y.state&&Zg.enqueueReplaceState(y,y.state,null),tc(a,h,y,m),Zl(),y.state=a.memoizedState),typeof y.componentDidMount=="function"&&(a.flags|=4194308),h=!0}else if(s===null){y=a.stateNode;var A=a.memoizedProps,V=Aa(l,A);y.props=V;var G=y.context,Z=l.contextType;T=To,typeof Z=="object"&&Z!==null&&(T=nn(Z));var it=l.getDerivedStateFromProps;Z=typeof it=="function"||typeof y.getSnapshotBeforeUpdate=="function",A=a.pendingProps!==A,Z||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(A||G!==T)&&ab(a,y,h,T),er=!1;var K=a.memoizedState;y.state=K,tc(a,h,y,m),Zl(),G=a.memoizedState,A||K!==G||er?(typeof it=="function"&&(Jg(a,l,it,h),G=a.memoizedState),(V=er||rb(a,l,V,h,K,G,T))?(Z||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(a.flags|=4194308)):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=h,a.memoizedState=G),y.props=h,y.state=G,y.context=T,h=V):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),h=!1)}else{y=a.stateNode,Ig(s,a),T=a.memoizedProps,Z=Aa(l,T),y.props=Z,it=a.pendingProps,K=y.context,G=l.contextType,V=To,typeof G=="object"&&G!==null&&(V=nn(G)),A=l.getDerivedStateFromProps,(G=typeof A=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T!==it||K!==V)&&ab(a,y,h,V),er=!1,K=a.memoizedState,y.state=K,tc(a,h,y,m),Zl();var Q=a.memoizedState;T!==it||K!==Q||er||s!==null&&s.dependencies!==null&&fh(s.dependencies)?(typeof A=="function"&&(Jg(a,l,A,h),Q=a.memoizedState),(Z=er||rb(a,l,Z,h,K,Q,V)||s!==null&&s.dependencies!==null&&fh(s.dependencies))?(G||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(h,Q,V),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(h,Q,V)),typeof y.componentDidUpdate=="function"&&(a.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof y.componentDidUpdate!="function"||T===s.memoizedProps&&K===s.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===s.memoizedProps&&K===s.memoizedState||(a.flags|=1024),a.memoizedProps=h,a.memoizedState=Q),y.props=h,y.state=Q,y.context=V,h=Z):(typeof y.componentDidUpdate!="function"||T===s.memoizedProps&&K===s.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===s.memoizedProps&&K===s.memoizedState||(a.flags|=1024),h=!1)}return y=h,Mh(s,a),h=(a.flags&128)!==0,y||h?(y=a.stateNode,l=h&&typeof l.getDerivedStateFromError!="function"?null:y.render(),a.flags|=1,s!==null&&h?(a.child=xa(a,s.child,null,m),a.child=xa(a,null,l,m)):sn(s,a,l,m),a.memoizedState=y.state,s=a.child):s=ms(s,a,m),s}function Tb(s,a,l,h){return ya(),a.flags|=256,sn(s,a,l,h),a.child}var im={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function sm(s){return{baseLanes:s,cachePool:u0()}}function rm(s,a,l){return s=s!==null?s.childLanes&~l:0,a&&(s|=Un),s}function Eb(s,a,l){var h=a.pendingProps,m=!1,y=(a.flags&128)!==0,T;if((T=y)||(T=s!==null&&s.memoizedState===null?!1:(Ae.current&2)!==0),T&&(m=!0,a.flags&=-129),T=(a.flags&32)!==0,a.flags&=-33,s===null){if(qt){if(m?sr(a):rr(),(s=ue)?(s=Dv(s,ti),s=s!==null&&s.data!=="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:$s!==null?{id:Gi,overflow:Yi}:null,retryLane:536870912,hydrationErrors:null},l=e0(s),l.return=a,a.child=l,en=a,ue=null)):s=null,s===null)throw Zs(a);return Bm(s)?a.lanes=32:a.lanes=536870912,null}var A=h.children;return h=h.fallback,m?(rr(),m=a.mode,A=Oh({mode:"hidden",children:A},m),h=pa(h,m,l,null),A.return=a,h.return=a,A.sibling=h,a.child=A,h=a.child,h.memoizedState=sm(l),h.childLanes=rm(s,T,l),a.memoizedState=im,rc(null,h)):(sr(a),am(a,A))}var V=s.memoizedState;if(V!==null&&(A=V.dehydrated,A!==null)){if(y)a.flags&256?(sr(a),a.flags&=-257,a=om(s,a,l)):a.memoizedState!==null?(rr(),a.child=s.child,a.flags|=128,a=null):(rr(),A=h.fallback,m=a.mode,h=Oh({mode:"visible",children:h.children},m),A=pa(A,m,l,null),A.flags|=2,h.return=a,A.return=a,h.sibling=A,a.child=h,xa(a,s.child,null,l),h=a.child,h.memoizedState=sm(l),h.childLanes=rm(s,T,l),a.memoizedState=im,a=rc(null,h));else if(sr(a),Bm(A)){if(T=A.nextSibling&&A.nextSibling.dataset,T)var G=T.dgst;T=G,h=Error(i(419)),h.stack="",h.digest=T,Kl({value:h,source:null,stack:null}),a=om(s,a,l)}else if(Ve||Ao(s,a,l,!1),T=(l&s.childLanes)!==0,Ve||T){if(T=oe,T!==null&&(h=wl(T,l),h!==0&&h!==V.retryLane))throw V.retryLane=h,ma(s,h),Cn(T,s,h),em;Um(A)||Bh(),a=om(s,a,l)}else Um(A)?(a.flags|=192,a.child=s.child,a=null):(s=V.treeContext,ue=ni(A.nextSibling),en=a,qt=!0,Js=null,ti=!1,s!==null&&s0(a,s),a=am(a,h.children),a.flags|=4096);return a}return m?(rr(),A=h.fallback,m=a.mode,V=s.child,G=V.sibling,h=cs(V,{mode:"hidden",children:h.children}),h.subtreeFlags=V.subtreeFlags&65011712,G!==null?A=cs(G,A):(A=pa(A,m,l,null),A.flags|=2),A.return=a,h.return=a,h.sibling=A,a.child=h,rc(null,h),h=a.child,A=s.child.memoizedState,A===null?A=sm(l):(m=A.cachePool,m!==null?(V=ke._currentValue,m=m.parent!==V?{parent:V,pool:V}:m):m=u0(),A={baseLanes:A.baseLanes|l,cachePool:m}),h.memoizedState=A,h.childLanes=rm(s,T,l),a.memoizedState=im,rc(s.child,h)):(sr(a),l=s.child,s=l.sibling,l=cs(l,{mode:"visible",children:h.children}),l.return=a,l.sibling=null,s!==null&&(T=a.deletions,T===null?(a.deletions=[s],a.flags|=16):T.push(s)),a.child=l,a.memoizedState=null,l)}function am(s,a){return a=Oh({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function Oh(s,a){return s=Vn(22,s,null,a),s.lanes=0,s}function om(s,a,l){return xa(a,s.child,null,l),s=am(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function xb(s,a,l){s.lanes|=a;var h=s.alternate;h!==null&&(h.lanes|=a),Eg(s.return,a,l)}function lm(s,a,l,h,m,y){var T=s.memoizedState;T===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:m,treeForkCount:y}:(T.isBackwards=a,T.rendering=null,T.renderingStartTime=0,T.last=h,T.tail=l,T.tailMode=m,T.treeForkCount=y)}function Sb(s,a,l){var h=a.pendingProps,m=h.revealOrder,y=h.tail;h=h.children;var T=Ae.current,A=(T&2)!==0;if(A?(T=T&1|2,a.flags|=128):T&=1,lt(Ae,T),sn(s,a,h,l),h=qt?Yl:0,!A&&s!==null&&(s.flags&128)!==0)t:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&xb(s,l,a);else if(s.tag===19)xb(s,l,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break t;for(;s.sibling===null;){if(s.return===null||s.return===a)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(m){case"forwards":for(l=a.child,m=null;l!==null;)s=l.alternate,s!==null&&vh(s)===null&&(m=l),l=l.sibling;l=m,l===null?(m=a.child,a.child=null):(m=l.sibling,l.sibling=null),lm(a,!1,m,l,y,h);break;case"backwards":case"unstable_legacy-backwards":for(l=null,m=a.child,a.child=null;m!==null;){if(s=m.alternate,s!==null&&vh(s)===null){a.child=m;break}s=m.sibling,m.sibling=l,l=m,m=s}lm(a,!0,l,null,y,h);break;case"together":lm(a,!1,null,null,void 0,h);break;default:a.memoizedState=null}return a.child}function ms(s,a,l){if(s!==null&&(a.dependencies=s.dependencies),lr|=a.lanes,(l&a.childLanes)===0)if(s!==null){if(Ao(s,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(i(153));if(a.child!==null){for(s=a.child,l=cs(s,s.pendingProps),a.child=l,l.return=a;s.sibling!==null;)s=s.sibling,l=l.sibling=cs(s,s.pendingProps),l.return=a;l.sibling=null}return a.child}function cm(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&fh(s)))}function hC(s,a,l){switch(a.tag){case 3:He(a,a.stateNode.containerInfo),tr(a,ke,s.memoizedState.cache),ya();break;case 27:case 5:$r(a);break;case 4:He(a,a.stateNode.containerInfo);break;case 10:tr(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,kg(a),null;break;case 13:var h=a.memoizedState;if(h!==null)return h.dehydrated!==null?(sr(a),a.flags|=128,null):(l&a.child.childLanes)!==0?Eb(s,a,l):(sr(a),s=ms(s,a,l),s!==null?s.sibling:null);sr(a);break;case 19:var m=(s.flags&128)!==0;if(h=(l&a.childLanes)!==0,h||(Ao(s,a,l,!1),h=(l&a.childLanes)!==0),m){if(h)return Sb(s,a,l);a.flags|=128}if(m=a.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),lt(Ae,Ae.current),h)break;return null;case 22:return a.lanes=0,pb(s,a,l,a.pendingProps);case 24:tr(a,ke,s.memoizedState.cache)}return ms(s,a,l)}function Ab(s,a,l){if(s!==null)if(s.memoizedProps!==a.pendingProps)Ve=!0;else{if(!cm(s,l)&&(a.flags&128)===0)return Ve=!1,hC(s,a,l);Ve=(s.flags&131072)!==0}else Ve=!1,qt&&(a.flags&1048576)!==0&&i0(a,Yl,a.index);switch(a.lanes=0,a.tag){case 16:t:{var h=a.pendingProps;if(s=Ta(a.elementType),a.type=s,typeof s=="function")gg(s)?(h=Aa(s,h),a.tag=1,a=vb(null,a,s,h,l)):(a.tag=0,a=nm(null,a,s,h,l));else{if(s!=null){var m=s.$$typeof;if(m===J){a.tag=11,a=db(null,a,s,h,l);break t}else if(m===M){a.tag=14,a=gb(null,a,s,h,l);break t}}throw a=kt(s)||s,Error(i(306,a,""))}}return a;case 0:return nm(s,a,a.type,a.pendingProps,l);case 1:return h=a.type,m=Aa(h,a.pendingProps),vb(s,a,h,m,l);case 3:t:{if(He(a,a.stateNode.containerInfo),s===null)throw Error(i(387));h=a.pendingProps;var y=a.memoizedState;m=y.element,Ig(s,a),tc(a,h,null,l);var T=a.memoizedState;if(h=T.cache,tr(a,ke,h),h!==y.cache&&xg(a,[ke],l,!0),Zl(),h=T.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:T.cache},a.updateQueue.baseState=y,a.memoizedState=y,a.flags&256){a=Tb(s,a,h,l);break t}else if(h!==m){m=$n(Error(i(424)),a),Kl(m),a=Tb(s,a,h,l);break t}else{switch(s=a.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(ue=ni(s.firstChild),en=a,qt=!0,Js=null,ti=!0,l=p0(a,null,h,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(ya(),h===m){a=ms(s,a,l);break t}sn(s,a,h,l)}a=a.child}return a;case 26:return Mh(s,a),s===null?(l=Vv(a.type,null,a.pendingProps,null))?a.memoizedState=l:qt||(l=a.type,s=a.pendingProps,h=Wh(St.current).createElement(l),h[Me]=a,h[We]=s,rn(h,l,s),Oe(h),a.stateNode=h):a.memoizedState=Vv(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return $r(a),s===null&&qt&&(h=a.stateNode=Nv(a.type,a.pendingProps,St.current),en=a,ti=!0,m=ue,dr(a.type)?(Fm=m,ue=ni(h.firstChild)):ue=m),sn(s,a,a.pendingProps.children,l),Mh(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&qt&&((m=h=ue)&&(h=BC(h,a.type,a.pendingProps,ti),h!==null?(a.stateNode=h,en=a,ue=ni(h.firstChild),ti=!1,m=!0):m=!1),m||Zs(a)),$r(a),m=a.type,y=a.pendingProps,T=s!==null?s.memoizedProps:null,h=y.children,Lm(m,y)?h=null:T!==null&&Lm(m,T)&&(a.flags|=32),a.memoizedState!==null&&(m=Vg(s,a,nC,null,null,l),vc._currentValue=m),Mh(s,a),sn(s,a,h,l),a.child;case 6:return s===null&&qt&&((s=l=ue)&&(l=FC(l,a.pendingProps,ti),l!==null?(a.stateNode=l,en=a,ue=null,s=!0):s=!1),s||Zs(a)),null;case 13:return Eb(s,a,l);case 4:return He(a,a.stateNode.containerInfo),h=a.pendingProps,s===null?a.child=xa(a,null,h,l):sn(s,a,h,l),a.child;case 11:return db(s,a,a.type,a.pendingProps,l);case 7:return sn(s,a,a.pendingProps,l),a.child;case 8:return sn(s,a,a.pendingProps.children,l),a.child;case 12:return sn(s,a,a.pendingProps.children,l),a.child;case 10:return h=a.pendingProps,tr(a,a.type,h.value),sn(s,a,h.children,l),a.child;case 9:return m=a.type._context,h=a.pendingProps.children,ba(a),m=nn(m),h=h(m),a.flags|=1,sn(s,a,h,l),a.child;case 14:return gb(s,a,a.type,a.pendingProps,l);case 15:return mb(s,a,a.type,a.pendingProps,l);case 19:return Sb(s,a,l);case 31:return uC(s,a,l);case 22:return pb(s,a,l,a.pendingProps);case 24:return ba(a),h=nn(ke),s===null?(m=wg(),m===null&&(m=oe,y=Sg(),m.pooledCache=y,y.refCount++,y!==null&&(m.pooledCacheLanes|=l),m=y),a.memoizedState={parent:h,cache:m},Rg(a),tr(a,ke,m)):((s.lanes&l)!==0&&(Ig(s,a),tc(a,null,null,l),Zl()),m=s.memoizedState,y=a.memoizedState,m.parent!==h?(m={parent:h,cache:h},a.memoizedState=m,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=m),tr(a,ke,h)):(h=y.cache,tr(a,ke,h),h!==m.cache&&xg(a,[ke],l,!0))),sn(s,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function ps(s){s.flags|=4}function um(s,a,l,h,m){if((a=(s.mode&32)!==0)&&(a=!1),a){if(s.flags|=16777216,(m&335544128)===m)if(s.stateNode.complete)s.flags|=8192;else if(Jb())s.flags|=8192;else throw Ea=ph,Cg}else s.flags&=-16777217}function wb(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Bv(a))if(Jb())s.flags|=8192;else throw Ea=ph,Cg}function Nh(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?ju():536870912,s.lanes|=a,Lo|=a)}function ac(s,a){if(!qt)switch(s.tailMode){case"hidden":a=s.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:h.sibling=null}}function he(s){var a=s.alternate!==null&&s.alternate.child===s.child,l=0,h=0;if(a)for(var m=s.child;m!==null;)l|=m.lanes|m.childLanes,h|=m.subtreeFlags&65011712,h|=m.flags&65011712,m.return=s,m=m.sibling;else for(m=s.child;m!==null;)l|=m.lanes|m.childLanes,h|=m.subtreeFlags,h|=m.flags,m.return=s,m=m.sibling;return s.subtreeFlags|=h,s.childLanes=l,a}function fC(s,a,l){var h=a.pendingProps;switch(_g(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return he(a),null;case 1:return he(a),null;case 3:return l=a.stateNode,h=null,s!==null&&(h=s.memoizedState.cache),a.memoizedState.cache!==h&&(a.flags|=2048),fs(ke),ge(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(So(a)?ps(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,vg())),he(a),null;case 26:var m=a.type,y=a.memoizedState;return s===null?(ps(a),y!==null?(he(a),wb(a,y)):(he(a),um(a,m,null,h,l))):y?y!==s.memoizedState?(ps(a),he(a),wb(a,y)):(he(a),a.flags&=-16777217):(s=s.memoizedProps,s!==h&&ps(a),he(a),um(a,m,s,h,l)),null;case 27:if(eo(a),l=St.current,m=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==h&&ps(a);else{if(!h){if(a.stateNode===null)throw Error(i(166));return he(a),null}s=ut.current,So(a)?r0(a):(s=Nv(m,h,l),a.stateNode=s,ps(a))}return he(a),null;case 5:if(eo(a),m=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==h&&ps(a);else{if(!h){if(a.stateNode===null)throw Error(i(166));return he(a),null}if(y=ut.current,So(a))r0(a);else{var T=Wh(St.current);switch(y){case 1:y=T.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:y=T.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":y=T.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":y=T.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":y=T.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof h.is=="string"?T.createElement("select",{is:h.is}):T.createElement("select"),h.multiple?y.multiple=!0:h.size&&(y.size=h.size);break;default:y=typeof h.is=="string"?T.createElement(m,{is:h.is}):T.createElement(m)}}y[Me]=a,y[We]=h;t:for(T=a.child;T!==null;){if(T.tag===5||T.tag===6)y.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===a)break t;for(;T.sibling===null;){if(T.return===null||T.return===a)break t;T=T.return}T.sibling.return=T.return,T=T.sibling}a.stateNode=y;t:switch(rn(y,m,h),m){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break t;case"img":h=!0;break t;default:h=!1}h&&ps(a)}}return he(a),um(a,a.type,s===null?null:s.memoizedProps,a.pendingProps,l),null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==h&&ps(a);else{if(typeof h!="string"&&a.stateNode===null)throw Error(i(166));if(s=St.current,So(a)){if(s=a.stateNode,l=a.memoizedProps,h=null,m=en,m!==null)switch(m.tag){case 27:case 5:h=m.memoizedProps}s[Me]=a,s=!!(s.nodeValue===l||h!==null&&h.suppressHydrationWarning===!0||Ev(s.nodeValue,l)),s||Zs(a,!0)}else s=Wh(s).createTextNode(h),s[Me]=a,a.stateNode=s}return he(a),null;case 31:if(l=a.memoizedState,s===null||s.memoizedState!==null){if(h=So(a),l!==null){if(s===null){if(!h)throw Error(i(318));if(s=a.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[Me]=a}else ya(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;he(a),s=!1}else l=vg(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=l),s=!0;if(!s)return a.flags&256?(zn(a),a):(zn(a),null);if((a.flags&128)!==0)throw Error(i(558))}return he(a),null;case 13:if(h=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(m=So(a),h!==null&&h.dehydrated!==null){if(s===null){if(!m)throw Error(i(318));if(m=a.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(i(317));m[Me]=a}else ya(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;he(a),m=!1}else m=vg(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=m),m=!0;if(!m)return a.flags&256?(zn(a),a):(zn(a),null)}return zn(a),(a.flags&128)!==0?(a.lanes=l,a):(l=h!==null,s=s!==null&&s.memoizedState!==null,l&&(h=a.child,m=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(m=h.alternate.memoizedState.cachePool.pool),y=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(y=h.memoizedState.cachePool.pool),y!==m&&(h.flags|=2048)),l!==s&&l&&(a.child.flags|=8192),Nh(a,a.updateQueue),he(a),null);case 4:return ge(),s===null&&Om(a.stateNode.containerInfo),he(a),null;case 10:return fs(a.type),he(a),null;case 19:if(tt(Ae),h=a.memoizedState,h===null)return he(a),null;if(m=(a.flags&128)!==0,y=h.rendering,y===null)if(m)ac(h,!1);else{if(Te!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(y=vh(s),y!==null){for(a.flags|=128,ac(h,!1),s=y.updateQueue,a.updateQueue=s,Nh(a,s),a.subtreeFlags=0,s=l,l=a.child;l!==null;)t0(l,s),l=l.sibling;return lt(Ae,Ae.current&1|2),qt&&us(a,h.treeForkCount),a.child}s=s.sibling}h.tail!==null&&_n()>zh&&(a.flags|=128,m=!0,ac(h,!1),a.lanes=4194304)}else{if(!m)if(s=vh(y),s!==null){if(a.flags|=128,m=!0,s=s.updateQueue,a.updateQueue=s,Nh(a,s),ac(h,!0),h.tail===null&&h.tailMode==="hidden"&&!y.alternate&&!qt)return he(a),null}else 2*_n()-h.renderingStartTime>zh&&l!==536870912&&(a.flags|=128,m=!0,ac(h,!1),a.lanes=4194304);h.isBackwards?(y.sibling=a.child,a.child=y):(s=h.last,s!==null?s.sibling=y:a.child=y,h.last=y)}return h.tail!==null?(s=h.tail,h.rendering=s,h.tail=s.sibling,h.renderingStartTime=_n(),s.sibling=null,l=Ae.current,lt(Ae,m?l&1|2:l&1),qt&&us(a,h.treeForkCount),s):(he(a),null);case 22:case 23:return zn(a),Ng(),h=a.memoizedState!==null,s!==null?s.memoizedState!==null!==h&&(a.flags|=8192):h&&(a.flags|=8192),h?(l&536870912)!==0&&(a.flags&128)===0&&(he(a),a.subtreeFlags&6&&(a.flags|=8192)):he(a),l=a.updateQueue,l!==null&&Nh(a,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),h=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),h!==l&&(a.flags|=2048),s!==null&&tt(va),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),fs(ke),he(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function dC(s,a){switch(_g(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return fs(ke),ge(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return eo(a),null;case 31:if(a.memoizedState!==null){if(zn(a),a.alternate===null)throw Error(i(340));ya()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 13:if(zn(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(i(340));ya()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return tt(Ae),null;case 4:return ge(),null;case 10:return fs(a.type),null;case 22:case 23:return zn(a),Ng(),s!==null&&tt(va),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return fs(ke),null;case 25:return null;default:return null}}function Cb(s,a){switch(_g(a),a.tag){case 3:fs(ke),ge();break;case 26:case 27:case 5:eo(a);break;case 4:ge();break;case 31:a.memoizedState!==null&&zn(a);break;case 13:zn(a);break;case 19:tt(Ae);break;case 10:fs(a.type);break;case 22:case 23:zn(a),Ng(),s!==null&&tt(va);break;case 24:fs(ke)}}function oc(s,a){try{var l=a.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var m=h.next;l=m;do{if((l.tag&s)===s){h=void 0;var y=l.create,T=l.inst;h=y(),T.destroy=h}l=l.next}while(l!==m)}}catch(A){ee(a,a.return,A)}}function ar(s,a,l){try{var h=a.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var y=m.next;h=y;do{if((h.tag&s)===s){var T=h.inst,A=T.destroy;if(A!==void 0){T.destroy=void 0,m=a;var V=l,G=A;try{G()}catch(Z){ee(m,V,Z)}}}h=h.next}while(h!==y)}}catch(Z){ee(a,a.return,Z)}}function Rb(s){var a=s.updateQueue;if(a!==null){var l=s.stateNode;try{_0(a,l)}catch(h){ee(s,s.return,h)}}}function Ib(s,a,l){l.props=Aa(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(h){ee(s,a,h)}}function lc(s,a){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var h=s.stateNode;break;case 30:h=s.stateNode;break;default:h=s.stateNode}typeof l=="function"?s.refCleanup=l(h):l.current=h}}catch(m){ee(s,a,m)}}function Ki(s,a){var l=s.ref,h=s.refCleanup;if(l!==null)if(typeof h=="function")try{h()}catch(m){ee(s,a,m)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(m){ee(s,a,m)}else l.current=null}function Db(s){var a=s.type,l=s.memoizedProps,h=s.stateNode;try{t:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&h.focus();break t;case"img":l.src?h.src=l.src:l.srcSet&&(h.srcset=l.srcSet)}}catch(m){ee(s,s.return,m)}}function hm(s,a,l){try{var h=s.stateNode;PC(h,s.type,l,a),h[We]=a}catch(m){ee(s,s.return,m)}}function Mb(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&dr(s.type)||s.tag===4}function fm(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||Mb(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&dr(s.type)||s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function dm(s,a,l){var h=s.tag;if(h===5||h===6)s=s.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(s),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=hi));else if(h!==4&&(h===27&&dr(s.type)&&(l=s.stateNode,a=null),s=s.child,s!==null))for(dm(s,a,l),s=s.sibling;s!==null;)dm(s,a,l),s=s.sibling}function kh(s,a,l){var h=s.tag;if(h===5||h===6)s=s.stateNode,a?l.insertBefore(s,a):l.appendChild(s);else if(h!==4&&(h===27&&dr(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(kh(s,a,l),s=s.sibling;s!==null;)kh(s,a,l),s=s.sibling}function Ob(s){var a=s.stateNode,l=s.memoizedProps;try{for(var h=s.type,m=a.attributes;m.length;)a.removeAttributeNode(m[0]);rn(a,h,l),a[Me]=s,a[We]=l}catch(y){ee(s,s.return,y)}}var ys=!1,Le=!1,gm=!1,Nb=typeof WeakSet=="function"?WeakSet:Set,Qe=null;function gC(s,a){if(s=s.containerInfo,Pm=ef,s=G_(s),og(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else t:{l=(l=s.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var m=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break t}var T=0,A=-1,V=-1,G=0,Z=0,it=s,K=null;e:for(;;){for(var Q;it!==l||m!==0&&it.nodeType!==3||(A=T+m),it!==y||h!==0&&it.nodeType!==3||(V=T+h),it.nodeType===3&&(T+=it.nodeValue.length),(Q=it.firstChild)!==null;)K=it,it=Q;for(;;){if(it===s)break e;if(K===l&&++G===m&&(A=T),K===y&&++Z===h&&(V=T),(Q=it.nextSibling)!==null)break;it=K,K=it.parentNode}it=Q}l=A===-1||V===-1?null:{start:A,end:V}}else l=null}l=l||{start:0,end:0}}else l=null;for(Vm={focusedElem:s,selectionRange:l},ef=!1,Qe=a;Qe!==null;)if(a=Qe,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,Qe=s;else for(;Qe!==null;){switch(a=Qe,y=a.alternate,s=a.flags,a.tag){case 0:if((s&4)!==0&&(s=a.updateQueue,s=s!==null?s.events:null,s!==null))for(l=0;l<s.length;l++)m=s[l],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&y!==null){s=void 0,l=a,m=y.memoizedProps,y=y.memoizedState,h=l.stateNode;try{var mt=Aa(l.type,m);s=h.getSnapshotBeforeUpdate(mt,y),h.__reactInternalSnapshotBeforeUpdate=s}catch(Et){ee(l,l.return,Et)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,l=s.nodeType,l===9)jm(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":jm(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=a.sibling,s!==null){s.return=a.return,Qe=s;break}Qe=a.return}}function kb(s,a,l){var h=l.flags;switch(l.tag){case 0:case 11:case 15:bs(s,l),h&4&&oc(5,l);break;case 1:if(bs(s,l),h&4)if(s=l.stateNode,a===null)try{s.componentDidMount()}catch(T){ee(l,l.return,T)}else{var m=Aa(l.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(m,a,s.__reactInternalSnapshotBeforeUpdate)}catch(T){ee(l,l.return,T)}}h&64&&Rb(l),h&512&&lc(l,l.return);break;case 3:if(bs(s,l),h&64&&(s=l.updateQueue,s!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{_0(s,a)}catch(T){ee(l,l.return,T)}}break;case 27:a===null&&h&4&&Ob(l);case 26:case 5:bs(s,l),a===null&&h&4&&Db(l),h&512&&lc(l,l.return);break;case 12:bs(s,l);break;case 31:bs(s,l),h&4&&Lb(s,l);break;case 13:bs(s,l),h&4&&zb(s,l),h&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=xC.bind(null,l),HC(s,l))));break;case 22:if(h=l.memoizedState!==null||ys,!h){a=a!==null&&a.memoizedState!==null||Le,m=ys;var y=Le;ys=h,(Le=a)&&!y?vs(s,l,(l.subtreeFlags&8772)!==0):bs(s,l),ys=m,Le=y}break;case 30:break;default:bs(s,l)}}function Pb(s){var a=s.alternate;a!==null&&(s.alternate=null,Pb(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&ao(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var pe=null,xn=!1;function _s(s,a,l){for(l=l.child;l!==null;)Vb(s,a,l),l=l.sibling}function Vb(s,a,l){if(Ze&&typeof Ze.onCommitFiberUnmount=="function")try{Ze.onCommitFiberUnmount(oi,l)}catch{}switch(l.tag){case 26:Le||Ki(l,a),_s(s,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Le||Ki(l,a);var h=pe,m=xn;dr(l.type)&&(pe=l.stateNode,xn=!1),_s(s,a,l),yc(l.stateNode),pe=h,xn=m;break;case 5:Le||Ki(l,a);case 6:if(h=pe,m=xn,pe=null,_s(s,a,l),pe=h,xn=m,pe!==null)if(xn)try{(pe.nodeType===9?pe.body:pe.nodeName==="HTML"?pe.ownerDocument.body:pe).removeChild(l.stateNode)}catch(y){ee(l,a,y)}else try{pe.removeChild(l.stateNode)}catch(y){ee(l,a,y)}break;case 18:pe!==null&&(xn?(s=pe,Rv(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),Go(s)):Rv(pe,l.stateNode));break;case 4:h=pe,m=xn,pe=l.stateNode.containerInfo,xn=!0,_s(s,a,l),pe=h,xn=m;break;case 0:case 11:case 14:case 15:ar(2,l,a),Le||ar(4,l,a),_s(s,a,l);break;case 1:Le||(Ki(l,a),h=l.stateNode,typeof h.componentWillUnmount=="function"&&Ib(l,a,h)),_s(s,a,l);break;case 21:_s(s,a,l);break;case 22:Le=(h=Le)||l.memoizedState!==null,_s(s,a,l),Le=h;break;default:_s(s,a,l)}}function Lb(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Go(s)}catch(l){ee(a,a.return,l)}}}function zb(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Go(s)}catch(l){ee(a,a.return,l)}}function mC(s){switch(s.tag){case 31:case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new Nb),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new Nb),a;default:throw Error(i(435,s.tag))}}function Ph(s,a){var l=mC(s);a.forEach(function(h){if(!l.has(h)){l.add(h);var m=SC.bind(null,s,h);h.then(m,m)}})}function Sn(s,a){var l=a.deletions;if(l!==null)for(var h=0;h<l.length;h++){var m=l[h],y=s,T=a,A=T;t:for(;A!==null;){switch(A.tag){case 27:if(dr(A.type)){pe=A.stateNode,xn=!1;break t}break;case 5:pe=A.stateNode,xn=!1;break t;case 3:case 4:pe=A.stateNode.containerInfo,xn=!0;break t}A=A.return}if(pe===null)throw Error(i(160));Vb(y,T,m),pe=null,xn=!1,y=m.alternate,y!==null&&(y.return=null),m.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)jb(a,s),a=a.sibling}var yi=null;function jb(s,a){var l=s.alternate,h=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Sn(a,s),An(s),h&4&&(ar(3,s,s.return),oc(3,s),ar(5,s,s.return));break;case 1:Sn(a,s),An(s),h&512&&(Le||l===null||Ki(l,l.return)),h&64&&ys&&(s=s.updateQueue,s!==null&&(h=s.callbacks,h!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?h:l.concat(h))));break;case 26:var m=yi;if(Sn(a,s),An(s),h&512&&(Le||l===null||Ki(l,l.return)),h&4){var y=l!==null?l.memoizedState:null;if(h=s.memoizedState,l===null)if(h===null)if(s.stateNode===null){t:{h=s.type,l=s.memoizedProps,m=m.ownerDocument||m;e:switch(h){case"title":y=m.getElementsByTagName("title")[0],(!y||y[Ni]||y[Me]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=m.createElement(h),m.head.insertBefore(y,m.querySelector("head > title"))),rn(y,h,l),y[Me]=s,Oe(y),h=y;break t;case"link":var T=jv("link","href",m).get(h+(l.href||""));if(T){for(var A=0;A<T.length;A++)if(y=T[A],y.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&y.getAttribute("rel")===(l.rel==null?null:l.rel)&&y.getAttribute("title")===(l.title==null?null:l.title)&&y.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){T.splice(A,1);break e}}y=m.createElement(h),rn(y,h,l),m.head.appendChild(y);break;case"meta":if(T=jv("meta","content",m).get(h+(l.content||""))){for(A=0;A<T.length;A++)if(y=T[A],y.getAttribute("content")===(l.content==null?null:""+l.content)&&y.getAttribute("name")===(l.name==null?null:l.name)&&y.getAttribute("property")===(l.property==null?null:l.property)&&y.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&y.getAttribute("charset")===(l.charSet==null?null:l.charSet)){T.splice(A,1);break e}}y=m.createElement(h),rn(y,h,l),m.head.appendChild(y);break;default:throw Error(i(468,h))}y[Me]=s,Oe(y),h=y}s.stateNode=h}else Uv(m,s.type,s.stateNode);else s.stateNode=zv(m,h,s.memoizedProps);else y!==h?(y===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):y.count--,h===null?Uv(m,s.type,s.stateNode):zv(m,h,s.memoizedProps)):h===null&&s.stateNode!==null&&hm(s,s.memoizedProps,l.memoizedProps)}break;case 27:Sn(a,s),An(s),h&512&&(Le||l===null||Ki(l,l.return)),l!==null&&h&4&&hm(s,s.memoizedProps,l.memoizedProps);break;case 5:if(Sn(a,s),An(s),h&512&&(Le||l===null||Ki(l,l.return)),s.flags&32){m=s.stateNode;try{En(m,"")}catch(mt){ee(s,s.return,mt)}}h&4&&s.stateNode!=null&&(m=s.memoizedProps,hm(s,m,l!==null?l.memoizedProps:m)),h&1024&&(gm=!0);break;case 6:if(Sn(a,s),An(s),h&4){if(s.stateNode===null)throw Error(i(162));h=s.memoizedProps,l=s.stateNode;try{l.nodeValue=h}catch(mt){ee(s,s.return,mt)}}break;case 3:if($h=null,m=yi,yi=Xh(a.containerInfo),Sn(a,s),yi=m,An(s),h&4&&l!==null&&l.memoizedState.isDehydrated)try{Go(a.containerInfo)}catch(mt){ee(s,s.return,mt)}gm&&(gm=!1,Ub(s));break;case 4:h=yi,yi=Xh(s.stateNode.containerInfo),Sn(a,s),An(s),yi=h;break;case 12:Sn(a,s),An(s);break;case 31:Sn(a,s),An(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,Ph(s,h)));break;case 13:Sn(a,s),An(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Lh=_n()),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,Ph(s,h)));break;case 22:m=s.memoizedState!==null;var V=l!==null&&l.memoizedState!==null,G=ys,Z=Le;if(ys=G||m,Le=Z||V,Sn(a,s),Le=Z,ys=G,An(s),h&8192)t:for(a=s.stateNode,a._visibility=m?a._visibility&-2:a._visibility|1,m&&(l===null||V||ys||Le||wa(s)),l=null,a=s;;){if(a.tag===5||a.tag===26){if(l===null){V=l=a;try{if(y=V.stateNode,m)T=y.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{A=V.stateNode;var it=V.memoizedProps.style,K=it!=null&&it.hasOwnProperty("display")?it.display:null;A.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(mt){ee(V,V.return,mt)}}}else if(a.tag===6){if(l===null){V=a;try{V.stateNode.nodeValue=m?"":V.memoizedProps}catch(mt){ee(V,V.return,mt)}}}else if(a.tag===18){if(l===null){V=a;try{var Q=V.stateNode;m?Iv(Q,!0):Iv(V.stateNode,!1)}catch(mt){ee(V,V.return,mt)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break t;for(;a.sibling===null;){if(a.return===null||a.return===s)break t;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}h&4&&(h=s.updateQueue,h!==null&&(l=h.retryQueue,l!==null&&(h.retryQueue=null,Ph(s,l))));break;case 19:Sn(a,s),An(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,Ph(s,h)));break;case 30:break;case 21:break;default:Sn(a,s),An(s)}}function An(s){var a=s.flags;if(a&2){try{for(var l,h=s.return;h!==null;){if(Mb(h)){l=h;break}h=h.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var m=l.stateNode,y=fm(s);kh(s,y,m);break;case 5:var T=l.stateNode;l.flags&32&&(En(T,""),l.flags&=-33);var A=fm(s);kh(s,A,T);break;case 3:case 4:var V=l.stateNode.containerInfo,G=fm(s);dm(s,G,V);break;default:throw Error(i(161))}}catch(Z){ee(s,s.return,Z)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function Ub(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;Ub(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function bs(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)kb(s,a.alternate,a),a=a.sibling}function wa(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:ar(4,a,a.return),wa(a);break;case 1:Ki(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&Ib(a,a.return,l),wa(a);break;case 27:yc(a.stateNode);case 26:case 5:Ki(a,a.return),wa(a);break;case 22:a.memoizedState===null&&wa(a);break;case 30:wa(a);break;default:wa(a)}s=s.sibling}}function vs(s,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var h=a.alternate,m=s,y=a,T=y.flags;switch(y.tag){case 0:case 11:case 15:vs(m,y,l),oc(4,y);break;case 1:if(vs(m,y,l),h=y,m=h.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(G){ee(h,h.return,G)}if(h=y,m=h.updateQueue,m!==null){var A=h.stateNode;try{var V=m.shared.hiddenCallbacks;if(V!==null)for(m.shared.hiddenCallbacks=null,m=0;m<V.length;m++)y0(V[m],A)}catch(G){ee(h,h.return,G)}}l&&T&64&&Rb(y),lc(y,y.return);break;case 27:Ob(y);case 26:case 5:vs(m,y,l),l&&h===null&&T&4&&Db(y),lc(y,y.return);break;case 12:vs(m,y,l);break;case 31:vs(m,y,l),l&&T&4&&Lb(m,y);break;case 13:vs(m,y,l),l&&T&4&&zb(m,y);break;case 22:y.memoizedState===null&&vs(m,y,l),lc(y,y.return);break;case 30:break;default:vs(m,y,l)}a=a.sibling}}function mm(s,a){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&Wl(l))}function pm(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&Wl(s))}function _i(s,a,l,h){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Bb(s,a,l,h),a=a.sibling}function Bb(s,a,l,h){var m=a.flags;switch(a.tag){case 0:case 11:case 15:_i(s,a,l,h),m&2048&&oc(9,a);break;case 1:_i(s,a,l,h);break;case 3:_i(s,a,l,h),m&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&Wl(s)));break;case 12:if(m&2048){_i(s,a,l,h),s=a.stateNode;try{var y=a.memoizedProps,T=y.id,A=y.onPostCommit;typeof A=="function"&&A(T,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(V){ee(a,a.return,V)}}else _i(s,a,l,h);break;case 31:_i(s,a,l,h);break;case 13:_i(s,a,l,h);break;case 23:break;case 22:y=a.stateNode,T=a.alternate,a.memoizedState!==null?y._visibility&2?_i(s,a,l,h):cc(s,a):y._visibility&2?_i(s,a,l,h):(y._visibility|=2,ko(s,a,l,h,(a.subtreeFlags&10256)!==0||!1)),m&2048&&mm(T,a);break;case 24:_i(s,a,l,h),m&2048&&pm(a.alternate,a);break;default:_i(s,a,l,h)}}function ko(s,a,l,h,m){for(m=m&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var y=s,T=a,A=l,V=h,G=T.flags;switch(T.tag){case 0:case 11:case 15:ko(y,T,A,V,m),oc(8,T);break;case 23:break;case 22:var Z=T.stateNode;T.memoizedState!==null?Z._visibility&2?ko(y,T,A,V,m):cc(y,T):(Z._visibility|=2,ko(y,T,A,V,m)),m&&G&2048&&mm(T.alternate,T);break;case 24:ko(y,T,A,V,m),m&&G&2048&&pm(T.alternate,T);break;default:ko(y,T,A,V,m)}a=a.sibling}}function cc(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=s,h=a,m=h.flags;switch(h.tag){case 22:cc(l,h),m&2048&&mm(h.alternate,h);break;case 24:cc(l,h),m&2048&&pm(h.alternate,h);break;default:cc(l,h)}a=a.sibling}}var uc=8192;function Po(s,a,l){if(s.subtreeFlags&uc)for(s=s.child;s!==null;)Fb(s,a,l),s=s.sibling}function Fb(s,a,l){switch(s.tag){case 26:Po(s,a,l),s.flags&uc&&s.memoizedState!==null&&eR(l,yi,s.memoizedState,s.memoizedProps);break;case 5:Po(s,a,l);break;case 3:case 4:var h=yi;yi=Xh(s.stateNode.containerInfo),Po(s,a,l),yi=h;break;case 22:s.memoizedState===null&&(h=s.alternate,h!==null&&h.memoizedState!==null?(h=uc,uc=16777216,Po(s,a,l),uc=h):Po(s,a,l));break;default:Po(s,a,l)}}function Hb(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function hc(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var h=a[l];Qe=h,Gb(h,s)}Hb(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)qb(s),s=s.sibling}function qb(s){switch(s.tag){case 0:case 11:case 15:hc(s),s.flags&2048&&ar(9,s,s.return);break;case 3:hc(s);break;case 12:hc(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,Vh(s)):hc(s);break;default:hc(s)}}function Vh(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var h=a[l];Qe=h,Gb(h,s)}Hb(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:ar(8,a,a.return),Vh(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,Vh(a));break;default:Vh(a)}s=s.sibling}}function Gb(s,a){for(;Qe!==null;){var l=Qe;switch(l.tag){case 0:case 11:case 15:ar(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var h=l.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Wl(l.memoizedState.cache)}if(h=l.child,h!==null)h.return=l,Qe=h;else t:for(l=s;Qe!==null;){h=Qe;var m=h.sibling,y=h.return;if(Pb(h),h===l){Qe=null;break t}if(m!==null){m.return=y,Qe=m;break t}Qe=y}}}var pC={getCacheForType:function(s){var a=nn(ke),l=a.data.get(s);return l===void 0&&(l=s(),a.data.set(s,l)),l},cacheSignal:function(){return nn(ke).controller.signal}},yC=typeof WeakMap=="function"?WeakMap:Map,$t=0,oe=null,Pt=null,zt=0,te=0,jn=null,or=!1,Vo=!1,ym=!1,Ts=0,Te=0,lr=0,Ca=0,_m=0,Un=0,Lo=0,fc=null,wn=null,bm=!1,Lh=0,Yb=0,zh=1/0,jh=null,cr=null,Ge=0,ur=null,zo=null,Es=0,vm=0,Tm=null,Kb=null,dc=0,Em=null;function Bn(){return($t&2)!==0&&zt!==0?zt&-zt:Y.T!==null?Rm():Uu()}function Wb(){if(Un===0)if((zt&536870912)===0||qt){var s=ta;ta<<=1,(ta&3932160)===0&&(ta=262144),Un=s}else Un=536870912;return s=Ln.current,s!==null&&(s.flags|=32),Un}function Cn(s,a,l){(s===oe&&(te===2||te===9)||s.cancelPendingCommit!==null)&&(jo(s,0),hr(s,zt,Un,!1)),ea(s,l),(($t&2)===0||s!==oe)&&(s===oe&&(($t&2)===0&&(Ca|=l),Te===4&&hr(s,zt,Un,!1)),Wi(s))}function Xb(s,a,l){if(($t&6)!==0)throw Error(i(327));var h=!l&&(a&127)===0&&(a&s.expiredLanes)===0||li(s,a),m=h?vC(s,a):Sm(s,a,!0),y=h;do{if(m===0){Vo&&!h&&hr(s,a,0,!1);break}else{if(l=s.current.alternate,y&&!_C(l)){m=Sm(s,a,!1),y=!1;continue}if(m===2){if(y=a,s.errorRecoveryDisabledLanes&y)var T=0;else T=s.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){a=T;t:{var A=s;m=fc;var V=A.current.memoizedState.isDehydrated;if(V&&(jo(A,T).flags|=256),T=Sm(A,T,!1),T!==2){if(ym&&!V){A.errorRecoveryDisabledLanes|=y,Ca|=y,m=4;break t}y=wn,wn=m,y!==null&&(wn===null?wn=y:wn.push.apply(wn,y))}m=T}if(y=!1,m!==2)continue}}if(m===1){jo(s,0),hr(s,a,0,!0);break}t:{switch(h=s,y=m,y){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:hr(h,a,Un,!or);break t;case 2:wn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(m=Lh+300-_n(),10<m)){if(hr(h,a,Un,!or),Di(h,0,!0)!==0)break t;Es=a,h.timeoutHandle=wv(Qb.bind(null,h,l,wn,jh,bm,a,Un,Ca,Lo,or,y,"Throttled",-0,0),m);break t}Qb(h,l,wn,jh,bm,a,Un,Ca,Lo,or,y,null,-0,0)}}break}while(!0);Wi(s)}function Qb(s,a,l,h,m,y,T,A,V,G,Z,it,K,Q){if(s.timeoutHandle=-1,it=a.subtreeFlags,it&8192||(it&16785408)===16785408){it={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:hi},Fb(a,y,it);var mt=(y&62914560)===y?Lh-_n():(y&4194048)===y?Yb-_n():0;if(mt=nR(it,mt),mt!==null){Es=y,s.cancelPendingCommit=mt(sv.bind(null,s,a,y,l,h,m,T,A,V,Z,it,null,K,Q)),hr(s,y,T,!G);return}}sv(s,a,y,l,h,m,T,A,V)}function _C(s){for(var a=s;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var h=0;h<l.length;h++){var m=l[h],y=m.getSnapshot;m=m.value;try{if(!Pn(y(),m))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function hr(s,a,l,h){a&=~_m,a&=~Ca,s.suspendedLanes|=a,s.pingedLanes&=~a,h&&(s.warmLanes|=a),h=s.expirationTimes;for(var m=a;0<m;){var y=31-xe(m),T=1<<y;h[y]=-1,m&=~T}l!==0&&na(s,l,a)}function Uh(){return($t&6)===0?(gc(0),!1):!0}function xm(){if(Pt!==null){if(te===0)var s=Pt.return;else s=Pt,hs=_a=null,jg(s),Io=null,Ql=0,s=Pt;for(;s!==null;)Cb(s.alternate,s),s=s.return;Pt=null}}function jo(s,a){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,zC(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),Es=0,xm(),oe=s,Pt=l=cs(s.current,null),zt=a,te=0,jn=null,or=!1,Vo=li(s,a),ym=!1,Lo=Un=_m=Ca=lr=Te=0,wn=fc=null,bm=!1,(a&8)!==0&&(a|=a&32);var h=s.entangledLanes;if(h!==0)for(s=s.entanglements,h&=a;0<h;){var m=31-xe(h),y=1<<m;a|=s[m],h&=~y}return Ts=a,oh(),l}function $b(s,a){Ot=null,Y.H=sc,a===Ro||a===mh?(a=d0(),te=3):a===Cg?(a=d0(),te=4):te=a===em?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,jn=a,Pt===null&&(Te=1,Ih(s,$n(a,s.current)))}function Jb(){var s=Ln.current;return s===null?!0:(zt&4194048)===zt?ei===null:(zt&62914560)===zt||(zt&536870912)!==0?s===ei:!1}function Zb(){var s=Y.H;return Y.H=sc,s===null?sc:s}function tv(){var s=Y.A;return Y.A=pC,s}function Bh(){Te=4,or||(zt&4194048)!==zt&&Ln.current!==null||(Vo=!0),(lr&134217727)===0&&(Ca&134217727)===0||oe===null||hr(oe,zt,Un,!1)}function Sm(s,a,l){var h=$t;$t|=2;var m=Zb(),y=tv();(oe!==s||zt!==a)&&(jh=null,jo(s,a)),a=!1;var T=Te;t:do try{if(te!==0&&Pt!==null){var A=Pt,V=jn;switch(te){case 8:xm(),T=6;break t;case 3:case 2:case 9:case 6:Ln.current===null&&(a=!0);var G=te;if(te=0,jn=null,Uo(s,A,V,G),l&&Vo){T=0;break t}break;default:G=te,te=0,jn=null,Uo(s,A,V,G)}}bC(),T=Te;break}catch(Z){$b(s,Z)}while(!0);return a&&s.shellSuspendCounter++,hs=_a=null,$t=h,Y.H=m,Y.A=y,Pt===null&&(oe=null,zt=0,oh()),T}function bC(){for(;Pt!==null;)ev(Pt)}function vC(s,a){var l=$t;$t|=2;var h=Zb(),m=tv();oe!==s||zt!==a?(jh=null,zh=_n()+500,jo(s,a)):Vo=li(s,a);t:do try{if(te!==0&&Pt!==null){a=Pt;var y=jn;e:switch(te){case 1:te=0,jn=null,Uo(s,a,y,1);break;case 2:case 9:if(h0(y)){te=0,jn=null,nv(a);break}a=function(){te!==2&&te!==9||oe!==s||(te=7),Wi(s)},y.then(a,a);break t;case 3:te=7;break t;case 4:te=5;break t;case 7:h0(y)?(te=0,jn=null,nv(a)):(te=0,jn=null,Uo(s,a,y,7));break;case 5:var T=null;switch(Pt.tag){case 26:T=Pt.memoizedState;case 5:case 27:var A=Pt;if(T?Bv(T):A.stateNode.complete){te=0,jn=null;var V=A.sibling;if(V!==null)Pt=V;else{var G=A.return;G!==null?(Pt=G,Fh(G)):Pt=null}break e}}te=0,jn=null,Uo(s,a,y,5);break;case 6:te=0,jn=null,Uo(s,a,y,6);break;case 8:xm(),Te=6;break t;default:throw Error(i(462))}}TC();break}catch(Z){$b(s,Z)}while(!0);return hs=_a=null,Y.H=h,Y.A=m,$t=l,Pt!==null?0:(oe=null,zt=0,oh(),Te)}function TC(){for(;Pt!==null&&!tg();)ev(Pt)}function ev(s){var a=Ab(s.alternate,s,Ts);s.memoizedProps=s.pendingProps,a===null?Fh(s):Pt=a}function nv(s){var a=s,l=a.alternate;switch(a.tag){case 15:case 0:a=bb(l,a,a.pendingProps,a.type,void 0,zt);break;case 11:a=bb(l,a,a.pendingProps,a.type.render,a.ref,zt);break;case 5:jg(a);default:Cb(l,a),a=Pt=t0(a,Ts),a=Ab(l,a,Ts)}s.memoizedProps=s.pendingProps,a===null?Fh(s):Pt=a}function Uo(s,a,l,h){hs=_a=null,jg(a),Io=null,Ql=0;var m=a.return;try{if(cC(s,m,a,l,zt)){Te=1,Ih(s,$n(l,s.current)),Pt=null;return}}catch(y){if(m!==null)throw Pt=m,y;Te=1,Ih(s,$n(l,s.current)),Pt=null;return}a.flags&32768?(qt||h===1?s=!0:Vo||(zt&536870912)!==0?s=!1:(or=s=!0,(h===2||h===9||h===3||h===6)&&(h=Ln.current,h!==null&&h.tag===13&&(h.flags|=16384))),iv(a,s)):Fh(a)}function Fh(s){var a=s;do{if((a.flags&32768)!==0){iv(a,or);return}s=a.return;var l=fC(a.alternate,a,Ts);if(l!==null){Pt=l;return}if(a=a.sibling,a!==null){Pt=a;return}Pt=a=s}while(a!==null);Te===0&&(Te=5)}function iv(s,a){do{var l=dC(s.alternate,s);if(l!==null){l.flags&=32767,Pt=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(s=s.sibling,s!==null)){Pt=s;return}Pt=s=l}while(s!==null);Te=6,Pt=null}function sv(s,a,l,h,m,y,T,A,V){s.cancelPendingCommit=null;do Hh();while(Ge!==0);if(($t&6)!==0)throw Error(i(327));if(a!==null){if(a===s.current)throw Error(i(177));if(y=a.lanes|a.childLanes,y|=fg,ig(s,l,y,T,A,V),s===oe&&(Pt=oe=null,zt=0),zo=a,ur=s,Es=l,vm=y,Tm=m,Kb=h,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,AC(Bs,function(){return cv(),null})):(s.callbackNode=null,s.callbackPriority=0),h=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||h){h=Y.T,Y.T=null,m=at.p,at.p=2,T=$t,$t|=4;try{gC(s,a,l)}finally{$t=T,at.p=m,Y.T=h}}Ge=1,rv(),av(),ov()}}function rv(){if(Ge===1){Ge=0;var s=ur,a=zo,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=Y.T,Y.T=null;var h=at.p;at.p=2;var m=$t;$t|=4;try{jb(a,s);var y=Vm,T=G_(s.containerInfo),A=y.focusedElem,V=y.selectionRange;if(T!==A&&A&&A.ownerDocument&&q_(A.ownerDocument.documentElement,A)){if(V!==null&&og(A)){var G=V.start,Z=V.end;if(Z===void 0&&(Z=G),"selectionStart"in A)A.selectionStart=G,A.selectionEnd=Math.min(Z,A.value.length);else{var it=A.ownerDocument||document,K=it&&it.defaultView||window;if(K.getSelection){var Q=K.getSelection(),mt=A.textContent.length,Et=Math.min(V.start,mt),ae=V.end===void 0?Et:Math.min(V.end,mt);!Q.extend&&Et>ae&&(T=ae,ae=Et,Et=T);var B=H_(A,Et),U=H_(A,ae);if(B&&U&&(Q.rangeCount!==1||Q.anchorNode!==B.node||Q.anchorOffset!==B.offset||Q.focusNode!==U.node||Q.focusOffset!==U.offset)){var q=it.createRange();q.setStart(B.node,B.offset),Q.removeAllRanges(),Et>ae?(Q.addRange(q),Q.extend(U.node,U.offset)):(q.setEnd(U.node,U.offset),Q.addRange(q))}}}}for(it=[],Q=A;Q=Q.parentNode;)Q.nodeType===1&&it.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<it.length;A++){var et=it[A];et.element.scrollLeft=et.left,et.element.scrollTop=et.top}}ef=!!Pm,Vm=Pm=null}finally{$t=m,at.p=h,Y.T=l}}s.current=a,Ge=2}}function av(){if(Ge===2){Ge=0;var s=ur,a=zo,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=Y.T,Y.T=null;var h=at.p;at.p=2;var m=$t;$t|=4;try{kb(s,a.alternate,a)}finally{$t=m,at.p=h,Y.T=l}}Ge=3}}function ov(){if(Ge===4||Ge===3){Ge=0,Nu();var s=ur,a=zo,l=Es,h=Kb;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Ge=5:(Ge=0,zo=ur=null,lv(s,s.pendingLanes));var m=s.pendingLanes;if(m===0&&(cr=null),rs(l),a=a.stateNode,Ze&&typeof Ze.onCommitFiberRoot=="function")try{Ze.onCommitFiberRoot(oi,a,void 0,(a.current.flags&128)===128)}catch{}if(h!==null){a=Y.T,m=at.p,at.p=2,Y.T=null;try{for(var y=s.onRecoverableError,T=0;T<h.length;T++){var A=h[T];y(A.value,{componentStack:A.stack})}}finally{Y.T=a,at.p=m}}(Es&3)!==0&&Hh(),Wi(s),m=s.pendingLanes,(l&261930)!==0&&(m&42)!==0?s===Em?dc++:(dc=0,Em=s):dc=0,gc(0)}}function lv(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,Wl(a)))}function Hh(){return rv(),av(),ov(),cv()}function cv(){if(Ge!==5)return!1;var s=ur,a=vm;vm=0;var l=rs(Es),h=Y.T,m=at.p;try{at.p=32>l?32:l,Y.T=null,l=Tm,Tm=null;var y=ur,T=Es;if(Ge=0,zo=ur=null,Es=0,($t&6)!==0)throw Error(i(331));var A=$t;if($t|=4,qb(y.current),Bb(y,y.current,T,l),$t=A,gc(0,!1),Ze&&typeof Ze.onPostCommitFiberRoot=="function")try{Ze.onPostCommitFiberRoot(oi,y)}catch{}return!0}finally{at.p=m,Y.T=h,lv(s,a)}}function uv(s,a,l){a=$n(l,a),a=tm(s.stateNode,a,2),s=ir(s,a,2),s!==null&&(ea(s,2),Wi(s))}function ee(s,a,l){if(s.tag===3)uv(s,s,l);else for(;a!==null;){if(a.tag===3){uv(a,s,l);break}else if(a.tag===1){var h=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(cr===null||!cr.has(h))){s=$n(l,s),l=hb(2),h=ir(a,l,2),h!==null&&(fb(l,h,a,s),ea(h,2),Wi(h));break}}a=a.return}}function Am(s,a,l){var h=s.pingCache;if(h===null){h=s.pingCache=new yC;var m=new Set;h.set(a,m)}else m=h.get(a),m===void 0&&(m=new Set,h.set(a,m));m.has(l)||(ym=!0,m.add(l),s=EC.bind(null,s,a,l),a.then(s,s))}function EC(s,a,l){var h=s.pingCache;h!==null&&h.delete(a),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,oe===s&&(zt&l)===l&&(Te===4||Te===3&&(zt&62914560)===zt&&300>_n()-Lh?($t&2)===0&&jo(s,0):_m|=l,Lo===zt&&(Lo=0)),Wi(s)}function hv(s,a){a===0&&(a=ju()),s=ma(s,a),s!==null&&(ea(s,a),Wi(s))}function xC(s){var a=s.memoizedState,l=0;a!==null&&(l=a.retryLane),hv(s,l)}function SC(s,a){var l=0;switch(s.tag){case 31:case 13:var h=s.stateNode,m=s.memoizedState;m!==null&&(l=m.retryLane);break;case 19:h=s.stateNode;break;case 22:h=s.stateNode._retryCache;break;default:throw Error(i(314))}h!==null&&h.delete(a),hv(s,l)}function AC(s,a){return qe(s,a)}var qh=null,Bo=null,wm=!1,Gh=!1,Cm=!1,fr=0;function Wi(s){s!==Bo&&s.next===null&&(Bo===null?qh=Bo=s:Bo=Bo.next=s),Gh=!0,wm||(wm=!0,CC())}function gc(s,a){if(!Cm&&Gh){Cm=!0;do for(var l=!1,h=qh;h!==null;){if(s!==0){var m=h.pendingLanes;if(m===0)var y=0;else{var T=h.suspendedLanes,A=h.pingedLanes;y=(1<<31-xe(42|s)+1)-1,y&=m&~(T&~A),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(l=!0,mv(h,y))}else y=zt,y=Di(h,h===oe?y:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(y&3)===0||li(h,y)||(l=!0,mv(h,y));h=h.next}while(l);Cm=!1}}function wC(){fv()}function fv(){Gh=wm=!1;var s=0;fr!==0&&LC()&&(s=fr);for(var a=_n(),l=null,h=qh;h!==null;){var m=h.next,y=dv(h,a);y===0?(h.next=null,l===null?qh=m:l.next=m,m===null&&(Bo=l)):(l=h,(s!==0||(y&3)!==0)&&(Gh=!0)),h=m}Ge!==0&&Ge!==5||gc(s),fr!==0&&(fr=0)}function dv(s,a){for(var l=s.suspendedLanes,h=s.pingedLanes,m=s.expirationTimes,y=s.pendingLanes&-62914561;0<y;){var T=31-xe(y),A=1<<T,V=m[T];V===-1?((A&l)===0||(A&h)!==0)&&(m[T]=ng(A,a)):V<=a&&(s.expiredLanes|=A),y&=~A}if(a=oe,l=zt,l=Di(s,s===a?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h=s.callbackNode,l===0||s===a&&(te===2||te===9)||s.cancelPendingCommit!==null)return h!==null&&h!==null&&Us(h),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||li(s,l)){if(a=l&-l,a===s.callbackPriority)return a;switch(h!==null&&Us(h),rs(l)){case 2:case 8:l=Sl;break;case 32:l=Bs;break;case 268435456:l=ku;break;default:l=Bs}return h=gv.bind(null,s),l=qe(l,h),s.callbackPriority=a,s.callbackNode=l,a}return h!==null&&h!==null&&Us(h),s.callbackPriority=2,s.callbackNode=null,2}function gv(s,a){if(Ge!==0&&Ge!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(Hh()&&s.callbackNode!==l)return null;var h=zt;return h=Di(s,s===oe?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h===0?null:(Xb(s,h,a),dv(s,_n()),s.callbackNode!=null&&s.callbackNode===l?gv.bind(null,s):null)}function mv(s,a){if(Hh())return null;Xb(s,a,!0)}function CC(){jC(function(){($t&6)!==0?qe(xl,wC):fv()})}function Rm(){if(fr===0){var s=wo;s===0&&(s=Ri,Ri<<=1,(Ri&261888)===0&&(Ri=256)),fr=s}return fr}function pv(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:uo(""+s)}function yv(s,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,s.id&&l.setAttribute("form",s.id),a.parentNode.insertBefore(l,a),s=new FormData(s),l.parentNode.removeChild(l),s}function RC(s,a,l,h,m){if(a==="submit"&&l&&l.stateNode===m){var y=pv((m[We]||null).action),T=h.submitter;T&&(a=(a=T[We]||null)?pv(a.formAction):T.getAttribute("formAction"),a!==null&&(y=a,T=null));var A=new Bi("action","action",null,h,m);s.push({event:A,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(fr!==0){var V=T?yv(m,T):new FormData(m);Wg(l,{pending:!0,data:V,method:m.method,action:y},null,V)}}else typeof y=="function"&&(A.preventDefault(),V=T?yv(m,T):new FormData(m),Wg(l,{pending:!0,data:V,method:m.method,action:y},y,V))},currentTarget:m}]})}}for(var Im=0;Im<hg.length;Im++){var Dm=hg[Im],IC=Dm.toLowerCase(),DC=Dm[0].toUpperCase()+Dm.slice(1);pi(IC,"on"+DC)}pi(W_,"onAnimationEnd"),pi(X_,"onAnimationIteration"),pi(Q_,"onAnimationStart"),pi("dblclick","onDoubleClick"),pi("focusin","onFocus"),pi("focusout","onBlur"),pi(Yw,"onTransitionRun"),pi(Kw,"onTransitionStart"),pi(Ww,"onTransitionCancel"),pi($_,"onTransitionEnd"),Li("onMouseEnter",["mouseout","mouseover"]),Li("onMouseLeave",["mouseout","mouseover"]),Li("onPointerEnter",["pointerout","pointerover"]),Li("onPointerLeave",["pointerout","pointerover"]),Vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Vi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),MC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(mc));function _v(s,a){a=(a&4)!==0;for(var l=0;l<s.length;l++){var h=s[l],m=h.event;h=h.listeners;t:{var y=void 0;if(a)for(var T=h.length-1;0<=T;T--){var A=h[T],V=A.instance,G=A.currentTarget;if(A=A.listener,V!==y&&m.isPropagationStopped())break t;y=A,m.currentTarget=G;try{y(m)}catch(Z){ah(Z)}m.currentTarget=null,y=V}else for(T=0;T<h.length;T++){if(A=h[T],V=A.instance,G=A.currentTarget,A=A.listener,V!==y&&m.isPropagationStopped())break t;y=A,m.currentTarget=G;try{y(m)}catch(Z){ah(Z)}m.currentTarget=null,y=V}}}}function Vt(s,a){var l=a[ro];l===void 0&&(l=a[ro]=new Set);var h=s+"__bubble";l.has(h)||(bv(a,s,2,!1),l.add(h))}function Mm(s,a,l){var h=0;a&&(h|=4),bv(l,s,h,a)}var Yh="_reactListening"+Math.random().toString(36).slice(2);function Om(s){if(!s[Yh]){s[Yh]=!0,Cl.forEach(function(l){l!=="selectionchange"&&(MC.has(l)||Mm(l,!1,s),Mm(l,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Yh]||(a[Yh]=!0,Mm("selectionchange",!1,a))}}function bv(s,a,l,h){switch(Wv(a)){case 2:var m=rR;break;case 8:m=aR;break;default:m=Km}l=m.bind(null,a,l,s),m=void 0,!oa||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(m=!0),h?m!==void 0?s.addEventListener(a,l,{capture:!0,passive:m}):s.addEventListener(a,l,!0):m!==void 0?s.addEventListener(a,l,{passive:m}):s.addEventListener(a,l,!1)}function Nm(s,a,l,h,m){var y=h;if((a&1)===0&&(a&2)===0&&h!==null)t:for(;;){if(h===null)return;var T=h.tag;if(T===3||T===4){var A=h.stateNode.containerInfo;if(A===m)break;if(T===4)for(T=h.return;T!==null;){var V=T.tag;if((V===3||V===4)&&T.stateNode.containerInfo===m)return;T=T.return}for(;A!==null;){if(T=ki(A),T===null)return;if(V=T.tag,V===5||V===6||V===26||V===27){h=y=T;continue t}A=A.parentNode}}h=h.return}Ks(function(){var G=y,Z=Kn(l),it=[];t:{var K=J_.get(s);if(K!==void 0){var Q=Bi,mt=s;switch(s){case"keypress":if(ca(l)===0)break t;case"keydown":case"keyup":Q=ih;break;case"focusin":mt="focus",Q=ha;break;case"focusout":mt="blur",Q=ha;break;case"beforeblur":case"afterblur":Q=ha;break;case"click":if(l.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=Ul;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=Wu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=v;break;case W_:case X_:case Q_:Q=Qu;break;case $_:Q=R;break;case"scroll":case"scrollend":Q=jl;break;case"wheel":Q=X;break;case"copy":case"cut":case"paste":Q=$u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=ls;break;case"toggle":case"beforetoggle":Q=Mt}var Et=(a&4)!==0,ae=!Et&&(s==="scroll"||s==="scrollend"),B=Et?K!==null?K+"Capture":null:K;Et=[];for(var U=G,q;U!==null;){var et=U;if(q=et.stateNode,et=et.tag,et!==5&&et!==26&&et!==27||q===null||B===null||(et=fi(U,B),et!=null&&Et.push(pc(U,et,q))),ae)break;U=U.return}0<Et.length&&(K=new Q(K,mt,null,l,Z),it.push({event:K,listeners:Et}))}}if((a&7)===0){t:{if(K=s==="mouseover"||s==="pointerover",Q=s==="mouseout"||s==="pointerout",K&&l!==Vl&&(mt=l.relatedTarget||l.fromElement)&&(ki(mt)||mt[Oi]))break t;if((Q||K)&&(K=Z.window===Z?Z:(K=Z.ownerDocument)?K.defaultView||K.parentWindow:window,Q?(mt=l.relatedTarget||l.toElement,Q=G,mt=mt?ki(mt):null,mt!==null&&(ae=o(mt),Et=mt.tag,mt!==ae||Et!==5&&Et!==27&&Et!==6)&&(mt=null)):(Q=null,mt=G),Q!==mt)){if(Et=Ul,et="onMouseLeave",B="onMouseEnter",U="mouse",(s==="pointerout"||s==="pointerover")&&(Et=ls,et="onPointerLeave",B="onPointerEnter",U="pointer"),ae=Q==null?K:Nn(Q),q=mt==null?K:Nn(mt),K=new Et(et,U+"leave",Q,l,Z),K.target=ae,K.relatedTarget=q,et=null,ki(Z)===G&&(Et=new Et(B,U+"enter",mt,l,Z),Et.target=q,Et.relatedTarget=ae,et=Et),ae=et,Q&&mt)e:{for(Et=OC,B=Q,U=mt,q=0,et=B;et;et=Et(et))q++;et=0;for(var _t=U;_t;_t=Et(_t))et++;for(;0<q-et;)B=Et(B),q--;for(;0<et-q;)U=Et(U),et--;for(;q--;){if(B===U||U!==null&&B===U.alternate){Et=B;break e}B=Et(B),U=Et(U)}Et=null}else Et=null;Q!==null&&vv(it,K,Q,Et,!1),mt!==null&&ae!==null&&vv(it,ae,mt,Et,!0)}}t:{if(K=G?Nn(G):window,Q=K.nodeName&&K.nodeName.toLowerCase(),Q==="select"||Q==="input"&&K.type==="file")var Kt=L_;else if(P_(K))if(z_)Kt=Hw;else{Kt=Bw;var pt=Uw}else Q=K.nodeName,!Q||Q.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?G&&co(G.elementType)&&(Kt=L_):Kt=Fw;if(Kt&&(Kt=Kt(s,G))){V_(it,Kt,l,Z);break t}pt&&pt(s,K,G),s==="focusout"&&G&&K.type==="number"&&G.memoizedProps.value!=null&&Nl(K,"number",K.value)}switch(pt=G?Nn(G):window,s){case"focusin":(P_(pt)||pt.contentEditable==="true")&&(_o=pt,lg=G,Gl=null);break;case"focusout":Gl=lg=_o=null;break;case"mousedown":cg=!0;break;case"contextmenu":case"mouseup":case"dragend":cg=!1,Y_(it,l,Z);break;case"selectionchange":if(Gw)break;case"keydown":case"keyup":Y_(it,l,Z)}var Nt;if(Qt)t:{switch(s){case"compositionstart":var jt="onCompositionStart";break t;case"compositionend":jt="onCompositionEnd";break t;case"compositionupdate":jt="onCompositionUpdate";break t}jt=void 0}else yo?fa(s,l)&&(jt="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(jt="onCompositionStart");jt&&(qi&&l.locale!=="ko"&&(yo||jt!=="onCompositionStart"?jt==="onCompositionEnd"&&yo&&(Nt=zl()):(Ui=Z,Ll="value"in Ui?Ui.value:Ui.textContent,yo=!0)),pt=Kh(G,jt),0<pt.length&&(jt=new Hi(jt,s,null,l,Z),it.push({event:jt,listeners:pt}),Nt?jt.data=Nt:(Nt=po(l),Nt!==null&&(jt.data=Nt)))),(Nt=Xn?Vw(s,l):Lw(s,l))&&(jt=Kh(G,"onBeforeInput"),0<jt.length&&(pt=new Hi("onBeforeInput","beforeinput",null,l,Z),it.push({event:pt,listeners:jt}),pt.data=Nt)),RC(it,s,G,l,Z)}_v(it,a)})}function pc(s,a,l){return{instance:s,listener:a,currentTarget:l}}function Kh(s,a){for(var l=a+"Capture",h=[];s!==null;){var m=s,y=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||y===null||(m=fi(s,l),m!=null&&h.unshift(pc(s,m,y)),m=fi(s,a),m!=null&&h.push(pc(s,m,y))),s.tag===3)return h;s=s.return}return[]}function OC(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function vv(s,a,l,h,m){for(var y=a._reactName,T=[];l!==null&&l!==h;){var A=l,V=A.alternate,G=A.stateNode;if(A=A.tag,V!==null&&V===h)break;A!==5&&A!==26&&A!==27||G===null||(V=G,m?(G=fi(l,y),G!=null&&T.unshift(pc(l,G,V))):m||(G=fi(l,y),G!=null&&T.push(pc(l,G,V)))),l=l.return}T.length!==0&&s.push({event:a,listeners:T})}var NC=/\r\n?/g,kC=/\u0000|\uFFFD/g;function Tv(s){return(typeof s=="string"?s:""+s).replace(NC,`
`).replace(kC,"")}function Ev(s,a){return a=Tv(a),Tv(s)===a}function re(s,a,l,h,m,y){switch(l){case"children":typeof h=="string"?a==="body"||a==="textarea"&&h===""||En(s,h):(typeof h=="number"||typeof h=="bigint")&&a!=="body"&&En(s,""+h);break;case"className":kn(s,"class",h);break;case"tabIndex":kn(s,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":kn(s,l,h);break;case"style":Pl(s,h,y);break;case"data":if(a!=="object"){kn(s,"data",h);break}case"src":case"href":if(h===""&&(a!=="a"||l!=="href")){s.removeAttribute(l);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(l);break}h=uo(""+h),s.setAttribute(l,h);break;case"action":case"formAction":if(typeof h=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(l==="formAction"?(a!=="input"&&re(s,a,"name",m.name,m,null),re(s,a,"formEncType",m.formEncType,m,null),re(s,a,"formMethod",m.formMethod,m,null),re(s,a,"formTarget",m.formTarget,m,null)):(re(s,a,"encType",m.encType,m,null),re(s,a,"method",m.method,m,null),re(s,a,"target",m.target,m,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(l);break}h=uo(""+h),s.setAttribute(l,h);break;case"onClick":h!=null&&(s.onclick=hi);break;case"onScroll":h!=null&&Vt("scroll",s);break;case"onScrollEnd":h!=null&&Vt("scrollend",s);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(l=h.__html,l!=null){if(m.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"multiple":s.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":s.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){s.removeAttribute("xlink:href");break}l=uo(""+h),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(l,""+h):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":h===!0?s.setAttribute(l,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(l,h):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?s.setAttribute(l,h):s.removeAttribute(l);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?s.removeAttribute(l):s.setAttribute(l,h);break;case"popover":Vt("beforetoggle",s),Vt("toggle",s),oo(s,"popover",h);break;case"xlinkActuate":Ne(s,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Ne(s,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Ne(s,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Ne(s,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Ne(s,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Ne(s,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Ne(s,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Ne(s,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Ne(s,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":oo(s,"is",h);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Ku.get(l)||l,oo(s,l,h))}}function km(s,a,l,h,m,y){switch(l){case"style":Pl(s,h,y);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(l=h.__html,l!=null){if(m.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"children":typeof h=="string"?En(s,h):(typeof h=="number"||typeof h=="bigint")&&En(s,""+h);break;case"onScroll":h!=null&&Vt("scroll",s);break;case"onScrollEnd":h!=null&&Vt("scrollend",s);break;case"onClick":h!=null&&(s.onclick=hi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Rl.hasOwnProperty(l))t:{if(l[0]==="o"&&l[1]==="n"&&(m=l.endsWith("Capture"),a=l.slice(2,m?l.length-7:void 0),y=s[We]||null,y=y!=null?y[l]:null,typeof y=="function"&&s.removeEventListener(a,y,m),typeof h=="function")){typeof y!="function"&&y!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(a,h,m);break t}l in s?s[l]=h:h===!0?s.setAttribute(l,""):oo(s,l,h)}}}function rn(s,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Vt("error",s),Vt("load",s);var h=!1,m=!1,y;for(y in l)if(l.hasOwnProperty(y)){var T=l[y];if(T!=null)switch(y){case"src":h=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:re(s,a,y,T,l,null)}}m&&re(s,a,"srcSet",l.srcSet,l,null),h&&re(s,a,"src",l.src,l,null);return;case"input":Vt("invalid",s);var A=y=T=m=null,V=null,G=null;for(h in l)if(l.hasOwnProperty(h)){var Z=l[h];if(Z!=null)switch(h){case"name":m=Z;break;case"type":T=Z;break;case"checked":V=Z;break;case"defaultChecked":G=Z;break;case"value":y=Z;break;case"defaultValue":A=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,a));break;default:re(s,a,h,Z,l,null)}}qu(s,y,A,V,G,T,m,!1);return;case"select":Vt("invalid",s),h=T=y=null;for(m in l)if(l.hasOwnProperty(m)&&(A=l[m],A!=null))switch(m){case"value":y=A;break;case"defaultValue":T=A;break;case"multiple":h=A;default:re(s,a,m,A,l,null)}a=y,l=T,s.multiple=!!h,a!=null?Hs(s,!!h,a,!1):l!=null&&Hs(s,!!h,l,!0);return;case"textarea":Vt("invalid",s),y=m=h=null;for(T in l)if(l.hasOwnProperty(T)&&(A=l[T],A!=null))switch(T){case"value":h=A;break;case"defaultValue":m=A;break;case"children":y=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(i(91));break;default:re(s,a,T,A,l,null)}qs(s,h,m,y);return;case"option":for(V in l)if(l.hasOwnProperty(V)&&(h=l[V],h!=null))switch(V){case"selected":s.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:re(s,a,V,h,l,null)}return;case"dialog":Vt("beforetoggle",s),Vt("toggle",s),Vt("cancel",s),Vt("close",s);break;case"iframe":case"object":Vt("load",s);break;case"video":case"audio":for(h=0;h<mc.length;h++)Vt(mc[h],s);break;case"image":Vt("error",s),Vt("load",s);break;case"details":Vt("toggle",s);break;case"embed":case"source":case"link":Vt("error",s),Vt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in l)if(l.hasOwnProperty(G)&&(h=l[G],h!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:re(s,a,G,h,l,null)}return;default:if(co(a)){for(Z in l)l.hasOwnProperty(Z)&&(h=l[Z],h!==void 0&&km(s,a,Z,h,l,void 0));return}}for(A in l)l.hasOwnProperty(A)&&(h=l[A],h!=null&&re(s,a,A,h,l,null))}function PC(s,a,l,h){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,y=null,T=null,A=null,V=null,G=null,Z=null;for(Q in l){var it=l[Q];if(l.hasOwnProperty(Q)&&it!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":V=it;default:h.hasOwnProperty(Q)||re(s,a,Q,null,h,it)}}for(var K in h){var Q=h[K];if(it=l[K],h.hasOwnProperty(K)&&(Q!=null||it!=null))switch(K){case"type":y=Q;break;case"name":m=Q;break;case"checked":G=Q;break;case"defaultChecked":Z=Q;break;case"value":T=Q;break;case"defaultValue":A=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,a));break;default:Q!==it&&re(s,a,K,Q,h,it)}}lo(s,T,A,V,G,Z,y,m);return;case"select":Q=T=A=K=null;for(y in l)if(V=l[y],l.hasOwnProperty(y)&&V!=null)switch(y){case"value":break;case"multiple":Q=V;default:h.hasOwnProperty(y)||re(s,a,y,null,h,V)}for(m in h)if(y=h[m],V=l[m],h.hasOwnProperty(m)&&(y!=null||V!=null))switch(m){case"value":K=y;break;case"defaultValue":A=y;break;case"multiple":T=y;default:y!==V&&re(s,a,m,y,h,V)}a=A,l=T,h=Q,K!=null?Hs(s,!!l,K,!1):!!h!=!!l&&(a!=null?Hs(s,!!l,a,!0):Hs(s,!!l,l?[]:"",!1));return;case"textarea":Q=K=null;for(A in l)if(m=l[A],l.hasOwnProperty(A)&&m!=null&&!h.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:re(s,a,A,null,h,m)}for(T in h)if(m=h[T],y=l[T],h.hasOwnProperty(T)&&(m!=null||y!=null))switch(T){case"value":K=m;break;case"defaultValue":Q=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(i(91));break;default:m!==y&&re(s,a,T,m,h,y)}Gu(s,K,Q);return;case"option":for(var mt in l)if(K=l[mt],l.hasOwnProperty(mt)&&K!=null&&!h.hasOwnProperty(mt))switch(mt){case"selected":s.selected=!1;break;default:re(s,a,mt,null,h,K)}for(V in h)if(K=h[V],Q=l[V],h.hasOwnProperty(V)&&K!==Q&&(K!=null||Q!=null))switch(V){case"selected":s.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:re(s,a,V,K,h,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Et in l)K=l[Et],l.hasOwnProperty(Et)&&K!=null&&!h.hasOwnProperty(Et)&&re(s,a,Et,null,h,K);for(G in h)if(K=h[G],Q=l[G],h.hasOwnProperty(G)&&K!==Q&&(K!=null||Q!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,a));break;default:re(s,a,G,K,h,Q)}return;default:if(co(a)){for(var ae in l)K=l[ae],l.hasOwnProperty(ae)&&K!==void 0&&!h.hasOwnProperty(ae)&&km(s,a,ae,void 0,h,K);for(Z in h)K=h[Z],Q=l[Z],!h.hasOwnProperty(Z)||K===Q||K===void 0&&Q===void 0||km(s,a,Z,K,h,Q);return}}for(var B in l)K=l[B],l.hasOwnProperty(B)&&K!=null&&!h.hasOwnProperty(B)&&re(s,a,B,null,h,K);for(it in h)K=h[it],Q=l[it],!h.hasOwnProperty(it)||K===Q||K==null&&Q==null||re(s,a,it,K,h,Q)}function xv(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function VC(){if(typeof performance.getEntriesByType=="function"){for(var s=0,a=0,l=performance.getEntriesByType("resource"),h=0;h<l.length;h++){var m=l[h],y=m.transferSize,T=m.initiatorType,A=m.duration;if(y&&A&&xv(T)){for(T=0,A=m.responseEnd,h+=1;h<l.length;h++){var V=l[h],G=V.startTime;if(G>A)break;var Z=V.transferSize,it=V.initiatorType;Z&&xv(it)&&(V=V.responseEnd,T+=Z*(V<A?1:(A-G)/(V-G)))}if(--h,a+=8*(y+T)/(m.duration/1e3),s++,10<s)break}}if(0<s)return a/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Pm=null,Vm=null;function Wh(s){return s.nodeType===9?s:s.ownerDocument}function Sv(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Av(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function Lm(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var zm=null;function LC(){var s=window.event;return s&&s.type==="popstate"?s===zm?!1:(zm=s,!0):(zm=null,!1)}var wv=typeof setTimeout=="function"?setTimeout:void 0,zC=typeof clearTimeout=="function"?clearTimeout:void 0,Cv=typeof Promise=="function"?Promise:void 0,jC=typeof queueMicrotask=="function"?queueMicrotask:typeof Cv<"u"?function(s){return Cv.resolve(null).then(s).catch(UC)}:wv;function UC(s){setTimeout(function(){throw s})}function dr(s){return s==="head"}function Rv(s,a){var l=a,h=0;do{var m=l.nextSibling;if(s.removeChild(l),m&&m.nodeType===8)if(l=m.data,l==="/$"||l==="/&"){if(h===0){s.removeChild(m),Go(a);return}h--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")h++;else if(l==="html")yc(s.ownerDocument.documentElement);else if(l==="head"){l=s.ownerDocument.head,yc(l);for(var y=l.firstChild;y;){var T=y.nextSibling,A=y.nodeName;y[Ni]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&y.rel.toLowerCase()==="stylesheet"||l.removeChild(y),y=T}}else l==="body"&&yc(s.ownerDocument.body);l=m}while(l);Go(a)}function Iv(s,a){var l=s;s=0;do{var h=l.nextSibling;if(l.nodeType===1?a?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(a?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),h&&h.nodeType===8)if(l=h.data,l==="/$"){if(s===0)break;s--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||s++;l=h}while(l)}function jm(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":jm(l),ao(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function BC(s,a,l,h){for(;s.nodeType===1;){var m=l;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!h&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(h){if(!s[Ni])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(y=s.getAttribute("rel"),y==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(y!==m.rel||s.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||s.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||s.getAttribute("title")!==(m.title==null?null:m.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(y=s.getAttribute("src"),(y!==(m.src==null?null:m.src)||s.getAttribute("type")!==(m.type==null?null:m.type)||s.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&y&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var y=m.name==null?null:""+m.name;if(m.type==="hidden"&&s.getAttribute("name")===y)return s}else return s;if(s=ni(s.nextSibling),s===null)break}return null}function FC(s,a,l){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=ni(s.nextSibling),s===null))return null;return s}function Dv(s,a){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!a||(s=ni(s.nextSibling),s===null))return null;return s}function Um(s){return s.data==="$?"||s.data==="$~"}function Bm(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function HC(s,a){var l=s.ownerDocument;if(s.data==="$~")s._reactRetry=a;else if(s.data!=="$?"||l.readyState!=="loading")a();else{var h=function(){a(),l.removeEventListener("DOMContentLoaded",h)};l.addEventListener("DOMContentLoaded",h),s._reactRetry=h}}function ni(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return s}var Fm=null;function Mv(s){s=s.nextSibling;for(var a=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"||l==="/&"){if(a===0)return ni(s.nextSibling);a--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||a++}s=s.nextSibling}return null}function Ov(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(a===0)return s;a--}else l!=="/$"&&l!=="/&"||a++}s=s.previousSibling}return null}function Nv(s,a,l){switch(a=Wh(l),s){case"html":if(s=a.documentElement,!s)throw Error(i(452));return s;case"head":if(s=a.head,!s)throw Error(i(453));return s;case"body":if(s=a.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function yc(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);ao(s)}var ii=new Map,kv=new Set;function Xh(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var xs=at.d;at.d={f:qC,r:GC,D:YC,C:KC,L:WC,m:XC,X:$C,S:QC,M:JC};function qC(){var s=xs.f(),a=Uh();return s||a}function GC(s){var a=Yn(s);a!==null&&a.tag===5&&a.type==="form"?$0(a):xs.r(s)}var Fo=typeof document>"u"?null:document;function Pv(s,a,l){var h=Fo;if(h&&typeof a=="string"&&a){var m=Tn(a);m='link[rel="'+s+'"][href="'+m+'"]',typeof l=="string"&&(m+='[crossorigin="'+l+'"]'),kv.has(m)||(kv.add(m),s={rel:s,crossOrigin:l,href:a},h.querySelector(m)===null&&(a=h.createElement("link"),rn(a,"link",s),Oe(a),h.head.appendChild(a)))}}function YC(s){xs.D(s),Pv("dns-prefetch",s,null)}function KC(s,a){xs.C(s,a),Pv("preconnect",s,a)}function WC(s,a,l){xs.L(s,a,l);var h=Fo;if(h&&s&&a){var m='link[rel="preload"][as="'+Tn(a)+'"]';a==="image"&&l&&l.imageSrcSet?(m+='[imagesrcset="'+Tn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(m+='[imagesizes="'+Tn(l.imageSizes)+'"]')):m+='[href="'+Tn(s)+'"]';var y=m;switch(a){case"style":y=Ho(s);break;case"script":y=qo(s)}ii.has(y)||(s=_({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:s,as:a},l),ii.set(y,s),h.querySelector(m)!==null||a==="style"&&h.querySelector(_c(y))||a==="script"&&h.querySelector(bc(y))||(a=h.createElement("link"),rn(a,"link",s),Oe(a),h.head.appendChild(a)))}}function XC(s,a){xs.m(s,a);var l=Fo;if(l&&s){var h=a&&typeof a.as=="string"?a.as:"script",m='link[rel="modulepreload"][as="'+Tn(h)+'"][href="'+Tn(s)+'"]',y=m;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=qo(s)}if(!ii.has(y)&&(s=_({rel:"modulepreload",href:s},a),ii.set(y,s),l.querySelector(m)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(bc(y)))return}h=l.createElement("link"),rn(h,"link",s),Oe(h),l.head.appendChild(h)}}}function QC(s,a,l){xs.S(s,a,l);var h=Fo;if(h&&s){var m=Pi(h).hoistableStyles,y=Ho(s);a=a||"default";var T=m.get(y);if(!T){var A={loading:0,preload:null};if(T=h.querySelector(_c(y)))A.loading=5;else{s=_({rel:"stylesheet",href:s,"data-precedence":a},l),(l=ii.get(y))&&Hm(s,l);var V=T=h.createElement("link");Oe(V),rn(V,"link",s),V._p=new Promise(function(G,Z){V.onload=G,V.onerror=Z}),V.addEventListener("load",function(){A.loading|=1}),V.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Qh(T,a,h)}T={type:"stylesheet",instance:T,count:1,state:A},m.set(y,T)}}}function $C(s,a){xs.X(s,a);var l=Fo;if(l&&s){var h=Pi(l).hoistableScripts,m=qo(s),y=h.get(m);y||(y=l.querySelector(bc(m)),y||(s=_({src:s,async:!0},a),(a=ii.get(m))&&qm(s,a),y=l.createElement("script"),Oe(y),rn(y,"link",s),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},h.set(m,y))}}function JC(s,a){xs.M(s,a);var l=Fo;if(l&&s){var h=Pi(l).hoistableScripts,m=qo(s),y=h.get(m);y||(y=l.querySelector(bc(m)),y||(s=_({src:s,async:!0,type:"module"},a),(a=ii.get(m))&&qm(s,a),y=l.createElement("script"),Oe(y),rn(y,"link",s),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},h.set(m,y))}}function Vv(s,a,l,h){var m=(m=St.current)?Xh(m):null;if(!m)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=Ho(l.href),l=Pi(m).hoistableStyles,h=l.get(a),h||(h={type:"style",instance:null,count:0,state:null},l.set(a,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=Ho(l.href);var y=Pi(m).hoistableStyles,T=y.get(s);if(T||(m=m.ownerDocument||m,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(s,T),(y=m.querySelector(_c(s)))&&!y._p&&(T.instance=y,T.state.loading=5),ii.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},ii.set(s,l),y||ZC(m,s,l,T.state))),a&&h===null)throw Error(i(528,""));return T}if(a&&h!==null)throw Error(i(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=qo(l),l=Pi(m).hoistableScripts,h=l.get(a),h||(h={type:"script",instance:null,count:0,state:null},l.set(a,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function Ho(s){return'href="'+Tn(s)+'"'}function _c(s){return'link[rel="stylesheet"]['+s+"]"}function Lv(s){return _({},s,{"data-precedence":s.precedence,precedence:null})}function ZC(s,a,l,h){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?h.loading=1:(a=s.createElement("link"),h.preload=a,a.addEventListener("load",function(){return h.loading|=1}),a.addEventListener("error",function(){return h.loading|=2}),rn(a,"link",l),Oe(a),s.head.appendChild(a))}function qo(s){return'[src="'+Tn(s)+'"]'}function bc(s){return"script[async]"+s}function zv(s,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var h=s.querySelector('style[data-href~="'+Tn(l.href)+'"]');if(h)return a.instance=h,Oe(h),h;var m=_({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return h=(s.ownerDocument||s).createElement("style"),Oe(h),rn(h,"style",m),Qh(h,l.precedence,s),a.instance=h;case"stylesheet":m=Ho(l.href);var y=s.querySelector(_c(m));if(y)return a.state.loading|=4,a.instance=y,Oe(y),y;h=Lv(l),(m=ii.get(m))&&Hm(h,m),y=(s.ownerDocument||s).createElement("link"),Oe(y);var T=y;return T._p=new Promise(function(A,V){T.onload=A,T.onerror=V}),rn(y,"link",h),a.state.loading|=4,Qh(y,l.precedence,s),a.instance=y;case"script":return y=qo(l.src),(m=s.querySelector(bc(y)))?(a.instance=m,Oe(m),m):(h=l,(m=ii.get(y))&&(h=_({},l),qm(h,m)),s=s.ownerDocument||s,m=s.createElement("script"),Oe(m),rn(m,"link",h),s.head.appendChild(m),a.instance=m);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(h=a.instance,a.state.loading|=4,Qh(h,l.precedence,s));return a.instance}function Qh(s,a,l){for(var h=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=h.length?h[h.length-1]:null,y=m,T=0;T<h.length;T++){var A=h[T];if(A.dataset.precedence===a)y=A;else if(y!==m)break}y?y.parentNode.insertBefore(s,y.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(s,a.firstChild))}function Hm(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function qm(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var $h=null;function jv(s,a,l){if($h===null){var h=new Map,m=$h=new Map;m.set(l,h)}else m=$h,h=m.get(l),h||(h=new Map,m.set(l,h));if(h.has(s))return h;for(h.set(s,null),l=l.getElementsByTagName(s),m=0;m<l.length;m++){var y=l[m];if(!(y[Ni]||y[Me]||s==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var T=y.getAttribute(a)||"";T=s+T;var A=h.get(T);A?A.push(y):h.set(T,[y])}}return h}function Uv(s,a,l){s=s.ownerDocument||s,s.head.insertBefore(l,a==="title"?s.querySelector("head > title"):null)}function tR(s,a,l){if(l===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Bv(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function eR(s,a,l,h){if(l.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var m=Ho(h.href),y=a.querySelector(_c(m));if(y){a=y._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(s.count++,s=Jh.bind(s),a.then(s,s)),l.state.loading|=4,l.instance=y,Oe(y);return}y=a.ownerDocument||a,h=Lv(h),(m=ii.get(m))&&Hm(h,m),y=y.createElement("link"),Oe(y);var T=y;T._p=new Promise(function(A,V){T.onload=A,T.onerror=V}),rn(y,"link",h),l.instance=y}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(s.count++,l=Jh.bind(s),a.addEventListener("load",l),a.addEventListener("error",l))}}var Gm=0;function nR(s,a){return s.stylesheets&&s.count===0&&tf(s,s.stylesheets),0<s.count||0<s.imgCount?function(l){var h=setTimeout(function(){if(s.stylesheets&&tf(s,s.stylesheets),s.unsuspend){var y=s.unsuspend;s.unsuspend=null,y()}},6e4+a);0<s.imgBytes&&Gm===0&&(Gm=62500*VC());var m=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&tf(s,s.stylesheets),s.unsuspend)){var y=s.unsuspend;s.unsuspend=null,y()}},(s.imgBytes>Gm?50:800)+a);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(h),clearTimeout(m)}}:null}function Jh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)tf(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Zh=null;function tf(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Zh=new Map,a.forEach(iR,s),Zh=null,Jh.call(s))}function iR(s,a){if(!(a.state.loading&4)){var l=Zh.get(s);if(l)var h=l.get(null);else{l=new Map,Zh.set(s,l);for(var m=s.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<m.length;y++){var T=m[y];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(l.set(T.dataset.precedence,T),h=T)}h&&l.set(null,h)}m=a.instance,T=m.getAttribute("data-precedence"),y=l.get(T)||h,y===h&&l.set(null,m),l.set(T,m),this.count++,h=Jh.bind(this),m.addEventListener("load",h),m.addEventListener("error",h),y?y.parentNode.insertBefore(m,y.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(m,s.firstChild)),a.state.loading|=4}}var vc={$$typeof:W,Provider:null,Consumer:null,_currentValue:gt,_currentValue2:gt,_threadCount:0};function sR(s,a,l,h,m,y,T,A,V){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Mi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mi(0),this.hiddenUpdates=Mi(null),this.identifierPrefix=h,this.onUncaughtError=m,this.onCaughtError=y,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function Fv(s,a,l,h,m,y,T,A,V,G,Z,it){return s=new sR(s,a,l,T,V,G,Z,it,A),a=1,y===!0&&(a|=24),y=Vn(3,null,null,a),s.current=y,y.stateNode=s,a=Sg(),a.refCount++,s.pooledCache=a,a.refCount++,y.memoizedState={element:h,isDehydrated:l,cache:a},Rg(y),s}function Hv(s){return s?(s=To,s):To}function qv(s,a,l,h,m,y){m=Hv(m),h.context===null?h.context=m:h.pendingContext=m,h=nr(a),h.payload={element:l},y=y===void 0?null:y,y!==null&&(h.callback=y),l=ir(s,h,a),l!==null&&(Cn(l,s,a),Jl(l,s,a))}function Gv(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<a?l:a}}function Ym(s,a){Gv(s,a),(s=s.alternate)&&Gv(s,a)}function Yv(s){if(s.tag===13||s.tag===31){var a=ma(s,67108864);a!==null&&Cn(a,s,67108864),Ym(s,67108864)}}function Kv(s){if(s.tag===13||s.tag===31){var a=Bn();a=ia(a);var l=ma(s,a);l!==null&&Cn(l,s,a),Ym(s,a)}}var ef=!0;function rR(s,a,l,h){var m=Y.T;Y.T=null;var y=at.p;try{at.p=2,Km(s,a,l,h)}finally{at.p=y,Y.T=m}}function aR(s,a,l,h){var m=Y.T;Y.T=null;var y=at.p;try{at.p=8,Km(s,a,l,h)}finally{at.p=y,Y.T=m}}function Km(s,a,l,h){if(ef){var m=Wm(h);if(m===null)Nm(s,a,h,nf,l),Xv(s,h);else if(lR(m,s,a,l,h))h.stopPropagation();else if(Xv(s,h),a&4&&-1<oR.indexOf(s)){for(;m!==null;){var y=Yn(m);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var T=Ii(y.pendingLanes);if(T!==0){var A=y;for(A.pendingLanes|=2,A.entangledLanes|=2;T;){var V=1<<31-xe(T);A.entanglements[1]|=V,T&=~V}Wi(y),($t&6)===0&&(zh=_n()+500,gc(0))}}break;case 31:case 13:A=ma(y,2),A!==null&&Cn(A,y,2),Uh(),Ym(y,2)}if(y=Wm(h),y===null&&Nm(s,a,h,nf,l),y===m)break;m=y}m!==null&&h.stopPropagation()}else Nm(s,a,h,null,l)}}function Wm(s){return s=Kn(s),Xm(s)}var nf=null;function Xm(s){if(nf=null,s=ki(s),s!==null){var a=o(s);if(a===null)s=null;else{var l=a.tag;if(l===13){if(s=c(a),s!==null)return s;s=null}else if(l===31){if(s=u(a),s!==null)return s;s=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return nf=s,null}function Wv(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Zr()){case xl:return 2;case Sl:return 8;case Bs:case eg:return 32;case ku:return 268435456;default:return 32}default:return 32}}var Qm=!1,gr=null,mr=null,pr=null,Tc=new Map,Ec=new Map,yr=[],oR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Xv(s,a){switch(s){case"focusin":case"focusout":gr=null;break;case"dragenter":case"dragleave":mr=null;break;case"mouseover":case"mouseout":pr=null;break;case"pointerover":case"pointerout":Tc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ec.delete(a.pointerId)}}function xc(s,a,l,h,m,y){return s===null||s.nativeEvent!==y?(s={blockedOn:a,domEventName:l,eventSystemFlags:h,nativeEvent:y,targetContainers:[m]},a!==null&&(a=Yn(a),a!==null&&Yv(a)),s):(s.eventSystemFlags|=h,a=s.targetContainers,m!==null&&a.indexOf(m)===-1&&a.push(m),s)}function lR(s,a,l,h,m){switch(a){case"focusin":return gr=xc(gr,s,a,l,h,m),!0;case"dragenter":return mr=xc(mr,s,a,l,h,m),!0;case"mouseover":return pr=xc(pr,s,a,l,h,m),!0;case"pointerover":var y=m.pointerId;return Tc.set(y,xc(Tc.get(y)||null,s,a,l,h,m)),!0;case"gotpointercapture":return y=m.pointerId,Ec.set(y,xc(Ec.get(y)||null,s,a,l,h,m)),!0}return!1}function Qv(s){var a=ki(s.target);if(a!==null){var l=o(a);if(l!==null){if(a=l.tag,a===13){if(a=c(l),a!==null){s.blockedOn=a,ci(s.priority,function(){Kv(l)});return}}else if(a===31){if(a=u(l),a!==null){s.blockedOn=a,ci(s.priority,function(){Kv(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function sf(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var l=Wm(s.nativeEvent);if(l===null){l=s.nativeEvent;var h=new l.constructor(l.type,l);Vl=h,l.target.dispatchEvent(h),Vl=null}else return a=Yn(l),a!==null&&Yv(a),s.blockedOn=l,!1;a.shift()}return!0}function $v(s,a,l){sf(s)&&l.delete(a)}function cR(){Qm=!1,gr!==null&&sf(gr)&&(gr=null),mr!==null&&sf(mr)&&(mr=null),pr!==null&&sf(pr)&&(pr=null),Tc.forEach($v),Ec.forEach($v)}function rf(s,a){s.blockedOn===a&&(s.blockedOn=null,Qm||(Qm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,cR)))}var af=null;function Jv(s){af!==s&&(af=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){af===s&&(af=null);for(var a=0;a<s.length;a+=3){var l=s[a],h=s[a+1],m=s[a+2];if(typeof h!="function"){if(Xm(h||l)===null)continue;break}var y=Yn(l);y!==null&&(s.splice(a,3),a-=3,Wg(y,{pending:!0,data:m,method:l.method,action:h},h,m))}}))}function Go(s){function a(V){return rf(V,s)}gr!==null&&rf(gr,s),mr!==null&&rf(mr,s),pr!==null&&rf(pr,s),Tc.forEach(a),Ec.forEach(a);for(var l=0;l<yr.length;l++){var h=yr[l];h.blockedOn===s&&(h.blockedOn=null)}for(;0<yr.length&&(l=yr[0],l.blockedOn===null);)Qv(l),l.blockedOn===null&&yr.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(h=0;h<l.length;h+=3){var m=l[h],y=l[h+1],T=m[We]||null;if(typeof y=="function")T||Jv(l);else if(T){var A=null;if(y&&y.hasAttribute("formAction")){if(m=y,T=y[We]||null)A=T.formAction;else if(Xm(m)!==null)continue}else A=T.action;typeof A=="function"?l[h+1]=A:(l.splice(h,3),h-=3),Jv(l)}}}function Zv(){function s(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(T){return m=T})},focusReset:"manual",scroll:"manual"})}function a(){m!==null&&(m(),m=null),h||setTimeout(l,20)}function l(){if(!h&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,m=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(l,100),function(){h=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),m!==null&&(m(),m=null)}}}function $m(s){this._internalRoot=s}of.prototype.render=$m.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(i(409));var l=a.current,h=Bn();qv(l,h,s,a,null,null)},of.prototype.unmount=$m.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;qv(s.current,2,null,s,null,null),Uh(),a[Oi]=null}};function of(s){this._internalRoot=s}of.prototype.unstable_scheduleHydration=function(s){if(s){var a=Uu();s={blockedOn:null,target:s,priority:a};for(var l=0;l<yr.length&&a!==0&&a<yr[l].priority;l++);yr.splice(l,0,s),l===0&&Qv(s)}};var tT=t.version;if(tT!=="19.2.0")throw Error(i(527,tT,"19.2.0"));at.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=d(a),s=s!==null?p(s):null,s=s===null?null:s.stateNode,s};var uR={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lf.isDisabled&&lf.supportsFiber)try{oi=lf.inject(uR),Ze=lf}catch{}}return Ac.createRoot=function(s,a){if(!r(s))throw Error(i(299));var l=!1,h="",m=ob,y=lb,T=cb;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError)),a=Fv(s,1,!1,null,null,l,h,null,m,y,T,Zv),s[Oi]=a.current,Om(s),new $m(a)},Ac.hydrateRoot=function(s,a,l){if(!r(s))throw Error(i(299));var h=!1,m="",y=ob,T=lb,A=cb,V=null;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(T=l.onCaughtError),l.onRecoverableError!==void 0&&(A=l.onRecoverableError),l.formState!==void 0&&(V=l.formState)),a=Fv(s,1,!0,a,l??null,h,m,V,y,T,A,Zv),a.context=Hv(null),l=a.current,h=Bn(),h=ia(h),m=nr(h),m.callback=null,ir(l,m,h),l=h,a.current.lanes=l,ea(a,l),Wi(a),s[Oi]=a.current,Om(s),new of(a)},Ac.version="19.2.0",Ac}var uT;function xR(){if(uT)return tp.exports;uT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),tp.exports=ER(),tp.exports}var SR=xR();const AR=uS(SR),wR=()=>{};var hT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS=function(n){const t=[];let e=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?t[e++]=r:r<2048?(t[e++]=r>>6|192,t[e++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),t[e++]=r>>18|240,t[e++]=r>>12&63|128,t[e++]=r>>6&63|128,t[e++]=r&63|128):(t[e++]=r>>12|224,t[e++]=r>>6&63|128,t[e++]=r&63|128)}return t},CR=function(n){const t=[];let e=0,i=0;for(;e<n.length;){const r=n[e++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=n[e++];t[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=n[e++],c=n[e++],u=n[e++],f=((r&7)<<18|(o&63)<<12|(c&63)<<6|u&63)-65536;t[i++]=String.fromCharCode(55296+(f>>10)),t[i++]=String.fromCharCode(56320+(f&1023))}else{const o=n[e++],c=n[e++];t[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|c&63)}}return t.join("")},fS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const o=n[r],c=r+1<n.length,u=c?n[r+1]:0,f=r+2<n.length,d=f?n[r+2]:0,p=o>>2,_=(o&3)<<4|u>>4;let b=(u&15)<<2|d>>6,x=d&63;f||(x=64,c||(b=64)),i.push(e[p],e[_],e[b],e[x])}return i.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(hS(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):CR(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const o=e[n.charAt(r++)],u=r<n.length?e[n.charAt(r)]:0;++r;const d=r<n.length?e[n.charAt(r)]:64;++r;const _=r<n.length?e[n.charAt(r)]:64;if(++r,o==null||u==null||d==null||_==null)throw new RR;const b=o<<2|u>>4;if(i.push(b),d!==64){const x=u<<4&240|d>>2;if(i.push(x),_!==64){const w=d<<6&192|_;i.push(w)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class RR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const IR=function(n){const t=hS(n);return fS.encodeByteArray(t,!0)},Xf=function(n){return IR(n).replace(/\./g,"")},dS=function(n){try{return fS.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR=()=>DR().__FIREBASE_DEFAULTS__,OR=()=>{if(typeof process>"u"||typeof hT>"u")return;const n=hT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},NR=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&dS(n[1]);return t&&JSON.parse(t)},Sd=()=>{try{return wR()||MR()||OR()||NR()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},gS=n=>{var t,e;return(e=(t=Sd())==null?void 0:t.emulatorHosts)==null?void 0:e[n]},kR=n=>{const t=gS(n);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),i]:[t.substring(0,e),i]},mS=()=>{var n;return(n=Sd())==null?void 0:n.config},pS=n=>{var t;return(t=Sd())==null?void 0:t[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function yS(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},i=t||"demo-project",r=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Xf(JSON.stringify(e)),Xf(JSON.stringify(c)),""].join(".")}const qc={};function LR(){const n={prod:[],emulator:[]};for(const t of Object.keys(qc))qc[t]?n.emulator.push(t):n.prod.push(t);return n}function zR(n){let t=document.getElementById(n),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),e=!0),{created:e,element:t}}let fT=!1;function _S(n,t){if(typeof window>"u"||typeof document>"u"||!dl(window.location.host)||qc[n]===t||qc[n]||fT)return;qc[n]=t;function e(b){return`__firebase__banner__${b}`}const i="__firebase__banner",o=LR().prod.length>0;function c(){const b=document.getElementById(i);b&&b.remove()}function u(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function f(b,x){b.setAttribute("width","24"),b.setAttribute("id",x),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function d(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{fT=!0,c()},b}function p(b,x){b.setAttribute("id",x),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function _(){const b=zR(i),x=e("text"),w=document.getElementById(x)||document.createElement("span"),S=e("learnmore"),D=document.getElementById(S)||document.createElement("a"),L=e("preprendIcon"),F=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const W=b.element;u(W),p(D,S);const J=d();f(F,L),W.append(F,w,D,J),document.body.appendChild(W)}o?(w.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pn())}function UR(){var t;const n=(t=Sd())==null?void 0:t.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function BR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function FR(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function HR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function qR(){const n=pn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function GR(){return!UR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function YR(){try{return typeof indexedDB=="object"}catch{return!1}}function KR(){return new Promise((n,t)=>{try{let e=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),e||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{e=!1},r.onerror=()=>{var o;t(((o=r.error)==null?void 0:o.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR="FirebaseError";class js extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=WR,Object.setPrototypeOf(this,js.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_u.prototype.create)}}class _u{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},r=`${this.service}/${t}`,o=this.errors[t],c=o?XR(o,i):"Error",u=`${this.serviceName}: ${c} (${r}).`;return new js(r,u,i)}}function XR(n,t){return n.replace(QR,(e,i)=>{const r=t[i];return r!=null?String(r):`<${i}?>`})}const QR=/\{\$([^}]+)}/g;function $R(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function Fa(n,t){if(n===t)return!0;const e=Object.keys(n),i=Object.keys(t);for(const r of e){if(!i.includes(r))return!1;const o=n[r],c=t[r];if(dT(o)&&dT(c)){if(!Fa(o,c))return!1}else if(o!==c)return!1}for(const r of i)if(!e.includes(r))return!1;return!0}function dT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bu(n){const t=[];for(const[e,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function Oc(n){const t={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,o]=i.split("=");t[decodeURIComponent(r)]=decodeURIComponent(o)}}),t}function Nc(n){const t=n.indexOf("?");if(!t)return"";const e=n.indexOf("#",t);return n.substring(t,e>0?e:void 0)}function JR(n,t){const e=new ZR(n,t);return e.subscribe.bind(e)}class ZR{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,i){let r;if(t===void 0&&e===void 0&&i===void 0)throw new Error("Missing Observer.");t2(t,["next","error","complete"])?r=t:r={next:t,error:e,complete:i},r.next===void 0&&(r.next=sp),r.error===void 0&&(r.error=sp),r.complete===void 0&&(r.complete=sp);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function t2(n,t){if(typeof n!="object"||n===null)return!1;for(const e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function sp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fe(n){return n&&n._delegate?n._delegate:n}class Ha{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const i=new PR;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:e});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(t==null?void 0:t.optional)??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(i2(t))try{this.getOrInitializeService({instanceIdentifier:Oa})}catch{}for(const[e,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(t=Oa){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Oa){return this.instances.has(t)}getOptions(t=Oa){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[o,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);i===u&&c.resolve(r)}return r}onInit(t,e){const i=this.normalizeInstanceIdentifier(e),r=this.onInitCallbacks.get(i)??new Set;r.add(t),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&t(o,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,e){const i=this.onInitCallbacks.get(e);if(i)for(const r of i)try{r(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:n2(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Oa){return this.component?this.component.multipleInstances?t:Oa:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function n2(n){return n===Oa?void 0:n}function i2(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new e2(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ut;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ut||(Ut={}));const r2={debug:Ut.DEBUG,verbose:Ut.VERBOSE,info:Ut.INFO,warn:Ut.WARN,error:Ut.ERROR,silent:Ut.SILENT},a2=Ut.INFO,o2={[Ut.DEBUG]:"log",[Ut.VERBOSE]:"log",[Ut.INFO]:"info",[Ut.WARN]:"warn",[Ut.ERROR]:"error"},l2=(n,t,...e)=>{if(t<n.logLevel)return;const i=new Date().toISOString(),r=o2[t];if(r)console[r](`[${i}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Ay{constructor(t){this.name=t,this._logLevel=a2,this._logHandler=l2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ut))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?r2[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ut.DEBUG,...t),this._logHandler(this,Ut.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ut.VERBOSE,...t),this._logHandler(this,Ut.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ut.INFO,...t),this._logHandler(this,Ut.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ut.WARN,...t),this._logHandler(this,Ut.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ut.ERROR,...t),this._logHandler(this,Ut.ERROR,...t)}}const c2=(n,t)=>t.some(e=>n instanceof e);let gT,mT;function u2(){return gT||(gT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function h2(){return mT||(mT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const bS=new WeakMap,Op=new WeakMap,vS=new WeakMap,rp=new WeakMap,wy=new WeakMap;function f2(n){const t=new Promise((e,i)=>{const r=()=>{n.removeEventListener("success",o),n.removeEventListener("error",c)},o=()=>{e(Ir(n.result)),r()},c=()=>{i(n.error),r()};n.addEventListener("success",o),n.addEventListener("error",c)});return t.then(e=>{e instanceof IDBCursor&&bS.set(e,n)}).catch(()=>{}),wy.set(t,n),t}function d2(n){if(Op.has(n))return;const t=new Promise((e,i)=>{const r=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",c),n.removeEventListener("abort",c)},o=()=>{e(),r()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",o),n.addEventListener("error",c),n.addEventListener("abort",c)});Op.set(n,t)}let Np={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return Op.get(n);if(t==="objectStoreNames")return n.objectStoreNames||vS.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Ir(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function g2(n){Np=n(Np)}function m2(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const i=n.call(ap(this),t,...e);return vS.set(i,t.sort?t.sort():[t]),Ir(i)}:h2().includes(n)?function(...t){return n.apply(ap(this),t),Ir(bS.get(this))}:function(...t){return Ir(n.apply(ap(this),t))}}function p2(n){return typeof n=="function"?m2(n):(n instanceof IDBTransaction&&d2(n),c2(n,u2())?new Proxy(n,Np):n)}function Ir(n){if(n instanceof IDBRequest)return f2(n);if(rp.has(n))return rp.get(n);const t=p2(n);return t!==n&&(rp.set(n,t),wy.set(t,n)),t}const ap=n=>wy.get(n);function y2(n,t,{blocked:e,upgrade:i,blocking:r,terminated:o}={}){const c=indexedDB.open(n,t),u=Ir(c);return i&&c.addEventListener("upgradeneeded",f=>{i(Ir(c.result),f.oldVersion,f.newVersion,Ir(c.transaction),f)}),e&&c.addEventListener("blocked",f=>e(f.oldVersion,f.newVersion,f)),u.then(f=>{o&&f.addEventListener("close",()=>o()),r&&f.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),u}const _2=["get","getKey","getAll","getAllKeys","count"],b2=["put","add","delete","clear"],op=new Map;function pT(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(op.get(t))return op.get(t);const e=t.replace(/FromIndex$/,""),i=t!==e,r=b2.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(r||_2.includes(e)))return;const o=async function(c,...u){const f=this.transaction(c,r?"readwrite":"readonly");let d=f.store;return i&&(d=d.index(u.shift())),(await Promise.all([d[e](...u),r&&f.done]))[0]};return op.set(t,o),o}g2(n=>({...n,get:(t,e,i)=>pT(t,e)||n.get(t,e,i),has:(t,e)=>!!pT(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(T2(e)){const i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}}function T2(n){const t=n.getComponent();return(t==null?void 0:t.type)==="VERSION"}const kp="@firebase/app",yT="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps=new Ay("@firebase/app"),E2="@firebase/app-compat",x2="@firebase/analytics-compat",S2="@firebase/analytics",A2="@firebase/app-check-compat",w2="@firebase/app-check",C2="@firebase/auth",R2="@firebase/auth-compat",I2="@firebase/database",D2="@firebase/data-connect",M2="@firebase/database-compat",O2="@firebase/functions",N2="@firebase/functions-compat",k2="@firebase/installations",P2="@firebase/installations-compat",V2="@firebase/messaging",L2="@firebase/messaging-compat",z2="@firebase/performance",j2="@firebase/performance-compat",U2="@firebase/remote-config",B2="@firebase/remote-config-compat",F2="@firebase/storage",H2="@firebase/storage-compat",q2="@firebase/firestore",G2="@firebase/ai",Y2="@firebase/firestore-compat",K2="firebase",W2="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pp="[DEFAULT]",X2={[kp]:"fire-core",[E2]:"fire-core-compat",[S2]:"fire-analytics",[x2]:"fire-analytics-compat",[w2]:"fire-app-check",[A2]:"fire-app-check-compat",[C2]:"fire-auth",[R2]:"fire-auth-compat",[I2]:"fire-rtdb",[D2]:"fire-data-connect",[M2]:"fire-rtdb-compat",[O2]:"fire-fn",[N2]:"fire-fn-compat",[k2]:"fire-iid",[P2]:"fire-iid-compat",[V2]:"fire-fcm",[L2]:"fire-fcm-compat",[z2]:"fire-perf",[j2]:"fire-perf-compat",[U2]:"fire-rc",[B2]:"fire-rc-compat",[F2]:"fire-gcs",[H2]:"fire-gcs-compat",[q2]:"fire-fst",[Y2]:"fire-fst-compat",[G2]:"fire-vertex","fire-js":"fire-js",[K2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qf=new Map,Q2=new Map,Vp=new Map;function _T(n,t){try{n.container.addComponent(t)}catch(e){Ps.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function il(n){const t=n.name;if(Vp.has(t))return Ps.debug(`There were multiple attempts to register component ${t}.`),!1;Vp.set(t,n);for(const e of Qf.values())_T(e,n);for(const e of Q2.values())_T(e,n);return!0}function Cy(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function Hn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Dr=new _u("app","Firebase",$2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(t,e,i){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ha("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Dr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gl=W2;function TS(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const i={name:Pp,automaticDataCollectionEnabled:!0,...t},r=i.name;if(typeof r!="string"||!r)throw Dr.create("bad-app-name",{appName:String(r)});if(e||(e=mS()),!e)throw Dr.create("no-options");const o=Qf.get(r);if(o){if(Fa(e,o.options)&&Fa(i,o.config))return o;throw Dr.create("duplicate-app",{appName:r})}const c=new s2(r);for(const f of Vp.values())c.addComponent(f);const u=new J2(e,i,c);return Qf.set(r,u),u}function ES(n=Pp){const t=Qf.get(n);if(!t&&n===Pp&&mS())return TS();if(!t)throw Dr.create("no-app",{appName:n});return t}function Mr(n,t,e){let i=X2[n]??n;e&&(i+=`-${e}`);const r=i.match(/\s|\//),o=t.match(/\s|\//);if(r||o){const c=[`Unable to register library "${i}" with version "${t}":`];r&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&c.push("and"),o&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ps.warn(c.join(" "));return}il(new Ha(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2="firebase-heartbeat-database",tI=1,eu="firebase-heartbeat-store";let lp=null;function xS(){return lp||(lp=y2(Z2,tI,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(eu)}catch(e){console.warn(e)}}}}).catch(n=>{throw Dr.create("idb-open",{originalErrorMessage:n.message})})),lp}async function eI(n){try{const e=(await xS()).transaction(eu),i=await e.objectStore(eu).get(SS(n));return await e.done,i}catch(t){if(t instanceof js)Ps.warn(t.message);else{const e=Dr.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Ps.warn(e.message)}}}async function bT(n,t){try{const i=(await xS()).transaction(eu,"readwrite");await i.objectStore(eu).put(t,SS(n)),await i.done}catch(e){if(e instanceof js)Ps.warn(e.message);else{const i=Dr.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});Ps.warn(i.message)}}}function SS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI=1024,iI=30;class sI{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new aI(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,e;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=vT();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(c=>c.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>iI){const c=oI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ps.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=vT(),{heartbeatsToSend:i,unsentEntries:r}=rI(this._heartbeatsCache.heartbeats),o=Xf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Ps.warn(e),""}}}function vT(){return new Date().toISOString().substring(0,10)}function rI(n,t=nI){const e=[];let i=n.slice();for(const r of n){const o=e.find(c=>c.agent===r.agent);if(o){if(o.dates.push(r.date),TT(e)>t){o.dates.pop();break}}else if(e.push({agent:r.agent,dates:[r.date]}),TT(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}class aI{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return YR()?KR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await eI(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return bT(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return bT(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function TT(n){return Xf(JSON.stringify({version:2,heartbeats:n})).length}function oI(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let i=1;i<n.length;i++)n[i].date<e&&(e=n[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lI(n){il(new Ha("platform-logger",t=>new v2(t),"PRIVATE")),il(new Ha("heartbeat",t=>new sI(t),"PRIVATE")),Mr(kp,yT,n),Mr(kp,yT,"esm2020"),Mr("fire-js","")}lI("");var cI="firebase",uI="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mr(cI,uI,"app");function AS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const hI=AS,wS=new _u("auth","Firebase",AS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $f=new Ay("@firebase/auth");function fI(n,...t){$f.logLevel<=Ut.WARN&&$f.warn(`Auth (${gl}): ${n}`,...t)}function Df(n,...t){$f.logLevel<=Ut.ERROR&&$f.error(`Auth (${gl}): ${n}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(n,...t){throw Iy(n,...t)}function Ei(n,...t){return Iy(n,...t)}function Ry(n,t,e){const i={...hI(),[t]:e};return new _u("auth","Firebase",i).create(t,{appName:n.name})}function ks(n){return Ry(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dI(n,t,e){const i=e;if(!(t instanceof i))throw i.name!==t.constructor.name&&ai(n,"argument-error"),Ry(n,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Iy(n,...t){if(typeof n!="string"){const e=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(e,...i)}return wS.create(n,...t)}function At(n,t,...e){if(!n)throw Iy(t,...e)}function Is(n){const t="INTERNAL ASSERTION FAILED: "+n;throw Df(t),new Error(t)}function Vs(n,t){n||Is(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lp(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function gI(){return ET()==="http:"||ET()==="https:"}function ET(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(gI()||FR()||"connection"in navigator)?navigator.onLine:!0}function pI(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(t,e){this.shortDelay=t,this.longDelay=e,Vs(e>t,"Short delay should be less than long delay!"),this.isMobile=jR()||HR()}get(){return mI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dy(n,t){Vs(n.emulator,"Emulator should always be set here");const{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{static initialize(t,e,i){this.fetchImpl=t,e&&(this.headersImpl=e),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Is("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Is("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Is("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],bI=new vu(3e4,6e4);function Gr(n,t){return n.tenantId&&!t.tenantId?{...t,tenantId:n.tenantId}:t}async function Yr(n,t,e,i,r={}){return RS(n,r,async()=>{let o={},c={};i&&(t==="GET"?c=i:o={body:JSON.stringify(i)});const u=bu({key:n.config.apiKey,...c}).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const d={method:t,headers:f,...o};return BR()||(d.referrerPolicy="no-referrer"),n.emulatorConfig&&dl(n.emulatorConfig.host)&&(d.credentials="include"),CS.fetch()(await IS(n,n.config.apiHost,e,u),d)})}async function RS(n,t,e){n._canInitEmulator=!1;const i={...yI,...t};try{const r=new TI(n),o=await Promise.race([e(),r.promise]);r.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw cf(n,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const u=o.ok?c.errorMessage:c.error.message,[f,d]=u.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw cf(n,"credential-already-in-use",c);if(f==="EMAIL_EXISTS")throw cf(n,"email-already-in-use",c);if(f==="USER_DISABLED")throw cf(n,"user-disabled",c);const p=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Ry(n,p,d);ai(n,p)}}catch(r){if(r instanceof js)throw r;ai(n,"network-request-failed",{message:String(r)})}}async function Tu(n,t,e,i,r={}){const o=await Yr(n,t,e,i,r);return"mfaPendingCredential"in o&&ai(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function IS(n,t,e,i){const r=`${t}${e}?${i}`,o=n,c=o.config.emulator?Dy(n.config,r):`${n.config.apiScheme}://${r}`;return _I.includes(e)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function vI(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class TI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,i)=>{this.timer=setTimeout(()=>i(Ei(this.auth,"network-request-failed")),bI.get())})}}function cf(n,t,e){const i={appName:n.name};e.email&&(i.email=e.email),e.phoneNumber&&(i.phoneNumber=e.phoneNumber);const r=Ei(n,t,i);return r.customData._tokenResponse=e,r}function xT(n){return n!==void 0&&n.enterprise!==void 0}class EI{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return vI(e.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function xI(n,t){return Yr(n,"GET","/v2/recaptchaConfig",Gr(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SI(n,t){return Yr(n,"POST","/v1/accounts:delete",t)}async function Jf(n,t){return Yr(n,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gc(n){if(n)try{const t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function AI(n,t=!1){const e=Fe(n),i=await e.getIdToken(t),r=My(i);At(r&&r.exp&&r.auth_time&&r.iat,e.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,c=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:Gc(cp(r.auth_time)),issuedAtTime:Gc(cp(r.iat)),expirationTime:Gc(cp(r.exp)),signInProvider:c||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function cp(n){return Number(n)*1e3}function My(n){const[t,e,i]=n.split(".");if(t===void 0||e===void 0||i===void 0)return Df("JWT malformed, contained fewer than 3 sections"),null;try{const r=dS(e);return r?JSON.parse(r):(Df("Failed to decode base64 JWT payload"),null)}catch(r){return Df("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function ST(n){const t=My(n);return At(t,"internal-error"),At(typeof t.exp<"u","internal-error"),At(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nu(n,t,e=!1){if(e)return t;try{return await t}catch(i){throw i instanceof js&&wI(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function wI({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gc(this.lastLoginAt),this.creationTime=Gc(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zf(n){var _;const t=n.auth,e=await n.getIdToken(),i=await nu(n,Jf(t,{idToken:e}));At(i==null?void 0:i.users.length,t,"internal-error");const r=i.users[0];n._notifyReloadListener(r);const o=(_=r.providerUserInfo)!=null&&_.length?DS(r.providerUserInfo):[],c=II(n.providerData,o),u=n.isAnonymous,f=!(n.email&&r.passwordHash)&&!(c!=null&&c.length),d=u?f:!1,p={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:c,metadata:new zp(r.createdAt,r.lastLoginAt),isAnonymous:d};Object.assign(n,p)}async function RI(n){const t=Fe(n);await Zf(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function II(n,t){return[...n.filter(i=>!t.some(r=>r.providerId===i.providerId)),...t]}function DS(n){return n.map(({providerId:t,...e})=>({providerId:t,uid:e.rawId||"",displayName:e.displayName||null,email:e.email||null,phoneNumber:e.phoneNumber||null,photoURL:e.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DI(n,t){const e=await RS(n,{},async()=>{const i=bu({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:o}=n.config,c=await IS(n,r,"/v1/token",`key=${o}`),u=await n._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:u,body:i};return n.emulatorConfig&&dl(n.emulatorConfig.host)&&(f.credentials="include"),CS.fetch()(c,f)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function MI(n,t){return Yr(n,"POST","/v2/accounts:revokeToken",Gr(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){At(t.idToken,"internal-error"),At(typeof t.idToken<"u","internal-error"),At(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):ST(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){At(t.length!==0,"internal-error");const e=ST(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(At(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:i,refreshToken:r,expiresIn:o}=await DI(t,e);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(t,e,i){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,e){const{refreshToken:i,accessToken:r,expirationTime:o}=e,c=new Jo;return i&&(At(typeof i=="string","internal-error",{appName:t}),c.refreshToken=i),r&&(At(typeof r=="string","internal-error",{appName:t}),c.accessToken=r),o&&(At(typeof o=="number","internal-error",{appName:t}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Jo,this.toJSON())}_performRefresh(){return Is("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function br(n,t){At(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}class vi{constructor({uid:t,auth:e,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new CI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=e,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new zp(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const e=await nu(this,this.stsTokenManager.getToken(this.auth,t));return At(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return AI(this,t)}reload(){return RI(this)}_assign(t){this!==t&&(At(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>({...e})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new vi({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return e.metadata._copy(this.metadata),e}_onReload(t){At(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),e&&await Zf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Hn(this.auth.app))return Promise.reject(ks(this.auth));const t=await this.getIdToken();return await nu(this,SI(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){const i=e.displayName??void 0,r=e.email??void 0,o=e.phoneNumber??void 0,c=e.photoURL??void 0,u=e.tenantId??void 0,f=e._redirectEventId??void 0,d=e.createdAt??void 0,p=e.lastLoginAt??void 0,{uid:_,emailVerified:b,isAnonymous:x,providerData:w,stsTokenManager:S}=e;At(_&&S,t,"internal-error");const D=Jo.fromJSON(this.name,S);At(typeof _=="string",t,"internal-error"),br(i,t.name),br(r,t.name),At(typeof b=="boolean",t,"internal-error"),At(typeof x=="boolean",t,"internal-error"),br(o,t.name),br(c,t.name),br(u,t.name),br(f,t.name),br(d,t.name),br(p,t.name);const L=new vi({uid:_,auth:t,email:r,emailVerified:b,displayName:i,isAnonymous:x,photoURL:c,phoneNumber:o,tenantId:u,stsTokenManager:D,createdAt:d,lastLoginAt:p});return w&&Array.isArray(w)&&(L.providerData=w.map(F=>({...F}))),f&&(L._redirectEventId=f),L}static async _fromIdTokenResponse(t,e,i=!1){const r=new Jo;r.updateFromServerResponse(e);const o=new vi({uid:e.localId,auth:t,stsTokenManager:r,isAnonymous:i});return await Zf(o),o}static async _fromGetAccountInfoResponse(t,e,i){const r=e.users[0];At(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?DS(r.providerUserInfo):[],c=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),u=new Jo;u.updateFromIdToken(i);const f=new vi({uid:r.localId,auth:t,stsTokenManager:u,isAnonymous:c}),d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new zp(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(f,d),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT=new Map;function Ds(n){Vs(n instanceof Function,"Expected a class definition");let t=AT.get(n);return t?(Vs(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,AT.set(n,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}MS.type="NONE";const wT=MS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mf(n,t,e){return`firebase:${n}:${t}:${e}`}class Zo{constructor(t,e,i){this.persistence=t,this.auth=e,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=Mf(this.userKey,r.apiKey,o),this.fullPersistenceKey=Mf("persistence",r.apiKey,o),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await Jf(this.auth,{idToken:t}).catch(()=>{});return e?vi._fromGetAccountInfoResponse(this.auth,e,t):null}return vi._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,i="authUser"){if(!e.length)return new Zo(Ds(wT),t,i);const r=(await Promise.all(e.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let o=r[0]||Ds(wT);const c=Mf(i,t.config.apiKey,t.name);let u=null;for(const d of e)try{const p=await d._get(c);if(p){let _;if(typeof p=="string"){const b=await Jf(t,{idToken:p}).catch(()=>{});if(!b)break;_=await vi._fromGetAccountInfoResponse(t,b,p)}else _=vi._fromJSON(t,p);d!==o&&(u=_),o=d;break}}catch{}const f=r.filter(d=>d._shouldAllowMigration);return!o._shouldAllowMigration||!f.length?new Zo(o,t,i):(o=f[0],u&&await o._set(c,u.toJSON()),await Promise.all(e.map(async d=>{if(d!==o)try{await d._remove(c)}catch{}})),new Zo(o,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CT(n){const t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(PS(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(OS(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(LS(t))return"Blackberry";if(zS(t))return"Webos";if(NS(t))return"Safari";if((t.includes("chrome/")||kS(t))&&!t.includes("edge/"))return"Chrome";if(VS(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(e);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function OS(n=pn()){return/firefox\//i.test(n)}function NS(n=pn()){const t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function kS(n=pn()){return/crios\//i.test(n)}function PS(n=pn()){return/iemobile/i.test(n)}function VS(n=pn()){return/android/i.test(n)}function LS(n=pn()){return/blackberry/i.test(n)}function zS(n=pn()){return/webos/i.test(n)}function Oy(n=pn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function OI(n=pn()){var t;return Oy(n)&&!!((t=window.navigator)!=null&&t.standalone)}function NI(){return qR()&&document.documentMode===10}function jS(n=pn()){return Oy(n)||VS(n)||zS(n)||LS(n)||/windows phone/i.test(n)||PS(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(n,t=[]){let e;switch(n){case"Browser":e=CT(pn());break;case"Worker":e=`${CT(pn())}-${n}`;break;default:e=n}const i=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${gl}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const i=o=>new Promise((c,u)=>{try{const f=t(o);c(f)}catch(f){u(f)}});i.onAbort=e,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const i of this.queue)await i(t),i.onAbort&&e.push(i.onAbort)}catch(i){e.reverse();for(const r of e)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PI(n,t={}){return Yr(n,"GET","/v2/passwordPolicy",Gr(n,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI=6;class LI{constructor(t){var i;const e=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=e.minPasswordLength??VI,e.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=e.maxPasswordLength),e.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=e.containsLowercaseCharacter),e.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=e.containsUppercaseCharacter),e.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=e.containsNumericCharacter),e.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=e.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=t.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const e={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,e),this.validatePasswordCharacterOptions(t,e),e.isValid&&(e.isValid=e.meetsMinPasswordLength??!0),e.isValid&&(e.isValid=e.meetsMaxPasswordLength??!0),e.isValid&&(e.isValid=e.containsLowercaseLetter??!0),e.isValid&&(e.isValid=e.containsUppercaseLetter??!0),e.isValid&&(e.isValid=e.containsNumericCharacter??!0),e.isValid&&(e.isValid=e.containsNonAlphanumericCharacter??!0),e}validatePasswordLengthOptions(t,e){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(e.meetsMinPasswordLength=t.length>=i),r&&(e.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let i;for(let r=0;r<t.length;r++)i=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(e,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,e,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(t,e,i,r){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new RT(this),this.idTokenSubscription=new RT(this),this.beforeStateQueue=new kI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=Ds(e)),this._initializationPromise=this.queue(async()=>{var i,r,o;if(!this._deleted&&(this.persistenceManager=await Zo.create(this,t),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await Jf(this,{idToken:t}),i=await vi._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(i)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var o;if(Hn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(u,u))}):this.directlySetCurrentUser(null)}const e=await this.assertedPersistence.getCurrentUser();let i=e,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(o=this.redirectUser)==null?void 0:o._redirectEventId,u=i==null?void 0:i._redirectEventId,f=await this.tryRedirectSignIn(t);(!c||c===u)&&(f!=null&&f.user)&&(i=f.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(c){i=e,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return At(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await Zf(t)}catch(e){if((e==null?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=pI()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Hn(this.app))return Promise.reject(ks(this));const e=t?Fe(t):null;return e&&At(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&At(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Hn(this.app)?Promise.reject(ks(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Hn(this.app)?Promise.reject(ks(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ds(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await PI(this),e=new LI(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new _u("auth","Firebase",t())}onAuthStateChanged(t,e,i){return this.registerStateListener(this.authStateSubscription,t,e,i)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,i){return this.registerStateListener(this.idTokenSubscription,t,e,i)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(i.tenantId=this.tenantId),await MI(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,e){const i=await this.getOrInitRedirectPersistenceManager(e);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&Ds(t)||this._popupRedirectResolver;At(e,this,"argument-error"),this.redirectPersistenceManager=await Zo.create(this,[Ds(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,i;return this._isInitialized&&await this.queue(async()=>{}),((e=this._currentUser)==null?void 0:e._redirectEventId)===t?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((e=this.currentUser)==null?void 0:e.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,i,r){if(this._deleted)return()=>{};const o=typeof e=="function"?e:e.next.bind(e);let c=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(At(u,this,"internal-error"),u.then(()=>{c||o(this.currentUser)}),typeof e=="function"){const f=t.addObserver(e,i,r);return()=>{c=!0,f()}}else{const f=t.addObserver(e);return()=>{c=!0,f()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return At(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=US(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const e=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());e&&(t["X-Firebase-Client"]=e);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(Hn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:e.getToken());return t!=null&&t.error&&fI(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Kr(n){return Fe(n)}class RT{constructor(t){this.auth=t,this.observer=null,this.addObserver=JR(e=>this.observer=e)}get next(){return At(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ad={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function jI(n){Ad=n}function BS(n){return Ad.loadJS(n)}function UI(){return Ad.recaptchaEnterpriseScript}function BI(){return Ad.gapiScript}function FI(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class HI{constructor(){this.enterprise=new qI}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class qI{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}const GI="recaptcha-enterprise",FS="NO_RECAPTCHA";class YI{constructor(t){this.type=GI,this.auth=Kr(t)}async verify(t="verify",e=!1){async function i(o){if(!e){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,u)=>{xI(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const d=new EI(f);return o.tenantId==null?o._agentRecaptchaConfig=d:o._tenantRecaptchaConfigs[o.tenantId]=d,c(d.siteKey)}}).catch(f=>{u(f)})})}function r(o,c,u){const f=window.grecaptcha;xT(f)?f.enterprise.ready(()=>{f.enterprise.execute(o,{action:t}).then(d=>{c(d)}).catch(()=>{c(FS)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new HI().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{i(this.auth).then(u=>{if(!e&&xT(window.grecaptcha))r(u,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let f=UI();f.length!==0&&(f+=u),BS(f).then(()=>{r(u,o,c)}).catch(d=>{c(d)})}}).catch(u=>{c(u)})})}}async function IT(n,t,e,i=!1,r=!1){const o=new YI(n);let c;if(r)c=FS;else try{c=await o.verify(e)}catch{c=await o.verify(e,!0)}const u={...t};if(e==="mfaSmsEnrollment"||e==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const f=u.phoneEnrollmentInfo.phoneNumber,d=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:d,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const f=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return i?Object.assign(u,{captchaResp:c}):Object.assign(u,{captchaResponse:c}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function jp(n,t,e,i,r){var o;if((o=n._getRecaptchaConfig())!=null&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await IT(n,t,e,e==="getOobCode");return i(n,c)}else return i(n,t).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${e} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await IT(n,t,e,e==="getOobCode");return i(n,u)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KI(n,t){const e=Cy(n,"auth");if(e.isInitialized()){const r=e.getImmediate(),o=e.getOptions();if(Fa(o,t??{}))return r;ai(r,"already-initialized")}return e.initialize({options:t})}function WI(n,t){const e=(t==null?void 0:t.persistence)||[],i=(Array.isArray(e)?e:[e]).map(Ds);t!=null&&t.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function XI(n,t,e){const i=Kr(n);At(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!1,o=HS(t),{host:c,port:u}=QI(t),f=u===null?"":`:${u}`,d={url:`${o}//${c}${f}/`},p=Object.freeze({host:c,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){At(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),At(Fa(d,i.config.emulator)&&Fa(p,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=d,i.emulatorConfig=p,i.settings.appVerificationDisabledForTesting=!0,dl(c)?(yS(`${o}//${c}${f}`),_S("Auth",!0)):$I()}function HS(n){const t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function QI(n){const t=HS(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};const i=e[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:DT(i.substr(o.length+1))}}else{const[o,c]=i.split(":");return{host:o,port:DT(c)}}}function DT(n){if(!n)return null;const t=Number(n);return isNaN(t)?null:t}function $I(){function n(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return Is("not implemented")}_getIdTokenResponse(t){return Is("not implemented")}_linkToIdToken(t,e){return Is("not implemented")}_getReauthenticationResolver(t){return Is("not implemented")}}async function JI(n,t){return Yr(n,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZI(n,t){return Tu(n,"POST","/v1/accounts:signInWithPassword",Gr(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tD(n,t){return Tu(n,"POST","/v1/accounts:signInWithEmailLink",Gr(n,t))}async function eD(n,t){return Tu(n,"POST","/v1/accounts:signInWithEmailLink",Gr(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu extends Ny{constructor(t,e,i,r=null){super("password",i),this._email=t,this._password=e,this._tenantId=r}static _fromEmailAndPassword(t,e){return new iu(t,e,"password")}static _fromEmailAndCode(t,e,i=null){return new iu(t,e,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;if(e!=null&&e.email&&(e!=null&&e.password)){if(e.signInMethod==="password")return this._fromEmailAndPassword(e.email,e.password);if(e.signInMethod==="emailLink")return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jp(t,e,"signInWithPassword",ZI);case"emailLink":return tD(t,{email:this._email,oobCode:this._password});default:ai(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":const i={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jp(t,i,"signUpPassword",JI);case"emailLink":return eD(t,{idToken:e,email:this._email,oobCode:this._password});default:ai(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tl(n,t){return Tu(n,"POST","/v1/accounts:signInWithIdp",Gr(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD="http://localhost";class qa extends Ny{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new qa(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):ai("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:r,...o}=e;if(!i||!r)return null;const c=new qa(i,r);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(t){const e=this.buildRequest();return tl(t,e)}_linkToIdToken(t,e){const i=this.buildRequest();return i.idToken=e,tl(t,i)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,tl(t,e)}buildRequest(){const t={requestUri:nD,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=bu(e)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iD(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function sD(n){const t=Oc(Nc(n)).link,e=t?Oc(Nc(t)).deep_link_id:null,i=Oc(Nc(n)).deep_link_id;return(i?Oc(Nc(i)).link:null)||i||e||t||n}class ky{constructor(t){const e=Oc(Nc(t)),i=e.apiKey??null,r=e.oobCode??null,o=iD(e.mode??null);At(i&&r&&o,"argument-error"),this.apiKey=i,this.operation=o,this.code=r,this.continueUrl=e.continueUrl??null,this.languageCode=e.lang??null,this.tenantId=e.tenantId??null}static parseLink(t){const e=sD(t);try{return new ky(e)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(){this.providerId=ml.PROVIDER_ID}static credential(t,e){return iu._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const i=ky.parseLink(e);return At(i,"argument-error"),iu._fromEmailAndCode(t,i.code,i.tenantId)}}ml.PROVIDER_ID="password";ml.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ml.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu extends Py{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends Eu{constructor(){super("facebook.com")}static credential(t){return qa._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return vr.credentialFromTaggedObject(t)}static credentialFromError(t){return vr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return vr.credential(t.oauthAccessToken)}catch{return null}}}vr.FACEBOOK_SIGN_IN_METHOD="facebook.com";vr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs extends Eu{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return qa._fromParams({providerId:Rs.PROVIDER_ID,signInMethod:Rs.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return Rs.credentialFromTaggedObject(t)}static credentialFromError(t){return Rs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:i}=t;if(!e&&!i)return null;try{return Rs.credential(e,i)}catch{return null}}}Rs.GOOGLE_SIGN_IN_METHOD="google.com";Rs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr extends Eu{constructor(){super("github.com")}static credential(t){return qa._fromParams({providerId:Tr.PROVIDER_ID,signInMethod:Tr.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Tr.credentialFromTaggedObject(t)}static credentialFromError(t){return Tr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Tr.credential(t.oauthAccessToken)}catch{return null}}}Tr.GITHUB_SIGN_IN_METHOD="github.com";Tr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er extends Eu{constructor(){super("twitter.com")}static credential(t,e){return qa._fromParams({providerId:Er.PROVIDER_ID,signInMethod:Er.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return Er.credentialFromTaggedObject(t)}static credentialFromError(t){return Er.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:i}=t;if(!e||!i)return null;try{return Er.credential(e,i)}catch{return null}}}Er.TWITTER_SIGN_IN_METHOD="twitter.com";Er.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rD(n,t){return Tu(n,"POST","/v1/accounts:signUp",Gr(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,i,r=!1){const o=await vi._fromIdTokenResponse(t,i,r),c=MT(i);return new Ga({user:o,providerId:c,_tokenResponse:i,operationType:e})}static async _forOperation(t,e,i){await t._updateTokensIfNecessary(i,!0);const r=MT(i);return new Ga({user:t,providerId:r,_tokenResponse:i,operationType:e})}}function MT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td extends js{constructor(t,e,i,r){super(e.code,e.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,td.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:e.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,e,i,r){return new td(t,e,i,r)}}function qS(n,t,e,i){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?td._fromErrorAndOperation(n,o,t,i):o})}async function aD(n,t,e=!1){const i=await nu(n,t._linkToIdToken(n.auth,await n.getIdToken()),e);return Ga._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oD(n,t,e=!1){const{auth:i}=n;if(Hn(i.app))return Promise.reject(ks(i));const r="reauthenticate";try{const o=await nu(n,qS(i,r,t,n),e);At(o.idToken,i,"internal-error");const c=My(o.idToken);At(c,i,"internal-error");const{sub:u}=c;return At(n.uid===u,i,"user-mismatch"),Ga._forOperation(n,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&ai(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GS(n,t,e=!1){if(Hn(n.app))return Promise.reject(ks(n));const i="signIn",r=await qS(n,i,t),o=await Ga._fromIdTokenResponse(n,i,r);return e||await n._updateCurrentUser(o.user),o}async function lD(n,t){return GS(Kr(n),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YS(n){const t=Kr(n);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function cD(n,t,e){if(Hn(n.app))return Promise.reject(ks(n));const i=Kr(n),c=await jp(i,{returnSecureToken:!0,email:t,password:e,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",rD).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&YS(n),f}),u=await Ga._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(u.user),u}function uD(n,t,e){return Hn(n.app)?Promise.reject(ks(n)):lD(Fe(n),ml.credential(t,e)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&YS(n),i})}function hD(n,t,e,i){return Fe(n).onIdTokenChanged(t,e,i)}function fD(n,t,e){return Fe(n).beforeAuthStateChanged(t,e)}function dD(n,t,e,i){return Fe(n).onAuthStateChanged(t,e,i)}function gD(n){return Fe(n).signOut()}const ed="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(ed,"1"),this.storage.removeItem(ed),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD=1e3,pD=10;class WS extends KS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jS(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const i=this.storage.getItem(e),r=this.localCache[e];i!==r&&t(e,r,i)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((c,u,f)=>{this.notifyListeners(c,f)});return}const i=t.key;e?this.detachListener():this.stopPolling();const r=()=>{const c=this.storage.getItem(i);!e&&this.localCache[i]===c||this.notifyListeners(i,c)},o=this.storage.getItem(i);NI()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,pD):r()}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:i}),!0)})},mD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}WS.type="LOCAL";const yD=WS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS extends KS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}XS.type="SESSION";const QS=XS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _D(n){return Promise.all(n.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(r=>r.isListeningto(t));if(e)return e;const i=new wd(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:i,eventType:r,data:o}=e.data,c=this.handlersMap[r];if(!(c!=null&&c.size))return;e.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const u=Array.from(c).map(async d=>d(e.origin,o)),f=await _D(u);e.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:f})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vy(n="",t=10){let e="";for(let i=0;i<t;i++)e+=Math.floor(Math.random()*10);return n+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,c;return new Promise((u,f)=>{const d=Vy("",20);r.port1.start();const p=setTimeout(()=>{f(new Error("unsupported_event"))},i);c={messageChannel:r,onMessage(_){const b=_;if(b.data.eventId===d)switch(b.data.status){case"ack":clearTimeout(p),o=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(b.data.response);break;default:clearTimeout(p),clearTimeout(o),f(new Error("invalid_response"));break}}},this.handlers.add(c),r.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:d,data:e},[r.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ji(){return window}function vD(n){Ji().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(){return typeof Ji().WorkerGlobalScope<"u"&&typeof Ji().importScripts=="function"}async function TD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ED(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function xD(){return $S()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS="firebaseLocalStorageDb",SD=1,nd="firebaseLocalStorage",ZS="fbase_key";class xu{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function Cd(n,t){return n.transaction([nd],t?"readwrite":"readonly").objectStore(nd)}function AD(){const n=indexedDB.deleteDatabase(JS);return new xu(n).toPromise()}function Up(){const n=indexedDB.open(JS,SD);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(nd,{keyPath:ZS})}catch(r){e(r)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(nd)?t(i):(i.close(),await AD(),t(await Up()))})})}async function OT(n,t,e){const i=Cd(n,!0).put({[ZS]:t,value:e});return new xu(i).toPromise()}async function wD(n,t){const e=Cd(n,!1).get(t),i=await new xu(e).toPromise();return i===void 0?null:i.value}function NT(n,t){const e=Cd(n,!0).delete(t);return new xu(e).toPromise()}const CD=800,RD=3;class tA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Up(),this.db)}async _withRetries(t){let e=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(e++>RD)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $S()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wd._getInstance(xD()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){var e,i;if(this.activeServiceWorker=await TD(),!this.activeServiceWorker)return;this.sender=new bD(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(e=t[0])!=null&&e.fulfilled&&(i=t[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||ED()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Up();return await OT(t,ed,"1"),await NT(t,ed),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(i=>OT(i,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(i=>wD(i,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>NT(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(r=>{const o=Cd(r,!1).getAll();return new xu(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],i=new Set;if(t.length!==0)for(const{fbase_key:r,value:o}of t)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),e.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),e.push(r));return e}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),CD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}tA.type="LOCAL";const ID=tA;new vu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eA(n,t){return t?Ds(t):(At(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly extends Ny{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return tl(t,this._buildIdpRequest())}_linkToIdToken(t,e){return tl(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return tl(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function DD(n){return GS(n.auth,new Ly(n),n.bypassAuthState)}function MD(n){const{auth:t,user:e}=n;return At(e,t,"internal-error"),oD(e,new Ly(n),n.bypassAuthState)}async function OD(n){const{auth:t,user:e}=n;return At(e,t,"internal-error"),aD(e,new Ly(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(t,e,i,r,o=!1){this.auth=t,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:i,postBody:r,tenantId:o,error:c,type:u}=t;if(c){this.reject(c);return}const f={auth:this.auth,requestUri:e,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(f))}catch(d){this.reject(d)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return DD;case"linkViaPopup":case"linkViaRedirect":return OD;case"reauthViaPopup":case"reauthViaRedirect":return MD;default:ai(this.auth,"internal-error")}}resolve(t){Vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ND=new vu(2e3,1e4);async function kD(n,t,e){if(Hn(n.app))return Promise.reject(Ei(n,"operation-not-supported-in-this-environment"));const i=Kr(n);dI(n,t,Py);const r=eA(i,e);return new Pa(i,"signInViaPopup",t,r).executeNotNull()}class Pa extends nA{constructor(t,e,i,r,o){super(t,e,r,o),this.provider=i,this.authWindow=null,this.pollId=null,Pa.currentPopupAction&&Pa.currentPopupAction.cancel(),Pa.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return At(t,this.auth,"internal-error"),t}async onExecution(){Vs(this.filter.length===1,"Popup operations only handle one event");const t=Vy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Ei(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(Ei(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Pa.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,i;if((i=(e=this.authWindow)==null?void 0:e.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ei(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,ND.get())};t()}}Pa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD="pendingRedirect",Of=new Map;class VD extends nA{constructor(t,e,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,i),this.eventId=null}async execute(){let t=Of.get(this.auth._key());if(!t){try{const i=await LD(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(e){t=()=>Promise.reject(e)}Of.set(this.auth._key(),t)}return this.bypassAuthState||Of.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function LD(n,t){const e=UD(t),i=jD(n);if(!await i._isAvailable())return!1;const r=await i._get(e)==="true";return await i._remove(e),r}function zD(n,t){Of.set(n._key(),t)}function jD(n){return Ds(n._redirectPersistence)}function UD(n){return Mf(PD,n.config.apiKey,n.name)}async function BD(n,t,e=!1){if(Hn(n.app))return Promise.reject(ks(n));const i=Kr(n),r=eA(i,t),c=await new VD(i,r,e).execute();return c&&!e&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,t)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD=600*1e3;class HD{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(e=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!qD(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var i;if(t.error&&!iA(t)){const r=((i=t.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";e.onError(Ei(this.auth,r))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const i=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=FD&&this.cachedEventUids.clear(),this.cachedEventUids.has(kT(t))}saveEventToCache(t){this.cachedEventUids.add(kT(t)),this.lastProcessedEventTime=Date.now()}}function kT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function iA({type:n,error:t}){return n==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function qD(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return iA(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GD(n,t={}){return Yr(n,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,KD=/^https?/;async function WD(n){if(n.config.emulator)return;const{authorizedDomains:t}=await GD(n);for(const e of t)try{if(XD(e))return}catch{}ai(n,"unauthorized-domain")}function XD(n){const t=Lp(),{protocol:e,hostname:i}=new URL(t);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&c.hostname===i}if(!KD.test(e))return!1;if(YD.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QD=new vu(3e4,6e4);function PT(){const n=Ji().___jsl;if(n!=null&&n.H){for(const t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function $D(n){return new Promise((t,e)=>{var r,o,c;function i(){PT(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{PT(),e(Ei(n,"network-request-failed"))},timeout:QD.get()})}if((o=(r=Ji().gapi)==null?void 0:r.iframes)!=null&&o.Iframe)t(gapi.iframes.getContext());else if((c=Ji().gapi)!=null&&c.load)i();else{const u=FI("iframefcb");return Ji()[u]=()=>{gapi.load?i():e(Ei(n,"network-request-failed"))},BS(`${BI()}?onload=${u}`).catch(f=>e(f))}}).catch(t=>{throw Nf=null,t})}let Nf=null;function JD(n){return Nf=Nf||$D(n),Nf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD=new vu(5e3,15e3),tM="__/auth/iframe",eM="emulator/auth/iframe",nM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},iM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sM(n){const t=n.config;At(t.authDomain,n,"auth-domain-config-required");const e=t.emulator?Dy(t,eM):`https://${n.config.authDomain}/${tM}`,i={apiKey:t.apiKey,appName:n.name,v:gl},r=iM.get(n.config.apiHost);r&&(i.eid=r);const o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${e}?${bu(i).slice(1)}`}async function rM(n){const t=await JD(n),e=Ji().gapi;return At(e,n,"internal-error"),t.open({where:document.body,url:sM(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:nM,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const c=Ei(n,"network-request-failed"),u=Ji().setTimeout(()=>{o(c)},ZD.get());function f(){Ji().clearTimeout(u),r(i)}i.ping(f).then(f,()=>{o(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},oM=500,lM=600,cM="_blank",uM="http://localhost";class VT{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function hM(n,t,e,i=oM,r=lM){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const f={...aM,width:i.toString(),height:r.toString(),top:o,left:c},d=pn().toLowerCase();e&&(u=kS(d)?cM:e),OS(d)&&(t=t||uM,f.scrollbars="yes");const p=Object.entries(f).reduce((b,[x,w])=>`${b}${x}=${w},`,"");if(OI(d)&&u!=="_self")return fM(t||"",u),new VT(null);const _=window.open(t||"",u,p);At(_,n,"popup-blocked");try{_.focus()}catch{}return new VT(_)}function fM(n,t){const e=document.createElement("a");e.href=n,e.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dM="__/auth/handler",gM="emulator/auth/handler",mM=encodeURIComponent("fac");async function LT(n,t,e,i,r,o){At(n.config.authDomain,n,"auth-domain-config-required"),At(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:i,v:gl,eventId:r};if(t instanceof Py){t.setDefaultLanguage(n.languageCode),c.providerId=t.providerId||"",$R(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[p,_]of Object.entries({}))c[p]=_}if(t instanceof Eu){const p=t.getScopes().filter(_=>_!=="");p.length>0&&(c.scopes=p.join(","))}n.tenantId&&(c.tid=n.tenantId);const u=c;for(const p of Object.keys(u))u[p]===void 0&&delete u[p];const f=await n._getAppCheckToken(),d=f?`#${mM}=${encodeURIComponent(f)}`:"";return`${pM(n)}?${bu(u).slice(1)}${d}`}function pM({config:n}){return n.emulator?Dy(n,gM):`https://${n.authDomain}/${dM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const up="webStorageSupport";class yM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=QS,this._completeRedirectFn=BD,this._overrideRedirectResult=zD}async _openPopup(t,e,i,r){var c;Vs((c=this.eventManagers[t._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const o=await LT(t,e,i,Lp(),r);return hM(t,o,Vy())}async _openRedirect(t,e,i,r){await this._originValidation(t);const o=await LT(t,e,i,Lp(),r);return vD(o),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:r,promise:o}=this.eventManagers[e];return r?Promise.resolve(r):(Vs(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(t);return this.eventManagers[e]={promise:i},i.catch(()=>{delete this.eventManagers[e]}),i}async initAndGetManager(t){const e=await rM(t),i=new HD(t);return e.register("authEvent",r=>(At(r==null?void 0:r.authEvent,t,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=e,i}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(up,{type:up},r=>{var c;const o=(c=r==null?void 0:r[0])==null?void 0:c[up];o!==void 0&&e(!!o),ai(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=WD(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return jS()||NS()||Oy()}}const _M=yM;var zT="@firebase/auth",jT="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){At(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vM(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function TM(n){il(new Ha("auth",(t,{options:e})=>{const i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),o=t.getProvider("app-check-internal"),{apiKey:c,authDomain:u}=i.options;At(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const f={apiKey:c,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:US(n)},d=new zI(i,r,o,f);return WI(d,e),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,i)=>{t.getProvider("auth-internal").initialize()})),il(new Ha("auth-internal",t=>{const e=Kr(t.getProvider("auth").getImmediate());return(i=>new bM(i))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),Mr(zT,jT,vM(n)),Mr(zT,jT,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EM=300,xM=pS("authIdTokenMaxAge")||EM;let UT=null;const SM=n=>async t=>{const e=t&&await t.getIdTokenResult(),i=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(i&&i>xM)return;const r=e==null?void 0:e.token;UT!==r&&(UT=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function AM(n=ES()){const t=Cy(n,"auth");if(t.isInitialized())return t.getImmediate();const e=KI(n,{popupRedirectResolver:_M,persistence:[ID,yD,QS]}),i=pS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const c=SM(o.toString());fD(e,c,()=>c(e.currentUser)),hD(e,u=>c(u))}}const r=gS("auth");return r&&XI(e,`http://${r}`),e}function wM(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}jI({loadJS(n){return new Promise((t,e)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=t,i.onerror=r=>{const o=Ei("internal-error");o.customData=r,e(o)},i.type="text/javascript",i.charset="UTF-8",wM().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});TM("Browser");var BT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Or,sA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(M,C){function O(){}O.prototype=C.prototype,M.F=C.prototype,M.prototype=new O,M.prototype.constructor=M,M.D=function(P,k,z){for(var N=Array(arguments.length-2),kt=2;kt<arguments.length;kt++)N[kt-2]=arguments[kt];return C.prototype[k].apply(P,N)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(i,e),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(M,C,O){O||(O=0);const P=Array(16);if(typeof C=="string")for(var k=0;k<16;++k)P[k]=C.charCodeAt(O++)|C.charCodeAt(O++)<<8|C.charCodeAt(O++)<<16|C.charCodeAt(O++)<<24;else for(k=0;k<16;++k)P[k]=C[O++]|C[O++]<<8|C[O++]<<16|C[O++]<<24;C=M.g[0],O=M.g[1],k=M.g[2];let z=M.g[3],N;N=C+(z^O&(k^z))+P[0]+3614090360&4294967295,C=O+(N<<7&4294967295|N>>>25),N=z+(k^C&(O^k))+P[1]+3905402710&4294967295,z=C+(N<<12&4294967295|N>>>20),N=k+(O^z&(C^O))+P[2]+606105819&4294967295,k=z+(N<<17&4294967295|N>>>15),N=O+(C^k&(z^C))+P[3]+3250441966&4294967295,O=k+(N<<22&4294967295|N>>>10),N=C+(z^O&(k^z))+P[4]+4118548399&4294967295,C=O+(N<<7&4294967295|N>>>25),N=z+(k^C&(O^k))+P[5]+1200080426&4294967295,z=C+(N<<12&4294967295|N>>>20),N=k+(O^z&(C^O))+P[6]+2821735955&4294967295,k=z+(N<<17&4294967295|N>>>15),N=O+(C^k&(z^C))+P[7]+4249261313&4294967295,O=k+(N<<22&4294967295|N>>>10),N=C+(z^O&(k^z))+P[8]+1770035416&4294967295,C=O+(N<<7&4294967295|N>>>25),N=z+(k^C&(O^k))+P[9]+2336552879&4294967295,z=C+(N<<12&4294967295|N>>>20),N=k+(O^z&(C^O))+P[10]+4294925233&4294967295,k=z+(N<<17&4294967295|N>>>15),N=O+(C^k&(z^C))+P[11]+2304563134&4294967295,O=k+(N<<22&4294967295|N>>>10),N=C+(z^O&(k^z))+P[12]+1804603682&4294967295,C=O+(N<<7&4294967295|N>>>25),N=z+(k^C&(O^k))+P[13]+4254626195&4294967295,z=C+(N<<12&4294967295|N>>>20),N=k+(O^z&(C^O))+P[14]+2792965006&4294967295,k=z+(N<<17&4294967295|N>>>15),N=O+(C^k&(z^C))+P[15]+1236535329&4294967295,O=k+(N<<22&4294967295|N>>>10),N=C+(k^z&(O^k))+P[1]+4129170786&4294967295,C=O+(N<<5&4294967295|N>>>27),N=z+(O^k&(C^O))+P[6]+3225465664&4294967295,z=C+(N<<9&4294967295|N>>>23),N=k+(C^O&(z^C))+P[11]+643717713&4294967295,k=z+(N<<14&4294967295|N>>>18),N=O+(z^C&(k^z))+P[0]+3921069994&4294967295,O=k+(N<<20&4294967295|N>>>12),N=C+(k^z&(O^k))+P[5]+3593408605&4294967295,C=O+(N<<5&4294967295|N>>>27),N=z+(O^k&(C^O))+P[10]+38016083&4294967295,z=C+(N<<9&4294967295|N>>>23),N=k+(C^O&(z^C))+P[15]+3634488961&4294967295,k=z+(N<<14&4294967295|N>>>18),N=O+(z^C&(k^z))+P[4]+3889429448&4294967295,O=k+(N<<20&4294967295|N>>>12),N=C+(k^z&(O^k))+P[9]+568446438&4294967295,C=O+(N<<5&4294967295|N>>>27),N=z+(O^k&(C^O))+P[14]+3275163606&4294967295,z=C+(N<<9&4294967295|N>>>23),N=k+(C^O&(z^C))+P[3]+4107603335&4294967295,k=z+(N<<14&4294967295|N>>>18),N=O+(z^C&(k^z))+P[8]+1163531501&4294967295,O=k+(N<<20&4294967295|N>>>12),N=C+(k^z&(O^k))+P[13]+2850285829&4294967295,C=O+(N<<5&4294967295|N>>>27),N=z+(O^k&(C^O))+P[2]+4243563512&4294967295,z=C+(N<<9&4294967295|N>>>23),N=k+(C^O&(z^C))+P[7]+1735328473&4294967295,k=z+(N<<14&4294967295|N>>>18),N=O+(z^C&(k^z))+P[12]+2368359562&4294967295,O=k+(N<<20&4294967295|N>>>12),N=C+(O^k^z)+P[5]+4294588738&4294967295,C=O+(N<<4&4294967295|N>>>28),N=z+(C^O^k)+P[8]+2272392833&4294967295,z=C+(N<<11&4294967295|N>>>21),N=k+(z^C^O)+P[11]+1839030562&4294967295,k=z+(N<<16&4294967295|N>>>16),N=O+(k^z^C)+P[14]+4259657740&4294967295,O=k+(N<<23&4294967295|N>>>9),N=C+(O^k^z)+P[1]+2763975236&4294967295,C=O+(N<<4&4294967295|N>>>28),N=z+(C^O^k)+P[4]+1272893353&4294967295,z=C+(N<<11&4294967295|N>>>21),N=k+(z^C^O)+P[7]+4139469664&4294967295,k=z+(N<<16&4294967295|N>>>16),N=O+(k^z^C)+P[10]+3200236656&4294967295,O=k+(N<<23&4294967295|N>>>9),N=C+(O^k^z)+P[13]+681279174&4294967295,C=O+(N<<4&4294967295|N>>>28),N=z+(C^O^k)+P[0]+3936430074&4294967295,z=C+(N<<11&4294967295|N>>>21),N=k+(z^C^O)+P[3]+3572445317&4294967295,k=z+(N<<16&4294967295|N>>>16),N=O+(k^z^C)+P[6]+76029189&4294967295,O=k+(N<<23&4294967295|N>>>9),N=C+(O^k^z)+P[9]+3654602809&4294967295,C=O+(N<<4&4294967295|N>>>28),N=z+(C^O^k)+P[12]+3873151461&4294967295,z=C+(N<<11&4294967295|N>>>21),N=k+(z^C^O)+P[15]+530742520&4294967295,k=z+(N<<16&4294967295|N>>>16),N=O+(k^z^C)+P[2]+3299628645&4294967295,O=k+(N<<23&4294967295|N>>>9),N=C+(k^(O|~z))+P[0]+4096336452&4294967295,C=O+(N<<6&4294967295|N>>>26),N=z+(O^(C|~k))+P[7]+1126891415&4294967295,z=C+(N<<10&4294967295|N>>>22),N=k+(C^(z|~O))+P[14]+2878612391&4294967295,k=z+(N<<15&4294967295|N>>>17),N=O+(z^(k|~C))+P[5]+4237533241&4294967295,O=k+(N<<21&4294967295|N>>>11),N=C+(k^(O|~z))+P[12]+1700485571&4294967295,C=O+(N<<6&4294967295|N>>>26),N=z+(O^(C|~k))+P[3]+2399980690&4294967295,z=C+(N<<10&4294967295|N>>>22),N=k+(C^(z|~O))+P[10]+4293915773&4294967295,k=z+(N<<15&4294967295|N>>>17),N=O+(z^(k|~C))+P[1]+2240044497&4294967295,O=k+(N<<21&4294967295|N>>>11),N=C+(k^(O|~z))+P[8]+1873313359&4294967295,C=O+(N<<6&4294967295|N>>>26),N=z+(O^(C|~k))+P[15]+4264355552&4294967295,z=C+(N<<10&4294967295|N>>>22),N=k+(C^(z|~O))+P[6]+2734768916&4294967295,k=z+(N<<15&4294967295|N>>>17),N=O+(z^(k|~C))+P[13]+1309151649&4294967295,O=k+(N<<21&4294967295|N>>>11),N=C+(k^(O|~z))+P[4]+4149444226&4294967295,C=O+(N<<6&4294967295|N>>>26),N=z+(O^(C|~k))+P[11]+3174756917&4294967295,z=C+(N<<10&4294967295|N>>>22),N=k+(C^(z|~O))+P[2]+718787259&4294967295,k=z+(N<<15&4294967295|N>>>17),N=O+(z^(k|~C))+P[9]+3951481745&4294967295,M.g[0]=M.g[0]+C&4294967295,M.g[1]=M.g[1]+(k+(N<<21&4294967295|N>>>11))&4294967295,M.g[2]=M.g[2]+k&4294967295,M.g[3]=M.g[3]+z&4294967295}i.prototype.v=function(M,C){C===void 0&&(C=M.length);const O=C-this.blockSize,P=this.C;let k=this.h,z=0;for(;z<C;){if(k==0)for(;z<=O;)r(this,M,z),z+=this.blockSize;if(typeof M=="string"){for(;z<C;)if(P[k++]=M.charCodeAt(z++),k==this.blockSize){r(this,P),k=0;break}}else for(;z<C;)if(P[k++]=M[z++],k==this.blockSize){r(this,P),k=0;break}}this.h=k,this.o+=C},i.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var C=1;C<M.length-8;++C)M[C]=0;C=this.o*8;for(var O=M.length-8;O<M.length;++O)M[O]=C&255,C/=256;for(this.v(M),M=Array(16),C=0,O=0;O<4;++O)for(let P=0;P<32;P+=8)M[C++]=this.g[O]>>>P&255;return M};function o(M,C){var O=u;return Object.prototype.hasOwnProperty.call(O,M)?O[M]:O[M]=C(M)}function c(M,C){this.h=C;const O=[];let P=!0;for(let k=M.length-1;k>=0;k--){const z=M[k]|0;P&&z==C||(O[k]=z,P=!1)}this.g=O}var u={};function f(M){return-128<=M&&M<128?o(M,function(C){return new c([C|0],C<0?-1:0)}):new c([M|0],M<0?-1:0)}function d(M){if(isNaN(M)||!isFinite(M))return _;if(M<0)return D(d(-M));const C=[];let O=1;for(let P=0;M>=O;P++)C[P]=M/O|0,O*=4294967296;return new c(C,0)}function p(M,C){if(M.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(M.charAt(0)=="-")return D(p(M.substring(1),C));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');const O=d(Math.pow(C,8));let P=_;for(let z=0;z<M.length;z+=8){var k=Math.min(8,M.length-z);const N=parseInt(M.substring(z,z+k),C);k<8?(k=d(Math.pow(C,k)),P=P.j(k).add(d(N))):(P=P.j(O),P=P.add(d(N)))}return P}var _=f(0),b=f(1),x=f(16777216);n=c.prototype,n.m=function(){if(S(this))return-D(this).m();let M=0,C=1;for(let O=0;O<this.g.length;O++){const P=this.i(O);M+=(P>=0?P:4294967296+P)*C,C*=4294967296}return M},n.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(w(this))return"0";if(S(this))return"-"+D(this).toString(M);const C=d(Math.pow(M,6));var O=this;let P="";for(;;){const k=J(O,C).g;O=L(O,k.j(C));let z=((O.g.length>0?O.g[0]:O.h)>>>0).toString(M);if(O=k,w(O))return z+P;for(;z.length<6;)z="0"+z;P=z+P}},n.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function w(M){if(M.h!=0)return!1;for(let C=0;C<M.g.length;C++)if(M.g[C]!=0)return!1;return!0}function S(M){return M.h==-1}n.l=function(M){return M=L(this,M),S(M)?-1:w(M)?0:1};function D(M){const C=M.g.length,O=[];for(let P=0;P<C;P++)O[P]=~M.g[P];return new c(O,~M.h).add(b)}n.abs=function(){return S(this)?D(this):this},n.add=function(M){const C=Math.max(this.g.length,M.g.length),O=[];let P=0;for(let k=0;k<=C;k++){let z=P+(this.i(k)&65535)+(M.i(k)&65535),N=(z>>>16)+(this.i(k)>>>16)+(M.i(k)>>>16);P=N>>>16,z&=65535,N&=65535,O[k]=N<<16|z}return new c(O,O[O.length-1]&-2147483648?-1:0)};function L(M,C){return M.add(D(C))}n.j=function(M){if(w(this)||w(M))return _;if(S(this))return S(M)?D(this).j(D(M)):D(D(this).j(M));if(S(M))return D(this.j(D(M)));if(this.l(x)<0&&M.l(x)<0)return d(this.m()*M.m());const C=this.g.length+M.g.length,O=[];for(var P=0;P<2*C;P++)O[P]=0;for(P=0;P<this.g.length;P++)for(let k=0;k<M.g.length;k++){const z=this.i(P)>>>16,N=this.i(P)&65535,kt=M.i(k)>>>16,Tt=M.i(k)&65535;O[2*P+2*k]+=N*Tt,F(O,2*P+2*k),O[2*P+2*k+1]+=z*Tt,F(O,2*P+2*k+1),O[2*P+2*k+1]+=N*kt,F(O,2*P+2*k+1),O[2*P+2*k+2]+=z*kt,F(O,2*P+2*k+2)}for(M=0;M<C;M++)O[M]=O[2*M+1]<<16|O[2*M];for(M=C;M<2*C;M++)O[M]=0;return new c(O,0)};function F(M,C){for(;(M[C]&65535)!=M[C];)M[C+1]+=M[C]>>>16,M[C]&=65535,C++}function W(M,C){this.g=M,this.h=C}function J(M,C){if(w(C))throw Error("division by zero");if(w(M))return new W(_,_);if(S(M))return C=J(D(M),C),new W(D(C.g),D(C.h));if(S(C))return C=J(M,D(C)),new W(D(C.g),C.h);if(M.g.length>30){if(S(M)||S(C))throw Error("slowDivide_ only works with positive integers.");for(var O=b,P=C;P.l(M)<=0;)O=$(O),P=$(P);var k=nt(O,1),z=nt(P,1);for(P=nt(P,2),O=nt(O,2);!w(P);){var N=z.add(P);N.l(M)<=0&&(k=k.add(O),z=N),P=nt(P,1),O=nt(O,1)}return C=L(M,k.j(C)),new W(k,C)}for(k=_;M.l(C)>=0;){for(O=Math.max(1,Math.floor(M.m()/C.m())),P=Math.ceil(Math.log(O)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),z=d(O),N=z.j(C);S(N)||N.l(M)>0;)O-=P,z=d(O),N=z.j(C);w(z)&&(z=b),k=k.add(z),M=L(M,N)}return new W(k,M)}n.B=function(M){return J(this,M).h},n.and=function(M){const C=Math.max(this.g.length,M.g.length),O=[];for(let P=0;P<C;P++)O[P]=this.i(P)&M.i(P);return new c(O,this.h&M.h)},n.or=function(M){const C=Math.max(this.g.length,M.g.length),O=[];for(let P=0;P<C;P++)O[P]=this.i(P)|M.i(P);return new c(O,this.h|M.h)},n.xor=function(M){const C=Math.max(this.g.length,M.g.length),O=[];for(let P=0;P<C;P++)O[P]=this.i(P)^M.i(P);return new c(O,this.h^M.h)};function $(M){const C=M.g.length+1,O=[];for(let P=0;P<C;P++)O[P]=M.i(P)<<1|M.i(P-1)>>>31;return new c(O,M.h)}function nt(M,C){const O=C>>5;C%=32;const P=M.g.length-O,k=[];for(let z=0;z<P;z++)k[z]=C>0?M.i(z+O)>>>C|M.i(z+O+1)<<32-C:M.i(z+O);return new c(k,M.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,sA=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=d,c.fromString=p,Or=c}).apply(typeof BT<"u"?BT:typeof self<"u"?self:typeof window<"u"?window:{});var uf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rA,kc,aA,kf,Bp,oA,lA,cA;(function(){var n,t=Object.defineProperty;function e(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof uf=="object"&&uf];for(var v=0;v<g.length;++v){var E=g[v];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=e(this);function r(g,v){if(v)t:{var E=i;g=g.split(".");for(var R=0;R<g.length-1;R++){var H=g[R];if(!(H in E))break t;E=E[H]}g=g[g.length-1],R=E[g],v=v(R),v!=R&&v!=null&&t(E,g,{configurable:!0,writable:!0,value:v})}}r("Symbol.dispose",function(g){return g||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(g){return g||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(g){return g||function(v){var E=[],R;for(R in v)Object.prototype.hasOwnProperty.call(v,R)&&E.push([R,v[R]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function u(g){var v=typeof g;return v=="object"&&g!=null||v=="function"}function f(g,v,E){return g.call.apply(g.bind,arguments)}function d(g,v,E){return d=f,d.apply(null,arguments)}function p(g,v){var E=Array.prototype.slice.call(arguments,1);return function(){var R=E.slice();return R.push.apply(R,arguments),g.apply(this,R)}}function _(g,v){function E(){}E.prototype=v.prototype,g.Z=v.prototype,g.prototype=new E,g.prototype.constructor=g,g.Ob=function(R,H,X){for(var ot=Array(arguments.length-2),Mt=2;Mt<arguments.length;Mt++)ot[Mt-2]=arguments[Mt];return v.prototype[H].apply(R,ot)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?g=>g&&AsyncContext.Snapshot.wrap(g):g=>g;function x(g){const v=g.length;if(v>0){const E=Array(v);for(let R=0;R<v;R++)E[R]=g[R];return E}return[]}function w(g,v){for(let R=1;R<arguments.length;R++){const H=arguments[R];var E=typeof H;if(E=E!="object"?E:H?Array.isArray(H)?"array":E:"null",E=="array"||E=="object"&&typeof H.length=="number"){E=g.length||0;const X=H.length||0;g.length=E+X;for(let ot=0;ot<X;ot++)g[E+ot]=H[ot]}else g.push(H)}}class S{constructor(v,E){this.i=v,this.j=E,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function D(g){c.setTimeout(()=>{throw g},0)}function L(){var g=M;let v=null;return g.g&&(v=g.g,g.g=g.g.next,g.g||(g.h=null),v.next=null),v}class F{constructor(){this.h=this.g=null}add(v,E){const R=W.get();R.set(v,E),this.h?this.h.next=R:this.g=R,this.h=R}}var W=new S(()=>new J,g=>g.reset());class J{constructor(){this.next=this.g=this.h=null}set(v,E){this.h=v,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let $,nt=!1,M=new F,C=()=>{const g=Promise.resolve(void 0);$=()=>{g.then(O)}};function O(){for(var g;g=L();){try{g.h.call(g.g)}catch(E){D(E)}var v=W;v.j(g),v.h<100&&(v.h++,g.next=v.g,v.g=g)}nt=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(g,v){this.type=g,this.g=this.target=v,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var g=!1,v=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const E=()=>{};c.addEventListener("test",E,v),c.removeEventListener("test",E,v)}catch{}return g})();function N(g){return/^[\s\xa0]*$/.test(g)}function kt(g,v){k.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g&&this.init(g,v)}_(kt,k),kt.prototype.init=function(g,v){const E=this.type=g.type,R=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;this.target=g.target||g.srcElement,this.g=v,v=g.relatedTarget,v||(E=="mouseover"?v=g.fromElement:E=="mouseout"&&(v=g.toElement)),this.relatedTarget=v,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=g.pointerType,this.state=g.state,this.i=g,g.defaultPrevented&&kt.Z.h.call(this)},kt.prototype.h=function(){kt.Z.h.call(this);const g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var Tt="closure_listenable_"+(Math.random()*1e6|0),Y=0;function at(g,v,E,R,H){this.listener=g,this.proxy=null,this.src=v,this.type=E,this.capture=!!R,this.ha=H,this.key=++Y,this.da=this.fa=!1}function gt(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function ht(g,v,E){for(const R in g)v.call(E,g[R],R,g)}function xt(g,v){for(const E in g)v.call(void 0,g[E],E,g)}function j(g){const v={};for(const E in g)v[E]=g[E];return v}const tt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function lt(g,v){let E,R;for(let H=1;H<arguments.length;H++){R=arguments[H];for(E in R)g[E]=R[E];for(let X=0;X<tt.length;X++)E=tt[X],Object.prototype.hasOwnProperty.call(R,E)&&(g[E]=R[E])}}function ut(g){this.src=g,this.g={},this.h=0}ut.prototype.add=function(g,v,E,R,H){const X=g.toString();g=this.g[X],g||(g=this.g[X]=[],this.h++);const ot=St(g,v,R,H);return ot>-1?(v=g[ot],E||(v.fa=!1)):(v=new at(v,this.src,X,!!R,H),v.fa=E,g.push(v)),v};function vt(g,v){const E=v.type;if(E in g.g){var R=g.g[E],H=Array.prototype.indexOf.call(R,v,void 0),X;(X=H>=0)&&Array.prototype.splice.call(R,H,1),X&&(gt(v),g.g[E].length==0&&(delete g.g[E],g.h--))}}function St(g,v,E,R){for(let H=0;H<g.length;++H){const X=g[H];if(!X.da&&X.listener==v&&X.capture==!!E&&X.ha==R)return H}return-1}var Gt="closure_lm_"+(Math.random()*1e6|0),He={};function ge(g,v,E,R,H){if(Array.isArray(v)){for(let X=0;X<v.length;X++)ge(g,v[X],E,R,H);return null}return E=El(E),g&&g[Tt]?g.J(v,E,u(R)?!!R.capture:!1,H):$r(g,v,E,!1,R,H)}function $r(g,v,E,R,H,X){if(!v)throw Error("Invalid event type");const ot=u(H)?!!H.capture:!!H;let Mt=Jr(g);if(Mt||(g[Gt]=Mt=new ut(g)),E=Mt.add(v,E,R,ot,X),E.proxy)return E;if(R=eo(),E.proxy=R,R.src=g,R.listener=E,g.addEventListener)z||(H=ot),H===void 0&&(H=!1),g.addEventListener(v.toString(),R,H);else if(g.attachEvent)g.attachEvent(Ci(v.toString()),R);else if(g.addListener&&g.removeListener)g.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return E}function eo(){function g(E){return v.call(g.src,g.listener,E)}const v=vl;return g}function no(g,v,E,R,H){if(Array.isArray(v))for(var X=0;X<v.length;X++)no(g,v[X],E,R,H);else R=u(R)?!!R.capture:!!R,E=El(E),g&&g[Tt]?(g=g.i,X=String(v).toString(),X in g.g&&(v=g.g[X],E=St(v,E,R,H),E>-1&&(gt(v[E]),Array.prototype.splice.call(v,E,1),v.length==0&&(delete g.g[X],g.h--)))):g&&(g=Jr(g))&&(v=g.g[v.toString()],g=-1,v&&(g=St(v,E,R,H)),(E=g>-1?v[g]:null)&&io(E))}function io(g){if(typeof g!="number"&&g&&!g.da){var v=g.src;if(v&&v[Tt])vt(v.i,g);else{var E=g.type,R=g.proxy;v.removeEventListener?v.removeEventListener(E,R,g.capture):v.detachEvent?v.detachEvent(Ci(E),R):v.addListener&&v.removeListener&&v.removeListener(R),(E=Jr(v))?(vt(E,g),E.h==0&&(E.src=null,v[Gt]=null)):gt(g)}}}function Ci(g){return g in He?He[g]:He[g]="on"+g}function vl(g,v){if(g.da)g=!0;else{v=new kt(v,this);const E=g.listener,R=g.ha||g.src;g.fa&&io(g),g=E.call(R,v)}return g}function Jr(g){return g=g[Gt],g instanceof ut?g:null}var Tl="__closure_events_fn_"+(Math.random()*1e9>>>0);function El(g){return typeof g=="function"?g:(g[Tl]||(g[Tl]=function(v){return g.handleEvent(v)}),g[Tl])}function Ie(){P.call(this),this.i=new ut(this),this.M=this,this.G=null}_(Ie,P),Ie.prototype[Tt]=!0,Ie.prototype.removeEventListener=function(g,v,E,R){no(this,g,v,E,R)};function qe(g,v){var E,R=g.G;if(R)for(E=[];R;R=R.G)E.push(R);if(g=g.M,R=v.type||v,typeof v=="string")v=new k(v,g);else if(v instanceof k)v.target=v.target||g;else{var H=v;v=new k(R,g),lt(v,H)}H=!0;let X,ot;if(E)for(ot=E.length-1;ot>=0;ot--)X=v.g=E[ot],H=Us(X,R,!0,v)&&H;if(X=v.g=g,H=Us(X,R,!0,v)&&H,H=Us(X,R,!1,v)&&H,E)for(ot=0;ot<E.length;ot++)X=v.g=E[ot],H=Us(X,R,!1,v)&&H}Ie.prototype.N=function(){if(Ie.Z.N.call(this),this.i){var g=this.i;for(const v in g.g){const E=g.g[v];for(let R=0;R<E.length;R++)gt(E[R]);delete g.g[v],g.h--}}this.G=null},Ie.prototype.J=function(g,v,E,R){return this.i.add(String(g),v,!1,E,R)},Ie.prototype.K=function(g,v,E,R){return this.i.add(String(g),v,!0,E,R)};function Us(g,v,E,R){if(v=g.i.g[String(v)],!v)return!0;v=v.concat();let H=!0;for(let X=0;X<v.length;++X){const ot=v[X];if(ot&&!ot.da&&ot.capture==E){const Mt=ot.listener,Se=ot.ha||ot.src;ot.fa&&vt(g.i,ot),H=Mt.call(Se,R)!==!1&&H}}return H&&!R.defaultPrevented}function tg(g,v){if(typeof g!="function")if(g&&typeof g.handleEvent=="function")g=d(g.handleEvent,g);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:c.setTimeout(g,v||0)}function Nu(g){g.g=tg(()=>{g.g=null,g.i&&(g.i=!1,Nu(g))},g.l);const v=g.h;g.h=null,g.m.apply(null,v)}class _n extends P{constructor(v,E){super(),this.m=v,this.l=E,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Nu(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zr(g){P.call(this),this.h=g,this.g={}}_(Zr,P);var xl=[];function Sl(g){ht(g.g,function(v,E){this.g.hasOwnProperty(E)&&io(v)},g),g.g={}}Zr.prototype.N=function(){Zr.Z.N.call(this),Sl(this)},Zr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bs=c.JSON.stringify,eg=c.JSON.parse,ku=class{stringify(g){return c.JSON.stringify(g,void 0)}parse(g){return c.JSON.parse(g,void 0)}};function Pu(){}function Vu(){}var oi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ze(){k.call(this,"d")}_(Ze,k);function Gn(){k.call(this,"c")}_(Gn,k);var xe={},Lu=null;function so(){return Lu=Lu||new Ie}xe.Ia="serverreachability";function zu(g){k.call(this,xe.Ia,g)}_(zu,k);function Ri(g){const v=so();qe(v,new zu(v))}xe.STAT_EVENT="statevent";function ta(g,v){k.call(this,xe.STAT_EVENT,g),this.stat=v}_(ta,k);function De(g){const v=so();qe(v,new ta(v,g))}xe.Ja="timingevent";function Ii(g,v){k.call(this,xe.Ja,g),this.size=v}_(Ii,k);function Di(g,v){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){g()},v)}function li(){this.g=!0}li.prototype.ua=function(){this.g=!1};function ng(g,v,E,R,H,X){g.info(function(){if(g.g)if(X){var ot="",Mt=X.split("&");for(let Qt=0;Qt<Mt.length;Qt++){var Se=Mt[Qt].split("=");if(Se.length>1){const me=Se[0];Se=Se[1];const Xn=me.split("_");ot=Xn.length>=2&&Xn[1]=="type"?ot+(me+"="+Se+"&"):ot+(me+"=redacted&")}}}else ot=null;else ot=X;return"XMLHTTP REQ ("+R+") [attempt "+H+"]: "+v+`
`+E+`
`+ot})}function ju(g,v,E,R,H,X,ot){g.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+H+"]: "+v+`
`+E+`
`+X+" "+ot})}function Mi(g,v,E,R){g.info(function(){return"XMLHTTP TEXT ("+v+"): "+ig(g,E)+(R?" "+R:"")})}function ea(g,v){g.info(function(){return"TIMEOUT: "+v})}li.prototype.info=function(){};function ig(g,v){if(!g.g)return v;if(!v)return null;try{const X=JSON.parse(v);if(X){for(g=0;g<X.length;g++)if(Array.isArray(X[g])){var E=X[g];if(!(E.length<2)){var R=E[1];if(Array.isArray(R)&&!(R.length<1)){var H=R[0];if(H!="noop"&&H!="stop"&&H!="close")for(let ot=1;ot<R.length;ot++)R[ot]=""}}}}return Bs(X)}catch{return v}}var na={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Al={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},wl;function ia(){}_(ia,Pu),ia.prototype.g=function(){return new XMLHttpRequest},wl=new ia;function rs(g){return encodeURIComponent(String(g))}function Uu(g){var v=1;g=g.split(":");const E=[];for(;v>0&&g.length;)E.push(g.shift()),v--;return g.length&&E.push(g.join(":")),E}function ci(g,v,E,R){this.j=g,this.i=v,this.l=E,this.S=R||1,this.V=new Zr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ui}function ui(){this.i=null,this.g="",this.h=!1}var Me={},We={};function Oi(g,v,E){g.M=1,g.A=sa(Ne(v)),g.u=E,g.R=!0,ro(g,null)}function ro(g,v){g.F=Date.now(),Ni(g),g.B=Ne(g.A);var E=g.B,R=g.S;Array.isArray(R)||(R=[String(R)]),co(E.i,"t",R),g.C=0,E=g.j.L,g.h=new ui,g.g=eh(g.j,E?v:null,!g.u),g.P>0&&(g.O=new _n(d(g.Y,g,g.g),g.P)),v=g.V,E=g.g,R=g.ba;var H="readystatechange";Array.isArray(H)||(H&&(xl[0]=H.toString()),H=xl);for(let X=0;X<H.length;X++){const ot=ge(E,H[X],R||v.handleEvent,!1,v.h||v);if(!ot)break;v.g[ot.key]=ot}v=g.J?j(g.J):{},g.u?(g.v||(g.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.B,g.v,g.u,v)):(g.v="GET",g.g.ea(g.B,g.v,null,v)),Ri(),ng(g.i,g.v,g.B,g.l,g.S,g.u)}ci.prototype.ba=function(g){g=g.target;const v=this.O;v&&di(g)==3?v.j():this.Y(g)},ci.prototype.Y=function(g){try{if(g==this.g)t:{const Mt=di(this.g),Se=this.g.ya(),Qt=this.g.ca();if(!(Mt<3)&&(Mt!=3||this.g&&(this.h.h||this.g.la()||tn(this.g)))){this.K||Mt!=4||Se==7||(Se==8||Qt<=0?Ri(3):Ri(2)),ki(this);var v=this.g.ca();this.X=v;var E=sg(this);if(this.o=v==200,ju(this.i,this.v,this.B,this.l,this.S,Mt,v),this.o){if(this.U&&!this.L){e:{if(this.g){var R,H=this.g;if((R=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(R)){var X=R;break e}}X=null}if(g=X)Mi(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Pi(this,g);else{this.o=!1,this.m=3,De(12),Nn(this),Yn(this);break t}}if(this.R){g=!0;let me;for(;!this.K&&this.C<E.length;)if(me=Fu(this,E),me==We){Mt==4&&(this.m=4,De(14),g=!1),Mi(this.i,this.l,null,"[Incomplete Response]");break}else if(me==Me){this.m=4,De(15),Mi(this.i,this.l,E,"[Invalid Chunk]"),g=!1;break}else Mi(this.i,this.l,me,null),Pi(this,me);if(Bu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Mt!=4||E.length!=0||this.h.h||(this.m=1,De(16),g=!1),this.o=this.o&&g,!g)Mi(this.i,this.l,E,"[Invalid Chunked Response]"),Nn(this),Yn(this);else if(E.length>0&&!this.W){this.W=!0;var ot=this.j;ot.g==this&&ot.aa&&!ot.P&&(ot.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),Bl(ot),ot.P=!0,De(11))}}else Mi(this.i,this.l,E,null),Pi(this,E);Mt==4&&Nn(this),this.o&&!this.K&&(Mt==4?$u(this.j,this):(this.o=!1,Ni(this)))}else os(this.g),v==400&&E.indexOf("Unknown SID")>0?(this.m=3,De(12)):(this.m=0,De(13)),Nn(this),Yn(this)}}}catch{}finally{}};function sg(g){if(!Bu(g))return g.g.la();const v=tn(g.g);if(v==="")return"";let E="";const R=v.length,H=di(g.g)==4;if(!g.h.i){if(typeof TextDecoder>"u")return Nn(g),Yn(g),"";g.h.i=new c.TextDecoder}for(let X=0;X<R;X++)g.h.h=!0,E+=g.h.i.decode(v[X],{stream:!(H&&X==R-1)});return v.length=0,g.h.g+=E,g.C=0,g.h.g}function Bu(g){return g.g?g.v=="GET"&&g.M!=2&&g.j.Aa:!1}function Fu(g,v){var E=g.C,R=v.indexOf(`
`,E);return R==-1?We:(E=Number(v.substring(E,R)),isNaN(E)?Me:(R+=1,R+E>v.length?We:(v=v.slice(R,R+E),g.C=R+E,v)))}ci.prototype.cancel=function(){this.K=!0,Nn(this)};function Ni(g){g.T=Date.now()+g.H,ao(g,g.H)}function ao(g,v){if(g.D!=null)throw Error("WatchDog timer not null");g.D=Di(d(g.aa,g),v)}function ki(g){g.D&&(c.clearTimeout(g.D),g.D=null)}ci.prototype.aa=function(){this.D=null;const g=Date.now();g-this.T>=0?(ea(this.i,this.B),this.M!=2&&(Ri(),De(17)),Nn(this),this.m=2,Yn(this)):ao(this,this.T-g)};function Yn(g){g.j.I==0||g.K||$u(g.j,g)}function Nn(g){ki(g);var v=g.O;v&&typeof v.dispose=="function"&&v.dispose(),g.O=null,Sl(g.V),g.g&&(v=g.g,g.g=null,v.abort(),v.dispose())}function Pi(g,v){try{var E=g.j;if(E.I!=0&&(E.g==g||Li(E.h,g))){if(!g.L&&Li(E.h,g)&&E.I==3){try{var R=E.Ba.g.parse(v)}catch{R=null}if(Array.isArray(R)&&R.length==3){var H=R;if(H[0]==0){t:if(!E.v){if(E.g)if(E.g.F+3e3<g.F)mo(E),Xs(E);else break t;ha(E),De(18)}}else E.xa=H[1],0<E.xa-E.K&&H[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=Di(d(E.Va,E),6e3));Vi(E.h)<=1&&E.ta&&(E.ta=void 0)}else Hi(E,11)}else if((g.L||E.g==g)&&mo(E),!N(v))for(H=E.Ba.g.parse(v),v=0;v<H.length;v++){let Qt=H[v];const me=Qt[0];if(!(me<=E.K))if(E.K=me,Qt=Qt[1],E.I==2)if(Qt[0]=="c"){E.M=Qt[1],E.ba=Qt[2];const Xn=Qt[3];Xn!=null&&(E.ka=Xn,E.j.info("VER="+E.ka));const qi=Qt[4];qi!=null&&(E.za=qi,E.j.info("SVER="+E.za));const gi=Qt[5];gi!=null&&typeof gi=="number"&&gi>0&&(R=1.5*gi,E.O=R,E.j.info("backChannelRequestTimeoutMs_="+R)),R=E;const mi=g.g;if(mi){const fa=mi.g?mi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fa){var X=R.h;X.g||fa.indexOf("spdy")==-1&&fa.indexOf("quic")==-1&&fa.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(Il(X,X.h),X.h=null))}if(R.G){const po=mi.g?mi.g.getResponseHeader("X-HTTP-Session-Id"):null;po&&(R.wa=po,Zt(R.J,R.G,po))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-g.F,E.j.info("Handshake RTT: "+E.T+"ms")),R=E;var ot=g;if(R.na=th(R,R.L?R.ba:null,R.W),ot.L){Dl(R.h,ot);var Mt=ot,Se=R.O;Se&&(Mt.H=Se),Mt.D&&(ki(Mt),Ni(Mt)),R.g=ot}else Xu(R);E.i.length>0&&Fi(E)}else Qt[0]!="stop"&&Qt[0]!="close"||Hi(E,7);else E.I==3&&(Qt[0]=="stop"||Qt[0]=="close"?Qt[0]=="stop"?Hi(E,7):jl(E):Qt[0]!="noop"&&E.l&&E.l.qa(Qt),E.A=0)}}Ri(4)}catch{}}var Oe=class{constructor(g,v){this.g=g,this.map=v}};function Cl(g){this.l=g||10,c.PerformanceNavigationTiming?(g=c.performance.getEntriesByType("navigation"),g=g.length>0&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Rl(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function Vi(g){return g.h?1:g.g?g.g.size:0}function Li(g,v){return g.h?g.h==v:g.g?g.g.has(v):!1}function Il(g,v){g.g?g.g.add(v):g.h=v}function Dl(g,v){g.h&&g.h==v?g.h=null:g.g&&g.g.has(v)&&g.g.delete(v)}Cl.prototype.cancel=function(){if(this.i=Ml(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function Ml(g){if(g.h!=null)return g.i.concat(g.h.G);if(g.g!=null&&g.g.size!==0){let v=g.i;for(const E of g.g.values())v=v.concat(E.G);return v}return x(g.i)}var Hu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function oo(g,v){if(g){g=g.split("&");for(let E=0;E<g.length;E++){const R=g[E].indexOf("=");let H,X=null;R>=0?(H=g[E].substring(0,R),X=g[E].substring(R+1)):H=g[E],v(H,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function kn(g){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;g instanceof kn?(this.l=g.l,Xe(this,g.j),this.o=g.o,this.g=g.g,Fs(this,g.u),this.h=g.h,Ol(this,Ku(g.i)),this.m=g.m):g&&(v=String(g).match(Hu))?(this.l=!1,Xe(this,v[1]||"",!0),this.o=zi(v[2]||""),this.g=zi(v[3]||"",!0),Fs(this,v[4]),this.h=zi(v[5]||"",!0),Ol(this,v[6]||"",!0),this.m=zi(v[7]||"")):(this.l=!1,this.i=new qs(null,this.l))}kn.prototype.toString=function(){const g=[];var v=this.j;v&&g.push(ra(v,lo,!0),":");var E=this.g;return(E||v=="file")&&(g.push("//"),(v=this.o)&&g.push(ra(v,lo,!0),"@"),g.push(rs(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&g.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&g.push("/"),g.push(ra(E,E.charAt(0)=="/"?Nl:qu,!0))),(E=this.i.toString())&&g.push("?",E),(E=this.m)&&g.push("#",ra(E,Gu)),g.join("")},kn.prototype.resolve=function(g){const v=Ne(this);let E=!!g.j;E?Xe(v,g.j):E=!!g.o,E?v.o=g.o:E=!!g.g,E?v.g=g.g:E=g.u!=null;var R=g.h;if(E)Fs(v,g.u);else if(E=!!g.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var H=v.h.lastIndexOf("/");H!=-1&&(R=v.h.slice(0,H+1)+R)}if(H=R,H==".."||H==".")R="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){R=H.lastIndexOf("/",0)==0,H=H.split("/");const X=[];for(let ot=0;ot<H.length;){const Mt=H[ot++];Mt=="."?R&&ot==H.length&&X.push(""):Mt==".."?((X.length>1||X.length==1&&X[0]!="")&&X.pop(),R&&ot==H.length&&X.push("")):(X.push(Mt),R=!0)}R=X.join("/")}else R=H}return E?v.h=R:E=g.i.toString()!=="",E?Ol(v,Ku(g.i)):E=!!g.m,E&&(v.m=g.m),v};function Ne(g){return new kn(g)}function Xe(g,v,E){g.j=E?zi(v,!0):v,g.j&&(g.j=g.j.replace(/:$/,""))}function Fs(g,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);g.u=v}else g.u=null}function Ol(g,v,E){v instanceof qs?(g.i=v,uo(g.i,g.l)):(E||(v=ra(v,Hs)),g.i=new qs(v,g.l))}function Zt(g,v,E){g.i.set(v,E)}function sa(g){return Zt(g,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),g}function zi(g,v){return g?v?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function ra(g,v,E){return typeof g=="string"?(g=encodeURI(g).replace(v,Tn),E&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function Tn(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var lo=/[#\/\?@]/g,qu=/[#\?:]/g,Nl=/[#\?]/g,Hs=/[#\?@]/g,Gu=/#/g;function qs(g,v){this.h=this.g=null,this.i=g||null,this.j=!!v}function En(g){g.g||(g.g=new Map,g.h=0,g.i&&oo(g.i,function(v,E){g.add(decodeURIComponent(v.replace(/\+/g," ")),E)}))}n=qs.prototype,n.add=function(g,v){En(this),this.i=null,g=Gs(this,g);let E=this.g.get(g);return E||this.g.set(g,E=[]),E.push(v),this.h+=1,this};function Yu(g,v){En(g),v=Gs(g,v),g.g.has(v)&&(g.i=null,g.h-=g.g.get(v).length,g.g.delete(v))}function kl(g,v){return En(g),v=Gs(g,v),g.g.has(v)}n.forEach=function(g,v){En(this),this.g.forEach(function(E,R){E.forEach(function(H){g.call(v,H,R,this)},this)},this)};function Pl(g,v){En(g);let E=[];if(typeof v=="string")kl(g,v)&&(E=E.concat(g.g.get(Gs(g,v))));else for(g=Array.from(g.g.values()),v=0;v<g.length;v++)E=E.concat(g[v]);return E}n.set=function(g,v){return En(this),this.i=null,g=Gs(this,g),kl(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[v]),this.h+=1,this},n.get=function(g,v){return g?(g=Pl(this,g),g.length>0?String(g[0]):v):v};function co(g,v,E){Yu(g,v),E.length>0&&(g.i=null,g.g.set(Gs(g,v),x(E)),g.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],v=Array.from(this.g.keys());for(let R=0;R<v.length;R++){var E=v[R];const H=rs(E);E=Pl(this,E);for(let X=0;X<E.length;X++){let ot=H;E[X]!==""&&(ot+="="+rs(E[X])),g.push(ot)}}return this.i=g.join("&")};function Ku(g){const v=new qs;return v.i=g.i,g.g&&(v.g=new Map(g.g),v.h=g.h),v}function Gs(g,v){return v=String(v),g.j&&(v=v.toLowerCase()),v}function uo(g,v){v&&!g.j&&(En(g),g.i=null,g.g.forEach(function(E,R){const H=R.toLowerCase();R!=H&&(Yu(this,R),co(this,H,E))},g)),g.j=v}function hi(g,v){const E=new li;if(c.Image){const R=new Image;R.onload=p(Kn,E,"TestLoadImage: loaded",!0,v,R),R.onerror=p(Kn,E,"TestLoadImage: error",!1,v,R),R.onabort=p(Kn,E,"TestLoadImage: abort",!1,v,R),R.ontimeout=p(Kn,E,"TestLoadImage: timeout",!1,v,R),c.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=g}else v(!1)}function Vl(g,v){const E=new li,R=new AbortController,H=setTimeout(()=>{R.abort(),Kn(E,"TestPingServer: timeout",!1,v)},1e4);fetch(g,{signal:R.signal}).then(X=>{clearTimeout(H),X.ok?Kn(E,"TestPingServer: ok",!0,v):Kn(E,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(H),Kn(E,"TestPingServer: error",!1,v)})}function Kn(g,v,E,R,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),R(E)}catch{}}function Ys(){this.g=new ku}function ji(g){this.i=g.Sb||null,this.h=g.ab||!1}_(ji,Pu),ji.prototype.g=function(){return new aa(this.i,this.h)};function aa(g,v){Ie.call(this),this.H=g,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(aa,Ie),n=aa.prototype,n.open=function(g,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=g,this.D=v,this.readyState=1,fi(this)},n.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};g&&(v.body=g),(this.H||c).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ks(this)),this.readyState=0},n.Pa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,fi(this)),this.g&&(this.readyState=3,fi(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ho(this)}else g.text().then(this.Oa.bind(this),this.ga.bind(this))};function ho(g){g.j.read().then(g.Ma.bind(g)).catch(g.ga.bind(g))}n.Ma=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var v=g.value?g.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!g.done}))&&(this.response=this.responseText+=v)}g.done?Ks(this):fi(this),this.readyState==3&&ho(this)}},n.Oa=function(g){this.g&&(this.response=this.responseText=g,Ks(this))},n.Na=function(g){this.g&&(this.response=g,Ks(this))},n.ga=function(){this.g&&Ks(this)};function Ks(g){g.readyState=4,g.l=null,g.j=null,g.B=null,fi(g)}n.setRequestHeader=function(g,v){this.A.append(g,v)},n.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],v=this.h.entries();for(var E=v.next();!E.done;)E=E.value,g.push(E[0]+": "+E[1]),E=v.next();return g.join(`\r
`)};function fi(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(aa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function Wn(g){let v="";return ht(g,function(E,R){v+=R,v+=":",v+=E,v+=`\r
`}),v}function oa(g,v,E){t:{for(R in E){var R=!1;break t}R=!0}R||(E=Wn(E),typeof g=="string"?E!=null&&rs(E):Zt(g,v,E))}function ie(g){Ie.call(this),this.headers=new Map,this.L=g||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(ie,Ie);var Ui=/^https?$/i,Ll=["POST","PUT"];n=ie.prototype,n.Fa=function(g){this.H=g},n.ea=function(g,v,E,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);v=v?v.toUpperCase():"GET",this.D=g,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():wl.g(),this.g.onreadystatechange=b(d(this.Ca,this));try{this.B=!0,this.g.open(v,String(g),!0),this.B=!1}catch(X){la(this,X);return}if(g=E||"",E=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var H in R)E.set(H,R[H]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const X of R.keys())E.set(X,R.get(X));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(E.keys()).find(X=>X.toLowerCase()=="content-type"),H=c.FormData&&g instanceof c.FormData,!(Array.prototype.indexOf.call(Ll,v,void 0)>=0)||R||H||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,ot]of E)this.g.setRequestHeader(X,ot);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(g),this.v=!1}catch(X){la(this,X)}};function la(g,v){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=v,g.o=5,zl(g),as(g)}function zl(g){g.A||(g.A=!0,qe(g,"complete"),qe(g,"error"))}n.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=g||7,qe(this,"complete"),qe(this,"abort"),as(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),as(this,!0)),ie.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?ca(this):this.Xa())},n.Xa=function(){ca(this)};function ca(g){if(g.h&&typeof o<"u"){if(g.v&&di(g)==4)setTimeout(g.Ca.bind(g),0);else if(qe(g,"readystatechange"),di(g)==4){g.h=!1;try{const X=g.ca();t:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break t;default:v=!1}var E;if(!(E=v)){var R;if(R=X===0){let ot=String(g.D).match(Hu)[1]||null;!ot&&c.self&&c.self.location&&(ot=c.self.location.protocol.slice(0,-1)),R=!Ui.test(ot?ot.toLowerCase():"")}E=R}if(E)qe(g,"complete"),qe(g,"success");else{g.o=6;try{var H=di(g)>2?g.g.statusText:""}catch{H=""}g.l=H+" ["+g.ca()+"]",zl(g)}}finally{as(g)}}}}function as(g,v){if(g.g){g.m&&(clearTimeout(g.m),g.m=null);const E=g.g;g.g=null,v||qe(g,"ready");try{E.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function di(g){return g.g?g.g.readyState:0}n.ca=function(){try{return di(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(g){if(this.g){var v=this.g.responseText;return g&&v.indexOf(g)==0&&(v=v.substring(g.length)),eg(v)}};function tn(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.F){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function os(g){const v={};g=(g.g&&di(g)>=2&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<g.length;R++){if(N(g[R]))continue;var E=Uu(g[R]);const H=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const X=v[H]||[];v[H]=X,X.push(E)}xt(v,function(R){return R.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bi(g,v,E){return E&&E.internalChannelParams&&E.internalChannelParams[g]||v}function Ws(g){this.za=0,this.i=[],this.j=new li,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Bi("failFast",!1,g),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Bi("baseRetryDelayMs",5e3,g),this.Za=Bi("retryDelaySeedMs",1e4,g),this.Ta=Bi("forwardChannelMaxRetries",2,g),this.va=Bi("forwardChannelRequestTimeoutMs",2e4,g),this.ma=g&&g.xmlHttpFactory||void 0,this.Ua=g&&g.Rb||void 0,this.Aa=g&&g.useFetchStreams||!1,this.O=void 0,this.L=g&&g.supportsCrossDomainXhr||!1,this.M="",this.h=new Cl(g&&g.concurrentRequestLimit),this.Ba=new Ys,this.S=g&&g.fastHandshake||!1,this.R=g&&g.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=g&&g.Pb||!1,g&&g.ua&&this.j.ua(),g&&g.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&g&&g.detectBufferingProxy||!1,this.ia=void 0,g&&g.longPollingTimeout&&g.longPollingTimeout>0&&(this.ia=g.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ws.prototype,n.ka=8,n.I=1,n.connect=function(g,v,E,R){De(0),this.W=g,this.H=v||{},E&&R!==void 0&&(this.H.OSID=E,this.H.OAID=R),this.F=this.X,this.J=th(this,null,this.W),Fi(this)};function jl(g){if(fo(g),g.I==3){var v=g.V++,E=Ne(g.J);if(Zt(E,"SID",g.M),Zt(E,"RID",v),Zt(E,"TYPE","terminate"),ua(g,E),v=new ci(g,g.j,v),v.M=2,v.A=sa(Ne(E)),E=!1,c.navigator&&c.navigator.sendBeacon)try{E=c.navigator.sendBeacon(v.A.toString(),"")}catch{}!E&&c.Image&&(new Image().src=v.A,E=!0),E||(v.g=eh(v.j,null),v.g.ea(v.A)),v.F=Date.now(),Ni(v)}Zu(g)}function Xs(g){g.g&&(Bl(g),g.g.cancel(),g.g=null)}function fo(g){Xs(g),g.v&&(c.clearTimeout(g.v),g.v=null),mo(g),g.h.cancel(),g.m&&(typeof g.m=="number"&&c.clearTimeout(g.m),g.m=null)}function Fi(g){if(!Rl(g.h)&&!g.m){g.m=!0;var v=g.Ea;$||C(),nt||($(),nt=!0),M.add(v,g),g.D=0}}function go(g,v){return Vi(g.h)>=g.h.j-(g.m?1:0)?!1:g.m?(g.i=v.G.concat(g.i),!0):g.I==1||g.I==2||g.D>=(g.Sa?0:g.Ta)?!1:(g.m=Di(d(g.Ea,g,v),Ju(g,g.D)),g.D++,!0)}n.Ea=function(g){if(this.m)if(this.m=null,this.I==1){if(!g){this.V=Math.floor(Math.random()*1e5),g=this.V++;const H=new ci(this,this.j,g);let X=this.o;if(this.U&&(X?(X=j(X),lt(X,this.U)):X=this.U),this.u!==null||this.R||(H.J=X,X=null),this.S)t:{for(var v=0,E=0;E<this.i.length;E++){e:{var R=this.i[E];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break e}R=void 0}if(R===void 0)break;if(v+=R,v>4096){v=E;break t}if(v===4096||E===this.i.length-1){v=E+1;break t}}v=1e3}else v=1e3;v=Wu(this,H,v),E=Ne(this.J),Zt(E,"RID",g),Zt(E,"CVER",22),this.G&&Zt(E,"X-HTTP-Session-Id",this.G),ua(this,E),X&&(this.R?v="headers="+rs(Wn(X))+"&"+v:this.u&&oa(E,this.u,X)),Il(this.h,H),this.Ra&&Zt(E,"TYPE","init"),this.S?(Zt(E,"$req",v),Zt(E,"SID","null"),H.U=!0,Oi(H,E,null)):Oi(H,E,v),this.I=2}}else this.I==3&&(g?Ul(this,g):this.i.length==0||Rl(this.h)||Ul(this))};function Ul(g,v){var E;v?E=v.l:E=g.V++;const R=Ne(g.J);Zt(R,"SID",g.M),Zt(R,"RID",E),Zt(R,"AID",g.K),ua(g,R),g.u&&g.o&&oa(R,g.u,g.o),E=new ci(g,g.j,E,g.D+1),g.u===null&&(E.J=g.o),v&&(g.i=v.G.concat(g.i)),v=Wu(g,E,1e3),E.H=Math.round(g.va*.5)+Math.round(g.va*.5*Math.random()),Il(g.h,E),Oi(E,R,v)}function ua(g,v){g.H&&ht(g.H,function(E,R){Zt(v,R,E)}),g.l&&ht({},function(E,R){Zt(v,R,E)})}function Wu(g,v,E){E=Math.min(g.i.length,E);const R=g.l?d(g.l.Ka,g.l,g):null;t:{var H=g.i;let Mt=-1;for(;;){const Se=["count="+E];Mt==-1?E>0?(Mt=H[0].g,Se.push("ofs="+Mt)):Mt=0:Se.push("ofs="+Mt);let Qt=!0;for(let me=0;me<E;me++){var X=H[me].g;const Xn=H[me].map;if(X-=Mt,X<0)Mt=Math.max(0,H[me].g-100),Qt=!1;else try{X="req"+X+"_"||"";try{var ot=Xn instanceof Map?Xn:Object.entries(Xn);for(const[qi,gi]of ot){let mi=gi;u(gi)&&(mi=Bs(gi)),Se.push(X+qi+"="+encodeURIComponent(mi))}}catch(qi){throw Se.push(X+"type="+encodeURIComponent("_badmap")),qi}}catch{R&&R(Xn)}}if(Qt){ot=Se.join("&");break t}}ot=void 0}return g=g.i.splice(0,E),v.G=g,ot}function Xu(g){if(!g.g&&!g.v){g.Y=1;var v=g.Da;$||C(),nt||($(),nt=!0),M.add(v,g),g.A=0}}function ha(g){return g.g||g.v||g.A>=3?!1:(g.Y++,g.v=Di(d(g.Da,g),Ju(g,g.A)),g.A++,!0)}n.Da=function(){if(this.v=null,Qu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var g=4*this.T;this.j.info("BP detection timer enabled: "+g),this.B=Di(d(this.Wa,this),g)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,De(10),Xs(this),Qu(this))};function Bl(g){g.B!=null&&(c.clearTimeout(g.B),g.B=null)}function Qu(g){g.g=new ci(g,g.j,"rpc",g.Y),g.u===null&&(g.g.J=g.o),g.g.P=0;var v=Ne(g.na);Zt(v,"RID","rpc"),Zt(v,"SID",g.M),Zt(v,"AID",g.K),Zt(v,"CI",g.F?"0":"1"),!g.F&&g.ia&&Zt(v,"TO",g.ia),Zt(v,"TYPE","xmlhttp"),ua(g,v),g.u&&g.o&&oa(v,g.u,g.o),g.O&&(g.g.H=g.O);var E=g.g;g=g.ba,E.M=1,E.A=sa(Ne(v)),E.u=null,E.R=!0,ro(E,g)}n.Va=function(){this.C!=null&&(this.C=null,Xs(this),ha(this),De(19))};function mo(g){g.C!=null&&(c.clearTimeout(g.C),g.C=null)}function $u(g,v){var E=null;if(g.g==v){mo(g),Bl(g),g.g=null;var R=2}else if(Li(g.h,v))E=v.G,Dl(g.h,v),R=1;else return;if(g.I!=0){if(v.o)if(R==1){E=v.u?v.u.length:0,v=Date.now()-v.F;var H=g.D;R=so(),qe(R,new Ii(R,E)),Fi(g)}else Xu(g);else if(H=v.m,H==3||H==0&&v.X>0||!(R==1&&go(g,v)||R==2&&ha(g)))switch(E&&E.length>0&&(v=g.h,v.i=v.i.concat(E)),H){case 1:Hi(g,5);break;case 4:Hi(g,10);break;case 3:Hi(g,6);break;default:Hi(g,2)}}}function Ju(g,v){let E=g.Qa+Math.floor(Math.random()*g.Za);return g.isActive()||(E*=2),E*v}function Hi(g,v){if(g.j.info("Error code "+v),v==2){var E=d(g.bb,g),R=g.Ua;const H=!R;R=new kn(R||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Xe(R,"https"),sa(R),H?hi(R.toString(),E):Vl(R.toString(),E)}else De(2);g.I=0,g.l&&g.l.pa(v),Zu(g),fo(g)}n.bb=function(g){g?(this.j.info("Successfully pinged google.com"),De(2)):(this.j.info("Failed to ping google.com"),De(1))};function Zu(g){if(g.I=0,g.ja=[],g.l){const v=Ml(g.h);(v.length!=0||g.i.length!=0)&&(w(g.ja,v),w(g.ja,g.i),g.h.i.length=0,x(g.i),g.i.length=0),g.l.oa()}}function th(g,v,E){var R=E instanceof kn?Ne(E):new kn(E);if(R.g!="")v&&(R.g=v+"."+R.g),Fs(R,R.u);else{var H=c.location;R=H.protocol,v=v?v+"."+H.hostname:H.hostname,H=+H.port;const X=new kn(null);R&&Xe(X,R),v&&(X.g=v),H&&Fs(X,H),E&&(X.h=E),R=X}return E=g.G,v=g.wa,E&&v&&Zt(R,E,v),Zt(R,"VER",g.ka),ua(g,R),R}function eh(g,v,E){if(v&&!g.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=g.Aa&&!g.ma?new ie(new ji({ab:E})):new ie(g.ma),v.Fa(g.L),v}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function nh(){}n=nh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Qs(){}Qs.prototype.g=function(g,v){return new bn(g,v)};function bn(g,v){Ie.call(this),this.g=new Ws(v),this.l=g,this.h=v&&v.messageUrlParams||null,g=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(g?g["X-WebChannel-Content-Type"]=v.messageContentType:g={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(g?g["X-WebChannel-Client-Profile"]=v.sa:g={"X-WebChannel-Client-Profile":v.sa}),this.g.U=g,(g=v&&v.Qb)&&!N(g)&&(this.g.u=g),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!N(v)&&(this.g.G=v,g=this.h,g!==null&&v in g&&(g=this.h,v in g&&delete g[v])),this.j=new ls(this)}_(bn,Ie),bn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},bn.prototype.close=function(){jl(this.g)},bn.prototype.o=function(g){var v=this.g;if(typeof g=="string"){var E={};E.__data__=g,g=E}else this.v&&(E={},E.__data__=Bs(g),g=E);v.i.push(new Oe(v.Ya++,g)),v.I==3&&Fi(v)},bn.prototype.N=function(){this.g.l=null,delete this.j,jl(this.g),delete this.g,bn.Z.N.call(this)};function ih(g){Ze.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var v=g.__sm__;if(v){t:{for(const E in v){g=E;break t}g=void 0}(this.i=g)&&(g=this.i,v=v!==null&&g in v?v[g]:void 0),this.data=v}else this.data=g}_(ih,Ze);function sh(){Gn.call(this),this.status=1}_(sh,Gn);function ls(g){this.g=g}_(ls,nh),ls.prototype.ra=function(){qe(this.g,"a")},ls.prototype.qa=function(g){qe(this.g,new ih(g))},ls.prototype.pa=function(g){qe(this.g,new sh)},ls.prototype.oa=function(){qe(this.g,"b")},Qs.prototype.createWebChannel=Qs.prototype.g,bn.prototype.send=bn.prototype.o,bn.prototype.open=bn.prototype.m,bn.prototype.close=bn.prototype.close,cA=function(){return new Qs},lA=function(){return so()},oA=xe,Bp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},na.NO_ERROR=0,na.TIMEOUT=8,na.HTTP_ERROR=6,kf=na,Al.COMPLETE="complete",aA=Al,Vu.EventType=oi,oi.OPEN="a",oi.CLOSE="b",oi.ERROR="c",oi.MESSAGE="d",Ie.prototype.listen=Ie.prototype.J,kc=Vu,ie.prototype.listenOnce=ie.prototype.K,ie.prototype.getLastError=ie.prototype.Ha,ie.prototype.getLastErrorCode=ie.prototype.ya,ie.prototype.getStatus=ie.prototype.ca,ie.prototype.getResponseJson=ie.prototype.La,ie.prototype.getResponseText=ie.prototype.la,ie.prototype.send=ie.prototype.ea,ie.prototype.setWithCredentials=ie.prototype.Fa,rA=ie}).apply(typeof uf<"u"?uf:typeof self<"u"?self:typeof window<"u"?window:{});const FT="@firebase/firestore",HT="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}fn.UNAUTHENTICATED=new fn(null),fn.GOOGLE_CREDENTIALS=new fn("google-credentials-uid"),fn.FIRST_PARTY=new fn("first-party-uid"),fn.MOCK_USER=new fn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ya=new Ay("@firebase/firestore");function Wo(){return Ya.logLevel}function dt(n,...t){if(Ya.logLevel<=Ut.DEBUG){const e=t.map(zy);Ya.debug(`Firestore (${pl}): ${n}`,...e)}}function Ls(n,...t){if(Ya.logLevel<=Ut.ERROR){const e=t.map(zy);Ya.error(`Firestore (${pl}): ${n}`,...e)}}function sl(n,...t){if(Ya.logLevel<=Ut.WARN){const e=t.map(zy);Ya.warn(`Firestore (${pl}): ${n}`,...e)}}function zy(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(e){return JSON.stringify(e)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(n,t,e){let i="Unexpected state";typeof t=="string"?i=t:e=t,uA(n,i,e)}function uA(n,t,e){let i=`FIRESTORE (${pl}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(e!==void 0)try{i+=" CONTEXT: "+JSON.stringify(e)}catch{i+=" CONTEXT: "+e}throw Ls(i),new Error(i)}function Jt(n,t,e,i){let r="Unexpected state";typeof e=="string"?r=e:i=e,n||uA(t,r,i)}function Dt(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const st={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ft extends js{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class CM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(fn.UNAUTHENTICATED)))}shutdown(){}}class RM{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class IM{constructor(t){this.t=t,this.currentUser=fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){Jt(this.o===void 0,42304);let i=this.i;const r=f=>this.i!==i?(i=this.i,e(f)):Promise.resolve();let o=new Nr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Nr,t.enqueueRetryable((()=>r(this.currentUser)))};const c=()=>{const f=o;t.enqueueRetryable((async()=>{await f.promise,await r(this.currentUser)}))},u=f=>{dt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((f=>u(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?u(f):(dt("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Nr)}}),0),c()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((i=>this.i!==t?(dt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Jt(typeof i.accessToken=="string",31837,{l:i}),new hA(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Jt(t===null||typeof t=="string",2055,{h:t}),new fn(t)}}class DM{constructor(t,e,i){this.P=t,this.T=e,this.I=i,this.type="FirstParty",this.user=fn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class MM{constructor(t,e,i){this.P=t,this.T=e,this.I=i}getToken(){return Promise.resolve(new DM(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable((()=>e(fn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class qT{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class OM{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Hn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){Jt(this.o===void 0,3512);const i=o=>{o.error!=null&&dt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,dt("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable((()=>i(o)))};const r=o=>{dt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>r(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):dt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new qT(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((e=>e?(Jt(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new qT(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NM(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=NM(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<e&&(i+=t.charAt(r[o]%62))}return i}}function Bt(n,t){return n<t?-1:n>t?1:0}function Fp(n,t){const e=Math.min(n.length,t.length);for(let i=0;i<e;i++){const r=n.charAt(i),o=t.charAt(i);if(r!==o)return hp(r)===hp(o)?Bt(r,o):hp(r)?1:-1}return Bt(n.length,t.length)}const kM=55296,PM=57343;function hp(n){const t=n.charCodeAt(0);return t>=kM&&t<=PM}function rl(n,t,e){return n.length===t.length&&n.every(((i,r)=>e(i,t[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT="__name__";class $i{constructor(t,e,i){e===void 0?e=0:e>t.length&&wt(637,{offset:e,range:t.length}),i===void 0?i=t.length-e:i>t.length-e&&wt(1746,{length:i,range:t.length-e}),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return $i.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof $i?t.forEach((i=>{e.push(i)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let r=0;r<i;r++){const o=$i.compareSegments(t.get(r),e.get(r));if(o!==0)return o}return Bt(t.length,e.length)}static compareSegments(t,e){const i=$i.isNumericId(t),r=$i.isNumericId(e);return i&&!r?-1:!i&&r?1:i&&r?$i.extractNumericId(t).compare($i.extractNumericId(e)):Fp(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Or.fromString(t.substring(4,t.length-2))}}class ce extends $i{construct(t,e,i){return new ce(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new ft(st.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter((r=>r.length>0)))}return new ce(e)}static emptyPath(){return new ce([])}}const VM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class on extends $i{construct(t,e,i){return new on(t,e,i)}static isValidIdentifier(t){return VM.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),on.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===GT}static keyField(){return new on([GT])}static fromServerFormat(t){const e=[];let i="",r=0;const o=()=>{if(i.length===0)throw new ft(st.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let c=!1;for(;r<t.length;){const u=t[r];if(u==="\\"){if(r+1===t.length)throw new ft(st.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const f=t[r+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new ft(st.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=f,r+=2}else u==="`"?(c=!c,r++):u!=="."||c?(i+=u,r++):(o(),r++)}if(o(),c)throw new ft(st.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new on(e)}static emptyPath(){return new on([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(t){this.path=t}static fromPath(t){return new bt(ce.fromString(t))}static fromName(t){return new bt(ce.fromString(t).popFirst(5))}static empty(){return new bt(ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ce.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return ce.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new bt(new ce(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(n,t,e){if(!e)throw new ft(st.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function LM(n,t,e,i){if(t===!0&&i===!0)throw new ft(st.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function YT(n){if(!bt.isDocumentKey(n))throw new ft(st.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function KT(n){if(bt.isDocumentKey(n))throw new ft(st.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function dA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Rd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=(function(i){return i.constructor?i.constructor.name:null})(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":wt(12329,{type:typeof n})}function xi(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new ft(st.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=Rd(n);throw new ft(st.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(n,t){const e={typeString:n};return t&&(e.value=t),e}function Su(n,t){if(!dA(n))throw new ft(st.INVALID_ARGUMENT,"JSON must be an object");let e;for(const i in t)if(t[i]){const r=t[i].typeString,o="value"in t[i]?{value:t[i].value}:void 0;if(!(i in n)){e=`JSON missing required field: '${i}'`;break}const c=n[i];if(r&&typeof c!==r){e=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&c!==o.value){e=`Expected '${i}' field to equal '${o.value}'`;break}}if(e)throw new ft(st.INVALID_ARGUMENT,e);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT=-62135596800,XT=1e6;class fe{static now(){return fe.fromMillis(Date.now())}static fromDate(t){return fe.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor((t-1e3*e)*XT);return new fe(e,i)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ft(st.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ft(st.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<WT)throw new ft(st.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ft(st.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/XT}_compareTo(t){return this.seconds===t.seconds?Bt(this.nanoseconds,t.nanoseconds):Bt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:fe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Su(t,fe._jsonSchema))return new fe(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-WT;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}fe._jsonSchemaVersion="firestore/timestamp/1.0",fe._jsonSchema={type:Ue("string",fe._jsonSchemaVersion),seconds:Ue("number"),nanoseconds:Ue("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{static fromTimestamp(t){return new Ct(t)}static min(){return new Ct(new fe(0,0))}static max(){return new Ct(new fe(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const su=-1;function zM(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Ct.fromTimestamp(i===1e9?new fe(e+1,0):new fe(e,i));return new Vr(r,bt.empty(),t)}function jM(n){return new Vr(n.readTime,n.key,su)}class Vr{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new Vr(Ct.min(),bt.empty(),su)}static max(){return new Vr(Ct.max(),bt.empty(),su)}}function UM(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=bt.comparator(n.documentKey,t.documentKey),e!==0?e:Bt(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class FM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yl(n){if(n.code!==st.FAILED_PRECONDITION||n.message!==BM)throw n;dt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&wt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new rt(((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(e,o).next(i,r)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof rt?e:rt.resolve(e)}catch(e){return rt.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):rt.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):rt.reject(e)}static resolve(t){return new rt(((e,i)=>{e(t)}))}static reject(t){return new rt(((e,i)=>{i(t)}))}static waitFor(t){return new rt(((e,i)=>{let r=0,o=0,c=!1;t.forEach((u=>{++r,u.next((()=>{++o,c&&o===r&&e()}),(f=>i(f)))})),c=!0,o===r&&e()}))}static or(t){let e=rt.resolve(!1);for(const i of t)e=e.next((r=>r?rt.resolve(r):i()));return e}static forEach(t,e){const i=[];return t.forEach(((r,o)=>{i.push(e.call(this,r,o))})),this.waitFor(i)}static mapArray(t,e){return new rt(((i,r)=>{const o=t.length,c=new Array(o);let u=0;for(let f=0;f<o;f++){const d=f;e(t[d]).next((p=>{c[d]=p,++u,u===o&&i(c)}),(p=>r(p)))}}))}static doWhile(t,e){return new rt(((i,r)=>{const o=()=>{t()===!0?e().next((()=>{o()}),r):i()};o()}))}}function HM(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function _l(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>e.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Id.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy=-1;function Dd(n){return n==null}function id(n){return n===0&&1/n==-1/0}function qM(n){return typeof n=="number"&&Number.isInteger(n)&&!id(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA="";function GM(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=QT(t)),t=YM(n.get(e),t);return QT(t)}function YM(n,t){let e=t;const i=n.length;for(let r=0;r<i;r++){const o=n.charAt(r);switch(o){case"\0":e+="";break;case gA:e+="";break;default:e+=o}}return e}function QT(n){return n+gA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Wr(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function mA(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(t,e){this.comparator=t,this.root=e||an.EMPTY}insert(t,e){return new be(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,an.BLACK,null,null))}remove(t){return new be(this.comparator,this.root.remove(t,this.comparator).copy(null,null,an.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,i)=>(t(e,i),!1)))}toString(){const t=[];return this.inorderTraversal(((e,i)=>(t.push(`${e}:${i}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new hf(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new hf(this.root,t,this.comparator,!1)}getReverseIterator(){return new hf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new hf(this.root,t,this.comparator,!0)}}class hf{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=e?i(t.key,e):1,e&&r&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class an{constructor(t,e,i,r,o){this.key=t,this.value=e,this.color=i??an.RED,this.left=r??an.EMPTY,this.right=o??an.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,o){return new an(t??this.key,e??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this;const o=i(t,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(t,e,i),null):o===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return an.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return an.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,an.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,an.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw wt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw wt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw wt(27949);return t+(this.isRed()?0:1)}}an.EMPTY=null,an.RED=!0,an.BLACK=!1;an.EMPTY=new class{constructor(){this.size=0}get key(){throw wt(57766)}get value(){throw wt(16141)}get color(){throw wt(16727)}get left(){throw wt(29726)}get right(){throw wt(36894)}copy(t,e,i,r,o){return this}insert(t,e,i){return new an(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(t){this.comparator=t,this.data=new be(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,i)=>(t(e),!1)))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new JT(this.data.getIterator())}getIteratorFrom(t){return new JT(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((i=>{e=e.add(i)})),e}isEqual(t){if(!(t instanceof Ke)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new Ke(this.comparator);return e.data=t,e}}class JT{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(t){this.fields=t,t.sort(on.comparator)}static empty(){return new qn([])}unionWith(t){let e=new Ke(on.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new qn(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return rl(this.fields,t.fields,((e,i)=>e.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(t){this.binaryString=t}static fromBase64String(t){const e=(function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new pA("Invalid base64 string: "+o):o}})(t);return new ln(e)}static fromUint8Array(t){const e=(function(r){let o="";for(let c=0;c<r.length;++c)o+=String.fromCharCode(r[c]);return o})(t);return new ln(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(e){return btoa(e)})(this.binaryString)}toUint8Array(){return(function(e){const i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Bt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ln.EMPTY_BYTE_STRING=new ln("");const KM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Lr(n){if(Jt(!!n,39018),typeof n=="string"){let t=0;const e=KM.exec(n);if(Jt(!!e,46558,{timestamp:n}),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Ce(n.seconds),nanos:Ce(n.nanos)}}function Ce(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function zr(n){return typeof n=="string"?ln.fromBase64String(n):ln.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA="server_timestamp",_A="__type__",bA="__previous_value__",vA="__local_write_time__";function By(n){var e,i;return((i=(((e=n==null?void 0:n.mapValue)==null?void 0:e.fields)||{})[_A])==null?void 0:i.stringValue)===yA}function Md(n){const t=n.mapValue.fields[bA];return By(t)?Md(t):t}function ru(n){const t=Lr(n.mapValue.fields[vA].timestampValue);return new fe(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(t,e,i,r,o,c,u,f,d,p){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=u,this.longPollingOptions=f,this.useFetchStreams=d,this.isUsingEmulator=p}}const sd="(default)";class au{constructor(t,e){this.projectId=t,this.database=e||sd}static empty(){return new au("","")}get isDefaultDatabase(){return this.database===sd}isEqual(t){return t instanceof au&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA="__type__",XM="__max__",ff={mapValue:{}},EA="__vector__",rd="value";function jr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?By(n)?4:$M(n)?9007199254740991:QM(n)?10:11:wt(28295,{value:n})}function ss(n,t){if(n===t)return!0;const e=jr(n);if(e!==jr(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return ru(n).isEqual(ru(t));case 3:return(function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const c=Lr(r.timestampValue),u=Lr(o.timestampValue);return c.seconds===u.seconds&&c.nanos===u.nanos})(n,t);case 5:return n.stringValue===t.stringValue;case 6:return(function(r,o){return zr(r.bytesValue).isEqual(zr(o.bytesValue))})(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return(function(r,o){return Ce(r.geoPointValue.latitude)===Ce(o.geoPointValue.latitude)&&Ce(r.geoPointValue.longitude)===Ce(o.geoPointValue.longitude)})(n,t);case 2:return(function(r,o){if("integerValue"in r&&"integerValue"in o)return Ce(r.integerValue)===Ce(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const c=Ce(r.doubleValue),u=Ce(o.doubleValue);return c===u?id(c)===id(u):isNaN(c)&&isNaN(u)}return!1})(n,t);case 9:return rl(n.arrayValue.values||[],t.arrayValue.values||[],ss);case 10:case 11:return(function(r,o){const c=r.mapValue.fields||{},u=o.mapValue.fields||{};if($T(c)!==$T(u))return!1;for(const f in c)if(c.hasOwnProperty(f)&&(u[f]===void 0||!ss(c[f],u[f])))return!1;return!0})(n,t);default:return wt(52216,{left:n})}}function ou(n,t){return(n.values||[]).find((e=>ss(e,t)))!==void 0}function al(n,t){if(n===t)return 0;const e=jr(n),i=jr(t);if(e!==i)return Bt(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return Bt(n.booleanValue,t.booleanValue);case 2:return(function(o,c){const u=Ce(o.integerValue||o.doubleValue),f=Ce(c.integerValue||c.doubleValue);return u<f?-1:u>f?1:u===f?0:isNaN(u)?isNaN(f)?0:-1:1})(n,t);case 3:return ZT(n.timestampValue,t.timestampValue);case 4:return ZT(ru(n),ru(t));case 5:return Fp(n.stringValue,t.stringValue);case 6:return(function(o,c){const u=zr(o),f=zr(c);return u.compareTo(f)})(n.bytesValue,t.bytesValue);case 7:return(function(o,c){const u=o.split("/"),f=c.split("/");for(let d=0;d<u.length&&d<f.length;d++){const p=Bt(u[d],f[d]);if(p!==0)return p}return Bt(u.length,f.length)})(n.referenceValue,t.referenceValue);case 8:return(function(o,c){const u=Bt(Ce(o.latitude),Ce(c.latitude));return u!==0?u:Bt(Ce(o.longitude),Ce(c.longitude))})(n.geoPointValue,t.geoPointValue);case 9:return tE(n.arrayValue,t.arrayValue);case 10:return(function(o,c){var b,x,w,S;const u=o.fields||{},f=c.fields||{},d=(b=u[rd])==null?void 0:b.arrayValue,p=(x=f[rd])==null?void 0:x.arrayValue,_=Bt(((w=d==null?void 0:d.values)==null?void 0:w.length)||0,((S=p==null?void 0:p.values)==null?void 0:S.length)||0);return _!==0?_:tE(d,p)})(n.mapValue,t.mapValue);case 11:return(function(o,c){if(o===ff.mapValue&&c===ff.mapValue)return 0;if(o===ff.mapValue)return 1;if(c===ff.mapValue)return-1;const u=o.fields||{},f=Object.keys(u),d=c.fields||{},p=Object.keys(d);f.sort(),p.sort();for(let _=0;_<f.length&&_<p.length;++_){const b=Fp(f[_],p[_]);if(b!==0)return b;const x=al(u[f[_]],d[p[_]]);if(x!==0)return x}return Bt(f.length,p.length)})(n.mapValue,t.mapValue);default:throw wt(23264,{he:e})}}function ZT(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return Bt(n,t);const e=Lr(n),i=Lr(t),r=Bt(e.seconds,i.seconds);return r!==0?r:Bt(e.nanos,i.nanos)}function tE(n,t){const e=n.values||[],i=t.values||[];for(let r=0;r<e.length&&r<i.length;++r){const o=al(e[r],i[r]);if(o)return o}return Bt(e.length,i.length)}function ol(n){return Hp(n)}function Hp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(e){const i=Lr(e);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(e){return zr(e).toBase64()})(n.bytesValue):"referenceValue"in n?(function(e){return bt.fromName(e).toString()})(n.referenceValue):"geoPointValue"in n?(function(e){return`geo(${e.latitude},${e.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(e){let i="[",r=!0;for(const o of e.values||[])r?r=!1:i+=",",i+=Hp(o);return i+"]"})(n.arrayValue):"mapValue"in n?(function(e){const i=Object.keys(e.fields||{}).sort();let r="{",o=!0;for(const c of i)o?o=!1:r+=",",r+=`${c}:${Hp(e.fields[c])}`;return r+"}"})(n.mapValue):wt(61005,{value:n})}function Pf(n){switch(jr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Md(n);return t?16+Pf(t):16;case 5:return 2*n.stringValue.length;case 6:return zr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((r,o)=>r+Pf(o)),0)})(n.arrayValue);case 10:case 11:return(function(i){let r=0;return Wr(i.fields,((o,c)=>{r+=o.length+Pf(c)})),r})(n.mapValue);default:throw wt(13486,{value:n})}}function eE(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function qp(n){return!!n&&"integerValue"in n}function Fy(n){return!!n&&"arrayValue"in n}function nE(n){return!!n&&"nullValue"in n}function iE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Vf(n){return!!n&&"mapValue"in n}function QM(n){var e,i;return((i=(((e=n==null?void 0:n.mapValue)==null?void 0:e.fields)||{})[TA])==null?void 0:i.stringValue)===EA}function Yc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const t={mapValue:{fields:{}}};return Wr(n.mapValue.fields,((e,i)=>t.mapValue.fields[e]=Yc(i))),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Yc(n.arrayValue.values[e]);return t}return{...n}}function $M(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===XM}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(t){this.value=t}static empty(){return new Dn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!Vf(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Yc(e)}setAll(t){let e=on.emptyPath(),i={},r=[];t.forEach(((c,u)=>{if(!e.isImmediateParentOf(u)){const f=this.getFieldsMap(e);this.applyChanges(f,i,r),i={},r=[],e=u.popLast()}c?i[u.lastSegment()]=Yc(c):r.push(u.lastSegment())}));const o=this.getFieldsMap(e);this.applyChanges(o,i,r)}delete(t){const e=this.field(t.popLast());Vf(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return ss(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];Vf(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){Wr(e,((r,o)=>t[r]=o));for(const r of i)delete t[r]}clone(){return new Dn(Yc(this.value))}}function xA(n){const t=[];return Wr(n.fields,((e,i)=>{const r=new on([e]);if(Vf(i)){const o=xA(i.mapValue).fields;if(o.length===0)t.push(r);else for(const c of o)t.push(r.child(c))}else t.push(r)})),new qn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(t,e,i,r,o,c,u){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.createTime=o,this.data=c,this.documentState=u}static newInvalidDocument(t){return new gn(t,0,Ct.min(),Ct.min(),Ct.min(),Dn.empty(),0)}static newFoundDocument(t,e,i,r){return new gn(t,1,e,Ct.min(),i,r,0)}static newNoDocument(t,e){return new gn(t,2,e,Ct.min(),Ct.min(),Dn.empty(),0)}static newUnknownDocument(t,e){return new gn(t,3,e,Ct.min(),Ct.min(),Dn.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Ct.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Dn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ct.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof gn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new gn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(t,e){this.position=t,this.inclusive=e}}function sE(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){const o=t[r],c=n.position[r];if(o.field.isKeyField()?i=bt.comparator(bt.fromName(c.referenceValue),e.key):i=al(c,e.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function rE(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!ss(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(t,e="asc"){this.field=t,this.dir=e}}function JM(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{}class je extends SA{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new tO(t,e,i):e==="array-contains"?new iO(t,i):e==="in"?new sO(t,i):e==="not-in"?new rO(t,i):e==="array-contains-any"?new aO(t,i):new je(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new eO(t,i):new nO(t,i)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(al(e,this.value)):e!==null&&jr(this.value)===jr(e)&&this.matchesComparison(al(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return wt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ai extends SA{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new Ai(t,e)}matches(t){return AA(this)?this.filters.find((e=>!e.matches(t)))===void 0:this.filters.find((e=>e.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function AA(n){return n.op==="and"}function wA(n){return ZM(n)&&AA(n)}function ZM(n){for(const t of n.filters)if(t instanceof Ai)return!1;return!0}function Gp(n){if(n instanceof je)return n.field.canonicalString()+n.op.toString()+ol(n.value);if(wA(n))return n.filters.map((t=>Gp(t))).join(",");{const t=n.filters.map((e=>Gp(e))).join(",");return`${n.op}(${t})`}}function CA(n,t){return n instanceof je?(function(i,r){return r instanceof je&&i.op===r.op&&i.field.isEqual(r.field)&&ss(i.value,r.value)})(n,t):n instanceof Ai?(function(i,r){return r instanceof Ai&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce(((o,c,u)=>o&&CA(c,r.filters[u])),!0):!1})(n,t):void wt(19439)}function RA(n){return n instanceof je?(function(e){return`${e.field.canonicalString()} ${e.op} ${ol(e.value)}`})(n):n instanceof Ai?(function(e){return e.op.toString()+" {"+e.getFilters().map(RA).join(" ,")+"}"})(n):"Filter"}class tO extends je{constructor(t,e,i){super(t,e,i),this.key=bt.fromName(i.referenceValue)}matches(t){const e=bt.comparator(t.key,this.key);return this.matchesComparison(e)}}class eO extends je{constructor(t,e){super(t,"in",e),this.keys=IA("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class nO extends je{constructor(t,e){super(t,"not-in",e),this.keys=IA("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function IA(n,t){var e;return(((e=t.arrayValue)==null?void 0:e.values)||[]).map((i=>bt.fromName(i.referenceValue)))}class iO extends je{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Fy(e)&&ou(e.arrayValue,this.value)}}class sO extends je{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&ou(this.value.arrayValue,e)}}class rO extends je{constructor(t,e){super(t,"not-in",e)}matches(t){if(ou(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!ou(this.value.arrayValue,e)}}class aO extends je{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Fy(e)||!e.arrayValue.values)&&e.arrayValue.values.some((i=>ou(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(t,e=null,i=[],r=[],o=null,c=null,u=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=c,this.endAt=u,this.Te=null}}function aE(n,t=null,e=[],i=[],r=null,o=null,c=null){return new oO(n,t,e,i,r,o,c)}function Hy(n){const t=Dt(n);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((i=>Gp(i))).join(","),e+="|ob:",e+=t.orderBy.map((i=>(function(o){return o.field.canonicalString()+o.dir})(i))).join(","),Dd(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((i=>ol(i))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((i=>ol(i))).join(",")),t.Te=e}return t.Te}function qy(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!JM(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!CA(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!rE(n.startAt,t.startAt)&&rE(n.endAt,t.endAt)}function Yp(n){return bt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(t,e=null,i=[],r=[],o=null,c="F",u=null,f=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=c,this.startAt=u,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function lO(n,t,e,i,r,o,c,u){return new Au(n,t,e,i,r,o,c,u)}function Gy(n){return new Au(n)}function oE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function DA(n){return n.collectionGroup!==null}function Kc(n){const t=Dt(n);if(t.Ie===null){t.Ie=[];const e=new Set;for(const o of t.explicitOrderBy)t.Ie.push(o),e.add(o.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let u=new Ke(on.comparator);return c.filters.forEach((f=>{f.getFlattenedFilters().forEach((d=>{d.isInequality()&&(u=u.add(d.field))}))})),u})(t).forEach((o=>{e.has(o.canonicalString())||o.isKeyField()||t.Ie.push(new od(o,i))})),e.has(on.keyField().canonicalString())||t.Ie.push(new od(on.keyField(),i))}return t.Ie}function Zi(n){const t=Dt(n);return t.Ee||(t.Ee=cO(t,Kc(n))),t.Ee}function cO(n,t){if(n.limitType==="F")return aE(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map((r=>{const o=r.dir==="desc"?"asc":"desc";return new od(r.field,o)}));const e=n.endAt?new ad(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new ad(n.startAt.position,n.startAt.inclusive):null;return aE(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}function Kp(n,t){const e=n.filters.concat([t]);return new Au(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function Wp(n,t,e){return new Au(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function Od(n,t){return qy(Zi(n),Zi(t))&&n.limitType===t.limitType}function MA(n){return`${Hy(Zi(n))}|lt:${n.limitType}`}function Xo(n){return`Query(target=${(function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map((r=>RA(r))).join(", ")}]`),Dd(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map((r=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(r))).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map((r=>ol(r))).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map((r=>ol(r))).join(",")),`Target(${i})`})(Zi(n))}; limitType=${n.limitType})`}function Nd(n,t){return t.isFoundDocument()&&(function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):bt.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)})(n,t)&&(function(i,r){for(const o of Kc(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0})(n,t)&&(function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0})(n,t)&&(function(i,r){return!(i.startAt&&!(function(c,u,f){const d=sE(c,u,f);return c.inclusive?d<=0:d<0})(i.startAt,Kc(i),r)||i.endAt&&!(function(c,u,f){const d=sE(c,u,f);return c.inclusive?d>=0:d>0})(i.endAt,Kc(i),r))})(n,t)}function uO(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function OA(n){return(t,e)=>{let i=!1;for(const r of Kc(n)){const o=hO(r,t,e);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function hO(n,t,e){const i=n.field.isKeyField()?bt.comparator(t.key,e.key):(function(o,c,u){const f=c.data.field(o),d=u.data.field(o);return f!==null&&d!==null?al(f,d):wt(42886)})(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return wt(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,t))return o}}has(t){return this.get(t)!==void 0}set(t,e){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return void(r[o]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Wr(this.inner,((e,i)=>{for(const[r,o]of i)t(r,o)}))}isEmpty(){return mA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fO=new be(bt.comparator);function zs(){return fO}const NA=new be(bt.comparator);function Pc(...n){let t=NA;for(const e of n)t=t.insert(e.key,e);return t}function kA(n){let t=NA;return n.forEach(((e,i)=>t=t.insert(e,i.overlayedDocument))),t}function Va(){return Wc()}function PA(){return Wc()}function Wc(){return new $a((n=>n.toString()),((n,t)=>n.isEqual(t)))}const dO=new be(bt.comparator),gO=new Ke(bt.comparator);function Ft(...n){let t=gO;for(const e of n)t=t.add(e);return t}const mO=new Ke(Bt);function pO(){return mO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yy(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:id(t)?"-0":t}}function VA(n){return{integerValue:""+n}}function yO(n,t){return qM(t)?VA(t):Yy(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(){this._=void 0}}function _O(n,t,e){return n instanceof ld?(function(r,o){const c={fields:{[_A]:{stringValue:yA},[vA]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&By(o)&&(o=Md(o)),o&&(c.fields[bA]=o),{mapValue:c}})(e,t):n instanceof lu?zA(n,t):n instanceof cu?jA(n,t):(function(r,o){const c=LA(r,o),u=lE(c)+lE(r.Ae);return qp(c)&&qp(r.Ae)?VA(u):Yy(r.serializer,u)})(n,t)}function bO(n,t,e){return n instanceof lu?zA(n,t):n instanceof cu?jA(n,t):e}function LA(n,t){return n instanceof cd?(function(i){return qp(i)||(function(o){return!!o&&"doubleValue"in o})(i)})(t)?t:{integerValue:0}:null}class ld extends kd{}class lu extends kd{constructor(t){super(),this.elements=t}}function zA(n,t){const e=UA(t);for(const i of n.elements)e.some((r=>ss(r,i)))||e.push(i);return{arrayValue:{values:e}}}class cu extends kd{constructor(t){super(),this.elements=t}}function jA(n,t){let e=UA(t);for(const i of n.elements)e=e.filter((r=>!ss(r,i)));return{arrayValue:{values:e}}}class cd extends kd{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function lE(n){return Ce(n.integerValue||n.doubleValue)}function UA(n){return Fy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function vO(n,t){return n.field.isEqual(t.field)&&(function(i,r){return i instanceof lu&&r instanceof lu||i instanceof cu&&r instanceof cu?rl(i.elements,r.elements,ss):i instanceof cd&&r instanceof cd?ss(i.Ae,r.Ae):i instanceof ld&&r instanceof ld})(n.transform,t.transform)}class TO{constructor(t,e){this.version=t,this.transformResults=e}}class On{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new On}static exists(t){return new On(void 0,t)}static updateTime(t){return new On(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Lf(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class Pd{}function BA(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new Vd(n.key,On.none()):new wu(n.key,n.data,On.none());{const e=n.data,i=Dn.empty();let r=new Ke(on.comparator);for(let o of t.fields)if(!r.has(o)){let c=e.field(o);c===null&&o.length>1&&(o=o.popLast(),c=e.field(o)),c===null?i.delete(o):i.set(o,c),r=r.add(o)}return new Xr(n.key,i,new qn(r.toArray()),On.none())}}function EO(n,t,e){n instanceof wu?(function(r,o,c){const u=r.value.clone(),f=uE(r.fieldTransforms,o,c.transformResults);u.setAll(f),o.convertToFoundDocument(c.version,u).setHasCommittedMutations()})(n,t,e):n instanceof Xr?(function(r,o,c){if(!Lf(r.precondition,o))return void o.convertToUnknownDocument(c.version);const u=uE(r.fieldTransforms,o,c.transformResults),f=o.data;f.setAll(FA(r)),f.setAll(u),o.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(n,t,e):(function(r,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()})(0,t,e)}function Xc(n,t,e,i){return n instanceof wu?(function(o,c,u,f){if(!Lf(o.precondition,c))return u;const d=o.value.clone(),p=hE(o.fieldTransforms,f,c);return d.setAll(p),c.convertToFoundDocument(c.version,d).setHasLocalMutations(),null})(n,t,e,i):n instanceof Xr?(function(o,c,u,f){if(!Lf(o.precondition,c))return u;const d=hE(o.fieldTransforms,f,c),p=c.data;return p.setAll(FA(o)),p.setAll(d),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((_=>_.field)))})(n,t,e,i):(function(o,c,u){return Lf(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):u})(n,t,e)}function xO(n,t){let e=null;for(const i of n.fieldTransforms){const r=t.data.field(i.field),o=LA(i.transform,r||null);o!=null&&(e===null&&(e=Dn.empty()),e.set(i.field,o))}return e||null}function cE(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&rl(i,r,((o,c)=>vO(o,c)))})(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class wu extends Pd{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Xr extends Pd{constructor(t,e,i,r,o=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function FA(n){const t=new Map;return n.fieldMask.fields.forEach((e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}})),t}function uE(n,t,e){const i=new Map;Jt(n.length===e.length,32656,{Re:e.length,Ve:n.length});for(let r=0;r<e.length;r++){const o=n[r],c=o.transform,u=t.data.field(o.field);i.set(o.field,bO(c,u,e[r]))}return i}function hE(n,t,e){const i=new Map;for(const r of n){const o=r.transform,c=e.data.field(r.field);i.set(r.field,_O(o,c,t))}return i}class Vd extends Pd{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class SO extends Pd{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(t.key)&&EO(o,t,i[r])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=Xc(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=Xc(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=PA();return this.mutations.forEach((r=>{const o=t.get(r.key),c=o.overlayedDocument;let u=this.applyToLocalView(c,o.mutatedFields);u=e.has(r.key)?null:u;const f=BA(c,u);f!==null&&i.set(r.key,f),c.isValidDocument()||c.convertToNoDocument(Ct.min())})),i}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Ft())}isEqual(t){return this.batchId===t.batchId&&rl(this.mutations,t.mutations,((e,i)=>cE(e,i)))&&rl(this.baseMutations,t.baseMutations,((e,i)=>cE(e,i)))}}class Ky{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){Jt(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let r=(function(){return dO})();const o=t.mutations;for(let c=0;c<o.length;c++)r=r.insert(o[c].key,i[c].version);return new Ky(t,e,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze,Yt;function RO(n){switch(n){case st.OK:return wt(64938);case st.CANCELLED:case st.UNKNOWN:case st.DEADLINE_EXCEEDED:case st.RESOURCE_EXHAUSTED:case st.INTERNAL:case st.UNAVAILABLE:case st.UNAUTHENTICATED:return!1;case st.INVALID_ARGUMENT:case st.NOT_FOUND:case st.ALREADY_EXISTS:case st.PERMISSION_DENIED:case st.FAILED_PRECONDITION:case st.ABORTED:case st.OUT_OF_RANGE:case st.UNIMPLEMENTED:case st.DATA_LOSS:return!0;default:return wt(15467,{code:n})}}function HA(n){if(n===void 0)return Ls("GRPC error has no .code"),st.UNKNOWN;switch(n){case ze.OK:return st.OK;case ze.CANCELLED:return st.CANCELLED;case ze.UNKNOWN:return st.UNKNOWN;case ze.DEADLINE_EXCEEDED:return st.DEADLINE_EXCEEDED;case ze.RESOURCE_EXHAUSTED:return st.RESOURCE_EXHAUSTED;case ze.INTERNAL:return st.INTERNAL;case ze.UNAVAILABLE:return st.UNAVAILABLE;case ze.UNAUTHENTICATED:return st.UNAUTHENTICATED;case ze.INVALID_ARGUMENT:return st.INVALID_ARGUMENT;case ze.NOT_FOUND:return st.NOT_FOUND;case ze.ALREADY_EXISTS:return st.ALREADY_EXISTS;case ze.PERMISSION_DENIED:return st.PERMISSION_DENIED;case ze.FAILED_PRECONDITION:return st.FAILED_PRECONDITION;case ze.ABORTED:return st.ABORTED;case ze.OUT_OF_RANGE:return st.OUT_OF_RANGE;case ze.UNIMPLEMENTED:return st.UNIMPLEMENTED;case ze.DATA_LOSS:return st.DATA_LOSS;default:return wt(39323,{code:n})}}(Yt=ze||(ze={}))[Yt.OK=0]="OK",Yt[Yt.CANCELLED=1]="CANCELLED",Yt[Yt.UNKNOWN=2]="UNKNOWN",Yt[Yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Yt[Yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Yt[Yt.NOT_FOUND=5]="NOT_FOUND",Yt[Yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Yt[Yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Yt[Yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Yt[Yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Yt[Yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Yt[Yt.ABORTED=10]="ABORTED",Yt[Yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Yt[Yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Yt[Yt.INTERNAL=13]="INTERNAL",Yt[Yt.UNAVAILABLE=14]="UNAVAILABLE",Yt[Yt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DO=new Or([4294967295,4294967295],0);function fE(n){const t=IO().encode(n),e=new sA;return e.update(t),new Uint8Array(e.digest())}function dE(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new Or([e,i],0),new Or([r,o],0)]}class Wy{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new Vc(`Invalid padding: ${e}`);if(i<0)throw new Vc(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new Vc(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new Vc(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=Or.fromNumber(this.ge)}ye(t,e,i){let r=t.add(e.multiply(Or.fromNumber(i)));return r.compare(DO)===1&&(r=new Or([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const e=fE(t),[i,r]=dE(e);for(let o=0;o<this.hashCount;o++){const c=this.ye(i,r,o);if(!this.we(c))return!1}return!0}static create(t,e,i){const r=t%8==0?0:8-t%8,o=new Uint8Array(Math.ceil(t/8)),c=new Wy(o,r,e);return i.forEach((u=>c.insert(u))),c}insert(t){if(this.ge===0)return;const e=fE(t),[i,r]=dE(e);for(let o=0;o<this.hashCount;o++){const c=this.ye(i,r,o);this.Se(c)}}Se(t){const e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}}class Vc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(t,e,i,r,o){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const r=new Map;return r.set(t,Cu.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new Ld(Ct.min(),r,new be(Bt),zs(),Ft())}}class Cu{constructor(t,e,i,r,o){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new Cu(i,e,Ft(),Ft(),Ft())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(t,e,i,r){this.be=t,this.removedTargetIds=e,this.key=i,this.De=r}}class qA{constructor(t,e){this.targetId=t,this.Ce=e}}class GA{constructor(t,e,i=ln.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}}class gE{constructor(){this.ve=0,this.Fe=mE(),this.Me=ln.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Ft(),e=Ft(),i=Ft();return this.Fe.forEach(((r,o)=>{switch(o){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:wt(38017,{changeType:o})}})),new Cu(this.Me,this.xe,t,e,i)}qe(){this.Oe=!1,this.Fe=mE()}Qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Jt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class MO{constructor(t){this.Ge=t,this.ze=new Map,this.je=zs(),this.Je=df(),this.He=df(),this.Ye=new be(Bt)}Ze(t){for(const e of t.be)t.De&&t.De.isFoundDocument()?this.Xe(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,(e=>{const i=this.nt(e);switch(t.state){case 0:this.rt(e)&&i.Le(t.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(t.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(i.We(),i.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),i.Le(t.resumeToken));break;default:wt(56790,{state:t.state})}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach(((i,r)=>{this.rt(r)&&e(r)}))}st(t){const e=t.targetId,i=t.Ce.count,r=this.ot(e);if(r){const o=r.target;if(Yp(o))if(i===0){const c=new bt(o.path);this.et(e,c,gn.newNoDocument(c,Ct.min()))}else Jt(i===1,20013,{expectedCount:i});else{const c=this._t(e);if(c!==i){const u=this.ut(t),f=u?this.ct(u,t,c):1;if(f!==0){this.it(e);const d=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(e,d)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=e;let c,u;try{c=zr(i).toUint8Array()}catch(f){if(f instanceof pA)return sl("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{u=new Wy(c,r,o)}catch(f){return sl(f instanceof Vc?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return u.ge===0?null:u}ct(t,e,i){return e.Ce.count===i-this.Pt(t,e.targetId)?0:2}Pt(t,e){const i=this.Ge.getRemoteKeysForTarget(e);let r=0;return i.forEach((o=>{const c=this.Ge.ht(),u=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;t.mightContain(u)||(this.et(e,o,null),r++)})),r}Tt(t){const e=new Map;this.ze.forEach(((o,c)=>{const u=this.ot(c);if(u){if(o.current&&Yp(u.target)){const f=new bt(u.target.path);this.It(f).has(c)||this.Et(c,f)||this.et(c,f,gn.newNoDocument(f,t))}o.Be&&(e.set(c,o.ke()),o.qe())}}));let i=Ft();this.He.forEach(((o,c)=>{let u=!0;c.forEachWhile((f=>{const d=this.ot(f);return!d||d.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(i=i.add(o))})),this.je.forEach(((o,c)=>c.setReadTime(t)));const r=new Ld(t,e,this.Ye,this.je,i);return this.je=zs(),this.Je=df(),this.He=df(),this.Ye=new be(Bt),r}Xe(t,e){if(!this.rt(t))return;const i=this.Et(t,e.key)?2:0;this.nt(t).Qe(e.key,i),this.je=this.je.insert(e.key,e),this.Je=this.Je.insert(e.key,this.It(e.key).add(t)),this.He=this.He.insert(e.key,this.dt(e.key).add(t))}et(t,e,i){if(!this.rt(t))return;const r=this.nt(t);this.Et(t,e)?r.Qe(e,1):r.$e(e),this.He=this.He.insert(e,this.dt(e).delete(t)),this.He=this.He.insert(e,this.dt(e).add(t)),i&&(this.je=this.je.insert(e,i))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let e=this.ze.get(t);return e||(e=new gE,this.ze.set(t,e)),e}dt(t){let e=this.He.get(t);return e||(e=new Ke(Bt),this.He=this.He.insert(t,e)),e}It(t){let e=this.Je.get(t);return e||(e=new Ke(Bt),this.Je=this.Je.insert(t,e)),e}rt(t){const e=this.ot(t)!==null;return e||dt("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new gE),this.Ge.getRemoteKeysForTarget(t).forEach((e=>{this.et(t,e,null)}))}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function df(){return new be(bt.comparator)}function mE(){return new be(bt.comparator)}const OO={asc:"ASCENDING",desc:"DESCENDING"},NO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kO={and:"AND",or:"OR"};class PO{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Xp(n,t){return n.useProto3Json||Dd(t)?t:{value:t}}function ud(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function YA(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function VO(n,t){return ud(n,t.toTimestamp())}function ts(n){return Jt(!!n,49232),Ct.fromTimestamp((function(e){const i=Lr(e);return new fe(i.seconds,i.nanos)})(n))}function Xy(n,t){return Qp(n,t).canonicalString()}function Qp(n,t){const e=(function(r){return new ce(["projects",r.projectId,"databases",r.database])})(n).child("documents");return t===void 0?e:e.child(t)}function KA(n){const t=ce.fromString(n);return Jt(JA(t),10190,{key:t.toString()}),t}function $p(n,t){return Xy(n.databaseId,t.path)}function fp(n,t){const e=KA(t);if(e.get(1)!==n.databaseId.projectId)throw new ft(st.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new ft(st.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new bt(XA(e))}function WA(n,t){return Xy(n.databaseId,t)}function LO(n){const t=KA(n);return t.length===4?ce.emptyPath():XA(t)}function Jp(n){return new ce(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function XA(n){return Jt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function pE(n,t,e){return{name:$p(n,t),fields:e.value.mapValue.fields}}function zO(n,t){let e;if("targetChange"in t){t.targetChange;const i=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:wt(39313,{state:d})})(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],o=(function(d,p){return d.useProto3Json?(Jt(p===void 0||typeof p=="string",58123),ln.fromBase64String(p||"")):(Jt(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),ln.fromUint8Array(p||new Uint8Array))})(n,t.targetChange.resumeToken),c=t.targetChange.cause,u=c&&(function(d){const p=d.code===void 0?st.UNKNOWN:HA(d.code);return new ft(p,d.message||"")})(c);e=new GA(i,r,o,u||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=fp(n,i.document.name),o=ts(i.document.updateTime),c=i.document.createTime?ts(i.document.createTime):Ct.min(),u=new Dn({mapValue:{fields:i.document.fields}}),f=gn.newFoundDocument(r,o,c,u),d=i.targetIds||[],p=i.removedTargetIds||[];e=new zf(d,p,f.key,f)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=fp(n,i.document),o=i.readTime?ts(i.readTime):Ct.min(),c=gn.newNoDocument(r,o),u=i.removedTargetIds||[];e=new zf([],u,c.key,c)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=fp(n,i.document),o=i.removedTargetIds||[];e=new zf([],o,r,null)}else{if(!("filter"in t))return wt(11601,{Rt:t});{t.filter;const i=t.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,c=new CO(r,o),u=i.targetId;e=new qA(u,c)}}return e}function jO(n,t){let e;if(t instanceof wu)e={update:pE(n,t.key,t.value)};else if(t instanceof Vd)e={delete:$p(n,t.key)};else if(t instanceof Xr)e={update:pE(n,t.key,t.data),updateMask:WO(t.fieldMask)};else{if(!(t instanceof SO))return wt(16599,{Vt:t.type});e={verify:$p(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map((i=>(function(o,c){const u=c.transform;if(u instanceof ld)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof lu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof cu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof cd)return{fieldPath:c.field.canonicalString(),increment:u.Ae};throw wt(20930,{transform:c.transform})})(0,i)))),t.precondition.isNone||(e.currentDocument=(function(r,o){return o.updateTime!==void 0?{updateTime:VO(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:wt(27497)})(n,t.precondition)),e}function UO(n,t){return n&&n.length>0?(Jt(t!==void 0,14353),n.map((e=>(function(r,o){let c=r.updateTime?ts(r.updateTime):ts(o);return c.isEqual(Ct.min())&&(c=ts(o)),new TO(c,r.transformResults||[])})(e,t)))):[]}function BO(n,t){return{documents:[WA(n,t.path)]}}function FO(n,t){const e={structuredQuery:{}},i=t.path;let r;t.collectionGroup!==null?(r=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=WA(n,r);const o=(function(d){if(d.length!==0)return $A(Ai.create(d,"and"))})(t.filters);o&&(e.structuredQuery.where=o);const c=(function(d){if(d.length!==0)return d.map((p=>(function(b){return{field:Qo(b.field),direction:GO(b.dir)}})(p)))})(t.orderBy);c&&(e.structuredQuery.orderBy=c);const u=Xp(n,t.limit);return u!==null&&(e.structuredQuery.limit=u),t.startAt&&(e.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(t.startAt)),t.endAt&&(e.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(t.endAt)),{ft:e,parent:r}}function HO(n){let t=LO(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let r=null;if(i>0){Jt(i===1,65062);const p=e.from[0];p.allDescendants?r=p.collectionId:t=t.child(p.collectionId)}let o=[];e.where&&(o=(function(_){const b=QA(_);return b instanceof Ai&&wA(b)?b.getFilters():[b]})(e.where));let c=[];e.orderBy&&(c=(function(_){return _.map((b=>(function(w){return new od($o(w.field),(function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(w.direction))})(b)))})(e.orderBy));let u=null;e.limit&&(u=(function(_){let b;return b=typeof _=="object"?_.value:_,Dd(b)?null:b})(e.limit));let f=null;e.startAt&&(f=(function(_){const b=!!_.before,x=_.values||[];return new ad(x,b)})(e.startAt));let d=null;return e.endAt&&(d=(function(_){const b=!_.before,x=_.values||[];return new ad(x,b)})(e.endAt)),lO(t,r,c,o,u,"F",f,d)}function qO(n,t){const e=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return wt(28987,{purpose:r})}})(t.purpose);return e==null?null:{"goog-listen-tags":e}}function QA(n){return n.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":const i=$o(e.unaryFilter.field);return je.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=$o(e.unaryFilter.field);return je.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=$o(e.unaryFilter.field);return je.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=$o(e.unaryFilter.field);return je.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return wt(61313);default:return wt(60726)}})(n):n.fieldFilter!==void 0?(function(e){return je.create($o(e.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return wt(58110);default:return wt(50506)}})(e.fieldFilter.op),e.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(e){return Ai.create(e.compositeFilter.filters.map((i=>QA(i))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return wt(1026)}})(e.compositeFilter.op))})(n):wt(30097,{filter:n})}function GO(n){return OO[n]}function YO(n){return NO[n]}function KO(n){return kO[n]}function Qo(n){return{fieldPath:n.canonicalString()}}function $o(n){return on.fromServerFormat(n.fieldPath)}function $A(n){return n instanceof je?(function(e){if(e.op==="=="){if(iE(e.value))return{unaryFilter:{field:Qo(e.field),op:"IS_NAN"}};if(nE(e.value))return{unaryFilter:{field:Qo(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(iE(e.value))return{unaryFilter:{field:Qo(e.field),op:"IS_NOT_NAN"}};if(nE(e.value))return{unaryFilter:{field:Qo(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qo(e.field),op:YO(e.op),value:e.value}}})(n):n instanceof Ai?(function(e){const i=e.getFilters().map((r=>$A(r)));return i.length===1?i[0]:{compositeFilter:{op:KO(e.op),filters:i}}})(n):wt(54877,{filter:n})}function WO(n){const t=[];return n.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function JA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(t,e,i,r,o=Ct.min(),c=Ct.min(),u=ln.EMPTY_BYTE_STRING,f=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=u,this.expectedCount=f}withSequenceNumber(t){return new xr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new xr(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(t){this.yt=t}}function QO(n){const t=HO({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Wp(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(){this.Cn=new JO}addToCollectionParentIndex(t,e){return this.Cn.add(e),rt.resolve()}getCollectionParents(t,e){return rt.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return rt.resolve()}deleteFieldIndex(t,e){return rt.resolve()}deleteAllFieldIndexes(t){return rt.resolve()}createTargetIndexes(t,e){return rt.resolve()}getDocumentsMatchingTarget(t,e){return rt.resolve(null)}getIndexType(t,e){return rt.resolve(0)}getFieldIndexes(t,e){return rt.resolve([])}getNextCollectionGroupToUpdate(t){return rt.resolve(null)}getMinOffset(t,e){return rt.resolve(Vr.min())}getMinOffsetFromCollectionGroup(t,e){return rt.resolve(Vr.min())}updateCollectionGroup(t,e,i){return rt.resolve()}updateIndexEntries(t,e){return rt.resolve()}}class JO{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new Ke(ce.comparator),o=!r.has(i);return this.index[e]=r.add(i),o}has(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new Ke(ce.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ZA=41943040;class In{static withCacheSize(t){return new In(t,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */In.DEFAULT_COLLECTION_PERCENTILE=10,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,In.DEFAULT=new In(ZA,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),In.DISABLED=new In(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new ll(0)}static cr(){return new ll(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E="LruGarbageCollector",ZO=1048576;function bE([n,t],[e,i]){const r=Bt(n,e);return r===0?Bt(t,i):r}class tN{constructor(t){this.Ir=t,this.buffer=new Ke(bE),this.Er=0}dr(){return++this.Er}Ar(t){const e=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();bE(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class eN{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){dt(_E,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){_l(e)?dt(_E,"Ignoring IndexedDB error during garbage collection: ",e):await yl(e)}await this.Vr(3e5)}))}}class nN{constructor(t,e){this.mr=t,this.params=e}calculateTargetCount(t,e){return this.mr.gr(t).next((i=>Math.floor(e/100*i)))}nthSequenceNumber(t,e){if(e===0)return rt.resolve(Id.ce);const i=new tN(e);return this.mr.forEachTarget(t,(r=>i.Ar(r.sequenceNumber))).next((()=>this.mr.pr(t,(r=>i.Ar(r))))).next((()=>i.maxValue))}removeTargets(t,e,i){return this.mr.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.mr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(dt("LruGarbageCollector","Garbage collection skipped; disabled"),rt.resolve(yE)):this.getCacheSize(t).next((i=>i<this.params.cacheSizeCollectionThreshold?(dt("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yE):this.yr(t,e)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,e){let i,r,o,c,u,f,d;const p=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(dt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),r=this.params.maximumSequenceNumbersToCollect):r=_,c=Date.now(),this.nthSequenceNumber(t,r)))).next((_=>(i=_,u=Date.now(),this.removeTargets(t,i,e)))).next((_=>(o=_,f=Date.now(),this.removeOrphanedDocuments(t,i)))).next((_=>(d=Date.now(),Wo()<=Ut.DEBUG&&dt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-p}ms
	Determined least recently used ${r} in `+(u-c)+`ms
	Removed ${o} targets in `+(f-u)+`ms
	Removed ${_} documents in `+(d-f)+`ms
Total Duration: ${d-p}ms`),rt.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:_}))))}}function iN(n,t){return new nN(n,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(){this.changes=new $a((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,gn.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return i!==void 0?rt.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next((r=>(i=r,this.remoteDocumentCache.getEntry(t,e)))).next((r=>(i!==null&&Xc(i.mutation,r,qn.empty(),fe.now()),r)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((i=>this.getLocalViewOfDocuments(t,i,Ft()).next((()=>i))))}getLocalViewOfDocuments(t,e,i=Ft()){const r=Va();return this.populateOverlays(t,r,e).next((()=>this.computeViews(t,e,r,i).next((o=>{let c=Pc();return o.forEach(((u,f)=>{c=c.insert(u,f.overlayedDocument)})),c}))))}getOverlayedDocuments(t,e){const i=Va();return this.populateOverlays(t,i,e).next((()=>this.computeViews(t,e,i,Ft())))}populateOverlays(t,e,i){const r=[];return i.forEach((o=>{e.has(o)||r.push(o)})),this.documentOverlayCache.getOverlays(t,r).next((o=>{o.forEach(((c,u)=>{e.set(c,u)}))}))}computeViews(t,e,i,r){let o=zs();const c=Wc(),u=(function(){return Wc()})();return e.forEach(((f,d)=>{const p=i.get(d.key);r.has(d.key)&&(p===void 0||p.mutation instanceof Xr)?o=o.insert(d.key,d):p!==void 0?(c.set(d.key,p.mutation.getFieldMask()),Xc(p.mutation,d,p.mutation.getFieldMask(),fe.now())):c.set(d.key,qn.empty())})),this.recalculateAndSaveOverlays(t,o).next((f=>(f.forEach(((d,p)=>c.set(d,p))),e.forEach(((d,p)=>u.set(d,new rN(p,c.get(d)??null)))),u)))}recalculateAndSaveOverlays(t,e){const i=Wc();let r=new be(((c,u)=>c-u)),o=Ft();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((c=>{for(const u of c)u.keys().forEach((f=>{const d=e.get(f);if(d===null)return;let p=i.get(f)||qn.empty();p=u.applyToLocalView(d,p),i.set(f,p);const _=(r.get(u.batchId)||Ft()).add(f);r=r.insert(u.batchId,_)}))})).next((()=>{const c=[],u=r.getReverseIterator();for(;u.hasNext();){const f=u.getNext(),d=f.key,p=f.value,_=PA();p.forEach((b=>{if(!o.has(b)){const x=BA(e.get(b),i.get(b));x!==null&&_.set(b,x),o=o.add(b)}})),c.push(this.documentOverlayCache.saveOverlays(t,d,_))}return rt.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((i=>this.recalculateAndSaveOverlays(t,i)))}getDocumentsMatchingQuery(t,e,i,r){return(function(c){return bt.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):DA(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,r):this.getDocumentsMatchingCollectionQuery(t,e,i,r)}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next((o=>{const c=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-o.size):rt.resolve(Va());let u=su,f=o;return c.next((d=>rt.forEach(d,((p,_)=>(u<_.largestBatchId&&(u=_.largestBatchId),o.get(p)?rt.resolve():this.remoteDocumentCache.getEntry(t,p).next((b=>{f=f.insert(p,b)}))))).next((()=>this.populateOverlays(t,d,o))).next((()=>this.computeViews(t,f,d,Ft()))).next((p=>({batchId:u,changes:kA(p)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new bt(e)).next((i=>{let r=Pc();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r}))}getDocumentsMatchingCollectionGroupQuery(t,e,i,r){const o=e.collectionGroup;let c=Pc();return this.indexManager.getCollectionParents(t,o).next((u=>rt.forEach(u,(f=>{const d=(function(_,b){return new Au(b,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(e,f.child(o));return this.getDocumentsMatchingCollectionQuery(t,d,i,r).next((p=>{p.forEach(((_,b)=>{c=c.insert(_,b)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(t,e,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next((c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,o,r)))).next((c=>{o.forEach(((f,d)=>{const p=d.getKey();c.get(p)===null&&(c=c.insert(p,gn.newInvalidDocument(p)))}));let u=Pc();return c.forEach(((f,d)=>{const p=o.get(f);p!==void 0&&Xc(p.mutation,d,qn.empty(),fe.now()),Nd(e,d)&&(u=u.insert(f,d))})),u}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,e){return rt.resolve(this.Lr.get(e))}saveBundleMetadata(t,e){return this.Lr.set(e.id,(function(r){return{id:r.id,version:r.version,createTime:ts(r.createTime)}})(e)),rt.resolve()}getNamedQuery(t,e){return rt.resolve(this.kr.get(e))}saveNamedQuery(t,e){return this.kr.set(e.name,(function(r){return{name:r.name,query:QO(r.bundledQuery),readTime:ts(r.readTime)}})(e)),rt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(){this.overlays=new be(bt.comparator),this.qr=new Map}getOverlay(t,e){return rt.resolve(this.overlays.get(e))}getOverlays(t,e){const i=Va();return rt.forEach(e,(r=>this.getOverlay(t,r).next((o=>{o!==null&&i.set(r,o)})))).next((()=>i))}saveOverlays(t,e,i){return i.forEach(((r,o)=>{this.St(t,e,o)})),rt.resolve()}removeOverlaysForBatchId(t,e,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(i)),rt.resolve()}getOverlaysForCollection(t,e,i){const r=Va(),o=e.length+1,c=new bt(e.child("")),u=this.overlays.getIteratorFrom(c);for(;u.hasNext();){const f=u.getNext().value,d=f.getKey();if(!e.isPrefixOf(d.path))break;d.path.length===o&&f.largestBatchId>i&&r.set(f.getKey(),f)}return rt.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let o=new be(((d,p)=>d-p));const c=this.overlays.getIterator();for(;c.hasNext();){const d=c.getNext().value;if(d.getKey().getCollectionGroup()===e&&d.largestBatchId>i){let p=o.get(d.largestBatchId);p===null&&(p=Va(),o=o.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const u=Va(),f=o.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((d,p)=>u.set(d,p))),!(u.size()>=r)););return rt.resolve(u)}St(t,e,i){const r=this.overlays.get(i.key);if(r!==null){const c=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new wO(e,i));let o=this.qr.get(e);o===void 0&&(o=Ft(),this.qr.set(e,o)),this.qr.set(e,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(){this.sessionToken=ln.EMPTY_BYTE_STRING}getSessionToken(t){return rt.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,rt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(){this.Qr=new Ke($e.$r),this.Ur=new Ke($e.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,e){const i=new $e(t,e);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(t,e){t.forEach((i=>this.addReference(i,e)))}removeReference(t,e){this.Gr(new $e(t,e))}zr(t,e){t.forEach((i=>this.removeReference(i,e)))}jr(t){const e=new bt(new ce([])),i=new $e(e,t),r=new $e(e,t+1),o=[];return this.Ur.forEachInRange([i,r],(c=>{this.Gr(c),o.push(c.key)})),o}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const e=new bt(new ce([])),i=new $e(e,t),r=new $e(e,t+1);let o=Ft();return this.Ur.forEachInRange([i,r],(c=>{o=o.add(c.key)})),o}containsKey(t){const e=new $e(t,0),i=this.Qr.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}}class $e{constructor(t,e){this.key=t,this.Yr=e}static $r(t,e){return bt.comparator(t.key,e.key)||Bt(t.Yr,e.Yr)}static Kr(t,e){return Bt(t.Yr,e.Yr)||bt.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.tr=1,this.Zr=new Ke($e.$r)}checkEmpty(t){return rt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,r){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new AO(o,e,i,r);this.mutationQueue.push(c);for(const u of r)this.Zr=this.Zr.add(new $e(u.key,o)),this.indexManager.addToCollectionParentIndex(t,u.key.path.popLast());return rt.resolve(c)}lookupMutationBatch(t,e){return rt.resolve(this.Xr(e))}getNextMutationBatchAfterBatchId(t,e){const i=e+1,r=this.ei(i),o=r<0?0:r;return rt.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return rt.resolve(this.mutationQueue.length===0?Uy:this.tr-1)}getAllMutationBatches(t){return rt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new $e(e,0),r=new $e(e,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,r],(c=>{const u=this.Xr(c.Yr);o.push(u)})),rt.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Ke(Bt);return e.forEach((r=>{const o=new $e(r,0),c=new $e(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,c],(u=>{i=i.add(u.Yr)}))})),rt.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1;let o=i;bt.isDocumentKey(o)||(o=o.child(""));const c=new $e(new bt(o),0);let u=new Ke(Bt);return this.Zr.forEachWhile((f=>{const d=f.key.path;return!!i.isPrefixOf(d)&&(d.length===r&&(u=u.add(f.Yr)),!0)}),c),rt.resolve(this.ti(u))}ti(t){const e=[];return t.forEach((i=>{const r=this.Xr(i);r!==null&&e.push(r)})),e}removeMutationBatch(t,e){Jt(this.ni(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return rt.forEach(e.mutations,(r=>{const o=new $e(r.key,e.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)})).next((()=>{this.Zr=i}))}ir(t){}containsKey(t,e){const i=new $e(e,0),r=this.Zr.firstAfterOrEqual(i);return rt.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,rt.resolve()}ni(t,e){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const e=this.ei(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(t){this.ri=t,this.docs=(function(){return new be(bt.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,r=this.docs.get(i),o=r?r.size:0,c=this.ri(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return rt.resolve(i?i.document.mutableCopy():gn.newInvalidDocument(e))}getEntries(t,e){let i=zs();return e.forEach((r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():gn.newInvalidDocument(r))})),rt.resolve(i)}getDocumentsMatchingQuery(t,e,i,r){let o=zs();const c=e.path,u=new bt(c.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(u);for(;f.hasNext();){const{key:d,value:{document:p}}=f.getNext();if(!c.isPrefixOf(d.path))break;d.path.length>c.length+1||UM(jM(p),i)<=0||(r.has(p.key)||Nd(e,p))&&(o=o.insert(p.key,p.mutableCopy()))}return rt.resolve(o)}getAllFromCollectionGroup(t,e,i,r){wt(9500)}ii(t,e){return rt.forEach(this.docs,(i=>e(i)))}newChangeBuffer(t){return new fN(this)}getSize(t){return rt.resolve(this.size)}}class fN extends sN{constructor(t){super(),this.Nr=t}applyChanges(t){const e=[];return this.changes.forEach(((i,r)=>{r.isValidDocument()?e.push(this.Nr.addEntry(t,r)):this.Nr.removeEntry(i)})),rt.waitFor(e)}getFromCache(t,e){return this.Nr.getEntry(t,e)}getAllFromCache(t,e){return this.Nr.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(t){this.persistence=t,this.si=new $a((e=>Hy(e)),qy),this.lastRemoteSnapshotVersion=Ct.min(),this.highestTargetId=0,this.oi=0,this._i=new Qy,this.targetCount=0,this.ai=ll.ur()}forEachTarget(t,e){return this.si.forEach(((i,r)=>e(r))),rt.resolve()}getLastRemoteSnapshotVersion(t){return rt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return rt.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),rt.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.oi&&(this.oi=e),rt.resolve()}Pr(t){this.si.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ai=new ll(e),this.highestTargetId=e),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,e){return this.Pr(e),this.targetCount+=1,rt.resolve()}updateTargetData(t,e){return this.Pr(e),rt.resolve()}removeTargetData(t,e){return this.si.delete(e.target),this._i.jr(e.targetId),this.targetCount-=1,rt.resolve()}removeTargets(t,e,i){let r=0;const o=[];return this.si.forEach(((c,u)=>{u.sequenceNumber<=e&&i.get(u.targetId)===null&&(this.si.delete(c),o.push(this.removeMatchingKeysForTargetId(t,u.targetId)),r++)})),rt.waitFor(o).next((()=>r))}getTargetCount(t){return rt.resolve(this.targetCount)}getTargetData(t,e){const i=this.si.get(e)||null;return rt.resolve(i)}addMatchingKeys(t,e,i){return this._i.Wr(e,i),rt.resolve()}removeMatchingKeys(t,e,i){this._i.zr(e,i);const r=this.persistence.referenceDelegate,o=[];return r&&e.forEach((c=>{o.push(r.markPotentiallyOrphaned(t,c))})),rt.waitFor(o)}removeMatchingKeysForTargetId(t,e){return this._i.jr(e),rt.resolve()}getMatchingKeysForTargetId(t,e){const i=this._i.Hr(e);return rt.resolve(i)}containsKey(t,e){return rt.resolve(this._i.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(t,e){this.ui={},this.overlays={},this.ci=new Id(0),this.li=!1,this.li=!0,this.hi=new cN,this.referenceDelegate=t(this),this.Pi=new dN(this),this.indexManager=new $O,this.remoteDocumentCache=(function(r){return new hN(r)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new XO(e),this.Ii=new oN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new lN,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.ui[t.toKey()];return i||(i=new uN(e,this.referenceDelegate),this.ui[t.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,e,i){dt("MemoryPersistence","Starting transaction:",t);const r=new gN(this.ci.next());return this.referenceDelegate.Ei(),i(r).next((o=>this.referenceDelegate.di(r).next((()=>o)))).toPromise().then((o=>(r.raiseOnCommittedEvent(),o)))}Ai(t,e){return rt.or(Object.values(this.ui).map((i=>()=>i.containsKey(t,e))))}}class gN extends FM{constructor(t){super(),this.currentSequenceNumber=t}}class $y{constructor(t){this.persistence=t,this.Ri=new Qy,this.Vi=null}static mi(t){return new $y(t)}get fi(){if(this.Vi)return this.Vi;throw wt(60996)}addReference(t,e,i){return this.Ri.addReference(i,e),this.fi.delete(i.toString()),rt.resolve()}removeReference(t,e,i){return this.Ri.removeReference(i,e),this.fi.add(i.toString()),rt.resolve()}markPotentiallyOrphaned(t,e){return this.fi.add(e.toString()),rt.resolve()}removeTarget(t,e){this.Ri.jr(e.targetId).forEach((r=>this.fi.add(r.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next((r=>{r.forEach((o=>this.fi.add(o.toString())))})).next((()=>i.removeTargetData(t,e)))}Ei(){this.Vi=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return rt.forEach(this.fi,(i=>{const r=bt.fromPath(i);return this.gi(t,r).next((o=>{o||e.removeEntry(r,Ct.min())}))})).next((()=>(this.Vi=null,e.apply(t))))}updateLimboDocument(t,e){return this.gi(t,e).next((i=>{i?this.fi.delete(e.toString()):this.fi.add(e.toString())}))}Ti(t){return 0}gi(t,e){return rt.or([()=>rt.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ai(t,e)])}}class hd{constructor(t,e){this.persistence=t,this.pi=new $a((i=>GM(i.path)),((i,r)=>i.isEqual(r))),this.garbageCollector=iN(this,e)}static mi(t,e){return new hd(t,e)}Ei(){}di(t){return rt.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}gr(t){const e=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((i=>e.next((r=>i+r))))}wr(t){let e=0;return this.pr(t,(i=>{e++})).next((()=>e))}pr(t,e){return rt.forEach(this.pi,((i,r)=>this.br(t,i,r).next((o=>o?rt.resolve():e(r)))))}removeTargets(t,e,i){return this.persistence.getTargetCache().removeTargets(t,e,i)}removeOrphanedDocuments(t,e){let i=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ii(t,(c=>this.br(t,c,e).next((u=>{u||(i++,o.removeEntry(c,Ct.min()))})))).next((()=>o.apply(t))).next((()=>i))}markPotentiallyOrphaned(t,e){return this.pi.set(e,t.currentSequenceNumber),rt.resolve()}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,e,i){return this.pi.set(i,t.currentSequenceNumber),rt.resolve()}removeReference(t,e,i){return this.pi.set(i,t.currentSequenceNumber),rt.resolve()}updateLimboDocument(t,e){return this.pi.set(e,t.currentSequenceNumber),rt.resolve()}Ti(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=Pf(t.data.value)),e}br(t,e,i){return rt.or([()=>this.persistence.Ai(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const r=this.pi.get(e);return rt.resolve(r!==void 0&&r>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.Es=i,this.ds=r}static As(t,e){let i=Ft(),r=Ft();for(const o of e.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new Jy(t,e.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return GR()?8:HM(pn())>0?6:4})()}initialize(t,e){this.ps=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,i,r){const o={result:null};return this.ys(t,e).next((c=>{o.result=c})).next((()=>{if(!o.result)return this.ws(t,e,r,i).next((c=>{o.result=c}))})).next((()=>{if(o.result)return;const c=new mN;return this.Ss(t,e,c).next((u=>{if(o.result=u,this.Vs)return this.bs(t,e,c,u.size)}))})).next((()=>o.result))}bs(t,e,i,r){return i.documentReadCount<this.fs?(Wo()<=Ut.DEBUG&&dt("QueryEngine","SDK will not create cache indexes for query:",Xo(e),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),rt.resolve()):(Wo()<=Ut.DEBUG&&dt("QueryEngine","Query:",Xo(e),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(Wo()<=Ut.DEBUG&&dt("QueryEngine","The SDK decides to create cache indexes for query:",Xo(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Zi(e))):rt.resolve())}ys(t,e){if(oE(e))return rt.resolve(null);let i=Zi(e);return this.indexManager.getIndexType(t,i).next((r=>r===0?null:(e.limit!==null&&r===1&&(e=Wp(e,null,"F"),i=Zi(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next((o=>{const c=Ft(...o);return this.ps.getDocuments(t,c).next((u=>this.indexManager.getMinOffset(t,i).next((f=>{const d=this.Ds(e,u);return this.Cs(e,d,c,f.readTime)?this.ys(t,Wp(e,null,"F")):this.vs(t,d,e,f)}))))})))))}ws(t,e,i,r){return oE(e)||r.isEqual(Ct.min())?rt.resolve(null):this.ps.getDocuments(t,i).next((o=>{const c=this.Ds(e,o);return this.Cs(e,c,i,r)?rt.resolve(null):(Wo()<=Ut.DEBUG&&dt("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Xo(e)),this.vs(t,c,e,zM(r,su)).next((u=>u)))}))}Ds(t,e){let i=new Ke(OA(t));return e.forEach(((r,o)=>{Nd(t,o)&&(i=i.add(o))})),i}Cs(t,e,i,r){if(t.limit===null)return!1;if(i.size!==e.size)return!0;const o=t.limitType==="F"?e.last():e.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ss(t,e,i){return Wo()<=Ut.DEBUG&&dt("QueryEngine","Using full collection scan to execute query:",Xo(e)),this.ps.getDocumentsMatchingQuery(t,e,Vr.min(),i)}vs(t,e,i,r){return this.ps.getDocumentsMatchingQuery(t,i,r).next((o=>(e.forEach((c=>{o=o.insert(c.key,c)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy="LocalStore",yN=3e8;class _N{constructor(t,e,i,r){this.persistence=t,this.Fs=e,this.serializer=r,this.Ms=new be(Bt),this.xs=new $a((o=>Hy(o)),qy),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(i)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new aN(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.Ms)))}}function bN(n,t,e,i){return new _N(n,t,e,i)}async function e1(n,t){const e=Dt(n);return await e.persistence.runTransaction("Handle user change","readonly",(i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next((o=>(r=o,e.Bs(t),e.mutationQueue.getAllMutationBatches(i)))).next((o=>{const c=[],u=[];let f=Ft();for(const d of r){c.push(d.batchId);for(const p of d.mutations)f=f.add(p.key)}for(const d of o){u.push(d.batchId);for(const p of d.mutations)f=f.add(p.key)}return e.localDocuments.getDocuments(i,f).next((d=>({Ls:d,removedBatchIds:c,addedBatchIds:u})))}))}))}function vN(n,t){const e=Dt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const r=t.batch.keys(),o=e.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,f,d,p){const _=d.batch,b=_.keys();let x=rt.resolve();return b.forEach((w=>{x=x.next((()=>p.getEntry(f,w))).next((S=>{const D=d.docVersions.get(w);Jt(D!==null,48541),S.version.compareTo(D)<0&&(_.applyToRemoteDocument(S,d),S.isValidDocument()&&(S.setReadTime(d.commitVersion),p.addEntry(S)))}))})),x.next((()=>u.mutationQueue.removeMutationBatch(f,_)))})(e,i,t,o).next((()=>o.apply(i))).next((()=>e.mutationQueue.performConsistencyCheck(i))).next((()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId))).next((()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(u){let f=Ft();for(let d=0;d<u.mutationResults.length;++d)u.mutationResults[d].transformResults.length>0&&(f=f.add(u.batch.mutations[d].key));return f})(t)))).next((()=>e.localDocuments.getDocuments(i,r)))}))}function n1(n){const t=Dt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Pi.getLastRemoteSnapshotVersion(e)))}function TN(n,t){const e=Dt(n),i=t.snapshotVersion;let r=e.Ms;return e.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const c=e.Ns.newChangeBuffer({trackRemovals:!0});r=e.Ms;const u=[];t.targetChanges.forEach(((p,_)=>{const b=r.get(_);if(!b)return;u.push(e.Pi.removeMatchingKeys(o,p.removedDocuments,_).next((()=>e.Pi.addMatchingKeys(o,p.addedDocuments,_))));let x=b.withSequenceNumber(o.currentSequenceNumber);t.targetMismatches.get(_)!==null?x=x.withResumeToken(ln.EMPTY_BYTE_STRING,Ct.min()).withLastLimboFreeSnapshotVersion(Ct.min()):p.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(p.resumeToken,i)),r=r.insert(_,x),(function(S,D,L){return S.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=yN?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0})(b,x,p)&&u.push(e.Pi.updateTargetData(o,x))}));let f=zs(),d=Ft();if(t.documentUpdates.forEach((p=>{t.resolvedLimboDocuments.has(p)&&u.push(e.persistence.referenceDelegate.updateLimboDocument(o,p))})),u.push(EN(o,c,t.documentUpdates).next((p=>{f=p.ks,d=p.qs}))),!i.isEqual(Ct.min())){const p=e.Pi.getLastRemoteSnapshotVersion(o).next((_=>e.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i)));u.push(p)}return rt.waitFor(u).next((()=>c.apply(o))).next((()=>e.localDocuments.getLocalViewOfDocuments(o,f,d))).next((()=>f))})).then((o=>(e.Ms=r,o)))}function EN(n,t,e){let i=Ft(),r=Ft();return e.forEach((o=>i=i.add(o))),t.getEntries(n,i).next((o=>{let c=zs();return e.forEach(((u,f)=>{const d=o.get(u);f.isFoundDocument()!==d.isFoundDocument()&&(r=r.add(u)),f.isNoDocument()&&f.version.isEqual(Ct.min())?(t.removeEntry(u,f.readTime),c=c.insert(u,f)):!d.isValidDocument()||f.version.compareTo(d.version)>0||f.version.compareTo(d.version)===0&&d.hasPendingWrites?(t.addEntry(f),c=c.insert(u,f)):dt(Zy,"Ignoring outdated watch update for ",u,". Current version:",d.version," Watch version:",f.version)})),{ks:c,qs:r}}))}function xN(n,t){const e=Dt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",(i=>(t===void 0&&(t=Uy),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t))))}function SN(n,t){const e=Dt(n);return e.persistence.runTransaction("Allocate target","readwrite",(i=>{let r;return e.Pi.getTargetData(i,t).next((o=>o?(r=o,rt.resolve(r)):e.Pi.allocateTargetId(i).next((c=>(r=new xr(t,c,"TargetPurposeListen",i.currentSequenceNumber),e.Pi.addTargetData(i,r).next((()=>r)))))))})).then((i=>{const r=e.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.Ms=e.Ms.insert(i.targetId,i),e.xs.set(t,i.targetId)),i}))}async function Zp(n,t,e){const i=Dt(n),r=i.Ms.get(t),o=e?"readwrite":"readwrite-primary";try{e||await i.persistence.runTransaction("Release target",o,(c=>i.persistence.referenceDelegate.removeTarget(c,r)))}catch(c){if(!_l(c))throw c;dt(Zy,`Failed to update sequence numbers for target ${t}: ${c}`)}i.Ms=i.Ms.remove(t),i.xs.delete(r.target)}function vE(n,t,e){const i=Dt(n);let r=Ct.min(),o=Ft();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(f,d,p){const _=Dt(f),b=_.xs.get(p);return b!==void 0?rt.resolve(_.Ms.get(b)):_.Pi.getTargetData(d,p)})(i,c,Zi(t)).next((u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(c,u.targetId).next((f=>{o=f}))})).next((()=>i.Fs.getDocumentsMatchingQuery(c,t,e?r:Ct.min(),e?o:Ft()))).next((u=>(AN(i,uO(t),u),{documents:u,Qs:o})))))}function AN(n,t,e){let i=n.Os.get(t)||Ct.min();e.forEach(((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)})),n.Os.set(t,i)}class TE{constructor(){this.activeTargetIds=pO()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class wN{constructor(){this.Mo=new TE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t,e=!0){return e&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,e,i){this.xo[t]=e}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new TE,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="ConnectivityMonitor";class xE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){dt(EE,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){dt(EE,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gf=null;function ty(){return gf===null?gf=(function(){return 268435456+Math.round(2147483648*Math.random())})():gf++,"0x"+gf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dp="RestConnection",RN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class IN{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=e+"://"+t.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===sd?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(t,e,i,r,o){const c=ty(),u=this.zo(t,e.toUriEncodedString());dt(dp,`Sending RPC '${t}' ${c}:`,u,i);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,r,o);const{host:d}=new URL(u),p=dl(d);return this.Jo(t,u,f,i,p).then((_=>(dt(dp,`Received RPC '${t}' ${c}: `,_),_)),(_=>{throw sl(dp,`RPC '${t}' ${c} failed with error: `,_,"url: ",u,"request:",i),_}))}Ho(t,e,i,r,o,c){return this.Go(t,e,i,r,o)}jo(t,e,i){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+pl})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((r,o)=>t[o]=r)),i&&i.headers.forEach(((r,o)=>t[o]=r))}zo(t,e){const i=RN[t];return`${this.Uo}/v1/${e}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un="WebChannelConnection";class MN extends IN{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,i,r,o){const c=ty();return new Promise(((u,f)=>{const d=new rA;d.setWithCredentials(!0),d.listenOnce(aA.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case kf.NO_ERROR:const _=d.getResponseJson();dt(un,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(_)),u(_);break;case kf.TIMEOUT:dt(un,`RPC '${t}' ${c} timed out`),f(new ft(st.DEADLINE_EXCEEDED,"Request time out"));break;case kf.HTTP_ERROR:const b=d.getStatus();if(dt(un,`RPC '${t}' ${c} failed with status:`,b,"response text:",d.getResponseText()),b>0){let x=d.getResponseJson();Array.isArray(x)&&(x=x[0]);const w=x==null?void 0:x.error;if(w&&w.status&&w.message){const S=(function(L){const F=L.toLowerCase().replace(/_/g,"-");return Object.values(st).indexOf(F)>=0?F:st.UNKNOWN})(w.status);f(new ft(S,w.message))}else f(new ft(st.UNKNOWN,"Server responded with status "+d.getStatus()))}else f(new ft(st.UNAVAILABLE,"Connection failed."));break;default:wt(9055,{l_:t,streamId:c,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{dt(un,`RPC '${t}' ${c} completed.`)}}));const p=JSON.stringify(r);dt(un,`RPC '${t}' ${c} sending request:`,r),d.send(e,"POST",p,i,15)}))}T_(t,e,i){const r=ty(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=cA(),u=lA(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(f.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,e,i),f.encodeInitMessageHeaders=!0;const p=o.join("");dt(un,`Creating RPC '${t}' stream ${r}: ${p}`,f);const _=c.createWebChannel(p,f);this.I_(_);let b=!1,x=!1;const w=new DN({Yo:D=>{x?dt(un,`Not sending because RPC '${t}' stream ${r} is closed:`,D):(b||(dt(un,`Opening RPC '${t}' stream ${r} transport.`),_.open(),b=!0),dt(un,`RPC '${t}' stream ${r} sending:`,D),_.send(D))},Zo:()=>_.close()}),S=(D,L,F)=>{D.listen(L,(W=>{try{F(W)}catch(J){setTimeout((()=>{throw J}),0)}}))};return S(_,kc.EventType.OPEN,(()=>{x||(dt(un,`RPC '${t}' stream ${r} transport opened.`),w.o_())})),S(_,kc.EventType.CLOSE,(()=>{x||(x=!0,dt(un,`RPC '${t}' stream ${r} transport closed`),w.a_(),this.E_(_))})),S(_,kc.EventType.ERROR,(D=>{x||(x=!0,sl(un,`RPC '${t}' stream ${r} transport errored. Name:`,D.name,"Message:",D.message),w.a_(new ft(st.UNAVAILABLE,"The operation could not be completed")))})),S(_,kc.EventType.MESSAGE,(D=>{var L;if(!x){const F=D.data[0];Jt(!!F,16349);const W=F,J=(W==null?void 0:W.error)||((L=W[0])==null?void 0:L.error);if(J){dt(un,`RPC '${t}' stream ${r} received error:`,J);const $=J.status;let nt=(function(O){const P=ze[O];if(P!==void 0)return HA(P)})($),M=J.message;nt===void 0&&(nt=st.INTERNAL,M="Unknown error status: "+$+" with message "+J.message),x=!0,w.a_(new ft(nt,M)),_.close()}else dt(un,`RPC '${t}' stream ${r} received:`,F),w.u_(F)}})),S(u,oA.STAT_EVENT,(D=>{D.stat===Bp.PROXY?dt(un,`RPC '${t}' stream ${r} detected buffering proxy`):D.stat===Bp.NOPROXY&&dt(un,`RPC '${t}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{w.__()}),0),w}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((e=>e===t))}}function gp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zd(n){return new PO(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(t,e,i=1e3,r=1.5,o=6e4){this.Mi=t,this.timerId=e,this.d_=i,this.A_=r,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const e=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,e-i);r>0&&dt("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE="PersistentStream";class s1{constructor(t,e,i,r,o,c,u,f){this.Mi=t,this.S_=i,this.b_=r,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=u,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new i1(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===st.RESOURCE_EXHAUSTED?(Ls(e.toString()),Ls("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===st.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(e)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,r])=>{this.D_===e&&this.G_(i,r)}),(i=>{t((()=>{const r=new ft(st.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)}))}))}G_(t,e){const i=this.W_(this.D_);this.stream=this.j_(t,e),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{i((()=>this.z_(r)))})),this.stream.onMessage((r=>{i((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return dt(SE,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return e=>{this.Mi.enqueueAndForget((()=>this.D_===t?e():(dt(SE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class ON extends s1{constructor(t,e,i,r,o,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,c),this.serializer=o}j_(t,e){return this.connection.T_("Listen",t,e)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=zO(this.serializer,t),i=(function(o){if(!("targetChange"in o))return Ct.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?Ct.min():c.readTime?ts(c.readTime):Ct.min()})(t);return this.listener.H_(e,i)}Y_(t){const e={};e.database=Jp(this.serializer),e.addTarget=(function(o,c){let u;const f=c.target;if(u=Yp(f)?{documents:BO(o,f)}:{query:FO(o,f).ft},u.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){u.resumeToken=YA(o,c.resumeToken);const d=Xp(o,c.expectedCount);d!==null&&(u.expectedCount=d)}else if(c.snapshotVersion.compareTo(Ct.min())>0){u.readTime=ud(o,c.snapshotVersion.toTimestamp());const d=Xp(o,c.expectedCount);d!==null&&(u.expectedCount=d)}return u})(this.serializer,t);const i=qO(this.serializer,t);i&&(e.labels=i),this.q_(e)}Z_(t){const e={};e.database=Jp(this.serializer),e.removeTarget=t,this.q_(e)}}class NN extends s1{constructor(t,e,i,r,o,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,c),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}J_(t){return Jt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Jt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Jt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=UO(t.writeResults,t.commitTime),i=ts(t.commitTime);return this.listener.na(i,e)}ra(){const t={};t.database=Jp(this.serializer),this.q_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map((i=>jO(this.serializer,i)))};this.q_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{}class PN extends kN{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new ft(st.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,e,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Go(t,Qp(e,i),r,o,c))).catch((o=>{throw o.name==="FirebaseError"?(o.code===st.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ft(st.UNKNOWN,o.toString())}))}Ho(t,e,i,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,u])=>this.connection.Ho(t,Qp(e,i),r,c,u,o))).catch((c=>{throw c.name==="FirebaseError"?(c.code===st.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ft(st.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class VN{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ls(e),this.aa=!1):dt("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka="RemoteStore";class LN{constructor(t,e,i,r,o){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((c=>{i.enqueueAndForget((async()=>{Ja(this)&&(dt(Ka,"Restarting streams for network reachability change."),await(async function(f){const d=Dt(f);d.Ea.add(4),await Ru(d),d.Ra.set("Unknown"),d.Ea.delete(4),await jd(d)})(this))}))})),this.Ra=new VN(i,r)}}async function jd(n){if(Ja(n))for(const t of n.da)await t(!0)}async function Ru(n){for(const t of n.da)await t(!1)}function r1(n,t){const e=Dt(n);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),i_(e)?n_(e):bl(e).O_()&&e_(e,t))}function t_(n,t){const e=Dt(n),i=bl(e);e.Ia.delete(t),i.O_()&&a1(e,t),e.Ia.size===0&&(i.O_()?i.L_():Ja(e)&&e.Ra.set("Unknown"))}function e_(n,t){if(n.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ct.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}bl(n).Y_(t)}function a1(n,t){n.Va.Ue(t),bl(n).Z_(t)}function n_(n){n.Va=new MO({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),At:t=>n.Ia.get(t)||null,ht:()=>n.datastore.serializer.databaseId}),bl(n).start(),n.Ra.ua()}function i_(n){return Ja(n)&&!bl(n).x_()&&n.Ia.size>0}function Ja(n){return Dt(n).Ea.size===0}function o1(n){n.Va=void 0}async function zN(n){n.Ra.set("Online")}async function jN(n){n.Ia.forEach(((t,e)=>{e_(n,t)}))}async function UN(n,t){o1(n),i_(n)?(n.Ra.ha(t),n_(n)):n.Ra.set("Unknown")}async function BN(n,t,e){if(n.Ra.set("Online"),t instanceof GA&&t.state===2&&t.cause)try{await(async function(r,o){const c=o.cause;for(const u of o.targetIds)r.Ia.has(u)&&(await r.remoteSyncer.rejectListen(u,c),r.Ia.delete(u),r.Va.removeTarget(u))})(n,t)}catch(i){dt(Ka,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await fd(n,i)}else if(t instanceof zf?n.Va.Ze(t):t instanceof qA?n.Va.st(t):n.Va.tt(t),!e.isEqual(Ct.min()))try{const i=await n1(n.localStore);e.compareTo(i)>=0&&await(function(o,c){const u=o.Va.Tt(c);return u.targetChanges.forEach(((f,d)=>{if(f.resumeToken.approximateByteSize()>0){const p=o.Ia.get(d);p&&o.Ia.set(d,p.withResumeToken(f.resumeToken,c))}})),u.targetMismatches.forEach(((f,d)=>{const p=o.Ia.get(f);if(!p)return;o.Ia.set(f,p.withResumeToken(ln.EMPTY_BYTE_STRING,p.snapshotVersion)),a1(o,f);const _=new xr(p.target,f,d,p.sequenceNumber);e_(o,_)})),o.remoteSyncer.applyRemoteEvent(u)})(n,e)}catch(i){dt(Ka,"Failed to raise snapshot:",i),await fd(n,i)}}async function fd(n,t,e){if(!_l(t))throw t;n.Ea.add(1),await Ru(n),n.Ra.set("Offline"),e||(e=()=>n1(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{dt(Ka,"Retrying IndexedDB access"),await e(),n.Ea.delete(1),await jd(n)}))}function l1(n,t){return t().catch((e=>fd(n,e,t)))}async function Ud(n){const t=Dt(n),e=Ur(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Uy;for(;FN(t);)try{const r=await xN(t.localStore,i);if(r===null){t.Ta.length===0&&e.L_();break}i=r.batchId,HN(t,r)}catch(r){await fd(t,r)}c1(t)&&u1(t)}function FN(n){return Ja(n)&&n.Ta.length<10}function HN(n,t){n.Ta.push(t);const e=Ur(n);e.O_()&&e.X_&&e.ea(t.mutations)}function c1(n){return Ja(n)&&!Ur(n).x_()&&n.Ta.length>0}function u1(n){Ur(n).start()}async function qN(n){Ur(n).ra()}async function GN(n){const t=Ur(n);for(const e of n.Ta)t.ea(e.mutations)}async function YN(n,t,e){const i=n.Ta.shift(),r=Ky.from(i,t,e);await l1(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await Ud(n)}async function KN(n,t){t&&Ur(n).X_&&await(async function(i,r){if((function(c){return RO(c)&&c!==st.ABORTED})(r.code)){const o=i.Ta.shift();Ur(i).B_(),await l1(i,(()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r))),await Ud(i)}})(n,t),c1(n)&&u1(n)}async function AE(n,t){const e=Dt(n);e.asyncQueue.verifyOperationInProgress(),dt(Ka,"RemoteStore received new credentials");const i=Ja(e);e.Ea.add(3),await Ru(e),i&&e.Ra.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await jd(e)}async function WN(n,t){const e=Dt(n);t?(e.Ea.delete(2),await jd(e)):t||(e.Ea.add(2),await Ru(e),e.Ra.set("Unknown"))}function bl(n){return n.ma||(n.ma=(function(e,i,r){const o=Dt(e);return o.sa(),new ON(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(n.datastore,n.asyncQueue,{Xo:zN.bind(null,n),t_:jN.bind(null,n),r_:UN.bind(null,n),H_:BN.bind(null,n)}),n.da.push((async t=>{t?(n.ma.B_(),i_(n)?n_(n):n.Ra.set("Unknown")):(await n.ma.stop(),o1(n))}))),n.ma}function Ur(n){return n.fa||(n.fa=(function(e,i,r){const o=Dt(e);return o.sa(),new NN(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:qN.bind(null,n),r_:KN.bind(null,n),ta:GN.bind(null,n),na:YN.bind(null,n)}),n.da.push((async t=>{t?(n.fa.B_(),await Ud(n)):(await n.fa.stop(),n.Ta.length>0&&(dt(Ka,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{constructor(t,e,i,r,o){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new Nr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,r,o){const c=Date.now()+i,u=new s_(t,e,c,r,o);return u.start(i),u}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ft(st.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function r_(n,t){if(Ls("AsyncQueue",`${t}: ${n}`),_l(n))return new ft(st.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{static emptySet(t){return new el(t.comparator)}constructor(t){this.comparator=t?(e,i)=>t(e,i)||bt.comparator(e.key,i.key):(e,i)=>bt.comparator(e.key,i.key),this.keyedMap=Pc(),this.sortedSet=new be(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,i)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof el)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const i=new el;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(){this.ga=new be(bt.comparator)}track(t){const e=t.doc.key,i=this.ga.get(e);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(e,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(e):t.type===1&&i.type===2?this.ga=this.ga.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):wt(63341,{Rt:t,pa:i}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal(((e,i)=>{t.push(i)})),t}}class cl{constructor(t,e,i,r,o,c,u,f,d){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=u,this.excludesMetadataChanges=f,this.hasCachedResults=d}static fromInitialDocuments(t,e,i,r,o){const c=[];return e.forEach((u=>{c.push({type:0,doc:u})})),new cl(t,e,el.emptySet(e),c,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Od(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class QN{constructor(){this.queries=CE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,i){const r=Dt(e),o=r.queries;r.queries=CE(),o.forEach(((c,u)=>{for(const f of u.Sa)f.onError(i)}))})(this,new ft(st.ABORTED,"Firestore shutting down"))}}function CE(){return new $a((n=>MA(n)),Od)}async function h1(n,t){const e=Dt(n);let i=3;const r=t.query;let o=e.queries.get(r);o?!o.ba()&&t.Da()&&(i=2):(o=new XN,i=t.Da()?0:1);try{switch(i){case 0:o.wa=await e.onListen(r,!0);break;case 1:o.wa=await e.onListen(r,!1);break;case 2:await e.onFirstRemoteStoreListen(r)}}catch(c){const u=r_(c,`Initialization of query '${Xo(t.query)}' failed`);return void t.onError(u)}e.queries.set(r,o),o.Sa.push(t),t.va(e.onlineState),o.wa&&t.Fa(o.wa)&&a_(e)}async function f1(n,t){const e=Dt(n),i=t.query;let r=3;const o=e.queries.get(i);if(o){const c=o.Sa.indexOf(t);c>=0&&(o.Sa.splice(c,1),o.Sa.length===0?r=t.Da()?0:1:!o.ba()&&t.Da()&&(r=2))}switch(r){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}}function $N(n,t){const e=Dt(n);let i=!1;for(const r of t){const o=r.query,c=e.queries.get(o);if(c){for(const u of c.Sa)u.Fa(r)&&(i=!0);c.wa=r}}i&&a_(e)}function JN(n,t,e){const i=Dt(n),r=i.queries.get(t);if(r)for(const o of r.Sa)o.onError(e);i.queries.delete(t)}function a_(n){n.Ca.forEach((t=>{t.next()}))}var ey,RE;(RE=ey||(ey={})).Ma="default",RE.Cache="cache";class d1{constructor(t,e,i){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)r.type!==3&&i.push(r);t=new cl(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;const i=e!=="Offline";return(!this.options.qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=cl.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==ey.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(t){this.key=t}}class m1{constructor(t){this.key=t}}class ZN{constructor(t,e){this.query=t,this.Ya=e,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ft(),this.mutatedKeys=Ft(),this.eu=OA(t),this.tu=new el(this.eu)}get nu(){return this.Ya}ru(t,e){const i=e?e.iu:new wE,r=e?e.tu:this.tu;let o=e?e.mutatedKeys:this.mutatedKeys,c=r,u=!1;const f=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,d=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal(((p,_)=>{const b=r.get(p),x=Nd(this.query,_)?_:null,w=!!b&&this.mutatedKeys.has(b.key),S=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let D=!1;b&&x?b.data.isEqual(x.data)?w!==S&&(i.track({type:3,doc:x}),D=!0):this.su(b,x)||(i.track({type:2,doc:x}),D=!0,(f&&this.eu(x,f)>0||d&&this.eu(x,d)<0)&&(u=!0)):!b&&x?(i.track({type:0,doc:x}),D=!0):b&&!x&&(i.track({type:1,doc:b}),D=!0,(f||d)&&(u=!0)),D&&(x?(c=c.add(x),o=S?o.add(p):o.delete(p)):(c=c.delete(p),o=o.delete(p)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const p=this.query.limitType==="F"?c.last():c.first();c=c.delete(p.key),o=o.delete(p.key),i.track({type:1,doc:p})}return{tu:c,iu:i,Cs:u,mutatedKeys:o}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,r){const o=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const c=t.iu.ya();c.sort(((p,_)=>(function(x,w){const S=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return wt(20277,{Rt:D})}};return S(x)-S(w)})(p.type,_.type)||this.eu(p.doc,_.doc))),this.ou(i),r=r??!1;const u=e&&!r?this._u():[],f=this.Xa.size===0&&this.current&&!r?1:0,d=f!==this.Za;return this.Za=f,c.length!==0||d?{snapshot:new cl(this.query,t.tu,o,c,t.mutatedKeys,f===0,d,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new wE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((e=>this.Ya=this.Ya.add(e))),t.modifiedDocuments.forEach((e=>{})),t.removedDocuments.forEach((e=>this.Ya=this.Ya.delete(e))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Ft(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const e=[];return t.forEach((i=>{this.Xa.has(i)||e.push(new m1(i))})),this.Xa.forEach((i=>{t.has(i)||e.push(new g1(i))})),e}cu(t){this.Ya=t.Qs,this.Xa=Ft();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return cl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const o_="SyncEngine";class tk{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class ek{constructor(t){this.key=t,this.hu=!1}}class nk{constructor(t,e,i,r,o,c){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new $a((u=>MA(u)),Od),this.Iu=new Map,this.Eu=new Set,this.du=new be(bt.comparator),this.Au=new Map,this.Ru=new Qy,this.Vu={},this.mu=new Map,this.fu=ll.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function ik(n,t,e=!0){const i=T1(n);let r;const o=i.Tu.get(t);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.lu()):r=await p1(i,t,e,!0),r}async function sk(n,t){const e=T1(n);await p1(e,t,!0,!1)}async function p1(n,t,e,i){const r=await SN(n.localStore,Zi(t)),o=r.targetId,c=n.sharedClientState.addLocalQueryTarget(o,e);let u;return i&&(u=await rk(n,t,o,c==="current",r.resumeToken)),n.isPrimaryClient&&e&&r1(n.remoteStore,r),u}async function rk(n,t,e,i,r){n.pu=(_,b,x)=>(async function(S,D,L,F){let W=D.view.ru(L);W.Cs&&(W=await vE(S.localStore,D.query,!1).then((({documents:M})=>D.view.ru(M,W))));const J=F&&F.targetChanges.get(D.targetId),$=F&&F.targetMismatches.get(D.targetId)!=null,nt=D.view.applyChanges(W,S.isPrimaryClient,J,$);return DE(S,D.targetId,nt.au),nt.snapshot})(n,_,b,x);const o=await vE(n.localStore,t,!0),c=new ZN(t,o.Qs),u=c.ru(o.documents),f=Cu.createSynthesizedTargetChangeForCurrentChange(e,i&&n.onlineState!=="Offline",r),d=c.applyChanges(u,n.isPrimaryClient,f);DE(n,e,d.au);const p=new tk(t,e,c);return n.Tu.set(t,p),n.Iu.has(e)?n.Iu.get(e).push(t):n.Iu.set(e,[t]),d.snapshot}async function ak(n,t,e){const i=Dt(n),r=i.Tu.get(t),o=i.Iu.get(r.targetId);if(o.length>1)return i.Iu.set(r.targetId,o.filter((c=>!Od(c,t)))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Zp(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),e&&t_(i.remoteStore,r.targetId),ny(i,r.targetId)})).catch(yl)):(ny(i,r.targetId),await Zp(i.localStore,r.targetId,!0))}async function ok(n,t){const e=Dt(n),i=e.Tu.get(t),r=e.Iu.get(i.targetId);e.isPrimaryClient&&r.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),t_(e.remoteStore,i.targetId))}async function lk(n,t,e){const i=mk(n);try{const r=await(function(c,u){const f=Dt(c),d=fe.now(),p=u.reduce(((x,w)=>x.add(w.key)),Ft());let _,b;return f.persistence.runTransaction("Locally write mutations","readwrite",(x=>{let w=zs(),S=Ft();return f.Ns.getEntries(x,p).next((D=>{w=D,w.forEach(((L,F)=>{F.isValidDocument()||(S=S.add(L))}))})).next((()=>f.localDocuments.getOverlayedDocuments(x,w))).next((D=>{_=D;const L=[];for(const F of u){const W=xO(F,_.get(F.key).overlayedDocument);W!=null&&L.push(new Xr(F.key,W,xA(W.value.mapValue),On.exists(!0)))}return f.mutationQueue.addMutationBatch(x,d,L,u)})).next((D=>{b=D;const L=D.applyToLocalDocumentSet(_,S);return f.documentOverlayCache.saveOverlays(x,D.batchId,L)}))})).then((()=>({batchId:b.batchId,changes:kA(_)})))})(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),(function(c,u,f){let d=c.Vu[c.currentUser.toKey()];d||(d=new be(Bt)),d=d.insert(u,f),c.Vu[c.currentUser.toKey()]=d})(i,r.batchId,e),await Iu(i,r.changes),await Ud(i.remoteStore)}catch(r){const o=r_(r,"Failed to persist write");e.reject(o)}}async function y1(n,t){const e=Dt(n);try{const i=await TN(e.localStore,t);t.targetChanges.forEach(((r,o)=>{const c=e.Au.get(o);c&&(Jt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?c.hu=!0:r.modifiedDocuments.size>0?Jt(c.hu,14607):r.removedDocuments.size>0&&(Jt(c.hu,42227),c.hu=!1))})),await Iu(e,i,t)}catch(i){await yl(i)}}function IE(n,t,e){const i=Dt(n);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){const r=[];i.Tu.forEach(((o,c)=>{const u=c.view.va(t);u.snapshot&&r.push(u.snapshot)})),(function(c,u){const f=Dt(c);f.onlineState=u;let d=!1;f.queries.forEach(((p,_)=>{for(const b of _.Sa)b.va(u)&&(d=!0)})),d&&a_(f)})(i.eventManager,t),r.length&&i.Pu.H_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function ck(n,t,e){const i=Dt(n);i.sharedClientState.updateQueryState(t,"rejected",e);const r=i.Au.get(t),o=r&&r.key;if(o){let c=new be(bt.comparator);c=c.insert(o,gn.newNoDocument(o,Ct.min()));const u=Ft().add(o),f=new Ld(Ct.min(),new Map,new be(Bt),c,u);await y1(i,f),i.du=i.du.remove(o),i.Au.delete(t),l_(i)}else await Zp(i.localStore,t,!1).then((()=>ny(i,t,e))).catch(yl)}async function uk(n,t){const e=Dt(n),i=t.batch.batchId;try{const r=await vN(e.localStore,t);b1(e,i,null),_1(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),await Iu(e,r)}catch(r){await yl(r)}}async function hk(n,t,e){const i=Dt(n);try{const r=await(function(c,u){const f=Dt(c);return f.persistence.runTransaction("Reject batch","readwrite-primary",(d=>{let p;return f.mutationQueue.lookupMutationBatch(d,u).next((_=>(Jt(_!==null,37113),p=_.keys(),f.mutationQueue.removeMutationBatch(d,_)))).next((()=>f.mutationQueue.performConsistencyCheck(d))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(d,p,u))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p))).next((()=>f.localDocuments.getDocuments(d,p)))}))})(i.localStore,t);b1(i,t,e),_1(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),await Iu(i,r)}catch(r){await yl(r)}}function _1(n,t){(n.mu.get(t)||[]).forEach((e=>{e.resolve()})),n.mu.delete(t)}function b1(n,t,e){const i=Dt(n);let r=i.Vu[i.currentUser.toKey()];if(r){const o=r.get(t);o&&(e?o.reject(e):o.resolve(),r=r.remove(t)),i.Vu[i.currentUser.toKey()]=r}}function ny(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.Iu.get(t))n.Tu.delete(i),e&&n.Pu.yu(i,e);n.Iu.delete(t),n.isPrimaryClient&&n.Ru.jr(t).forEach((i=>{n.Ru.containsKey(i)||v1(n,i)}))}function v1(n,t){n.Eu.delete(t.path.canonicalString());const e=n.du.get(t);e!==null&&(t_(n.remoteStore,e),n.du=n.du.remove(t),n.Au.delete(e),l_(n))}function DE(n,t,e){for(const i of e)i instanceof g1?(n.Ru.addReference(i.key,t),fk(n,i)):i instanceof m1?(dt(o_,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,t),n.Ru.containsKey(i.key)||v1(n,i.key)):wt(19791,{wu:i})}function fk(n,t){const e=t.key,i=e.path.canonicalString();n.du.get(e)||n.Eu.has(i)||(dt(o_,"New document in limbo: "+e),n.Eu.add(i),l_(n))}function l_(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const t=n.Eu.values().next().value;n.Eu.delete(t);const e=new bt(ce.fromString(t)),i=n.fu.next();n.Au.set(i,new ek(e)),n.du=n.du.insert(e,i),r1(n.remoteStore,new xr(Zi(Gy(e.path)),i,"TargetPurposeLimboResolution",Id.ce))}}async function Iu(n,t,e){const i=Dt(n),r=[],o=[],c=[];i.Tu.isEmpty()||(i.Tu.forEach(((u,f)=>{c.push(i.pu(f,t,e).then((d=>{var p;if((d||e)&&i.isPrimaryClient){const _=d?!d.fromCache:(p=e==null?void 0:e.targetChanges.get(f.targetId))==null?void 0:p.current;i.sharedClientState.updateQueryState(f.targetId,_?"current":"not-current")}if(d){r.push(d);const _=Jy.As(f.targetId,d);o.push(_)}})))})),await Promise.all(c),i.Pu.H_(r),await(async function(f,d){const p=Dt(f);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>rt.forEach(d,(b=>rt.forEach(b.Es,(x=>p.persistence.referenceDelegate.addReference(_,b.targetId,x))).next((()=>rt.forEach(b.ds,(x=>p.persistence.referenceDelegate.removeReference(_,b.targetId,x)))))))))}catch(_){if(!_l(_))throw _;dt(Zy,"Failed to update sequence numbers: "+_)}for(const _ of d){const b=_.targetId;if(!_.fromCache){const x=p.Ms.get(b),w=x.snapshotVersion,S=x.withLastLimboFreeSnapshotVersion(w);p.Ms=p.Ms.insert(b,S)}}})(i.localStore,o))}async function dk(n,t){const e=Dt(n);if(!e.currentUser.isEqual(t)){dt(o_,"User change. New user:",t.toKey());const i=await e1(e.localStore,t);e.currentUser=t,(function(o,c){o.mu.forEach((u=>{u.forEach((f=>{f.reject(new ft(st.CANCELLED,c))}))})),o.mu.clear()})(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await Iu(e,i.Ls)}}function gk(n,t){const e=Dt(n),i=e.Au.get(t);if(i&&i.hu)return Ft().add(i.key);{let r=Ft();const o=e.Iu.get(t);if(!o)return r;for(const c of o){const u=e.Tu.get(c);r=r.unionWith(u.view.nu)}return r}}function T1(n){const t=Dt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=y1.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=gk.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ck.bind(null,t),t.Pu.H_=$N.bind(null,t.eventManager),t.Pu.yu=JN.bind(null,t.eventManager),t}function mk(n){const t=Dt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=uk.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=hk.bind(null,t),t}class dd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=zd(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return bN(this.persistence,new pN,t.initialUser,this.serializer)}Cu(t){return new t1($y.mi,this.serializer)}Du(t){return new wN}async terminate(){var t,e;(t=this.gcScheduler)==null||t.stop(),(e=this.indexBackfillerScheduler)==null||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}dd.provider={build:()=>new dd};class pk extends dd{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){Jt(this.persistence.referenceDelegate instanceof hd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new eN(i,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?In.withCacheSize(this.cacheSizeBytes):In.DEFAULT;return new t1((i=>hd.mi(i,e)),this.serializer)}}class iy{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>IE(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=dk.bind(null,this.syncEngine),await WN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new QN})()}createDatastore(t){const e=zd(t.databaseInfo.databaseId),i=(function(o){return new MN(o)})(t.databaseInfo);return(function(o,c,u,f){return new PN(o,c,u,f)})(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return(function(i,r,o,c,u){return new LN(i,r,o,c,u)})(this.localStore,this.datastore,t.asyncQueue,(e=>IE(this.syncEngine,e,0)),(function(){return xE.v()?new xE:new CN})())}createSyncEngine(t,e){return(function(r,o,c,u,f,d,p){const _=new nk(r,o,c,u,f,d);return p&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await(async function(r){const o=Dt(r);dt(Ka,"RemoteStore shutting down."),o.Ea.add(5),await Ru(o),o.Aa.shutdown(),o.Ra.set("Unknown")})(this.remoteStore),(t=this.datastore)==null||t.terminate(),(e=this.eventManager)==null||e.terminate()}}iy.provider={build:()=>new iy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Ls("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout((()=>{this.muted||t(e)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br="FirestoreClient";class yk{constructor(t,e,i,r,o){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=fn.UNAUTHENTICATED,this.clientId=jy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,(async c=>{dt(Br,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(dt(Br,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Nr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const i=r_(e,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}async function mp(n,t){n.asyncQueue.verifyOperationInProgress(),dt(Br,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener((async r=>{i.isEqual(r)||(await e1(t.localStore,r),i=r)})),t.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=t}async function ME(n,t){n.asyncQueue.verifyOperationInProgress();const e=await _k(n);dt(Br,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener((i=>AE(t.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,r)=>AE(t.remoteStore,r))),n._onlineComponents=t}async function _k(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){dt(Br,"Using user provided OfflineComponentProvider");try{await mp(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!(function(r){return r.name==="FirebaseError"?r.code===st.FAILED_PRECONDITION||r.code===st.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(e))throw e;sl("Error using user provided cache. Falling back to memory cache: "+e),await mp(n,new dd)}}else dt(Br,"Using default OfflineComponentProvider"),await mp(n,new pk(void 0));return n._offlineComponents}async function x1(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(dt(Br,"Using user provided OnlineComponentProvider"),await ME(n,n._uninitializedComponentsProvider._online)):(dt(Br,"Using default OnlineComponentProvider"),await ME(n,new iy))),n._onlineComponents}function bk(n){return x1(n).then((t=>t.syncEngine))}async function sy(n){const t=await x1(n),e=t.eventManager;return e.onListen=ik.bind(null,t.syncEngine),e.onUnlisten=ak.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=sk.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=ok.bind(null,t.syncEngine),e}function vk(n,t,e={}){const i=new Nr;return n.asyncQueue.enqueueAndForget((async()=>(function(o,c,u,f,d){const p=new E1({next:b=>{p.Nu(),c.enqueueAndForget((()=>f1(o,_))),b.fromCache&&f.source==="server"?d.reject(new ft(st.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(b)},error:b=>d.reject(b)}),_=new d1(u,p,{includeMetadataChanges:!0,qa:!0});return h1(o,_)})(await sy(n),n.asyncQueue,t,e,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1="firestore.googleapis.com",NE=!0;class kE{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new ft(st.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=A1,this.ssl=NE}else this.host=t.host,this.ssl=t.ssl??NE;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=ZA;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<ZO)throw new ft(st.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}LM("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=S1(t.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ft(st.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ft(st.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ft(st.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Bd{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ft(st.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ft(st.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kE(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new CM;switch(i.type){case"firstParty":return new MM(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ft(st.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){const i=OE.get(e);i&&(dt("ComponentProvider","Removing Datastore"),OE.delete(e),i.terminate())})(this),Promise.resolve()}}function Tk(n,t,e,i={}){var d;n=xi(n,Bd);const r=dl(t),o=n._getSettings(),c={...o,emulatorOptions:n._getEmulatorOptions()},u=`${t}:${e}`;r&&(yS(`https://${u}`),_S("Firestore",!0)),o.host!==A1&&o.host!==u&&sl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...o,host:u,ssl:r,emulatorOptions:i};if(!Fa(f,c)&&(n._setSettings(f),i.mockUserToken)){let p,_;if(typeof i.mockUserToken=="string")p=i.mockUserToken,_=fn.MOCK_USER;else{p=VR(i.mockUserToken,(d=n._app)==null?void 0:d.options.projectId);const b=i.mockUserToken.sub||i.mockUserToken.user_id;if(!b)throw new ft(st.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new fn(b)}n._authCredentials=new RM(new hA(p,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Za(this.firestore,t,this._query)}}class Be{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new kr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Be(this.firestore,t,this._key)}toJSON(){return{type:Be._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,i){if(Su(e,Be._jsonSchema))return new Be(t,i||null,new bt(ce.fromString(e.referencePath)))}}Be._jsonSchemaVersion="firestore/documentReference/1.0",Be._jsonSchema={type:Ue("string",Be._jsonSchemaVersion),referencePath:Ue("string")};class kr extends Za{constructor(t,e,i){super(t,e,Gy(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Be(this.firestore,null,new bt(t))}withConverter(t){return new kr(this.firestore,t,this._path)}}function Ek(n,t,...e){if(n=Fe(n),fA("collection","path",t),n instanceof Bd){const i=ce.fromString(t,...e);return KT(i),new kr(n,null,i)}{if(!(n instanceof Be||n instanceof kr))throw new ft(st.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(ce.fromString(t,...e));return KT(i),new kr(n.firestore,null,i)}}function gd(n,t,...e){if(n=Fe(n),arguments.length===1&&(t=jy.newId()),fA("doc","path",t),n instanceof Bd){const i=ce.fromString(t,...e);return YT(i),new Be(n,null,new bt(i))}{if(!(n instanceof Be||n instanceof kr))throw new ft(st.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(ce.fromString(t,...e));return YT(i),new Be(n.firestore,n instanceof kr?n.converter:null,new bt(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE="AsyncQueue";class VE{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new i1(this,"async_queue_retry"),this._c=()=>{const i=gp();i&&dt(PE,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const e=gp();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=gp();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const e=new Nr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!_l(t))throw t;dt(PE,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const e=this.ac.then((()=>(this.rc=!0,t().catch((i=>{throw this.nc=i,this.rc=!1,Ls("INTERNAL UNHANDLED ERROR: ",LE(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=e,e}enqueueAfterDelay(t,e,i){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const r=s_.createAndSchedule(this,t,e,i,(o=>this.hc(o)));return this.tc.push(r),r}uc(){this.nc&&wt(47125,{Pc:LE(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((e,i)=>e.targetTimeMs-i.targetTimeMs));for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function LE(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zE(n){return(function(e,i){if(typeof e!="object"||e===null)return!1;const r=e;for(const o of i)if(o in r&&typeof r[o]=="function")return!0;return!1})(n,["next","error","complete"])}class Fr extends Bd{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=new VE,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new VE(t),this._firestoreClient=void 0,await t}}}function xk(n,t){const e=typeof n=="object"?n:ES(),i=typeof n=="string"?n:sd,r=Cy(e,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=kR("firestore");o&&Tk(r,...o)}return r}function Fd(n){if(n._terminated)throw new ft(st.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Sk(n),n._firestoreClient}function Sk(n){var i,r,o;const t=n._freezeSettings(),e=(function(u,f,d,p){return new WM(u,f,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,S1(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,t);n._componentsProvider||(r=t.localCache)!=null&&r._offlineComponentProvider&&((o=t.localCache)!=null&&o._onlineComponentProvider)&&(n._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),n._firestoreClient=new yk(n._authCredentials,n._appCheckCredentials,n._queue,e,n._componentsProvider&&(function(u){const f=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(f),_online:f}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(t){this._byteString=t}static fromBase64String(t){try{return new ri(ln.fromBase64String(t))}catch(e){throw new ft(st.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new ri(ln.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:ri._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Su(t,ri._jsonSchema))return ri.fromBase64String(t.bytes)}}ri._jsonSchemaVersion="firestore/bytes/1.0",ri._jsonSchema={type:Ue("string",ri._jsonSchemaVersion),bytes:Ue("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new ft(st.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new on(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new ft(st.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ft(st.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Bt(this._lat,t._lat)||Bt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:es._jsonSchemaVersion}}static fromJSON(t){if(Su(t,es._jsonSchema))return new es(t.latitude,t.longitude)}}es._jsonSchemaVersion="firestore/geoPoint/1.0",es._jsonSchema={type:Ue("string",es._jsonSchemaVersion),latitude:Ue("number"),longitude:Ue("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(t){this._values=(t||[]).map((e=>e))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0})(this._values,t._values)}toJSON(){return{type:ns._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Su(t,ns._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e=="number")))return new ns(t.vectorValues);throw new ft(st.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ns._jsonSchemaVersion="firestore/vectorValue/1.0",ns._jsonSchema={type:Ue("string",ns._jsonSchemaVersion),vectorValues:Ue("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak=/^__.*__$/;class wk{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new Xr(t,this.data,this.fieldMask,e,this.fieldTransforms):new wu(t,this.data,e,this.fieldTransforms)}}class w1{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new Xr(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function C1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw wt(40011,{Ac:n})}}class u_{constructor(t,e,i,r,o,c){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new u_({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var r;const e=(r=this.path)==null?void 0:r.child(t),i=this.Vc({path:e,fc:!1});return i.gc(t),i}yc(t){var r;const e=(r=this.path)==null?void 0:r.child(t),i=this.Vc({path:e,fc:!1});return i.Rc(),i}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return md(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((e=>t.isPrefixOf(e)))!==void 0||this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(C1(this.Ac)&&Ak.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class Ck{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||zd(t)}Cc(t,e,i,r=!1){return new u_({Ac:t,methodName:e,Dc:i,path:on.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qd(n){const t=n._freezeSettings(),e=zd(n._databaseId);return new Ck(n._databaseId,!!t.ignoreUndefinedProperties,e)}function h_(n,t,e,i,r,o={}){const c=n.Cc(o.merge||o.mergeFields?2:0,t,e,r);f_("Data must be an object, but it was:",c,i);const u=R1(i,c);let f,d;if(o.merge)f=new qn(c.fieldMask),d=c.fieldTransforms;else if(o.mergeFields){const p=[];for(const _ of o.mergeFields){const b=ry(t,_,e);if(!c.contains(b))throw new ft(st.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);D1(p,b)||p.push(b)}f=new qn(p),d=c.fieldTransforms.filter((_=>f.covers(_.field)))}else f=null,d=c.fieldTransforms;return new wk(new Dn(u),f,d)}class Gd extends c_{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Gd}}function Rk(n,t,e,i){const r=n.Cc(1,t,e);f_("Data must be an object, but it was:",r,i);const o=[],c=Dn.empty();Wr(i,((f,d)=>{const p=d_(t,f,e);d=Fe(d);const _=r.yc(p);if(d instanceof Gd)o.push(p);else{const b=Du(d,_);b!=null&&(o.push(p),c.set(p,b))}}));const u=new qn(o);return new w1(c,u,r.fieldTransforms)}function Ik(n,t,e,i,r,o){const c=n.Cc(1,t,e),u=[ry(t,i,e)],f=[r];if(o.length%2!=0)throw new ft(st.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<o.length;b+=2)u.push(ry(t,o[b])),f.push(o[b+1]);const d=[],p=Dn.empty();for(let b=u.length-1;b>=0;--b)if(!D1(d,u[b])){const x=u[b];let w=f[b];w=Fe(w);const S=c.yc(x);if(w instanceof Gd)d.push(x);else{const D=Du(w,S);D!=null&&(d.push(x),p.set(x,D))}}const _=new qn(d);return new w1(p,_,c.fieldTransforms)}function Dk(n,t,e,i=!1){return Du(e,n.Cc(i?4:3,t))}function Du(n,t){if(I1(n=Fe(n)))return f_("Unsupported field value:",t,n),R1(n,t);if(n instanceof c_)return(function(i,r){if(!C1(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)})(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(i,r){const o=[];let c=0;for(const u of i){let f=Du(u,r.wc(c));f==null&&(f={nullValue:"NULL_VALUE"}),o.push(f),c++}return{arrayValue:{values:o}}})(n,t)}return(function(i,r){if((i=Fe(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return yO(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=fe.fromDate(i);return{timestampValue:ud(r.serializer,o)}}if(i instanceof fe){const o=new fe(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:ud(r.serializer,o)}}if(i instanceof es)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ri)return{bytesValue:YA(r.serializer,i._byteString)};if(i instanceof Be){const o=r.databaseId,c=i.firestore._databaseId;if(!c.isEqual(o))throw r.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Xy(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof ns)return(function(c,u){return{mapValue:{fields:{[TA]:{stringValue:EA},[rd]:{arrayValue:{values:c.toArray().map((d=>{if(typeof d!="number")throw u.Sc("VectorValues must only contain numeric values.");return Yy(u.serializer,d)}))}}}}}})(i,r);throw r.Sc(`Unsupported field value: ${Rd(i)}`)})(n,t)}function R1(n,t){const e={};return mA(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Wr(n,((i,r)=>{const o=Du(r,t.mc(i));o!=null&&(e[i]=o)})),{mapValue:{fields:e}}}function I1(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof fe||n instanceof es||n instanceof ri||n instanceof Be||n instanceof c_||n instanceof ns)}function f_(n,t,e){if(!I1(e)||!dA(e)){const i=Rd(e);throw i==="an object"?t.Sc(n+" a custom object"):t.Sc(n+" "+i)}}function ry(n,t,e){if((t=Fe(t))instanceof Hd)return t._internalPath;if(typeof t=="string")return d_(n,t);throw md("Field path arguments must be of type string or ",n,!1,void 0,e)}const Mk=new RegExp("[~\\*/\\[\\]]");function d_(n,t,e){if(t.search(Mk)>=0)throw md(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new Hd(...t.split("."))._internalPath}catch{throw md(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function md(n,t,e,i,r){const o=i&&!i.isEmpty(),c=r!==void 0;let u=`Function ${t}() called with invalid data`;e&&(u+=" (via `toFirestore()`)"),u+=". ";let f="";return(o||c)&&(f+=" (found",o&&(f+=` in field ${i}`),c&&(f+=` in document ${r}`),f+=")"),new ft(st.INVALID_ARGUMENT,u+n+f)}function D1(n,t){return n.some((e=>e.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(t,e,i,r,o){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Be(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new Ok(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(O1("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class Ok extends M1{data(){return super.data()}}function O1(n,t){return typeof t=="string"?d_(n,t):t instanceof Hd?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N1(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ft(st.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class g_{}class Nk extends g_{}function kk(n,t,...e){let i=[];t instanceof g_&&i.push(t),i=i.concat(e),(function(o){const c=o.filter((f=>f instanceof p_)).length,u=o.filter((f=>f instanceof m_)).length;if(c>1||c>0&&u>0)throw new ft(st.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const r of i)n=r._apply(n);return n}class m_ extends Nk{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new m_(t,e,i)}_apply(t){const e=this._parse(t);return k1(t._query,e),new Za(t.firestore,t.converter,Kp(t._query,e))}_parse(t){const e=qd(t.firestore);return(function(o,c,u,f,d,p,_){let b;if(d.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new ft(st.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){UE(_,p);const w=[];for(const S of _)w.push(jE(f,o,S));b={arrayValue:{values:w}}}else b=jE(f,o,_)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||UE(_,p),b=Dk(u,c,_,p==="in"||p==="not-in");return je.create(d,p,b)})(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}class p_ extends g_{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new p_(t,e)}_parse(t){const e=this._queryConstraints.map((i=>i._parse(t))).filter((i=>i.getFilters().length>0));return e.length===1?e[0]:Ai.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:((function(r,o){let c=r;const u=o.getFlattenedFilters();for(const f of u)k1(c,f),c=Kp(c,f)})(t._query,e),new Za(t.firestore,t.converter,Kp(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function jE(n,t,e){if(typeof(e=Fe(e))=="string"){if(e==="")throw new ft(st.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!DA(t)&&e.indexOf("/")!==-1)throw new ft(st.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(ce.fromString(e));if(!bt.isDocumentKey(i))throw new ft(st.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return eE(n,new bt(i))}if(e instanceof Be)return eE(n,e._key);throw new ft(st.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Rd(e)}.`)}function UE(n,t){if(!Array.isArray(n)||n.length===0)throw new ft(st.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function k1(n,t){const e=(function(r,o){for(const c of r)for(const u of c.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null})(n.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(e!==null)throw e===t.op?new ft(st.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ft(st.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class Pk{convertValue(t,e="none"){switch(jr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ce(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(zr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw wt(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return Wr(t,((r,o)=>{i[r]=this.convertValue(o,e)})),i}convertVectorValue(t){var i,r,o;const e=(o=(r=(i=t.fields)==null?void 0:i[rd].arrayValue)==null?void 0:r.values)==null?void 0:o.map((c=>Ce(c.doubleValue)));return new ns(e)}convertGeoPoint(t){return new es(Ce(t.latitude),Ce(t.longitude))}convertArray(t,e){return(t.values||[]).map((i=>this.convertValue(i,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const i=Md(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(ru(t));default:return null}}convertTimestamp(t){const e=Lr(t);return new fe(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=ce.fromString(t);Jt(JA(i),9688,{name:t});const r=new au(i.get(1),i.get(3)),o=new bt(i.popFirst(5));return r.isEqual(e)||Ls(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y_(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}class Lc{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class za extends M1{constructor(t,e,i,r,o,c){super(t,e,i,r,c),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new jf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(O1("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ft(st.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=za._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}za._jsonSchemaVersion="firestore/documentSnapshot/1.0",za._jsonSchema={type:Ue("string",za._jsonSchemaVersion),bundleSource:Ue("string","DocumentSnapshot"),bundleName:Ue("string"),bundle:Ue("string")};class jf extends za{data(t={}){return super.data(t)}}class ja{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Lc(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach((i=>{t.call(e,new jf(this._firestore,this._userDataWriter,i.key,i,new Lc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ft(st.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=(function(r,o){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map((u=>{const f=new jf(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Lc(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:f,oldIndex:-1,newIndex:c++}}))}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((u=>o||u.type!==3)).map((u=>{const f=new jf(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Lc(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let d=-1,p=-1;return u.type!==0&&(d=c.indexOf(u.doc.key),c=c.delete(u.doc.key)),u.type!==1&&(c=c.add(u.doc),p=c.indexOf(u.doc.key)),{type:Vk(u.type),doc:f,oldIndex:d,newIndex:p}}))}})(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ft(st.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=ja._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=jy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],i=[],r=[];return this.docs.forEach((o=>{o._document!==null&&(e.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function Vk(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return wt(61501,{type:n})}}ja._jsonSchemaVersion="firestore/querySnapshot/1.0",ja._jsonSchema={type:Ue("string",ja._jsonSchemaVersion),bundleSource:Ue("string","QuerySnapshot"),bundleName:Ue("string"),bundle:Ue("string")};class __ extends Pk{constructor(t){super(),this.firestore=t}convertBytes(t){return new ri(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Be(this.firestore,null,e)}}function Lk(n){n=xi(n,Za);const t=xi(n.firestore,Fr),e=Fd(t),i=new __(t);return N1(n._query),vk(e,n._query).then((r=>new ja(t,i,n,r)))}function ay(n,t,e){n=xi(n,Be);const i=xi(n.firestore,Fr),r=y_(n.converter,t,e);return Yd(i,[h_(qd(i),"setDoc",n._key,r,n.converter!==null,e).toMutation(n._key,On.none())])}function zk(n){return Yd(xi(n.firestore,Fr),[new Vd(n._key,On.none())])}function jk(n,t){const e=xi(n.firestore,Fr),i=gd(n),r=y_(n.converter,t);return Yd(e,[h_(qd(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,On.exists(!1))]).then((()=>i))}function P1(n,...t){var f,d,p;n=Fe(n);let e={includeMetadataChanges:!1,source:"default"},i=0;typeof t[i]!="object"||zE(t[i])||(e=t[i++]);const r={includeMetadataChanges:e.includeMetadataChanges,source:e.source};if(zE(t[i])){const _=t[i];t[i]=(f=_.next)==null?void 0:f.bind(_),t[i+1]=(d=_.error)==null?void 0:d.bind(_),t[i+2]=(p=_.complete)==null?void 0:p.bind(_)}let o,c,u;if(n instanceof Be)c=xi(n.firestore,Fr),u=Gy(n._key.path),o={next:_=>{t[i]&&t[i](Uk(c,n,_))},error:t[i+1],complete:t[i+2]};else{const _=xi(n,Za);c=xi(_.firestore,Fr),u=_._query;const b=new __(c);o={next:x=>{t[i]&&t[i](new ja(c,b,_,x))},error:t[i+1],complete:t[i+2]},N1(n._query)}return(function(b,x,w,S){const D=new E1(S),L=new d1(x,D,w);return b.asyncQueue.enqueueAndForget((async()=>h1(await sy(b),L))),()=>{D.Nu(),b.asyncQueue.enqueueAndForget((async()=>f1(await sy(b),L)))}})(Fd(c),u,r,o)}function Yd(n,t){return(function(i,r){const o=new Nr;return i.asyncQueue.enqueueAndForget((async()=>lk(await bk(i),r,o))),o.promise})(Fd(n),t)}function Uk(n,t,e){const i=e.docs.get(t._key),r=new __(n);return new za(n,r,t._key,i,new Lc(e.hasPendingWrites,e.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=qd(t)}set(t,e,i){this._verifyNotCommitted();const r=pp(t,this._firestore),o=y_(r.converter,e,i),c=h_(this._dataReader,"WriteBatch.set",r._key,o,r.converter!==null,i);return this._mutations.push(c.toMutation(r._key,On.none())),this}update(t,e,i,...r){this._verifyNotCommitted();const o=pp(t,this._firestore);let c;return c=typeof(e=Fe(e))=="string"||e instanceof Hd?Ik(this._dataReader,"WriteBatch.update",o._key,e,i,r):Rk(this._dataReader,"WriteBatch.update",o._key,e),this._mutations.push(c.toMutation(o._key,On.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=pp(t,this._firestore);return this._mutations=this._mutations.concat(new Vd(e._key,On.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ft(st.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function pp(n,t){if((n=Fe(n)).firestore!==t)throw new ft(st.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fk(n){return Fd(n=xi(n,Fr)),new Bk(n,(t=>Yd(n,t)))}(function(t,e=!0){(function(r){pl=r})(gl),il(new Ha("firestore",((i,{instanceIdentifier:r,options:o})=>{const c=i.getProvider("app").getImmediate(),u=new Fr(new IM(i.getProvider("auth-internal")),new OM(c,i.getProvider("app-check-internal")),(function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ft(st.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new au(d.options.projectId,p)})(c,r),c);return o={useFetchStreams:e,...o},u._setSettings(o),u}),"PUBLIC").setMultipleInstances(!0)),Mr(FT,HT,t),Mr(FT,HT,"esm2020")})();const Hk={apiKey:"AIzaSyDj9amBZsMkLeDIIWqUXhc19uwrxzhWGrg",authDomain:"trada-1992a.firebaseapp.com",projectId:"trada-1992a",storageBucket:"trada-1992a.firebasestorage.app",messagingSenderId:"835411805747",appId:"1:835411805747:web:447c3f8d2ecf73f3f4c546",measurementId:"G-2BZQ0EBZDF"},V1=TS(Hk),wc=AM(V1),oy=xk(V1),qk=new Rs;function Gk(){const[n,t]=yt.useState(null),[e,i]=yt.useState(!0);return yt.useEffect(()=>dD(wc,d=>{t(d),i(!1)}),[]),{user:n,login:(f,d)=>uD(wc,f,d),signup:(f,d)=>cD(wc,f,d),logout:()=>gD(wc),loginWithGoogle:()=>kD(wc,qk),loading:e}}function Yk(){const[n,t]=yt.useState("dark");yt.useEffect(()=>{const i=localStorage.getItem("theme"),r=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;t(i||(r?"dark":"light"))},[]),yt.useEffect(()=>{n==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",n)},[n]);const e=yt.useCallback(()=>{t(i=>i==="light"?"dark":"light")},[]);return[n,e]}const Kk=({login:n,signup:t,loginWithGoogle:e})=>{const[i,r]=yt.useState(!0),[o,c]=yt.useState(""),[u,f]=yt.useState(""),[d,p]=yt.useState(""),[_,b]=yt.useState(!1),x=async S=>{S.preventDefault(),p(""),b(!0);try{i?await n(o,u):await t(o,u)}catch(D){p(D.message||"Failed to authenticate")}b(!1)},w=async()=>{p(""),b(!0);try{await e()}catch(S){p(S.message||"Failed to sign in with Google.")}b(!1)};return I.jsx("div",{className:"bg-gray-100 dark:bg-gray-900 min-h-screen flex items-center justify-center p-4",children:I.jsxs("div",{className:"w-full max-w-md",children:[I.jsxs("div",{className:"text-center mb-8",children:[I.jsx("h1",{className:"text-4xl font-bold text-primary",children:"TRADA"}),I.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Your Personal Crypto Trading Journal"})]}),I.jsxs("div",{className:"bg-white dark:bg-gray-800/50 dark:backdrop-blur-sm border border-gray-200 dark:border-gray-700/50 rounded-xl shadow-lg p-8",children:[I.jsx("h2",{className:"text-xl font-bold mb-4 text-primary text-center",children:i?"Login":"Sign Up"}),I.jsxs("form",{onSubmit:x,className:"space-y-6",children:[d&&I.jsx("p",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded text-sm",children:d}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email Address"}),I.jsx("div",{className:"mt-1",children:I.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:o,onChange:S=>c(S.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary focus:border-primary sm:text-sm bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-white"})})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),I.jsx("div",{className:"mt-1",children:I.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:u,onChange:S=>f(S.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary focus:border-primary sm:text-sm bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-white"})})]}),I.jsx("div",{children:I.jsx("button",{type:"submit",disabled:_,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-gray-900 bg-primary hover:brightness-95 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:opacity-50",children:_?"Processing...":i?"Sign in":"Create account"})})]}),I.jsxs("div",{className:"mt-6",children:[I.jsxs("div",{className:"relative",children:[I.jsx("div",{className:"absolute inset-0 flex items-center",children:I.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),I.jsx("div",{className:"relative flex justify-center text-sm",children:I.jsx("span",{className:"px-2 bg-white dark:bg-gray-800 text-gray-500 dark:text-gray-400",children:"OR"})})]}),I.jsx("div",{className:"mt-6",children:I.jsxs("button",{onClick:w,disabled:_,type:"button",className:"w-full inline-flex justify-center py-2 px-4 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50",children:[I.jsxs("svg",{className:"w-5 h-5 mr-2",role:"img","aria-hidden":"true",focusable:"false",viewBox:"0 0 24 24",children:[I.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),I.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),I.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z",fill:"#FBBC05"}),I.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Sign in with Google"]})})]}),I.jsx("div",{className:"mt-6 text-center",children:I.jsx("button",{onClick:()=>r(!i),className:"font-medium text-primary hover:underline text-sm",children:i?"Don't have an account? Sign up":"Already have an account? Sign in"})})]})]})})};function Wk(n,t){const[e,i]=yt.useState([]),[r,o]=yt.useState(!0),[c,u]=yt.useState(null),f=yt.useMemo(()=>t?Ek(oy,"users",t,n):null,[t,n]);yt.useEffect(()=>{if(!f){i([]),o(!1);return}const x=kk(f),w=P1(x,S=>{const D=[];S.forEach(L=>{D.push({id:L.id,...L.data()})}),i(D),o(!1)},S=>{u(S),o(!1),console.error(`Firestore error listening to ${n}:`,S)});return()=>w()},[f,n]);const d=yt.useCallback(async x=>{if(f)try{await jk(f,x)}catch(w){u(w),console.error(`Firestore error adding to ${n}:`,w)}},[f,n]),p=yt.useCallback(async()=>{if(f)try{const x=await Lk(f),w=Fk(oy);x.forEach(S=>{w.delete(S.ref)}),await w.commit()}catch(x){u(x),console.error(`Firestore error clearing ${n}:`,x)}},[f,n]),_=yt.useCallback(async x=>{if(f)try{const w=gd(f,x);await zk(w)}catch(w){u(w),console.error(`Firestore error deleting from ${n}:`,w)}},[f,n]),b=yt.useCallback(async(x,w)=>{if(f)try{const S=gd(f,x);await ay(S,w,{merge:!0})}catch(S){u(S),console.error(`Firestore error updating ${n}:`,S)}},[f,n]);return{data:e,loading:r,error:c,addDocument:d,clearCollection:p,deleteDocument:_,updateDocument:b}}function BE(n,t,e){const[i,r]=yt.useState(e),[o,c]=yt.useState(!0),[u,f]=yt.useState(null),d=yt.useMemo(()=>t?gd(oy,"users",t,n,"data"):null,[t,n]);yt.useEffect(()=>{if(!d){r(e),c(!1);return}const _=P1(d,b=>{b.exists()?r(b.data()):(ay(d,e),r(e)),c(!1)},b=>{f(b),c(!1),console.error(`Firestore error listening to doc ${n}/data:`,b)});return()=>_()},[d]);const p=yt.useCallback(async _=>{if(d)try{await ay(d,_,{merge:!0})}catch(b){f(b),console.error(`Firestore error updating doc ${n}/data:`,b)}},[d,n]);return{data:i,loading:o,error:u,updateDocument:p}}const Xk=n=>{if(n.status!=="closed")throw new Error("Cannot calculate PnL for an open trade");const t=n.exitPrice??n.entryPrice,e=n.fees??0,i=n.margin*n.leverage,r=i/n.entryPrice,o=n.direction==="Long"?1:-1,c=(t-n.entryPrice)*r*o-e,u=(t-n.entryPrice)/n.entryPrice*o*100,f=c/n.margin*100,d=i*(n.riskPercent/100);return{pnlNet:c,pnlAssetPercent:u,pnlMarginPercent:f,positionSize:r,riskAmount:d}},Qk=(n,t)=>{const e=t.reduce((d,p)=>d+p.pnlNet,0),i=n.initial+n.deposits+e,r=t.filter(d=>d.pnlNet>0).length,o=t.length>0?r/t.length*100:0,c=t.filter(d=>d.pnlNet>0).reduce((d,p)=>d+p.pnlNet,0),u=Math.abs(t.filter(d=>d.pnlNet<0).reduce((d,p)=>d+p.pnlNet,0)),f=u>0?c/u:1/0;return{currentCapital:i,totalPnl:e,winRate:o,profitFactor:f}},Wa=({title:n,children:t,className:e="",titleClassName:i=""})=>I.jsxs("div",{className:`bg-white dark:bg-gray-800/50 dark:backdrop-blur-sm border border-gray-200 dark:border-gray-700/50 rounded-xl shadow-lg p-6 ${e}`,children:[n&&I.jsx("h2",{className:`text-xl font-bold mb-4 text-primary ${i}`,children:n}),t]}),$k=({capital:n,setCapital:t,onAddDeposit:e})=>{const[i,r]=yt.useState(!0),[o,c]=yt.useState(""),[u,f]=yt.useState(n.initial.toString());yt.useEffect(()=>{f(n.initial.toString())},[n.initial]);const d=()=>{const b=parseFloat(o);!isNaN(b)&&b>0&&(e(b),c(""))},p=b=>{f(b.target.value)},_=()=>{const b=parseFloat(u),x=isNaN(b)?0:b;x!==n.initial&&t({initial:x})};return I.jsxs(Wa,{children:[I.jsxs("div",{onClick:()=>r(!i),className:"flex justify-between items-center cursor-pointer",children:[I.jsx("h2",{className:"text-xl font-bold text-primary",children:"Capital Management"}),I.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2.5,stroke:"currentColor",className:`w-5 h-5 text-gray-500 dark:text-gray-400 transform transition-transform duration-300 ${i?"":"rotate-180"}`,children:I.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"})})]}),I.jsx("div",{className:`transition-all duration-300 ease-in-out overflow-hidden ${i?"max-h-96 mt-4 opacity-100":"max-h-0 mt-0 opacity-0"}`,children:I.jsxs("div",{className:"space-y-4",children:[I.jsxs("div",{children:[I.jsx("label",{htmlFor:"initialCapital",className:"block text-sm font-medium text-gray-600 dark:text-gray-400",children:"Initial Capital ($)"}),I.jsx("input",{type:"number",id:"initialCapital",value:u,onChange:p,onBlur:_,className:"mt-1 block w-full bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-md shadow-sm py-2 px-3 text-gray-800 dark:text-white focus:outline-none focus:ring-primary focus:border-primary",placeholder:"e.g., 1000"})]}),I.jsxs("div",{className:"flex items-end space-x-2",children:[I.jsxs("div",{className:"flex-grow",children:[I.jsx("label",{htmlFor:"addDeposit",className:"block text-sm font-medium text-gray-600 dark:text-gray-400",children:"Add Deposit ($)"}),I.jsx("input",{type:"number",id:"addDeposit",value:o,onChange:b=>c(b.target.value),className:"mt-1 block w-full bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-md shadow-sm py-2 px-3 text-gray-800 dark:text-white focus:outline-none focus:ring-primary focus:border-primary",placeholder:"e.g., 500"})]}),I.jsx("button",{onClick:d,className:"bg-primary hover:brightness-95 text-gray-900 font-bold py-2 px-4 rounded-md transition duration-300 h-10",children:"Add"})]})]})})]})},mf=()=>{const n=new Date().toISOString().slice(0,16);return{dateTime:n,pair:"",strategy:"",direction:"Long",riskReward:"2:1",entryPrice:0,exitPrice:0,margin:0,leverage:1,riskPercent:1,fees:0,status:"closed",closeDateTime:n,notes:""}},pf=1e-6,L1=({onSubmit:n,initialValues:t,submitLabel:e="Log Trade",onCancel:i})=>{const[r,o]=yt.useState(()=>t??mf()),[c,u]=yt.useState({positionValue:0,positionSize:0,riskAmount:0});yt.useEffect(()=>{o(t?{...mf(),...t,exitPrice:t.status==="closed"?t.exitPrice??t.entryPrice:null,fees:t.status==="closed"?t.fees??0:null,closeDateTime:t.status==="closed"?t.closeDateTime??t.dateTime:null}:mf())},[t]),yt.useEffect(()=>{const _=r.margin*r.leverage,b=r.entryPrice>0?_/r.entryPrice:0,x=_*(r.riskPercent/100);u({positionValue:_,positionSize:b,riskAmount:x})},[r.margin,r.leverage,r.entryPrice,r.riskPercent]);const f=_=>{o(b=>({...b,status:_,exitPrice:_==="closed"?b.exitPrice??b.entryPrice:null,fees:_==="closed"?b.fees??0:null,closeDateTime:_==="closed"?b.closeDateTime??new Date().toISOString().slice(0,16):null}))},d=_=>{const{name:b,value:x}=_.target;if(b==="status"){f(x);return}const S=["entryPrice","exitPrice","margin","leverage","riskPercent","fees"].includes(b);o(D=>({...D,[b]:S?isNaN(parseFloat(x))?0:parseFloat(x):x}))},p=async _=>{_.preventDefault();const b={...r,exitPrice:r.status==="closed"?r.exitPrice??r.entryPrice:null,fees:r.status==="closed"?r.fees??0:null,closeDateTime:r.status==="closed"?r.closeDateTime??new Date().toISOString().slice(0,16):null};await n(b),t||o(mf())};return I.jsxs(Wa,{title:"Log a New Trade",children:[I.jsxs("form",{onSubmit:p,className:"space-y-4",children:[I.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[I.jsxs("div",{children:[I.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-600 dark:text-gray-400",children:"Status"}),I.jsxs("select",{name:"status",id:"status",value:r.status,onChange:d,className:"input-field",children:[I.jsx("option",{value:"closed",children:"Closed"}),I.jsx("option",{value:"open",children:"Open"})]})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:"dateTime",className:"block text-sm font-medium text-gray-600 dark:text-gray-400",children:"Date & Time"}),I.jsx("input",{type:"datetime-local",name:"dateTime",id:"dateTime",value:r.dateTime,onChange:d,required:!0,className:"input-field"})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:"pair",className:"block text-sm font-medium text-gray-600 dark:text-gray-400",children:"Pair"}),I.jsx("input",{type:"text",name:"pair",id:"pair",placeholder:"e.g., BTC/USDT",value:r.pair,onChange:d,required:!0,className:"input-field"})]})]}),I.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[I.jsxs("div",{children:[I.jsx("label",{htmlFor:"strategy",className:"block text-sm font-medium text-gray-600 dark:text-gray-400",children:"Strategy"}),I.jsx("input",{type:"text",name:"strategy",id:"strategy",placeholder:"e.g., Breakout",value:r.strategy,onChange:d,required:!0,className:"input-field"})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:"direction",className:"block text-sm font-medium text-gray-600 dark:text-gray-400",children:"Direction"}),I.jsxs("select",{name:"direction",id:"direction",value:r.direction,onChange:d,className:"input-field",children:[I.jsx("option",{value:"Long",children:"Long"}),I.jsx("option",{value:"Short",children:"Short"})]})]})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:"riskReward",className:"block text-sm font-medium text-gray-600 dark:text-gray-400",children:"Risk/Reward Ratio"}),I.jsx("input",{type:"text",name:"riskReward",id:"riskReward",placeholder:"e.g., 2:1",value:r.riskReward,onChange:d,className:"input-field"})]}),I.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[I.jsxs("div",{children:[I.jsx("label",{htmlFor:"entryPrice",className:"block text-sm font-medium text-gray-600 dark:text-gray-400",children:"Entry Price"}),I.jsx("input",{type:"number",step:pf,name:"entryPrice",id:"entryPrice",value:r.entryPrice,onChange:d,required:!0,className:"input-field"})]}),r.status==="closed"&&I.jsxs("div",{children:[I.jsx("label",{htmlFor:"exitPrice",className:"block text-sm font-medium text-gray-600 dark:text-gray-400",children:"Exit Price"}),I.jsx("input",{type:"number",step:pf,name:"exitPrice",id:"exitPrice",value:r.exitPrice??"",onChange:d,required:!0,className:"input-field"})]})]}),I.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[I.jsxs("div",{children:[I.jsx("label",{htmlFor:"margin",className:"block text-sm font-medium text-gray-600 dark:text-gray-400",children:"Margin ($)"}),I.jsx("input",{type:"number",step:pf,name:"margin",id:"margin",value:r.margin,onChange:d,required:!0,className:"input-field"})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:"leverage",className:"block text-sm font-medium text-gray-600 dark:text-gray-400",children:"Leverage"}),I.jsx("select",{name:"leverage",id:"leverage",value:r.leverage,onChange:d,className:"input-field",children:[...Array(100).keys()].map(_=>I.jsxs("option",{value:_+1,children:[_+1,"x"]},_+1))})]})]}),I.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[I.jsxs("div",{children:[I.jsx("label",{htmlFor:"riskPercent",className:"block text-sm font-medium text-gray-600 dark:text-gray-400",children:"Risk (%)"}),I.jsx("input",{type:"number",step:"any",name:"riskPercent",id:"riskPercent",value:r.riskPercent,onChange:d,required:!0,className:"input-field"})]}),r.status==="closed"&&I.jsxs("div",{children:[I.jsx("label",{htmlFor:"fees",className:"block text-sm font-medium text-gray-600 dark:text-gray-400",children:"Fees ($)"}),I.jsx("input",{type:"number",step:pf,name:"fees",id:"fees",value:r.fees??"",onChange:d,required:!0,className:"input-field"})]})]}),r.status==="closed"&&I.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[I.jsxs("div",{children:[I.jsx("label",{htmlFor:"closeDateTime",className:"block text-sm font-medium text-gray-600 dark:text-gray-400",children:"Close Date & Time"}),I.jsx("input",{type:"datetime-local",name:"closeDateTime",id:"closeDateTime",value:r.closeDateTime??"",onChange:d,required:!0,className:"input-field"})]}),I.jsxs("div",{children:[I.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-600 dark:text-gray-400",children:"Notes"}),I.jsx("input",{type:"text",name:"notes",id:"notes",value:r.notes??"",onChange:d,className:"input-field",placeholder:"Optional notes"})]})]}),r.status==="open"&&I.jsxs("div",{children:[I.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-600 dark:text-gray-400",children:"Notes"}),I.jsx("input",{type:"text",name:"notes",id:"notes",value:r.notes??"",onChange:d,className:"input-field",placeholder:"Optional notes"})]}),I.jsxs("div",{className:"bg-gray-100 dark:bg-gray-900/50 p-4 rounded-lg space-y-2 text-sm",children:[I.jsx("h3",{className:"font-bold text-gray-700 dark:text-gray-300",children:"Auto-Calculated Values"}),I.jsxs("div",{className:"flex justify-between",children:[I.jsx("span",{children:"Position Value ($):"})," ",I.jsx("span",{children:c.positionValue.toFixed(2)})]}),I.jsxs("div",{className:"flex justify-between",children:[I.jsx("span",{children:"Position Size (Asset):"})," ",I.jsx("span",{children:c.positionSize.toFixed(8)})]}),I.jsxs("div",{className:"flex justify-between",children:[I.jsx("span",{children:"Risk Amount ($):"})," ",I.jsx("span",{children:c.riskAmount.toFixed(2)})]})]}),I.jsxs("div",{className:"flex space-x-2",children:[i&&I.jsx("button",{type:"button",onClick:i,className:"flex-1 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 font-bold py-2 px-4 rounded-md transition duration-300",children:"Cancel"}),I.jsx("button",{type:"submit",className:"flex-1 bg-primary hover:brightness-95 text-gray-900 font-bold py-2 px-4 rounded-md transition duration-300",children:e})]})]}),I.jsx("style",{children:`
        .input-field {
            margin-top: 4px;
            display: block;
            width: 100%;
            background-color: rgb(249 250 251);
            border: 1px solid rgb(209 213 219);
            border-radius: 0.375rem;
            box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            padding: 0.5rem 0.75rem;
            color: rgb(17 24 39);
        }
        .dark .input-field {
            background-color: rgb(17 24 39);
            border-color: rgb(55 65 81);
            color: rgb(249 250 251);
        }
        .input-field:focus {
            outline: 2px solid transparent;
            outline-offset: 2px;
            --tw-ring-color: var(--color-primary);
            border-color: var(--color-primary);
        }
      `})]})},Jk=({metrics:n,onOpenAnalytics:t})=>{const e=(r,o="",c=2)=>isFinite(r)?`${r.toFixed(c)}${o}`:"N/A",i=n.totalPnl>=0?"text-green-500":"text-red-500";return I.jsxs(Wa,{title:"Performance Dashboard",children:[I.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[I.jsxs("div",{children:[I.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Current Capital"}),I.jsxs("p",{className:"text-2xl font-bold",children:["$",e(n.currentCapital)]})]}),I.jsxs("div",{children:[I.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total P/L ($)"}),I.jsxs("p",{className:`text-2xl font-bold ${i}`,children:["$",e(n.totalPnl)]})]}),I.jsxs("div",{children:[I.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Win Rate"}),I.jsx("p",{className:"text-2xl font-bold",children:e(n.winRate,"%")})]}),I.jsxs("div",{children:[I.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Profit Factor"}),I.jsx("p",{className:"text-2xl font-bold",children:e(n.profitFactor)})]})]}),I.jsx("div",{className:"mt-6 text-center",children:I.jsx("button",{onClick:t,className:"bg-primary hover:brightness-95 text-gray-900 font-bold py-2 px-6 rounded-md transition duration-300",children:"Performance Analytics"})})]})},Zk=({trades:n,onDeleteTrade:t,onEditTrade:e})=>{const i=yt.useMemo(()=>n.reduce((u,f)=>(u.pnlNet+=f.pnlNet,u.fees+=f.fees,u.riskAmount+=f.riskAmount,u.margin+=f.margin,u),{pnlNet:0,fees:0,riskAmount:0,margin:0}),[n]),r=u=>u>=0?"text-green-500":"text-red-500",o=u=>{window.confirm("Delete this trade? This action cannot be undone.")&&t(u)},c=u=>{e(u)};return I.jsxs(Wa,{children:[I.jsx("div",{className:"flex justify-between items-center mb-4",children:I.jsx("h2",{className:"text-xl font-bold text-primary",children:"Trade Log"})}),I.jsx("div",{className:"overflow-x-auto",children:I.jsxs("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[I.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-100 dark:bg-gray-700 dark:text-gray-300",children:I.jsxs("tr",{children:[I.jsx("th",{scope:"col",className:"py-3 px-2",children:"Date"}),I.jsx("th",{scope:"col",className:"py-3 px-2",children:"Pair"}),I.jsx("th",{scope:"col",className:"py-3 px-2",children:"Direction"}),I.jsx("th",{scope:"col",className:"py-3 px-2",children:"Entry"}),I.jsx("th",{scope:"col",className:"py-3 px-2",children:"Exit"}),I.jsx("th",{scope:"col",className:"py-3 px-2",children:"Closed"}),I.jsx("th",{scope:"col",className:"py-3 px-2",children:"Pos. Size"}),I.jsx("th",{scope:"col",className:"py-3 px-2",children:"Leverage"}),I.jsx("th",{scope:"col",className:"py-3 px-2",children:"Margin ($)"}),I.jsx("th",{scope:"col",className:"py-3 px-2",children:"R/R"}),I.jsx("th",{scope:"col",className:"py-3 px-2",children:"Risk ($)"}),I.jsx("th",{scope:"col",className:"py-3 px-2",children:"Fees ($)"}),I.jsx("th",{scope:"col",className:"py-3 px-2",children:"P/L ($)"}),I.jsx("th",{scope:"col",className:"py-3 px-2",children:"P/L Asset %"}),I.jsx("th",{scope:"col",className:"py-3 px-2",children:"P/L Margin %"}),I.jsx("th",{scope:"col",className:"py-3 px-2",children:"Capital End"}),I.jsx("th",{scope:"col",className:"py-3 px-2",children:"Strategy"}),I.jsx("th",{scope:"col",className:"py-3 px-2",children:"Actions"})]})}),I.jsxs("tbody",{children:[n.map(u=>I.jsxs("tr",{className:"bg-white dark:bg-gray-800 border-b dark:border-gray-700",children:[I.jsx("td",{className:"py-2 px-2",children:new Date(u.dateTime).toLocaleString()}),I.jsx("td",{className:"py-2 px-2 font-medium",children:u.pair}),I.jsx("td",{className:`py-2 px-2 font-semibold ${u.direction==="Long"?"text-green-500":"text-red-500"}`,children:u.direction}),I.jsx("td",{className:"py-2 px-2",children:u.entryPrice.toFixed(2)}),I.jsx("td",{className:"py-2 px-2",children:u.exitPrice.toFixed(2)}),I.jsx("td",{className:"py-2 px-2",children:u.closeDateTime?new Date(u.closeDateTime).toLocaleString():""}),I.jsx("td",{className:"py-2 px-2",children:u.positionSize.toFixed(4)}),I.jsxs("td",{className:"py-2 px-2",children:[u.leverage,"x"]}),I.jsx("td",{className:"py-2 px-2",children:u.margin.toFixed(2)}),I.jsx("td",{className:"py-2 px-2",children:u.riskReward}),I.jsx("td",{className:"py-2 px-2",children:u.riskAmount.toFixed(2)}),I.jsx("td",{className:"py-2 px-2",children:u.fees.toFixed(2)}),I.jsx("td",{className:`py-2 px-2 font-bold ${r(u.pnlNet)}`,children:u.pnlNet.toFixed(2)}),I.jsxs("td",{className:`py-2 px-2 ${r(u.pnlAssetPercent)}`,children:[u.pnlAssetPercent.toFixed(2),"%"]}),I.jsxs("td",{className:`py-2 px-2 ${r(u.pnlMarginPercent)}`,children:[u.pnlMarginPercent.toFixed(2),"%"]}),I.jsx("td",{className:"py-2 px-2",children:u.capitalEnd.toFixed(2)}),I.jsx("td",{className:"py-2 px-2",children:u.strategy}),I.jsxs("td",{className:"py-2 px-2 space-x-2 whitespace-nowrap",children:[I.jsx("button",{onClick:()=>c(u.id),className:"text-primary hover:brightness-90 font-semibold text-xs",children:"Edit"}),I.jsx("button",{onClick:()=>o(u.id),className:"text-red-600 hover:text-red-500 font-semibold text-xs",children:"Delete"})]})]},u.id)),n.length===0&&I.jsx("tr",{children:I.jsx("td",{colSpan:18,className:"text-center py-4",children:"No trades logged yet."})})]}),I.jsx("tfoot",{children:I.jsxs("tr",{className:"font-bold text-gray-800 dark:text-gray-200 bg-gray-100 dark:bg-gray-700",children:[I.jsx("td",{colSpan:8,className:"py-2 px-2 text-right",children:"Totals:"}),I.jsx("td",{className:"py-2 px-2",children:i.margin.toFixed(2)}),I.jsx("td",{className:"py-2 px-2"}),I.jsx("td",{className:"py-2 px-2",children:i.riskAmount.toFixed(2)}),I.jsx("td",{className:"py-2 px-2",children:i.fees.toFixed(2)}),I.jsx("td",{className:`py-2 px-2 ${r(i.pnlNet)}`,children:i.pnlNet.toFixed(2)}),I.jsx("td",{colSpan:4,className:"py-2 px-2"}),I.jsx("td",{className:"py-2 px-2"})]})})]})})]})},tP=["default","gray","red","green","blue","yellow"],yp={default:{bg:"bg-white dark:bg-gray-800/50",text:"text-gray-700 dark:text-gray-300"},gray:{bg:"bg-gray-200 dark:bg-gray-700",text:"text-gray-800 dark:text-gray-200"},red:{bg:"bg-red-200 dark:bg-red-900/50",text:"text-red-800 dark:text-red-200"},green:{bg:"bg-green-200 dark:bg-green-900/50",text:"text-green-800 dark:text-green-200"},blue:{bg:"bg-blue-200 dark:bg-blue-900/50",text:"text-blue-800 dark:text-blue-200"},yellow:{bg:"bg-yellow-200 dark:bg-yellow-800/50",text:"text-yellow-800 dark:text-yellow-200"}},eP=({note:n,onNoteChange:t})=>{const[e,i]=yt.useState(n.content||""),[r,o]=yt.useState(!1),[c,u]=yt.useState(!1),f=yt.useRef(null);yt.useEffect(()=>{i(n.content||"")},[n.content]);const d=yt.useCallback(()=>{f.current&&u(f.current.scrollHeight>72)},[]);yt.useEffect(()=>{d();const S=new ResizeObserver(d);return f.current&&S.observe(f.current),()=>S.disconnect()},[d,e]);const p=S=>{const D=S.currentTarget.innerHTML;i(D)},_=()=>{n.content!==e&&t({...n,content:e})},b=S=>{t({...n,color:S})},x=S=>{document.execCommand(S,!1)},w=yp[n.color]||yp.default;return I.jsxs("div",{className:`rounded-xl shadow-lg p-6 transition-colors duration-300 border border-gray-200 dark:border-gray-700/50 ${w.bg}`,children:[I.jsxs("div",{className:"flex justify-between items-center mb-4",children:[I.jsx("h2",{className:"text-xl font-bold text-primary",children:"Personal Notes"}),I.jsxs("div",{className:"flex items-center space-x-1",children:[I.jsx("button",{onClick:()=>x("bold"),className:"p-1 rounded hover:bg-gray-300 dark:hover:bg-gray-600",children:I.jsx("b",{children:"B"})}),I.jsx("button",{onClick:()=>x("italic"),className:"p-1 rounded hover:bg-gray-300 dark:hover:bg-gray-600",children:I.jsx("i",{children:"I"})}),I.jsx("button",{onClick:()=>x("underline"),className:"p-1 rounded hover:bg-gray-300 dark:hover:bg-gray-600",children:I.jsx("u",{children:"U"})}),I.jsx("button",{onClick:()=>x("strikeThrough"),className:"p-1 rounded hover:bg-gray-300 dark:hover:bg-gray-600",children:I.jsx("s",{children:"S"})}),I.jsx("div",{className:"w-px h-5 bg-gray-300 dark:bg-gray-600 mx-1"}),tP.map(S=>I.jsx("button",{onClick:()=>b(S),className:`w-5 h-5 rounded-full border-2 ${n.color===S?"border-primary":"border-transparent"} ${yp[S].bg.split(" ")[0]}`},S))]})]}),I.jsx("div",{ref:f,contentEditable:!0,onInput:p,onBlur:_,dangerouslySetInnerHTML:{__html:e},className:`prose dark:prose-invert max-w-none focus:outline-none transition-all duration-300 ${w.text} ${r?"max-h-none":"max-h-18 overflow-hidden"}`,style:{maxHeight:r?"none":"72px"}}),I.jsxs("div",{className:"flex justify-between items-center mt-2 text-xs",children:[c&&I.jsx("button",{onClick:()=>o(!r),className:"text-primary font-semibold",children:r?"Show Less":"Read More"}),I.jsx("span",{className:"ml-auto text-gray-500 dark:text-gray-400",children:"Further reading"})]})]})},nP=()=>{const n=["Log every trade, win or lose.","Be honest with your reasons for entry and exit.","Analyze your emotional state during the trade.","Review your journal weekly to find patterns.","Consistency is more important than perfection."];return I.jsx(Wa,{title:"Journaling Best Practices",children:I.jsx("ul",{className:"space-y-2 list-disc list-inside text-gray-700 dark:text-gray-300",children:n.map((t,e)=>I.jsx("li",{children:t},e))})})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Mu(n){return n+.5|0}const Sr=(n,t,e)=>Math.max(Math.min(n,e),t);function zc(n){return Sr(Mu(n*2.55),0,255)}function Pr(n){return Sr(Mu(n*255),0,255)}function Cs(n){return Sr(Mu(n/2.55)/100,0,1)}function FE(n){return Sr(Mu(n*100),0,100)}const si={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ly=[..."0123456789ABCDEF"],iP=n=>ly[n&15],sP=n=>ly[(n&240)>>4]+ly[n&15],yf=n=>(n&240)>>4===(n&15),rP=n=>yf(n.r)&&yf(n.g)&&yf(n.b)&&yf(n.a);function aP(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&si[n[1]]*17,g:255&si[n[2]]*17,b:255&si[n[3]]*17,a:t===5?si[n[4]]*17:255}:(t===7||t===9)&&(e={r:si[n[1]]<<4|si[n[2]],g:si[n[3]]<<4|si[n[4]],b:si[n[5]]<<4|si[n[6]],a:t===9?si[n[7]]<<4|si[n[8]]:255})),e}const oP=(n,t)=>n<255?t(n):"";function lP(n){var t=rP(n)?iP:sP;return n?"#"+t(n.r)+t(n.g)+t(n.b)+oP(n.a,t):void 0}const cP=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function z1(n,t,e){const i=t*Math.min(e,1-e),r=(o,c=(o+n/30)%12)=>e-i*Math.max(Math.min(c-3,9-c,1),-1);return[r(0),r(8),r(4)]}function uP(n,t,e){const i=(r,o=(r+n/60)%6)=>e-e*t*Math.max(Math.min(o,4-o,1),0);return[i(5),i(3),i(1)]}function hP(n,t,e){const i=z1(n,1,.5);let r;for(t+e>1&&(r=1/(t+e),t*=r,e*=r),r=0;r<3;r++)i[r]*=1-t-e,i[r]+=t;return i}function fP(n,t,e,i,r){return n===r?(t-e)/i+(t<e?6:0):t===r?(e-n)/i+2:(n-t)/i+4}function b_(n){const e=n.r/255,i=n.g/255,r=n.b/255,o=Math.max(e,i,r),c=Math.min(e,i,r),u=(o+c)/2;let f,d,p;return o!==c&&(p=o-c,d=u>.5?p/(2-o-c):p/(o+c),f=fP(e,i,r,p,o),f=f*60+.5),[f|0,d||0,u]}function v_(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(Pr)}function T_(n,t,e){return v_(z1,n,t,e)}function dP(n,t,e){return v_(hP,n,t,e)}function gP(n,t,e){return v_(uP,n,t,e)}function j1(n){return(n%360+360)%360}function mP(n){const t=cP.exec(n);let e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?zc(+t[5]):Pr(+t[5]));const r=j1(+t[2]),o=+t[3]/100,c=+t[4]/100;return t[1]==="hwb"?i=dP(r,o,c):t[1]==="hsv"?i=gP(r,o,c):i=T_(r,o,c),{r:i[0],g:i[1],b:i[2],a:e}}function pP(n,t){var e=b_(n);e[0]=j1(e[0]+t),e=T_(e),n.r=e[0],n.g=e[1],n.b=e[2]}function yP(n){if(!n)return;const t=b_(n),e=t[0],i=FE(t[1]),r=FE(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${r}%, ${Cs(n.a)})`:`hsl(${e}, ${i}%, ${r}%)`}const HE={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},qE={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function _P(){const n={},t=Object.keys(qE),e=Object.keys(HE);let i,r,o,c,u;for(i=0;i<t.length;i++){for(c=u=t[i],r=0;r<e.length;r++)o=e[r],u=u.replace(o,HE[o]);o=parseInt(qE[c],16),n[u]=[o>>16&255,o>>8&255,o&255]}return n}let _f;function bP(n){_f||(_f=_P(),_f.transparent=[0,0,0,0]);const t=_f[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const vP=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function TP(n){const t=vP.exec(n);let e=255,i,r,o;if(t){if(t[7]!==i){const c=+t[7];e=t[8]?zc(c):Sr(c*255,0,255)}return i=+t[1],r=+t[3],o=+t[5],i=255&(t[2]?zc(i):Sr(i,0,255)),r=255&(t[4]?zc(r):Sr(r,0,255)),o=255&(t[6]?zc(o):Sr(o,0,255)),{r:i,g:r,b:o,a:e}}}function EP(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Cs(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const _p=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Yo=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function xP(n,t,e){const i=Yo(Cs(n.r)),r=Yo(Cs(n.g)),o=Yo(Cs(n.b));return{r:Pr(_p(i+e*(Yo(Cs(t.r))-i))),g:Pr(_p(r+e*(Yo(Cs(t.g))-r))),b:Pr(_p(o+e*(Yo(Cs(t.b))-o))),a:n.a+e*(t.a-n.a)}}function bf(n,t,e){if(n){let i=b_(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=T_(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function U1(n,t){return n&&Object.assign(t||{},n)}function GE(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=Pr(n[3]))):(t=U1(n,{r:0,g:0,b:0,a:1}),t.a=Pr(t.a)),t}function SP(n){return n.charAt(0)==="r"?TP(n):mP(n)}class uu{constructor(t){if(t instanceof uu)return t;const e=typeof t;let i;e==="object"?i=GE(t):e==="string"&&(i=aP(t)||bP(t)||SP(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=U1(this._rgb);return t&&(t.a=Cs(t.a)),t}set rgb(t){this._rgb=GE(t)}rgbString(){return this._valid?EP(this._rgb):void 0}hexString(){return this._valid?lP(this._rgb):void 0}hslString(){return this._valid?yP(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,r=t.rgb;let o;const c=e===o?.5:e,u=2*c-1,f=i.a-r.a,d=((u*f===-1?u:(u+f)/(1+u*f))+1)/2;o=1-d,i.r=255&d*i.r+o*r.r+.5,i.g=255&d*i.g+o*r.g+.5,i.b=255&d*i.b+o*r.b+.5,i.a=c*i.a+(1-c)*r.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=xP(this._rgb,t._rgb,e)),this}clone(){return new uu(this.rgb)}alpha(t){return this._rgb.a=Pr(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=Mu(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return bf(this._rgb,2,t),this}darken(t){return bf(this._rgb,2,-t),this}saturate(t){return bf(this._rgb,1,t),this}desaturate(t){return bf(this._rgb,1,-t),this}rotate(t){return pP(this._rgb,t),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Ss(){}const AP=(()=>{let n=0;return()=>n++})();function Lt(n){return n==null}function ye(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Ht(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Ee(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Fn(n,t){return Ee(n)?n:t}function It(n,t){return typeof n>"u"?t:n}const wP=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/t,B1=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function le(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function ne(n,t,e,i){let r,o,c;if(ye(n))for(o=n.length,r=0;r<o;r++)t.call(e,n[r],r);else if(Ht(n))for(c=Object.keys(n),o=c.length,r=0;r<o;r++)t.call(e,n[c[r]],c[r])}function pd(n,t){let e,i,r,o;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(r=n[e],o=t[e],r.datasetIndex!==o.datasetIndex||r.index!==o.index)return!1;return!0}function yd(n){if(ye(n))return n.map(yd);if(Ht(n)){const t=Object.create(null),e=Object.keys(n),i=e.length;let r=0;for(;r<i;++r)t[e[r]]=yd(n[e[r]]);return t}return n}function F1(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function CP(n,t,e,i){if(!F1(n))return;const r=t[n],o=e[n];Ht(r)&&Ht(o)?hu(r,o,i):t[n]=yd(o)}function hu(n,t,e){const i=ye(t)?t:[t],r=i.length;if(!Ht(n))return n;e=e||{};const o=e.merger||CP;let c;for(let u=0;u<r;++u){if(c=i[u],!Ht(c))continue;const f=Object.keys(c);for(let d=0,p=f.length;d<p;++d)o(f[d],n,c,e)}return n}function Qc(n,t){return hu(n,t,{merger:RP})}function RP(n,t,e){if(!F1(n))return;const i=t[n],r=e[n];Ht(i)&&Ht(r)?Qc(i,r):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=yd(r))}const YE={"":n=>n,x:n=>n.x,y:n=>n.y};function IP(n){const t=n.split("."),e=[];let i="";for(const r of t)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function DP(n){const t=IP(n);return e=>{for(const i of t){if(i==="")break;e=e&&e[i]}return e}}function Hr(n,t){return(YE[t]||(YE[t]=DP(t)))(n)}function E_(n){return n.charAt(0).toUpperCase()+n.slice(1)}const fu=n=>typeof n<"u",qr=n=>typeof n=="function",KE=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0};function MP(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const Xt=Math.PI,de=2*Xt,OP=de+Xt,_d=Number.POSITIVE_INFINITY,NP=Xt/180,Re=Xt/2,Ra=Xt/4,WE=Xt*2/3,Ar=Math.log10,is=Math.sign;function $c(n,t,e){return Math.abs(n-t)<e}function XE(n){const t=Math.round(n);n=$c(n,t,n/1e3)?t:n;const e=Math.pow(10,Math.floor(Ar(n))),i=n/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function kP(n){const t=[],e=Math.sqrt(n);let i;for(i=1;i<e;i++)n%i===0&&(t.push(i),t.push(n/i));return e===(e|0)&&t.push(e),t.sort((r,o)=>r-o).pop(),t}function PP(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function ul(n){return!PP(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function VP(n,t){const e=Math.round(n);return e-t<=n&&e+t>=n}function H1(n,t,e){let i,r,o;for(i=0,r=n.length;i<r;i++)o=n[i][e],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function Ti(n){return n*(Xt/180)}function x_(n){return n*(180/Xt)}function QE(n){if(!Ee(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function q1(n,t){const e=t.x-n.x,i=t.y-n.y,r=Math.sqrt(e*e+i*i);let o=Math.atan2(i,e);return o<-.5*Xt&&(o+=de),{angle:o,distance:r}}function cy(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function LP(n,t){return(n-t+OP)%de-Xt}function dn(n){return(n%de+de)%de}function du(n,t,e,i){const r=dn(n),o=dn(t),c=dn(e),u=dn(o-r),f=dn(c-r),d=dn(r-o),p=dn(r-c);return r===o||r===c||i&&o===c||u>f&&d<p}function Je(n,t,e){return Math.max(t,Math.min(e,n))}function zP(n){return Je(n,-32768,32767)}function Ms(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function S_(n,t,e){e=e||(c=>n[c]<t);let i=n.length-1,r=0,o;for(;i-r>1;)o=r+i>>1,e(o)?r=o:i=o;return{lo:r,hi:i}}const Os=(n,t,e,i)=>S_(n,e,i?r=>{const o=n[r][t];return o<e||o===e&&n[r+1][t]===e}:r=>n[r][t]<e),jP=(n,t,e)=>S_(n,e,i=>n[i][t]>=e);function UP(n,t,e){let i=0,r=n.length;for(;i<r&&n[i]<t;)i++;for(;r>i&&n[r-1]>e;)r--;return i>0||r<n.length?n.slice(i,r):n}const G1=["push","pop","shift","splice","unshift"];function BP(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),G1.forEach(e=>{const i="_onData"+E_(e),r=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...o){const c=r.apply(this,o);return n._chartjs.listeners.forEach(u=>{typeof u[i]=="function"&&u[i](...o)}),c}})})}function $E(n,t){const e=n._chartjs;if(!e)return;const i=e.listeners,r=i.indexOf(t);r!==-1&&i.splice(r,1),!(i.length>0)&&(G1.forEach(o=>{delete n[o]}),delete n._chartjs)}function Y1(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}const K1=(function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame})();function W1(n,t){let e=[],i=!1;return function(...r){e=r,i||(i=!0,K1.call(window,()=>{i=!1,n.apply(t,e)}))}}function FP(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}const A_=n=>n==="start"?"left":n==="end"?"right":"center",hn=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,HP=(n,t,e,i)=>n===(i?"left":"right")?e:n==="center"?(t+e)/2:t;function X1(n,t,e){const i=t.length;let r=0,o=i;if(n._sorted){const{iScale:c,vScale:u,_parsed:f}=n,d=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,p=c.axis,{min:_,max:b,minDefined:x,maxDefined:w}=c.getUserBounds();if(x){if(r=Math.min(Os(f,p,_).lo,e?i:Os(t,p,c.getPixelForValue(_)).lo),d){const S=f.slice(0,r+1).reverse().findIndex(D=>!Lt(D[u.axis]));r-=Math.max(0,S)}r=Je(r,0,i-1)}if(w){let S=Math.max(Os(f,c.axis,b,!0).hi+1,e?0:Os(t,p,c.getPixelForValue(b),!0).hi+1);if(d){const D=f.slice(S-1).findIndex(L=>!Lt(L[u.axis]));S+=Math.max(0,D)}o=Je(S,r,i)-r}else o=i-r}return{start:r,count:o}}function Q1(n){const{xScale:t,yScale:e,_scaleRanges:i}=n,r={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!i)return n._scaleRanges=r,!0;const o=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==e.min||i.ymax!==e.max;return Object.assign(i,r),o}const vf=n=>n===0||n===1,JE=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*de/e)),ZE=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*de/e)+1,Jc={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Re)+1,easeOutSine:n=>Math.sin(n*Re),easeInOutSine:n=>-.5*(Math.cos(Xt*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>vf(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>vf(n)?n:JE(n,.075,.3),easeOutElastic:n=>vf(n)?n:ZE(n,.075,.3),easeInOutElastic(n){return vf(n)?n:n<.5?.5*JE(n*2,.1125,.45):.5+.5*ZE(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-Jc.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Jc.easeInBounce(n*2)*.5:Jc.easeOutBounce(n*2-1)*.5+.5};function w_(n){if(n&&typeof n=="object"){const t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function tx(n){return w_(n)?n:new uu(n)}function bp(n){return w_(n)?n:new uu(n).saturate(.5).darken(.1).hexString()}const qP=["x","y","borderWidth","radius","tension"],GP=["color","borderColor","backgroundColor"];function YP(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:GP},numbers:{type:"number",properties:qP}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function KP(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const ex=new Map;function WP(n,t){t=t||{};const e=n+JSON.stringify(t);let i=ex.get(e);return i||(i=new Intl.NumberFormat(n,t),ex.set(e,i)),i}function Ou(n,t,e){return WP(t,e).format(n)}const $1={values(n){return ye(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";const i=this.chart.options.locale;let r,o=n;if(e.length>1){const d=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(d<1e-4||d>1e15)&&(r="scientific"),o=XP(n,e)}const c=Ar(Math.abs(o)),u=isNaN(c)?1:Math.max(Math.min(-1*Math.floor(c),20),0),f={notation:r,minimumFractionDigits:u,maximumFractionDigits:u};return Object.assign(f,this.options.ticks.format),Ou(n,i,f)},logarithmic(n,t,e){if(n===0)return"0";const i=e[t].significand||n/Math.pow(10,Math.floor(Ar(n)));return[1,2,3,5,10,15].includes(i)||t>.8*e.length?$1.numeric.call(this,n,t,e):""}};function XP(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var Kd={formatters:$1};function QP(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Kd.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Xa=Object.create(null),uy=Object.create(null);function Zc(n,t){if(!t)return n;const e=t.split(".");for(let i=0,r=e.length;i<r;++i){const o=e[i];n=n[o]||(n[o]=Object.create(null))}return n}function vp(n,t,e){return typeof t=="string"?hu(Zc(n,t),e):hu(Zc(n,""),t)}class $P{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>bp(r.backgroundColor),this.hoverBorderColor=(i,r)=>bp(r.borderColor),this.hoverColor=(i,r)=>bp(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return vp(this,t,e)}get(t){return Zc(this,t)}describe(t,e){return vp(uy,t,e)}override(t,e){return vp(Xa,t,e)}route(t,e,i,r){const o=Zc(this,t),c=Zc(this,i),u="_"+e;Object.defineProperties(o,{[u]:{value:o[e],writable:!0},[e]:{enumerable:!0,get(){const f=this[u],d=c[r];return Ht(f)?Object.assign({},d,f):It(f,d)},set(f){this[u]=f}}})}apply(t){t.forEach(e=>e(this))}}var _e=new $P({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[YP,KP,QP]);function JP(n){return!n||Lt(n.size)||Lt(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function bd(n,t,e,i,r){let o=t[r];return o||(o=t[r]=n.measureText(r).width,e.push(r)),o>i&&(i=o),i}function ZP(n,t,e,i){i=i||{};let r=i.data=i.data||{},o=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(r=i.data={},o=i.garbageCollect=[],i.font=t),n.save(),n.font=t;let c=0;const u=e.length;let f,d,p,_,b;for(f=0;f<u;f++)if(_=e[f],_!=null&&!ye(_))c=bd(n,r,o,c,_);else if(ye(_))for(d=0,p=_.length;d<p;d++)b=_[d],b!=null&&!ye(b)&&(c=bd(n,r,o,c,b));n.restore();const x=o.length/2;if(x>e.length){for(f=0;f<x;f++)delete r[o[f]];o.splice(0,x)}return c}function Ia(n,t,e){const i=n.currentDevicePixelRatio,r=e!==0?Math.max(e/2,.5):0;return Math.round((t-r)*i)/i+r}function nx(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function hy(n,t,e,i){J1(n,t,e,i,null)}function J1(n,t,e,i,r){let o,c,u,f,d,p,_,b;const x=t.pointStyle,w=t.rotation,S=t.radius;let D=(w||0)*NP;if(x&&typeof x=="object"&&(o=x.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){n.save(),n.translate(e,i),n.rotate(D),n.drawImage(x,-x.width/2,-x.height/2,x.width,x.height),n.restore();return}if(!(isNaN(S)||S<=0)){switch(n.beginPath(),x){default:r?n.ellipse(e,i,r/2,S,0,0,de):n.arc(e,i,S,0,de),n.closePath();break;case"triangle":p=r?r/2:S,n.moveTo(e+Math.sin(D)*p,i-Math.cos(D)*S),D+=WE,n.lineTo(e+Math.sin(D)*p,i-Math.cos(D)*S),D+=WE,n.lineTo(e+Math.sin(D)*p,i-Math.cos(D)*S),n.closePath();break;case"rectRounded":d=S*.516,f=S-d,c=Math.cos(D+Ra)*f,_=Math.cos(D+Ra)*(r?r/2-d:f),u=Math.sin(D+Ra)*f,b=Math.sin(D+Ra)*(r?r/2-d:f),n.arc(e-_,i-u,d,D-Xt,D-Re),n.arc(e+b,i-c,d,D-Re,D),n.arc(e+_,i+u,d,D,D+Re),n.arc(e-b,i+c,d,D+Re,D+Xt),n.closePath();break;case"rect":if(!w){f=Math.SQRT1_2*S,p=r?r/2:f,n.rect(e-p,i-f,2*p,2*f);break}D+=Ra;case"rectRot":_=Math.cos(D)*(r?r/2:S),c=Math.cos(D)*S,u=Math.sin(D)*S,b=Math.sin(D)*(r?r/2:S),n.moveTo(e-_,i-u),n.lineTo(e+b,i-c),n.lineTo(e+_,i+u),n.lineTo(e-b,i+c),n.closePath();break;case"crossRot":D+=Ra;case"cross":_=Math.cos(D)*(r?r/2:S),c=Math.cos(D)*S,u=Math.sin(D)*S,b=Math.sin(D)*(r?r/2:S),n.moveTo(e-_,i-u),n.lineTo(e+_,i+u),n.moveTo(e+b,i-c),n.lineTo(e-b,i+c);break;case"star":_=Math.cos(D)*(r?r/2:S),c=Math.cos(D)*S,u=Math.sin(D)*S,b=Math.sin(D)*(r?r/2:S),n.moveTo(e-_,i-u),n.lineTo(e+_,i+u),n.moveTo(e+b,i-c),n.lineTo(e-b,i+c),D+=Ra,_=Math.cos(D)*(r?r/2:S),c=Math.cos(D)*S,u=Math.sin(D)*S,b=Math.sin(D)*(r?r/2:S),n.moveTo(e-_,i-u),n.lineTo(e+_,i+u),n.moveTo(e+b,i-c),n.lineTo(e-b,i+c);break;case"line":c=r?r/2:Math.cos(D)*S,u=Math.sin(D)*S,n.moveTo(e-c,i-u),n.lineTo(e+c,i+u);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(D)*(r?r/2:S),i+Math.sin(D)*S);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function Ns(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function Wd(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function Xd(n){n.restore()}function tV(n,t,e,i,r){if(!t)return n.lineTo(e.x,e.y);if(r==="middle"){const o=(t.x+e.x)/2;n.lineTo(o,t.y),n.lineTo(o,e.y)}else r==="after"!=!!i?n.lineTo(t.x,e.y):n.lineTo(e.x,t.y);n.lineTo(e.x,e.y)}function eV(n,t,e,i){if(!t)return n.lineTo(e.x,e.y);n.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?e.cp2x:e.cp1x,i?e.cp2y:e.cp1y,e.x,e.y)}function nV(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),Lt(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function iV(n,t,e,i,r){if(r.strikethrough||r.underline){const o=n.measureText(i),c=t-o.actualBoundingBoxLeft,u=t+o.actualBoundingBoxRight,f=e-o.actualBoundingBoxAscent,d=e+o.actualBoundingBoxDescent,p=r.strikethrough?(f+d)/2:d;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=r.decorationWidth||2,n.moveTo(c,p),n.lineTo(u,p),n.stroke()}}function sV(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function Qa(n,t,e,i,r,o={}){const c=ye(t)?t:[t],u=o.strokeWidth>0&&o.strokeColor!=="";let f,d;for(n.save(),n.font=r.string,nV(n,o),f=0;f<c.length;++f)d=c[f],o.backdrop&&sV(n,o.backdrop),u&&(o.strokeColor&&(n.strokeStyle=o.strokeColor),Lt(o.strokeWidth)||(n.lineWidth=o.strokeWidth),n.strokeText(d,e,i,o.maxWidth)),n.fillText(d,e,i,o.maxWidth),iV(n,e,i,d,o),i+=Number(r.lineHeight);n.restore()}function gu(n,t){const{x:e,y:i,w:r,h:o,radius:c}=t;n.arc(e+c.topLeft,i+c.topLeft,c.topLeft,1.5*Xt,Xt,!0),n.lineTo(e,i+o-c.bottomLeft),n.arc(e+c.bottomLeft,i+o-c.bottomLeft,c.bottomLeft,Xt,Re,!0),n.lineTo(e+r-c.bottomRight,i+o),n.arc(e+r-c.bottomRight,i+o-c.bottomRight,c.bottomRight,Re,0,!0),n.lineTo(e+r,i+c.topRight),n.arc(e+r-c.topRight,i+c.topRight,c.topRight,0,-Re,!0),n.lineTo(e+c.topLeft,i)}const rV=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,aV=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function oV(n,t){const e=(""+n).match(rV);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}const lV=n=>+n||0;function C_(n,t){const e={},i=Ht(t),r=i?Object.keys(t):t,o=Ht(n)?i?c=>It(n[c],n[t[c]]):c=>n[c]:()=>n;for(const c of r)e[c]=lV(o(c));return e}function Z1(n){return C_(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Ua(n){return C_(n,["topLeft","topRight","bottomLeft","bottomRight"])}function yn(n){const t=Z1(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Ye(n,t){n=n||{},t=t||_e.font;let e=It(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=It(n.style,t.style);i&&!(""+i).match(aV)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:It(n.family,t.family),lineHeight:oV(It(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:It(n.weight,t.weight),string:""};return r.string=JP(r),r}function jc(n,t,e,i){let r,o,c;for(r=0,o=n.length;r<o;++r)if(c=n[r],c!==void 0&&c!==void 0)return c}function cV(n,t,e){const{min:i,max:r}=n,o=B1(t,(r-i)/2),c=(u,f)=>e&&u===0?0:u+f;return{min:c(i,-Math.abs(o)),max:c(r,o)}}function Qr(n,t){return Object.assign(Object.create(n),t)}function R_(n,t=[""],e,i,r=()=>n[0]){const o=e||n;typeof i>"u"&&(i=iw("_fallback",n));const c={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:o,_fallback:i,_getTarget:r,override:u=>R_([u,...n],t,o,i)};return new Proxy(c,{deleteProperty(u,f){return delete u[f],delete u._keys,delete n[0][f],!0},get(u,f){return ew(u,f,()=>yV(f,t,n,u))},getOwnPropertyDescriptor(u,f){return Reflect.getOwnPropertyDescriptor(u._scopes[0],f)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(u,f){return sx(u).includes(f)},ownKeys(u){return sx(u)},set(u,f,d){const p=u._storage||(u._storage=r());return u[f]=p[f]=d,delete u._keys,!0}})}function hl(n,t,e,i){const r={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:tw(n,i),setContext:o=>hl(n,o,e,i),override:o=>hl(n.override(o),t,e,i)};return new Proxy(r,{deleteProperty(o,c){return delete o[c],delete n[c],!0},get(o,c,u){return ew(o,c,()=>hV(o,c,u))},getOwnPropertyDescriptor(o,c){return o._descriptors.allKeys?Reflect.has(n,c)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,c)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(o,c){return Reflect.has(n,c)},ownKeys(){return Reflect.ownKeys(n)},set(o,c,u){return n[c]=u,delete o[c],!0}})}function tw(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:r=t.allKeys}=n;return{allKeys:r,scriptable:e,indexable:i,isScriptable:qr(e)?e:()=>e,isIndexable:qr(i)?i:()=>i}}const uV=(n,t)=>n?n+E_(t):t,I_=(n,t)=>Ht(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function ew(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];const i=e();return n[t]=i,i}function hV(n,t,e){const{_proxy:i,_context:r,_subProxy:o,_descriptors:c}=n;let u=i[t];return qr(u)&&c.isScriptable(t)&&(u=fV(t,u,n,e)),ye(u)&&u.length&&(u=dV(t,u,n,c.isIndexable)),I_(t,u)&&(u=hl(u,r,o&&o[t],c)),u}function fV(n,t,e,i){const{_proxy:r,_context:o,_subProxy:c,_stack:u}=e;if(u.has(n))throw new Error("Recursion detected: "+Array.from(u).join("->")+"->"+n);u.add(n);let f=t(o,c||i);return u.delete(n),I_(n,f)&&(f=D_(r._scopes,r,n,f)),f}function dV(n,t,e,i){const{_proxy:r,_context:o,_subProxy:c,_descriptors:u}=e;if(typeof o.index<"u"&&i(n))return t[o.index%t.length];if(Ht(t[0])){const f=t,d=r._scopes.filter(p=>p!==f);t=[];for(const p of f){const _=D_(d,r,n,p);t.push(hl(_,o,c&&c[n],u))}}return t}function nw(n,t,e){return qr(n)?n(t,e):n}const gV=(n,t)=>n===!0?t:typeof n=="string"?Hr(t,n):void 0;function mV(n,t,e,i,r){for(const o of t){const c=gV(e,o);if(c){n.add(c);const u=nw(c._fallback,e,r);if(typeof u<"u"&&u!==e&&u!==i)return u}else if(c===!1&&typeof i<"u"&&e!==i)return null}return!1}function D_(n,t,e,i){const r=t._rootScopes,o=nw(t._fallback,e,i),c=[...n,...r],u=new Set;u.add(i);let f=ix(u,c,e,o||e,i);return f===null||typeof o<"u"&&o!==e&&(f=ix(u,c,o,f,i),f===null)?!1:R_(Array.from(u),[""],r,o,()=>pV(t,e,i))}function ix(n,t,e,i,r){for(;e;)e=mV(n,t,e,i,r);return e}function pV(n,t,e){const i=n._getTarget();t in i||(i[t]={});const r=i[t];return ye(r)&&Ht(e)?e:r||{}}function yV(n,t,e,i){let r;for(const o of t)if(r=iw(uV(o,n),e),typeof r<"u")return I_(n,r)?D_(e,i,n,r):r}function iw(n,t){for(const e of t){if(!e)continue;const i=e[n];if(typeof i<"u")return i}}function sx(n){let t=n._keys;return t||(t=n._keys=_V(n._scopes)),t}function _V(n){const t=new Set;for(const e of n)for(const i of Object.keys(e).filter(r=>!r.startsWith("_")))t.add(i);return Array.from(t)}function sw(n,t,e,i){const{iScale:r}=n,{key:o="r"}=this._parsing,c=new Array(i);let u,f,d,p;for(u=0,f=i;u<f;++u)d=u+e,p=t[d],c[u]={r:r.parse(Hr(p,o),d)};return c}const bV=Number.EPSILON||1e-14,fl=(n,t)=>t<n.length&&!n[t].skip&&n[t],rw=n=>n==="x"?"y":"x";function vV(n,t,e,i){const r=n.skip?t:n,o=t,c=e.skip?t:e,u=cy(o,r),f=cy(c,o);let d=u/(u+f),p=f/(u+f);d=isNaN(d)?0:d,p=isNaN(p)?0:p;const _=i*d,b=i*p;return{previous:{x:o.x-_*(c.x-r.x),y:o.y-_*(c.y-r.y)},next:{x:o.x+b*(c.x-r.x),y:o.y+b*(c.y-r.y)}}}function TV(n,t,e){const i=n.length;let r,o,c,u,f,d=fl(n,0);for(let p=0;p<i-1;++p)if(f=d,d=fl(n,p+1),!(!f||!d)){if($c(t[p],0,bV)){e[p]=e[p+1]=0;continue}r=e[p]/t[p],o=e[p+1]/t[p],u=Math.pow(r,2)+Math.pow(o,2),!(u<=9)&&(c=3/Math.sqrt(u),e[p]=r*c*t[p],e[p+1]=o*c*t[p])}}function EV(n,t,e="x"){const i=rw(e),r=n.length;let o,c,u,f=fl(n,0);for(let d=0;d<r;++d){if(c=u,u=f,f=fl(n,d+1),!u)continue;const p=u[e],_=u[i];c&&(o=(p-c[e])/3,u[`cp1${e}`]=p-o,u[`cp1${i}`]=_-o*t[d]),f&&(o=(f[e]-p)/3,u[`cp2${e}`]=p+o,u[`cp2${i}`]=_+o*t[d])}}function xV(n,t="x"){const e=rw(t),i=n.length,r=Array(i).fill(0),o=Array(i);let c,u,f,d=fl(n,0);for(c=0;c<i;++c)if(u=f,f=d,d=fl(n,c+1),!!f){if(d){const p=d[t]-f[t];r[c]=p!==0?(d[e]-f[e])/p:0}o[c]=u?d?is(r[c-1])!==is(r[c])?0:(r[c-1]+r[c])/2:r[c-1]:r[c]}TV(n,r,o),EV(n,o,t)}function Tf(n,t,e){return Math.max(Math.min(n,e),t)}function SV(n,t){let e,i,r,o,c,u=Ns(n[0],t);for(e=0,i=n.length;e<i;++e)c=o,o=u,u=e<i-1&&Ns(n[e+1],t),o&&(r=n[e],c&&(r.cp1x=Tf(r.cp1x,t.left,t.right),r.cp1y=Tf(r.cp1y,t.top,t.bottom)),u&&(r.cp2x=Tf(r.cp2x,t.left,t.right),r.cp2y=Tf(r.cp2y,t.top,t.bottom)))}function AV(n,t,e,i,r){let o,c,u,f;if(t.spanGaps&&(n=n.filter(d=>!d.skip)),t.cubicInterpolationMode==="monotone")xV(n,r);else{let d=i?n[n.length-1]:n[0];for(o=0,c=n.length;o<c;++o)u=n[o],f=vV(d,u,n[Math.min(o+1,c-(i?0:1))%c],t.tension),u.cp1x=f.previous.x,u.cp1y=f.previous.y,u.cp2x=f.next.x,u.cp2y=f.next.y,d=u}t.capBezierPoints&&SV(n,e)}function M_(){return typeof window<"u"&&typeof document<"u"}function O_(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function vd(n,t,e){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=n,i}const Qd=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function wV(n,t){return Qd(n).getPropertyValue(t)}const CV=["top","right","bottom","left"];function Ba(n,t,e){const i={};e=e?"-"+e:"";for(let r=0;r<4;r++){const o=CV[r];i[o]=parseFloat(n[t+"-"+o+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const RV=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function IV(n,t){const e=n.touches,i=e&&e.length?e[0]:n,{offsetX:r,offsetY:o}=i;let c=!1,u,f;if(RV(r,o,n.target))u=r,f=o;else{const d=t.getBoundingClientRect();u=i.clientX-d.left,f=i.clientY-d.top,c=!0}return{x:u,y:f,box:c}}function Na(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:i}=t,r=Qd(e),o=r.boxSizing==="border-box",c=Ba(r,"padding"),u=Ba(r,"border","width"),{x:f,y:d,box:p}=IV(n,e),_=c.left+(p&&u.left),b=c.top+(p&&u.top);let{width:x,height:w}=t;return o&&(x-=c.width+u.width,w-=c.height+u.height),{x:Math.round((f-_)/x*e.width/i),y:Math.round((d-b)/w*e.height/i)}}function DV(n,t,e){let i,r;if(t===void 0||e===void 0){const o=n&&O_(n);if(!o)t=n.clientWidth,e=n.clientHeight;else{const c=o.getBoundingClientRect(),u=Qd(o),f=Ba(u,"border","width"),d=Ba(u,"padding");t=c.width-d.width-f.width,e=c.height-d.height-f.height,i=vd(u.maxWidth,o,"clientWidth"),r=vd(u.maxHeight,o,"clientHeight")}}return{width:t,height:e,maxWidth:i||_d,maxHeight:r||_d}}const wr=n=>Math.round(n*10)/10;function MV(n,t,e,i){const r=Qd(n),o=Ba(r,"margin"),c=vd(r.maxWidth,n,"clientWidth")||_d,u=vd(r.maxHeight,n,"clientHeight")||_d,f=DV(n,t,e);let{width:d,height:p}=f;if(r.boxSizing==="content-box"){const b=Ba(r,"border","width"),x=Ba(r,"padding");d-=x.width+b.width,p-=x.height+b.height}return d=Math.max(0,d-o.width),p=Math.max(0,i?d/i:p-o.height),d=wr(Math.min(d,c,f.maxWidth)),p=wr(Math.min(p,u,f.maxHeight)),d&&!p&&(p=wr(d/2)),(t!==void 0||e!==void 0)&&i&&f.height&&p>f.height&&(p=f.height,d=wr(Math.floor(p*i))),{width:d,height:p}}function rx(n,t,e){const i=t||1,r=wr(n.height*i),o=wr(n.width*i);n.height=wr(n.height),n.width=wr(n.width);const c=n.canvas;return c.style&&(e||!c.style.height&&!c.style.width)&&(c.style.height=`${n.height}px`,c.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||c.height!==r||c.width!==o?(n.currentDevicePixelRatio=i,c.height=r,c.width=o,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const OV=(function(){let n=!1;try{const t={get passive(){return n=!0,!1}};M_()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n})();function ax(n,t){const e=wV(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function ka(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}}function NV(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:i==="middle"?e<.5?n.y:t.y:i==="after"?e<1?n.y:t.y:e>0?t.y:n.y}}function kV(n,t,e,i){const r={x:n.cp2x,y:n.cp2y},o={x:t.cp1x,y:t.cp1y},c=ka(n,r,e),u=ka(r,o,e),f=ka(o,t,e),d=ka(c,u,e),p=ka(u,f,e);return ka(d,p,e)}const PV=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},VV=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function nl(n,t,e){return n?PV(t,e):VV()}function aw(n,t){let e,i;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function ow(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function lw(n){return n==="angle"?{between:du,compare:LP,normalize:dn}:{between:Ms,compare:(t,e)=>t-e,normalize:t=>t}}function ox({start:n,end:t,count:e,loop:i,style:r}){return{start:n%e,end:t%e,loop:i&&(t-n+1)%e===0,style:r}}function LV(n,t,e){const{property:i,start:r,end:o}=e,{between:c,normalize:u}=lw(i),f=t.length;let{start:d,end:p,loop:_}=n,b,x;if(_){for(d+=f,p+=f,b=0,x=f;b<x&&c(u(t[d%f][i]),r,o);++b)d--,p--;d%=f,p%=f}return p<d&&(p+=f),{start:d,end:p,loop:_,style:n.style}}function cw(n,t,e){if(!e)return[n];const{property:i,start:r,end:o}=e,c=t.length,{compare:u,between:f,normalize:d}=lw(i),{start:p,end:_,loop:b,style:x}=LV(n,t,e),w=[];let S=!1,D=null,L,F,W;const J=()=>f(r,W,L)&&u(r,W)!==0,$=()=>u(o,L)===0||f(o,W,L),nt=()=>S||J(),M=()=>!S||$();for(let C=p,O=p;C<=_;++C)F=t[C%c],!F.skip&&(L=d(F[i]),L!==W&&(S=f(L,r,o),D===null&&nt()&&(D=u(L,r)===0?C:O),D!==null&&M()&&(w.push(ox({start:D,end:C,loop:b,count:c,style:x})),D=null),O=C,W=L));return D!==null&&w.push(ox({start:D,end:_,loop:b,count:c,style:x})),w}function uw(n,t){const e=[],i=n.segments;for(let r=0;r<i.length;r++){const o=cw(i[r],n.points,t);o.length&&e.push(...o)}return e}function zV(n,t,e,i){let r=0,o=t-1;if(e&&!i)for(;r<t&&!n[r].skip;)r++;for(;r<t&&n[r].skip;)r++;for(r%=t,e&&(o+=r);o>r&&n[o%t].skip;)o--;return o%=t,{start:r,end:o}}function jV(n,t,e,i){const r=n.length,o=[];let c=t,u=n[t],f;for(f=t+1;f<=e;++f){const d=n[f%r];d.skip||d.stop?u.skip||(i=!1,o.push({start:t%r,end:(f-1)%r,loop:i}),t=c=d.stop?f:null):(c=f,u.skip&&(t=f)),u=d}return c!==null&&o.push({start:t%r,end:c%r,loop:i}),o}function UV(n,t){const e=n.points,i=n.options.spanGaps,r=e.length;if(!r)return[];const o=!!n._loop,{start:c,end:u}=zV(e,r,o,i);if(i===!0)return lx(n,[{start:c,end:u,loop:o}],e,t);const f=u<c?u+r:u,d=!!n._fullLoop&&c===0&&u===r-1;return lx(n,jV(e,c,f,d),e,t)}function lx(n,t,e,i){return!i||!i.setContext||!e?t:BV(n,t,e,i)}function BV(n,t,e,i){const r=n._chart.getContext(),o=cx(n.options),{_datasetIndex:c,options:{spanGaps:u}}=n,f=e.length,d=[];let p=o,_=t[0].start,b=_;function x(w,S,D,L){const F=u?-1:1;if(w!==S){for(w+=f;e[w%f].skip;)w-=F;for(;e[S%f].skip;)S+=F;w%f!==S%f&&(d.push({start:w%f,end:S%f,loop:D,style:L}),p=L,_=S%f)}}for(const w of t){_=u?_:w.start;let S=e[_%f],D;for(b=_+1;b<=w.end;b++){const L=e[b%f];D=cx(i.setContext(Qr(r,{type:"segment",p0:S,p1:L,p0DataIndex:(b-1)%f,p1DataIndex:b%f,datasetIndex:c}))),FV(D,p)&&x(_,b-1,w.loop,p),S=L,p=D}_<b-1&&x(_,b-1,w.loop,p)}return d}function cx(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function FV(n,t){if(!t)return!1;const e=[],i=function(r,o){return w_(o)?(e.includes(o)||e.push(o),e.indexOf(o)):o};return JSON.stringify(n,i)!==JSON.stringify(t,i)}function Ef(n,t,e){return n.options.clip?n[e]:t[e]}function HV(n,t){const{xScale:e,yScale:i}=n;return e&&i?{left:Ef(e,t,"left"),right:Ef(e,t,"right"),top:Ef(i,t,"top"),bottom:Ef(i,t,"bottom")}:t}function hw(n,t){const e=t._clip;if(e.disabled)return!1;const i=HV(t,n.chartArea);return{left:e.left===!1?0:i.left-(e.left===!0?0:e.left),right:e.right===!1?n.width:i.right+(e.right===!0?0:e.right),top:e.top===!1?0:i.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?n.height:i.bottom+(e.bottom===!0?0:e.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class qV{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,r){const o=e.listeners[r],c=e.duration;o.forEach(u=>u({chart:t,initial:e.initial,numSteps:c,currentStep:Math.min(i-e.start,c)}))}_refresh(){this._request||(this._running=!0,this._request=K1.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const o=i.items;let c=o.length-1,u=!1,f;for(;c>=0;--c)f=o[c],f._active?(f._total>i.duration&&(i.duration=f._total),f.tick(t),u=!0):(o[c]=o[o.length-1],o.pop());u&&(r.draw(),this._notify(r,i,t,"progress")),o.length||(i.running=!1,this._notify(r,i,t,"complete"),i.initial=!1),e+=o.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var As=new qV;const ux="transparent",GV={boolean(n,t,e){return e>.5?t:n},color(n,t,e){const i=tx(n||ux),r=i.valid&&tx(t||ux);return r&&r.valid?r.mix(i,e).hexString():t},number(n,t,e){return n+(t-n)*e}};class YV{constructor(t,e,i,r){const o=e[i];r=jc([t.to,r,o,t.from]);const c=jc([t.from,o,r]);this._active=!0,this._fn=t.fn||GV[t.type||typeof c],this._easing=Jc[t.easing]||Jc.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=c,this._to=r,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const r=this._target[this._prop],o=i-this._start,c=this._duration-o;this._start=i,this._duration=Math.floor(Math.max(c,t.duration)),this._total+=o,this._loop=!!t.loop,this._to=jc([t.to,e,r,t.from]),this._from=jc([t.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,r=this._prop,o=this._from,c=this._loop,u=this._to;let f;if(this._active=o!==u&&(c||e<i),!this._active){this._target[r]=u,this._notify(!0);return}if(e<0){this._target[r]=o;return}f=e/i%2,f=c&&f>1?2-f:f,f=this._easing(Math.min(1,Math.max(0,f))),this._target[r]=this._fn(o,u,f)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][e]()}}class fw{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Ht(t))return;const e=Object.keys(_e.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const o=t[r];if(!Ht(o))return;const c={};for(const u of e)c[u]=o[u];(ye(o.properties)&&o.properties||[r]).forEach(u=>{(u===r||!i.has(u))&&i.set(u,c)})})}_animateOptions(t,e){const i=e.options,r=WV(t,i);if(!r)return[];const o=this._createAnimations(r,i);return i.$shared&&KV(t.options.$animations,i).then(()=>{t.options=i},()=>{}),o}_createAnimations(t,e){const i=this._properties,r=[],o=t.$animations||(t.$animations={}),c=Object.keys(e),u=Date.now();let f;for(f=c.length-1;f>=0;--f){const d=c[f];if(d.charAt(0)==="$")continue;if(d==="options"){r.push(...this._animateOptions(t,e));continue}const p=e[d];let _=o[d];const b=i.get(d);if(_)if(b&&_.active()){_.update(b,p,u);continue}else _.cancel();if(!b||!b.duration){t[d]=p;continue}o[d]=_=new YV(b,t,d,p),r.push(_)}return r}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const i=this._createAnimations(t,e);if(i.length)return As.add(this._chart,i),!0}}function KV(n,t){const e=[],i=Object.keys(t);for(let r=0;r<i.length;r++){const o=n[i[r]];o&&o.active()&&e.push(o.wait())}return Promise.all(e)}function WV(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function hx(n,t){const e=n&&n.options||{},i=e.reverse,r=e.min===void 0?t:0,o=e.max===void 0?t:0;return{start:i?o:r,end:i?r:o}}function XV(n,t,e){if(e===!1)return!1;const i=hx(n,e),r=hx(t,e);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function QV(n){let t,e,i,r;return Ht(n)?(t=n.top,e=n.right,i=n.bottom,r=n.left):t=e=i=r=n,{top:t,right:e,bottom:i,left:r,disabled:n===!1}}function dw(n,t){const e=[],i=n._getSortedDatasetMetas(t);let r,o;for(r=0,o=i.length;r<o;++r)e.push(i[r].index);return e}function fx(n,t,e,i={}){const r=n.keys,o=i.mode==="single";let c,u,f,d;if(t===null)return;let p=!1;for(c=0,u=r.length;c<u;++c){if(f=+r[c],f===e){if(p=!0,i.all)continue;break}d=n.values[f],Ee(d)&&(o||t===0||is(t)===is(d))&&(t+=d)}return!p&&!i.all?0:t}function $V(n,t){const{iScale:e,vScale:i}=t,r=e.axis==="x"?"x":"y",o=i.axis==="x"?"x":"y",c=Object.keys(n),u=new Array(c.length);let f,d,p;for(f=0,d=c.length;f<d;++f)p=c[f],u[f]={[r]:p,[o]:n[p]};return u}function Tp(n,t){const e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function JV(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function ZV(n){const{min:t,max:e,minDefined:i,maxDefined:r}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:r?e:Number.POSITIVE_INFINITY}}function tL(n,t,e){const i=n[t]||(n[t]={});return i[e]||(i[e]={})}function dx(n,t,e,i){for(const r of t.getMatchingVisibleMetas(i).reverse()){const o=n[r.index];if(e&&o>0||!e&&o<0)return r.index}return null}function gx(n,t){const{chart:e,_cachedMeta:i}=n,r=e._stacks||(e._stacks={}),{iScale:o,vScale:c,index:u}=i,f=o.axis,d=c.axis,p=JV(o,c,i),_=t.length;let b;for(let x=0;x<_;++x){const w=t[x],{[f]:S,[d]:D}=w,L=w._stacks||(w._stacks={});b=L[d]=tL(r,p,S),b[u]=D,b._top=dx(b,c,!0,i.type),b._bottom=dx(b,c,!1,i.type);const F=b._visualValues||(b._visualValues={});F[u]=D}}function Ep(n,t){const e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function eL(n,t){return Qr(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function nL(n,t,e){return Qr(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function Cc(n,t){const e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(const r of t){const o=r._stacks;if(!o||o[i]===void 0||o[i][e]===void 0)return;delete o[i][e],o[i]._visualValues!==void 0&&o[i]._visualValues[e]!==void 0&&delete o[i]._visualValues[e]}}}const xp=n=>n==="reset"||n==="none",mx=(n,t)=>t?n:Object.assign({},n),iL=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:dw(e,!0),values:null};class Si{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Tp(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Cc(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),r=(_,b,x,w)=>_==="x"?b:_==="r"?w:x,o=e.xAxisID=It(i.xAxisID,Ep(t,"x")),c=e.yAxisID=It(i.yAxisID,Ep(t,"y")),u=e.rAxisID=It(i.rAxisID,Ep(t,"r")),f=e.indexAxis,d=e.iAxisID=r(f,o,c,u),p=e.vAxisID=r(f,c,o,u);e.xScale=this.getScaleForId(o),e.yScale=this.getScaleForId(c),e.rScale=this.getScaleForId(u),e.iScale=this.getScaleForId(d),e.vScale=this.getScaleForId(p)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&$E(this._data,this),t._stacked&&Cc(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(Ht(e)){const r=this._cachedMeta;this._data=$V(e,r)}else if(i!==e){if(i){$E(i,this);const r=this._cachedMeta;Cc(r),r._parsed=[]}e&&Object.isExtensible(e)&&BP(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const o=e._stacked;e._stacked=Tp(e.vScale,e),e.stack!==i.stack&&(r=!0,Cc(e),e.stack=i.stack),this._resyncElements(t),(r||o!==e._stacked)&&(gx(this,e._parsed),e._stacked=Tp(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:r}=this,{iScale:o,_stacked:c}=i,u=o.axis;let f=t===0&&e===r.length?!0:i._sorted,d=t>0&&i._parsed[t-1],p,_,b;if(this._parsing===!1)i._parsed=r,i._sorted=!0,b=r;else{ye(r[t])?b=this.parseArrayData(i,r,t,e):Ht(r[t])?b=this.parseObjectData(i,r,t,e):b=this.parsePrimitiveData(i,r,t,e);const x=()=>_[u]===null||d&&_[u]<d[u];for(p=0;p<e;++p)i._parsed[p+t]=_=b[p],f&&(x()&&(f=!1),d=_);i._sorted=f}c&&gx(this,b)}parsePrimitiveData(t,e,i,r){const{iScale:o,vScale:c}=t,u=o.axis,f=c.axis,d=o.getLabels(),p=o===c,_=new Array(r);let b,x,w;for(b=0,x=r;b<x;++b)w=b+i,_[b]={[u]:p||o.parse(d[w],w),[f]:c.parse(e[w],w)};return _}parseArrayData(t,e,i,r){const{xScale:o,yScale:c}=t,u=new Array(r);let f,d,p,_;for(f=0,d=r;f<d;++f)p=f+i,_=e[p],u[f]={x:o.parse(_[0],p),y:c.parse(_[1],p)};return u}parseObjectData(t,e,i,r){const{xScale:o,yScale:c}=t,{xAxisKey:u="x",yAxisKey:f="y"}=this._parsing,d=new Array(r);let p,_,b,x;for(p=0,_=r;p<_;++p)b=p+i,x=e[b],d[p]={x:o.parse(Hr(x,u),b),y:c.parse(Hr(x,f),b)};return d}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const r=this.chart,o=this._cachedMeta,c=e[t.axis],u={keys:dw(r,!0),values:e._stacks[t.axis]._visualValues};return fx(u,c,o.index,{mode:i})}updateRangeFromParsed(t,e,i,r){const o=i[e.axis];let c=o===null?NaN:o;const u=r&&i._stacks[e.axis];r&&u&&(r.values=u,c=fx(r,o,this._cachedMeta.index)),t.min=Math.min(t.min,c),t.max=Math.max(t.max,c)}getMinMax(t,e){const i=this._cachedMeta,r=i._parsed,o=i._sorted&&t===i.iScale,c=r.length,u=this._getOtherScale(t),f=iL(e,i,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:p,max:_}=ZV(u);let b,x;function w(){x=r[b];const S=x[u.axis];return!Ee(x[t.axis])||p>S||_<S}for(b=0;b<c&&!(!w()&&(this.updateRangeFromParsed(d,t,x,f),o));++b);if(o){for(b=c-1;b>=0;--b)if(!w()){this.updateRangeFromParsed(d,t,x,f);break}}return d}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let r,o,c;for(r=0,o=e.length;r<o;++r)c=e[r][t.axis],Ee(c)&&i.push(c);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,r=e.vScale,o=this.getParsed(t);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:r?""+r.getLabelForValue(o[r.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=QV(It(this.options.clip,XV(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,r=i.data||[],o=e.chartArea,c=[],u=this._drawStart||0,f=this._drawCount||r.length-u,d=this.options.drawActiveElementsOnTop;let p;for(i.dataset&&i.dataset.draw(t,o,u,f),p=u;p<u+f;++p){const _=r[p];_.hidden||(_.active&&d?c.push(_):_.draw(t,o))}for(p=0;p<c.length;++p)c[p].draw(t,o)}getStyle(t,e){const i=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const r=this.getDataset();let o;if(t>=0&&t<this._cachedMeta.data.length){const c=this._cachedMeta.data[t];o=c.$context||(c.$context=nL(this.getContext(),t,c)),o.parsed=this.getParsed(t),o.raw=r.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=eL(this.chart.getContext(),this.index)),o.dataset=r,o.index=o.datasetIndex=this.index;return o.active=!!e,o.mode=i,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const r=e==="active",o=this._cachedDataOpts,c=t+"-"+e,u=o[c],f=this.enableOptionSharing&&fu(i);if(u)return mx(u,f);const d=this.chart.config,p=d.datasetElementScopeKeys(this._type,t),_=r?[`${t}Hover`,"hover",t,""]:[t,""],b=d.getOptionScopes(this.getDataset(),p),x=Object.keys(_e.elements[t]),w=()=>this.getContext(i,r,e),S=d.resolveNamedOptions(b,x,w,_);return S.$shared&&(S.$shared=f,o[c]=Object.freeze(mx(S,f))),S}_resolveAnimations(t,e,i){const r=this.chart,o=this._cachedDataOpts,c=`animation-${e}`,u=o[c];if(u)return u;let f;if(r.options.animation!==!1){const p=this.chart.config,_=p.datasetAnimationScopeKeys(this._type,e),b=p.getOptionScopes(this.getDataset(),_);f=p.createResolver(b,this.getContext(t,i,e))}const d=new fw(r,f&&f.animations);return f&&f._cacheable&&(o[c]=Object.freeze(d)),d}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||xp(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),r=this._sharedOptions,o=this.getSharedOptions(i),c=this.includeOptions(e,o)||o!==r;return this.updateSharedOptions(o,e,i),{sharedOptions:o,includeOptions:c}}updateElement(t,e,i,r){xp(r)?Object.assign(t,i):this._resolveAnimations(e,r).update(t,i)}updateSharedOptions(t,e,i){t&&!xp(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,r){t.active=r;const o=this.getStyle(e,r);this._resolveAnimations(e,i,r).update(t,{options:!r&&this.getSharedOptions(o)||o})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[u,f,d]of this._syncList)this[u](f,d);this._syncList=[];const r=i.length,o=e.length,c=Math.min(o,r);c&&this.parse(0,c),o>r?this._insertElements(r,o-r,t):o<r&&this._removeElements(o,r-o)}_insertElements(t,e,i=!0){const r=this._cachedMeta,o=r.data,c=t+e;let u;const f=d=>{for(d.length+=e,u=d.length-1;u>=c;u--)d[u]=d[u-e]};for(f(o),u=t;u<c;++u)o[u]=new this.dataElementType;this._parsing&&f(r._parsed),this.parse(t,e),i&&this.updateElements(o,t,e,"reset")}updateElements(t,e,i,r){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(t,e);i._stacked&&Cc(i,r)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,r]=t;this[e](i,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ct(Si,"defaults",{}),ct(Si,"datasetElementType",null),ct(Si,"dataElementType",null);function sL(n,t){if(!n._cache.$bar){const e=n.getMatchingVisibleMetas(t);let i=[];for(let r=0,o=e.length;r<o;r++)i=i.concat(e[r].controller.getAllParsedValues(n));n._cache.$bar=Y1(i.sort((r,o)=>r-o))}return n._cache.$bar}function rL(n){const t=n.iScale,e=sL(t,n.type);let i=t._length,r,o,c,u;const f=()=>{c===32767||c===-32768||(fu(u)&&(i=Math.min(i,Math.abs(c-u)||i)),u=c)};for(r=0,o=e.length;r<o;++r)c=t.getPixelForValue(e[r]),f();for(u=void 0,r=0,o=t.ticks.length;r<o;++r)c=t.getPixelForTick(r),f();return i}function aL(n,t,e,i){const r=e.barThickness;let o,c;return Lt(r)?(o=t.min*e.categoryPercentage,c=e.barPercentage):(o=r*i,c=1),{chunk:o/i,ratio:c,start:t.pixels[n]-o/2}}function oL(n,t,e,i){const r=t.pixels,o=r[n];let c=n>0?r[n-1]:null,u=n<r.length-1?r[n+1]:null;const f=e.categoryPercentage;c===null&&(c=o-(u===null?t.end-t.start:u-o)),u===null&&(u=o+o-c);const d=o-(o-Math.min(c,u))/2*f;return{chunk:Math.abs(u-c)/2*f/i,ratio:e.barPercentage,start:d}}function lL(n,t,e,i){const r=e.parse(n[0],i),o=e.parse(n[1],i),c=Math.min(r,o),u=Math.max(r,o);let f=c,d=u;Math.abs(c)>Math.abs(u)&&(f=u,d=c),t[e.axis]=d,t._custom={barStart:f,barEnd:d,start:r,end:o,min:c,max:u}}function gw(n,t,e,i){return ye(n)?lL(n,t,e,i):t[e.axis]=e.parse(n,i),t}function px(n,t,e,i){const r=n.iScale,o=n.vScale,c=r.getLabels(),u=r===o,f=[];let d,p,_,b;for(d=e,p=e+i;d<p;++d)b=t[d],_={},_[r.axis]=u||r.parse(c[d],d),f.push(gw(b,_,o,d));return f}function Sp(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function cL(n,t,e){return n!==0?is(n):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function uL(n){let t,e,i,r,o;return n.horizontal?(t=n.base>n.x,e="left",i="right"):(t=n.base<n.y,e="bottom",i="top"),t?(r="end",o="start"):(r="start",o="end"),{start:e,end:i,reverse:t,top:r,bottom:o}}function hL(n,t,e,i){let r=t.borderSkipped;const o={};if(!r){n.borderSkipped=o;return}if(r===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:c,end:u,reverse:f,top:d,bottom:p}=uL(n);r==="middle"&&e&&(n.enableBorderRadius=!0,(e._top||0)===i?r=d:(e._bottom||0)===i?r=p:(o[yx(p,c,u,f)]=!0,r=d)),o[yx(r,c,u,f)]=!0,n.borderSkipped=o}function yx(n,t,e,i){return i?(n=fL(n,t,e),n=_x(n,e,t)):n=_x(n,t,e),n}function fL(n,t,e){return n===t?e:n===e?t:n}function _x(n,t,e){return n==="start"?t:n==="end"?e:n}function dL(n,{inflateAmount:t},e){n.inflateAmount=t==="auto"?e===1?.33:0:t}class Uf extends Si{parsePrimitiveData(t,e,i,r){return px(t,e,i,r)}parseArrayData(t,e,i,r){return px(t,e,i,r)}parseObjectData(t,e,i,r){const{iScale:o,vScale:c}=t,{xAxisKey:u="x",yAxisKey:f="y"}=this._parsing,d=o.axis==="x"?u:f,p=c.axis==="x"?u:f,_=[];let b,x,w,S;for(b=i,x=i+r;b<x;++b)S=e[b],w={},w[o.axis]=o.parse(Hr(S,d),b),_.push(gw(Hr(S,p),w,c,b));return _}updateRangeFromParsed(t,e,i,r){super.updateRangeFromParsed(t,e,i,r);const o=i._custom;o&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:i,vScale:r}=e,o=this.getParsed(t),c=o._custom,u=Sp(c)?"["+c.start+", "+c.end+"]":""+r.getLabelForValue(o[r.axis]);return{label:""+i.getLabelForValue(o[i.axis]),value:u}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,i,r){const o=r==="reset",{index:c,_cachedMeta:{vScale:u}}=this,f=u.getBasePixel(),d=u.isHorizontal(),p=this._getRuler(),{sharedOptions:_,includeOptions:b}=this._getSharedOptions(e,r);for(let x=e;x<e+i;x++){const w=this.getParsed(x),S=o||Lt(w[u.axis])?{base:f,head:f}:this._calculateBarValuePixels(x),D=this._calculateBarIndexPixels(x,p),L=(w._stacks||{})[u.axis],F={horizontal:d,base:S.base,enableBorderRadius:!L||Sp(w._custom)||c===L._top||c===L._bottom,x:d?S.head:D.center,y:d?D.center:S.head,height:d?D.size:Math.abs(S.size),width:d?Math.abs(S.size):D.size};b&&(F.options=_||this.resolveDataElementOptions(x,t[x].active?"active":r));const W=F.options||t[x].options;hL(F,W,L,c),dL(F,W,p.ratio),this.updateElement(t[x],x,F,r)}}_getStacks(t,e){const{iScale:i}=this._cachedMeta,r=i.getMatchingVisibleMetas(this._type).filter(p=>p.controller.options.grouped),o=i.options.stacked,c=[],u=this._cachedMeta.controller.getParsed(e),f=u&&u[i.axis],d=p=>{const _=p._parsed.find(x=>x[i.axis]===f),b=_&&_[p.vScale.axis];if(Lt(b)||isNaN(b))return!0};for(const p of r)if(!(e!==void 0&&d(p))&&((o===!1||c.indexOf(p.stack)===-1||o===void 0&&p.stack===void 0)&&c.push(p.stack),p.index===t))break;return c.length||c.push(void 0),c}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,e=this.chart.options.indexAxis;return Object.keys(t).filter(i=>t[i].axis===e).shift()}_getAxis(){const t={},e=this.getFirstScaleIdForIndexAxis();for(const i of this.chart.data.datasets)t[It(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,e)]=!0;return Object.keys(t)}_getStackIndex(t,e,i){const r=this._getStacks(t,i),o=e!==void 0?r.indexOf(e):-1;return o===-1?r.length-1:o}_getRuler(){const t=this.options,e=this._cachedMeta,i=e.iScale,r=[];let o,c;for(o=0,c=e.data.length;o<c;++o)r.push(i.getPixelForValue(this.getParsed(o)[i.axis],o));const u=t.barThickness;return{min:u||rL(e),pixels:r,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:u?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:i,index:r},options:{base:o,minBarLength:c}}=this,u=o||0,f=this.getParsed(t),d=f._custom,p=Sp(d);let _=f[e.axis],b=0,x=i?this.applyStack(e,f,i):_,w,S;x!==_&&(b=x-_,x=_),p&&(_=d.barStart,x=d.barEnd-d.barStart,_!==0&&is(_)!==is(d.barEnd)&&(b=0),b+=_);const D=!Lt(o)&&!p?o:b;let L=e.getPixelForValue(D);if(this.chart.getDataVisibility(t)?w=e.getPixelForValue(b+x):w=L,S=w-L,Math.abs(S)<c){S=cL(S,e,u)*c,_===u&&(L-=S/2);const F=e.getPixelForDecimal(0),W=e.getPixelForDecimal(1),J=Math.min(F,W),$=Math.max(F,W);L=Math.max(Math.min(L,$),J),w=L+S,i&&!p&&(f._stacks[e.axis]._visualValues[r]=e.getValueForPixel(w)-e.getValueForPixel(L))}if(L===e.getPixelForValue(u)){const F=is(S)*e.getLineWidthForValue(u)/2;L+=F,S-=F}return{size:S,base:L,head:w,center:w+S/2}}_calculateBarIndexPixels(t,e){const i=e.scale,r=this.options,o=r.skipNull,c=It(r.maxBarThickness,1/0);let u,f;const d=this._getAxisCount();if(e.grouped){const p=o?this._getStackCount(t):e.stackCount,_=r.barThickness==="flex"?oL(t,e,r,p*d):aL(t,e,r,p*d),b=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,x=this._getAxis().indexOf(It(b,this.getFirstScaleIdForIndexAxis())),w=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0)+x;u=_.start+_.chunk*w+_.chunk/2,f=Math.min(c,_.chunk*_.ratio)}else u=i.getPixelForValue(this.getParsed(t)[i.axis],t),f=Math.min(c,e.min*e.ratio);return{base:u-f/2,head:u+f/2,center:u,size:f}}draw(){const t=this._cachedMeta,e=t.vScale,i=t.data,r=i.length;let o=0;for(;o<r;++o)this.getParsed(o)[e.axis]!==null&&!i[o].hidden&&i[o].draw(this._ctx)}}ct(Uf,"id","bar"),ct(Uf,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),ct(Uf,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Bf extends Si{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,i,r){const o=super.parsePrimitiveData(t,e,i,r);for(let c=0;c<o.length;c++)o[c]._custom=this.resolveDataElementOptions(c+i).radius;return o}parseArrayData(t,e,i,r){const o=super.parseArrayData(t,e,i,r);for(let c=0;c<o.length;c++){const u=e[i+c];o[c]._custom=It(u[2],this.resolveDataElementOptions(c+i).radius)}return o}parseObjectData(t,e,i,r){const o=super.parseObjectData(t,e,i,r);for(let c=0;c<o.length;c++){const u=e[i+c];o[c]._custom=It(u&&u.r&&+u.r,this.resolveDataElementOptions(c+i).radius)}return o}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let i=t.length-1;i>=0;--i)e=Math.max(e,t[i].size(this.resolveDataElementOptions(i))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:o}=e,c=this.getParsed(t),u=r.getLabelForValue(c.x),f=o.getLabelForValue(c.y),d=c._custom;return{label:i[t]||"",value:"("+u+", "+f+(d?", "+d:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,i,r){const o=r==="reset",{iScale:c,vScale:u}=this._cachedMeta,{sharedOptions:f,includeOptions:d}=this._getSharedOptions(e,r),p=c.axis,_=u.axis;for(let b=e;b<e+i;b++){const x=t[b],w=!o&&this.getParsed(b),S={},D=S[p]=o?c.getPixelForDecimal(.5):c.getPixelForValue(w[p]),L=S[_]=o?u.getBasePixel():u.getPixelForValue(w[_]);S.skip=isNaN(D)||isNaN(L),d&&(S.options=f||this.resolveDataElementOptions(b,x.active?"active":r),o&&(S.options.radius=0)),this.updateElement(x,b,S,r)}}resolveDataElementOptions(t,e){const i=this.getParsed(t);let r=super.resolveDataElementOptions(t,e);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const o=r.radius;return e!=="active"&&(r.radius=0),r.radius+=It(i&&i._custom,o),r}}ct(Bf,"id","bubble"),ct(Bf,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),ct(Bf,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function gL(n,t,e){let i=1,r=1,o=0,c=0;if(t<de){const u=n,f=u+t,d=Math.cos(u),p=Math.sin(u),_=Math.cos(f),b=Math.sin(f),x=(W,J,$)=>du(W,u,f,!0)?1:Math.max(J,J*e,$,$*e),w=(W,J,$)=>du(W,u,f,!0)?-1:Math.min(J,J*e,$,$*e),S=x(0,d,_),D=x(Re,p,b),L=w(Xt,d,_),F=w(Xt+Re,p,b);i=(S-L)/2,r=(D-F)/2,o=-(S+L)/2,c=-(D+F)/2}return{ratioX:i,ratioY:r,offsetX:o,offsetY:c}}class La extends Si{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const i=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=i;else{let o=f=>+i[f];if(Ht(i[t])){const{key:f="value"}=this._parsing;o=d=>+Hr(i[d],f)}let c,u;for(c=t,u=t+e;c<u;++c)r._parsed[c]=o(c)}}_getRotation(){return Ti(this.options.rotation-90)}_getCircumference(){return Ti(this.options.circumference)}_getRotationExtents(){let t=de,e=-de;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const r=this.chart.getDatasetMeta(i).controller,o=r._getRotation(),c=r._getCircumference();t=Math.min(t,o),e=Math.max(e,o+c)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:i}=e,r=this._cachedMeta,o=r.data,c=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,u=Math.max((Math.min(i.width,i.height)-c)/2,0),f=Math.min(wP(this.options.cutout,u),1),d=this._getRingWeight(this.index),{circumference:p,rotation:_}=this._getRotationExtents(),{ratioX:b,ratioY:x,offsetX:w,offsetY:S}=gL(_,p,f),D=(i.width-c)/b,L=(i.height-c)/x,F=Math.max(Math.min(D,L)/2,0),W=B1(this.options.radius,F),J=Math.max(W*f,0),$=(W-J)/this._getVisibleDatasetWeightTotal();this.offsetX=w*W,this.offsetY=S*W,r.total=this.calculateTotal(),this.outerRadius=W-$*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-$*d,0),this.updateElements(o,0,o.length,t)}_circumference(t,e){const i=this.options,r=this._cachedMeta,o=this._getCircumference();return e&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||r._parsed[t]===null||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*o/de)}updateElements(t,e,i,r){const o=r==="reset",c=this.chart,u=c.chartArea,d=c.options.animation,p=(u.left+u.right)/2,_=(u.top+u.bottom)/2,b=o&&d.animateScale,x=b?0:this.innerRadius,w=b?0:this.outerRadius,{sharedOptions:S,includeOptions:D}=this._getSharedOptions(e,r);let L=this._getRotation(),F;for(F=0;F<e;++F)L+=this._circumference(F,o);for(F=e;F<e+i;++F){const W=this._circumference(F,o),J=t[F],$={x:p+this.offsetX,y:_+this.offsetY,startAngle:L,endAngle:L+W,circumference:W,outerRadius:w,innerRadius:x};D&&($.options=S||this.resolveDataElementOptions(F,J.active?"active":r)),L+=W,this.updateElement(J,F,$,r)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let i=0,r;for(r=0;r<e.length;r++){const o=t._parsed[r];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(r)&&!e[r].hidden&&(i+=Math.abs(o))}return i}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?de*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,r=i.data.labels||[],o=Ou(e._parsed[t],i.options.locale);return{label:r[t]||"",value:o}}getMaxBorderWidth(t){let e=0;const i=this.chart;let r,o,c,u,f;if(!t){for(r=0,o=i.data.datasets.length;r<o;++r)if(i.isDatasetVisible(r)){c=i.getDatasetMeta(r),t=c.data,u=c.controller;break}}if(!t)return 0;for(r=0,o=t.length;r<o;++r)f=u.resolveDataElementOptions(r),f.borderAlign!=="inner"&&(e=Math.max(e,f.borderWidth||0,f.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let i=0,r=t.length;i<r;++i){const o=this.resolveDataElementOptions(i);e=Math.max(e,o.offset||0,o.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i));return e}_getRingWeight(t){return Math.max(It(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}ct(La,"id","doughnut"),ct(La,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),ct(La,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),ct(La,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data,{labels:{pointStyle:i,textAlign:r,color:o,useBorderRadius:c,borderRadius:u}}=t.legend.options;return e.labels.length&&e.datasets.length?e.labels.map((f,d)=>{const _=t.getDatasetMeta(0).controller.getStyle(d);return{text:f,fillStyle:_.backgroundColor,fontColor:o,hidden:!t.getDataVisibility(d),lineDash:_.borderDash,lineDashOffset:_.borderDashOffset,lineJoin:_.borderJoinStyle,lineWidth:_.borderWidth,strokeStyle:_.borderColor,textAlign:r,pointStyle:i,borderRadius:c&&(u||_.borderRadius),index:d}}):[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}}});class Ff extends Si{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:i,data:r=[],_dataset:o}=e,c=this.chart._animationsDisabled;let{start:u,count:f}=X1(e,r,c);this._drawStart=u,this._drawCount=f,Q1(e)&&(u=0,f=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!o._decimated,i.points=r;const d=this.resolveDatasetElementOptions(t);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(i,void 0,{animated:!c,options:d},t),this.updateElements(r,u,f,t)}updateElements(t,e,i,r){const o=r==="reset",{iScale:c,vScale:u,_stacked:f,_dataset:d}=this._cachedMeta,{sharedOptions:p,includeOptions:_}=this._getSharedOptions(e,r),b=c.axis,x=u.axis,{spanGaps:w,segment:S}=this.options,D=ul(w)?w:Number.POSITIVE_INFINITY,L=this.chart._animationsDisabled||o||r==="none",F=e+i,W=t.length;let J=e>0&&this.getParsed(e-1);for(let $=0;$<W;++$){const nt=t[$],M=L?nt:{};if($<e||$>=F){M.skip=!0;continue}const C=this.getParsed($),O=Lt(C[x]),P=M[b]=c.getPixelForValue(C[b],$),k=M[x]=o||O?u.getBasePixel():u.getPixelForValue(f?this.applyStack(u,C,f):C[x],$);M.skip=isNaN(P)||isNaN(k)||O,M.stop=$>0&&Math.abs(C[b]-J[b])>D,S&&(M.parsed=C,M.raw=d.data[$]),_&&(M.options=p||this.resolveDataElementOptions($,nt.active?"active":r)),L||this.updateElement(nt,$,M,r),J=C}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,i=e.options&&e.options.borderWidth||0,r=t.data||[];if(!r.length)return i;const o=r[0].size(this.resolveDataElementOptions(0)),c=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,o,c)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}ct(Ff,"id","line"),ct(Ff,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),ct(Ff,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class tu extends Si{constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,r=i.data.labels||[],o=Ou(e._parsed[t].r,i.options.locale);return{label:r[t]||"",value:o}}parseObjectData(t,e,i,r){return sw.bind(this)(t,e,i,r)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((i,r)=>{const o=this.getParsed(r).r;!isNaN(o)&&this.chart.getDataVisibility(r)&&(o<e.min&&(e.min=o),o>e.max&&(e.max=o))}),e}_updateRadius(){const t=this.chart,e=t.chartArea,i=t.options,r=Math.min(e.right-e.left,e.bottom-e.top),o=Math.max(r/2,0),c=Math.max(i.cutoutPercentage?o/100*i.cutoutPercentage:1,0),u=(o-c)/t.getVisibleDatasetCount();this.outerRadius=o-u*this.index,this.innerRadius=this.outerRadius-u}updateElements(t,e,i,r){const o=r==="reset",c=this.chart,f=c.options.animation,d=this._cachedMeta.rScale,p=d.xCenter,_=d.yCenter,b=d.getIndexAngle(0)-.5*Xt;let x=b,w;const S=360/this.countVisibleElements();for(w=0;w<e;++w)x+=this._computeAngle(w,r,S);for(w=e;w<e+i;w++){const D=t[w];let L=x,F=x+this._computeAngle(w,r,S),W=c.getDataVisibility(w)?d.getDistanceFromCenterForValue(this.getParsed(w).r):0;x=F,o&&(f.animateScale&&(W=0),f.animateRotate&&(L=F=b));const J={x:p,y:_,innerRadius:0,outerRadius:W,startAngle:L,endAngle:F,options:this.resolveDataElementOptions(w,D.active?"active":r)};this.updateElement(D,w,J,r)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach((i,r)=>{!isNaN(this.getParsed(r).r)&&this.chart.getDataVisibility(r)&&e++}),e}_computeAngle(t,e,i){return this.chart.getDataVisibility(t)?Ti(this.resolveDataElementOptions(t,e).angle||i):0}}ct(tu,"id","polarArea"),ct(tu,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),ct(tu,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i,color:r}}=t.legend.options;return e.labels.map((o,c)=>{const f=t.getDatasetMeta(0).controller.getStyle(c);return{text:o,fillStyle:f.backgroundColor,strokeStyle:f.borderColor,fontColor:r,lineWidth:f.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(c),index:c}})}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class fy extends La{}ct(fy,"id","pie"),ct(fy,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Hf extends Si{getLabelAndValue(t){const e=this._cachedMeta.vScale,i=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(i[e.axis])}}parseObjectData(t,e,i,r){return sw.bind(this)(t,e,i,r)}update(t){const e=this._cachedMeta,i=e.dataset,r=e.data||[],o=e.iScale.getLabels();if(i.points=r,t!=="resize"){const c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0);const u={_loop:!0,_fullLoop:o.length===r.length,options:c};this.updateElement(i,void 0,u,t)}this.updateElements(r,0,r.length,t)}updateElements(t,e,i,r){const o=this._cachedMeta.rScale,c=r==="reset";for(let u=e;u<e+i;u++){const f=t[u],d=this.resolveDataElementOptions(u,f.active?"active":r),p=o.getPointPositionForValue(u,this.getParsed(u).r),_=c?o.xCenter:p.x,b=c?o.yCenter:p.y,x={x:_,y:b,angle:p.angle,skip:isNaN(_)||isNaN(b),options:d};this.updateElement(f,u,x,r)}}}ct(Hf,"id","radar"),ct(Hf,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),ct(Hf,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class qf extends Si{getLabelAndValue(t){const e=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:o}=e,c=this.getParsed(t),u=r.getLabelForValue(c.x),f=o.getLabelForValue(c.y);return{label:i[t]||"",value:"("+u+", "+f+")"}}update(t){const e=this._cachedMeta,{data:i=[]}=e,r=this.chart._animationsDisabled;let{start:o,count:c}=X1(e,i,r);if(this._drawStart=o,this._drawCount=c,Q1(e)&&(o=0,c=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:u,_dataset:f}=e;u._chart=this.chart,u._datasetIndex=this.index,u._decimated=!!f._decimated,u.points=i;const d=this.resolveDatasetElementOptions(t);d.segment=this.options.segment,this.updateElement(u,void 0,{animated:!r,options:d},t)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(i,o,c,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,i,r){const o=r==="reset",{iScale:c,vScale:u,_stacked:f,_dataset:d}=this._cachedMeta,p=this.resolveDataElementOptions(e,r),_=this.getSharedOptions(p),b=this.includeOptions(r,_),x=c.axis,w=u.axis,{spanGaps:S,segment:D}=this.options,L=ul(S)?S:Number.POSITIVE_INFINITY,F=this.chart._animationsDisabled||o||r==="none";let W=e>0&&this.getParsed(e-1);for(let J=e;J<e+i;++J){const $=t[J],nt=this.getParsed(J),M=F?$:{},C=Lt(nt[w]),O=M[x]=c.getPixelForValue(nt[x],J),P=M[w]=o||C?u.getBasePixel():u.getPixelForValue(f?this.applyStack(u,nt,f):nt[w],J);M.skip=isNaN(O)||isNaN(P)||C,M.stop=J>0&&Math.abs(nt[x]-W[x])>L,D&&(M.parsed=nt,M.raw=d.data[J]),b&&(M.options=_||this.resolveDataElementOptions(J,$.active?"active":r)),F||this.updateElement($,J,M,r),W=nt}this.updateSharedOptions(_,r,p)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let u=0;for(let f=e.length-1;f>=0;--f)u=Math.max(u,e[f].size(this.resolveDataElementOptions(f))/2);return u>0&&u}const i=t.dataset,r=i.options&&i.options.borderWidth||0;if(!e.length)return r;const o=e[0].size(this.resolveDataElementOptions(0)),c=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(r,o,c)/2}}ct(qf,"id","scatter"),ct(qf,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),ct(qf,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var mL=Object.freeze({__proto__:null,BarController:Uf,BubbleController:Bf,DoughnutController:La,LineController:Ff,PieController:fy,PolarAreaController:tu,RadarController:Hf,ScatterController:qf});function Da(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class N_{constructor(t){ct(this,"options");this.options=t||{}}static override(t){Object.assign(N_.prototype,t)}init(){}formats(){return Da()}parse(){return Da()}format(){return Da()}add(){return Da()}diff(){return Da()}startOf(){return Da()}endOf(){return Da()}}var pL={_date:N_};function yL(n,t,e,i){const{controller:r,data:o,_sorted:c}=n,u=r._cachedMeta.iScale,f=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(u&&t===u.axis&&t!=="r"&&c&&o.length){const d=u._reversePixels?jP:Os;if(i){if(r._sharedOptions){const p=o[0],_=typeof p.getRange=="function"&&p.getRange(t);if(_){const b=d(o,t,e-_),x=d(o,t,e+_);return{lo:b.lo,hi:x.hi}}}}else{const p=d(o,t,e);if(f){const{vScale:_}=r._cachedMeta,{_parsed:b}=n,x=b.slice(0,p.lo+1).reverse().findIndex(S=>!Lt(S[_.axis]));p.lo-=Math.max(0,x);const w=b.slice(p.hi).findIndex(S=>!Lt(S[_.axis]));p.hi+=Math.max(0,w)}return p}}return{lo:0,hi:o.length-1}}function $d(n,t,e,i,r){const o=n.getSortedVisibleDatasetMetas(),c=e[t];for(let u=0,f=o.length;u<f;++u){const{index:d,data:p}=o[u],{lo:_,hi:b}=yL(o[u],t,c,r);for(let x=_;x<=b;++x){const w=p[x];w.skip||i(w,d,x)}}}function _L(n){const t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(i,r){const o=t?Math.abs(i.x-r.x):0,c=e?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(c,2))}}function Ap(n,t,e,i,r){const o=[];return!r&&!n.isPointInArea(t)||$d(n,e,t,function(u,f,d){!r&&!Ns(u,n.chartArea,0)||u.inRange(t.x,t.y,i)&&o.push({element:u,datasetIndex:f,index:d})},!0),o}function bL(n,t,e,i){let r=[];function o(c,u,f){const{startAngle:d,endAngle:p}=c.getProps(["startAngle","endAngle"],i),{angle:_}=q1(c,{x:t.x,y:t.y});du(_,d,p)&&r.push({element:c,datasetIndex:u,index:f})}return $d(n,e,t,o),r}function vL(n,t,e,i,r,o){let c=[];const u=_L(e);let f=Number.POSITIVE_INFINITY;function d(p,_,b){const x=p.inRange(t.x,t.y,r);if(i&&!x)return;const w=p.getCenterPoint(r);if(!(!!o||n.isPointInArea(w))&&!x)return;const D=u(t,w);D<f?(c=[{element:p,datasetIndex:_,index:b}],f=D):D===f&&c.push({element:p,datasetIndex:_,index:b})}return $d(n,e,t,d),c}function wp(n,t,e,i,r,o){return!o&&!n.isPointInArea(t)?[]:e==="r"&&!i?bL(n,t,e,r):vL(n,t,e,i,r,o)}function bx(n,t,e,i,r){const o=[],c=e==="x"?"inXRange":"inYRange";let u=!1;return $d(n,e,t,(f,d,p)=>{f[c]&&f[c](t[e],r)&&(o.push({element:f,datasetIndex:d,index:p}),u=u||f.inRange(t.x,t.y,r))}),i&&!u?[]:o}var TL={modes:{index(n,t,e,i){const r=Na(t,n),o=e.axis||"x",c=e.includeInvisible||!1,u=e.intersect?Ap(n,r,o,i,c):wp(n,r,o,!1,i,c),f=[];return u.length?(n.getSortedVisibleDatasetMetas().forEach(d=>{const p=u[0].index,_=d.data[p];_&&!_.skip&&f.push({element:_,datasetIndex:d.index,index:p})}),f):[]},dataset(n,t,e,i){const r=Na(t,n),o=e.axis||"xy",c=e.includeInvisible||!1;let u=e.intersect?Ap(n,r,o,i,c):wp(n,r,o,!1,i,c);if(u.length>0){const f=u[0].datasetIndex,d=n.getDatasetMeta(f).data;u=[];for(let p=0;p<d.length;++p)u.push({element:d[p],datasetIndex:f,index:p})}return u},point(n,t,e,i){const r=Na(t,n),o=e.axis||"xy",c=e.includeInvisible||!1;return Ap(n,r,o,i,c)},nearest(n,t,e,i){const r=Na(t,n),o=e.axis||"xy",c=e.includeInvisible||!1;return wp(n,r,o,e.intersect,i,c)},x(n,t,e,i){const r=Na(t,n);return bx(n,r,"x",e.intersect,i)},y(n,t,e,i){const r=Na(t,n);return bx(n,r,"y",e.intersect,i)}}};const mw=["left","top","right","bottom"];function Rc(n,t){return n.filter(e=>e.pos===t)}function vx(n,t){return n.filter(e=>mw.indexOf(e.pos)===-1&&e.box.axis===t)}function Ic(n,t){return n.sort((e,i)=>{const r=t?i:e,o=t?e:i;return r.weight===o.weight?r.index-o.index:r.weight-o.weight})}function EL(n){const t=[];let e,i,r,o,c,u;for(e=0,i=(n||[]).length;e<i;++e)r=n[e],{position:o,options:{stack:c,stackWeight:u=1}}=r,t.push({index:e,box:r,pos:o,horizontal:r.isHorizontal(),weight:r.weight,stack:c&&o+c,stackWeight:u});return t}function xL(n){const t={};for(const e of n){const{stack:i,pos:r,stackWeight:o}=e;if(!i||!mw.includes(r))continue;const c=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});c.count++,c.weight+=o}return t}function SL(n,t){const e=xL(n),{vBoxMaxWidth:i,hBoxMaxHeight:r}=t;let o,c,u;for(o=0,c=n.length;o<c;++o){u=n[o];const{fullSize:f}=u.box,d=e[u.stack],p=d&&u.stackWeight/d.weight;u.horizontal?(u.width=p?p*i:f&&t.availableWidth,u.height=r):(u.width=i,u.height=p?p*r:f&&t.availableHeight)}return e}function AL(n){const t=EL(n),e=Ic(t.filter(d=>d.box.fullSize),!0),i=Ic(Rc(t,"left"),!0),r=Ic(Rc(t,"right")),o=Ic(Rc(t,"top"),!0),c=Ic(Rc(t,"bottom")),u=vx(t,"x"),f=vx(t,"y");return{fullSize:e,leftAndTop:i.concat(o),rightAndBottom:r.concat(f).concat(c).concat(u),chartArea:Rc(t,"chartArea"),vertical:i.concat(r).concat(f),horizontal:o.concat(c).concat(u)}}function Tx(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function pw(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function wL(n,t,e,i){const{pos:r,box:o}=e,c=n.maxPadding;if(!Ht(r)){e.size&&(n[r]-=e.size);const _=i[e.stack]||{size:0,count:1};_.size=Math.max(_.size,e.horizontal?o.height:o.width),e.size=_.size/_.count,n[r]+=e.size}o.getPadding&&pw(c,o.getPadding());const u=Math.max(0,t.outerWidth-Tx(c,n,"left","right")),f=Math.max(0,t.outerHeight-Tx(c,n,"top","bottom")),d=u!==n.w,p=f!==n.h;return n.w=u,n.h=f,e.horizontal?{same:d,other:p}:{same:p,other:d}}function CL(n){const t=n.maxPadding;function e(i){const r=Math.max(t[i]-n[i],0);return n[i]+=r,r}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function RL(n,t){const e=t.maxPadding;function i(r){const o={left:0,top:0,right:0,bottom:0};return r.forEach(c=>{o[c]=Math.max(t[c],e[c])}),o}return i(n?["left","right"]:["top","bottom"])}function Uc(n,t,e,i){const r=[];let o,c,u,f,d,p;for(o=0,c=n.length,d=0;o<c;++o){u=n[o],f=u.box,f.update(u.width||t.w,u.height||t.h,RL(u.horizontal,t));const{same:_,other:b}=wL(t,e,u,i);d|=_&&r.length,p=p||b,f.fullSize||r.push(u)}return d&&Uc(r,t,e,i)||p}function xf(n,t,e,i,r){n.top=e,n.left=t,n.right=t+i,n.bottom=e+r,n.width=i,n.height=r}function Ex(n,t,e,i){const r=e.padding;let{x:o,y:c}=t;for(const u of n){const f=u.box,d=i[u.stack]||{placed:0,weight:1},p=u.stackWeight/d.weight||1;if(u.horizontal){const _=t.w*p,b=d.size||f.height;fu(d.start)&&(c=d.start),f.fullSize?xf(f,r.left,c,e.outerWidth-r.right-r.left,b):xf(f,t.left+d.placed,c,_,b),d.start=c,d.placed+=_,c=f.bottom}else{const _=t.h*p,b=d.size||f.width;fu(d.start)&&(o=d.start),f.fullSize?xf(f,o,r.top,b,e.outerHeight-r.bottom-r.top):xf(f,o,t.top+d.placed,b,_),d.start=o,d.placed+=_,o=f.right}}t.x=o,t.y=c}var mn={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;const r=yn(n.options.layout.padding),o=Math.max(t-r.width,0),c=Math.max(e-r.height,0),u=AL(n.boxes),f=u.vertical,d=u.horizontal;ne(n.boxes,S=>{typeof S.beforeLayout=="function"&&S.beforeLayout()});const p=f.reduce((S,D)=>D.box.options&&D.box.options.display===!1?S:S+1,0)||1,_=Object.freeze({outerWidth:t,outerHeight:e,padding:r,availableWidth:o,availableHeight:c,vBoxMaxWidth:o/2/p,hBoxMaxHeight:c/2}),b=Object.assign({},r);pw(b,yn(i));const x=Object.assign({maxPadding:b,w:o,h:c,x:r.left,y:r.top},r),w=SL(f.concat(d),_);Uc(u.fullSize,x,_,w),Uc(f,x,_,w),Uc(d,x,_,w)&&Uc(f,x,_,w),CL(x),Ex(u.leftAndTop,x,_,w),x.x+=x.w,x.y+=x.h,Ex(u.rightAndBottom,x,_,w),n.chartArea={left:x.left,top:x.top,right:x.left+x.w,bottom:x.top+x.h,height:x.h,width:x.w},ne(u.chartArea,S=>{const D=S.box;Object.assign(D,n.chartArea),D.update(x.w,x.h,{left:0,top:0,right:0,bottom:0})})}};class yw{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,r){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):i)}}isAttached(t){return!0}updateConfig(t){}}class IL extends yw{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Gf="$chartjs",DL={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},xx=n=>n===null||n==="";function ML(n,t){const e=n.style,i=n.getAttribute("height"),r=n.getAttribute("width");if(n[Gf]={initial:{height:i,width:r,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",xx(r)){const o=ax(n,"width");o!==void 0&&(n.width=o)}if(xx(i))if(n.style.height==="")n.height=n.width/(t||2);else{const o=ax(n,"height");o!==void 0&&(n.height=o)}return n}const _w=OV?{passive:!0}:!1;function OL(n,t,e){n&&n.addEventListener(t,e,_w)}function NL(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,_w)}function kL(n,t){const e=DL[n.type]||n.type,{x:i,y:r}=Na(n,t);return{type:e,chart:t,native:n,x:i!==void 0?i:null,y:r!==void 0?r:null}}function Td(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function PL(n,t,e){const i=n.canvas,r=new MutationObserver(o=>{let c=!1;for(const u of o)c=c||Td(u.addedNodes,i),c=c&&!Td(u.removedNodes,i);c&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}function VL(n,t,e){const i=n.canvas,r=new MutationObserver(o=>{let c=!1;for(const u of o)c=c||Td(u.removedNodes,i),c=c&&!Td(u.addedNodes,i);c&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}const mu=new Map;let Sx=0;function bw(){const n=window.devicePixelRatio;n!==Sx&&(Sx=n,mu.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function LL(n,t){mu.size||window.addEventListener("resize",bw),mu.set(n,t)}function zL(n){mu.delete(n),mu.size||window.removeEventListener("resize",bw)}function jL(n,t,e){const i=n.canvas,r=i&&O_(i);if(!r)return;const o=W1((u,f)=>{const d=r.clientWidth;e(u,f),d<r.clientWidth&&e()},window),c=new ResizeObserver(u=>{const f=u[0],d=f.contentRect.width,p=f.contentRect.height;d===0&&p===0||o(d,p)});return c.observe(r),LL(n,o),c}function Cp(n,t,e){e&&e.disconnect(),t==="resize"&&zL(n)}function UL(n,t,e){const i=n.canvas,r=W1(o=>{n.ctx!==null&&e(kL(o,n))},n);return OL(i,t,r),r}class BL extends yw{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(ML(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[Gf])return!1;const i=e[Gf].initial;["height","width"].forEach(o=>{const c=i[o];Lt(c)?e.removeAttribute(o):e.setAttribute(o,c)});const r=i.style||{};return Object.keys(r).forEach(o=>{e.style[o]=r[o]}),e.width=e.width,delete e[Gf],!0}addEventListener(t,e,i){this.removeEventListener(t,e);const r=t.$proxies||(t.$proxies={}),c={attach:PL,detach:VL,resize:jL}[e]||UL;r[e]=c(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),r=i[e];if(!r)return;({attach:Cp,detach:Cp,resize:Cp}[e]||NL)(t,e,r),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,r){return MV(t,e,i,r)}isAttached(t){const e=t&&O_(t);return!!(e&&e.isConnected)}}function FL(n){return!M_()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?IL:BL}class wi{constructor(){ct(this,"x");ct(this,"y");ct(this,"active",!1);ct(this,"options");ct(this,"$animations")}tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return ul(this.x)&&ul(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const r={};return t.forEach(o=>{r[o]=i[o]&&i[o].active()?i[o]._to:this[o]}),r}}ct(wi,"defaults",{}),ct(wi,"defaultRoutes");function HL(n,t){const e=n.options.ticks,i=qL(n),r=Math.min(e.maxTicksLimit||i,i),o=e.major.enabled?YL(t):[],c=o.length,u=o[0],f=o[c-1],d=[];if(c>r)return KL(t,d,o,c/r),d;const p=GL(o,t,r);if(c>0){let _,b;const x=c>1?Math.round((f-u)/(c-1)):null;for(Sf(t,d,p,Lt(x)?0:u-x,u),_=0,b=c-1;_<b;_++)Sf(t,d,p,o[_],o[_+1]);return Sf(t,d,p,f,Lt(x)?t.length:f+x),d}return Sf(t,d,p),d}function qL(n){const t=n.options.offset,e=n._tickSize(),i=n._length/e+(t?0:1),r=n._maxLength/e;return Math.floor(Math.min(i,r))}function GL(n,t,e){const i=WL(n),r=t.length/e;if(!i)return Math.max(r,1);const o=kP(i);for(let c=0,u=o.length-1;c<u;c++){const f=o[c];if(f>r)return f}return Math.max(r,1)}function YL(n){const t=[];let e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}function KL(n,t,e,i){let r=0,o=e[0],c;for(i=Math.ceil(i),c=0;c<n.length;c++)c===o&&(t.push(n[c]),r++,o=e[r*i])}function Sf(n,t,e,i,r){const o=It(i,0),c=Math.min(It(r,n.length),n.length);let u=0,f,d,p;for(e=Math.ceil(e),r&&(f=r-i,e=f/Math.floor(f/e)),p=o;p<0;)u++,p=Math.round(o+u*e);for(d=Math.max(o,0);d<c;d++)d===p&&(t.push(n[d]),u++,p=Math.round(o+u*e))}function WL(n){const t=n.length;let e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}const XL=n=>n==="left"?"right":n==="right"?"left":n,Ax=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,wx=(n,t)=>Math.min(t||n,n);function Cx(n,t){const e=[],i=n.length/t,r=n.length;let o=0;for(;o<r;o+=i)e.push(n[Math.floor(o)]);return e}function QL(n,t,e){const i=n.ticks.length,r=Math.min(t,i-1),o=n._startPixel,c=n._endPixel,u=1e-6;let f=n.getPixelForTick(r),d;if(!(e&&(i===1?d=Math.max(f-o,c-f):t===0?d=(n.getPixelForTick(1)-f)/2:d=(f-n.getPixelForTick(r-1))/2,f+=r<t?d:-d,f<o-u||f>c+u)))return f}function $L(n,t){ne(n,e=>{const i=e.gc,r=i.length/2;let o;if(r>t){for(o=0;o<r;++o)delete e.data[i[o]];i.splice(0,r)}})}function Dc(n){return n.drawTicks?n.tickLength:0}function Rx(n,t){if(!n.display)return 0;const e=Ye(n.font,t),i=yn(n.padding);return(ye(n.text)?n.text.length:1)*e.lineHeight+i.height}function JL(n,t){return Qr(n,{scale:t,type:"scale"})}function ZL(n,t,e){return Qr(n,{tick:e,index:t,type:"tick"})}function t4(n,t,e){let i=A_(n);return(e&&t!=="right"||!e&&t==="right")&&(i=XL(i)),i}function e4(n,t,e,i){const{top:r,left:o,bottom:c,right:u,chart:f}=n,{chartArea:d,scales:p}=f;let _=0,b,x,w;const S=c-r,D=u-o;if(n.isHorizontal()){if(x=hn(i,o,u),Ht(e)){const L=Object.keys(e)[0],F=e[L];w=p[L].getPixelForValue(F)+S-t}else e==="center"?w=(d.bottom+d.top)/2+S-t:w=Ax(n,e,t);b=u-o}else{if(Ht(e)){const L=Object.keys(e)[0],F=e[L];x=p[L].getPixelForValue(F)-D+t}else e==="center"?x=(d.left+d.right)/2-D+t:x=Ax(n,e,t);w=hn(i,c,r),_=e==="left"?-Re:Re}return{titleX:x,titleY:w,maxWidth:b,rotation:_}}class to extends wi{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:r}=this;return t=Fn(t,Number.POSITIVE_INFINITY),e=Fn(e,Number.NEGATIVE_INFINITY),i=Fn(i,Number.POSITIVE_INFINITY),r=Fn(r,Number.NEGATIVE_INFINITY),{min:Fn(t,i),max:Fn(e,r),minDefined:Ee(t),maxDefined:Ee(e)}}getMinMax(t){let{min:e,max:i,minDefined:r,maxDefined:o}=this.getUserBounds(),c;if(r&&o)return{min:e,max:i};const u=this.getMatchingVisibleMetas();for(let f=0,d=u.length;f<d;++f)c=u[f].controller.getMinMax(this,t),r||(e=Math.min(e,c.min)),o||(i=Math.max(i,c.max));return e=o&&e>i?i:e,i=r&&e>i?e:i,{min:Fn(e,Fn(i,e)),max:Fn(i,Fn(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){le(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:r,grace:o,ticks:c}=this.options,u=c.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=cV(this,o,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const f=u<this.ticks.length;this._convertTicksToLabels(f?Cx(this.ticks,u):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),c.display&&(c.autoSkip||c.source==="auto")&&(this.ticks=HL(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),f&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){le(this.options.afterUpdate,[this])}beforeSetDimensions(){le(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){le(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),le(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){le(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,r,o;for(i=0,r=t.length;i<r;i++)o=t[i],o.label=le(e.callback,[o.value,i,t],this)}afterTickToLabelConversion(){le(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){le(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=wx(this.ticks.length,t.ticks.maxTicksLimit),r=e.minRotation||0,o=e.maxRotation;let c=r,u,f,d;if(!this._isVisible()||!e.display||r>=o||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const p=this._getLabelSizes(),_=p.widest.width,b=p.highest.height,x=Je(this.chart.width-_,0,this.maxWidth);u=t.offset?this.maxWidth/i:x/(i-1),_+6>u&&(u=x/(i-(t.offset?.5:1)),f=this.maxHeight-Dc(t.grid)-e.padding-Rx(t.title,this.chart.options.font),d=Math.sqrt(_*_+b*b),c=x_(Math.min(Math.asin(Je((p.highest.height+6)/u,-1,1)),Math.asin(Je(f/d,-1,1))-Math.asin(Je(b/d,-1,1)))),c=Math.max(r,Math.min(o,c))),this.labelRotation=c}afterCalculateLabelRotation(){le(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){le(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:r,grid:o}}=this,c=this._isVisible(),u=this.isHorizontal();if(c){const f=Rx(r,e.options.font);if(u?(t.width=this.maxWidth,t.height=Dc(o)+f):(t.height=this.maxHeight,t.width=Dc(o)+f),i.display&&this.ticks.length){const{first:d,last:p,widest:_,highest:b}=this._getLabelSizes(),x=i.padding*2,w=Ti(this.labelRotation),S=Math.cos(w),D=Math.sin(w);if(u){const L=i.mirror?0:D*_.width+S*b.height;t.height=Math.min(this.maxHeight,t.height+L+x)}else{const L=i.mirror?0:S*_.width+D*b.height;t.width=Math.min(this.maxWidth,t.width+L+x)}this._calculatePadding(d,p,D,S)}}this._handleMargins(),u?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,r){const{ticks:{align:o,padding:c},position:u}=this.options,f=this.labelRotation!==0,d=u!=="top"&&this.axis==="x";if(this.isHorizontal()){const p=this.getPixelForTick(0)-this.left,_=this.right-this.getPixelForTick(this.ticks.length-1);let b=0,x=0;f?d?(b=r*t.width,x=i*e.height):(b=i*t.height,x=r*e.width):o==="start"?x=e.width:o==="end"?b=t.width:o!=="inner"&&(b=t.width/2,x=e.width/2),this.paddingLeft=Math.max((b-p+c)*this.width/(this.width-p),0),this.paddingRight=Math.max((x-_+c)*this.width/(this.width-_),0)}else{let p=e.height/2,_=t.height/2;o==="start"?(p=0,_=t.height):o==="end"&&(p=e.height,_=0),this.paddingTop=p+c,this.paddingBottom=_+c}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){le(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)Lt(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=Cx(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:r,_longestTextCache:o}=this,c=[],u=[],f=Math.floor(e/wx(e,i));let d=0,p=0,_,b,x,w,S,D,L,F,W,J,$;for(_=0;_<e;_+=f){if(w=t[_].label,S=this._resolveTickFontOptions(_),r.font=D=S.string,L=o[D]=o[D]||{data:{},gc:[]},F=S.lineHeight,W=J=0,!Lt(w)&&!ye(w))W=bd(r,L.data,L.gc,W,w),J=F;else if(ye(w))for(b=0,x=w.length;b<x;++b)$=w[b],!Lt($)&&!ye($)&&(W=bd(r,L.data,L.gc,W,$),J+=F);c.push(W),u.push(J),d=Math.max(W,d),p=Math.max(J,p)}$L(o,e);const nt=c.indexOf(d),M=u.indexOf(p),C=O=>({width:c[O]||0,height:u[O]||0});return{first:C(0),last:C(e-1),widest:C(nt),highest:C(M),widths:c,heights:u}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return zP(this._alignToPixels?Ia(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=ZL(this.getContext(),t,i))}return this.$context||(this.$context=JL(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=Ti(this.labelRotation),i=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),o=this._getLabelSizes(),c=t.autoSkipPadding||0,u=o?o.widest.width+c:0,f=o?o.highest.height+c:0;return this.isHorizontal()?f*i>u*r?u/i:f/r:f*r<u*i?f/i:u/r}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,r=this.options,{grid:o,position:c,border:u}=r,f=o.offset,d=this.isHorizontal(),_=this.ticks.length+(f?1:0),b=Dc(o),x=[],w=u.setContext(this.getContext()),S=w.display?w.width:0,D=S/2,L=function(Y){return Ia(i,Y,S)};let F,W,J,$,nt,M,C,O,P,k,z,N;if(c==="top")F=L(this.bottom),M=this.bottom-b,O=F-D,k=L(t.top)+D,N=t.bottom;else if(c==="bottom")F=L(this.top),k=t.top,N=L(t.bottom)-D,M=F+D,O=this.top+b;else if(c==="left")F=L(this.right),nt=this.right-b,C=F-D,P=L(t.left)+D,z=t.right;else if(c==="right")F=L(this.left),P=t.left,z=L(t.right)-D,nt=F+D,C=this.left+b;else if(e==="x"){if(c==="center")F=L((t.top+t.bottom)/2+.5);else if(Ht(c)){const Y=Object.keys(c)[0],at=c[Y];F=L(this.chart.scales[Y].getPixelForValue(at))}k=t.top,N=t.bottom,M=F+D,O=M+b}else if(e==="y"){if(c==="center")F=L((t.left+t.right)/2);else if(Ht(c)){const Y=Object.keys(c)[0],at=c[Y];F=L(this.chart.scales[Y].getPixelForValue(at))}nt=F-D,C=nt-b,P=t.left,z=t.right}const kt=It(r.ticks.maxTicksLimit,_),Tt=Math.max(1,Math.ceil(_/kt));for(W=0;W<_;W+=Tt){const Y=this.getContext(W),at=o.setContext(Y),gt=u.setContext(Y),ht=at.lineWidth,xt=at.color,j=gt.dash||[],tt=gt.dashOffset,lt=at.tickWidth,ut=at.tickColor,vt=at.tickBorderDash||[],St=at.tickBorderDashOffset;J=QL(this,W,f),J!==void 0&&($=Ia(i,J,ht),d?nt=C=P=z=$:M=O=k=N=$,x.push({tx1:nt,ty1:M,tx2:C,ty2:O,x1:P,y1:k,x2:z,y2:N,width:ht,color:xt,borderDash:j,borderDashOffset:tt,tickWidth:lt,tickColor:ut,tickBorderDash:vt,tickBorderDashOffset:St}))}return this._ticksLength=_,this._borderValue=F,x}_computeLabelItems(t){const e=this.axis,i=this.options,{position:r,ticks:o}=i,c=this.isHorizontal(),u=this.ticks,{align:f,crossAlign:d,padding:p,mirror:_}=o,b=Dc(i.grid),x=b+p,w=_?-p:x,S=-Ti(this.labelRotation),D=[];let L,F,W,J,$,nt,M,C,O,P,k,z,N="middle";if(r==="top")nt=this.bottom-w,M=this._getXAxisLabelAlignment();else if(r==="bottom")nt=this.top+w,M=this._getXAxisLabelAlignment();else if(r==="left"){const Tt=this._getYAxisLabelAlignment(b);M=Tt.textAlign,$=Tt.x}else if(r==="right"){const Tt=this._getYAxisLabelAlignment(b);M=Tt.textAlign,$=Tt.x}else if(e==="x"){if(r==="center")nt=(t.top+t.bottom)/2+x;else if(Ht(r)){const Tt=Object.keys(r)[0],Y=r[Tt];nt=this.chart.scales[Tt].getPixelForValue(Y)+x}M=this._getXAxisLabelAlignment()}else if(e==="y"){if(r==="center")$=(t.left+t.right)/2-x;else if(Ht(r)){const Tt=Object.keys(r)[0],Y=r[Tt];$=this.chart.scales[Tt].getPixelForValue(Y)}M=this._getYAxisLabelAlignment(b).textAlign}e==="y"&&(f==="start"?N="top":f==="end"&&(N="bottom"));const kt=this._getLabelSizes();for(L=0,F=u.length;L<F;++L){W=u[L],J=W.label;const Tt=o.setContext(this.getContext(L));C=this.getPixelForTick(L)+o.labelOffset,O=this._resolveTickFontOptions(L),P=O.lineHeight,k=ye(J)?J.length:1;const Y=k/2,at=Tt.color,gt=Tt.textStrokeColor,ht=Tt.textStrokeWidth;let xt=M;c?($=C,M==="inner"&&(L===F-1?xt=this.options.reverse?"left":"right":L===0?xt=this.options.reverse?"right":"left":xt="center"),r==="top"?d==="near"||S!==0?z=-k*P+P/2:d==="center"?z=-kt.highest.height/2-Y*P+P:z=-kt.highest.height+P/2:d==="near"||S!==0?z=P/2:d==="center"?z=kt.highest.height/2-Y*P:z=kt.highest.height-k*P,_&&(z*=-1),S!==0&&!Tt.showLabelBackdrop&&($+=P/2*Math.sin(S))):(nt=C,z=(1-k)*P/2);let j;if(Tt.showLabelBackdrop){const tt=yn(Tt.backdropPadding),lt=kt.heights[L],ut=kt.widths[L];let vt=z-tt.top,St=0-tt.left;switch(N){case"middle":vt-=lt/2;break;case"bottom":vt-=lt;break}switch(M){case"center":St-=ut/2;break;case"right":St-=ut;break;case"inner":L===F-1?St-=ut:L>0&&(St-=ut/2);break}j={left:St,top:vt,width:ut+tt.width,height:lt+tt.height,color:Tt.backdropColor}}D.push({label:J,font:O,textOffset:z,options:{rotation:S,color:at,strokeColor:gt,strokeWidth:ht,textAlign:xt,textBaseline:N,translation:[$,nt],backdrop:j}})}return D}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-Ti(this.labelRotation))return t==="top"?"left":"right";let r="center";return e.align==="start"?r="left":e.align==="end"?r="right":e.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:r,padding:o}}=this.options,c=this._getLabelSizes(),u=t+o,f=c.widest.width;let d,p;return e==="left"?r?(p=this.right+o,i==="near"?d="left":i==="center"?(d="center",p+=f/2):(d="right",p+=f)):(p=this.right-u,i==="near"?d="right":i==="center"?(d="center",p-=f/2):(d="left",p=this.left)):e==="right"?r?(p=this.left+o,i==="near"?d="right":i==="center"?(d="center",p-=f/2):(d="left",p-=f)):(p=this.left+u,i==="near"?d="left":i==="center"?(d="center",p+=f/2):(d="right",p=this.right)):d="right",{textAlign:d,x:p}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:r,width:o,height:c}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,r,o,c),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const r=this.ticks.findIndex(o=>o.value===t);return r>=0?e.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let o,c;const u=(f,d,p)=>{!p.width||!p.color||(i.save(),i.lineWidth=p.width,i.strokeStyle=p.color,i.setLineDash(p.borderDash||[]),i.lineDashOffset=p.borderDashOffset,i.beginPath(),i.moveTo(f.x,f.y),i.lineTo(d.x,d.y),i.stroke(),i.restore())};if(e.display)for(o=0,c=r.length;o<c;++o){const f=r[o];e.drawOnChartArea&&u({x:f.x1,y:f.y1},{x:f.x2,y:f.y2},f),e.drawTicks&&u({x:f.tx1,y:f.ty1},{x:f.tx2,y:f.ty2},{color:f.tickColor,width:f.tickWidth,borderDash:f.tickBorderDash,borderDashOffset:f.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:r}}=this,o=i.setContext(this.getContext()),c=i.display?o.width:0;if(!c)return;const u=r.setContext(this.getContext(0)).lineWidth,f=this._borderValue;let d,p,_,b;this.isHorizontal()?(d=Ia(t,this.left,c)-c/2,p=Ia(t,this.right,u)+u/2,_=b=f):(_=Ia(t,this.top,c)-c/2,b=Ia(t,this.bottom,u)+u/2,d=p=f),e.save(),e.lineWidth=o.width,e.strokeStyle=o.color,e.beginPath(),e.moveTo(d,_),e.lineTo(p,b),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&Wd(i,r);const o=this.getLabelItems(t);for(const c of o){const u=c.options,f=c.font,d=c.label,p=c.textOffset;Qa(i,d,0,p,f,u)}r&&Xd(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:r}}=this;if(!i.display)return;const o=Ye(i.font),c=yn(i.padding),u=i.align;let f=o.lineHeight/2;e==="bottom"||e==="center"||Ht(e)?(f+=c.bottom,ye(i.text)&&(f+=o.lineHeight*(i.text.length-1))):f+=c.top;const{titleX:d,titleY:p,maxWidth:_,rotation:b}=e4(this,f,e,u);Qa(t,i.text,0,0,o,{color:i.color,maxWidth:_,rotation:b,textAlign:t4(u,e,r),textBaseline:"middle",translation:[d,p]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=It(t.grid&&t.grid.z,-1),r=It(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==to.prototype.draw?[{z:e,draw:o=>{this.draw(o)}}]:[{z:i,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:e,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let o,c;for(o=0,c=e.length;o<c;++o){const u=e[o];u[i]===this.id&&(!t||u.type===t)&&r.push(u)}return r}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return Ye(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Af{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;s4(e)&&(i=this.register(e));const r=this.items,o=t.id,c=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+t);return o in r||(r[o]=t,n4(t,c,i),this.override&&_e.override(t.id,t.overrides)),c}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,r=this.scope;i in e&&delete e[i],r&&i in _e[r]&&(delete _e[r][i],this.override&&delete Xa[i])}}function n4(n,t,e){const i=hu(Object.create(null),[e?_e.get(e):{},_e.get(t),n.defaults]);_e.set(t,i),n.defaultRoutes&&i4(t,n.defaultRoutes),n.descriptors&&_e.describe(t,n.descriptors)}function i4(n,t){Object.keys(t).forEach(e=>{const i=e.split("."),r=i.pop(),o=[n].concat(i).join("."),c=t[e].split("."),u=c.pop(),f=c.join(".");_e.route(o,r,f,u)})}function s4(n){return"id"in n&&"defaults"in n}class r4{constructor(){this.controllers=new Af(Si,"datasets",!0),this.elements=new Af(wi,"elements"),this.plugins=new Af(Object,"plugins"),this.scales=new Af(to,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(r=>{const o=i||this._getRegistryForType(r);i||o.isForType(r)||o===this.plugins&&r.id?this._exec(t,o,r):ne(r,c=>{const u=i||this._getRegistryForType(c);this._exec(t,u,c)})})}_exec(t,e,i){const r=E_(t);le(i["before"+r],[],i),e[t](i),le(i["after"+r],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const r=e.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return r}}var Qi=new r4;class a4{constructor(){this._init=void 0}notify(t,e,i,r){if(e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const o=r?this._descriptors(t).filter(r):this._descriptors(t),c=this._notify(o,t,e,i);return e==="afterDestroy"&&(this._notify(o,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),c}_notify(t,e,i,r){r=r||{};for(const o of t){const c=o.plugin,u=c[i],f=[e,r,o.options];if(le(u,f,c)===!1&&r.cancelable)return!1}return!0}invalidate(){Lt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,r=It(i.options&&i.options.plugins,{}),o=o4(i);return r===!1&&!e?[]:c4(t,o,r,e)}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,r=(o,c)=>o.filter(u=>!c.some(f=>u.plugin.id===f.plugin.id));this._notify(r(e,i),t,"stop"),this._notify(r(i,e),t,"start")}}function o4(n){const t={},e=[],i=Object.keys(Qi.plugins.items);for(let o=0;o<i.length;o++)e.push(Qi.getPlugin(i[o]));const r=n.plugins||[];for(let o=0;o<r.length;o++){const c=r[o];e.indexOf(c)===-1&&(e.push(c),t[c.id]=!0)}return{plugins:e,localIds:t}}function l4(n,t){return!t&&n===!1?null:n===!0?{}:n}function c4(n,{plugins:t,localIds:e},i,r){const o=[],c=n.getContext();for(const u of t){const f=u.id,d=l4(i[f],r);d!==null&&o.push({plugin:u,options:u4(n.config,{plugin:u,local:e[f]},d,c)})}return o}function u4(n,{plugin:t,local:e},i,r){const o=n.pluginScopeKeys(t),c=n.getOptionScopes(i,o);return e&&t.defaults&&c.push(t.defaults),n.createResolver(c,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function dy(n,t){const e=_e.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function h4(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function f4(n,t){return n===t?"_index_":"_value_"}function Ix(n){if(n==="x"||n==="y"||n==="r")return n}function d4(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function gy(n,...t){if(Ix(n))return n;for(const e of t){const i=e.axis||d4(e.position)||n.length>1&&Ix(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function Dx(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function g4(n,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(e.length)return Dx(n,"x",e[0])||Dx(n,"y",e[0])}return{}}function m4(n,t){const e=Xa[n.type]||{scales:{}},i=t.scales||{},r=dy(n.type,t),o=Object.create(null);return Object.keys(i).forEach(c=>{const u=i[c];if(!Ht(u))return console.error(`Invalid scale configuration for scale: ${c}`);if(u._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${c}`);const f=gy(c,u,g4(c,n),_e.scales[u.type]),d=f4(f,r),p=e.scales||{};o[c]=Qc(Object.create(null),[{axis:f},u,p[f],p[d]])}),n.data.datasets.forEach(c=>{const u=c.type||n.type,f=c.indexAxis||dy(u,t),p=(Xa[u]||{}).scales||{};Object.keys(p).forEach(_=>{const b=h4(_,f),x=c[b+"AxisID"]||b;o[x]=o[x]||Object.create(null),Qc(o[x],[{axis:b},i[x],p[_]])})}),Object.keys(o).forEach(c=>{const u=o[c];Qc(u,[_e.scales[u.type],_e.scale])}),o}function vw(n){const t=n.options||(n.options={});t.plugins=It(t.plugins,{}),t.scales=m4(n,t)}function Tw(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function p4(n){return n=n||{},n.data=Tw(n.data),vw(n),n}const Mx=new Map,Ew=new Set;function wf(n,t){let e=Mx.get(n);return e||(e=t(),Mx.set(n,e),Ew.add(e)),e}const Mc=(n,t,e)=>{const i=Hr(t,e);i!==void 0&&n.add(i)};class y4{constructor(t){this._config=p4(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Tw(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),vw(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return wf(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return wf(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return wf(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,i=this.type;return wf(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let r=i.get(t);return(!r||e)&&(r=new Map,i.set(t,r)),r}getOptionScopes(t,e,i){const{options:r,type:o}=this,c=this._cachedScopes(t,i),u=c.get(e);if(u)return u;const f=new Set;e.forEach(p=>{t&&(f.add(t),p.forEach(_=>Mc(f,t,_))),p.forEach(_=>Mc(f,r,_)),p.forEach(_=>Mc(f,Xa[o]||{},_)),p.forEach(_=>Mc(f,_e,_)),p.forEach(_=>Mc(f,uy,_))});const d=Array.from(f);return d.length===0&&d.push(Object.create(null)),Ew.has(e)&&c.set(e,d),d}chartOptionScopes(){const{options:t,type:e}=this;return[t,Xa[e]||{},_e.datasets[e]||{},{type:e},_e,uy]}resolveNamedOptions(t,e,i,r=[""]){const o={$shared:!0},{resolver:c,subPrefixes:u}=Ox(this._resolverCache,t,r);let f=c;if(b4(c,e)){o.$shared=!1,i=qr(i)?i():i;const d=this.createResolver(t,i,u);f=hl(c,i,d)}for(const d of e)o[d]=f[d];return o}createResolver(t,e,i=[""],r){const{resolver:o}=Ox(this._resolverCache,t,i);return Ht(e)?hl(o,e,void 0,r):o}}function Ox(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));const r=e.join();let o=i.get(r);return o||(o={resolver:R_(t,e),subPrefixes:e.filter(u=>!u.toLowerCase().includes("hover"))},i.set(r,o)),o}const _4=n=>Ht(n)&&Object.getOwnPropertyNames(n).some(t=>qr(n[t]));function b4(n,t){const{isScriptable:e,isIndexable:i}=tw(n);for(const r of t){const o=e(r),c=i(r),u=(c||o)&&n[r];if(o&&(qr(u)||_4(u))||c&&ye(u))return!0}return!1}var v4="4.5.1";const T4=["top","bottom","left","right","chartArea"];function Nx(n,t){return n==="top"||n==="bottom"||T4.indexOf(n)===-1&&t==="x"}function kx(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function Px(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),le(e&&e.onComplete,[n],t)}function E4(n){const t=n.chart,e=t.options.animation;le(e&&e.onProgress,[n],t)}function xw(n){return M_()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const Yf={},Vx=n=>{const t=xw(n);return Object.values(Yf).filter(e=>e.canvas===t).pop()};function x4(n,t,e){const i=Object.keys(n);for(const r of i){const o=+r;if(o>=t){const c=n[r];delete n[r],(e>0||o>t)&&(n[o+e]=c)}}}function S4(n,t,e,i){return!e||n.type==="mouseout"?null:i?t:n}class bi{static register(...t){Qi.add(...t),Lx()}static unregister(...t){Qi.remove(...t),Lx()}constructor(t,e){const i=this.config=new y4(e),r=xw(t),o=Vx(r);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const c=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||FL(r)),this.platform.updateConfig(i);const u=this.platform.acquireContext(r,c.aspectRatio),f=u&&u.canvas,d=f&&f.height,p=f&&f.width;if(this.id=AP(),this.ctx=u,this.canvas=f,this.width=p,this.height=d,this._options=c,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new a4,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=FP(_=>this.update(_),c.resizeDelay||0),this._dataChanges=[],Yf[this.id]=this,!u||!f){console.error("Failed to create chart: can't acquire context from the given item");return}As.listen(this,"complete",Px),As.listen(this,"progress",E4),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:r,_aspectRatio:o}=this;return Lt(t)?e&&o?o:r?i/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Qi}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():rx(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return nx(this.canvas,this.ctx),this}stop(){return As.stop(this),this}resize(t,e){As.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,r=this.canvas,o=i.maintainAspectRatio&&this.aspectRatio,c=this.platform.getMaximumSize(r,t,e,o),u=i.devicePixelRatio||this.platform.getDevicePixelRatio(),f=this.width?"resize":"attach";this.width=c.width,this.height=c.height,this._aspectRatio=this.aspectRatio,rx(this,u,!0)&&(this.notifyPlugins("resize",{size:c}),le(i.onResize,[this,c],this),this.attached&&this._doResize(f)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};ne(e,(i,r)=>{i.id=r})}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,r=Object.keys(i).reduce((c,u)=>(c[u]=!1,c),{});let o=[];e&&(o=o.concat(Object.keys(e).map(c=>{const u=e[c],f=gy(c,u),d=f==="r",p=f==="x";return{options:u,dposition:d?"chartArea":p?"bottom":"left",dtype:d?"radialLinear":p?"category":"linear"}}))),ne(o,c=>{const u=c.options,f=u.id,d=gy(f,u),p=It(u.type,c.dtype);(u.position===void 0||Nx(u.position,d)!==Nx(c.dposition))&&(u.position=c.dposition),r[f]=!0;let _=null;if(f in i&&i[f].type===p)_=i[f];else{const b=Qi.getScale(p);_=new b({id:f,type:p,ctx:this.ctx,chart:this}),i[_.id]=_}_.init(u,t)}),ne(r,(c,u)=>{c||delete i[u]}),ne(i,c=>{mn.configure(this,c,c.options),mn.addBox(this,c)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((r,o)=>r.index-o.index),i>e){for(let r=e;r<i;++r)this._destroyDatasetMeta(r);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(kx("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((i,r)=>{e.filter(o=>o===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=e.length;i<r;i++){const o=e[i];let c=this.getDatasetMeta(i);const u=o.type||this.config.type;if(c.type&&c.type!==u&&(this._destroyDatasetMeta(i),c=this.getDatasetMeta(i)),c.type=u,c.indexAxis=o.indexAxis||dy(u,this.options),c.order=o.order||0,c.index=i,c.label=""+o.label,c.visible=this.isDatasetVisible(i),c.controller)c.controller.updateIndex(i),c.controller.linkScales();else{const f=Qi.getController(u),{datasetElementType:d,dataElementType:p}=_e.datasets[u];Object.assign(f,{dataElementType:Qi.getElement(p),datasetElementType:d&&Qi.getElement(d)}),c.controller=new f(this,i),t.push(c.controller)}}return this._updateMetasets(),t}_resetElements(){ne(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let c=0;for(let d=0,p=this.data.datasets.length;d<p;d++){const{controller:_}=this.getDatasetMeta(d),b=!r&&o.indexOf(_)===-1;_.buildOrUpdateElements(b),c=Math.max(+_.getMaxOverflow(),c)}c=this._minPadding=i.layout.autoPadding?c:0,this._updateLayout(c),r||ne(o,d=>{d.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(kx("z","_idx"));const{_active:u,_lastEvent:f}=this;f?this._eventHandler(f,!0):u.length&&this._updateHoverStyles(u,u,!0),this.render()}_updateScales(){ne(this.scales,t=>{mn.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!KE(e,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:o}of e){const c=i==="_removeElements"?-o:o;x4(t,r,c)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=o=>new Set(t.filter(c=>c[0]===o).map((c,u)=>u+","+c.splice(1).join(","))),r=i(0);for(let o=1;o<e;o++)if(!KE(r,i(o)))return;return Array.from(r).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;mn.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],ne(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,o)=>{r._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,qr(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),r={meta:i,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(e),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(As.has(this)?this.attached&&!As.running(this)&&As.start(this):(this.draw(),Px({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let r,o;for(r=0,o=e.length;r<o;++r){const c=e[r];(!t||c.visible)&&i.push(c)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i={meta:t,index:t.index,cancelable:!0},r=hw(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(r&&Wd(e,r),t.controller.draw(),r&&Xd(e),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return Ns(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,r){const o=TL.modes[e];return typeof o=="function"?o(this,t,i,r):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let r=i.filter(o=>o&&o._dataset===e).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=Qr(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!e.hidden}setDatasetVisibility(t,e){const i=this.getDatasetMeta(t);i.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const r=i?"show":"hide",o=this.getDatasetMeta(t),c=o.controller._resolveAnimations(void 0,r);fu(e)?(o.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),c.update(o,{visible:i}),this.update(u=>u.datasetIndex===t?r:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),As.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),nx(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete Yf[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(o,c)=>{e.addEventListener(this,o,c),t[o]=c},r=(o,c,u)=>{o.offsetX=c,o.offsetY=u,this._eventHandler(o)};ne(this.options.events,o=>i(o,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(f,d)=>{e.addEventListener(this,f,d),t[f]=d},r=(f,d)=>{t[f]&&(e.removeEventListener(this,f,d),delete t[f])},o=(f,d)=>{this.canvas&&this.resize(f,d)};let c;const u=()=>{r("attach",u),this.attached=!0,this.resize(),i("resize",o),i("detach",c)};c=()=>{this.attached=!1,r("resize",o),this._stop(),this._resize(0,0),i("attach",u)},e.isAttached(this.canvas)?u():c()}unbindEvents(){ne(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},ne(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const r=i?"set":"remove";let o,c,u,f;for(e==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+r+"DatasetHoverStyle"]()),u=0,f=t.length;u<f;++u){c=t[u];const d=c&&this.getDatasetMeta(c.datasetIndex).controller;d&&d[r+"HoverStyle"](c.element,c.datasetIndex,c.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map(({datasetIndex:o,index:c})=>{const u=this.getDatasetMeta(o);if(!u)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:u.data[c],index:c}});!pd(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,i){const r=this.options.hover,o=(f,d)=>f.filter(p=>!d.some(_=>p.datasetIndex===_.datasetIndex&&p.index===_.index)),c=o(e,t),u=i?t:o(t,e);c.length&&this.updateHoverStyle(c,r.mode,!1),u.length&&r.mode&&this.updateHoverStyle(u,r.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},r=c=>(c.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const o=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(o||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:r=[],options:o}=this,c=e,u=this._getActiveElements(t,r,i,c),f=MP(t),d=S4(t,this._lastEvent,i,f);i&&(this._lastEvent=null,le(o.onHover,[t,u,this],this),f&&le(o.onClick,[t,u,this],this));const p=!pd(u,r);return(p||e)&&(this._active=u,this._updateHoverStyles(u,r,e)),this._lastEvent=d,p}_getActiveElements(t,e,i,r){if(t.type==="mouseout")return[];if(!i)return e;const o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,r)}}ct(bi,"defaults",_e),ct(bi,"instances",Yf),ct(bi,"overrides",Xa),ct(bi,"registry",Qi),ct(bi,"version",v4),ct(bi,"getChart",Vx);function Lx(){return ne(bi.instances,n=>n._plugins.invalidate())}function A4(n,t,e){const{startAngle:i,x:r,y:o,outerRadius:c,innerRadius:u,options:f}=t,{borderWidth:d,borderJoinStyle:p}=f,_=Math.min(d/c,dn(i-e));if(n.beginPath(),n.arc(r,o,c-d/2,i+_/2,e-_/2),u>0){const b=Math.min(d/u,dn(i-e));n.arc(r,o,u+d/2,e-b/2,i+b/2,!0)}else{const b=Math.min(d/2,c*dn(i-e));if(p==="round")n.arc(r,o,b,e-Xt/2,i+Xt/2,!0);else if(p==="bevel"){const x=2*b*b,w=-x*Math.cos(e+Xt/2)+r,S=-x*Math.sin(e+Xt/2)+o,D=x*Math.cos(i+Xt/2)+r,L=x*Math.sin(i+Xt/2)+o;n.lineTo(w,S),n.lineTo(D,L)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function w4(n,t,e){const{startAngle:i,pixelMargin:r,x:o,y:c,outerRadius:u,innerRadius:f}=t;let d=r/u;n.beginPath(),n.arc(o,c,u,i-d,e+d),f>r?(d=r/f,n.arc(o,c,f,e+d,i-d,!0)):n.arc(o,c,r,e+Re,i-Re),n.closePath(),n.clip()}function C4(n){return C_(n,["outerStart","outerEnd","innerStart","innerEnd"])}function R4(n,t,e,i){const r=C4(n.options.borderRadius),o=(e-t)/2,c=Math.min(o,i*t/2),u=f=>{const d=(e-Math.min(o,f))*i/2;return Je(f,0,Math.min(o,d))};return{outerStart:u(r.outerStart),outerEnd:u(r.outerEnd),innerStart:Je(r.innerStart,0,c),innerEnd:Je(r.innerEnd,0,c)}}function Ko(n,t,e,i){return{x:e+n*Math.cos(t),y:i+n*Math.sin(t)}}function Ed(n,t,e,i,r,o){const{x:c,y:u,startAngle:f,pixelMargin:d,innerRadius:p}=t,_=Math.max(t.outerRadius+i+e-d,0),b=p>0?p+i+e+d:0;let x=0;const w=r-f;if(i){const Tt=p>0?p-i:0,Y=_>0?_-i:0,at=(Tt+Y)/2,gt=at!==0?w*at/(at+i):w;x=(w-gt)/2}const S=Math.max(.001,w*_-e/Xt)/_,D=(w-S)/2,L=f+D+x,F=r-D-x,{outerStart:W,outerEnd:J,innerStart:$,innerEnd:nt}=R4(t,b,_,F-L),M=_-W,C=_-J,O=L+W/M,P=F-J/C,k=b+$,z=b+nt,N=L+$/k,kt=F-nt/z;if(n.beginPath(),o){const Tt=(O+P)/2;if(n.arc(c,u,_,O,Tt),n.arc(c,u,_,Tt,P),J>0){const ht=Ko(C,P,c,u);n.arc(ht.x,ht.y,J,P,F+Re)}const Y=Ko(z,F,c,u);if(n.lineTo(Y.x,Y.y),nt>0){const ht=Ko(z,kt,c,u);n.arc(ht.x,ht.y,nt,F+Re,kt+Math.PI)}const at=(F-nt/b+(L+$/b))/2;if(n.arc(c,u,b,F-nt/b,at,!0),n.arc(c,u,b,at,L+$/b,!0),$>0){const ht=Ko(k,N,c,u);n.arc(ht.x,ht.y,$,N+Math.PI,L-Re)}const gt=Ko(M,L,c,u);if(n.lineTo(gt.x,gt.y),W>0){const ht=Ko(M,O,c,u);n.arc(ht.x,ht.y,W,L-Re,O)}}else{n.moveTo(c,u);const Tt=Math.cos(O)*_+c,Y=Math.sin(O)*_+u;n.lineTo(Tt,Y);const at=Math.cos(P)*_+c,gt=Math.sin(P)*_+u;n.lineTo(at,gt)}n.closePath()}function I4(n,t,e,i,r){const{fullCircles:o,startAngle:c,circumference:u}=t;let f=t.endAngle;if(o){Ed(n,t,e,i,f,r);for(let d=0;d<o;++d)n.fill();isNaN(u)||(f=c+(u%de||de))}return Ed(n,t,e,i,f,r),n.fill(),f}function D4(n,t,e,i,r){const{fullCircles:o,startAngle:c,circumference:u,options:f}=t,{borderWidth:d,borderJoinStyle:p,borderDash:_,borderDashOffset:b,borderRadius:x}=f,w=f.borderAlign==="inner";if(!d)return;n.setLineDash(_||[]),n.lineDashOffset=b,w?(n.lineWidth=d*2,n.lineJoin=p||"round"):(n.lineWidth=d,n.lineJoin=p||"bevel");let S=t.endAngle;if(o){Ed(n,t,e,i,S,r);for(let D=0;D<o;++D)n.stroke();isNaN(u)||(S=c+(u%de||de))}w&&w4(n,t,S),f.selfJoin&&S-c>=Xt&&x===0&&p!=="miter"&&A4(n,t,S),o||(Ed(n,t,e,i,S,r),n.stroke())}class Bc extends wi{constructor(e){super();ct(this,"circumference");ct(this,"endAngle");ct(this,"fullCircles");ct(this,"innerRadius");ct(this,"outerRadius");ct(this,"pixelMargin");ct(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,i,r){const o=this.getProps(["x","y"],r),{angle:c,distance:u}=q1(o,{x:e,y:i}),{startAngle:f,endAngle:d,innerRadius:p,outerRadius:_,circumference:b}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),x=(this.options.spacing+this.options.borderWidth)/2,w=It(b,d-f),S=du(c,f,d)&&f!==d,D=w>=de||S,L=Ms(u,p+x,_+x);return D&&L}getCenterPoint(e){const{x:i,y:r,startAngle:o,endAngle:c,innerRadius:u,outerRadius:f}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:d,spacing:p}=this.options,_=(o+c)/2,b=(u+f+p+d)/2;return{x:i+Math.cos(_)*b,y:r+Math.sin(_)*b}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:i,circumference:r}=this,o=(i.offset||0)/4,c=(i.spacing||0)/2,u=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=r>de?Math.floor(r/de):0,r===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const f=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(f)*o,Math.sin(f)*o);const d=1-Math.sin(Math.min(Xt,r||0)),p=o*d;e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,I4(e,this,p,c,u),D4(e,this,p,c,u),e.restore()}}ct(Bc,"id","arc"),ct(Bc,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),ct(Bc,"defaultRoutes",{backgroundColor:"backgroundColor"}),ct(Bc,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"});function Sw(n,t,e=t){n.lineCap=It(e.borderCapStyle,t.borderCapStyle),n.setLineDash(It(e.borderDash,t.borderDash)),n.lineDashOffset=It(e.borderDashOffset,t.borderDashOffset),n.lineJoin=It(e.borderJoinStyle,t.borderJoinStyle),n.lineWidth=It(e.borderWidth,t.borderWidth),n.strokeStyle=It(e.borderColor,t.borderColor)}function M4(n,t,e){n.lineTo(e.x,e.y)}function O4(n){return n.stepped?tV:n.tension||n.cubicInterpolationMode==="monotone"?eV:M4}function Aw(n,t,e={}){const i=n.length,{start:r=0,end:o=i-1}=e,{start:c,end:u}=t,f=Math.max(r,c),d=Math.min(o,u),p=r<c&&o<c||r>u&&o>u;return{count:i,start:f,loop:t.loop,ilen:d<f&&!p?i+d-f:d-f}}function N4(n,t,e,i){const{points:r,options:o}=t,{count:c,start:u,loop:f,ilen:d}=Aw(r,e,i),p=O4(o);let{move:_=!0,reverse:b}=i||{},x,w,S;for(x=0;x<=d;++x)w=r[(u+(b?d-x:x))%c],!w.skip&&(_?(n.moveTo(w.x,w.y),_=!1):p(n,S,w,b,o.stepped),S=w);return f&&(w=r[(u+(b?d:0))%c],p(n,S,w,b,o.stepped)),!!f}function k4(n,t,e,i){const r=t.points,{count:o,start:c,ilen:u}=Aw(r,e,i),{move:f=!0,reverse:d}=i||{};let p=0,_=0,b,x,w,S,D,L;const F=J=>(c+(d?u-J:J))%o,W=()=>{S!==D&&(n.lineTo(p,D),n.lineTo(p,S),n.lineTo(p,L))};for(f&&(x=r[F(0)],n.moveTo(x.x,x.y)),b=0;b<=u;++b){if(x=r[F(b)],x.skip)continue;const J=x.x,$=x.y,nt=J|0;nt===w?($<S?S=$:$>D&&(D=$),p=(_*p+J)/++_):(W(),n.lineTo(J,$),w=nt,_=0,S=D=$),L=$}W()}function my(n){const t=n.options,e=t.borderDash&&t.borderDash.length;return!n._decimated&&!n._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?k4:N4}function P4(n){return n.stepped?NV:n.tension||n.cubicInterpolationMode==="monotone"?kV:ka}function V4(n,t,e,i){let r=t._path;r||(r=t._path=new Path2D,t.path(r,e,i)&&r.closePath()),Sw(n,t.options),n.stroke(r)}function L4(n,t,e,i){const{segments:r,options:o}=t,c=my(t);for(const u of r)Sw(n,o,u.style),n.beginPath(),c(n,t,u,{start:e,end:e+i-1})&&n.closePath(),n.stroke()}const z4=typeof Path2D=="function";function j4(n,t,e,i){z4&&!t.options.segment?V4(n,t,e,i):L4(n,t,e,i)}class Cr extends wi{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;AV(this._points,i,t,r,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=UV(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,i=t.length;return i&&e[t[i-1].end]}interpolate(t,e){const i=this.options,r=t[e],o=this.points,c=uw(this,{property:e,start:r,end:r});if(!c.length)return;const u=[],f=P4(i);let d,p;for(d=0,p=c.length;d<p;++d){const{start:_,end:b}=c[d],x=o[_],w=o[b];if(x===w){u.push(x);continue}const S=Math.abs((r-x[e])/(w[e]-x[e])),D=f(x,w,S,i.stepped);D[e]=t[e],u.push(D)}return u.length===1?u[0]:u}pathSegment(t,e,i){return my(this)(t,this,e,i)}path(t,e,i){const r=this.segments,o=my(this);let c=this._loop;e=e||0,i=i||this.points.length-e;for(const u of r)c&=o(t,this,u,{start:e,end:e+i-1});return!!c}draw(t,e,i,r){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),j4(t,this,i,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ct(Cr,"id","line"),ct(Cr,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ct(Cr,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ct(Cr,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function zx(n,t,e,i){const r=n.options,{[e]:o}=n.getProps([e],i);return Math.abs(t-o)<r.radius+r.hitRadius}class Kf extends wi{constructor(e){super();ct(this,"parsed");ct(this,"skip");ct(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,i,r){const o=this.options,{x:c,y:u}=this.getProps(["x","y"],r);return Math.pow(e-c,2)+Math.pow(i-u,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(e,i){return zx(this,e,"x",i)}inYRange(e,i){return zx(this,e,"y",i)}getCenterPoint(e){const{x:i,y:r}=this.getProps(["x","y"],e);return{x:i,y:r}}size(e){e=e||this.options||{};let i=e.radius||0;i=Math.max(i,i&&e.hoverRadius||0);const r=i&&e.borderWidth||0;return(i+r)*2}draw(e,i){const r=this.options;this.skip||r.radius<.1||!Ns(this,i,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,hy(e,r,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}ct(Kf,"id","point"),ct(Kf,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ct(Kf,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function ww(n,t){const{x:e,y:i,base:r,width:o,height:c}=n.getProps(["x","y","base","width","height"],t);let u,f,d,p,_;return n.horizontal?(_=c/2,u=Math.min(e,r),f=Math.max(e,r),d=i-_,p=i+_):(_=o/2,u=e-_,f=e+_,d=Math.min(i,r),p=Math.max(i,r)),{left:u,top:d,right:f,bottom:p}}function Rr(n,t,e,i){return n?0:Je(t,e,i)}function U4(n,t,e){const i=n.options.borderWidth,r=n.borderSkipped,o=Z1(i);return{t:Rr(r.top,o.top,0,e),r:Rr(r.right,o.right,0,t),b:Rr(r.bottom,o.bottom,0,e),l:Rr(r.left,o.left,0,t)}}function B4(n,t,e){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),r=n.options.borderRadius,o=Ua(r),c=Math.min(t,e),u=n.borderSkipped,f=i||Ht(r);return{topLeft:Rr(!f||u.top||u.left,o.topLeft,0,c),topRight:Rr(!f||u.top||u.right,o.topRight,0,c),bottomLeft:Rr(!f||u.bottom||u.left,o.bottomLeft,0,c),bottomRight:Rr(!f||u.bottom||u.right,o.bottomRight,0,c)}}function F4(n){const t=ww(n),e=t.right-t.left,i=t.bottom-t.top,r=U4(n,e/2,i/2),o=B4(n,e/2,i/2);return{outer:{x:t.left,y:t.top,w:e,h:i,radius:o},inner:{x:t.left+r.l,y:t.top+r.t,w:e-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,o.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(r.b,r.r))}}}}function Rp(n,t,e,i){const r=t===null,o=e===null,u=n&&!(r&&o)&&ww(n,i);return u&&(r||Ms(t,u.left,u.right))&&(o||Ms(e,u.top,u.bottom))}function H4(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function q4(n,t){n.rect(t.x,t.y,t.w,t.h)}function Ip(n,t,e={}){const i=n.x!==e.x?-t:0,r=n.y!==e.y?-t:0,o=(n.x+n.w!==e.x+e.w?t:0)-i,c=(n.y+n.h!==e.y+e.h?t:0)-r;return{x:n.x+i,y:n.y+r,w:n.w+o,h:n.h+c,radius:n.radius}}class Wf extends wi{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:i,backgroundColor:r}}=this,{inner:o,outer:c}=F4(this),u=H4(c.radius)?gu:q4;t.save(),(c.w!==o.w||c.h!==o.h)&&(t.beginPath(),u(t,Ip(c,e,o)),t.clip(),u(t,Ip(o,-e,c)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),u(t,Ip(o,e)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,e,i){return Rp(this,t,e,i)}inXRange(t,e){return Rp(this,t,null,e)}inYRange(t,e){return Rp(this,null,t,e)}getCenterPoint(t){const{x:e,y:i,base:r,horizontal:o}=this.getProps(["x","y","base","horizontal"],t);return{x:o?(e+r)/2:e,y:o?i:(i+r)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}ct(Wf,"id","bar"),ct(Wf,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),ct(Wf,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var G4=Object.freeze({__proto__:null,ArcElement:Bc,BarElement:Wf,LineElement:Cr,PointElement:Kf});const py=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],jx=py.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function Cw(n){return py[n%py.length]}function Rw(n){return jx[n%jx.length]}function Y4(n,t){return n.borderColor=Cw(t),n.backgroundColor=Rw(t),++t}function K4(n,t){return n.backgroundColor=n.data.map(()=>Cw(t++)),t}function W4(n,t){return n.backgroundColor=n.data.map(()=>Rw(t++)),t}function X4(n){let t=0;return(e,i)=>{const r=n.getDatasetMeta(i).controller;r instanceof La?t=K4(e,t):r instanceof tu?t=W4(e,t):r&&(t=Y4(e,t))}}function Ux(n){let t;for(t in n)if(n[t].borderColor||n[t].backgroundColor)return!0;return!1}function Q4(n){return n&&(n.borderColor||n.backgroundColor)}function $4(){return _e.borderColor!=="rgba(0,0,0,0.1)"||_e.backgroundColor!=="rgba(0,0,0,0.1)"}var J4={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,t,e){if(!e.enabled)return;const{data:{datasets:i},options:r}=n.config,{elements:o}=r,c=Ux(i)||Q4(r)||o&&Ux(o)||$4();if(!e.forceOverride&&c)return;const u=X4(n);i.forEach(u)}};function Z4(n,t,e,i,r){const o=r.samples||i;if(o>=e)return n.slice(t,t+e);const c=[],u=(e-2)/(o-2);let f=0;const d=t+e-1;let p=t,_,b,x,w,S;for(c[f++]=n[p],_=0;_<o-2;_++){let D=0,L=0,F;const W=Math.floor((_+1)*u)+1+t,J=Math.min(Math.floor((_+2)*u)+1,e)+t,$=J-W;for(F=W;F<J;F++)D+=n[F].x,L+=n[F].y;D/=$,L/=$;const nt=Math.floor(_*u)+1+t,M=Math.min(Math.floor((_+1)*u)+1,e)+t,{x:C,y:O}=n[p];for(x=w=-1,F=nt;F<M;F++)w=.5*Math.abs((C-D)*(n[F].y-O)-(C-n[F].x)*(L-O)),w>x&&(x=w,b=n[F],S=F);c[f++]=b,p=S}return c[f++]=n[d],c}function t3(n,t,e,i){let r=0,o=0,c,u,f,d,p,_,b,x,w,S;const D=[],L=t+e-1,F=n[t].x,J=n[L].x-F;for(c=t;c<t+e;++c){u=n[c],f=(u.x-F)/J*i,d=u.y;const $=f|0;if($===p)d<w?(w=d,_=c):d>S&&(S=d,b=c),r=(o*r+u.x)/++o;else{const nt=c-1;if(!Lt(_)&&!Lt(b)){const M=Math.min(_,b),C=Math.max(_,b);M!==x&&M!==nt&&D.push({...n[M],x:r}),C!==x&&C!==nt&&D.push({...n[C],x:r})}c>0&&nt!==x&&D.push(n[nt]),D.push(u),p=$,o=0,w=S=d,_=b=x=c}}return D}function Iw(n){if(n._decimated){const t=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function Bx(n){n.data.datasets.forEach(t=>{Iw(t)})}function e3(n,t){const e=t.length;let i=0,r;const{iScale:o}=n,{min:c,max:u,minDefined:f,maxDefined:d}=o.getUserBounds();return f&&(i=Je(Os(t,o.axis,c).lo,0,e-1)),d?r=Je(Os(t,o.axis,u).hi+1,i,e)-i:r=e-i,{start:i,count:r}}var n3={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,t,e)=>{if(!e.enabled){Bx(n);return}const i=n.width;n.data.datasets.forEach((r,o)=>{const{_data:c,indexAxis:u}=r,f=n.getDatasetMeta(o),d=c||r.data;if(jc([u,n.options.indexAxis])==="y"||!f.controller.supportsDecimation)return;const p=n.scales[f.xAxisID];if(p.type!=="linear"&&p.type!=="time"||n.options.parsing)return;let{start:_,count:b}=e3(f,d);const x=e.threshold||4*i;if(b<=x){Iw(r);return}Lt(c)&&(r._data=d,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(S){this._data=S}}));let w;switch(e.algorithm){case"lttb":w=Z4(d,_,b,i,e);break;case"min-max":w=t3(d,_,b,i);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}r._decimated=w})},destroy(n){Bx(n)}};function i3(n,t,e){const i=n.segments,r=n.points,o=t.points,c=[];for(const u of i){let{start:f,end:d}=u;d=Jd(f,d,r);const p=yy(e,r[f],r[d],u.loop);if(!t.segments){c.push({source:u,target:p,start:r[f],end:r[d]});continue}const _=uw(t,p);for(const b of _){const x=yy(e,o[b.start],o[b.end],b.loop),w=cw(u,r,x);for(const S of w)c.push({source:S,target:b,start:{[e]:Fx(p,x,"start",Math.max)},end:{[e]:Fx(p,x,"end",Math.min)}})}}return c}function yy(n,t,e,i){if(i)return;let r=t[n],o=e[n];return n==="angle"&&(r=dn(r),o=dn(o)),{property:n,start:r,end:o}}function s3(n,t){const{x:e=null,y:i=null}=n||{},r=t.points,o=[];return t.segments.forEach(({start:c,end:u})=>{u=Jd(c,u,r);const f=r[c],d=r[u];i!==null?(o.push({x:f.x,y:i}),o.push({x:d.x,y:i})):e!==null&&(o.push({x:e,y:f.y}),o.push({x:e,y:d.y}))}),o}function Jd(n,t,e){for(;t>n;t--){const i=e[t];if(!isNaN(i.x)&&!isNaN(i.y))break}return t}function Fx(n,t,e,i){return n&&t?i(n[e],t[e]):n?n[e]:t?t[e]:0}function Dw(n,t){let e=[],i=!1;return ye(n)?(i=!0,e=n):e=s3(n,t),e.length?new Cr({points:e,options:{tension:0},_loop:i,_fullLoop:i}):null}function Hx(n){return n&&n.fill!==!1}function r3(n,t,e){let r=n[t].fill;const o=[t];let c;if(!e)return r;for(;r!==!1&&o.indexOf(r)===-1;){if(!Ee(r))return r;if(c=n[r],!c)return!1;if(c.visible)return r;o.push(r),r=c.fill}return!1}function a3(n,t,e){const i=u3(n);if(Ht(i))return isNaN(i.value)?!1:i;let r=parseFloat(i);return Ee(r)&&Math.floor(r)===r?o3(i[0],t,r,e):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function o3(n,t,e,i){return(n==="-"||n==="+")&&(e=t+e),e===t||e<0||e>=i?!1:e}function l3(n,t){let e=null;return n==="start"?e=t.bottom:n==="end"?e=t.top:Ht(n)?e=t.getPixelForValue(n.value):t.getBasePixel&&(e=t.getBasePixel()),e}function c3(n,t,e){let i;return n==="start"?i=e:n==="end"?i=t.options.reverse?t.min:t.max:Ht(n)?i=n.value:i=t.getBaseValue(),i}function u3(n){const t=n.options,e=t.fill;let i=It(e&&e.target,e);return i===void 0&&(i=!!t.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function h3(n){const{scale:t,index:e,line:i}=n,r=[],o=i.segments,c=i.points,u=f3(t,e);u.push(Dw({x:null,y:t.bottom},i));for(let f=0;f<o.length;f++){const d=o[f];for(let p=d.start;p<=d.end;p++)d3(r,c[p],u)}return new Cr({points:r,options:{}})}function f3(n,t){const e=[],i=n.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){const o=i[r];if(o.index===t)break;o.hidden||e.unshift(o.dataset)}return e}function d3(n,t,e){const i=[];for(let r=0;r<e.length;r++){const o=e[r],{first:c,last:u,point:f}=g3(o,t,"x");if(!(!f||c&&u)){if(c)i.unshift(f);else if(n.push(f),!u)break}}n.push(...i)}function g3(n,t,e){const i=n.interpolate(t,e);if(!i)return{};const r=i[e],o=n.segments,c=n.points;let u=!1,f=!1;for(let d=0;d<o.length;d++){const p=o[d],_=c[p.start][e],b=c[p.end][e];if(Ms(r,_,b)){u=r===_,f=r===b;break}}return{first:u,last:f,point:i}}class Mw{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,i){const{x:r,y:o,radius:c}=this;return e=e||{start:0,end:de},t.arc(r,o,c,e.end,e.start,!0),!i.bounds}interpolate(t){const{x:e,y:i,radius:r}=this,o=t.angle;return{x:e+Math.cos(o)*r,y:i+Math.sin(o)*r,angle:o}}}function m3(n){const{chart:t,fill:e,line:i}=n;if(Ee(e))return p3(t,e);if(e==="stack")return h3(n);if(e==="shape")return!0;const r=y3(n);return r instanceof Mw?r:Dw(r,i)}function p3(n,t){const e=n.getDatasetMeta(t);return e&&n.isDatasetVisible(t)?e.dataset:null}function y3(n){return(n.scale||{}).getPointPositionForValue?b3(n):_3(n)}function _3(n){const{scale:t={},fill:e}=n,i=l3(e,t);if(Ee(i)){const r=t.isHorizontal();return{x:r?i:null,y:r?null:i}}return null}function b3(n){const{scale:t,fill:e}=n,i=t.options,r=t.getLabels().length,o=i.reverse?t.max:t.min,c=c3(e,t,o),u=[];if(i.grid.circular){const f=t.getPointPositionForValue(0,o);return new Mw({x:f.x,y:f.y,radius:t.getDistanceFromCenterForValue(c)})}for(let f=0;f<r;++f)u.push(t.getPointPositionForValue(f,c));return u}function Dp(n,t,e){const i=m3(t),{chart:r,index:o,line:c,scale:u,axis:f}=t,d=c.options,p=d.fill,_=d.backgroundColor,{above:b=_,below:x=_}=p||{},w=r.getDatasetMeta(o),S=hw(r,w);i&&c.points.length&&(Wd(n,e),v3(n,{line:c,target:i,above:b,below:x,area:e,scale:u,axis:f,clip:S}),Xd(n))}function v3(n,t){const{line:e,target:i,above:r,below:o,area:c,scale:u,clip:f}=t,d=e._loop?"angle":t.axis;n.save();let p=o;o!==r&&(d==="x"?(qx(n,i,c.top),Mp(n,{line:e,target:i,color:r,scale:u,property:d,clip:f}),n.restore(),n.save(),qx(n,i,c.bottom)):d==="y"&&(Gx(n,i,c.left),Mp(n,{line:e,target:i,color:o,scale:u,property:d,clip:f}),n.restore(),n.save(),Gx(n,i,c.right),p=r)),Mp(n,{line:e,target:i,color:p,scale:u,property:d,clip:f}),n.restore()}function qx(n,t,e){const{segments:i,points:r}=t;let o=!0,c=!1;n.beginPath();for(const u of i){const{start:f,end:d}=u,p=r[f],_=r[Jd(f,d,r)];o?(n.moveTo(p.x,p.y),o=!1):(n.lineTo(p.x,e),n.lineTo(p.x,p.y)),c=!!t.pathSegment(n,u,{move:c}),c?n.closePath():n.lineTo(_.x,e)}n.lineTo(t.first().x,e),n.closePath(),n.clip()}function Gx(n,t,e){const{segments:i,points:r}=t;let o=!0,c=!1;n.beginPath();for(const u of i){const{start:f,end:d}=u,p=r[f],_=r[Jd(f,d,r)];o?(n.moveTo(p.x,p.y),o=!1):(n.lineTo(e,p.y),n.lineTo(p.x,p.y)),c=!!t.pathSegment(n,u,{move:c}),c?n.closePath():n.lineTo(e,_.y)}n.lineTo(e,t.first().y),n.closePath(),n.clip()}function Mp(n,t){const{line:e,target:i,property:r,color:o,scale:c,clip:u}=t,f=i3(e,i,r);for(const{source:d,target:p,start:_,end:b}of f){const{style:{backgroundColor:x=o}={}}=d,w=i!==!0;n.save(),n.fillStyle=x,T3(n,c,u,w&&yy(r,_,b)),n.beginPath();const S=!!e.pathSegment(n,d);let D;if(w){S?n.closePath():Yx(n,i,b,r);const L=!!i.pathSegment(n,p,{move:S,reverse:!0});D=S&&L,D||Yx(n,i,_,r)}n.closePath(),n.fill(D?"evenodd":"nonzero"),n.restore()}}function T3(n,t,e,i){const r=t.chart.chartArea,{property:o,start:c,end:u}=i||{};if(o==="x"||o==="y"){let f,d,p,_;o==="x"?(f=c,d=r.top,p=u,_=r.bottom):(f=r.left,d=c,p=r.right,_=u),n.beginPath(),e&&(f=Math.max(f,e.left),p=Math.min(p,e.right),d=Math.max(d,e.top),_=Math.min(_,e.bottom)),n.rect(f,d,p-f,_-d),n.clip()}}function Yx(n,t,e,i){const r=t.interpolate(e,i);r&&n.lineTo(r.x,r.y)}var E3={id:"filler",afterDatasetsUpdate(n,t,e){const i=(n.data.datasets||[]).length,r=[];let o,c,u,f;for(c=0;c<i;++c)o=n.getDatasetMeta(c),u=o.dataset,f=null,u&&u.options&&u instanceof Cr&&(f={visible:n.isDatasetVisible(c),index:c,fill:a3(u,c,i),chart:n,axis:o.controller.options.indexAxis,scale:o.vScale,line:u}),o.$filler=f,r.push(f);for(c=0;c<i;++c)f=r[c],!(!f||f.fill===!1)&&(f.fill=r3(r,c,e.propagate))},beforeDraw(n,t,e){const i=e.drawTime==="beforeDraw",r=n.getSortedVisibleDatasetMetas(),o=n.chartArea;for(let c=r.length-1;c>=0;--c){const u=r[c].$filler;u&&(u.line.updateControlPoints(o,u.axis),i&&u.fill&&Dp(n.ctx,u,o))}},beforeDatasetsDraw(n,t,e){if(e.drawTime!=="beforeDatasetsDraw")return;const i=n.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){const o=i[r].$filler;Hx(o)&&Dp(n.ctx,o,n.chartArea)}},beforeDatasetDraw(n,t,e){const i=t.meta.$filler;!Hx(i)||e.drawTime!=="beforeDatasetDraw"||Dp(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Kx=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=n.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}},x3=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index;class Wx extends wi{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=le(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,r)=>t.sort(i,r,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,r=Ye(i.font),o=r.size,c=this._computeTitleHeight(),{boxWidth:u,itemHeight:f}=Kx(i,o);let d,p;e.font=r.string,this.isHorizontal()?(d=this.maxWidth,p=this._fitRows(c,o,u,f)+10):(p=this.maxHeight,d=this._fitCols(c,r,u,f)+10),this.width=Math.min(d,t.maxWidth||this.maxWidth),this.height=Math.min(p,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,r){const{ctx:o,maxWidth:c,options:{labels:{padding:u}}}=this,f=this.legendHitBoxes=[],d=this.lineWidths=[0],p=r+u;let _=t;o.textAlign="left",o.textBaseline="middle";let b=-1,x=-p;return this.legendItems.forEach((w,S)=>{const D=i+e/2+o.measureText(w.text).width;(S===0||d[d.length-1]+D+2*u>c)&&(_+=p,d[d.length-(S>0?0:1)]=0,x+=p,b++),f[S]={left:0,top:x,row:b,width:D,height:r},d[d.length-1]+=D+u}),_}_fitCols(t,e,i,r){const{ctx:o,maxHeight:c,options:{labels:{padding:u}}}=this,f=this.legendHitBoxes=[],d=this.columnSizes=[],p=c-t;let _=u,b=0,x=0,w=0,S=0;return this.legendItems.forEach((D,L)=>{const{itemWidth:F,itemHeight:W}=S3(i,e,o,D,r);L>0&&x+W+2*u>p&&(_+=b+u,d.push({width:b,height:x}),w+=b+u,S++,b=x=0),f[L]={left:w,top:x,col:S,width:F,height:W},b=Math.max(b,F),x+=W+u}),_+=b,d.push({width:b,height:x}),_}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:r},rtl:o}}=this,c=nl(o,this.left,this.width);if(this.isHorizontal()){let u=0,f=hn(i,this.left+r,this.right-this.lineWidths[u]);for(const d of e)u!==d.row&&(u=d.row,f=hn(i,this.left+r,this.right-this.lineWidths[u])),d.top+=this.top+t+r,d.left=c.leftForLtr(c.x(f),d.width),f+=d.width+r}else{let u=0,f=hn(i,this.top+t+r,this.bottom-this.columnSizes[u].height);for(const d of e)d.col!==u&&(u=d.col,f=hn(i,this.top+t+r,this.bottom-this.columnSizes[u].height)),d.top=f,d.left+=this.left+r,d.left=c.leftForLtr(c.x(d.left),d.width),f+=d.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Wd(t,this),this._draw(),Xd(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:r}=this,{align:o,labels:c}=t,u=_e.color,f=nl(t.rtl,this.left,this.width),d=Ye(c.font),{padding:p}=c,_=d.size,b=_/2;let x;this.drawTitle(),r.textAlign=f.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=d.string;const{boxWidth:w,boxHeight:S,itemHeight:D}=Kx(c,_),L=function(nt,M,C){if(isNaN(w)||w<=0||isNaN(S)||S<0)return;r.save();const O=It(C.lineWidth,1);if(r.fillStyle=It(C.fillStyle,u),r.lineCap=It(C.lineCap,"butt"),r.lineDashOffset=It(C.lineDashOffset,0),r.lineJoin=It(C.lineJoin,"miter"),r.lineWidth=O,r.strokeStyle=It(C.strokeStyle,u),r.setLineDash(It(C.lineDash,[])),c.usePointStyle){const P={radius:S*Math.SQRT2/2,pointStyle:C.pointStyle,rotation:C.rotation,borderWidth:O},k=f.xPlus(nt,w/2),z=M+b;J1(r,P,k,z,c.pointStyleWidth&&w)}else{const P=M+Math.max((_-S)/2,0),k=f.leftForLtr(nt,w),z=Ua(C.borderRadius);r.beginPath(),Object.values(z).some(N=>N!==0)?gu(r,{x:k,y:P,w,h:S,radius:z}):r.rect(k,P,w,S),r.fill(),O!==0&&r.stroke()}r.restore()},F=function(nt,M,C){Qa(r,C.text,nt,M+D/2,d,{strikethrough:C.hidden,textAlign:f.textAlign(C.textAlign)})},W=this.isHorizontal(),J=this._computeTitleHeight();W?x={x:hn(o,this.left+p,this.right-i[0]),y:this.top+p+J,line:0}:x={x:this.left+p,y:hn(o,this.top+J+p,this.bottom-e[0].height),line:0},aw(this.ctx,t.textDirection);const $=D+p;this.legendItems.forEach((nt,M)=>{r.strokeStyle=nt.fontColor,r.fillStyle=nt.fontColor;const C=r.measureText(nt.text).width,O=f.textAlign(nt.textAlign||(nt.textAlign=c.textAlign)),P=w+b+C;let k=x.x,z=x.y;f.setWidth(this.width),W?M>0&&k+P+p>this.right&&(z=x.y+=$,x.line++,k=x.x=hn(o,this.left+p,this.right-i[x.line])):M>0&&z+$>this.bottom&&(k=x.x=k+e[x.line].width+p,x.line++,z=x.y=hn(o,this.top+J+p,this.bottom-e[x.line].height));const N=f.x(k);if(L(N,z,nt),k=HP(O,k+w+b,W?k+P:this.right,t.rtl),F(f.x(k),z,nt),W)x.x+=P+p;else if(typeof nt.text!="string"){const kt=d.lineHeight;x.y+=Ow(nt,kt)+p}else x.y+=$}),ow(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=Ye(e.font),r=yn(e.padding);if(!e.display)return;const o=nl(t.rtl,this.left,this.width),c=this.ctx,u=e.position,f=i.size/2,d=r.top+f;let p,_=this.left,b=this.width;if(this.isHorizontal())b=Math.max(...this.lineWidths),p=this.top+d,_=hn(t.align,_,this.right-b);else{const w=this.columnSizes.reduce((S,D)=>Math.max(S,D.height),0);p=d+hn(t.align,this.top,this.bottom-w-t.labels.padding-this._computeTitleHeight())}const x=hn(u,_,_+b);c.textAlign=o.textAlign(A_(u)),c.textBaseline="middle",c.strokeStyle=e.color,c.fillStyle=e.color,c.font=i.string,Qa(c,e.text,x,p,i)}_computeTitleHeight(){const t=this.options.title,e=Ye(t.font),i=yn(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,r,o;if(Ms(t,this.left,this.right)&&Ms(e,this.top,this.bottom)){for(o=this.legendHitBoxes,i=0;i<o.length;++i)if(r=o[i],Ms(t,r.left,r.left+r.width)&&Ms(e,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(t){const e=this.options;if(!C3(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const r=this._hoveredItem,o=x3(r,i);r&&!o&&le(e.onLeave,[t,r,this],this),this._hoveredItem=i,i&&!o&&le(e.onHover,[t,i,this],this)}else i&&le(e.onClick,[t,i,this],this)}}function S3(n,t,e,i,r){const o=A3(i,n,t,e),c=w3(r,i,t.lineHeight);return{itemWidth:o,itemHeight:c}}function A3(n,t,e,i){let r=n.text;return r&&typeof r!="string"&&(r=r.reduce((o,c)=>o.length>c.length?o:c)),t+e.size/2+i.measureText(r).width}function w3(n,t,e){let i=n;return typeof t.text!="string"&&(i=Ow(t,e)),i}function Ow(n,t){const e=n.text?n.text.length:0;return t*e}function C3(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var R3={id:"legend",_element:Wx,start(n,t,e){const i=n.legend=new Wx({ctx:n.ctx,options:e,chart:n});mn.configure(n,i,e),mn.addBox(n,i)},stop(n){mn.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const i=n.legend;mn.configure(n,i,e),i.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const i=t.datasetIndex,r=e.chart;r.isDatasetVisible(i)?(r.hide(i),t.hidden=!0):(r.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:r,color:o,useBorderRadius:c,borderRadius:u}}=n.legend.options;return n._getSortedDatasetMetas().map(f=>{const d=f.controller.getStyle(e?0:void 0),p=yn(d.borderWidth);return{text:t[f.index].label,fillStyle:d.backgroundColor,fontColor:o,hidden:!f.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(p.width+p.height)/4,strokeStyle:d.borderColor,pointStyle:i||d.pointStyle,rotation:d.rotation,textAlign:r||d.textAlign,borderRadius:c&&(u||d.borderRadius),datasetIndex:f.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class k_ extends wi{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;const r=ye(i.text)?i.text.length:1;this._padding=yn(i.padding);const o=r*Ye(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:e,left:i,bottom:r,right:o,options:c}=this,u=c.align;let f=0,d,p,_;return this.isHorizontal()?(p=hn(u,i,o),_=e+t,d=o-i):(c.position==="left"?(p=i+t,_=hn(u,r,e),f=Xt*-.5):(p=o-t,_=hn(u,e,r),f=Xt*.5),d=r-e),{titleX:p,titleY:_,maxWidth:d,rotation:f}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const i=Ye(e.font),o=i.lineHeight/2+this._padding.top,{titleX:c,titleY:u,maxWidth:f,rotation:d}=this._drawArgs(o);Qa(t,e.text,0,0,i,{color:e.color,maxWidth:f,rotation:d,textAlign:A_(e.align),textBaseline:"middle",translation:[c,u]})}}function I3(n,t){const e=new k_({ctx:n.ctx,options:t,chart:n});mn.configure(n,e,t),mn.addBox(n,e),n.titleBlock=e}var D3={id:"title",_element:k_,start(n,t,e){I3(n,e)},stop(n){const t=n.titleBlock;mn.removeBox(n,t),delete n.titleBlock},beforeUpdate(n,t,e){const i=n.titleBlock;mn.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Cf=new WeakMap;var M3={id:"subtitle",start(n,t,e){const i=new k_({ctx:n.ctx,options:e,chart:n});mn.configure(n,i,e),mn.addBox(n,i),Cf.set(n,i)},stop(n){mn.removeBox(n,Cf.get(n)),Cf.delete(n)},beforeUpdate(n,t,e){const i=Cf.get(n);mn.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Fc={average(n){if(!n.length)return!1;let t,e,i=new Set,r=0,o=0;for(t=0,e=n.length;t<e;++t){const u=n[t].element;if(u&&u.hasValue()){const f=u.tooltipPosition();i.add(f.x),r+=f.y,++o}}return o===0||i.size===0?!1:{x:[...i].reduce((u,f)=>u+f)/i.size,y:r/o}},nearest(n,t){if(!n.length)return!1;let e=t.x,i=t.y,r=Number.POSITIVE_INFINITY,o,c,u;for(o=0,c=n.length;o<c;++o){const f=n[o].element;if(f&&f.hasValue()){const d=f.getCenterPoint(),p=cy(t,d);p<r&&(r=p,u=f)}}if(u){const f=u.tooltipPosition();e=f.x,i=f.y}return{x:e,y:i}}};function Xi(n,t){return t&&(ye(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function ws(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function O3(n,t){const{element:e,datasetIndex:i,index:r}=t,o=n.getDatasetMeta(i).controller,{label:c,value:u}=o.getLabelAndValue(r);return{chart:n,label:c,parsed:o.getParsed(r),raw:n.data.datasets[i].data[r],formattedValue:u,dataset:o.getDataset(),dataIndex:r,datasetIndex:i,element:e}}function Xx(n,t){const e=n.chart.ctx,{body:i,footer:r,title:o}=n,{boxWidth:c,boxHeight:u}=t,f=Ye(t.bodyFont),d=Ye(t.titleFont),p=Ye(t.footerFont),_=o.length,b=r.length,x=i.length,w=yn(t.padding);let S=w.height,D=0,L=i.reduce((J,$)=>J+$.before.length+$.lines.length+$.after.length,0);if(L+=n.beforeBody.length+n.afterBody.length,_&&(S+=_*d.lineHeight+(_-1)*t.titleSpacing+t.titleMarginBottom),L){const J=t.displayColors?Math.max(u,f.lineHeight):f.lineHeight;S+=x*J+(L-x)*f.lineHeight+(L-1)*t.bodySpacing}b&&(S+=t.footerMarginTop+b*p.lineHeight+(b-1)*t.footerSpacing);let F=0;const W=function(J){D=Math.max(D,e.measureText(J).width+F)};return e.save(),e.font=d.string,ne(n.title,W),e.font=f.string,ne(n.beforeBody.concat(n.afterBody),W),F=t.displayColors?c+2+t.boxPadding:0,ne(i,J=>{ne(J.before,W),ne(J.lines,W),ne(J.after,W)}),F=0,e.font=p.string,ne(n.footer,W),e.restore(),D+=w.width,{width:D,height:S}}function N3(n,t){const{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}function k3(n,t,e,i){const{x:r,width:o}=i,c=e.caretSize+e.caretPadding;if(n==="left"&&r+o+c>t.width||n==="right"&&r-o-c<0)return!0}function P3(n,t,e,i){const{x:r,width:o}=e,{width:c,chartArea:{left:u,right:f}}=n;let d="center";return i==="center"?d=r<=(u+f)/2?"left":"right":r<=o/2?d="left":r>=c-o/2&&(d="right"),k3(d,n,t,e)&&(d="center"),d}function Qx(n,t,e){const i=e.yAlign||t.yAlign||N3(n,e);return{xAlign:e.xAlign||t.xAlign||P3(n,t,e,i),yAlign:i}}function V3(n,t){let{x:e,width:i}=n;return t==="right"?e-=i:t==="center"&&(e-=i/2),e}function L3(n,t,e){let{y:i,height:r}=n;return t==="top"?i+=e:t==="bottom"?i-=r+e:i-=r/2,i}function $x(n,t,e,i){const{caretSize:r,caretPadding:o,cornerRadius:c}=n,{xAlign:u,yAlign:f}=e,d=r+o,{topLeft:p,topRight:_,bottomLeft:b,bottomRight:x}=Ua(c);let w=V3(t,u);const S=L3(t,f,d);return f==="center"?u==="left"?w+=d:u==="right"&&(w-=d):u==="left"?w-=Math.max(p,b)+r:u==="right"&&(w+=Math.max(_,x)+r),{x:Je(w,0,i.width-t.width),y:Je(S,0,i.height-t.height)}}function Rf(n,t,e){const i=yn(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-i.right:n.x+i.left}function Jx(n){return Xi([],ws(n))}function z3(n,t,e){return Qr(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function Zx(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}const Nw={beforeTitle:Ss,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:Ss,beforeBody:Ss,beforeLabel:Ss,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return Lt(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:Ss,afterBody:Ss,beforeFooter:Ss,footer:Ss,afterFooter:Ss};function Rn(n,t,e,i){const r=n[t].call(e,i);return typeof r>"u"?Nw[t].call(e,i):r}class _y extends wi{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&e.options.animation&&i.animations,o=new fw(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=z3(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:i}=e,r=Rn(i,"beforeTitle",this,t),o=Rn(i,"title",this,t),c=Rn(i,"afterTitle",this,t);let u=[];return u=Xi(u,ws(r)),u=Xi(u,ws(o)),u=Xi(u,ws(c)),u}getBeforeBody(t,e){return Jx(Rn(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:i}=e,r=[];return ne(t,o=>{const c={before:[],lines:[],after:[]},u=Zx(i,o);Xi(c.before,ws(Rn(u,"beforeLabel",this,o))),Xi(c.lines,Rn(u,"label",this,o)),Xi(c.after,ws(Rn(u,"afterLabel",this,o))),r.push(c)}),r}getAfterBody(t,e){return Jx(Rn(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:i}=e,r=Rn(i,"beforeFooter",this,t),o=Rn(i,"footer",this,t),c=Rn(i,"afterFooter",this,t);let u=[];return u=Xi(u,ws(r)),u=Xi(u,ws(o)),u=Xi(u,ws(c)),u}_createItems(t){const e=this._active,i=this.chart.data,r=[],o=[],c=[];let u=[],f,d;for(f=0,d=e.length;f<d;++f)u.push(O3(this.chart,e[f]));return t.filter&&(u=u.filter((p,_,b)=>t.filter(p,_,b,i))),t.itemSort&&(u=u.sort((p,_)=>t.itemSort(p,_,i))),ne(u,p=>{const _=Zx(t.callbacks,p);r.push(Rn(_,"labelColor",this,p)),o.push(Rn(_,"labelPointStyle",this,p)),c.push(Rn(_,"labelTextColor",this,p))}),this.labelColors=r,this.labelPointStyles=o,this.labelTextColors=c,this.dataPoints=u,u}update(t,e){const i=this.options.setContext(this.getContext()),r=this._active;let o,c=[];if(!r.length)this.opacity!==0&&(o={opacity:0});else{const u=Fc[i.position].call(this,r,this._eventPosition);c=this._createItems(i),this.title=this.getTitle(c,i),this.beforeBody=this.getBeforeBody(c,i),this.body=this.getBody(c,i),this.afterBody=this.getAfterBody(c,i),this.footer=this.getFooter(c,i);const f=this._size=Xx(this,i),d=Object.assign({},u,f),p=Qx(this.chart,i,d),_=$x(i,d,p,this.chart);this.xAlign=p.xAlign,this.yAlign=p.yAlign,o={opacity:1,x:_.x,y:_.y,width:f.width,height:f.height,caretX:u.x,caretY:u.y}}this._tooltipItems=c,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,r){const o=this.getCaretPosition(t,i,r);e.lineTo(o.x1,o.y1),e.lineTo(o.x2,o.y2),e.lineTo(o.x3,o.y3)}getCaretPosition(t,e,i){const{xAlign:r,yAlign:o}=this,{caretSize:c,cornerRadius:u}=i,{topLeft:f,topRight:d,bottomLeft:p,bottomRight:_}=Ua(u),{x:b,y:x}=t,{width:w,height:S}=e;let D,L,F,W,J,$;return o==="center"?(J=x+S/2,r==="left"?(D=b,L=D-c,W=J+c,$=J-c):(D=b+w,L=D+c,W=J-c,$=J+c),F=D):(r==="left"?L=b+Math.max(f,p)+c:r==="right"?L=b+w-Math.max(d,_)-c:L=this.caretX,o==="top"?(W=x,J=W-c,D=L-c,F=L+c):(W=x+S,J=W+c,D=L+c,F=L-c),$=W),{x1:D,x2:L,x3:F,y1:W,y2:J,y3:$}}drawTitle(t,e,i){const r=this.title,o=r.length;let c,u,f;if(o){const d=nl(i.rtl,this.x,this.width);for(t.x=Rf(this,i.titleAlign,i),e.textAlign=d.textAlign(i.titleAlign),e.textBaseline="middle",c=Ye(i.titleFont),u=i.titleSpacing,e.fillStyle=i.titleColor,e.font=c.string,f=0;f<o;++f)e.fillText(r[f],d.x(t.x),t.y+c.lineHeight/2),t.y+=c.lineHeight+u,f+1===o&&(t.y+=i.titleMarginBottom-u)}}_drawColorBox(t,e,i,r,o){const c=this.labelColors[i],u=this.labelPointStyles[i],{boxHeight:f,boxWidth:d}=o,p=Ye(o.bodyFont),_=Rf(this,"left",o),b=r.x(_),x=f<p.lineHeight?(p.lineHeight-f)/2:0,w=e.y+x;if(o.usePointStyle){const S={radius:Math.min(d,f)/2,pointStyle:u.pointStyle,rotation:u.rotation,borderWidth:1},D=r.leftForLtr(b,d)+d/2,L=w+f/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,hy(t,S,D,L),t.strokeStyle=c.borderColor,t.fillStyle=c.backgroundColor,hy(t,S,D,L)}else{t.lineWidth=Ht(c.borderWidth)?Math.max(...Object.values(c.borderWidth)):c.borderWidth||1,t.strokeStyle=c.borderColor,t.setLineDash(c.borderDash||[]),t.lineDashOffset=c.borderDashOffset||0;const S=r.leftForLtr(b,d),D=r.leftForLtr(r.xPlus(b,1),d-2),L=Ua(c.borderRadius);Object.values(L).some(F=>F!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,gu(t,{x:S,y:w,w:d,h:f,radius:L}),t.fill(),t.stroke(),t.fillStyle=c.backgroundColor,t.beginPath(),gu(t,{x:D,y:w+1,w:d-2,h:f-2,radius:L}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(S,w,d,f),t.strokeRect(S,w,d,f),t.fillStyle=c.backgroundColor,t.fillRect(D,w+1,d-2,f-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:r}=this,{bodySpacing:o,bodyAlign:c,displayColors:u,boxHeight:f,boxWidth:d,boxPadding:p}=i,_=Ye(i.bodyFont);let b=_.lineHeight,x=0;const w=nl(i.rtl,this.x,this.width),S=function(C){e.fillText(C,w.x(t.x+x),t.y+b/2),t.y+=b+o},D=w.textAlign(c);let L,F,W,J,$,nt,M;for(e.textAlign=c,e.textBaseline="middle",e.font=_.string,t.x=Rf(this,D,i),e.fillStyle=i.bodyColor,ne(this.beforeBody,S),x=u&&D!=="right"?c==="center"?d/2+p:d+2+p:0,J=0,nt=r.length;J<nt;++J){for(L=r[J],F=this.labelTextColors[J],e.fillStyle=F,ne(L.before,S),W=L.lines,u&&W.length&&(this._drawColorBox(e,t,J,w,i),b=Math.max(_.lineHeight,f)),$=0,M=W.length;$<M;++$)S(W[$]),b=_.lineHeight;ne(L.after,S)}x=0,b=_.lineHeight,ne(this.afterBody,S),t.y-=o}drawFooter(t,e,i){const r=this.footer,o=r.length;let c,u;if(o){const f=nl(i.rtl,this.x,this.width);for(t.x=Rf(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=f.textAlign(i.footerAlign),e.textBaseline="middle",c=Ye(i.footerFont),e.fillStyle=i.footerColor,e.font=c.string,u=0;u<o;++u)e.fillText(r[u],f.x(t.x),t.y+c.lineHeight/2),t.y+=c.lineHeight+i.footerSpacing}}drawBackground(t,e,i,r){const{xAlign:o,yAlign:c}=this,{x:u,y:f}=t,{width:d,height:p}=i,{topLeft:_,topRight:b,bottomLeft:x,bottomRight:w}=Ua(r.cornerRadius);e.fillStyle=r.backgroundColor,e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.beginPath(),e.moveTo(u+_,f),c==="top"&&this.drawCaret(t,e,i,r),e.lineTo(u+d-b,f),e.quadraticCurveTo(u+d,f,u+d,f+b),c==="center"&&o==="right"&&this.drawCaret(t,e,i,r),e.lineTo(u+d,f+p-w),e.quadraticCurveTo(u+d,f+p,u+d-w,f+p),c==="bottom"&&this.drawCaret(t,e,i,r),e.lineTo(u+x,f+p),e.quadraticCurveTo(u,f+p,u,f+p-x),c==="center"&&o==="left"&&this.drawCaret(t,e,i,r),e.lineTo(u,f+_),e.quadraticCurveTo(u,f,u+_,f),e.closePath(),e.fill(),r.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,r=i&&i.x,o=i&&i.y;if(r||o){const c=Fc[t.position].call(this,this._active,this._eventPosition);if(!c)return;const u=this._size=Xx(this,t),f=Object.assign({},c,this._size),d=Qx(e,t,f),p=$x(t,f,d,e);(r._to!==p.x||o._to!==p.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=u.width,this.height=u.height,this.caretX=c.x,this.caretY=c.y,this._resolveAnimations().update(this,p))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const r={width:this.width,height:this.height},o={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const c=yn(e.padding),u=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&u&&(t.save(),t.globalAlpha=i,this.drawBackground(o,t,r,e),aw(t,e.textDirection),o.y+=c.top,this.drawTitle(o,t,e),this.drawBody(o,t,e),this.drawFooter(o,t,e),ow(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,r=t.map(({datasetIndex:u,index:f})=>{const d=this.chart.getDatasetMeta(u);if(!d)throw new Error("Cannot find a dataset at index "+u);return{datasetIndex:u,element:d.data[f],index:f}}),o=!pd(i,r),c=this._positionChanged(r,e);(o||c)&&(this._active=r,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,o=this._active||[],c=this._getActiveElements(t,o,e,i),u=this._positionChanged(c,t),f=e||!pd(c,o)||u;return f&&(this._active=c,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),f}_getActiveElements(t,e,i,r){const o=this.options;if(t.type==="mouseout")return[];if(!r)return e.filter(u=>this.chart.data.datasets[u.datasetIndex]&&this.chart.getDatasetMeta(u.datasetIndex).controller.getParsed(u.index)!==void 0);const c=this.chart.getElementsAtEventForMode(t,o.mode,o,i);return o.reverse&&c.reverse(),c}_positionChanged(t,e){const{caretX:i,caretY:r,options:o}=this,c=Fc[o.position].call(this,t,e);return c!==!1&&(i!==c.x||r!==c.y)}}ct(_y,"positioners",Fc);var j3={id:"tooltip",_element:_y,positioners:Fc,afterInit(n,t,e){e&&(n.tooltip=new _y({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){const e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Nw},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},U3=Object.freeze({__proto__:null,Colors:J4,Decimation:n3,Filler:E3,Legend:R3,SubTitle:M3,Title:D3,Tooltip:j3});const B3=(n,t,e,i)=>(typeof t=="string"?(e=n.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function F3(n,t,e,i){const r=n.indexOf(t);if(r===-1)return B3(n,t,e,i);const o=n.lastIndexOf(t);return r!==o?e:r}const H3=(n,t)=>n===null?null:Je(Math.round(n),0,t);function tS(n){const t=this.getLabels();return n>=0&&n<t.length?t[n]:n}class by extends to{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const i=this.getLabels();for(const{index:r,label:o}of e)i[r]===o&&i.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(Lt(t))return null;const i=this.getLabels();return e=isFinite(e)&&i[e]===t?e:F3(i,t,It(e,t),this._addedLabels),H3(e,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),e||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const t=this.min,e=this.max,i=this.options.offset,r=[];let o=this.getLabels();o=t===0&&e===o.length-1?o:o.slice(t,e+1),this._valueRange=Math.max(o.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let c=t;c<=e;c++)r.push({value:c});return r}getLabelForValue(t){return tS.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}ct(by,"id","category"),ct(by,"defaults",{ticks:{callback:tS}});function q3(n,t){const e=[],{bounds:r,step:o,min:c,max:u,precision:f,count:d,maxTicks:p,maxDigits:_,includeBounds:b}=n,x=o||1,w=p-1,{min:S,max:D}=t,L=!Lt(c),F=!Lt(u),W=!Lt(d),J=(D-S)/(_+1);let $=XE((D-S)/w/x)*x,nt,M,C,O;if($<1e-14&&!L&&!F)return[{value:S},{value:D}];O=Math.ceil(D/$)-Math.floor(S/$),O>w&&($=XE(O*$/w/x)*x),Lt(f)||(nt=Math.pow(10,f),$=Math.ceil($*nt)/nt),r==="ticks"?(M=Math.floor(S/$)*$,C=Math.ceil(D/$)*$):(M=S,C=D),L&&F&&o&&VP((u-c)/o,$/1e3)?(O=Math.round(Math.min((u-c)/$,p)),$=(u-c)/O,M=c,C=u):W?(M=L?c:M,C=F?u:C,O=d-1,$=(C-M)/O):(O=(C-M)/$,$c(O,Math.round(O),$/1e3)?O=Math.round(O):O=Math.ceil(O));const P=Math.max(QE($),QE(M));nt=Math.pow(10,Lt(f)?P:f),M=Math.round(M*nt)/nt,C=Math.round(C*nt)/nt;let k=0;for(L&&(b&&M!==c?(e.push({value:c}),M<c&&k++,$c(Math.round((M+k*$)*nt)/nt,c,eS(c,J,n))&&k++):M<c&&k++);k<O;++k){const z=Math.round((M+k*$)*nt)/nt;if(F&&z>u)break;e.push({value:z})}return F&&b&&C!==u?e.length&&$c(e[e.length-1].value,u,eS(u,J,n))?e[e.length-1].value=u:e.push({value:u}):(!F||C===u)&&e.push({value:C}),e}function eS(n,t,{horizontal:e,minRotation:i}){const r=Ti(i),o=(e?Math.sin(r):Math.cos(r))||.001,c=.75*t*(""+n).length;return Math.min(t/o,c)}class xd extends to{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return Lt(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:r,max:o}=this;const c=f=>r=e?r:f,u=f=>o=i?o:f;if(t){const f=is(r),d=is(o);f<0&&d<0?u(0):f>0&&d>0&&c(0)}if(r===o){let f=o===0?1:Math.abs(o*.05);u(o+f),t||c(r-f)}this.min=r,this.max=o}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:i}=t,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),e=e||11),e&&(r=Math.min(e,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},o=this._range||this,c=q3(r,o);return t.bounds==="ticks"&&H1(c,this,"value"),t.reverse?(c.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),c}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const r=(i-e)/Math.max(t.length-1,1)/2;e-=r,i+=r}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return Ou(t,this.chart.options.locale,this.options.ticks.format)}}class vy extends xd{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Ee(t)?t:0,this.max=Ee(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=Ti(this.options.ticks.minRotation),r=(t?Math.sin(i):Math.cos(i))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,o.lineHeight/r))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}ct(vy,"id","linear"),ct(vy,"defaults",{ticks:{callback:Kd.formatters.numeric}});const pu=n=>Math.floor(Ar(n)),Ma=(n,t)=>Math.pow(10,pu(n)+t);function nS(n){return n/Math.pow(10,pu(n))===1}function iS(n,t,e){const i=Math.pow(10,e),r=Math.floor(n/i);return Math.ceil(t/i)-r}function G3(n,t){const e=t-n;let i=pu(e);for(;iS(n,t,i)>10;)i++;for(;iS(n,t,i)<10;)i--;return Math.min(i,pu(n))}function Y3(n,{min:t,max:e}){t=Fn(n.min,t);const i=[],r=pu(t);let o=G3(t,e),c=o<0?Math.pow(10,Math.abs(o)):1;const u=Math.pow(10,o),f=r>o?Math.pow(10,r):0,d=Math.round((t-f)*c)/c,p=Math.floor((t-f)/u/10)*u*10;let _=Math.floor((d-p)/Math.pow(10,o)),b=Fn(n.min,Math.round((f+p+_*Math.pow(10,o))*c)/c);for(;b<e;)i.push({value:b,major:nS(b),significand:_}),_>=10?_=_<15?15:20:_++,_>=20&&(o++,_=2,c=o>=0?1:c),b=Math.round((f+p+_*Math.pow(10,o))*c)/c;const x=Fn(n.max,b);return i.push({value:x,major:nS(x),significand:_}),i}class Ty extends to{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const i=xd.prototype.parse.apply(this,[t,e]);if(i===0){this._zero=!0;return}return Ee(i)&&i>0?i:null}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Ee(t)?Math.max(0,t):null,this.max=Ee(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Ee(this._userMin)&&(this.min=t===Ma(this.min,0)?Ma(this.min,-1):Ma(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let i=this.min,r=this.max;const o=u=>i=t?i:u,c=u=>r=e?r:u;i===r&&(i<=0?(o(1),c(10)):(o(Ma(i,-1)),c(Ma(r,1)))),i<=0&&o(Ma(r,-1)),r<=0&&c(Ma(i,1)),this.min=i,this.max=r}buildTicks(){const t=this.options,e={min:this._userMin,max:this._userMax},i=Y3(e,this);return t.bounds==="ticks"&&H1(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(t){return t===void 0?"0":Ou(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Ar(t),this._valueRange=Ar(this.max)-Ar(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Ar(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}ct(Ty,"id","logarithmic"),ct(Ty,"defaults",{ticks:{callback:Kd.formatters.logarithmic,major:{enabled:!0}}});function Ey(n){const t=n.ticks;if(t.display&&n.display){const e=yn(t.backdropPadding);return It(t.font&&t.font.size,_e.font.size)+e.height}return 0}function K3(n,t,e){return e=ye(e)?e:[e],{w:ZP(n,t.string,e),h:e.length*t.lineHeight}}function sS(n,t,e,i,r){return n===i||n===r?{start:t-e/2,end:t+e/2}:n<i||n>r?{start:t-e,end:t}:{start:t,end:t+e}}function W3(n){const t={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},e=Object.assign({},t),i=[],r=[],o=n._pointLabels.length,c=n.options.pointLabels,u=c.centerPointLabels?Xt/o:0;for(let f=0;f<o;f++){const d=c.setContext(n.getPointLabelContext(f));r[f]=d.padding;const p=n.getPointPosition(f,n.drawingArea+r[f],u),_=Ye(d.font),b=K3(n.ctx,_,n._pointLabels[f]);i[f]=b;const x=dn(n.getIndexAngle(f)+u),w=Math.round(x_(x)),S=sS(w,p.x,b.w,0,180),D=sS(w,p.y,b.h,90,270);X3(e,t,x,S,D)}n.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),n._pointLabelItems=J3(n,i,r)}function X3(n,t,e,i,r){const o=Math.abs(Math.sin(e)),c=Math.abs(Math.cos(e));let u=0,f=0;i.start<t.l?(u=(t.l-i.start)/o,n.l=Math.min(n.l,t.l-u)):i.end>t.r&&(u=(i.end-t.r)/o,n.r=Math.max(n.r,t.r+u)),r.start<t.t?(f=(t.t-r.start)/c,n.t=Math.min(n.t,t.t-f)):r.end>t.b&&(f=(r.end-t.b)/c,n.b=Math.max(n.b,t.b+f))}function Q3(n,t,e){const i=n.drawingArea,{extra:r,additionalAngle:o,padding:c,size:u}=e,f=n.getPointPosition(t,i+r+c,o),d=Math.round(x_(dn(f.angle+Re))),p=e5(f.y,u.h,d),_=Z3(d),b=t5(f.x,u.w,_);return{visible:!0,x:f.x,y:p,textAlign:_,left:b,top:p,right:b+u.w,bottom:p+u.h}}function $3(n,t){if(!t)return!0;const{left:e,top:i,right:r,bottom:o}=n;return!(Ns({x:e,y:i},t)||Ns({x:e,y:o},t)||Ns({x:r,y:i},t)||Ns({x:r,y:o},t))}function J3(n,t,e){const i=[],r=n._pointLabels.length,o=n.options,{centerPointLabels:c,display:u}=o.pointLabels,f={extra:Ey(o)/2,additionalAngle:c?Xt/r:0};let d;for(let p=0;p<r;p++){f.padding=e[p],f.size=t[p];const _=Q3(n,p,f);i.push(_),u==="auto"&&(_.visible=$3(_,d),_.visible&&(d=_))}return i}function Z3(n){return n===0||n===180?"center":n<180?"left":"right"}function t5(n,t,e){return e==="right"?n-=t:e==="center"&&(n-=t/2),n}function e5(n,t,e){return e===90||e===270?n-=t/2:(e>270||e<90)&&(n-=t),n}function n5(n,t,e){const{left:i,top:r,right:o,bottom:c}=e,{backdropColor:u}=t;if(!Lt(u)){const f=Ua(t.borderRadius),d=yn(t.backdropPadding);n.fillStyle=u;const p=i-d.left,_=r-d.top,b=o-i+d.width,x=c-r+d.height;Object.values(f).some(w=>w!==0)?(n.beginPath(),gu(n,{x:p,y:_,w:b,h:x,radius:f}),n.fill()):n.fillRect(p,_,b,x)}}function i5(n,t){const{ctx:e,options:{pointLabels:i}}=n;for(let r=t-1;r>=0;r--){const o=n._pointLabelItems[r];if(!o.visible)continue;const c=i.setContext(n.getPointLabelContext(r));n5(e,c,o);const u=Ye(c.font),{x:f,y:d,textAlign:p}=o;Qa(e,n._pointLabels[r],f,d+u.lineHeight/2,u,{color:c.color,textAlign:p,textBaseline:"middle"})}}function kw(n,t,e,i){const{ctx:r}=n;if(e)r.arc(n.xCenter,n.yCenter,t,0,de);else{let o=n.getPointPosition(0,t);r.moveTo(o.x,o.y);for(let c=1;c<i;c++)o=n.getPointPosition(c,t),r.lineTo(o.x,o.y)}}function s5(n,t,e,i,r){const o=n.ctx,c=t.circular,{color:u,lineWidth:f}=t;!c&&!i||!u||!f||e<0||(o.save(),o.strokeStyle=u,o.lineWidth=f,o.setLineDash(r.dash||[]),o.lineDashOffset=r.dashOffset,o.beginPath(),kw(n,e,c,i),o.closePath(),o.stroke(),o.restore())}function r5(n,t,e){return Qr(n,{label:e,index:t,type:"pointLabel"})}class Hc extends xd{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=yn(Ey(this.options)/2),e=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(e,i)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=Ee(t)&&!isNaN(t)?t:0,this.max=Ee(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Ey(this.options))}generateTickLabels(t){xd.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,i)=>{const r=le(this.options.pointLabels.callback,[e,i],this);return r||r===0?r:""}).filter((e,i)=>this.chart.getDataVisibility(i))}fit(){const t=this.options;t.display&&t.pointLabels.display?W3(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,i,r){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,i,r))}getIndexAngle(t){const e=de/(this._pointLabels.length||1),i=this.options.startAngle||0;return dn(t*e+Ti(i))}getDistanceFromCenterForValue(t){if(Lt(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(Lt(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const i=e[t];return r5(this.getContext(),t,i)}}getPointPosition(t,e,i=0){const r=this.getIndexAngle(t)-Re+i;return{x:Math.cos(r)*e+this.xCenter,y:Math.sin(r)*e+this.yCenter,angle:r}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:i,right:r,bottom:o}=this._pointLabelItems[t];return{left:e,top:i,right:r,bottom:o}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const i=this.ctx;i.save(),i.beginPath(),kw(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:i,grid:r,border:o}=e,c=this._pointLabels.length;let u,f,d;if(e.pointLabels.display&&i5(this,c),r.display&&this.ticks.forEach((p,_)=>{if(_!==0||_===0&&this.min<0){f=this.getDistanceFromCenterForValue(p.value);const b=this.getContext(_),x=r.setContext(b),w=o.setContext(b);s5(this,x,f,c,w)}}),i.display){for(t.save(),u=c-1;u>=0;u--){const p=i.setContext(this.getPointLabelContext(u)),{color:_,lineWidth:b}=p;!b||!_||(t.lineWidth=b,t.strokeStyle=_,t.setLineDash(p.borderDash),t.lineDashOffset=p.borderDashOffset,f=this.getDistanceFromCenterForValue(e.reverse?this.min:this.max),d=this.getPointPosition(u,f),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(d.x,d.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,i=e.ticks;if(!i.display)return;const r=this.getIndexAngle(0);let o,c;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(r),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((u,f)=>{if(f===0&&this.min>=0&&!e.reverse)return;const d=i.setContext(this.getContext(f)),p=Ye(d.font);if(o=this.getDistanceFromCenterForValue(this.ticks[f].value),d.showLabelBackdrop){t.font=p.string,c=t.measureText(u.label).width,t.fillStyle=d.backdropColor;const _=yn(d.backdropPadding);t.fillRect(-c/2-_.left,-o-p.size/2-_.top,c+_.width,p.size+_.height)}Qa(t,u.label,0,-o,p,{color:d.color,strokeColor:d.textStrokeColor,strokeWidth:d.textStrokeWidth})}),t.restore()}drawTitle(){}}ct(Hc,"id","radialLinear"),ct(Hc,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Kd.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}}),ct(Hc,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),ct(Hc,"descriptors",{angleLines:{_fallback:"grid"}});const Zd={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Mn=Object.keys(Zd);function rS(n,t){return n-t}function aS(n,t){if(Lt(t))return null;const e=n._adapter,{parser:i,round:r,isoWeekday:o}=n._parseOpts;let c=t;return typeof i=="function"&&(c=i(c)),Ee(c)||(c=typeof i=="string"?e.parse(c,i):e.parse(c)),c===null?null:(r&&(c=r==="week"&&(ul(o)||o===!0)?e.startOf(c,"isoWeek",o):e.startOf(c,r)),+c)}function oS(n,t,e,i){const r=Mn.length;for(let o=Mn.indexOf(n);o<r-1;++o){const c=Zd[Mn[o]],u=c.steps?c.steps:Number.MAX_SAFE_INTEGER;if(c.common&&Math.ceil((e-t)/(u*c.size))<=i)return Mn[o]}return Mn[r-1]}function a5(n,t,e,i,r){for(let o=Mn.length-1;o>=Mn.indexOf(e);o--){const c=Mn[o];if(Zd[c].common&&n._adapter.diff(r,i,c)>=t-1)return c}return Mn[e?Mn.indexOf(e):0]}function o5(n){for(let t=Mn.indexOf(n)+1,e=Mn.length;t<e;++t)if(Zd[Mn[t]].common)return Mn[t]}function lS(n,t,e){if(!e)n[t]=!0;else if(e.length){const{lo:i,hi:r}=S_(e,t),o=e[i]>=t?e[i]:e[r];n[o]=!0}}function l5(n,t,e,i){const r=n._adapter,o=+r.startOf(t[0].value,i),c=t[t.length-1].value;let u,f;for(u=o;u<=c;u=+r.add(u,1,i))f=e[u],f>=0&&(t[f].major=!0);return t}function cS(n,t,e){const i=[],r={},o=t.length;let c,u;for(c=0;c<o;++c)u=t[c],r[u]=c,i.push({value:u,major:!1});return o===0||!e?i:l5(n,i,r,e)}class yu extends to{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const i=t.time||(t.time={}),r=this._adapter=new pL._date(t.adapters.date);r.init(e),Qc(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:aS(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:r,max:o,minDefined:c,maxDefined:u}=this.getUserBounds();function f(d){!c&&!isNaN(d.min)&&(r=Math.min(r,d.min)),!u&&!isNaN(d.max)&&(o=Math.max(o,d.max))}(!c||!u)&&(f(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&f(this.getMinMax(!1))),r=Ee(r)&&!isNaN(r)?r:+e.startOf(Date.now(),i),o=Ee(o)&&!isNaN(o)?o:+e.endOf(Date.now(),i)+1,this.min=Math.min(r,o-1),this.max=Math.max(r+1,o)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const o=this.min,c=this.max,u=UP(r,o,c);return this._unit=e.unit||(i.autoSkip?oS(e.minUnit,this.min,this.max,this._getLabelCapacity(o)):a5(this,u.length,e.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:o5(this._unit),this.initOffsets(r),t.reverse&&u.reverse(),cS(this,u,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,i=0,r,o;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),t.length===1?e=1-r:e=(this.getDecimalForValue(t[1])-r)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?i=o:i=(o-this.getDecimalForValue(t[t.length-2]))/2);const c=t.length<3?.5:.25;e=Je(e,0,c),i=Je(i,0,c),this._offsets={start:e,end:i,factor:1/(e+1+i)}}_generate(){const t=this._adapter,e=this.min,i=this.max,r=this.options,o=r.time,c=o.unit||oS(o.minUnit,e,i,this._getLabelCapacity(e)),u=It(r.ticks.stepSize,1),f=c==="week"?o.isoWeekday:!1,d=ul(f)||f===!0,p={};let _=e,b,x;if(d&&(_=+t.startOf(_,"isoWeek",f)),_=+t.startOf(_,d?"day":c),t.diff(i,e,c)>1e5*u)throw new Error(e+" and "+i+" are too far apart with stepSize of "+u+" "+c);const w=r.ticks.source==="data"&&this.getDataTimestamps();for(b=_,x=0;b<i;b=+t.add(b,u,c),x++)lS(p,b,w);return(b===i||r.bounds==="ticks"||x===1)&&lS(p,b,w),Object.keys(p).sort(rS).map(S=>+S)}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){const r=this.options.time.displayFormats,o=this._unit,c=e||r[o];return this._adapter.format(t,c)}_tickFormatFunction(t,e,i,r){const o=this.options,c=o.ticks.callback;if(c)return le(c,[t,e,i],this);const u=o.time.displayFormats,f=this._unit,d=this._majorUnit,p=f&&u[f],_=d&&u[d],b=i[e],x=d&&_&&b&&b.major;return this._adapter.format(t,r||(x?_:p))}generateTickLabels(t){let e,i,r;for(e=0,i=t.length;e<i;++e)r=t[e],r.label=this._tickFormatFunction(r.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,r=Ti(this.isHorizontal()?e.maxRotation:e.minRotation),o=Math.cos(r),c=Math.sin(r),u=this._resolveTickFontOptions(0).size;return{w:i*o+u*c,h:i*c+u*o}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,r=i[e.unit]||i.millisecond,o=this._tickFormatFunction(t,0,cS(this,[t],this._majorUnit),r),c=this._getLabelSize(o),u=Math.floor(this.isHorizontal()?this.width/c.w:this.height/c.h)-1;return u>0?u:1}getDataTimestamps(){let t=this._cache.data||[],e,i;if(t.length)return t;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,i=r.length;e<i;++e)t=t.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const r=this.getLabels();for(e=0,i=r.length;e<i;++e)t.push(aS(this,r[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Y1(t.sort(rS))}}ct(yu,"id","time"),ct(yu,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function If(n,t,e){let i=0,r=n.length-1,o,c,u,f;e?(t>=n[i].pos&&t<=n[r].pos&&({lo:i,hi:r}=Os(n,"pos",t)),{pos:o,time:u}=n[i],{pos:c,time:f}=n[r]):(t>=n[i].time&&t<=n[r].time&&({lo:i,hi:r}=Os(n,"time",t)),{time:o,pos:u}=n[i],{time:c,pos:f}=n[r]);const d=c-o;return d?u+(f-u)*(t-o)/d:u}class xy extends yu{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=If(e,this.min),this._tableRange=If(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,r=[],o=[];let c,u,f,d,p;for(c=0,u=t.length;c<u;++c)d=t[c],d>=e&&d<=i&&r.push(d);if(r.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(c=0,u=r.length;c<u;++c)p=r[c+1],f=r[c-1],d=r[c],Math.round((p+f)/2)!==d&&o.push({time:d,pos:c/(u-1)});return o}_generate(){const t=this.min,e=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(e)||i.length===1)&&i.push(e),i.sort((r,o)=>r-o)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(If(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return If(this._table,i*this._tableRange+this._minPos,!0)}}ct(xy,"id","timeseries"),ct(xy,"defaults",yu.defaults);var c5=Object.freeze({__proto__:null,CategoryScale:by,LinearScale:vy,LogarithmicScale:Ty,RadialLinearScale:Hc,TimeScale:yu,TimeSeriesScale:xy});const u5=[mL,G4,U3,c5];bi.register(...u5);const h5=({onClose:n,trades:t,capital:e})=>{const i=yt.useRef(null),r=yt.useRef(null),o=yt.useRef(null);return yt.useEffect(()=>{const c=[];if(i.current){const u=i.current.getContext("2d");if(u){const f=new bi(u,{type:"line",data:{labels:["Initial",...t.map((d,p)=>`Trade ${p+1}`)],datasets:[{label:"Equity Curve",data:[e.initial+e.deposits,...t.map(d=>d.capitalEnd)],borderColor:"rgb(75, 192, 192)",tension:.1,fill:!1}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Equity Curve"}},scales:{y:{beginAtZero:!1,ticks:{callback:d=>`$${d}`}}}}});c.push(f)}}if(r.current){const u=r.current.getContext("2d");if(u){const f=new bi(u,{type:"bar",data:{labels:t.map((d,p)=>`Trade ${p+1}`),datasets:[{label:"P/L per Trade ($)",data:t.map(d=>d.pnlNet),backgroundColor:t.map(d=>d.pnlNet>=0?"rgba(75, 192, 192, 0.6)":"rgba(255, 99, 132, 0.6)"),borderColor:t.map(d=>d.pnlNet>=0?"rgba(75, 192, 192, 1)":"rgba(255, 99, 132, 1)"),borderWidth:1}]},options:{responsive:!0,plugins:{title:{display:!0,text:"P/L Distribution"}},scales:{y:{ticks:{callback:d=>`$${d}`}}}}});c.push(f)}}if(o.current){const u=t.reduce((_,b)=>{const x=b.strategy||"Uncategorized";return _[x]||(_[x]=0),_[x]+=b.pnlNet,_},{}),f=Object.keys(u),d=Object.values(u),p=o.current.getContext("2d");if(p){const _=new bi(p,{type:"bar",data:{labels:f,datasets:[{label:"Net P/L by Strategy ($)",data:d,backgroundColor:d.map(b=>b>=0?"rgba(75, 192, 192, 0.6)":"rgba(255, 99, 132, 0.6)"),borderColor:d.map(b=>b>=0?"rgba(75, 192, 192, 1)":"rgba(255, 99, 132, 1)"),borderWidth:1}]},options:{indexAxis:"y",responsive:!0,plugins:{title:{display:!0,text:"Net Profit by Strategy"}},scales:{x:{ticks:{callback:b=>`$${b}`}}}}});c.push(_)}}return()=>{c.forEach(u=>u.destroy())}},[t,e]),I.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50 animate-fade-in",children:I.jsxs("div",{className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl shadow-2xl w-full max-w-6xl max-h-[90vh] flex flex-col",children:[I.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700",children:[I.jsx("h2",{className:"text-2xl font-bold text-primary",children:"Performance Analytics"}),I.jsx("button",{onClick:n,className:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-white text-2xl",children:""})]}),I.jsx("main",{className:"p-6 overflow-y-auto",children:t.length===0?I.jsx("div",{className:"text-center py-10",children:I.jsx("p",{className:"text-lg text-gray-500",children:"Log some trades to see your performance analytics."})}):I.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[I.jsx("div",{className:"xl:col-span-2",children:I.jsx("canvas",{ref:i})}),I.jsx("div",{children:I.jsx("canvas",{ref:r})}),I.jsx("div",{children:I.jsx("canvas",{ref:o})})]})})]})})},f5=`
Crea una aplicacin web de "Crypto Trading Journal" en un **nico archivo HTML**. La aplicacin debe usar **Tailwind CSS** para el estilo y **JavaScript** para toda la funcionalidad, incluyendo \`Chart.js\` para los grficos. No debe haber archivos CSS o JS externos, excepto los enlaces CDN para Tailwind y Chart.js.

La aplicacin debe tener un diseo de dos columnas en pantallas grandes (un formulario a la izquierda y el dashboard/log a la derecha).

**1. Columna Izquierda (Fija al hacer scroll):**

*   **Tarjeta "Capital Management":**
    *   Input "Initial Capital ($)".
    *   Input "Add Deposit ($)".
    *   Botn "Add Capital Deposit".
    *   Estos valores deben guardarse en \`localStorage\`.

*   **Tarjeta "Journaling Best Practices":**
    *   Una lista esttica de consejos sobre trading.

*   **Tarjeta "Personal Notes":**
    *   Un ttulo "Personal Notes".
    *   En la misma lnea del ttulo, botones de formato (Negrita, Itlica, Subrayado, Tachado) y 6 selectores de color (swatches) para cambiar el color de fondo de la tarjeta (incluyendo default, gris, rojo, verde, azul, amarillo).
    *   Un rea de \`contenteditable\` para escribir notas.
    *   Un botn "Read More / Show Less" que aparece si el texto excede 3 lneas.
    *   Un texto "Further reading" en la esquina inferior derecha.
    *   El contenido de la nota, su formato (HTML) y el color de la tarjeta deben guardarse en \`localStorage\`.

*   **Tarjeta "Log a New Trade" (Formulario):**
    *   **Inputs:** Date & Time, Pair, Strategy, Direction (Long/Short), Risk/Reward (ej. "2:1"), Entry Price, Exit Price, **Margin ($) (manual)**, Leverage (Select 1x-100x), **Risk (%) (manual)**, **Fees ($) (manual)**.
    *   **Campos Auto-calculados (solo lectura):**
        1.  \`Position Value ($)\` = Margin * Leverage
        2.  \`Position Size (Asset)\` = Position Value / Entry Price
        3.  \`Risk ($)\` = Position Value * (Risk % / 100)
    *   Toda la lgica de auto-clculo debe funcionar en tiempo real (\`oninput\`).
    *   Botn "Log Trade".

**2. Columna Derecha:**

*   **Tarjeta "Performance Dashboard":**
    *   Debe mostrar mtricas clave calculadas a partir del log de trades:
    *   \`Current Capital\`: Calculado como (Initial Capital + Total Deposits + Total P/L).
    *   \`Total P/L ($)\`: Suma de todos los P/L netos.
    *   \`Win Rate\`: (Trades ganadores / Total Trades) %.
    *   \`Profit Factor\`: (Suma de P/L de trades ganadores / Suma de P/L de trades perdedores).
    *   Botn "Performance Analytics" que abre un modal.

*   **Tarjeta "Trade Log":**
    *   Una tabla que muestra todos los trades.
    *   **Columnas:** Date, Pair, Direction, Entry, Exit, Position Size, Leverage, Margin ($), R/R, Risk ($), Fees ($), **P/L ($) (Neto)**, **P/L % (Asset)**, **P/L % (Margin) (ROI)**, **Capital (End)**, Strategy.
    *   **Clculos del Log (por operacin):**
        *   \`P/L ($) (Neto)\`: (Exit - Entry) * Position Size * (Direction) - Fees
        *   \`P/L % (Asset)\`: (Exit - Entry) / Entry * (Direction)
        *   \`P/L % (Margin)\`: P/L ($) (Neto) / Margin ($)
        *   \`Capital (End)\`: Saldo de capital corriente despus de cerrar la operacin.
    *   Debe tener una **fila de Totales (\`<tfoot>\`)** que sume P/L ($), Fees ($), Risk ($) y Margin ($).
    *   Botn "Clear All Trades".

**3. Modales:**

*   **Modal "Performance Analytics":**
    *   Se abre desde el Dashboard.
    *   Debe mostrar 3 grficos usando \`Chart.js\`:
        1.  **Equity Curve:** Un grfico de lnea que muestra \`Capital (End)\` despus de cada trade, en orden cronolgico.
        2.  **P/L Distribution:** Un grfico de barras que muestra el \`P/L ($)\` de cada trade individual.
        3.  **Net Profit by Strategy:** Un **grfico de barras horizontal** que muestra el P/L neto total para cada 'Strategy'. Las barras deben ser verdes para ganancias y rojas para prdidas.

*   **Modal "Prompt de Creacin" (Este mismo modal):**
    *   Un botn en el header principal ("Ver Prompt de Creacin").
    *   Muestra un texto preformateado (este prompt) que explica cmo construir la app.

**4. Lgica de JavaScript (localStorage):**

*   Toda la aplicacin debe usar \`localStorage\` para persistir datos.
*   **Claves de \`localStorage\`:**
    *   \`tradingJournal_trades_v3\`: Array de todos los objetos de trade.
    *   \`tradingJournal_capital_v3\`: Objeto con \`{ initial: 1000, deposits: 0 }\`.
    *   \`tradingJournal_note_v3\`: Objeto con \`{ content: "...", color: "..." }\`.
*   El P/L de los trades debe afectar el \`Current Capital\` en el dashboard.
*   El formulario de "Log a New Trade" debe auto-completar la fecha y hora actuales.
*   Todas las funciones (guardar, cargar, renderizar, calcular dashboard) deben estar bien organizadas y ejecutarse al cargar la pgina (\`DOMContentLoaded\`).
`,d5=({onClose:n})=>I.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:I.jsxs("div",{className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[I.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700",children:[I.jsx("h2",{className:"text-2xl font-bold text-primary",children:"Prompt de Creacin de la App"}),I.jsx("button",{onClick:n,className:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-white text-2xl",children:""})]}),I.jsx("main",{className:"p-6 overflow-y-auto",children:I.jsx("pre",{className:"whitespace-pre-wrap text-sm text-gray-700 dark:text-gray-300 font-sans",children:f5.trim()})})]})}),g5=({trade:n,onClose:t,onSubmit:e})=>{const i=async c=>{await e(n.id,c),t()},{id:r,...o}=n;return I.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50",children:I.jsxs("div",{className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[I.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700",children:[I.jsx("h2",{className:"text-2xl font-bold text-primary",children:"Edit Trade"}),I.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-white text-2xl",children:""})]}),I.jsx("main",{className:"p-6",children:I.jsx(L1,{initialValues:o,submitLabel:"Save Changes",onSubmit:i,onCancel:t})})]})})},m5=({trades:n,onEditTrade:t,onDeleteTrade:e})=>{const i=r=>{window.confirm("Delete this open position? This action cannot be undone.")&&e(r)};return n.length===0?I.jsx(Wa,{title:"Open Positions",children:I.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center",children:"No open positions at the moment."})}):I.jsx(Wa,{title:"Open Positions",children:I.jsx("div",{className:"overflow-x-auto",children:I.jsxs("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[I.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-100 dark:bg-gray-700 dark:text-gray-300",children:I.jsxs("tr",{children:[I.jsx("th",{scope:"col",className:"py-3 px-2",children:"Opened"}),I.jsx("th",{scope:"col",className:"py-3 px-2",children:"Pair"}),I.jsx("th",{scope:"col",className:"py-3 px-2",children:"Direction"}),I.jsx("th",{scope:"col",className:"py-3 px-2",children:"Entry"}),I.jsx("th",{scope:"col",className:"py-3 px-2",children:"Margin ($)"}),I.jsx("th",{scope:"col",className:"py-3 px-2",children:"Leverage"}),I.jsx("th",{scope:"col",className:"py-3 px-2",children:"Risk (%)"}),I.jsx("th",{scope:"col",className:"py-3 px-2",children:"Notes"}),I.jsx("th",{scope:"col",className:"py-3 px-2",children:"Actions"})]})}),I.jsx("tbody",{children:n.map(r=>I.jsxs("tr",{className:"bg-white dark:bg-gray-800 border-b dark:border-gray-700",children:[I.jsx("td",{className:"py-2 px-2",children:new Date(r.dateTime).toLocaleString()}),I.jsx("td",{className:"py-2 px-2 font-medium",children:r.pair}),I.jsx("td",{className:`py-2 px-2 font-semibold ${r.direction==="Long"?"text-green-500":"text-red-500"}`,children:r.direction}),I.jsx("td",{className:"py-2 px-2",children:r.entryPrice.toFixed(2)}),I.jsx("td",{className:"py-2 px-2",children:r.margin.toFixed(2)}),I.jsxs("td",{className:"py-2 px-2",children:[r.leverage,"x"]}),I.jsxs("td",{className:"py-2 px-2",children:[r.riskPercent.toFixed(2),"%"]}),I.jsx("td",{className:"py-2 px-2",children:r.notes||""}),I.jsxs("td",{className:"py-2 px-2 space-x-2 whitespace-nowrap",children:[I.jsx("button",{onClick:()=>t(r.id),className:"text-primary hover:brightness-90 font-semibold text-xs",children:"Edit"}),I.jsx("button",{onClick:()=>i(r.id),className:"text-red-600 hover:text-red-500 font-semibold text-xs",children:"Delete"})]})]},r.id))})]})})})},p5=({user:n,logout:t,theme:e,toggleTheme:i})=>{const[r,o]=yt.useState(!1),[c,u]=yt.useState(!1),[f,d]=yt.useState(null),{data:p,addDocument:_,deleteDocument:b,updateDocument:x,loading:w}=Wk("trades",n.uid),{data:S,updateDocument:D,loading:L}=BE("capital",n.uid,{initial:1e3,deposits:0}),{data:F,updateDocument:W,loading:J}=BE("note",n.uid,{content:"Start typing your notes here...",color:"default"}),$=w||L||J,nt=yt.useMemo(()=>p.map(ht=>({...ht,status:ht.status??"closed"})),[p]),M=yt.useMemo(()=>nt.filter(ht=>ht.status==="open"),[nt]),C=yt.useMemo(()=>nt.filter(ht=>ht.status==="closed"),[nt]),O=yt.useMemo(()=>{let ht=S.initial+S.deposits;return C.sort((xt,j)=>new Date(xt.dateTime).getTime()-new Date(j.dateTime).getTime()).map(xt=>{const j=Xk(xt),tt={...xt,...j,status:"closed",exitPrice:xt.exitPrice??xt.entryPrice,fees:xt.fees??0};return ht+=tt.pnlNet,{...tt,capitalEnd:ht}})},[C,S]),P=yt.useMemo(()=>Qk(S,O),[S,O]),k=ht=>{_(ht)},z=ht=>{D(ht)},N=ht=>{D({deposits:(S.deposits||0)+ht})},kt=ht=>{W(ht)},Tt=ht=>{b(ht)},Y=ht=>{const xt=p.find(j=>j.id===ht);xt&&d(xt)},at=(ht,xt)=>x(ht,xt),gt=()=>{d(null)};return $?I.jsx("div",{className:"bg-gray-100 dark:bg-gray-900 min-h-screen flex items-center justify-center",children:I.jsx("div",{className:"animate-pulse text-primary text-xl font-bold",children:"Loading Journal..."})}):I.jsxs(I.Fragment,{children:[I.jsxs("div",{className:"bg-gray-100 dark:bg-gray-900 min-h-screen font-sans text-gray-800 dark:text-gray-300",children:[I.jsx("header",{className:"bg-white dark:bg-gray-800/50 dark:backdrop-blur-sm border-b border-gray-200 dark:border-gray-700/50 shadow-md sticky top-0 z-40",children:I.jsxs("div",{className:"container mx-auto px-4 py-3 flex justify-between items-center",children:[I.jsx("h1",{className:"text-2xl font-bold text-primary",children:"TRADA"}),I.jsxs("div",{className:"flex items-center space-x-4",children:[I.jsx("button",{onClick:()=>u(!0),className:"text-sm font-medium text-primary hover:underline hidden md:block",children:"View Creation Prompt"}),I.jsx("button",{onClick:i,className:"p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 text-2xl leading-none",children:e==="dark"?"":""}),I.jsx("button",{onClick:t,className:"bg-primary hover:brightness-95 text-gray-900 font-bold py-2 px-4 rounded-md transition duration-300 text-sm",children:"Logout"})]})]})}),I.jsx("main",{className:"container mx-auto p-4 lg:p-6",children:I.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 lg:gap-6",children:[I.jsxs("div",{className:"lg:col-span-1 space-y-6 lg:sticky lg:top-24 self-start",children:[I.jsx($k,{capital:S,setCapital:z,onAddDeposit:N}),I.jsx(nP,{}),I.jsx(eP,{note:F,onNoteChange:kt}),I.jsx(L1,{onSubmit:k})]}),I.jsxs("div",{className:"lg:col-span-2 space-y-6 mt-6 lg:mt-0",children:[I.jsx(Jk,{metrics:P,onOpenAnalytics:()=>o(!0)}),I.jsx(m5,{trades:M,onEditTrade:Y,onDeleteTrade:Tt}),I.jsx(Zk,{trades:O,onDeleteTrade:Tt,onEditTrade:Y})]})]})})]}),r&&I.jsx(h5,{onClose:()=>o(!1),trades:O,capital:S}),c&&I.jsx(d5,{onClose:()=>u(!1)}),f&&I.jsx(g5,{trade:f,onClose:gt,onSubmit:at})]})},y5=()=>{const{user:n,logout:t,loading:e,loginWithGoogle:i,login:r,signup:o}=Gk(),[c,u]=Yk();if(e)return I.jsx("div",{className:"bg-gray-100 dark:bg-gray-900 min-h-screen flex items-center justify-center",children:I.jsx("div",{className:"animate-pulse text-primary text-xl font-bold",children:"Loading..."})});if(n){const f={uid:n.uid,email:n.email};return I.jsx(p5,{user:f,logout:t,theme:c,toggleTheme:u})}return I.jsx(Kk,{login:r,signup:o,loginWithGoogle:i})},Pw=document.getElementById("root");if(!Pw)throw new Error("Could not find root element to mount to");const _5=AR.createRoot(Pw);_5.render(I.jsx(yR.StrictMode,{children:I.jsx(y5,{})}));
