var uC=Object.defineProperty;var hC=(n,t,e)=>t in n?uC(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var ct=(n,t,e)=>hC(n,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function e(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=e(r);fetch(r.href,o)}})();function cx(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Xm={exports:{}},Sc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jv;function fC(){if(Jv)return Sc;Jv=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,r,o){var c=null;if(o!==void 0&&(c=""+o),r.key!==void 0&&(c=""+r.key),"key"in r){o={};for(var u in r)u!=="key"&&(o[u]=r[u])}else o=r;return r=o.ref,{$$typeof:n,type:i,key:c,ref:r!==void 0?r:null,props:o}}return Sc.Fragment=t,Sc.jsx=e,Sc.jsxs=e,Sc}var Zv;function dC(){return Zv||(Zv=1,Xm.exports=fC()),Xm.exports}var O=dC(),Qm={exports:{}},Rt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tT;function gC(){if(tT)return Rt;tT=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),b=Symbol.iterator;function S(U){return U===null||typeof U!="object"?null:(U=b&&U[b]||U["@@iterator"],typeof U=="function"?U:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,D={};function L(U,tt,lt){this.props=U,this.context=tt,this.refs=D,this.updater=lt||w}L.prototype.isReactComponent={},L.prototype.setState=function(U,tt){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,tt,"setState")},L.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function F(){}F.prototype=L.prototype;function W(U,tt,lt){this.props=U,this.context=tt,this.refs=D,this.updater=lt||w}var J=W.prototype=new F;J.constructor=W,A(J,L.prototype),J.isPureReactComponent=!0;var $=Array.isArray;function st(){}var I={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function M(U,tt,lt){var ut=lt.ref;return{$$typeof:n,type:U,key:tt,ref:ut!==void 0?ut:null,props:lt}}function P(U,tt){return M(U.type,tt,U.props)}function N(U){return typeof U=="object"&&U!==null&&U.$$typeof===n}function z(U){var tt={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(lt){return tt[lt]})}var k=/\/+/g;function kt(U,tt){return typeof U=="object"&&U!==null&&U.key!=null?z(""+U.key):tt.toString(36)}function At(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(st,st):(U.status="pending",U.then(function(tt){U.status==="pending"&&(U.status="fulfilled",U.value=tt)},function(tt){U.status==="pending"&&(U.status="rejected",U.reason=tt)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function K(U,tt,lt,ut,_t){var Et=typeof U;(Et==="undefined"||Et==="boolean")&&(U=null);var Gt=!1;if(U===null)Gt=!0;else switch(Et){case"bigint":case"string":case"number":Gt=!0;break;case"object":switch(U.$$typeof){case n:case t:Gt=!0;break;case p:return Gt=U._init,K(Gt(U._payload),tt,lt,ut,_t)}}if(Gt)return _t=_t(U),Gt=ut===""?"."+kt(U,0):ut,$(_t)?(lt="",Gt!=null&&(lt=Gt.replace(k,"$&/")+"/"),K(_t,tt,lt,"",function($r){return $r})):_t!=null&&(N(_t)&&(_t=P(_t,lt+(_t.key==null||U&&U.key===_t.key?"":(""+_t.key).replace(k,"$&/")+"/")+Gt)),tt.push(_t)),1;Gt=0;var He=ut===""?".":ut+":";if($(U))for(var ge=0;ge<U.length;ge++)ut=U[ge],Et=He+kt(ut,ge),Gt+=K(ut,tt,lt,Et,_t);else if(ge=S(U),typeof ge=="function")for(U=ge.call(U),ge=0;!(ut=U.next()).done;)ut=ut.value,Et=He+kt(ut,ge++),Gt+=K(ut,tt,lt,Et,_t);else if(Et==="object"){if(typeof U.then=="function")return K(At(U),tt,lt,ut,_t);throw tt=String(U),Error("Objects are not valid as a React child (found: "+(tt==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":tt)+"). If you meant to render a collection of children, use an array instead.")}return Gt}function at(U,tt,lt){if(U==null)return U;var ut=[],_t=0;return K(U,ut,"","",function(Et){return tt.call(lt,Et,_t++)}),ut}function dt(U){if(U._status===-1){var tt=U._result;tt=tt(),tt.then(function(lt){(U._status===0||U._status===-1)&&(U._status=1,U._result=lt)},function(lt){(U._status===0||U._status===-1)&&(U._status=2,U._result=lt)}),U._status===-1&&(U._status=0,U._result=tt)}if(U._status===1)return U._result.default;throw U._result}var vt=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var tt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(tt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)},Lt={map:at,forEach:function(U,tt,lt){at(U,function(){tt.apply(this,arguments)},lt)},count:function(U){var tt=0;return at(U,function(){tt++}),tt},toArray:function(U){return at(U,function(tt){return tt})||[]},only:function(U){if(!N(U))throw Error("React.Children.only expected to receive a single React element child.");return U}};return Rt.Activity=_,Rt.Children=Lt,Rt.Component=L,Rt.Fragment=e,Rt.Profiler=r,Rt.PureComponent=W,Rt.StrictMode=i,Rt.Suspense=f,Rt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Rt.__COMPILER_RUNTIME={__proto__:null,c:function(U){return I.H.useMemoCache(U)}},Rt.cache=function(U){return function(){return U.apply(null,arguments)}},Rt.cacheSignal=function(){return null},Rt.cloneElement=function(U,tt,lt){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var ut=A({},U.props),_t=U.key;if(tt!=null)for(Et in tt.key!==void 0&&(_t=""+tt.key),tt)!R.call(tt,Et)||Et==="key"||Et==="__self"||Et==="__source"||Et==="ref"&&tt.ref===void 0||(ut[Et]=tt[Et]);var Et=arguments.length-2;if(Et===1)ut.children=lt;else if(1<Et){for(var Gt=Array(Et),He=0;He<Et;He++)Gt[He]=arguments[He+2];ut.children=Gt}return M(U.type,_t,ut)},Rt.createContext=function(U){return U={$$typeof:c,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:o,_context:U},U},Rt.createElement=function(U,tt,lt){var ut,_t={},Et=null;if(tt!=null)for(ut in tt.key!==void 0&&(Et=""+tt.key),tt)R.call(tt,ut)&&ut!=="key"&&ut!=="__self"&&ut!=="__source"&&(_t[ut]=tt[ut]);var Gt=arguments.length-2;if(Gt===1)_t.children=lt;else if(1<Gt){for(var He=Array(Gt),ge=0;ge<Gt;ge++)He[ge]=arguments[ge+2];_t.children=He}if(U&&U.defaultProps)for(ut in Gt=U.defaultProps,Gt)_t[ut]===void 0&&(_t[ut]=Gt[ut]);return M(U,Et,_t)},Rt.createRef=function(){return{current:null}},Rt.forwardRef=function(U){return{$$typeof:u,render:U}},Rt.isValidElement=N,Rt.lazy=function(U){return{$$typeof:p,_payload:{_status:-1,_result:U},_init:dt}},Rt.memo=function(U,tt){return{$$typeof:d,type:U,compare:tt===void 0?null:tt}},Rt.startTransition=function(U){var tt=I.T,lt={};I.T=lt;try{var ut=U(),_t=I.S;_t!==null&&_t(lt,ut),typeof ut=="object"&&ut!==null&&typeof ut.then=="function"&&ut.then(st,vt)}catch(Et){vt(Et)}finally{tt!==null&&lt.types!==null&&(tt.types=lt.types),I.T=tt}},Rt.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Rt.use=function(U){return I.H.use(U)},Rt.useActionState=function(U,tt,lt){return I.H.useActionState(U,tt,lt)},Rt.useCallback=function(U,tt){return I.H.useCallback(U,tt)},Rt.useContext=function(U){return I.H.useContext(U)},Rt.useDebugValue=function(){},Rt.useDeferredValue=function(U,tt){return I.H.useDeferredValue(U,tt)},Rt.useEffect=function(U,tt){return I.H.useEffect(U,tt)},Rt.useEffectEvent=function(U){return I.H.useEffectEvent(U)},Rt.useId=function(){return I.H.useId()},Rt.useImperativeHandle=function(U,tt,lt){return I.H.useImperativeHandle(U,tt,lt)},Rt.useInsertionEffect=function(U,tt){return I.H.useInsertionEffect(U,tt)},Rt.useLayoutEffect=function(U,tt){return I.H.useLayoutEffect(U,tt)},Rt.useMemo=function(U,tt){return I.H.useMemo(U,tt)},Rt.useOptimistic=function(U,tt){return I.H.useOptimistic(U,tt)},Rt.useReducer=function(U,tt,lt){return I.H.useReducer(U,tt,lt)},Rt.useRef=function(U){return I.H.useRef(U)},Rt.useState=function(U){return I.H.useState(U)},Rt.useSyncExternalStore=function(U,tt,lt){return I.H.useSyncExternalStore(U,tt,lt)},Rt.useTransition=function(){return I.H.useTransition()},Rt.version="19.2.0",Rt}var eT;function vy(){return eT||(eT=1,Qm.exports=gC()),Qm.exports}var Tt=vy();const mC=cx(Tt);var $m={exports:{}},xc={},Jm={exports:{}},Zm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nT;function pC(){return nT||(nT=1,(function(n){function t(K,at){var dt=K.length;K.push(at);t:for(;0<dt;){var vt=dt-1>>>1,Lt=K[vt];if(0<r(Lt,at))K[vt]=at,K[dt]=Lt,dt=vt;else break t}}function e(K){return K.length===0?null:K[0]}function i(K){if(K.length===0)return null;var at=K[0],dt=K.pop();if(dt!==at){K[0]=dt;t:for(var vt=0,Lt=K.length,U=Lt>>>1;vt<U;){var tt=2*(vt+1)-1,lt=K[tt],ut=tt+1,_t=K[ut];if(0>r(lt,dt))ut<Lt&&0>r(_t,lt)?(K[vt]=_t,K[ut]=dt,vt=ut):(K[vt]=lt,K[tt]=dt,vt=tt);else if(ut<Lt&&0>r(_t,dt))K[vt]=_t,K[ut]=dt,vt=ut;else break t}}return at}function r(K,at){var dt=K.sortIndex-at.sortIndex;return dt!==0?dt:K.id-at.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();n.unstable_now=function(){return c.now()-u}}var f=[],d=[],p=1,_=null,b=3,S=!1,w=!1,A=!1,D=!1,L=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;function J(K){for(var at=e(d);at!==null;){if(at.callback===null)i(d);else if(at.startTime<=K)i(d),at.sortIndex=at.expirationTime,t(f,at);else break;at=e(d)}}function $(K){if(A=!1,J(K),!w)if(e(f)!==null)w=!0,st||(st=!0,z());else{var at=e(d);at!==null&&At($,at.startTime-K)}}var st=!1,I=-1,R=5,M=-1;function P(){return D?!0:!(n.unstable_now()-M<R)}function N(){if(D=!1,st){var K=n.unstable_now();M=K;var at=!0;try{t:{w=!1,A&&(A=!1,F(I),I=-1),S=!0;var dt=b;try{e:{for(J(K),_=e(f);_!==null&&!(_.expirationTime>K&&P());){var vt=_.callback;if(typeof vt=="function"){_.callback=null,b=_.priorityLevel;var Lt=vt(_.expirationTime<=K);if(K=n.unstable_now(),typeof Lt=="function"){_.callback=Lt,J(K),at=!0;break e}_===e(f)&&i(f),J(K)}else i(f);_=e(f)}if(_!==null)at=!0;else{var U=e(d);U!==null&&At($,U.startTime-K),at=!1}}break t}finally{_=null,b=dt,S=!1}at=void 0}}finally{at?z():st=!1}}}var z;if(typeof W=="function")z=function(){W(N)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,kt=k.port2;k.port1.onmessage=N,z=function(){kt.postMessage(null)}}else z=function(){L(N,0)};function At(K,at){I=L(function(){K(n.unstable_now())},at)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(K){K.callback=null},n.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<K?Math.floor(1e3/K):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(K){switch(b){case 1:case 2:case 3:var at=3;break;default:at=b}var dt=b;b=at;try{return K()}finally{b=dt}},n.unstable_requestPaint=function(){D=!0},n.unstable_runWithPriority=function(K,at){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var dt=b;b=K;try{return at()}finally{b=dt}},n.unstable_scheduleCallback=function(K,at,dt){var vt=n.unstable_now();switch(typeof dt=="object"&&dt!==null?(dt=dt.delay,dt=typeof dt=="number"&&0<dt?vt+dt:vt):dt=vt,K){case 1:var Lt=-1;break;case 2:Lt=250;break;case 5:Lt=1073741823;break;case 4:Lt=1e4;break;default:Lt=5e3}return Lt=dt+Lt,K={id:p++,callback:at,priorityLevel:K,startTime:dt,expirationTime:Lt,sortIndex:-1},dt>vt?(K.sortIndex=dt,t(d,K),e(f)===null&&K===e(d)&&(A?(F(I),I=-1):A=!0,At($,dt-vt))):(K.sortIndex=Lt,t(f,K),w||S||(w=!0,st||(st=!0,z()))),K},n.unstable_shouldYield=P,n.unstable_wrapCallback=function(K){var at=b;return function(){var dt=b;b=at;try{return K.apply(this,arguments)}finally{b=dt}}}})(Zm)),Zm}var iT;function yC(){return iT||(iT=1,Jm.exports=pC()),Jm.exports}var tp={exports:{}},cn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sT;function _C(){if(sT)return cn;sT=1;var n=vy();function t(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(f,d,p){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:_==null?null:""+_,children:f,containerInfo:d,implementation:p}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return cn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,cn.createPortal=function(f,d){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return o(f,d,null,p)},cn.flushSync=function(f){var d=c.T,p=i.p;try{if(c.T=null,i.p=2,f)return f()}finally{c.T=d,i.p=p,i.d.f()}},cn.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,i.d.C(f,d))},cn.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},cn.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var p=d.as,_=u(p,d.crossOrigin),b=typeof d.integrity=="string"?d.integrity:void 0,S=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;p==="style"?i.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:_,integrity:b,fetchPriority:S}):p==="script"&&i.d.X(f,{crossOrigin:_,integrity:b,fetchPriority:S,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},cn.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var p=u(d.as,d.crossOrigin);i.d.M(f,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&i.d.M(f)},cn.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var p=d.as,_=u(p,d.crossOrigin);i.d.L(f,p,{crossOrigin:_,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},cn.preloadModule=function(f,d){if(typeof f=="string")if(d){var p=u(d.as,d.crossOrigin);i.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else i.d.m(f)},cn.requestFormReset=function(f){i.d.r(f)},cn.unstable_batchedUpdates=function(f,d){return f(d)},cn.useFormState=function(f,d,p){return c.H.useFormState(f,d,p)},cn.useFormStatus=function(){return c.H.useHostTransitionStatus()},cn.version="19.2.0",cn}var rT;function bC(){if(rT)return tp.exports;rT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),tp.exports=_C(),tp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aT;function vC(){if(aT)return xc;aT=1;var n=yC(),t=vy(),e=bC();function i(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var a=s,l=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(l=a.return),s=a.return;while(s)}return a.tag===3?l:null}function c(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function u(s){if(s.tag===31){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function f(s){if(o(s)!==s)throw Error(i(188))}function d(s){var a=s.alternate;if(!a){if(a=o(s),a===null)throw Error(i(188));return a!==s?null:s}for(var l=s,h=a;;){var m=l.return;if(m===null)break;var y=m.alternate;if(y===null){if(h=m.return,h!==null){l=h;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===l)return f(m),s;if(y===h)return f(m),a;y=y.sibling}throw Error(i(188))}if(l.return!==h.return)l=m,h=y;else{for(var T=!1,x=m.child;x;){if(x===l){T=!0,l=m,h=y;break}if(x===h){T=!0,h=m,l=y;break}x=x.sibling}if(!T){for(x=y.child;x;){if(x===l){T=!0,l=y,h=m;break}if(x===h){T=!0,h=y,l=m;break}x=x.sibling}if(!T)throw Error(i(189))}}if(l.alternate!==h)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?s:a}function p(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=p(s),a!==null)return a;s=s.sibling}return null}var _=Object.assign,b=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),F=Symbol.for("react.consumer"),W=Symbol.for("react.context"),J=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),st=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function z(s){return s===null||typeof s!="object"?null:(s=N&&s[N]||s["@@iterator"],typeof s=="function"?s:null)}var k=Symbol.for("react.client.reference");function kt(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===k?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case A:return"Fragment";case L:return"Profiler";case D:return"StrictMode";case $:return"Suspense";case st:return"SuspenseList";case M:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case w:return"Portal";case W:return s.displayName||"Context";case F:return(s._context.displayName||"Context")+".Consumer";case J:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case I:return a=s.displayName||null,a!==null?a:kt(s.type)||"Memo";case R:a=s._payload,s=s._init;try{return kt(s(a))}catch{}}return null}var At=Array.isArray,K=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,at=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,dt={pending:!1,data:null,method:null,action:null},vt=[],Lt=-1;function U(s){return{current:s}}function tt(s){0>Lt||(s.current=vt[Lt],vt[Lt]=null,Lt--)}function lt(s,a){Lt++,vt[Lt]=s.current,s.current=a}var ut=U(null),_t=U(null),Et=U(null),Gt=U(null);function He(s,a){switch(lt(Et,a),lt(_t,s),lt(ut,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?Tv(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=Tv(a),s=Ev(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}tt(ut),lt(ut,s)}function ge(){tt(ut),tt(_t),tt(Et)}function $r(s){s.memoizedState!==null&&lt(Gt,s);var a=ut.current,l=Ev(a,s.type);a!==l&&(lt(_t,s),lt(ut,l))}function to(s){_t.current===s&&(tt(ut),tt(_t)),Gt.current===s&&(tt(Gt),bc._currentValue=dt)}var eo,no;function Ri(s){if(eo===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);eo=a&&a[1]||"",no=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+eo+s+no}var bl=!1;function Jr(s,a){if(!s||bl)return"";bl=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(a){var nt=function(){throw Error()};if(Object.defineProperty(nt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(nt,[])}catch(Q){var Y=Q}Reflect.construct(s,[],nt)}else{try{nt.call()}catch(Q){Y=Q}s.call(nt.prototype)}}else{try{throw Error()}catch(Q){Y=Q}(nt=s())&&typeof nt.catch=="function"&&nt.catch(function(){})}}catch(Q){if(Q&&Y&&typeof Q.stack=="string")return[Q.stack,Y.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=h.DetermineComponentFrameRoot(),T=y[0],x=y[1];if(T&&x){var V=T.split(`
`),G=x.split(`
`);for(m=h=0;h<V.length&&!V[h].includes("DetermineComponentFrameRoot");)h++;for(;m<G.length&&!G[m].includes("DetermineComponentFrameRoot");)m++;if(h===V.length||m===G.length)for(h=V.length-1,m=G.length-1;1<=h&&0<=m&&V[h]!==G[m];)m--;for(;1<=h&&0<=m;h--,m--)if(V[h]!==G[m]){if(h!==1||m!==1)do if(h--,m--,0>m||V[h]!==G[m]){var Z=`
`+V[h].replace(" at new "," at ");return s.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",s.displayName)),Z}while(1<=h&&0<=m);break}}}finally{bl=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?Ri(l):""}function vl(s,a){switch(s.tag){case 26:case 27:case 5:return Ri(s.type);case 16:return Ri("Lazy");case 13:return s.child!==a&&a!==null?Ri("Suspense Fallback"):Ri("Suspense");case 19:return Ri("SuspenseList");case 0:case 15:return Jr(s.type,!1);case 11:return Jr(s.type.render,!1);case 1:return Jr(s.type,!0);case 31:return Ri("Activity");default:return""}}function Tl(s){try{var a="",l=null;do a+=vl(s,l),l=s,s=s.return;while(s);return a}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var Ie=Object.prototype.hasOwnProperty,qe=n.unstable_scheduleCallback,js=n.unstable_cancelCallback,$d=n.unstable_shouldYield,ku=n.unstable_requestPaint,_n=n.unstable_now,Zr=n.unstable_getCurrentPriorityLevel,El=n.unstable_ImmediatePriority,Sl=n.unstable_UserBlockingPriority,Bs=n.unstable_NormalPriority,Jd=n.unstable_LowPriority,Nu=n.unstable_IdlePriority,Pu=n.log,Vu=n.unstable_setDisableYieldValue,oi=null,Ze=null;function Gn(s){if(typeof Pu=="function"&&Vu(s),Ze&&typeof Ze.setStrictMode=="function")try{Ze.setStrictMode(oi,s)}catch{}}var Se=Math.clz32?Math.clz32:zu,Lu=Math.log,io=Math.LN2;function zu(s){return s>>>=0,s===0?32:31-(Lu(s)/io|0)|0}var Ci=256,ta=262144,De=4194304;function Ii(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Di(s,a,l){var h=s.pendingLanes;if(h===0)return 0;var m=0,y=s.suspendedLanes,T=s.pingedLanes;s=s.warmLanes;var x=h&134217727;return x!==0?(h=x&~y,h!==0?m=Ii(h):(T&=x,T!==0?m=Ii(T):l||(l=x&~s,l!==0&&(m=Ii(l))))):(x=h&~y,x!==0?m=Ii(x):T!==0?m=Ii(T):l||(l=h&~s,l!==0&&(m=Ii(l)))),m===0?0:a!==0&&a!==m&&(a&y)===0&&(y=m&-m,l=a&-a,y>=l||y===32&&(l&4194048)!==0)?a:m}function li(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function Zd(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Uu(){var s=De;return De<<=1,(De&62914560)===0&&(De=4194304),s}function Mi(s){for(var a=[],l=0;31>l;l++)a.push(s);return a}function ea(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function tg(s,a,l,h,m,y){var T=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var x=s.entanglements,V=s.expirationTimes,G=s.hiddenUpdates;for(l=T&~l;0<l;){var Z=31-Se(l),nt=1<<Z;x[Z]=0,V[Z]=-1;var Y=G[Z];if(Y!==null)for(G[Z]=null,Z=0;Z<Y.length;Z++){var Q=Y[Z];Q!==null&&(Q.lane&=-536870913)}l&=~nt}h!==0&&na(s,h,0),y!==0&&m===0&&s.tag!==0&&(s.suspendedLanes|=y&~(T&~a))}function na(s,a,l){s.pendingLanes|=a,s.suspendedLanes&=~a;var h=31-Se(a);s.entangledLanes|=a,s.entanglements[h]=s.entanglements[h]|1073741824|l&261930}function xl(s,a){var l=s.entangledLanes|=a;for(s=s.entanglements;l;){var h=31-Se(l),m=1<<h;m&a|s[h]&a&&(s[h]|=a),l&=~m}}function Al(s,a){var l=a&-a;return l=(l&42)!==0?1:ia(l),(l&(s.suspendedLanes|a))!==0?0:l}function ia(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function rs(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function ju(){var s=at.p;return s!==0?s:(s=window.event,s===void 0?32:Gv(s.type))}function ci(s,a){var l=at.p;try{return at.p=s,a()}finally{at.p=l}}var ui=Math.random().toString(36).slice(2),Me="__reactFiber$"+ui,We="__reactProps$"+ui,Oi="__reactContainer$"+ui,so="__reactEvents$"+ui,eg="__reactListeners$"+ui,Bu="__reactHandles$"+ui,Fu="__reactResources$"+ui,ki="__reactMarker$"+ui;function ro(s){delete s[Me],delete s[We],delete s[so],delete s[eg],delete s[Bu]}function Ni(s){var a=s[Me];if(a)return a;for(var l=s.parentNode;l;){if(a=l[Oi]||l[Me]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(s=Iv(s);s!==null;){if(l=s[Me])return l;s=Iv(s)}return a}s=l,l=s.parentNode}return null}function Yn(s){if(s=s[Me]||s[Oi]){var a=s.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return s}return null}function kn(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(i(33))}function Pi(s){var a=s[Fu];return a||(a=s[Fu]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Oe(s){s[ki]=!0}var wl=new Set,Rl={};function Vi(s,a){Li(s,a),Li(s+"Capture",a)}function Li(s,a){for(Rl[s]=a,s=0;s<a.length;s++)wl.add(a[s])}var Cl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Il={},Dl={};function Hu(s){return Ie.call(Dl,s)?!0:Ie.call(Il,s)?!1:Cl.test(s)?Dl[s]=!0:(Il[s]=!0,!1)}function ao(s,a,l){if(Hu(a))if(l===null)s.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var h=a.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+l)}}function Nn(s,a,l){if(l===null)s.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+l)}}function ke(s,a,l,h){if(h===null)s.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(a,l,""+h)}}function Xe(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Fs(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Ml(s,a,l){var h=Object.getOwnPropertyDescriptor(s.constructor.prototype,a);if(!s.hasOwnProperty(a)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var m=h.get,y=h.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return m.call(this)},set:function(T){l=""+T,y.call(this,T)}}),Object.defineProperty(s,a,{enumerable:h.enumerable}),{getValue:function(){return l},setValue:function(T){l=""+T},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function Zt(s){if(!s._valueTracker){var a=Fs(s)?"checked":"value";s._valueTracker=Ml(s,a,""+s[a])}}function sa(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var l=a.getValue(),h="";return s&&(h=Fs(s)?s.checked?"true":"false":s.value),s=h,s!==l?(a.setValue(s),!0):!1}function zi(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var ra=/[\n"\\]/g;function Tn(s){return s.replace(ra,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function oo(s,a,l,h,m,y,T,x){s.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?s.type=T:s.removeAttribute("type"),a!=null?T==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+Xe(a)):s.value!==""+Xe(a)&&(s.value=""+Xe(a)):T!=="submit"&&T!=="reset"||s.removeAttribute("value"),a!=null?Ol(s,T,Xe(a)):l!=null?Ol(s,T,Xe(l)):h!=null&&s.removeAttribute("value"),m==null&&y!=null&&(s.defaultChecked=!!y),m!=null&&(s.checked=m&&typeof m!="function"&&typeof m!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?s.name=""+Xe(x):s.removeAttribute("name")}function qu(s,a,l,h,m,y,T,x){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(s.type=y),a!=null||l!=null){if(!(y!=="submit"&&y!=="reset"||a!=null)){Zt(s);return}l=l!=null?""+Xe(l):"",a=a!=null?""+Xe(a):l,x||a===s.value||(s.value=a),s.defaultValue=a}h=h??m,h=typeof h!="function"&&typeof h!="symbol"&&!!h,s.checked=x?s.checked:!!h,s.defaultChecked=!!h,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(s.name=T),Zt(s)}function Ol(s,a,l){a==="number"&&zi(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function Hs(s,a,l,h){if(s=s.options,a){a={};for(var m=0;m<l.length;m++)a["$"+l[m]]=!0;for(l=0;l<s.length;l++)m=a.hasOwnProperty("$"+s[l].value),s[l].selected!==m&&(s[l].selected=m),m&&h&&(s[l].defaultSelected=!0)}else{for(l=""+Xe(l),a=null,m=0;m<s.length;m++){if(s[m].value===l){s[m].selected=!0,h&&(s[m].defaultSelected=!0);return}a!==null||s[m].disabled||(a=s[m])}a!==null&&(a.selected=!0)}}function Gu(s,a,l){if(a!=null&&(a=""+Xe(a),a!==s.value&&(s.value=a),l==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=l!=null?""+Xe(l):""}function qs(s,a,l,h){if(a==null){if(h!=null){if(l!=null)throw Error(i(92));if(At(h)){if(1<h.length)throw Error(i(93));h=h[0]}l=h}l==null&&(l=""),a=l}l=Xe(a),s.defaultValue=l,h=s.textContent,h===l&&h!==""&&h!==null&&(s.value=h),Zt(s)}function En(s,a){if(a){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=a;return}}s.textContent=a}var Yu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function kl(s,a,l){var h=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?h?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":h?s.setProperty(a,l):typeof l!="number"||l===0||Yu.has(a)?a==="float"?s.cssFloat=l:s[a]=(""+l).trim():s[a]=l+"px"}function Nl(s,a,l){if(a!=null&&typeof a!="object")throw Error(i(62));if(s=s.style,l!=null){for(var h in l)!l.hasOwnProperty(h)||a!=null&&a.hasOwnProperty(h)||(h.indexOf("--")===0?s.setProperty(h,""):h==="float"?s.cssFloat="":s[h]="");for(var m in a)h=a[m],a.hasOwnProperty(m)&&l[m]!==h&&kl(s,m,h)}else for(var y in a)a.hasOwnProperty(y)&&kl(s,y,a[y])}function lo(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ku=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Gs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function co(s){return Gs.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function hi(){}var Pl=null;function Kn(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ys=null,Ui=null;function aa(s){var a=Yn(s);if(a&&(s=a.stateNode)){var l=s[We]||null;t:switch(s=a.stateNode,a.type){case"input":if(oo(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Tn(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var h=l[a];if(h!==s&&h.form===s.form){var m=h[We]||null;if(!m)throw Error(i(90));oo(h,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(a=0;a<l.length;a++)h=l[a],h.form===s.form&&sa(h)}break t;case"textarea":Gu(s,l.value,l.defaultValue);break t;case"select":a=l.value,a!=null&&Hs(s,!!l.multiple,a,!1)}}}var uo=!1;function Ks(s,a,l){if(uo)return s(a,l);uo=!0;try{var h=s(a);return h}finally{if(uo=!1,(Ys!==null||Ui!==null)&&(jh(),Ys&&(a=Ys,s=Ui,Ui=Ys=null,aa(a),s)))for(a=0;a<s.length;a++)aa(s[a])}}function fi(s,a){var l=s.stateNode;if(l===null)return null;var h=l[We]||null;if(h===null)return null;l=h[a];t:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(s=s.type,h=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!h;break t;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(i(231,a,typeof l));return l}var Wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),oa=!1;if(Wn)try{var ie={};Object.defineProperty(ie,"passive",{get:function(){oa=!0}}),window.addEventListener("test",ie,ie),window.removeEventListener("test",ie,ie)}catch{oa=!1}var ji=null,Vl=null,la=null;function Ll(){if(la)return la;var s,a=Vl,l=a.length,h,m="value"in ji?ji.value:ji.textContent,y=m.length;for(s=0;s<l&&a[s]===m[s];s++);var T=l-s;for(h=1;h<=T&&a[l-h]===m[y-h];h++);return la=m.slice(s,1<h?1-h:void 0)}function ca(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function as(){return!0}function di(){return!1}function tn(s){function a(l,h,m,y,T){this._reactName=l,this._targetInst=m,this.type=h,this.nativeEvent=y,this.target=T,this.currentTarget=null;for(var x in s)s.hasOwnProperty(x)&&(l=s[x],this[x]=l?l(y):y[x]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?as:di,this.isPropagationStopped=di,this}return _(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=as)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=as)},persist:function(){},isPersistent:as}),a}var os={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bi=tn(os),Ws=_({},os,{view:0,detail:0}),zl=tn(Ws),Xs,ho,Fi,fo=_({},Ws,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qs,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Fi&&(Fi&&s.type==="mousemove"?(Xs=s.screenX-Fi.screenX,ho=s.screenY-Fi.screenY):ho=Xs=0,Fi=s),Xs)},movementY:function(s){return"movementY"in s?s.movementY:ho}}),Ul=tn(fo),ua=_({},fo,{dataTransfer:0}),Wu=tn(ua),Xu=_({},Ws,{relatedTarget:0}),ha=tn(Xu),jl=_({},os,{animationName:0,elapsedTime:0,pseudoElement:0}),Qu=tn(jl),go=_({},os,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),$u=tn(go),Ju=_({},os,{data:0}),Hi=tn(Ju),Zu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},th={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nh(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=eh[s])?!!a[s]:!1}function Qs(){return nh}var bn=_({},Ws,{key:function(s){if(s.key){var a=Zu[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=ca(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?th[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qs,charCode:function(s){return s.type==="keypress"?ca(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?ca(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),ih=tn(bn),sh=_({},fo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ls=tn(sh),g=_({},Ws,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qs}),v=tn(g),E=_({},os,{propertyName:0,elapsedTime:0,pseudoElement:0}),C=tn(E),H=_({},fo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),X=tn(H),ot=_({},os,{newState:0,oldState:0}),Dt=tn(ot),xe=[9,13,27,32],Qt=Wn&&"CompositionEvent"in window,me=null;Wn&&"documentMode"in document&&(me=document.documentMode);var Xn=Wn&&"TextEvent"in window&&!me,qi=Wn&&(!Qt||me&&8<me&&11>=me),gi=" ",mi=!1;function fa(s,a){switch(s){case"keyup":return xe.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mo(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var po=!1;function Nw(s,a){switch(s){case"compositionend":return mo(a);case"keypress":return a.which!==32?null:(mi=!0,gi);case"textInput":return s=a.data,s===gi&&mi?null:s;default:return null}}function Pw(s,a){if(po)return s==="compositionend"||!Qt&&fa(s,a)?(s=Ll(),la=Vl=ji=null,po=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return qi&&a.locale!=="ko"?null:a.data;default:return null}}var Vw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function O_(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!Vw[s.type]:a==="textarea"}function k_(s,a,l,h){Ys?Ui?Ui.push(h):Ui=[h]:Ys=h,a=Kh(a,"onChange"),0<a.length&&(l=new Bi("onChange","change",null,l,h),s.push({event:l,listeners:a}))}var Bl=null,Fl=null;function Lw(s){mv(s,0)}function rh(s){var a=kn(s);if(sa(a))return s}function N_(s,a){if(s==="change")return a}var P_=!1;if(Wn){var ng;if(Wn){var ig="oninput"in document;if(!ig){var V_=document.createElement("div");V_.setAttribute("oninput","return;"),ig=typeof V_.oninput=="function"}ng=ig}else ng=!1;P_=ng&&(!document.documentMode||9<document.documentMode)}function L_(){Bl&&(Bl.detachEvent("onpropertychange",z_),Fl=Bl=null)}function z_(s){if(s.propertyName==="value"&&rh(Fl)){var a=[];k_(a,Fl,s,Kn(s)),Ks(Lw,a)}}function zw(s,a,l){s==="focusin"?(L_(),Bl=a,Fl=l,Bl.attachEvent("onpropertychange",z_)):s==="focusout"&&L_()}function Uw(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return rh(Fl)}function jw(s,a){if(s==="click")return rh(a)}function Bw(s,a){if(s==="input"||s==="change")return rh(a)}function Fw(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var Pn=typeof Object.is=="function"?Object.is:Fw;function Hl(s,a){if(Pn(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var l=Object.keys(s),h=Object.keys(a);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var m=l[h];if(!Ie.call(a,m)||!Pn(s[m],a[m]))return!1}return!0}function U_(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function j_(s,a){var l=U_(s);s=0;for(var h;l;){if(l.nodeType===3){if(h=s+l.textContent.length,s<=a&&h>=a)return{node:l,offset:a-s};s=h}t:{for(;l;){if(l.nextSibling){l=l.nextSibling;break t}l=l.parentNode}l=void 0}l=U_(l)}}function B_(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?B_(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function F_(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=zi(s.document);a instanceof s.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)s=a.contentWindow;else break;a=zi(s.document)}return a}function sg(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var Hw=Wn&&"documentMode"in document&&11>=document.documentMode,yo=null,rg=null,ql=null,ag=!1;function H_(s,a,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;ag||yo==null||yo!==zi(h)||(h=yo,"selectionStart"in h&&sg(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),ql&&Hl(ql,h)||(ql=h,h=Kh(rg,"onSelect"),0<h.length&&(a=new Bi("onSelect","select",null,a,l),s.push({event:a,listeners:h}),a.target=yo)))}function da(s,a){var l={};return l[s.toLowerCase()]=a.toLowerCase(),l["Webkit"+s]="webkit"+a,l["Moz"+s]="moz"+a,l}var _o={animationend:da("Animation","AnimationEnd"),animationiteration:da("Animation","AnimationIteration"),animationstart:da("Animation","AnimationStart"),transitionrun:da("Transition","TransitionRun"),transitionstart:da("Transition","TransitionStart"),transitioncancel:da("Transition","TransitionCancel"),transitionend:da("Transition","TransitionEnd")},og={},q_={};Wn&&(q_=document.createElement("div").style,"AnimationEvent"in window||(delete _o.animationend.animation,delete _o.animationiteration.animation,delete _o.animationstart.animation),"TransitionEvent"in window||delete _o.transitionend.transition);function ga(s){if(og[s])return og[s];if(!_o[s])return s;var a=_o[s],l;for(l in a)if(a.hasOwnProperty(l)&&l in q_)return og[s]=a[l];return s}var G_=ga("animationend"),Y_=ga("animationiteration"),K_=ga("animationstart"),qw=ga("transitionrun"),Gw=ga("transitionstart"),Yw=ga("transitioncancel"),W_=ga("transitionend"),X_=new Map,lg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");lg.push("scrollEnd");function pi(s,a){X_.set(s,a),Vi(a,[s])}var ah=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Qn=[],bo=0,cg=0;function oh(){for(var s=bo,a=cg=bo=0;a<s;){var l=Qn[a];Qn[a++]=null;var h=Qn[a];Qn[a++]=null;var m=Qn[a];Qn[a++]=null;var y=Qn[a];if(Qn[a++]=null,h!==null&&m!==null){var T=h.pending;T===null?m.next=m:(m.next=T.next,T.next=m),h.pending=m}y!==0&&Q_(l,m,y)}}function lh(s,a,l,h){Qn[bo++]=s,Qn[bo++]=a,Qn[bo++]=l,Qn[bo++]=h,cg|=h,s.lanes|=h,s=s.alternate,s!==null&&(s.lanes|=h)}function ug(s,a,l,h){return lh(s,a,l,h),ch(s)}function ma(s,a){return lh(s,null,null,a),ch(s)}function Q_(s,a,l){s.lanes|=l;var h=s.alternate;h!==null&&(h.lanes|=l);for(var m=!1,y=s.return;y!==null;)y.childLanes|=l,h=y.alternate,h!==null&&(h.childLanes|=l),y.tag===22&&(s=y.stateNode,s===null||s._visibility&1||(m=!0)),s=y,y=y.return;return s.tag===3?(y=s.stateNode,m&&a!==null&&(m=31-Se(l),s=y.hiddenUpdates,h=s[m],h===null?s[m]=[a]:h.push(a),a.lane=l|536870912),y):null}function ch(s){if(50<fc)throw fc=0,bm=null,Error(i(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var vo={};function Kw(s,a,l,h){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vn(s,a,l,h){return new Kw(s,a,l,h)}function hg(s){return s=s.prototype,!(!s||!s.isReactComponent)}function cs(s,a){var l=s.alternate;return l===null?(l=Vn(s.tag,a,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=a,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,a=s.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function $_(s,a){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,a=l.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function uh(s,a,l,h,m,y){var T=0;if(h=s,typeof s=="function")hg(s)&&(T=1);else if(typeof s=="string")T=JR(s,l,ut.current)?26:s==="html"||s==="head"||s==="body"?27:5;else t:switch(s){case M:return s=Vn(31,l,a,m),s.elementType=M,s.lanes=y,s;case A:return pa(l.children,m,y,a);case D:T=8,m|=24;break;case L:return s=Vn(12,l,a,m|2),s.elementType=L,s.lanes=y,s;case $:return s=Vn(13,l,a,m),s.elementType=$,s.lanes=y,s;case st:return s=Vn(19,l,a,m),s.elementType=st,s.lanes=y,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case W:T=10;break t;case F:T=9;break t;case J:T=11;break t;case I:T=14;break t;case R:T=16,h=null;break t}T=29,l=Error(i(130,s===null?"null":typeof s,"")),h=null}return a=Vn(T,l,a,m),a.elementType=s,a.type=h,a.lanes=y,a}function pa(s,a,l,h){return s=Vn(7,s,h,a),s.lanes=l,s}function fg(s,a,l){return s=Vn(6,s,null,a),s.lanes=l,s}function J_(s){var a=Vn(18,null,null,0);return a.stateNode=s,a}function dg(s,a,l){return a=Vn(4,s.children!==null?s.children:[],s.key,a),a.lanes=l,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var Z_=new WeakMap;function $n(s,a){if(typeof s=="object"&&s!==null){var l=Z_.get(s);return l!==void 0?l:(a={value:s,source:a,stack:Tl(a)},Z_.set(s,a),a)}return{value:s,source:a,stack:Tl(a)}}var To=[],Eo=0,hh=null,Gl=0,Jn=[],Zn=0,$s=null,Gi=1,Yi="";function us(s,a){To[Eo++]=Gl,To[Eo++]=hh,hh=s,Gl=a}function t0(s,a,l){Jn[Zn++]=Gi,Jn[Zn++]=Yi,Jn[Zn++]=$s,$s=s;var h=Gi;s=Yi;var m=32-Se(h)-1;h&=~(1<<m),l+=1;var y=32-Se(a)+m;if(30<y){var T=m-m%5;y=(h&(1<<T)-1).toString(32),h>>=T,m-=T,Gi=1<<32-Se(a)+m|l<<m|h,Yi=y+s}else Gi=1<<y|l<<m|h,Yi=s}function gg(s){s.return!==null&&(us(s,1),t0(s,1,0))}function mg(s){for(;s===hh;)hh=To[--Eo],To[Eo]=null,Gl=To[--Eo],To[Eo]=null;for(;s===$s;)$s=Jn[--Zn],Jn[Zn]=null,Yi=Jn[--Zn],Jn[Zn]=null,Gi=Jn[--Zn],Jn[Zn]=null}function e0(s,a){Jn[Zn++]=Gi,Jn[Zn++]=Yi,Jn[Zn++]=$s,Gi=a.id,Yi=a.overflow,$s=s}var en=null,ue=null,qt=!1,Js=null,ti=!1,pg=Error(i(519));function Zs(s){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Yl($n(a,s)),pg}function n0(s){var a=s.stateNode,l=s.type,h=s.memoizedProps;switch(a[Me]=s,a[We]=h,l){case"dialog":Pt("cancel",a),Pt("close",a);break;case"iframe":case"object":case"embed":Pt("load",a);break;case"video":case"audio":for(l=0;l<gc.length;l++)Pt(gc[l],a);break;case"source":Pt("error",a);break;case"img":case"image":case"link":Pt("error",a),Pt("load",a);break;case"details":Pt("toggle",a);break;case"input":Pt("invalid",a),qu(a,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":Pt("invalid",a);break;case"textarea":Pt("invalid",a),qs(a,h.value,h.defaultValue,h.children)}l=h.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||h.suppressHydrationWarning===!0||bv(a.textContent,l)?(h.popover!=null&&(Pt("beforetoggle",a),Pt("toggle",a)),h.onScroll!=null&&Pt("scroll",a),h.onScrollEnd!=null&&Pt("scrollend",a),h.onClick!=null&&(a.onclick=hi),a=!0):a=!1,a||Zs(s,!0)}function i0(s){for(en=s.return;en;)switch(en.tag){case 5:case 31:case 13:ti=!1;return;case 27:case 3:ti=!0;return;default:en=en.return}}function So(s){if(s!==en)return!1;if(!qt)return i0(s),qt=!0,!1;var a=s.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||Nm(s.type,s.memoizedProps)),l=!l),l&&ue&&Zs(s),i0(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));ue=Cv(s)}else if(a===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));ue=Cv(s)}else a===27?(a=ue,dr(s.type)?(s=Um,Um=null,ue=s):ue=a):ue=en?ni(s.stateNode.nextSibling):null;return!0}function ya(){ue=en=null,qt=!1}function yg(){var s=Js;return s!==null&&(wn===null?wn=s:wn.push.apply(wn,s),Js=null),s}function Yl(s){Js===null?Js=[s]:Js.push(s)}var _g=U(null),_a=null,hs=null;function tr(s,a,l){lt(_g,a._currentValue),a._currentValue=l}function fs(s){s._currentValue=_g.current,tt(_g)}function bg(s,a,l){for(;s!==null;){var h=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,h!==null&&(h.childLanes|=a)):h!==null&&(h.childLanes&a)!==a&&(h.childLanes|=a),s===l)break;s=s.return}}function vg(s,a,l,h){var m=s.child;for(m!==null&&(m.return=s);m!==null;){var y=m.dependencies;if(y!==null){var T=m.child;y=y.firstContext;t:for(;y!==null;){var x=y;y=m;for(var V=0;V<a.length;V++)if(x.context===a[V]){y.lanes|=l,x=y.alternate,x!==null&&(x.lanes|=l),bg(y.return,l,s),h||(T=null);break t}y=x.next}}else if(m.tag===18){if(T=m.return,T===null)throw Error(i(341));T.lanes|=l,y=T.alternate,y!==null&&(y.lanes|=l),bg(T,l,s),T=null}else T=m.child;if(T!==null)T.return=m;else for(T=m;T!==null;){if(T===s){T=null;break}if(m=T.sibling,m!==null){m.return=T.return,T=m;break}T=T.return}m=T}}function xo(s,a,l,h){s=null;for(var m=a,y=!1;m!==null;){if(!y){if((m.flags&524288)!==0)y=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var T=m.alternate;if(T===null)throw Error(i(387));if(T=T.memoizedProps,T!==null){var x=m.type;Pn(m.pendingProps.value,T.value)||(s!==null?s.push(x):s=[x])}}else if(m===Gt.current){if(T=m.alternate,T===null)throw Error(i(387));T.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(s!==null?s.push(bc):s=[bc])}m=m.return}s!==null&&vg(a,s,l,h),a.flags|=262144}function fh(s){for(s=s.firstContext;s!==null;){if(!Pn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function ba(s){_a=s,hs=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function nn(s){return s0(_a,s)}function dh(s,a){return _a===null&&ba(s),s0(s,a)}function s0(s,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},hs===null){if(s===null)throw Error(i(308));hs=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else hs=hs.next=a;return l}var Ww=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(l,h){s.push(h)}};this.abort=function(){a.aborted=!0,s.forEach(function(l){return l()})}},Xw=n.unstable_scheduleCallback,Qw=n.unstable_NormalPriority,Ne={$$typeof:W,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Tg(){return{controller:new Ww,data:new Map,refCount:0}}function Kl(s){s.refCount--,s.refCount===0&&Xw(Qw,function(){s.controller.abort()})}var Wl=null,Eg=0,Ao=0,wo=null;function $w(s,a){if(Wl===null){var l=Wl=[];Eg=0,Ao=Am(),wo={status:"pending",value:void 0,then:function(h){l.push(h)}}}return Eg++,a.then(r0,r0),a}function r0(){if(--Eg===0&&Wl!==null){wo!==null&&(wo.status="fulfilled");var s=Wl;Wl=null,Ao=0,wo=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function Jw(s,a){var l=[],h={status:"pending",value:null,reason:null,then:function(m){l.push(m)}};return s.then(function(){h.status="fulfilled",h.value=a;for(var m=0;m<l.length;m++)(0,l[m])(a)},function(m){for(h.status="rejected",h.reason=m,m=0;m<l.length;m++)(0,l[m])(void 0)}),h}var a0=K.S;K.S=function(s,a){Hb=_n(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&$w(s,a),a0!==null&&a0(s,a)};var va=U(null);function Sg(){var s=va.current;return s!==null?s:oe.pooledCache}function gh(s,a){a===null?lt(va,va.current):lt(va,a.pool)}function o0(){var s=Sg();return s===null?null:{parent:Ne._currentValue,pool:s}}var Ro=Error(i(460)),xg=Error(i(474)),mh=Error(i(542)),ph={then:function(){}};function l0(s){return s=s.status,s==="fulfilled"||s==="rejected"}function c0(s,a,l){switch(l=s[l],l===void 0?s.push(a):l!==a&&(a.then(hi,hi),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,h0(s),s;default:if(typeof a.status=="string")a.then(hi,hi);else{if(s=oe,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=a,s.status="pending",s.then(function(h){if(a.status==="pending"){var m=a;m.status="fulfilled",m.value=h}},function(h){if(a.status==="pending"){var m=a;m.status="rejected",m.reason=h}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,h0(s),s}throw Ea=a,Ro}}function Ta(s){try{var a=s._init;return a(s._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Ea=l,Ro):l}}var Ea=null;function u0(){if(Ea===null)throw Error(i(459));var s=Ea;return Ea=null,s}function h0(s){if(s===Ro||s===mh)throw Error(i(483))}var Co=null,Xl=0;function yh(s){var a=Xl;return Xl+=1,Co===null&&(Co=[]),c0(Co,s,a)}function Ql(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function _h(s,a){throw a.$$typeof===b?Error(i(525)):(s=Object.prototype.toString.call(a),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function f0(s){function a(B,j){if(s){var q=B.deletions;q===null?(B.deletions=[j],B.flags|=16):q.push(j)}}function l(B,j){if(!s)return null;for(;j!==null;)a(B,j),j=j.sibling;return null}function h(B){for(var j=new Map;B!==null;)B.key!==null?j.set(B.key,B):j.set(B.index,B),B=B.sibling;return j}function m(B,j){return B=cs(B,j),B.index=0,B.sibling=null,B}function y(B,j,q){return B.index=q,s?(q=B.alternate,q!==null?(q=q.index,q<j?(B.flags|=67108866,j):q):(B.flags|=67108866,j)):(B.flags|=1048576,j)}function T(B){return s&&B.alternate===null&&(B.flags|=67108866),B}function x(B,j,q,et){return j===null||j.tag!==6?(j=fg(q,B.mode,et),j.return=B,j):(j=m(j,q),j.return=B,j)}function V(B,j,q,et){var pt=q.type;return pt===A?Z(B,j,q.props.children,et,q.key):j!==null&&(j.elementType===pt||typeof pt=="object"&&pt!==null&&pt.$$typeof===R&&Ta(pt)===j.type)?(j=m(j,q.props),Ql(j,q),j.return=B,j):(j=uh(q.type,q.key,q.props,null,B.mode,et),Ql(j,q),j.return=B,j)}function G(B,j,q,et){return j===null||j.tag!==4||j.stateNode.containerInfo!==q.containerInfo||j.stateNode.implementation!==q.implementation?(j=dg(q,B.mode,et),j.return=B,j):(j=m(j,q.children||[]),j.return=B,j)}function Z(B,j,q,et,pt){return j===null||j.tag!==7?(j=pa(q,B.mode,et,pt),j.return=B,j):(j=m(j,q),j.return=B,j)}function nt(B,j,q){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=fg(""+j,B.mode,q),j.return=B,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case S:return q=uh(j.type,j.key,j.props,null,B.mode,q),Ql(q,j),q.return=B,q;case w:return j=dg(j,B.mode,q),j.return=B,j;case R:return j=Ta(j),nt(B,j,q)}if(At(j)||z(j))return j=pa(j,B.mode,q,null),j.return=B,j;if(typeof j.then=="function")return nt(B,yh(j),q);if(j.$$typeof===W)return nt(B,dh(B,j),q);_h(B,j)}return null}function Y(B,j,q,et){var pt=j!==null?j.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return pt!==null?null:x(B,j,""+q,et);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case S:return q.key===pt?V(B,j,q,et):null;case w:return q.key===pt?G(B,j,q,et):null;case R:return q=Ta(q),Y(B,j,q,et)}if(At(q)||z(q))return pt!==null?null:Z(B,j,q,et,null);if(typeof q.then=="function")return Y(B,j,yh(q),et);if(q.$$typeof===W)return Y(B,j,dh(B,q),et);_h(B,q)}return null}function Q(B,j,q,et,pt){if(typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint")return B=B.get(q)||null,x(j,B,""+et,pt);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case S:return B=B.get(et.key===null?q:et.key)||null,V(j,B,et,pt);case w:return B=B.get(et.key===null?q:et.key)||null,G(j,B,et,pt);case R:return et=Ta(et),Q(B,j,q,et,pt)}if(At(et)||z(et))return B=B.get(q)||null,Z(j,B,et,pt,null);if(typeof et.then=="function")return Q(B,j,q,yh(et),pt);if(et.$$typeof===W)return Q(B,j,q,dh(j,et),pt);_h(j,et)}return null}function gt(B,j,q,et){for(var pt=null,Kt=null,mt=j,Ot=j=0,Ut=null;mt!==null&&Ot<q.length;Ot++){mt.index>Ot?(Ut=mt,mt=null):Ut=mt.sibling;var Wt=Y(B,mt,q[Ot],et);if(Wt===null){mt===null&&(mt=Ut);break}s&&mt&&Wt.alternate===null&&a(B,mt),j=y(Wt,j,Ot),Kt===null?pt=Wt:Kt.sibling=Wt,Kt=Wt,mt=Ut}if(Ot===q.length)return l(B,mt),qt&&us(B,Ot),pt;if(mt===null){for(;Ot<q.length;Ot++)mt=nt(B,q[Ot],et),mt!==null&&(j=y(mt,j,Ot),Kt===null?pt=mt:Kt.sibling=mt,Kt=mt);return qt&&us(B,Ot),pt}for(mt=h(mt);Ot<q.length;Ot++)Ut=Q(mt,B,Ot,q[Ot],et),Ut!==null&&(s&&Ut.alternate!==null&&mt.delete(Ut.key===null?Ot:Ut.key),j=y(Ut,j,Ot),Kt===null?pt=Ut:Kt.sibling=Ut,Kt=Ut);return s&&mt.forEach(function(_r){return a(B,_r)}),qt&&us(B,Ot),pt}function bt(B,j,q,et){if(q==null)throw Error(i(151));for(var pt=null,Kt=null,mt=j,Ot=j=0,Ut=null,Wt=q.next();mt!==null&&!Wt.done;Ot++,Wt=q.next()){mt.index>Ot?(Ut=mt,mt=null):Ut=mt.sibling;var _r=Y(B,mt,Wt.value,et);if(_r===null){mt===null&&(mt=Ut);break}s&&mt&&_r.alternate===null&&a(B,mt),j=y(_r,j,Ot),Kt===null?pt=_r:Kt.sibling=_r,Kt=_r,mt=Ut}if(Wt.done)return l(B,mt),qt&&us(B,Ot),pt;if(mt===null){for(;!Wt.done;Ot++,Wt=q.next())Wt=nt(B,Wt.value,et),Wt!==null&&(j=y(Wt,j,Ot),Kt===null?pt=Wt:Kt.sibling=Wt,Kt=Wt);return qt&&us(B,Ot),pt}for(mt=h(mt);!Wt.done;Ot++,Wt=q.next())Wt=Q(mt,B,Ot,Wt.value,et),Wt!==null&&(s&&Wt.alternate!==null&&mt.delete(Wt.key===null?Ot:Wt.key),j=y(Wt,j,Ot),Kt===null?pt=Wt:Kt.sibling=Wt,Kt=Wt);return s&&mt.forEach(function(cC){return a(B,cC)}),qt&&us(B,Ot),pt}function ae(B,j,q,et){if(typeof q=="object"&&q!==null&&q.type===A&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case S:t:{for(var pt=q.key;j!==null;){if(j.key===pt){if(pt=q.type,pt===A){if(j.tag===7){l(B,j.sibling),et=m(j,q.props.children),et.return=B,B=et;break t}}else if(j.elementType===pt||typeof pt=="object"&&pt!==null&&pt.$$typeof===R&&Ta(pt)===j.type){l(B,j.sibling),et=m(j,q.props),Ql(et,q),et.return=B,B=et;break t}l(B,j);break}else a(B,j);j=j.sibling}q.type===A?(et=pa(q.props.children,B.mode,et,q.key),et.return=B,B=et):(et=uh(q.type,q.key,q.props,null,B.mode,et),Ql(et,q),et.return=B,B=et)}return T(B);case w:t:{for(pt=q.key;j!==null;){if(j.key===pt)if(j.tag===4&&j.stateNode.containerInfo===q.containerInfo&&j.stateNode.implementation===q.implementation){l(B,j.sibling),et=m(j,q.children||[]),et.return=B,B=et;break t}else{l(B,j);break}else a(B,j);j=j.sibling}et=dg(q,B.mode,et),et.return=B,B=et}return T(B);case R:return q=Ta(q),ae(B,j,q,et)}if(At(q))return gt(B,j,q,et);if(z(q)){if(pt=z(q),typeof pt!="function")throw Error(i(150));return q=pt.call(q),bt(B,j,q,et)}if(typeof q.then=="function")return ae(B,j,yh(q),et);if(q.$$typeof===W)return ae(B,j,dh(B,q),et);_h(B,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,j!==null&&j.tag===6?(l(B,j.sibling),et=m(j,q),et.return=B,B=et):(l(B,j),et=fg(q,B.mode,et),et.return=B,B=et),T(B)):l(B,j)}return function(B,j,q,et){try{Xl=0;var pt=ae(B,j,q,et);return Co=null,pt}catch(mt){if(mt===Ro||mt===mh)throw mt;var Kt=Vn(29,mt,null,B.mode);return Kt.lanes=et,Kt.return=B,Kt}finally{}}}var Sa=f0(!0),d0=f0(!1),er=!1;function Ag(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function wg(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function nr(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function ir(s,a,l){var h=s.updateQueue;if(h===null)return null;if(h=h.shared,($t&2)!==0){var m=h.pending;return m===null?a.next=a:(a.next=m.next,m.next=a),h.pending=a,a=ch(s),Q_(s,null,l),a}return lh(s,h,a,l),ch(s)}function $l(s,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var h=a.lanes;h&=s.pendingLanes,l|=h,a.lanes=l,xl(s,l)}}function Rg(s,a){var l=s.updateQueue,h=s.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var m=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var T={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};y===null?m=y=T:y=y.next=T,l=l.next}while(l!==null);y===null?m=y=a:y=y.next=a}else m=y=a;l={baseState:h.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:h.shared,callbacks:h.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=a:s.next=a,l.lastBaseUpdate=a}var Cg=!1;function Jl(){if(Cg){var s=wo;if(s!==null)throw s}}function Zl(s,a,l,h){Cg=!1;var m=s.updateQueue;er=!1;var y=m.firstBaseUpdate,T=m.lastBaseUpdate,x=m.shared.pending;if(x!==null){m.shared.pending=null;var V=x,G=V.next;V.next=null,T===null?y=G:T.next=G,T=V;var Z=s.alternate;Z!==null&&(Z=Z.updateQueue,x=Z.lastBaseUpdate,x!==T&&(x===null?Z.firstBaseUpdate=G:x.next=G,Z.lastBaseUpdate=V))}if(y!==null){var nt=m.baseState;T=0,Z=G=V=null,x=y;do{var Y=x.lane&-536870913,Q=Y!==x.lane;if(Q?(zt&Y)===Y:(h&Y)===Y){Y!==0&&Y===Ao&&(Cg=!0),Z!==null&&(Z=Z.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});t:{var gt=s,bt=x;Y=a;var ae=l;switch(bt.tag){case 1:if(gt=bt.payload,typeof gt=="function"){nt=gt.call(ae,nt,Y);break t}nt=gt;break t;case 3:gt.flags=gt.flags&-65537|128;case 0:if(gt=bt.payload,Y=typeof gt=="function"?gt.call(ae,nt,Y):gt,Y==null)break t;nt=_({},nt,Y);break t;case 2:er=!0}}Y=x.callback,Y!==null&&(s.flags|=64,Q&&(s.flags|=8192),Q=m.callbacks,Q===null?m.callbacks=[Y]:Q.push(Y))}else Q={lane:Y,tag:x.tag,payload:x.payload,callback:x.callback,next:null},Z===null?(G=Z=Q,V=nt):Z=Z.next=Q,T|=Y;if(x=x.next,x===null){if(x=m.shared.pending,x===null)break;Q=x,x=Q.next,Q.next=null,m.lastBaseUpdate=Q,m.shared.pending=null}}while(!0);Z===null&&(V=nt),m.baseState=V,m.firstBaseUpdate=G,m.lastBaseUpdate=Z,y===null&&(m.shared.lanes=0),lr|=T,s.lanes=T,s.memoizedState=nt}}function g0(s,a){if(typeof s!="function")throw Error(i(191,s));s.call(a)}function m0(s,a){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)g0(l[s],a)}var Io=U(null),bh=U(0);function p0(s,a){s=Ts,lt(bh,s),lt(Io,a),Ts=s|a.baseLanes}function Ig(){lt(bh,Ts),lt(Io,Io.current)}function Dg(){Ts=bh.current,tt(Io),tt(bh)}var Ln=U(null),ei=null;function sr(s){var a=s.alternate;lt(Ae,Ae.current&1),lt(Ln,s),ei===null&&(a===null||Io.current!==null||a.memoizedState!==null)&&(ei=s)}function Mg(s){lt(Ae,Ae.current),lt(Ln,s),ei===null&&(ei=s)}function y0(s){s.tag===22?(lt(Ae,Ae.current),lt(Ln,s),ei===null&&(ei=s)):rr()}function rr(){lt(Ae,Ae.current),lt(Ln,Ln.current)}function zn(s){tt(Ln),ei===s&&(ei=null),tt(Ae)}var Ae=U(0);function vh(s){for(var a=s;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Lm(l)||zm(l)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var ds=0,Mt=null,se=null,Pe=null,Th=!1,Do=!1,xa=!1,Eh=0,tc=0,Mo=null,Zw=0;function ve(){throw Error(i(321))}function Og(s,a){if(a===null)return!1;for(var l=0;l<a.length&&l<s.length;l++)if(!Pn(s[l],a[l]))return!1;return!0}function kg(s,a,l,h,m,y){return ds=y,Mt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,K.H=s===null||s.memoizedState===null?tb:Wg,xa=!1,y=l(h,m),xa=!1,Do&&(y=b0(a,l,h,m)),_0(s),y}function _0(s){K.H=ic;var a=se!==null&&se.next!==null;if(ds=0,Pe=se=Mt=null,Th=!1,tc=0,Mo=null,a)throw Error(i(300));s===null||Ve||(s=s.dependencies,s!==null&&fh(s)&&(Ve=!0))}function b0(s,a,l,h){Mt=s;var m=0;do{if(Do&&(Mo=null),tc=0,Do=!1,25<=m)throw Error(i(301));if(m+=1,Pe=se=null,s.updateQueue!=null){var y=s.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}K.H=eb,y=a(l,h)}while(Do);return y}function tR(){var s=K.H,a=s.useState()[0];return a=typeof a.then=="function"?ec(a):a,s=s.useState()[0],(se!==null?se.memoizedState:null)!==s&&(Mt.flags|=1024),a}function Ng(){var s=Eh!==0;return Eh=0,s}function Pg(s,a,l){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~l}function Vg(s){if(Th){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Th=!1}ds=0,Pe=se=Mt=null,Do=!1,tc=Eh=0,Mo=null}function vn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pe===null?Mt.memoizedState=Pe=s:Pe=Pe.next=s,Pe}function we(){if(se===null){var s=Mt.alternate;s=s!==null?s.memoizedState:null}else s=se.next;var a=Pe===null?Mt.memoizedState:Pe.next;if(a!==null)Pe=a,se=s;else{if(s===null)throw Mt.alternate===null?Error(i(467)):Error(i(310));se=s,s={memoizedState:se.memoizedState,baseState:se.baseState,baseQueue:se.baseQueue,queue:se.queue,next:null},Pe===null?Mt.memoizedState=Pe=s:Pe=Pe.next=s}return Pe}function Sh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ec(s){var a=tc;return tc+=1,Mo===null&&(Mo=[]),s=c0(Mo,s,a),a=Mt,(Pe===null?a.memoizedState:Pe.next)===null&&(a=a.alternate,K.H=a===null||a.memoizedState===null?tb:Wg),s}function xh(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return ec(s);if(s.$$typeof===W)return nn(s)}throw Error(i(438,String(s)))}function Lg(s){var a=null,l=Mt.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var h=Mt.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(a={data:h.data.map(function(m){return m.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=Sh(),Mt.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(s),h=0;h<s;h++)l[h]=P;return a.index++,l}function gs(s,a){return typeof a=="function"?a(s):a}function Ah(s){var a=we();return zg(a,se,s)}function zg(s,a,l){var h=s.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=l;var m=s.baseQueue,y=h.pending;if(y!==null){if(m!==null){var T=m.next;m.next=y.next,y.next=T}a.baseQueue=m=y,h.pending=null}if(y=s.baseState,m===null)s.memoizedState=y;else{a=m.next;var x=T=null,V=null,G=a,Z=!1;do{var nt=G.lane&-536870913;if(nt!==G.lane?(zt&nt)===nt:(ds&nt)===nt){var Y=G.revertLane;if(Y===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),nt===Ao&&(Z=!0);else if((ds&Y)===Y){G=G.next,Y===Ao&&(Z=!0);continue}else nt={lane:0,revertLane:G.revertLane,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},V===null?(x=V=nt,T=y):V=V.next=nt,Mt.lanes|=Y,lr|=Y;nt=G.action,xa&&l(y,nt),y=G.hasEagerState?G.eagerState:l(y,nt)}else Y={lane:nt,revertLane:G.revertLane,gesture:G.gesture,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},V===null?(x=V=Y,T=y):V=V.next=Y,Mt.lanes|=nt,lr|=nt;G=G.next}while(G!==null&&G!==a);if(V===null?T=y:V.next=x,!Pn(y,s.memoizedState)&&(Ve=!0,Z&&(l=wo,l!==null)))throw l;s.memoizedState=y,s.baseState=T,s.baseQueue=V,h.lastRenderedState=y}return m===null&&(h.lanes=0),[s.memoizedState,h.dispatch]}function Ug(s){var a=we(),l=a.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var h=l.dispatch,m=l.pending,y=a.memoizedState;if(m!==null){l.pending=null;var T=m=m.next;do y=s(y,T.action),T=T.next;while(T!==m);Pn(y,a.memoizedState)||(Ve=!0),a.memoizedState=y,a.baseQueue===null&&(a.baseState=y),l.lastRenderedState=y}return[y,h]}function v0(s,a,l){var h=Mt,m=we(),y=qt;if(y){if(l===void 0)throw Error(i(407));l=l()}else l=a();var T=!Pn((se||m).memoizedState,l);if(T&&(m.memoizedState=l,Ve=!0),m=m.queue,Fg(S0.bind(null,h,m,s),[s]),m.getSnapshot!==a||T||Pe!==null&&Pe.memoizedState.tag&1){if(h.flags|=2048,Oo(9,{destroy:void 0},E0.bind(null,h,m,l,a),null),oe===null)throw Error(i(349));y||(ds&127)!==0||T0(h,a,l)}return l}function T0(s,a,l){s.flags|=16384,s={getSnapshot:a,value:l},a=Mt.updateQueue,a===null?(a=Sh(),Mt.updateQueue=a,a.stores=[s]):(l=a.stores,l===null?a.stores=[s]:l.push(s))}function E0(s,a,l,h){a.value=l,a.getSnapshot=h,x0(a)&&A0(s)}function S0(s,a,l){return l(function(){x0(a)&&A0(s)})}function x0(s){var a=s.getSnapshot;s=s.value;try{var l=a();return!Pn(s,l)}catch{return!0}}function A0(s){var a=ma(s,2);a!==null&&Rn(a,s,2)}function jg(s){var a=vn();if(typeof s=="function"){var l=s;if(s=l(),xa){Gn(!0);try{l()}finally{Gn(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gs,lastRenderedState:s},a}function w0(s,a,l,h){return s.baseState=l,zg(s,se,typeof h=="function"?h:gs)}function eR(s,a,l,h,m){if(Ch(s))throw Error(i(485));if(s=a.action,s!==null){var y={payload:m,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){y.listeners.push(T)}};K.T!==null?l(!0):y.isTransition=!1,h(y),l=a.pending,l===null?(y.next=a.pending=y,R0(a,y)):(y.next=l.next,a.pending=l.next=y)}}function R0(s,a){var l=a.action,h=a.payload,m=s.state;if(a.isTransition){var y=K.T,T={};K.T=T;try{var x=l(m,h),V=K.S;V!==null&&V(T,x),C0(s,a,x)}catch(G){Bg(s,a,G)}finally{y!==null&&T.types!==null&&(y.types=T.types),K.T=y}}else try{y=l(m,h),C0(s,a,y)}catch(G){Bg(s,a,G)}}function C0(s,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(h){I0(s,a,h)},function(h){return Bg(s,a,h)}):I0(s,a,l)}function I0(s,a,l){a.status="fulfilled",a.value=l,D0(a),s.state=l,a=s.pending,a!==null&&(l=a.next,l===a?s.pending=null:(l=l.next,a.next=l,R0(s,l)))}function Bg(s,a,l){var h=s.pending;if(s.pending=null,h!==null){h=h.next;do a.status="rejected",a.reason=l,D0(a),a=a.next;while(a!==h)}s.action=null}function D0(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function M0(s,a){return a}function O0(s,a){if(qt){var l=oe.formState;if(l!==null){t:{var h=Mt;if(qt){if(ue){e:{for(var m=ue,y=ti;m.nodeType!==8;){if(!y){m=null;break e}if(m=ni(m.nextSibling),m===null){m=null;break e}}y=m.data,m=y==="F!"||y==="F"?m:null}if(m){ue=ni(m.nextSibling),h=m.data==="F!";break t}}Zs(h)}h=!1}h&&(a=l[0])}}return l=vn(),l.memoizedState=l.baseState=a,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:M0,lastRenderedState:a},l.queue=h,l=$0.bind(null,Mt,h),h.dispatch=l,h=jg(!1),y=Kg.bind(null,Mt,!1,h.queue),h=vn(),m={state:a,dispatch:null,action:s,pending:null},h.queue=m,l=eR.bind(null,Mt,m,y,l),m.dispatch=l,h.memoizedState=s,[a,l,!1]}function k0(s){var a=we();return N0(a,se,s)}function N0(s,a,l){if(a=zg(s,a,M0)[0],s=Ah(gs)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var h=ec(a)}catch(T){throw T===Ro?mh:T}else h=a;a=we();var m=a.queue,y=m.dispatch;return l!==a.memoizedState&&(Mt.flags|=2048,Oo(9,{destroy:void 0},nR.bind(null,m,l),null)),[h,y,s]}function nR(s,a){s.action=a}function P0(s){var a=we(),l=se;if(l!==null)return N0(a,l,s);we(),a=a.memoizedState,l=we();var h=l.queue.dispatch;return l.memoizedState=s,[a,h,!1]}function Oo(s,a,l,h){return s={tag:s,create:l,deps:h,inst:a,next:null},a=Mt.updateQueue,a===null&&(a=Sh(),Mt.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=s.next=s:(h=l.next,l.next=s,s.next=h,a.lastEffect=s),s}function V0(){return we().memoizedState}function wh(s,a,l,h){var m=vn();Mt.flags|=s,m.memoizedState=Oo(1|a,{destroy:void 0},l,h===void 0?null:h)}function Rh(s,a,l,h){var m=we();h=h===void 0?null:h;var y=m.memoizedState.inst;se!==null&&h!==null&&Og(h,se.memoizedState.deps)?m.memoizedState=Oo(a,y,l,h):(Mt.flags|=s,m.memoizedState=Oo(1|a,y,l,h))}function L0(s,a){wh(8390656,8,s,a)}function Fg(s,a){Rh(2048,8,s,a)}function iR(s){Mt.flags|=4;var a=Mt.updateQueue;if(a===null)a=Sh(),Mt.updateQueue=a,a.events=[s];else{var l=a.events;l===null?a.events=[s]:l.push(s)}}function z0(s){var a=we().memoizedState;return iR({ref:a,nextImpl:s}),function(){if(($t&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function U0(s,a){return Rh(4,2,s,a)}function j0(s,a){return Rh(4,4,s,a)}function B0(s,a){if(typeof a=="function"){s=s();var l=a(s);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function F0(s,a,l){l=l!=null?l.concat([s]):null,Rh(4,4,B0.bind(null,a,s),l)}function Hg(){}function H0(s,a){var l=we();a=a===void 0?null:a;var h=l.memoizedState;return a!==null&&Og(a,h[1])?h[0]:(l.memoizedState=[s,a],s)}function q0(s,a){var l=we();a=a===void 0?null:a;var h=l.memoizedState;if(a!==null&&Og(a,h[1]))return h[0];if(h=s(),xa){Gn(!0);try{s()}finally{Gn(!1)}}return l.memoizedState=[h,a],h}function qg(s,a,l){return l===void 0||(ds&1073741824)!==0&&(zt&261930)===0?s.memoizedState=a:(s.memoizedState=l,s=Gb(),Mt.lanes|=s,lr|=s,l)}function G0(s,a,l,h){return Pn(l,a)?l:Io.current!==null?(s=qg(s,l,h),Pn(s,a)||(Ve=!0),s):(ds&42)===0||(ds&1073741824)!==0&&(zt&261930)===0?(Ve=!0,s.memoizedState=l):(s=Gb(),Mt.lanes|=s,lr|=s,a)}function Y0(s,a,l,h,m){var y=at.p;at.p=y!==0&&8>y?y:8;var T=K.T,x={};K.T=x,Kg(s,!1,a,l);try{var V=m(),G=K.S;if(G!==null&&G(x,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var Z=Jw(V,h);nc(s,a,Z,Bn(s))}else nc(s,a,h,Bn(s))}catch(nt){nc(s,a,{then:function(){},status:"rejected",reason:nt},Bn())}finally{at.p=y,T!==null&&x.types!==null&&(T.types=x.types),K.T=T}}function sR(){}function Gg(s,a,l,h){if(s.tag!==5)throw Error(i(476));var m=K0(s).queue;Y0(s,m,a,dt,l===null?sR:function(){return W0(s),l(h)})}function K0(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:dt,baseState:dt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gs,lastRenderedState:dt},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gs,lastRenderedState:l},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function W0(s){var a=K0(s);a.next===null&&(a=s.alternate.memoizedState),nc(s,a.next.queue,{},Bn())}function Yg(){return nn(bc)}function X0(){return we().memoizedState}function Q0(){return we().memoizedState}function rR(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var l=Bn();s=nr(l);var h=ir(a,s,l);h!==null&&(Rn(h,a,l),$l(h,a,l)),a={cache:Tg()},s.payload=a;return}a=a.return}}function aR(s,a,l){var h=Bn();l={lane:h,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Ch(s)?J0(a,l):(l=ug(s,a,l,h),l!==null&&(Rn(l,s,h),Z0(l,a,h)))}function $0(s,a,l){var h=Bn();nc(s,a,l,h)}function nc(s,a,l,h){var m={lane:h,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Ch(s))J0(a,m);else{var y=s.alternate;if(s.lanes===0&&(y===null||y.lanes===0)&&(y=a.lastRenderedReducer,y!==null))try{var T=a.lastRenderedState,x=y(T,l);if(m.hasEagerState=!0,m.eagerState=x,Pn(x,T))return lh(s,a,m,0),oe===null&&oh(),!1}catch{}finally{}if(l=ug(s,a,m,h),l!==null)return Rn(l,s,h),Z0(l,a,h),!0}return!1}function Kg(s,a,l,h){if(h={lane:2,revertLane:Am(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Ch(s)){if(a)throw Error(i(479))}else a=ug(s,l,h,2),a!==null&&Rn(a,s,2)}function Ch(s){var a=s.alternate;return s===Mt||a!==null&&a===Mt}function J0(s,a){Do=Th=!0;var l=s.pending;l===null?a.next=a:(a.next=l.next,l.next=a),s.pending=a}function Z0(s,a,l){if((l&4194048)!==0){var h=a.lanes;h&=s.pendingLanes,l|=h,a.lanes=l,xl(s,l)}}var ic={readContext:nn,use:xh,useCallback:ve,useContext:ve,useEffect:ve,useImperativeHandle:ve,useLayoutEffect:ve,useInsertionEffect:ve,useMemo:ve,useReducer:ve,useRef:ve,useState:ve,useDebugValue:ve,useDeferredValue:ve,useTransition:ve,useSyncExternalStore:ve,useId:ve,useHostTransitionStatus:ve,useFormState:ve,useActionState:ve,useOptimistic:ve,useMemoCache:ve,useCacheRefresh:ve};ic.useEffectEvent=ve;var tb={readContext:nn,use:xh,useCallback:function(s,a){return vn().memoizedState=[s,a===void 0?null:a],s},useContext:nn,useEffect:L0,useImperativeHandle:function(s,a,l){l=l!=null?l.concat([s]):null,wh(4194308,4,B0.bind(null,a,s),l)},useLayoutEffect:function(s,a){return wh(4194308,4,s,a)},useInsertionEffect:function(s,a){wh(4,2,s,a)},useMemo:function(s,a){var l=vn();a=a===void 0?null:a;var h=s();if(xa){Gn(!0);try{s()}finally{Gn(!1)}}return l.memoizedState=[h,a],h},useReducer:function(s,a,l){var h=vn();if(l!==void 0){var m=l(a);if(xa){Gn(!0);try{l(a)}finally{Gn(!1)}}}else m=a;return h.memoizedState=h.baseState=m,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:m},h.queue=s,s=s.dispatch=aR.bind(null,Mt,s),[h.memoizedState,s]},useRef:function(s){var a=vn();return s={current:s},a.memoizedState=s},useState:function(s){s=jg(s);var a=s.queue,l=$0.bind(null,Mt,a);return a.dispatch=l,[s.memoizedState,l]},useDebugValue:Hg,useDeferredValue:function(s,a){var l=vn();return qg(l,s,a)},useTransition:function(){var s=jg(!1);return s=Y0.bind(null,Mt,s.queue,!0,!1),vn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,l){var h=Mt,m=vn();if(qt){if(l===void 0)throw Error(i(407));l=l()}else{if(l=a(),oe===null)throw Error(i(349));(zt&127)!==0||T0(h,a,l)}m.memoizedState=l;var y={value:l,getSnapshot:a};return m.queue=y,L0(S0.bind(null,h,y,s),[s]),h.flags|=2048,Oo(9,{destroy:void 0},E0.bind(null,h,y,l,a),null),l},useId:function(){var s=vn(),a=oe.identifierPrefix;if(qt){var l=Yi,h=Gi;l=(h&~(1<<32-Se(h)-1)).toString(32)+l,a="_"+a+"R_"+l,l=Eh++,0<l&&(a+="H"+l.toString(32)),a+="_"}else l=Zw++,a="_"+a+"r_"+l.toString(32)+"_";return s.memoizedState=a},useHostTransitionStatus:Yg,useFormState:O0,useActionState:O0,useOptimistic:function(s){var a=vn();a.memoizedState=a.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=Kg.bind(null,Mt,!0,l),l.dispatch=a,[s,a]},useMemoCache:Lg,useCacheRefresh:function(){return vn().memoizedState=rR.bind(null,Mt)},useEffectEvent:function(s){var a=vn(),l={impl:s};return a.memoizedState=l,function(){if(($t&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},Wg={readContext:nn,use:xh,useCallback:H0,useContext:nn,useEffect:Fg,useImperativeHandle:F0,useInsertionEffect:U0,useLayoutEffect:j0,useMemo:q0,useReducer:Ah,useRef:V0,useState:function(){return Ah(gs)},useDebugValue:Hg,useDeferredValue:function(s,a){var l=we();return G0(l,se.memoizedState,s,a)},useTransition:function(){var s=Ah(gs)[0],a=we().memoizedState;return[typeof s=="boolean"?s:ec(s),a]},useSyncExternalStore:v0,useId:X0,useHostTransitionStatus:Yg,useFormState:k0,useActionState:k0,useOptimistic:function(s,a){var l=we();return w0(l,se,s,a)},useMemoCache:Lg,useCacheRefresh:Q0};Wg.useEffectEvent=z0;var eb={readContext:nn,use:xh,useCallback:H0,useContext:nn,useEffect:Fg,useImperativeHandle:F0,useInsertionEffect:U0,useLayoutEffect:j0,useMemo:q0,useReducer:Ug,useRef:V0,useState:function(){return Ug(gs)},useDebugValue:Hg,useDeferredValue:function(s,a){var l=we();return se===null?qg(l,s,a):G0(l,se.memoizedState,s,a)},useTransition:function(){var s=Ug(gs)[0],a=we().memoizedState;return[typeof s=="boolean"?s:ec(s),a]},useSyncExternalStore:v0,useId:X0,useHostTransitionStatus:Yg,useFormState:P0,useActionState:P0,useOptimistic:function(s,a){var l=we();return se!==null?w0(l,se,s,a):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:Lg,useCacheRefresh:Q0};eb.useEffectEvent=z0;function Xg(s,a,l,h){a=s.memoizedState,l=l(h,a),l=l==null?a:_({},a,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var Qg={enqueueSetState:function(s,a,l){s=s._reactInternals;var h=Bn(),m=nr(h);m.payload=a,l!=null&&(m.callback=l),a=ir(s,m,h),a!==null&&(Rn(a,s,h),$l(a,s,h))},enqueueReplaceState:function(s,a,l){s=s._reactInternals;var h=Bn(),m=nr(h);m.tag=1,m.payload=a,l!=null&&(m.callback=l),a=ir(s,m,h),a!==null&&(Rn(a,s,h),$l(a,s,h))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var l=Bn(),h=nr(l);h.tag=2,a!=null&&(h.callback=a),a=ir(s,h,l),a!==null&&(Rn(a,s,l),$l(a,s,l))}};function nb(s,a,l,h,m,y,T){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(h,y,T):a.prototype&&a.prototype.isPureReactComponent?!Hl(l,h)||!Hl(m,y):!0}function ib(s,a,l,h){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,h),a.state!==s&&Qg.enqueueReplaceState(a,a.state,null)}function Aa(s,a){var l=a;if("ref"in a){l={};for(var h in a)h!=="ref"&&(l[h]=a[h])}if(s=s.defaultProps){l===a&&(l=_({},l));for(var m in s)l[m]===void 0&&(l[m]=s[m])}return l}function sb(s){ah(s)}function rb(s){console.error(s)}function ab(s){ah(s)}function Ih(s,a){try{var l=s.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(h){setTimeout(function(){throw h})}}function ob(s,a,l){try{var h=s.onCaughtError;h(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function $g(s,a,l){return l=nr(l),l.tag=3,l.payload={element:null},l.callback=function(){Ih(s,a)},l}function lb(s){return s=nr(s),s.tag=3,s}function cb(s,a,l,h){var m=l.type.getDerivedStateFromError;if(typeof m=="function"){var y=h.value;s.payload=function(){return m(y)},s.callback=function(){ob(a,l,h)}}var T=l.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(s.callback=function(){ob(a,l,h),typeof m!="function"&&(cr===null?cr=new Set([this]):cr.add(this));var x=h.stack;this.componentDidCatch(h.value,{componentStack:x!==null?x:""})})}function oR(s,a,l,h,m){if(l.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(a=l.alternate,a!==null&&xo(a,l,m,!0),l=Ln.current,l!==null){switch(l.tag){case 31:case 13:return ei===null?Bh():l.alternate===null&&Te===0&&(Te=3),l.flags&=-257,l.flags|=65536,l.lanes=m,h===ph?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([h]):a.add(h),Em(s,h,m)),!1;case 22:return l.flags|=65536,h===ph?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([h])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([h]):l.add(h)),Em(s,h,m)),!1}throw Error(i(435,l.tag))}return Em(s,h,m),Bh(),!1}if(qt)return a=Ln.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=m,h!==pg&&(s=Error(i(422),{cause:h}),Yl($n(s,l)))):(h!==pg&&(a=Error(i(423),{cause:h}),Yl($n(a,l))),s=s.current.alternate,s.flags|=65536,m&=-m,s.lanes|=m,h=$n(h,l),m=$g(s.stateNode,h,m),Rg(s,m),Te!==4&&(Te=2)),!1;var y=Error(i(520),{cause:h});if(y=$n(y,l),hc===null?hc=[y]:hc.push(y),Te!==4&&(Te=2),a===null)return!0;h=$n(h,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,s=m&-m,l.lanes|=s,s=$g(l.stateNode,h,s),Rg(l,s),!1;case 1:if(a=l.type,y=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(cr===null||!cr.has(y))))return l.flags|=65536,m&=-m,l.lanes|=m,m=lb(m),cb(m,s,l,h),Rg(l,m),!1}l=l.return}while(l!==null);return!1}var Jg=Error(i(461)),Ve=!1;function sn(s,a,l,h){a.child=s===null?d0(a,null,l,h):Sa(a,s.child,l,h)}function ub(s,a,l,h,m){l=l.render;var y=a.ref;if("ref"in h){var T={};for(var x in h)x!=="ref"&&(T[x]=h[x])}else T=h;return ba(a),h=kg(s,a,l,T,y,m),x=Ng(),s!==null&&!Ve?(Pg(s,a,m),ms(s,a,m)):(qt&&x&&gg(a),a.flags|=1,sn(s,a,h,m),a.child)}function hb(s,a,l,h,m){if(s===null){var y=l.type;return typeof y=="function"&&!hg(y)&&y.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=y,fb(s,a,y,h,m)):(s=uh(l.type,null,h,a,a.mode,m),s.ref=a.ref,s.return=a,a.child=s)}if(y=s.child,!am(s,m)){var T=y.memoizedProps;if(l=l.compare,l=l!==null?l:Hl,l(T,h)&&s.ref===a.ref)return ms(s,a,m)}return a.flags|=1,s=cs(y,h),s.ref=a.ref,s.return=a,a.child=s}function fb(s,a,l,h,m){if(s!==null){var y=s.memoizedProps;if(Hl(y,h)&&s.ref===a.ref)if(Ve=!1,a.pendingProps=h=y,am(s,m))(s.flags&131072)!==0&&(Ve=!0);else return a.lanes=s.lanes,ms(s,a,m)}return Zg(s,a,l,h,m)}function db(s,a,l,h){var m=h.children,y=s!==null?s.memoizedState:null;if(s===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((a.flags&128)!==0){if(y=y!==null?y.baseLanes|l:l,s!==null){for(h=a.child=s.child,m=0;h!==null;)m=m|h.lanes|h.childLanes,h=h.sibling;h=m&~y}else h=0,a.child=null;return gb(s,a,y,l,h)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&gh(a,y!==null?y.cachePool:null),y!==null?p0(a,y):Ig(),y0(a);else return h=a.lanes=536870912,gb(s,a,y!==null?y.baseLanes|l:l,l,h)}else y!==null?(gh(a,y.cachePool),p0(a,y),rr(),a.memoizedState=null):(s!==null&&gh(a,null),Ig(),rr());return sn(s,a,m,l),a.child}function sc(s,a){return s!==null&&s.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function gb(s,a,l,h,m){var y=Sg();return y=y===null?null:{parent:Ne._currentValue,pool:y},a.memoizedState={baseLanes:l,cachePool:y},s!==null&&gh(a,null),Ig(),y0(a),s!==null&&xo(s,a,h,!0),a.childLanes=m,null}function Dh(s,a){return a=Oh({mode:a.mode,children:a.children},s.mode),a.ref=s.ref,s.child=a,a.return=s,a}function mb(s,a,l){return Sa(a,s.child,null,l),s=Dh(a,a.pendingProps),s.flags|=2,zn(a),a.memoizedState=null,s}function lR(s,a,l){var h=a.pendingProps,m=(a.flags&128)!==0;if(a.flags&=-129,s===null){if(qt){if(h.mode==="hidden")return s=Dh(a,h),a.lanes=536870912,sc(null,s);if(Mg(a),(s=ue)?(s=Rv(s,ti),s=s!==null&&s.data==="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:$s!==null?{id:Gi,overflow:Yi}:null,retryLane:536870912,hydrationErrors:null},l=J_(s),l.return=a,a.child=l,en=a,ue=null)):s=null,s===null)throw Zs(a);return a.lanes=536870912,null}return Dh(a,h)}var y=s.memoizedState;if(y!==null){var T=y.dehydrated;if(Mg(a),m)if(a.flags&256)a.flags&=-257,a=mb(s,a,l);else if(a.memoizedState!==null)a.child=s.child,a.flags|=128,a=null;else throw Error(i(558));else if(Ve||xo(s,a,l,!1),m=(l&s.childLanes)!==0,Ve||m){if(h=oe,h!==null&&(T=Al(h,l),T!==0&&T!==y.retryLane))throw y.retryLane=T,ma(s,T),Rn(h,s,T),Jg;Bh(),a=mb(s,a,l)}else s=y.treeContext,ue=ni(T.nextSibling),en=a,qt=!0,Js=null,ti=!1,s!==null&&e0(a,s),a=Dh(a,h),a.flags|=4096;return a}return s=cs(s.child,{mode:h.mode,children:h.children}),s.ref=a.ref,a.child=s,s.return=a,s}function Mh(s,a){var l=a.ref;if(l===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(s===null||s.ref!==l)&&(a.flags|=4194816)}}function Zg(s,a,l,h,m){return ba(a),l=kg(s,a,l,h,void 0,m),h=Ng(),s!==null&&!Ve?(Pg(s,a,m),ms(s,a,m)):(qt&&h&&gg(a),a.flags|=1,sn(s,a,l,m),a.child)}function pb(s,a,l,h,m,y){return ba(a),a.updateQueue=null,l=b0(a,h,l,m),_0(s),h=Ng(),s!==null&&!Ve?(Pg(s,a,y),ms(s,a,y)):(qt&&h&&gg(a),a.flags|=1,sn(s,a,l,y),a.child)}function yb(s,a,l,h,m){if(ba(a),a.stateNode===null){var y=vo,T=l.contextType;typeof T=="object"&&T!==null&&(y=nn(T)),y=new l(h,y),a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Qg,a.stateNode=y,y._reactInternals=a,y=a.stateNode,y.props=h,y.state=a.memoizedState,y.refs={},Ag(a),T=l.contextType,y.context=typeof T=="object"&&T!==null?nn(T):vo,y.state=a.memoizedState,T=l.getDerivedStateFromProps,typeof T=="function"&&(Xg(a,l,T,h),y.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(T=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),T!==y.state&&Qg.enqueueReplaceState(y,y.state,null),Zl(a,h,y,m),Jl(),y.state=a.memoizedState),typeof y.componentDidMount=="function"&&(a.flags|=4194308),h=!0}else if(s===null){y=a.stateNode;var x=a.memoizedProps,V=Aa(l,x);y.props=V;var G=y.context,Z=l.contextType;T=vo,typeof Z=="object"&&Z!==null&&(T=nn(Z));var nt=l.getDerivedStateFromProps;Z=typeof nt=="function"||typeof y.getSnapshotBeforeUpdate=="function",x=a.pendingProps!==x,Z||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(x||G!==T)&&ib(a,y,h,T),er=!1;var Y=a.memoizedState;y.state=Y,Zl(a,h,y,m),Jl(),G=a.memoizedState,x||Y!==G||er?(typeof nt=="function"&&(Xg(a,l,nt,h),G=a.memoizedState),(V=er||nb(a,l,V,h,Y,G,T))?(Z||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(a.flags|=4194308)):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=h,a.memoizedState=G),y.props=h,y.state=G,y.context=T,h=V):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),h=!1)}else{y=a.stateNode,wg(s,a),T=a.memoizedProps,Z=Aa(l,T),y.props=Z,nt=a.pendingProps,Y=y.context,G=l.contextType,V=vo,typeof G=="object"&&G!==null&&(V=nn(G)),x=l.getDerivedStateFromProps,(G=typeof x=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T!==nt||Y!==V)&&ib(a,y,h,V),er=!1,Y=a.memoizedState,y.state=Y,Zl(a,h,y,m),Jl();var Q=a.memoizedState;T!==nt||Y!==Q||er||s!==null&&s.dependencies!==null&&fh(s.dependencies)?(typeof x=="function"&&(Xg(a,l,x,h),Q=a.memoizedState),(Z=er||nb(a,l,Z,h,Y,Q,V)||s!==null&&s.dependencies!==null&&fh(s.dependencies))?(G||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(h,Q,V),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(h,Q,V)),typeof y.componentDidUpdate=="function"&&(a.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof y.componentDidUpdate!="function"||T===s.memoizedProps&&Y===s.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===s.memoizedProps&&Y===s.memoizedState||(a.flags|=1024),a.memoizedProps=h,a.memoizedState=Q),y.props=h,y.state=Q,y.context=V,h=Z):(typeof y.componentDidUpdate!="function"||T===s.memoizedProps&&Y===s.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===s.memoizedProps&&Y===s.memoizedState||(a.flags|=1024),h=!1)}return y=h,Mh(s,a),h=(a.flags&128)!==0,y||h?(y=a.stateNode,l=h&&typeof l.getDerivedStateFromError!="function"?null:y.render(),a.flags|=1,s!==null&&h?(a.child=Sa(a,s.child,null,m),a.child=Sa(a,null,l,m)):sn(s,a,l,m),a.memoizedState=y.state,s=a.child):s=ms(s,a,m),s}function _b(s,a,l,h){return ya(),a.flags|=256,sn(s,a,l,h),a.child}var tm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function em(s){return{baseLanes:s,cachePool:o0()}}function nm(s,a,l){return s=s!==null?s.childLanes&~l:0,a&&(s|=jn),s}function bb(s,a,l){var h=a.pendingProps,m=!1,y=(a.flags&128)!==0,T;if((T=y)||(T=s!==null&&s.memoizedState===null?!1:(Ae.current&2)!==0),T&&(m=!0,a.flags&=-129),T=(a.flags&32)!==0,a.flags&=-33,s===null){if(qt){if(m?sr(a):rr(),(s=ue)?(s=Rv(s,ti),s=s!==null&&s.data!=="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:$s!==null?{id:Gi,overflow:Yi}:null,retryLane:536870912,hydrationErrors:null},l=J_(s),l.return=a,a.child=l,en=a,ue=null)):s=null,s===null)throw Zs(a);return zm(s)?a.lanes=32:a.lanes=536870912,null}var x=h.children;return h=h.fallback,m?(rr(),m=a.mode,x=Oh({mode:"hidden",children:x},m),h=pa(h,m,l,null),x.return=a,h.return=a,x.sibling=h,a.child=x,h=a.child,h.memoizedState=em(l),h.childLanes=nm(s,T,l),a.memoizedState=tm,sc(null,h)):(sr(a),im(a,x))}var V=s.memoizedState;if(V!==null&&(x=V.dehydrated,x!==null)){if(y)a.flags&256?(sr(a),a.flags&=-257,a=sm(s,a,l)):a.memoizedState!==null?(rr(),a.child=s.child,a.flags|=128,a=null):(rr(),x=h.fallback,m=a.mode,h=Oh({mode:"visible",children:h.children},m),x=pa(x,m,l,null),x.flags|=2,h.return=a,x.return=a,h.sibling=x,a.child=h,Sa(a,s.child,null,l),h=a.child,h.memoizedState=em(l),h.childLanes=nm(s,T,l),a.memoizedState=tm,a=sc(null,h));else if(sr(a),zm(x)){if(T=x.nextSibling&&x.nextSibling.dataset,T)var G=T.dgst;T=G,h=Error(i(419)),h.stack="",h.digest=T,Yl({value:h,source:null,stack:null}),a=sm(s,a,l)}else if(Ve||xo(s,a,l,!1),T=(l&s.childLanes)!==0,Ve||T){if(T=oe,T!==null&&(h=Al(T,l),h!==0&&h!==V.retryLane))throw V.retryLane=h,ma(s,h),Rn(T,s,h),Jg;Lm(x)||Bh(),a=sm(s,a,l)}else Lm(x)?(a.flags|=192,a.child=s.child,a=null):(s=V.treeContext,ue=ni(x.nextSibling),en=a,qt=!0,Js=null,ti=!1,s!==null&&e0(a,s),a=im(a,h.children),a.flags|=4096);return a}return m?(rr(),x=h.fallback,m=a.mode,V=s.child,G=V.sibling,h=cs(V,{mode:"hidden",children:h.children}),h.subtreeFlags=V.subtreeFlags&65011712,G!==null?x=cs(G,x):(x=pa(x,m,l,null),x.flags|=2),x.return=a,h.return=a,h.sibling=x,a.child=h,sc(null,h),h=a.child,x=s.child.memoizedState,x===null?x=em(l):(m=x.cachePool,m!==null?(V=Ne._currentValue,m=m.parent!==V?{parent:V,pool:V}:m):m=o0(),x={baseLanes:x.baseLanes|l,cachePool:m}),h.memoizedState=x,h.childLanes=nm(s,T,l),a.memoizedState=tm,sc(s.child,h)):(sr(a),l=s.child,s=l.sibling,l=cs(l,{mode:"visible",children:h.children}),l.return=a,l.sibling=null,s!==null&&(T=a.deletions,T===null?(a.deletions=[s],a.flags|=16):T.push(s)),a.child=l,a.memoizedState=null,l)}function im(s,a){return a=Oh({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function Oh(s,a){return s=Vn(22,s,null,a),s.lanes=0,s}function sm(s,a,l){return Sa(a,s.child,null,l),s=im(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function vb(s,a,l){s.lanes|=a;var h=s.alternate;h!==null&&(h.lanes|=a),bg(s.return,a,l)}function rm(s,a,l,h,m,y){var T=s.memoizedState;T===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:m,treeForkCount:y}:(T.isBackwards=a,T.rendering=null,T.renderingStartTime=0,T.last=h,T.tail=l,T.tailMode=m,T.treeForkCount=y)}function Tb(s,a,l){var h=a.pendingProps,m=h.revealOrder,y=h.tail;h=h.children;var T=Ae.current,x=(T&2)!==0;if(x?(T=T&1|2,a.flags|=128):T&=1,lt(Ae,T),sn(s,a,h,l),h=qt?Gl:0,!x&&s!==null&&(s.flags&128)!==0)t:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&vb(s,l,a);else if(s.tag===19)vb(s,l,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break t;for(;s.sibling===null;){if(s.return===null||s.return===a)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(m){case"forwards":for(l=a.child,m=null;l!==null;)s=l.alternate,s!==null&&vh(s)===null&&(m=l),l=l.sibling;l=m,l===null?(m=a.child,a.child=null):(m=l.sibling,l.sibling=null),rm(a,!1,m,l,y,h);break;case"backwards":case"unstable_legacy-backwards":for(l=null,m=a.child,a.child=null;m!==null;){if(s=m.alternate,s!==null&&vh(s)===null){a.child=m;break}s=m.sibling,m.sibling=l,l=m,m=s}rm(a,!0,l,null,y,h);break;case"together":rm(a,!1,null,null,void 0,h);break;default:a.memoizedState=null}return a.child}function ms(s,a,l){if(s!==null&&(a.dependencies=s.dependencies),lr|=a.lanes,(l&a.childLanes)===0)if(s!==null){if(xo(s,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(i(153));if(a.child!==null){for(s=a.child,l=cs(s,s.pendingProps),a.child=l,l.return=a;s.sibling!==null;)s=s.sibling,l=l.sibling=cs(s,s.pendingProps),l.return=a;l.sibling=null}return a.child}function am(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&fh(s)))}function cR(s,a,l){switch(a.tag){case 3:He(a,a.stateNode.containerInfo),tr(a,Ne,s.memoizedState.cache),ya();break;case 27:case 5:$r(a);break;case 4:He(a,a.stateNode.containerInfo);break;case 10:tr(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Mg(a),null;break;case 13:var h=a.memoizedState;if(h!==null)return h.dehydrated!==null?(sr(a),a.flags|=128,null):(l&a.child.childLanes)!==0?bb(s,a,l):(sr(a),s=ms(s,a,l),s!==null?s.sibling:null);sr(a);break;case 19:var m=(s.flags&128)!==0;if(h=(l&a.childLanes)!==0,h||(xo(s,a,l,!1),h=(l&a.childLanes)!==0),m){if(h)return Tb(s,a,l);a.flags|=128}if(m=a.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),lt(Ae,Ae.current),h)break;return null;case 22:return a.lanes=0,db(s,a,l,a.pendingProps);case 24:tr(a,Ne,s.memoizedState.cache)}return ms(s,a,l)}function Eb(s,a,l){if(s!==null)if(s.memoizedProps!==a.pendingProps)Ve=!0;else{if(!am(s,l)&&(a.flags&128)===0)return Ve=!1,cR(s,a,l);Ve=(s.flags&131072)!==0}else Ve=!1,qt&&(a.flags&1048576)!==0&&t0(a,Gl,a.index);switch(a.lanes=0,a.tag){case 16:t:{var h=a.pendingProps;if(s=Ta(a.elementType),a.type=s,typeof s=="function")hg(s)?(h=Aa(s,h),a.tag=1,a=yb(null,a,s,h,l)):(a.tag=0,a=Zg(null,a,s,h,l));else{if(s!=null){var m=s.$$typeof;if(m===J){a.tag=11,a=ub(null,a,s,h,l);break t}else if(m===I){a.tag=14,a=hb(null,a,s,h,l);break t}}throw a=kt(s)||s,Error(i(306,a,""))}}return a;case 0:return Zg(s,a,a.type,a.pendingProps,l);case 1:return h=a.type,m=Aa(h,a.pendingProps),yb(s,a,h,m,l);case 3:t:{if(He(a,a.stateNode.containerInfo),s===null)throw Error(i(387));h=a.pendingProps;var y=a.memoizedState;m=y.element,wg(s,a),Zl(a,h,null,l);var T=a.memoizedState;if(h=T.cache,tr(a,Ne,h),h!==y.cache&&vg(a,[Ne],l,!0),Jl(),h=T.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:T.cache},a.updateQueue.baseState=y,a.memoizedState=y,a.flags&256){a=_b(s,a,h,l);break t}else if(h!==m){m=$n(Error(i(424)),a),Yl(m),a=_b(s,a,h,l);break t}else{switch(s=a.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(ue=ni(s.firstChild),en=a,qt=!0,Js=null,ti=!0,l=d0(a,null,h,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(ya(),h===m){a=ms(s,a,l);break t}sn(s,a,h,l)}a=a.child}return a;case 26:return Mh(s,a),s===null?(l=kv(a.type,null,a.pendingProps,null))?a.memoizedState=l:qt||(l=a.type,s=a.pendingProps,h=Wh(Et.current).createElement(l),h[Me]=a,h[We]=s,rn(h,l,s),Oe(h),a.stateNode=h):a.memoizedState=kv(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return $r(a),s===null&&qt&&(h=a.stateNode=Dv(a.type,a.pendingProps,Et.current),en=a,ti=!0,m=ue,dr(a.type)?(Um=m,ue=ni(h.firstChild)):ue=m),sn(s,a,a.pendingProps.children,l),Mh(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&qt&&((m=h=ue)&&(h=UR(h,a.type,a.pendingProps,ti),h!==null?(a.stateNode=h,en=a,ue=ni(h.firstChild),ti=!1,m=!0):m=!1),m||Zs(a)),$r(a),m=a.type,y=a.pendingProps,T=s!==null?s.memoizedProps:null,h=y.children,Nm(m,y)?h=null:T!==null&&Nm(m,T)&&(a.flags|=32),a.memoizedState!==null&&(m=kg(s,a,tR,null,null,l),bc._currentValue=m),Mh(s,a),sn(s,a,h,l),a.child;case 6:return s===null&&qt&&((s=l=ue)&&(l=jR(l,a.pendingProps,ti),l!==null?(a.stateNode=l,en=a,ue=null,s=!0):s=!1),s||Zs(a)),null;case 13:return bb(s,a,l);case 4:return He(a,a.stateNode.containerInfo),h=a.pendingProps,s===null?a.child=Sa(a,null,h,l):sn(s,a,h,l),a.child;case 11:return ub(s,a,a.type,a.pendingProps,l);case 7:return sn(s,a,a.pendingProps,l),a.child;case 8:return sn(s,a,a.pendingProps.children,l),a.child;case 12:return sn(s,a,a.pendingProps.children,l),a.child;case 10:return h=a.pendingProps,tr(a,a.type,h.value),sn(s,a,h.children,l),a.child;case 9:return m=a.type._context,h=a.pendingProps.children,ba(a),m=nn(m),h=h(m),a.flags|=1,sn(s,a,h,l),a.child;case 14:return hb(s,a,a.type,a.pendingProps,l);case 15:return fb(s,a,a.type,a.pendingProps,l);case 19:return Tb(s,a,l);case 31:return lR(s,a,l);case 22:return db(s,a,l,a.pendingProps);case 24:return ba(a),h=nn(Ne),s===null?(m=Sg(),m===null&&(m=oe,y=Tg(),m.pooledCache=y,y.refCount++,y!==null&&(m.pooledCacheLanes|=l),m=y),a.memoizedState={parent:h,cache:m},Ag(a),tr(a,Ne,m)):((s.lanes&l)!==0&&(wg(s,a),Zl(a,null,null,l),Jl()),m=s.memoizedState,y=a.memoizedState,m.parent!==h?(m={parent:h,cache:h},a.memoizedState=m,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=m),tr(a,Ne,h)):(h=y.cache,tr(a,Ne,h),h!==m.cache&&vg(a,[Ne],l,!0))),sn(s,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function ps(s){s.flags|=4}function om(s,a,l,h,m){if((a=(s.mode&32)!==0)&&(a=!1),a){if(s.flags|=16777216,(m&335544128)===m)if(s.stateNode.complete)s.flags|=8192;else if(Xb())s.flags|=8192;else throw Ea=ph,xg}else s.flags&=-16777217}function Sb(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!zv(a))if(Xb())s.flags|=8192;else throw Ea=ph,xg}function kh(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?Uu():536870912,s.lanes|=a,Vo|=a)}function rc(s,a){if(!qt)switch(s.tailMode){case"hidden":a=s.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:h.sibling=null}}function he(s){var a=s.alternate!==null&&s.alternate.child===s.child,l=0,h=0;if(a)for(var m=s.child;m!==null;)l|=m.lanes|m.childLanes,h|=m.subtreeFlags&65011712,h|=m.flags&65011712,m.return=s,m=m.sibling;else for(m=s.child;m!==null;)l|=m.lanes|m.childLanes,h|=m.subtreeFlags,h|=m.flags,m.return=s,m=m.sibling;return s.subtreeFlags|=h,s.childLanes=l,a}function uR(s,a,l){var h=a.pendingProps;switch(mg(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return he(a),null;case 1:return he(a),null;case 3:return l=a.stateNode,h=null,s!==null&&(h=s.memoizedState.cache),a.memoizedState.cache!==h&&(a.flags|=2048),fs(Ne),ge(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(So(a)?ps(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,yg())),he(a),null;case 26:var m=a.type,y=a.memoizedState;return s===null?(ps(a),y!==null?(he(a),Sb(a,y)):(he(a),om(a,m,null,h,l))):y?y!==s.memoizedState?(ps(a),he(a),Sb(a,y)):(he(a),a.flags&=-16777217):(s=s.memoizedProps,s!==h&&ps(a),he(a),om(a,m,s,h,l)),null;case 27:if(to(a),l=Et.current,m=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==h&&ps(a);else{if(!h){if(a.stateNode===null)throw Error(i(166));return he(a),null}s=ut.current,So(a)?n0(a):(s=Dv(m,h,l),a.stateNode=s,ps(a))}return he(a),null;case 5:if(to(a),m=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==h&&ps(a);else{if(!h){if(a.stateNode===null)throw Error(i(166));return he(a),null}if(y=ut.current,So(a))n0(a);else{var T=Wh(Et.current);switch(y){case 1:y=T.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:y=T.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":y=T.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":y=T.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":y=T.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof h.is=="string"?T.createElement("select",{is:h.is}):T.createElement("select"),h.multiple?y.multiple=!0:h.size&&(y.size=h.size);break;default:y=typeof h.is=="string"?T.createElement(m,{is:h.is}):T.createElement(m)}}y[Me]=a,y[We]=h;t:for(T=a.child;T!==null;){if(T.tag===5||T.tag===6)y.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===a)break t;for(;T.sibling===null;){if(T.return===null||T.return===a)break t;T=T.return}T.sibling.return=T.return,T=T.sibling}a.stateNode=y;t:switch(rn(y,m,h),m){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break t;case"img":h=!0;break t;default:h=!1}h&&ps(a)}}return he(a),om(a,a.type,s===null?null:s.memoizedProps,a.pendingProps,l),null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==h&&ps(a);else{if(typeof h!="string"&&a.stateNode===null)throw Error(i(166));if(s=Et.current,So(a)){if(s=a.stateNode,l=a.memoizedProps,h=null,m=en,m!==null)switch(m.tag){case 27:case 5:h=m.memoizedProps}s[Me]=a,s=!!(s.nodeValue===l||h!==null&&h.suppressHydrationWarning===!0||bv(s.nodeValue,l)),s||Zs(a,!0)}else s=Wh(s).createTextNode(h),s[Me]=a,a.stateNode=s}return he(a),null;case 31:if(l=a.memoizedState,s===null||s.memoizedState!==null){if(h=So(a),l!==null){if(s===null){if(!h)throw Error(i(318));if(s=a.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[Me]=a}else ya(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;he(a),s=!1}else l=yg(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=l),s=!0;if(!s)return a.flags&256?(zn(a),a):(zn(a),null);if((a.flags&128)!==0)throw Error(i(558))}return he(a),null;case 13:if(h=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(m=So(a),h!==null&&h.dehydrated!==null){if(s===null){if(!m)throw Error(i(318));if(m=a.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(i(317));m[Me]=a}else ya(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;he(a),m=!1}else m=yg(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=m),m=!0;if(!m)return a.flags&256?(zn(a),a):(zn(a),null)}return zn(a),(a.flags&128)!==0?(a.lanes=l,a):(l=h!==null,s=s!==null&&s.memoizedState!==null,l&&(h=a.child,m=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(m=h.alternate.memoizedState.cachePool.pool),y=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(y=h.memoizedState.cachePool.pool),y!==m&&(h.flags|=2048)),l!==s&&l&&(a.child.flags|=8192),kh(a,a.updateQueue),he(a),null);case 4:return ge(),s===null&&Im(a.stateNode.containerInfo),he(a),null;case 10:return fs(a.type),he(a),null;case 19:if(tt(Ae),h=a.memoizedState,h===null)return he(a),null;if(m=(a.flags&128)!==0,y=h.rendering,y===null)if(m)rc(h,!1);else{if(Te!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(y=vh(s),y!==null){for(a.flags|=128,rc(h,!1),s=y.updateQueue,a.updateQueue=s,kh(a,s),a.subtreeFlags=0,s=l,l=a.child;l!==null;)$_(l,s),l=l.sibling;return lt(Ae,Ae.current&1|2),qt&&us(a,h.treeForkCount),a.child}s=s.sibling}h.tail!==null&&_n()>zh&&(a.flags|=128,m=!0,rc(h,!1),a.lanes=4194304)}else{if(!m)if(s=vh(y),s!==null){if(a.flags|=128,m=!0,s=s.updateQueue,a.updateQueue=s,kh(a,s),rc(h,!0),h.tail===null&&h.tailMode==="hidden"&&!y.alternate&&!qt)return he(a),null}else 2*_n()-h.renderingStartTime>zh&&l!==536870912&&(a.flags|=128,m=!0,rc(h,!1),a.lanes=4194304);h.isBackwards?(y.sibling=a.child,a.child=y):(s=h.last,s!==null?s.sibling=y:a.child=y,h.last=y)}return h.tail!==null?(s=h.tail,h.rendering=s,h.tail=s.sibling,h.renderingStartTime=_n(),s.sibling=null,l=Ae.current,lt(Ae,m?l&1|2:l&1),qt&&us(a,h.treeForkCount),s):(he(a),null);case 22:case 23:return zn(a),Dg(),h=a.memoizedState!==null,s!==null?s.memoizedState!==null!==h&&(a.flags|=8192):h&&(a.flags|=8192),h?(l&536870912)!==0&&(a.flags&128)===0&&(he(a),a.subtreeFlags&6&&(a.flags|=8192)):he(a),l=a.updateQueue,l!==null&&kh(a,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),h=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),h!==l&&(a.flags|=2048),s!==null&&tt(va),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),fs(Ne),he(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function hR(s,a){switch(mg(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return fs(Ne),ge(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return to(a),null;case 31:if(a.memoizedState!==null){if(zn(a),a.alternate===null)throw Error(i(340));ya()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 13:if(zn(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(i(340));ya()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return tt(Ae),null;case 4:return ge(),null;case 10:return fs(a.type),null;case 22:case 23:return zn(a),Dg(),s!==null&&tt(va),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return fs(Ne),null;case 25:return null;default:return null}}function xb(s,a){switch(mg(a),a.tag){case 3:fs(Ne),ge();break;case 26:case 27:case 5:to(a);break;case 4:ge();break;case 31:a.memoizedState!==null&&zn(a);break;case 13:zn(a);break;case 19:tt(Ae);break;case 10:fs(a.type);break;case 22:case 23:zn(a),Dg(),s!==null&&tt(va);break;case 24:fs(Ne)}}function ac(s,a){try{var l=a.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var m=h.next;l=m;do{if((l.tag&s)===s){h=void 0;var y=l.create,T=l.inst;h=y(),T.destroy=h}l=l.next}while(l!==m)}}catch(x){ee(a,a.return,x)}}function ar(s,a,l){try{var h=a.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var y=m.next;h=y;do{if((h.tag&s)===s){var T=h.inst,x=T.destroy;if(x!==void 0){T.destroy=void 0,m=a;var V=l,G=x;try{G()}catch(Z){ee(m,V,Z)}}}h=h.next}while(h!==y)}}catch(Z){ee(a,a.return,Z)}}function Ab(s){var a=s.updateQueue;if(a!==null){var l=s.stateNode;try{m0(a,l)}catch(h){ee(s,s.return,h)}}}function wb(s,a,l){l.props=Aa(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(h){ee(s,a,h)}}function oc(s,a){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var h=s.stateNode;break;case 30:h=s.stateNode;break;default:h=s.stateNode}typeof l=="function"?s.refCleanup=l(h):l.current=h}}catch(m){ee(s,a,m)}}function Ki(s,a){var l=s.ref,h=s.refCleanup;if(l!==null)if(typeof h=="function")try{h()}catch(m){ee(s,a,m)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(m){ee(s,a,m)}else l.current=null}function Rb(s){var a=s.type,l=s.memoizedProps,h=s.stateNode;try{t:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&h.focus();break t;case"img":l.src?h.src=l.src:l.srcSet&&(h.srcset=l.srcSet)}}catch(m){ee(s,s.return,m)}}function lm(s,a,l){try{var h=s.stateNode;kR(h,s.type,l,a),h[We]=a}catch(m){ee(s,s.return,m)}}function Cb(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&dr(s.type)||s.tag===4}function cm(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||Cb(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&dr(s.type)||s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function um(s,a,l){var h=s.tag;if(h===5||h===6)s=s.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(s),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=hi));else if(h!==4&&(h===27&&dr(s.type)&&(l=s.stateNode,a=null),s=s.child,s!==null))for(um(s,a,l),s=s.sibling;s!==null;)um(s,a,l),s=s.sibling}function Nh(s,a,l){var h=s.tag;if(h===5||h===6)s=s.stateNode,a?l.insertBefore(s,a):l.appendChild(s);else if(h!==4&&(h===27&&dr(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(Nh(s,a,l),s=s.sibling;s!==null;)Nh(s,a,l),s=s.sibling}function Ib(s){var a=s.stateNode,l=s.memoizedProps;try{for(var h=s.type,m=a.attributes;m.length;)a.removeAttributeNode(m[0]);rn(a,h,l),a[Me]=s,a[We]=l}catch(y){ee(s,s.return,y)}}var ys=!1,Le=!1,hm=!1,Db=typeof WeakSet=="function"?WeakSet:Set,Qe=null;function fR(s,a){if(s=s.containerInfo,Om=ef,s=F_(s),sg(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else t:{l=(l=s.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var m=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break t}var T=0,x=-1,V=-1,G=0,Z=0,nt=s,Y=null;e:for(;;){for(var Q;nt!==l||m!==0&&nt.nodeType!==3||(x=T+m),nt!==y||h!==0&&nt.nodeType!==3||(V=T+h),nt.nodeType===3&&(T+=nt.nodeValue.length),(Q=nt.firstChild)!==null;)Y=nt,nt=Q;for(;;){if(nt===s)break e;if(Y===l&&++G===m&&(x=T),Y===y&&++Z===h&&(V=T),(Q=nt.nextSibling)!==null)break;nt=Y,Y=nt.parentNode}nt=Q}l=x===-1||V===-1?null:{start:x,end:V}}else l=null}l=l||{start:0,end:0}}else l=null;for(km={focusedElem:s,selectionRange:l},ef=!1,Qe=a;Qe!==null;)if(a=Qe,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,Qe=s;else for(;Qe!==null;){switch(a=Qe,y=a.alternate,s=a.flags,a.tag){case 0:if((s&4)!==0&&(s=a.updateQueue,s=s!==null?s.events:null,s!==null))for(l=0;l<s.length;l++)m=s[l],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&y!==null){s=void 0,l=a,m=y.memoizedProps,y=y.memoizedState,h=l.stateNode;try{var gt=Aa(l.type,m);s=h.getSnapshotBeforeUpdate(gt,y),h.__reactInternalSnapshotBeforeUpdate=s}catch(bt){ee(l,l.return,bt)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,l=s.nodeType,l===9)Vm(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Vm(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=a.sibling,s!==null){s.return=a.return,Qe=s;break}Qe=a.return}}function Mb(s,a,l){var h=l.flags;switch(l.tag){case 0:case 11:case 15:bs(s,l),h&4&&ac(5,l);break;case 1:if(bs(s,l),h&4)if(s=l.stateNode,a===null)try{s.componentDidMount()}catch(T){ee(l,l.return,T)}else{var m=Aa(l.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(m,a,s.__reactInternalSnapshotBeforeUpdate)}catch(T){ee(l,l.return,T)}}h&64&&Ab(l),h&512&&oc(l,l.return);break;case 3:if(bs(s,l),h&64&&(s=l.updateQueue,s!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{m0(s,a)}catch(T){ee(l,l.return,T)}}break;case 27:a===null&&h&4&&Ib(l);case 26:case 5:bs(s,l),a===null&&h&4&&Rb(l),h&512&&oc(l,l.return);break;case 12:bs(s,l);break;case 31:bs(s,l),h&4&&Nb(s,l);break;case 13:bs(s,l),h&4&&Pb(s,l),h&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=TR.bind(null,l),BR(s,l))));break;case 22:if(h=l.memoizedState!==null||ys,!h){a=a!==null&&a.memoizedState!==null||Le,m=ys;var y=Le;ys=h,(Le=a)&&!y?vs(s,l,(l.subtreeFlags&8772)!==0):bs(s,l),ys=m,Le=y}break;case 30:break;default:bs(s,l)}}function Ob(s){var a=s.alternate;a!==null&&(s.alternate=null,Ob(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&ro(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var pe=null,Sn=!1;function _s(s,a,l){for(l=l.child;l!==null;)kb(s,a,l),l=l.sibling}function kb(s,a,l){if(Ze&&typeof Ze.onCommitFiberUnmount=="function")try{Ze.onCommitFiberUnmount(oi,l)}catch{}switch(l.tag){case 26:Le||Ki(l,a),_s(s,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Le||Ki(l,a);var h=pe,m=Sn;dr(l.type)&&(pe=l.stateNode,Sn=!1),_s(s,a,l),pc(l.stateNode),pe=h,Sn=m;break;case 5:Le||Ki(l,a);case 6:if(h=pe,m=Sn,pe=null,_s(s,a,l),pe=h,Sn=m,pe!==null)if(Sn)try{(pe.nodeType===9?pe.body:pe.nodeName==="HTML"?pe.ownerDocument.body:pe).removeChild(l.stateNode)}catch(y){ee(l,a,y)}else try{pe.removeChild(l.stateNode)}catch(y){ee(l,a,y)}break;case 18:pe!==null&&(Sn?(s=pe,Av(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),qo(s)):Av(pe,l.stateNode));break;case 4:h=pe,m=Sn,pe=l.stateNode.containerInfo,Sn=!0,_s(s,a,l),pe=h,Sn=m;break;case 0:case 11:case 14:case 15:ar(2,l,a),Le||ar(4,l,a),_s(s,a,l);break;case 1:Le||(Ki(l,a),h=l.stateNode,typeof h.componentWillUnmount=="function"&&wb(l,a,h)),_s(s,a,l);break;case 21:_s(s,a,l);break;case 22:Le=(h=Le)||l.memoizedState!==null,_s(s,a,l),Le=h;break;default:_s(s,a,l)}}function Nb(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{qo(s)}catch(l){ee(a,a.return,l)}}}function Pb(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{qo(s)}catch(l){ee(a,a.return,l)}}function dR(s){switch(s.tag){case 31:case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new Db),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new Db),a;default:throw Error(i(435,s.tag))}}function Ph(s,a){var l=dR(s);a.forEach(function(h){if(!l.has(h)){l.add(h);var m=ER.bind(null,s,h);h.then(m,m)}})}function xn(s,a){var l=a.deletions;if(l!==null)for(var h=0;h<l.length;h++){var m=l[h],y=s,T=a,x=T;t:for(;x!==null;){switch(x.tag){case 27:if(dr(x.type)){pe=x.stateNode,Sn=!1;break t}break;case 5:pe=x.stateNode,Sn=!1;break t;case 3:case 4:pe=x.stateNode.containerInfo,Sn=!0;break t}x=x.return}if(pe===null)throw Error(i(160));kb(y,T,m),pe=null,Sn=!1,y=m.alternate,y!==null&&(y.return=null),m.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Vb(a,s),a=a.sibling}var yi=null;function Vb(s,a){var l=s.alternate,h=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:xn(a,s),An(s),h&4&&(ar(3,s,s.return),ac(3,s),ar(5,s,s.return));break;case 1:xn(a,s),An(s),h&512&&(Le||l===null||Ki(l,l.return)),h&64&&ys&&(s=s.updateQueue,s!==null&&(h=s.callbacks,h!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?h:l.concat(h))));break;case 26:var m=yi;if(xn(a,s),An(s),h&512&&(Le||l===null||Ki(l,l.return)),h&4){var y=l!==null?l.memoizedState:null;if(h=s.memoizedState,l===null)if(h===null)if(s.stateNode===null){t:{h=s.type,l=s.memoizedProps,m=m.ownerDocument||m;e:switch(h){case"title":y=m.getElementsByTagName("title")[0],(!y||y[ki]||y[Me]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=m.createElement(h),m.head.insertBefore(y,m.querySelector("head > title"))),rn(y,h,l),y[Me]=s,Oe(y),h=y;break t;case"link":var T=Vv("link","href",m).get(h+(l.href||""));if(T){for(var x=0;x<T.length;x++)if(y=T[x],y.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&y.getAttribute("rel")===(l.rel==null?null:l.rel)&&y.getAttribute("title")===(l.title==null?null:l.title)&&y.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){T.splice(x,1);break e}}y=m.createElement(h),rn(y,h,l),m.head.appendChild(y);break;case"meta":if(T=Vv("meta","content",m).get(h+(l.content||""))){for(x=0;x<T.length;x++)if(y=T[x],y.getAttribute("content")===(l.content==null?null:""+l.content)&&y.getAttribute("name")===(l.name==null?null:l.name)&&y.getAttribute("property")===(l.property==null?null:l.property)&&y.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&y.getAttribute("charset")===(l.charSet==null?null:l.charSet)){T.splice(x,1);break e}}y=m.createElement(h),rn(y,h,l),m.head.appendChild(y);break;default:throw Error(i(468,h))}y[Me]=s,Oe(y),h=y}s.stateNode=h}else Lv(m,s.type,s.stateNode);else s.stateNode=Pv(m,h,s.memoizedProps);else y!==h?(y===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):y.count--,h===null?Lv(m,s.type,s.stateNode):Pv(m,h,s.memoizedProps)):h===null&&s.stateNode!==null&&lm(s,s.memoizedProps,l.memoizedProps)}break;case 27:xn(a,s),An(s),h&512&&(Le||l===null||Ki(l,l.return)),l!==null&&h&4&&lm(s,s.memoizedProps,l.memoizedProps);break;case 5:if(xn(a,s),An(s),h&512&&(Le||l===null||Ki(l,l.return)),s.flags&32){m=s.stateNode;try{En(m,"")}catch(gt){ee(s,s.return,gt)}}h&4&&s.stateNode!=null&&(m=s.memoizedProps,lm(s,m,l!==null?l.memoizedProps:m)),h&1024&&(hm=!0);break;case 6:if(xn(a,s),An(s),h&4){if(s.stateNode===null)throw Error(i(162));h=s.memoizedProps,l=s.stateNode;try{l.nodeValue=h}catch(gt){ee(s,s.return,gt)}}break;case 3:if($h=null,m=yi,yi=Xh(a.containerInfo),xn(a,s),yi=m,An(s),h&4&&l!==null&&l.memoizedState.isDehydrated)try{qo(a.containerInfo)}catch(gt){ee(s,s.return,gt)}hm&&(hm=!1,Lb(s));break;case 4:h=yi,yi=Xh(s.stateNode.containerInfo),xn(a,s),An(s),yi=h;break;case 12:xn(a,s),An(s);break;case 31:xn(a,s),An(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,Ph(s,h)));break;case 13:xn(a,s),An(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Lh=_n()),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,Ph(s,h)));break;case 22:m=s.memoizedState!==null;var V=l!==null&&l.memoizedState!==null,G=ys,Z=Le;if(ys=G||m,Le=Z||V,xn(a,s),Le=Z,ys=G,An(s),h&8192)t:for(a=s.stateNode,a._visibility=m?a._visibility&-2:a._visibility|1,m&&(l===null||V||ys||Le||wa(s)),l=null,a=s;;){if(a.tag===5||a.tag===26){if(l===null){V=l=a;try{if(y=V.stateNode,m)T=y.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{x=V.stateNode;var nt=V.memoizedProps.style,Y=nt!=null&&nt.hasOwnProperty("display")?nt.display:null;x.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(gt){ee(V,V.return,gt)}}}else if(a.tag===6){if(l===null){V=a;try{V.stateNode.nodeValue=m?"":V.memoizedProps}catch(gt){ee(V,V.return,gt)}}}else if(a.tag===18){if(l===null){V=a;try{var Q=V.stateNode;m?wv(Q,!0):wv(V.stateNode,!1)}catch(gt){ee(V,V.return,gt)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break t;for(;a.sibling===null;){if(a.return===null||a.return===s)break t;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}h&4&&(h=s.updateQueue,h!==null&&(l=h.retryQueue,l!==null&&(h.retryQueue=null,Ph(s,l))));break;case 19:xn(a,s),An(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,Ph(s,h)));break;case 30:break;case 21:break;default:xn(a,s),An(s)}}function An(s){var a=s.flags;if(a&2){try{for(var l,h=s.return;h!==null;){if(Cb(h)){l=h;break}h=h.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var m=l.stateNode,y=cm(s);Nh(s,y,m);break;case 5:var T=l.stateNode;l.flags&32&&(En(T,""),l.flags&=-33);var x=cm(s);Nh(s,x,T);break;case 3:case 4:var V=l.stateNode.containerInfo,G=cm(s);um(s,G,V);break;default:throw Error(i(161))}}catch(Z){ee(s,s.return,Z)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function Lb(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;Lb(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function bs(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Mb(s,a.alternate,a),a=a.sibling}function wa(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:ar(4,a,a.return),wa(a);break;case 1:Ki(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&wb(a,a.return,l),wa(a);break;case 27:pc(a.stateNode);case 26:case 5:Ki(a,a.return),wa(a);break;case 22:a.memoizedState===null&&wa(a);break;case 30:wa(a);break;default:wa(a)}s=s.sibling}}function vs(s,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var h=a.alternate,m=s,y=a,T=y.flags;switch(y.tag){case 0:case 11:case 15:vs(m,y,l),ac(4,y);break;case 1:if(vs(m,y,l),h=y,m=h.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(G){ee(h,h.return,G)}if(h=y,m=h.updateQueue,m!==null){var x=h.stateNode;try{var V=m.shared.hiddenCallbacks;if(V!==null)for(m.shared.hiddenCallbacks=null,m=0;m<V.length;m++)g0(V[m],x)}catch(G){ee(h,h.return,G)}}l&&T&64&&Ab(y),oc(y,y.return);break;case 27:Ib(y);case 26:case 5:vs(m,y,l),l&&h===null&&T&4&&Rb(y),oc(y,y.return);break;case 12:vs(m,y,l);break;case 31:vs(m,y,l),l&&T&4&&Nb(m,y);break;case 13:vs(m,y,l),l&&T&4&&Pb(m,y);break;case 22:y.memoizedState===null&&vs(m,y,l),oc(y,y.return);break;case 30:break;default:vs(m,y,l)}a=a.sibling}}function fm(s,a){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&Kl(l))}function dm(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&Kl(s))}function _i(s,a,l,h){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)zb(s,a,l,h),a=a.sibling}function zb(s,a,l,h){var m=a.flags;switch(a.tag){case 0:case 11:case 15:_i(s,a,l,h),m&2048&&ac(9,a);break;case 1:_i(s,a,l,h);break;case 3:_i(s,a,l,h),m&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&Kl(s)));break;case 12:if(m&2048){_i(s,a,l,h),s=a.stateNode;try{var y=a.memoizedProps,T=y.id,x=y.onPostCommit;typeof x=="function"&&x(T,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(V){ee(a,a.return,V)}}else _i(s,a,l,h);break;case 31:_i(s,a,l,h);break;case 13:_i(s,a,l,h);break;case 23:break;case 22:y=a.stateNode,T=a.alternate,a.memoizedState!==null?y._visibility&2?_i(s,a,l,h):lc(s,a):y._visibility&2?_i(s,a,l,h):(y._visibility|=2,ko(s,a,l,h,(a.subtreeFlags&10256)!==0||!1)),m&2048&&fm(T,a);break;case 24:_i(s,a,l,h),m&2048&&dm(a.alternate,a);break;default:_i(s,a,l,h)}}function ko(s,a,l,h,m){for(m=m&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var y=s,T=a,x=l,V=h,G=T.flags;switch(T.tag){case 0:case 11:case 15:ko(y,T,x,V,m),ac(8,T);break;case 23:break;case 22:var Z=T.stateNode;T.memoizedState!==null?Z._visibility&2?ko(y,T,x,V,m):lc(y,T):(Z._visibility|=2,ko(y,T,x,V,m)),m&&G&2048&&fm(T.alternate,T);break;case 24:ko(y,T,x,V,m),m&&G&2048&&dm(T.alternate,T);break;default:ko(y,T,x,V,m)}a=a.sibling}}function lc(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=s,h=a,m=h.flags;switch(h.tag){case 22:lc(l,h),m&2048&&fm(h.alternate,h);break;case 24:lc(l,h),m&2048&&dm(h.alternate,h);break;default:lc(l,h)}a=a.sibling}}var cc=8192;function No(s,a,l){if(s.subtreeFlags&cc)for(s=s.child;s!==null;)Ub(s,a,l),s=s.sibling}function Ub(s,a,l){switch(s.tag){case 26:No(s,a,l),s.flags&cc&&s.memoizedState!==null&&ZR(l,yi,s.memoizedState,s.memoizedProps);break;case 5:No(s,a,l);break;case 3:case 4:var h=yi;yi=Xh(s.stateNode.containerInfo),No(s,a,l),yi=h;break;case 22:s.memoizedState===null&&(h=s.alternate,h!==null&&h.memoizedState!==null?(h=cc,cc=16777216,No(s,a,l),cc=h):No(s,a,l));break;default:No(s,a,l)}}function jb(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function uc(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var h=a[l];Qe=h,Fb(h,s)}jb(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Bb(s),s=s.sibling}function Bb(s){switch(s.tag){case 0:case 11:case 15:uc(s),s.flags&2048&&ar(9,s,s.return);break;case 3:uc(s);break;case 12:uc(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,Vh(s)):uc(s);break;default:uc(s)}}function Vh(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var h=a[l];Qe=h,Fb(h,s)}jb(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:ar(8,a,a.return),Vh(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,Vh(a));break;default:Vh(a)}s=s.sibling}}function Fb(s,a){for(;Qe!==null;){var l=Qe;switch(l.tag){case 0:case 11:case 15:ar(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var h=l.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Kl(l.memoizedState.cache)}if(h=l.child,h!==null)h.return=l,Qe=h;else t:for(l=s;Qe!==null;){h=Qe;var m=h.sibling,y=h.return;if(Ob(h),h===l){Qe=null;break t}if(m!==null){m.return=y,Qe=m;break t}Qe=y}}}var gR={getCacheForType:function(s){var a=nn(Ne),l=a.data.get(s);return l===void 0&&(l=s(),a.data.set(s,l)),l},cacheSignal:function(){return nn(Ne).controller.signal}},mR=typeof WeakMap=="function"?WeakMap:Map,$t=0,oe=null,Nt=null,zt=0,te=0,Un=null,or=!1,Po=!1,gm=!1,Ts=0,Te=0,lr=0,Ra=0,mm=0,jn=0,Vo=0,hc=null,wn=null,pm=!1,Lh=0,Hb=0,zh=1/0,Uh=null,cr=null,Ge=0,ur=null,Lo=null,Es=0,ym=0,_m=null,qb=null,fc=0,bm=null;function Bn(){return($t&2)!==0&&zt!==0?zt&-zt:K.T!==null?Am():ju()}function Gb(){if(jn===0)if((zt&536870912)===0||qt){var s=ta;ta<<=1,(ta&3932160)===0&&(ta=262144),jn=s}else jn=536870912;return s=Ln.current,s!==null&&(s.flags|=32),jn}function Rn(s,a,l){(s===oe&&(te===2||te===9)||s.cancelPendingCommit!==null)&&(zo(s,0),hr(s,zt,jn,!1)),ea(s,l),(($t&2)===0||s!==oe)&&(s===oe&&(($t&2)===0&&(Ra|=l),Te===4&&hr(s,zt,jn,!1)),Wi(s))}function Yb(s,a,l){if(($t&6)!==0)throw Error(i(327));var h=!l&&(a&127)===0&&(a&s.expiredLanes)===0||li(s,a),m=h?_R(s,a):Tm(s,a,!0),y=h;do{if(m===0){Po&&!h&&hr(s,a,0,!1);break}else{if(l=s.current.alternate,y&&!pR(l)){m=Tm(s,a,!1),y=!1;continue}if(m===2){if(y=a,s.errorRecoveryDisabledLanes&y)var T=0;else T=s.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){a=T;t:{var x=s;m=hc;var V=x.current.memoizedState.isDehydrated;if(V&&(zo(x,T).flags|=256),T=Tm(x,T,!1),T!==2){if(gm&&!V){x.errorRecoveryDisabledLanes|=y,Ra|=y,m=4;break t}y=wn,wn=m,y!==null&&(wn===null?wn=y:wn.push.apply(wn,y))}m=T}if(y=!1,m!==2)continue}}if(m===1){zo(s,0),hr(s,a,0,!0);break}t:{switch(h=s,y=m,y){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:hr(h,a,jn,!or);break t;case 2:wn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(m=Lh+300-_n(),10<m)){if(hr(h,a,jn,!or),Di(h,0,!0)!==0)break t;Es=a,h.timeoutHandle=Sv(Kb.bind(null,h,l,wn,Uh,pm,a,jn,Ra,Vo,or,y,"Throttled",-0,0),m);break t}Kb(h,l,wn,Uh,pm,a,jn,Ra,Vo,or,y,null,-0,0)}}break}while(!0);Wi(s)}function Kb(s,a,l,h,m,y,T,x,V,G,Z,nt,Y,Q){if(s.timeoutHandle=-1,nt=a.subtreeFlags,nt&8192||(nt&16785408)===16785408){nt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:hi},Ub(a,y,nt);var gt=(y&62914560)===y?Lh-_n():(y&4194048)===y?Hb-_n():0;if(gt=tC(nt,gt),gt!==null){Es=y,s.cancelPendingCommit=gt(ev.bind(null,s,a,y,l,h,m,T,x,V,Z,nt,null,Y,Q)),hr(s,y,T,!G);return}}ev(s,a,y,l,h,m,T,x,V)}function pR(s){for(var a=s;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var h=0;h<l.length;h++){var m=l[h],y=m.getSnapshot;m=m.value;try{if(!Pn(y(),m))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function hr(s,a,l,h){a&=~mm,a&=~Ra,s.suspendedLanes|=a,s.pingedLanes&=~a,h&&(s.warmLanes|=a),h=s.expirationTimes;for(var m=a;0<m;){var y=31-Se(m),T=1<<y;h[y]=-1,m&=~T}l!==0&&na(s,l,a)}function jh(){return($t&6)===0?(dc(0),!1):!0}function vm(){if(Nt!==null){if(te===0)var s=Nt.return;else s=Nt,hs=_a=null,Vg(s),Co=null,Xl=0,s=Nt;for(;s!==null;)xb(s.alternate,s),s=s.return;Nt=null}}function zo(s,a){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,VR(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),Es=0,vm(),oe=s,Nt=l=cs(s.current,null),zt=a,te=0,Un=null,or=!1,Po=li(s,a),gm=!1,Vo=jn=mm=Ra=lr=Te=0,wn=hc=null,pm=!1,(a&8)!==0&&(a|=a&32);var h=s.entangledLanes;if(h!==0)for(s=s.entanglements,h&=a;0<h;){var m=31-Se(h),y=1<<m;a|=s[m],h&=~y}return Ts=a,oh(),l}function Wb(s,a){Mt=null,K.H=ic,a===Ro||a===mh?(a=u0(),te=3):a===xg?(a=u0(),te=4):te=a===Jg?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Un=a,Nt===null&&(Te=1,Ih(s,$n(a,s.current)))}function Xb(){var s=Ln.current;return s===null?!0:(zt&4194048)===zt?ei===null:(zt&62914560)===zt||(zt&536870912)!==0?s===ei:!1}function Qb(){var s=K.H;return K.H=ic,s===null?ic:s}function $b(){var s=K.A;return K.A=gR,s}function Bh(){Te=4,or||(zt&4194048)!==zt&&Ln.current!==null||(Po=!0),(lr&134217727)===0&&(Ra&134217727)===0||oe===null||hr(oe,zt,jn,!1)}function Tm(s,a,l){var h=$t;$t|=2;var m=Qb(),y=$b();(oe!==s||zt!==a)&&(Uh=null,zo(s,a)),a=!1;var T=Te;t:do try{if(te!==0&&Nt!==null){var x=Nt,V=Un;switch(te){case 8:vm(),T=6;break t;case 3:case 2:case 9:case 6:Ln.current===null&&(a=!0);var G=te;if(te=0,Un=null,Uo(s,x,V,G),l&&Po){T=0;break t}break;default:G=te,te=0,Un=null,Uo(s,x,V,G)}}yR(),T=Te;break}catch(Z){Wb(s,Z)}while(!0);return a&&s.shellSuspendCounter++,hs=_a=null,$t=h,K.H=m,K.A=y,Nt===null&&(oe=null,zt=0,oh()),T}function yR(){for(;Nt!==null;)Jb(Nt)}function _R(s,a){var l=$t;$t|=2;var h=Qb(),m=$b();oe!==s||zt!==a?(Uh=null,zh=_n()+500,zo(s,a)):Po=li(s,a);t:do try{if(te!==0&&Nt!==null){a=Nt;var y=Un;e:switch(te){case 1:te=0,Un=null,Uo(s,a,y,1);break;case 2:case 9:if(l0(y)){te=0,Un=null,Zb(a);break}a=function(){te!==2&&te!==9||oe!==s||(te=7),Wi(s)},y.then(a,a);break t;case 3:te=7;break t;case 4:te=5;break t;case 7:l0(y)?(te=0,Un=null,Zb(a)):(te=0,Un=null,Uo(s,a,y,7));break;case 5:var T=null;switch(Nt.tag){case 26:T=Nt.memoizedState;case 5:case 27:var x=Nt;if(T?zv(T):x.stateNode.complete){te=0,Un=null;var V=x.sibling;if(V!==null)Nt=V;else{var G=x.return;G!==null?(Nt=G,Fh(G)):Nt=null}break e}}te=0,Un=null,Uo(s,a,y,5);break;case 6:te=0,Un=null,Uo(s,a,y,6);break;case 8:vm(),Te=6;break t;default:throw Error(i(462))}}bR();break}catch(Z){Wb(s,Z)}while(!0);return hs=_a=null,K.H=h,K.A=m,$t=l,Nt!==null?0:(oe=null,zt=0,oh(),Te)}function bR(){for(;Nt!==null&&!$d();)Jb(Nt)}function Jb(s){var a=Eb(s.alternate,s,Ts);s.memoizedProps=s.pendingProps,a===null?Fh(s):Nt=a}function Zb(s){var a=s,l=a.alternate;switch(a.tag){case 15:case 0:a=pb(l,a,a.pendingProps,a.type,void 0,zt);break;case 11:a=pb(l,a,a.pendingProps,a.type.render,a.ref,zt);break;case 5:Vg(a);default:xb(l,a),a=Nt=$_(a,Ts),a=Eb(l,a,Ts)}s.memoizedProps=s.pendingProps,a===null?Fh(s):Nt=a}function Uo(s,a,l,h){hs=_a=null,Vg(a),Co=null,Xl=0;var m=a.return;try{if(oR(s,m,a,l,zt)){Te=1,Ih(s,$n(l,s.current)),Nt=null;return}}catch(y){if(m!==null)throw Nt=m,y;Te=1,Ih(s,$n(l,s.current)),Nt=null;return}a.flags&32768?(qt||h===1?s=!0:Po||(zt&536870912)!==0?s=!1:(or=s=!0,(h===2||h===9||h===3||h===6)&&(h=Ln.current,h!==null&&h.tag===13&&(h.flags|=16384))),tv(a,s)):Fh(a)}function Fh(s){var a=s;do{if((a.flags&32768)!==0){tv(a,or);return}s=a.return;var l=uR(a.alternate,a,Ts);if(l!==null){Nt=l;return}if(a=a.sibling,a!==null){Nt=a;return}Nt=a=s}while(a!==null);Te===0&&(Te=5)}function tv(s,a){do{var l=hR(s.alternate,s);if(l!==null){l.flags&=32767,Nt=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(s=s.sibling,s!==null)){Nt=s;return}Nt=s=l}while(s!==null);Te=6,Nt=null}function ev(s,a,l,h,m,y,T,x,V){s.cancelPendingCommit=null;do Hh();while(Ge!==0);if(($t&6)!==0)throw Error(i(327));if(a!==null){if(a===s.current)throw Error(i(177));if(y=a.lanes|a.childLanes,y|=cg,tg(s,l,y,T,x,V),s===oe&&(Nt=oe=null,zt=0),Lo=a,ur=s,Es=l,ym=y,_m=m,qb=h,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,SR(Bs,function(){return av(),null})):(s.callbackNode=null,s.callbackPriority=0),h=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||h){h=K.T,K.T=null,m=at.p,at.p=2,T=$t,$t|=4;try{fR(s,a,l)}finally{$t=T,at.p=m,K.T=h}}Ge=1,nv(),iv(),sv()}}function nv(){if(Ge===1){Ge=0;var s=ur,a=Lo,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=K.T,K.T=null;var h=at.p;at.p=2;var m=$t;$t|=4;try{Vb(a,s);var y=km,T=F_(s.containerInfo),x=y.focusedElem,V=y.selectionRange;if(T!==x&&x&&x.ownerDocument&&B_(x.ownerDocument.documentElement,x)){if(V!==null&&sg(x)){var G=V.start,Z=V.end;if(Z===void 0&&(Z=G),"selectionStart"in x)x.selectionStart=G,x.selectionEnd=Math.min(Z,x.value.length);else{var nt=x.ownerDocument||document,Y=nt&&nt.defaultView||window;if(Y.getSelection){var Q=Y.getSelection(),gt=x.textContent.length,bt=Math.min(V.start,gt),ae=V.end===void 0?bt:Math.min(V.end,gt);!Q.extend&&bt>ae&&(T=ae,ae=bt,bt=T);var B=j_(x,bt),j=j_(x,ae);if(B&&j&&(Q.rangeCount!==1||Q.anchorNode!==B.node||Q.anchorOffset!==B.offset||Q.focusNode!==j.node||Q.focusOffset!==j.offset)){var q=nt.createRange();q.setStart(B.node,B.offset),Q.removeAllRanges(),bt>ae?(Q.addRange(q),Q.extend(j.node,j.offset)):(q.setEnd(j.node,j.offset),Q.addRange(q))}}}}for(nt=[],Q=x;Q=Q.parentNode;)Q.nodeType===1&&nt.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<nt.length;x++){var et=nt[x];et.element.scrollLeft=et.left,et.element.scrollTop=et.top}}ef=!!Om,km=Om=null}finally{$t=m,at.p=h,K.T=l}}s.current=a,Ge=2}}function iv(){if(Ge===2){Ge=0;var s=ur,a=Lo,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=K.T,K.T=null;var h=at.p;at.p=2;var m=$t;$t|=4;try{Mb(s,a.alternate,a)}finally{$t=m,at.p=h,K.T=l}}Ge=3}}function sv(){if(Ge===4||Ge===3){Ge=0,ku();var s=ur,a=Lo,l=Es,h=qb;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Ge=5:(Ge=0,Lo=ur=null,rv(s,s.pendingLanes));var m=s.pendingLanes;if(m===0&&(cr=null),rs(l),a=a.stateNode,Ze&&typeof Ze.onCommitFiberRoot=="function")try{Ze.onCommitFiberRoot(oi,a,void 0,(a.current.flags&128)===128)}catch{}if(h!==null){a=K.T,m=at.p,at.p=2,K.T=null;try{for(var y=s.onRecoverableError,T=0;T<h.length;T++){var x=h[T];y(x.value,{componentStack:x.stack})}}finally{K.T=a,at.p=m}}(Es&3)!==0&&Hh(),Wi(s),m=s.pendingLanes,(l&261930)!==0&&(m&42)!==0?s===bm?fc++:(fc=0,bm=s):fc=0,dc(0)}}function rv(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,Kl(a)))}function Hh(){return nv(),iv(),sv(),av()}function av(){if(Ge!==5)return!1;var s=ur,a=ym;ym=0;var l=rs(Es),h=K.T,m=at.p;try{at.p=32>l?32:l,K.T=null,l=_m,_m=null;var y=ur,T=Es;if(Ge=0,Lo=ur=null,Es=0,($t&6)!==0)throw Error(i(331));var x=$t;if($t|=4,Bb(y.current),zb(y,y.current,T,l),$t=x,dc(0,!1),Ze&&typeof Ze.onPostCommitFiberRoot=="function")try{Ze.onPostCommitFiberRoot(oi,y)}catch{}return!0}finally{at.p=m,K.T=h,rv(s,a)}}function ov(s,a,l){a=$n(l,a),a=$g(s.stateNode,a,2),s=ir(s,a,2),s!==null&&(ea(s,2),Wi(s))}function ee(s,a,l){if(s.tag===3)ov(s,s,l);else for(;a!==null;){if(a.tag===3){ov(a,s,l);break}else if(a.tag===1){var h=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(cr===null||!cr.has(h))){s=$n(l,s),l=lb(2),h=ir(a,l,2),h!==null&&(cb(l,h,a,s),ea(h,2),Wi(h));break}}a=a.return}}function Em(s,a,l){var h=s.pingCache;if(h===null){h=s.pingCache=new mR;var m=new Set;h.set(a,m)}else m=h.get(a),m===void 0&&(m=new Set,h.set(a,m));m.has(l)||(gm=!0,m.add(l),s=vR.bind(null,s,a,l),a.then(s,s))}function vR(s,a,l){var h=s.pingCache;h!==null&&h.delete(a),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,oe===s&&(zt&l)===l&&(Te===4||Te===3&&(zt&62914560)===zt&&300>_n()-Lh?($t&2)===0&&zo(s,0):mm|=l,Vo===zt&&(Vo=0)),Wi(s)}function lv(s,a){a===0&&(a=Uu()),s=ma(s,a),s!==null&&(ea(s,a),Wi(s))}function TR(s){var a=s.memoizedState,l=0;a!==null&&(l=a.retryLane),lv(s,l)}function ER(s,a){var l=0;switch(s.tag){case 31:case 13:var h=s.stateNode,m=s.memoizedState;m!==null&&(l=m.retryLane);break;case 19:h=s.stateNode;break;case 22:h=s.stateNode._retryCache;break;default:throw Error(i(314))}h!==null&&h.delete(a),lv(s,l)}function SR(s,a){return qe(s,a)}var qh=null,jo=null,Sm=!1,Gh=!1,xm=!1,fr=0;function Wi(s){s!==jo&&s.next===null&&(jo===null?qh=jo=s:jo=jo.next=s),Gh=!0,Sm||(Sm=!0,AR())}function dc(s,a){if(!xm&&Gh){xm=!0;do for(var l=!1,h=qh;h!==null;){if(s!==0){var m=h.pendingLanes;if(m===0)var y=0;else{var T=h.suspendedLanes,x=h.pingedLanes;y=(1<<31-Se(42|s)+1)-1,y&=m&~(T&~x),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(l=!0,fv(h,y))}else y=zt,y=Di(h,h===oe?y:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(y&3)===0||li(h,y)||(l=!0,fv(h,y));h=h.next}while(l);xm=!1}}function xR(){cv()}function cv(){Gh=Sm=!1;var s=0;fr!==0&&PR()&&(s=fr);for(var a=_n(),l=null,h=qh;h!==null;){var m=h.next,y=uv(h,a);y===0?(h.next=null,l===null?qh=m:l.next=m,m===null&&(jo=l)):(l=h,(s!==0||(y&3)!==0)&&(Gh=!0)),h=m}Ge!==0&&Ge!==5||dc(s),fr!==0&&(fr=0)}function uv(s,a){for(var l=s.suspendedLanes,h=s.pingedLanes,m=s.expirationTimes,y=s.pendingLanes&-62914561;0<y;){var T=31-Se(y),x=1<<T,V=m[T];V===-1?((x&l)===0||(x&h)!==0)&&(m[T]=Zd(x,a)):V<=a&&(s.expiredLanes|=x),y&=~x}if(a=oe,l=zt,l=Di(s,s===a?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h=s.callbackNode,l===0||s===a&&(te===2||te===9)||s.cancelPendingCommit!==null)return h!==null&&h!==null&&js(h),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||li(s,l)){if(a=l&-l,a===s.callbackPriority)return a;switch(h!==null&&js(h),rs(l)){case 2:case 8:l=Sl;break;case 32:l=Bs;break;case 268435456:l=Nu;break;default:l=Bs}return h=hv.bind(null,s),l=qe(l,h),s.callbackPriority=a,s.callbackNode=l,a}return h!==null&&h!==null&&js(h),s.callbackPriority=2,s.callbackNode=null,2}function hv(s,a){if(Ge!==0&&Ge!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(Hh()&&s.callbackNode!==l)return null;var h=zt;return h=Di(s,s===oe?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h===0?null:(Yb(s,h,a),uv(s,_n()),s.callbackNode!=null&&s.callbackNode===l?hv.bind(null,s):null)}function fv(s,a){if(Hh())return null;Yb(s,a,!0)}function AR(){LR(function(){($t&6)!==0?qe(El,xR):cv()})}function Am(){if(fr===0){var s=Ao;s===0&&(s=Ci,Ci<<=1,(Ci&261888)===0&&(Ci=256)),fr=s}return fr}function dv(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:co(""+s)}function gv(s,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,s.id&&l.setAttribute("form",s.id),a.parentNode.insertBefore(l,a),s=new FormData(s),l.parentNode.removeChild(l),s}function wR(s,a,l,h,m){if(a==="submit"&&l&&l.stateNode===m){var y=dv((m[We]||null).action),T=h.submitter;T&&(a=(a=T[We]||null)?dv(a.formAction):T.getAttribute("formAction"),a!==null&&(y=a,T=null));var x=new Bi("action","action",null,h,m);s.push({event:x,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(fr!==0){var V=T?gv(m,T):new FormData(m);Gg(l,{pending:!0,data:V,method:m.method,action:y},null,V)}}else typeof y=="function"&&(x.preventDefault(),V=T?gv(m,T):new FormData(m),Gg(l,{pending:!0,data:V,method:m.method,action:y},y,V))},currentTarget:m}]})}}for(var wm=0;wm<lg.length;wm++){var Rm=lg[wm],RR=Rm.toLowerCase(),CR=Rm[0].toUpperCase()+Rm.slice(1);pi(RR,"on"+CR)}pi(G_,"onAnimationEnd"),pi(Y_,"onAnimationIteration"),pi(K_,"onAnimationStart"),pi("dblclick","onDoubleClick"),pi("focusin","onFocus"),pi("focusout","onBlur"),pi(qw,"onTransitionRun"),pi(Gw,"onTransitionStart"),pi(Yw,"onTransitionCancel"),pi(W_,"onTransitionEnd"),Li("onMouseEnter",["mouseout","mouseover"]),Li("onMouseLeave",["mouseout","mouseover"]),Li("onPointerEnter",["pointerout","pointerover"]),Li("onPointerLeave",["pointerout","pointerover"]),Vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Vi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gc));function mv(s,a){a=(a&4)!==0;for(var l=0;l<s.length;l++){var h=s[l],m=h.event;h=h.listeners;t:{var y=void 0;if(a)for(var T=h.length-1;0<=T;T--){var x=h[T],V=x.instance,G=x.currentTarget;if(x=x.listener,V!==y&&m.isPropagationStopped())break t;y=x,m.currentTarget=G;try{y(m)}catch(Z){ah(Z)}m.currentTarget=null,y=V}else for(T=0;T<h.length;T++){if(x=h[T],V=x.instance,G=x.currentTarget,x=x.listener,V!==y&&m.isPropagationStopped())break t;y=x,m.currentTarget=G;try{y(m)}catch(Z){ah(Z)}m.currentTarget=null,y=V}}}}function Pt(s,a){var l=a[so];l===void 0&&(l=a[so]=new Set);var h=s+"__bubble";l.has(h)||(pv(a,s,2,!1),l.add(h))}function Cm(s,a,l){var h=0;a&&(h|=4),pv(l,s,h,a)}var Yh="_reactListening"+Math.random().toString(36).slice(2);function Im(s){if(!s[Yh]){s[Yh]=!0,wl.forEach(function(l){l!=="selectionchange"&&(IR.has(l)||Cm(l,!1,s),Cm(l,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Yh]||(a[Yh]=!0,Cm("selectionchange",!1,a))}}function pv(s,a,l,h){switch(Gv(a)){case 2:var m=iC;break;case 8:m=sC;break;default:m=qm}l=m.bind(null,a,l,s),m=void 0,!oa||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(m=!0),h?m!==void 0?s.addEventListener(a,l,{capture:!0,passive:m}):s.addEventListener(a,l,!0):m!==void 0?s.addEventListener(a,l,{passive:m}):s.addEventListener(a,l,!1)}function Dm(s,a,l,h,m){var y=h;if((a&1)===0&&(a&2)===0&&h!==null)t:for(;;){if(h===null)return;var T=h.tag;if(T===3||T===4){var x=h.stateNode.containerInfo;if(x===m)break;if(T===4)for(T=h.return;T!==null;){var V=T.tag;if((V===3||V===4)&&T.stateNode.containerInfo===m)return;T=T.return}for(;x!==null;){if(T=Ni(x),T===null)return;if(V=T.tag,V===5||V===6||V===26||V===27){h=y=T;continue t}x=x.parentNode}}h=h.return}Ks(function(){var G=y,Z=Kn(l),nt=[];t:{var Y=X_.get(s);if(Y!==void 0){var Q=Bi,gt=s;switch(s){case"keypress":if(ca(l)===0)break t;case"keydown":case"keyup":Q=ih;break;case"focusin":gt="focus",Q=ha;break;case"focusout":gt="blur",Q=ha;break;case"beforeblur":case"afterblur":Q=ha;break;case"click":if(l.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=Ul;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=Wu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=v;break;case G_:case Y_:case K_:Q=Qu;break;case W_:Q=C;break;case"scroll":case"scrollend":Q=zl;break;case"wheel":Q=X;break;case"copy":case"cut":case"paste":Q=$u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=ls;break;case"toggle":case"beforetoggle":Q=Dt}var bt=(a&4)!==0,ae=!bt&&(s==="scroll"||s==="scrollend"),B=bt?Y!==null?Y+"Capture":null:Y;bt=[];for(var j=G,q;j!==null;){var et=j;if(q=et.stateNode,et=et.tag,et!==5&&et!==26&&et!==27||q===null||B===null||(et=fi(j,B),et!=null&&bt.push(mc(j,et,q))),ae)break;j=j.return}0<bt.length&&(Y=new Q(Y,gt,null,l,Z),nt.push({event:Y,listeners:bt}))}}if((a&7)===0){t:{if(Y=s==="mouseover"||s==="pointerover",Q=s==="mouseout"||s==="pointerout",Y&&l!==Pl&&(gt=l.relatedTarget||l.fromElement)&&(Ni(gt)||gt[Oi]))break t;if((Q||Y)&&(Y=Z.window===Z?Z:(Y=Z.ownerDocument)?Y.defaultView||Y.parentWindow:window,Q?(gt=l.relatedTarget||l.toElement,Q=G,gt=gt?Ni(gt):null,gt!==null&&(ae=o(gt),bt=gt.tag,gt!==ae||bt!==5&&bt!==27&&bt!==6)&&(gt=null)):(Q=null,gt=G),Q!==gt)){if(bt=Ul,et="onMouseLeave",B="onMouseEnter",j="mouse",(s==="pointerout"||s==="pointerover")&&(bt=ls,et="onPointerLeave",B="onPointerEnter",j="pointer"),ae=Q==null?Y:kn(Q),q=gt==null?Y:kn(gt),Y=new bt(et,j+"leave",Q,l,Z),Y.target=ae,Y.relatedTarget=q,et=null,Ni(Z)===G&&(bt=new bt(B,j+"enter",gt,l,Z),bt.target=q,bt.relatedTarget=ae,et=bt),ae=et,Q&&gt)e:{for(bt=DR,B=Q,j=gt,q=0,et=B;et;et=bt(et))q++;et=0;for(var pt=j;pt;pt=bt(pt))et++;for(;0<q-et;)B=bt(B),q--;for(;0<et-q;)j=bt(j),et--;for(;q--;){if(B===j||j!==null&&B===j.alternate){bt=B;break e}B=bt(B),j=bt(j)}bt=null}else bt=null;Q!==null&&yv(nt,Y,Q,bt,!1),gt!==null&&ae!==null&&yv(nt,ae,gt,bt,!0)}}t:{if(Y=G?kn(G):window,Q=Y.nodeName&&Y.nodeName.toLowerCase(),Q==="select"||Q==="input"&&Y.type==="file")var Kt=N_;else if(O_(Y))if(P_)Kt=Bw;else{Kt=Uw;var mt=zw}else Q=Y.nodeName,!Q||Q.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?G&&lo(G.elementType)&&(Kt=N_):Kt=jw;if(Kt&&(Kt=Kt(s,G))){k_(nt,Kt,l,Z);break t}mt&&mt(s,Y,G),s==="focusout"&&G&&Y.type==="number"&&G.memoizedProps.value!=null&&Ol(Y,"number",Y.value)}switch(mt=G?kn(G):window,s){case"focusin":(O_(mt)||mt.contentEditable==="true")&&(yo=mt,rg=G,ql=null);break;case"focusout":ql=rg=yo=null;break;case"mousedown":ag=!0;break;case"contextmenu":case"mouseup":case"dragend":ag=!1,H_(nt,l,Z);break;case"selectionchange":if(Hw)break;case"keydown":case"keyup":H_(nt,l,Z)}var Ot;if(Qt)t:{switch(s){case"compositionstart":var Ut="onCompositionStart";break t;case"compositionend":Ut="onCompositionEnd";break t;case"compositionupdate":Ut="onCompositionUpdate";break t}Ut=void 0}else po?fa(s,l)&&(Ut="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(Ut="onCompositionStart");Ut&&(qi&&l.locale!=="ko"&&(po||Ut!=="onCompositionStart"?Ut==="onCompositionEnd"&&po&&(Ot=Ll()):(ji=Z,Vl="value"in ji?ji.value:ji.textContent,po=!0)),mt=Kh(G,Ut),0<mt.length&&(Ut=new Hi(Ut,s,null,l,Z),nt.push({event:Ut,listeners:mt}),Ot?Ut.data=Ot:(Ot=mo(l),Ot!==null&&(Ut.data=Ot)))),(Ot=Xn?Nw(s,l):Pw(s,l))&&(Ut=Kh(G,"onBeforeInput"),0<Ut.length&&(mt=new Hi("onBeforeInput","beforeinput",null,l,Z),nt.push({event:mt,listeners:Ut}),mt.data=Ot)),wR(nt,s,G,l,Z)}mv(nt,a)})}function mc(s,a,l){return{instance:s,listener:a,currentTarget:l}}function Kh(s,a){for(var l=a+"Capture",h=[];s!==null;){var m=s,y=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||y===null||(m=fi(s,l),m!=null&&h.unshift(mc(s,m,y)),m=fi(s,a),m!=null&&h.push(mc(s,m,y))),s.tag===3)return h;s=s.return}return[]}function DR(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function yv(s,a,l,h,m){for(var y=a._reactName,T=[];l!==null&&l!==h;){var x=l,V=x.alternate,G=x.stateNode;if(x=x.tag,V!==null&&V===h)break;x!==5&&x!==26&&x!==27||G===null||(V=G,m?(G=fi(l,y),G!=null&&T.unshift(mc(l,G,V))):m||(G=fi(l,y),G!=null&&T.push(mc(l,G,V)))),l=l.return}T.length!==0&&s.push({event:a,listeners:T})}var MR=/\r\n?/g,OR=/\u0000|\uFFFD/g;function _v(s){return(typeof s=="string"?s:""+s).replace(MR,`
`).replace(OR,"")}function bv(s,a){return a=_v(a),_v(s)===a}function re(s,a,l,h,m,y){switch(l){case"children":typeof h=="string"?a==="body"||a==="textarea"&&h===""||En(s,h):(typeof h=="number"||typeof h=="bigint")&&a!=="body"&&En(s,""+h);break;case"className":Nn(s,"class",h);break;case"tabIndex":Nn(s,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Nn(s,l,h);break;case"style":Nl(s,h,y);break;case"data":if(a!=="object"){Nn(s,"data",h);break}case"src":case"href":if(h===""&&(a!=="a"||l!=="href")){s.removeAttribute(l);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(l);break}h=co(""+h),s.setAttribute(l,h);break;case"action":case"formAction":if(typeof h=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(l==="formAction"?(a!=="input"&&re(s,a,"name",m.name,m,null),re(s,a,"formEncType",m.formEncType,m,null),re(s,a,"formMethod",m.formMethod,m,null),re(s,a,"formTarget",m.formTarget,m,null)):(re(s,a,"encType",m.encType,m,null),re(s,a,"method",m.method,m,null),re(s,a,"target",m.target,m,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(l);break}h=co(""+h),s.setAttribute(l,h);break;case"onClick":h!=null&&(s.onclick=hi);break;case"onScroll":h!=null&&Pt("scroll",s);break;case"onScrollEnd":h!=null&&Pt("scrollend",s);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(l=h.__html,l!=null){if(m.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"multiple":s.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":s.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){s.removeAttribute("xlink:href");break}l=co(""+h),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(l,""+h):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":h===!0?s.setAttribute(l,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(l,h):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?s.setAttribute(l,h):s.removeAttribute(l);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?s.removeAttribute(l):s.setAttribute(l,h);break;case"popover":Pt("beforetoggle",s),Pt("toggle",s),ao(s,"popover",h);break;case"xlinkActuate":ke(s,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":ke(s,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":ke(s,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":ke(s,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":ke(s,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":ke(s,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":ke(s,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":ke(s,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":ke(s,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":ao(s,"is",h);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Ku.get(l)||l,ao(s,l,h))}}function Mm(s,a,l,h,m,y){switch(l){case"style":Nl(s,h,y);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(l=h.__html,l!=null){if(m.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"children":typeof h=="string"?En(s,h):(typeof h=="number"||typeof h=="bigint")&&En(s,""+h);break;case"onScroll":h!=null&&Pt("scroll",s);break;case"onScrollEnd":h!=null&&Pt("scrollend",s);break;case"onClick":h!=null&&(s.onclick=hi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Rl.hasOwnProperty(l))t:{if(l[0]==="o"&&l[1]==="n"&&(m=l.endsWith("Capture"),a=l.slice(2,m?l.length-7:void 0),y=s[We]||null,y=y!=null?y[l]:null,typeof y=="function"&&s.removeEventListener(a,y,m),typeof h=="function")){typeof y!="function"&&y!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(a,h,m);break t}l in s?s[l]=h:h===!0?s.setAttribute(l,""):ao(s,l,h)}}}function rn(s,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pt("error",s),Pt("load",s);var h=!1,m=!1,y;for(y in l)if(l.hasOwnProperty(y)){var T=l[y];if(T!=null)switch(y){case"src":h=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:re(s,a,y,T,l,null)}}m&&re(s,a,"srcSet",l.srcSet,l,null),h&&re(s,a,"src",l.src,l,null);return;case"input":Pt("invalid",s);var x=y=T=m=null,V=null,G=null;for(h in l)if(l.hasOwnProperty(h)){var Z=l[h];if(Z!=null)switch(h){case"name":m=Z;break;case"type":T=Z;break;case"checked":V=Z;break;case"defaultChecked":G=Z;break;case"value":y=Z;break;case"defaultValue":x=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,a));break;default:re(s,a,h,Z,l,null)}}qu(s,y,x,V,G,T,m,!1);return;case"select":Pt("invalid",s),h=T=y=null;for(m in l)if(l.hasOwnProperty(m)&&(x=l[m],x!=null))switch(m){case"value":y=x;break;case"defaultValue":T=x;break;case"multiple":h=x;default:re(s,a,m,x,l,null)}a=y,l=T,s.multiple=!!h,a!=null?Hs(s,!!h,a,!1):l!=null&&Hs(s,!!h,l,!0);return;case"textarea":Pt("invalid",s),y=m=h=null;for(T in l)if(l.hasOwnProperty(T)&&(x=l[T],x!=null))switch(T){case"value":h=x;break;case"defaultValue":m=x;break;case"children":y=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(i(91));break;default:re(s,a,T,x,l,null)}qs(s,h,m,y);return;case"option":for(V in l)if(l.hasOwnProperty(V)&&(h=l[V],h!=null))switch(V){case"selected":s.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:re(s,a,V,h,l,null)}return;case"dialog":Pt("beforetoggle",s),Pt("toggle",s),Pt("cancel",s),Pt("close",s);break;case"iframe":case"object":Pt("load",s);break;case"video":case"audio":for(h=0;h<gc.length;h++)Pt(gc[h],s);break;case"image":Pt("error",s),Pt("load",s);break;case"details":Pt("toggle",s);break;case"embed":case"source":case"link":Pt("error",s),Pt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in l)if(l.hasOwnProperty(G)&&(h=l[G],h!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:re(s,a,G,h,l,null)}return;default:if(lo(a)){for(Z in l)l.hasOwnProperty(Z)&&(h=l[Z],h!==void 0&&Mm(s,a,Z,h,l,void 0));return}}for(x in l)l.hasOwnProperty(x)&&(h=l[x],h!=null&&re(s,a,x,h,l,null))}function kR(s,a,l,h){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,y=null,T=null,x=null,V=null,G=null,Z=null;for(Q in l){var nt=l[Q];if(l.hasOwnProperty(Q)&&nt!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":V=nt;default:h.hasOwnProperty(Q)||re(s,a,Q,null,h,nt)}}for(var Y in h){var Q=h[Y];if(nt=l[Y],h.hasOwnProperty(Y)&&(Q!=null||nt!=null))switch(Y){case"type":y=Q;break;case"name":m=Q;break;case"checked":G=Q;break;case"defaultChecked":Z=Q;break;case"value":T=Q;break;case"defaultValue":x=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,a));break;default:Q!==nt&&re(s,a,Y,Q,h,nt)}}oo(s,T,x,V,G,Z,y,m);return;case"select":Q=T=x=Y=null;for(y in l)if(V=l[y],l.hasOwnProperty(y)&&V!=null)switch(y){case"value":break;case"multiple":Q=V;default:h.hasOwnProperty(y)||re(s,a,y,null,h,V)}for(m in h)if(y=h[m],V=l[m],h.hasOwnProperty(m)&&(y!=null||V!=null))switch(m){case"value":Y=y;break;case"defaultValue":x=y;break;case"multiple":T=y;default:y!==V&&re(s,a,m,y,h,V)}a=x,l=T,h=Q,Y!=null?Hs(s,!!l,Y,!1):!!h!=!!l&&(a!=null?Hs(s,!!l,a,!0):Hs(s,!!l,l?[]:"",!1));return;case"textarea":Q=Y=null;for(x in l)if(m=l[x],l.hasOwnProperty(x)&&m!=null&&!h.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:re(s,a,x,null,h,m)}for(T in h)if(m=h[T],y=l[T],h.hasOwnProperty(T)&&(m!=null||y!=null))switch(T){case"value":Y=m;break;case"defaultValue":Q=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(i(91));break;default:m!==y&&re(s,a,T,m,h,y)}Gu(s,Y,Q);return;case"option":for(var gt in l)if(Y=l[gt],l.hasOwnProperty(gt)&&Y!=null&&!h.hasOwnProperty(gt))switch(gt){case"selected":s.selected=!1;break;default:re(s,a,gt,null,h,Y)}for(V in h)if(Y=h[V],Q=l[V],h.hasOwnProperty(V)&&Y!==Q&&(Y!=null||Q!=null))switch(V){case"selected":s.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:re(s,a,V,Y,h,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var bt in l)Y=l[bt],l.hasOwnProperty(bt)&&Y!=null&&!h.hasOwnProperty(bt)&&re(s,a,bt,null,h,Y);for(G in h)if(Y=h[G],Q=l[G],h.hasOwnProperty(G)&&Y!==Q&&(Y!=null||Q!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(i(137,a));break;default:re(s,a,G,Y,h,Q)}return;default:if(lo(a)){for(var ae in l)Y=l[ae],l.hasOwnProperty(ae)&&Y!==void 0&&!h.hasOwnProperty(ae)&&Mm(s,a,ae,void 0,h,Y);for(Z in h)Y=h[Z],Q=l[Z],!h.hasOwnProperty(Z)||Y===Q||Y===void 0&&Q===void 0||Mm(s,a,Z,Y,h,Q);return}}for(var B in l)Y=l[B],l.hasOwnProperty(B)&&Y!=null&&!h.hasOwnProperty(B)&&re(s,a,B,null,h,Y);for(nt in h)Y=h[nt],Q=l[nt],!h.hasOwnProperty(nt)||Y===Q||Y==null&&Q==null||re(s,a,nt,Y,h,Q)}function vv(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function NR(){if(typeof performance.getEntriesByType=="function"){for(var s=0,a=0,l=performance.getEntriesByType("resource"),h=0;h<l.length;h++){var m=l[h],y=m.transferSize,T=m.initiatorType,x=m.duration;if(y&&x&&vv(T)){for(T=0,x=m.responseEnd,h+=1;h<l.length;h++){var V=l[h],G=V.startTime;if(G>x)break;var Z=V.transferSize,nt=V.initiatorType;Z&&vv(nt)&&(V=V.responseEnd,T+=Z*(V<x?1:(x-G)/(V-G)))}if(--h,a+=8*(y+T)/(m.duration/1e3),s++,10<s)break}}if(0<s)return a/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Om=null,km=null;function Wh(s){return s.nodeType===9?s:s.ownerDocument}function Tv(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ev(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function Nm(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Pm=null;function PR(){var s=window.event;return s&&s.type==="popstate"?s===Pm?!1:(Pm=s,!0):(Pm=null,!1)}var Sv=typeof setTimeout=="function"?setTimeout:void 0,VR=typeof clearTimeout=="function"?clearTimeout:void 0,xv=typeof Promise=="function"?Promise:void 0,LR=typeof queueMicrotask=="function"?queueMicrotask:typeof xv<"u"?function(s){return xv.resolve(null).then(s).catch(zR)}:Sv;function zR(s){setTimeout(function(){throw s})}function dr(s){return s==="head"}function Av(s,a){var l=a,h=0;do{var m=l.nextSibling;if(s.removeChild(l),m&&m.nodeType===8)if(l=m.data,l==="/$"||l==="/&"){if(h===0){s.removeChild(m),qo(a);return}h--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")h++;else if(l==="html")pc(s.ownerDocument.documentElement);else if(l==="head"){l=s.ownerDocument.head,pc(l);for(var y=l.firstChild;y;){var T=y.nextSibling,x=y.nodeName;y[ki]||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&y.rel.toLowerCase()==="stylesheet"||l.removeChild(y),y=T}}else l==="body"&&pc(s.ownerDocument.body);l=m}while(l);qo(a)}function wv(s,a){var l=s;s=0;do{var h=l.nextSibling;if(l.nodeType===1?a?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(a?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),h&&h.nodeType===8)if(l=h.data,l==="/$"){if(s===0)break;s--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||s++;l=h}while(l)}function Vm(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Vm(l),ro(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function UR(s,a,l,h){for(;s.nodeType===1;){var m=l;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!h&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(h){if(!s[ki])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(y=s.getAttribute("rel"),y==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(y!==m.rel||s.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||s.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||s.getAttribute("title")!==(m.title==null?null:m.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(y=s.getAttribute("src"),(y!==(m.src==null?null:m.src)||s.getAttribute("type")!==(m.type==null?null:m.type)||s.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&y&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var y=m.name==null?null:""+m.name;if(m.type==="hidden"&&s.getAttribute("name")===y)return s}else return s;if(s=ni(s.nextSibling),s===null)break}return null}function jR(s,a,l){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=ni(s.nextSibling),s===null))return null;return s}function Rv(s,a){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!a||(s=ni(s.nextSibling),s===null))return null;return s}function Lm(s){return s.data==="$?"||s.data==="$~"}function zm(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function BR(s,a){var l=s.ownerDocument;if(s.data==="$~")s._reactRetry=a;else if(s.data!=="$?"||l.readyState!=="loading")a();else{var h=function(){a(),l.removeEventListener("DOMContentLoaded",h)};l.addEventListener("DOMContentLoaded",h),s._reactRetry=h}}function ni(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return s}var Um=null;function Cv(s){s=s.nextSibling;for(var a=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"||l==="/&"){if(a===0)return ni(s.nextSibling);a--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||a++}s=s.nextSibling}return null}function Iv(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(a===0)return s;a--}else l!=="/$"&&l!=="/&"||a++}s=s.previousSibling}return null}function Dv(s,a,l){switch(a=Wh(l),s){case"html":if(s=a.documentElement,!s)throw Error(i(452));return s;case"head":if(s=a.head,!s)throw Error(i(453));return s;case"body":if(s=a.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function pc(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);ro(s)}var ii=new Map,Mv=new Set;function Xh(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Ss=at.d;at.d={f:FR,r:HR,D:qR,C:GR,L:YR,m:KR,X:XR,S:WR,M:QR};function FR(){var s=Ss.f(),a=jh();return s||a}function HR(s){var a=Yn(s);a!==null&&a.tag===5&&a.type==="form"?W0(a):Ss.r(s)}var Bo=typeof document>"u"?null:document;function Ov(s,a,l){var h=Bo;if(h&&typeof a=="string"&&a){var m=Tn(a);m='link[rel="'+s+'"][href="'+m+'"]',typeof l=="string"&&(m+='[crossorigin="'+l+'"]'),Mv.has(m)||(Mv.add(m),s={rel:s,crossOrigin:l,href:a},h.querySelector(m)===null&&(a=h.createElement("link"),rn(a,"link",s),Oe(a),h.head.appendChild(a)))}}function qR(s){Ss.D(s),Ov("dns-prefetch",s,null)}function GR(s,a){Ss.C(s,a),Ov("preconnect",s,a)}function YR(s,a,l){Ss.L(s,a,l);var h=Bo;if(h&&s&&a){var m='link[rel="preload"][as="'+Tn(a)+'"]';a==="image"&&l&&l.imageSrcSet?(m+='[imagesrcset="'+Tn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(m+='[imagesizes="'+Tn(l.imageSizes)+'"]')):m+='[href="'+Tn(s)+'"]';var y=m;switch(a){case"style":y=Fo(s);break;case"script":y=Ho(s)}ii.has(y)||(s=_({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:s,as:a},l),ii.set(y,s),h.querySelector(m)!==null||a==="style"&&h.querySelector(yc(y))||a==="script"&&h.querySelector(_c(y))||(a=h.createElement("link"),rn(a,"link",s),Oe(a),h.head.appendChild(a)))}}function KR(s,a){Ss.m(s,a);var l=Bo;if(l&&s){var h=a&&typeof a.as=="string"?a.as:"script",m='link[rel="modulepreload"][as="'+Tn(h)+'"][href="'+Tn(s)+'"]',y=m;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Ho(s)}if(!ii.has(y)&&(s=_({rel:"modulepreload",href:s},a),ii.set(y,s),l.querySelector(m)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(_c(y)))return}h=l.createElement("link"),rn(h,"link",s),Oe(h),l.head.appendChild(h)}}}function WR(s,a,l){Ss.S(s,a,l);var h=Bo;if(h&&s){var m=Pi(h).hoistableStyles,y=Fo(s);a=a||"default";var T=m.get(y);if(!T){var x={loading:0,preload:null};if(T=h.querySelector(yc(y)))x.loading=5;else{s=_({rel:"stylesheet",href:s,"data-precedence":a},l),(l=ii.get(y))&&jm(s,l);var V=T=h.createElement("link");Oe(V),rn(V,"link",s),V._p=new Promise(function(G,Z){V.onload=G,V.onerror=Z}),V.addEventListener("load",function(){x.loading|=1}),V.addEventListener("error",function(){x.loading|=2}),x.loading|=4,Qh(T,a,h)}T={type:"stylesheet",instance:T,count:1,state:x},m.set(y,T)}}}function XR(s,a){Ss.X(s,a);var l=Bo;if(l&&s){var h=Pi(l).hoistableScripts,m=Ho(s),y=h.get(m);y||(y=l.querySelector(_c(m)),y||(s=_({src:s,async:!0},a),(a=ii.get(m))&&Bm(s,a),y=l.createElement("script"),Oe(y),rn(y,"link",s),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},h.set(m,y))}}function QR(s,a){Ss.M(s,a);var l=Bo;if(l&&s){var h=Pi(l).hoistableScripts,m=Ho(s),y=h.get(m);y||(y=l.querySelector(_c(m)),y||(s=_({src:s,async:!0,type:"module"},a),(a=ii.get(m))&&Bm(s,a),y=l.createElement("script"),Oe(y),rn(y,"link",s),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},h.set(m,y))}}function kv(s,a,l,h){var m=(m=Et.current)?Xh(m):null;if(!m)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=Fo(l.href),l=Pi(m).hoistableStyles,h=l.get(a),h||(h={type:"style",instance:null,count:0,state:null},l.set(a,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=Fo(l.href);var y=Pi(m).hoistableStyles,T=y.get(s);if(T||(m=m.ownerDocument||m,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(s,T),(y=m.querySelector(yc(s)))&&!y._p&&(T.instance=y,T.state.loading=5),ii.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},ii.set(s,l),y||$R(m,s,l,T.state))),a&&h===null)throw Error(i(528,""));return T}if(a&&h!==null)throw Error(i(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Ho(l),l=Pi(m).hoistableScripts,h=l.get(a),h||(h={type:"script",instance:null,count:0,state:null},l.set(a,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function Fo(s){return'href="'+Tn(s)+'"'}function yc(s){return'link[rel="stylesheet"]['+s+"]"}function Nv(s){return _({},s,{"data-precedence":s.precedence,precedence:null})}function $R(s,a,l,h){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?h.loading=1:(a=s.createElement("link"),h.preload=a,a.addEventListener("load",function(){return h.loading|=1}),a.addEventListener("error",function(){return h.loading|=2}),rn(a,"link",l),Oe(a),s.head.appendChild(a))}function Ho(s){return'[src="'+Tn(s)+'"]'}function _c(s){return"script[async]"+s}function Pv(s,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var h=s.querySelector('style[data-href~="'+Tn(l.href)+'"]');if(h)return a.instance=h,Oe(h),h;var m=_({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return h=(s.ownerDocument||s).createElement("style"),Oe(h),rn(h,"style",m),Qh(h,l.precedence,s),a.instance=h;case"stylesheet":m=Fo(l.href);var y=s.querySelector(yc(m));if(y)return a.state.loading|=4,a.instance=y,Oe(y),y;h=Nv(l),(m=ii.get(m))&&jm(h,m),y=(s.ownerDocument||s).createElement("link"),Oe(y);var T=y;return T._p=new Promise(function(x,V){T.onload=x,T.onerror=V}),rn(y,"link",h),a.state.loading|=4,Qh(y,l.precedence,s),a.instance=y;case"script":return y=Ho(l.src),(m=s.querySelector(_c(y)))?(a.instance=m,Oe(m),m):(h=l,(m=ii.get(y))&&(h=_({},l),Bm(h,m)),s=s.ownerDocument||s,m=s.createElement("script"),Oe(m),rn(m,"link",h),s.head.appendChild(m),a.instance=m);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(h=a.instance,a.state.loading|=4,Qh(h,l.precedence,s));return a.instance}function Qh(s,a,l){for(var h=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=h.length?h[h.length-1]:null,y=m,T=0;T<h.length;T++){var x=h[T];if(x.dataset.precedence===a)y=x;else if(y!==m)break}y?y.parentNode.insertBefore(s,y.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(s,a.firstChild))}function jm(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function Bm(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var $h=null;function Vv(s,a,l){if($h===null){var h=new Map,m=$h=new Map;m.set(l,h)}else m=$h,h=m.get(l),h||(h=new Map,m.set(l,h));if(h.has(s))return h;for(h.set(s,null),l=l.getElementsByTagName(s),m=0;m<l.length;m++){var y=l[m];if(!(y[ki]||y[Me]||s==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var T=y.getAttribute(a)||"";T=s+T;var x=h.get(T);x?x.push(y):h.set(T,[y])}}return h}function Lv(s,a,l){s=s.ownerDocument||s,s.head.insertBefore(l,a==="title"?s.querySelector("head > title"):null)}function JR(s,a,l){if(l===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function zv(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function ZR(s,a,l,h){if(l.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var m=Fo(h.href),y=a.querySelector(yc(m));if(y){a=y._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(s.count++,s=Jh.bind(s),a.then(s,s)),l.state.loading|=4,l.instance=y,Oe(y);return}y=a.ownerDocument||a,h=Nv(h),(m=ii.get(m))&&jm(h,m),y=y.createElement("link"),Oe(y);var T=y;T._p=new Promise(function(x,V){T.onload=x,T.onerror=V}),rn(y,"link",h),l.instance=y}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(s.count++,l=Jh.bind(s),a.addEventListener("load",l),a.addEventListener("error",l))}}var Fm=0;function tC(s,a){return s.stylesheets&&s.count===0&&tf(s,s.stylesheets),0<s.count||0<s.imgCount?function(l){var h=setTimeout(function(){if(s.stylesheets&&tf(s,s.stylesheets),s.unsuspend){var y=s.unsuspend;s.unsuspend=null,y()}},6e4+a);0<s.imgBytes&&Fm===0&&(Fm=62500*NR());var m=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&tf(s,s.stylesheets),s.unsuspend)){var y=s.unsuspend;s.unsuspend=null,y()}},(s.imgBytes>Fm?50:800)+a);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(h),clearTimeout(m)}}:null}function Jh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)tf(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Zh=null;function tf(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Zh=new Map,a.forEach(eC,s),Zh=null,Jh.call(s))}function eC(s,a){if(!(a.state.loading&4)){var l=Zh.get(s);if(l)var h=l.get(null);else{l=new Map,Zh.set(s,l);for(var m=s.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<m.length;y++){var T=m[y];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(l.set(T.dataset.precedence,T),h=T)}h&&l.set(null,h)}m=a.instance,T=m.getAttribute("data-precedence"),y=l.get(T)||h,y===h&&l.set(null,m),l.set(T,m),this.count++,h=Jh.bind(this),m.addEventListener("load",h),m.addEventListener("error",h),y?y.parentNode.insertBefore(m,y.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(m,s.firstChild)),a.state.loading|=4}}var bc={$$typeof:W,Provider:null,Consumer:null,_currentValue:dt,_currentValue2:dt,_threadCount:0};function nC(s,a,l,h,m,y,T,x,V){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Mi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mi(0),this.hiddenUpdates=Mi(null),this.identifierPrefix=h,this.onUncaughtError=m,this.onCaughtError=y,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function Uv(s,a,l,h,m,y,T,x,V,G,Z,nt){return s=new nC(s,a,l,T,V,G,Z,nt,x),a=1,y===!0&&(a|=24),y=Vn(3,null,null,a),s.current=y,y.stateNode=s,a=Tg(),a.refCount++,s.pooledCache=a,a.refCount++,y.memoizedState={element:h,isDehydrated:l,cache:a},Ag(y),s}function jv(s){return s?(s=vo,s):vo}function Bv(s,a,l,h,m,y){m=jv(m),h.context===null?h.context=m:h.pendingContext=m,h=nr(a),h.payload={element:l},y=y===void 0?null:y,y!==null&&(h.callback=y),l=ir(s,h,a),l!==null&&(Rn(l,s,a),$l(l,s,a))}function Fv(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<a?l:a}}function Hm(s,a){Fv(s,a),(s=s.alternate)&&Fv(s,a)}function Hv(s){if(s.tag===13||s.tag===31){var a=ma(s,67108864);a!==null&&Rn(a,s,67108864),Hm(s,67108864)}}function qv(s){if(s.tag===13||s.tag===31){var a=Bn();a=ia(a);var l=ma(s,a);l!==null&&Rn(l,s,a),Hm(s,a)}}var ef=!0;function iC(s,a,l,h){var m=K.T;K.T=null;var y=at.p;try{at.p=2,qm(s,a,l,h)}finally{at.p=y,K.T=m}}function sC(s,a,l,h){var m=K.T;K.T=null;var y=at.p;try{at.p=8,qm(s,a,l,h)}finally{at.p=y,K.T=m}}function qm(s,a,l,h){if(ef){var m=Gm(h);if(m===null)Dm(s,a,h,nf,l),Yv(s,h);else if(aC(m,s,a,l,h))h.stopPropagation();else if(Yv(s,h),a&4&&-1<rC.indexOf(s)){for(;m!==null;){var y=Yn(m);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var T=Ii(y.pendingLanes);if(T!==0){var x=y;for(x.pendingLanes|=2,x.entangledLanes|=2;T;){var V=1<<31-Se(T);x.entanglements[1]|=V,T&=~V}Wi(y),($t&6)===0&&(zh=_n()+500,dc(0))}}break;case 31:case 13:x=ma(y,2),x!==null&&Rn(x,y,2),jh(),Hm(y,2)}if(y=Gm(h),y===null&&Dm(s,a,h,nf,l),y===m)break;m=y}m!==null&&h.stopPropagation()}else Dm(s,a,h,null,l)}}function Gm(s){return s=Kn(s),Ym(s)}var nf=null;function Ym(s){if(nf=null,s=Ni(s),s!==null){var a=o(s);if(a===null)s=null;else{var l=a.tag;if(l===13){if(s=c(a),s!==null)return s;s=null}else if(l===31){if(s=u(a),s!==null)return s;s=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return nf=s,null}function Gv(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Zr()){case El:return 2;case Sl:return 8;case Bs:case Jd:return 32;case Nu:return 268435456;default:return 32}default:return 32}}var Km=!1,gr=null,mr=null,pr=null,vc=new Map,Tc=new Map,yr=[],rC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Yv(s,a){switch(s){case"focusin":case"focusout":gr=null;break;case"dragenter":case"dragleave":mr=null;break;case"mouseover":case"mouseout":pr=null;break;case"pointerover":case"pointerout":vc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tc.delete(a.pointerId)}}function Ec(s,a,l,h,m,y){return s===null||s.nativeEvent!==y?(s={blockedOn:a,domEventName:l,eventSystemFlags:h,nativeEvent:y,targetContainers:[m]},a!==null&&(a=Yn(a),a!==null&&Hv(a)),s):(s.eventSystemFlags|=h,a=s.targetContainers,m!==null&&a.indexOf(m)===-1&&a.push(m),s)}function aC(s,a,l,h,m){switch(a){case"focusin":return gr=Ec(gr,s,a,l,h,m),!0;case"dragenter":return mr=Ec(mr,s,a,l,h,m),!0;case"mouseover":return pr=Ec(pr,s,a,l,h,m),!0;case"pointerover":var y=m.pointerId;return vc.set(y,Ec(vc.get(y)||null,s,a,l,h,m)),!0;case"gotpointercapture":return y=m.pointerId,Tc.set(y,Ec(Tc.get(y)||null,s,a,l,h,m)),!0}return!1}function Kv(s){var a=Ni(s.target);if(a!==null){var l=o(a);if(l!==null){if(a=l.tag,a===13){if(a=c(l),a!==null){s.blockedOn=a,ci(s.priority,function(){qv(l)});return}}else if(a===31){if(a=u(l),a!==null){s.blockedOn=a,ci(s.priority,function(){qv(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function sf(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var l=Gm(s.nativeEvent);if(l===null){l=s.nativeEvent;var h=new l.constructor(l.type,l);Pl=h,l.target.dispatchEvent(h),Pl=null}else return a=Yn(l),a!==null&&Hv(a),s.blockedOn=l,!1;a.shift()}return!0}function Wv(s,a,l){sf(s)&&l.delete(a)}function oC(){Km=!1,gr!==null&&sf(gr)&&(gr=null),mr!==null&&sf(mr)&&(mr=null),pr!==null&&sf(pr)&&(pr=null),vc.forEach(Wv),Tc.forEach(Wv)}function rf(s,a){s.blockedOn===a&&(s.blockedOn=null,Km||(Km=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,oC)))}var af=null;function Xv(s){af!==s&&(af=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){af===s&&(af=null);for(var a=0;a<s.length;a+=3){var l=s[a],h=s[a+1],m=s[a+2];if(typeof h!="function"){if(Ym(h||l)===null)continue;break}var y=Yn(l);y!==null&&(s.splice(a,3),a-=3,Gg(y,{pending:!0,data:m,method:l.method,action:h},h,m))}}))}function qo(s){function a(V){return rf(V,s)}gr!==null&&rf(gr,s),mr!==null&&rf(mr,s),pr!==null&&rf(pr,s),vc.forEach(a),Tc.forEach(a);for(var l=0;l<yr.length;l++){var h=yr[l];h.blockedOn===s&&(h.blockedOn=null)}for(;0<yr.length&&(l=yr[0],l.blockedOn===null);)Kv(l),l.blockedOn===null&&yr.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(h=0;h<l.length;h+=3){var m=l[h],y=l[h+1],T=m[We]||null;if(typeof y=="function")T||Xv(l);else if(T){var x=null;if(y&&y.hasAttribute("formAction")){if(m=y,T=y[We]||null)x=T.formAction;else if(Ym(m)!==null)continue}else x=T.action;typeof x=="function"?l[h+1]=x:(l.splice(h,3),h-=3),Xv(l)}}}function Qv(){function s(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(T){return m=T})},focusReset:"manual",scroll:"manual"})}function a(){m!==null&&(m(),m=null),h||setTimeout(l,20)}function l(){if(!h&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,m=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(l,100),function(){h=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),m!==null&&(m(),m=null)}}}function Wm(s){this._internalRoot=s}of.prototype.render=Wm.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(i(409));var l=a.current,h=Bn();Bv(l,h,s,a,null,null)},of.prototype.unmount=Wm.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;Bv(s.current,2,null,s,null,null),jh(),a[Oi]=null}};function of(s){this._internalRoot=s}of.prototype.unstable_scheduleHydration=function(s){if(s){var a=ju();s={blockedOn:null,target:s,priority:a};for(var l=0;l<yr.length&&a!==0&&a<yr[l].priority;l++);yr.splice(l,0,s),l===0&&Kv(s)}};var $v=t.version;if($v!=="19.2.0")throw Error(i(527,$v,"19.2.0"));at.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=d(a),s=s!==null?p(s):null,s=s===null?null:s.stateNode,s};var lC={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lf.isDisabled&&lf.supportsFiber)try{oi=lf.inject(lC),Ze=lf}catch{}}return xc.createRoot=function(s,a){if(!r(s))throw Error(i(299));var l=!1,h="",m=sb,y=rb,T=ab;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError)),a=Uv(s,1,!1,null,null,l,h,null,m,y,T,Qv),s[Oi]=a.current,Im(s),new Wm(a)},xc.hydrateRoot=function(s,a,l){if(!r(s))throw Error(i(299));var h=!1,m="",y=sb,T=rb,x=ab,V=null;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(T=l.onCaughtError),l.onRecoverableError!==void 0&&(x=l.onRecoverableError),l.formState!==void 0&&(V=l.formState)),a=Uv(s,1,!0,a,l??null,h,m,V,y,T,x,Qv),a.context=jv(null),l=a.current,h=Bn(),h=ia(h),m=nr(h),m.callback=null,ir(l,m,h),l=h,a.current.lanes=l,ea(a,l),Wi(a),s[Oi]=a.current,Im(s),new of(a)},xc.version="19.2.0",xc}var oT;function TC(){if(oT)return $m.exports;oT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),$m.exports=vC(),$m.exports}var EC=TC();const SC=cx(EC),xC=()=>{};var lT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux=function(n){const t=[];let e=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?t[e++]=r:r<2048?(t[e++]=r>>6|192,t[e++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),t[e++]=r>>18|240,t[e++]=r>>12&63|128,t[e++]=r>>6&63|128,t[e++]=r&63|128):(t[e++]=r>>12|224,t[e++]=r>>6&63|128,t[e++]=r&63|128)}return t},AC=function(n){const t=[];let e=0,i=0;for(;e<n.length;){const r=n[e++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=n[e++];t[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=n[e++],c=n[e++],u=n[e++],f=((r&7)<<18|(o&63)<<12|(c&63)<<6|u&63)-65536;t[i++]=String.fromCharCode(55296+(f>>10)),t[i++]=String.fromCharCode(56320+(f&1023))}else{const o=n[e++],c=n[e++];t[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|c&63)}}return t.join("")},hx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const o=n[r],c=r+1<n.length,u=c?n[r+1]:0,f=r+2<n.length,d=f?n[r+2]:0,p=o>>2,_=(o&3)<<4|u>>4;let b=(u&15)<<2|d>>6,S=d&63;f||(S=64,c||(b=64)),i.push(e[p],e[_],e[b],e[S])}return i.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(ux(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):AC(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const o=e[n.charAt(r++)],u=r<n.length?e[n.charAt(r)]:0;++r;const d=r<n.length?e[n.charAt(r)]:64;++r;const _=r<n.length?e[n.charAt(r)]:64;if(++r,o==null||u==null||d==null||_==null)throw new wC;const b=o<<2|u>>4;if(i.push(b),d!==64){const S=u<<4&240|d>>2;if(i.push(S),_!==64){const w=d<<6&192|_;i.push(w)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class wC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const RC=function(n){const t=ux(n);return hx.encodeByteArray(t,!0)},Kf=function(n){return RC(n).replace(/\./g,"")},fx=function(n){try{return hx.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC=()=>CC().__FIREBASE_DEFAULTS__,DC=()=>{if(typeof process>"u"||typeof lT>"u")return;const n=lT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},MC=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&fx(n[1]);return t&&JSON.parse(t)},Td=()=>{try{return xC()||IC()||DC()||MC()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},dx=n=>{var t,e;return(e=(t=Td())==null?void 0:t.emulatorHosts)==null?void 0:e[n]},OC=n=>{const t=dx(n);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),i]:[t.substring(0,e),i]},gx=()=>{var n;return(n=Td())==null?void 0:n.config},mx=n=>{var t;return(t=Td())==null?void 0:t[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function px(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NC(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},i=t||"demo-project",r=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Kf(JSON.stringify(e)),Kf(JSON.stringify(c)),""].join(".")}const Hc={};function PC(){const n={prod:[],emulator:[]};for(const t of Object.keys(Hc))Hc[t]?n.emulator.push(t):n.prod.push(t);return n}function VC(n){let t=document.getElementById(n),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),e=!0),{created:e,element:t}}let cT=!1;function yx(n,t){if(typeof window>"u"||typeof document>"u"||!fl(window.location.host)||Hc[n]===t||Hc[n]||cT)return;Hc[n]=t;function e(b){return`__firebase__banner__${b}`}const i="__firebase__banner",o=PC().prod.length>0;function c(){const b=document.getElementById(i);b&&b.remove()}function u(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function f(b,S){b.setAttribute("width","24"),b.setAttribute("id",S),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function d(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{cT=!0,c()},b}function p(b,S){b.setAttribute("id",S),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function _(){const b=VC(i),S=e("text"),w=document.getElementById(S)||document.createElement("span"),A=e("learnmore"),D=document.getElementById(A)||document.createElement("a"),L=e("preprendIcon"),F=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const W=b.element;u(W),p(D,A);const J=d();f(F,L),W.append(F,w,D,J),document.body.appendChild(W)}o?(w.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function LC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pn())}function zC(){var t;const n=(t=Td())==null?void 0:t.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function UC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function jC(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function BC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function FC(){const n=pn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function HC(){return!zC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qC(){try{return typeof indexedDB=="object"}catch{return!1}}function GC(){return new Promise((n,t)=>{try{let e=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),e||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{e=!1},r.onerror=()=>{var o;t(((o=r.error)==null?void 0:o.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC="FirebaseError";class Us extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=YC,Object.setPrototypeOf(this,Us.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yu.prototype.create)}}class yu{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},r=`${this.service}/${t}`,o=this.errors[t],c=o?KC(o,i):"Error",u=`${this.serviceName}: ${c} (${r}).`;return new Us(r,u,i)}}function KC(n,t){return n.replace(WC,(e,i)=>{const r=t[i];return r!=null?String(r):`<${i}?>`})}const WC=/\{\$([^}]+)}/g;function XC(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function Fa(n,t){if(n===t)return!0;const e=Object.keys(n),i=Object.keys(t);for(const r of e){if(!i.includes(r))return!1;const o=n[r],c=t[r];if(uT(o)&&uT(c)){if(!Fa(o,c))return!1}else if(o!==c)return!1}for(const r of i)if(!e.includes(r))return!1;return!0}function uT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _u(n){const t=[];for(const[e,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function Mc(n){const t={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,o]=i.split("=");t[decodeURIComponent(r)]=decodeURIComponent(o)}}),t}function Oc(n){const t=n.indexOf("?");if(!t)return"";const e=n.indexOf("#",t);return n.substring(t,e>0?e:void 0)}function QC(n,t){const e=new $C(n,t);return e.subscribe.bind(e)}class $C{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,i){let r;if(t===void 0&&e===void 0&&i===void 0)throw new Error("Missing Observer.");JC(t,["next","error","complete"])?r=t:r={next:t,error:e,complete:i},r.next===void 0&&(r.next=ep),r.error===void 0&&(r.error=ep),r.complete===void 0&&(r.complete=ep);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function JC(n,t){if(typeof n!="object"||n===null)return!1;for(const e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function ep(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fe(n){return n&&n._delegate?n._delegate:n}class Ha{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const i=new kC;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:e});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(t==null?void 0:t.optional)??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(e2(t))try{this.getOrInitializeService({instanceIdentifier:Oa})}catch{}for(const[e,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(t=Oa){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Oa){return this.instances.has(t)}getOptions(t=Oa){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[o,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);i===u&&c.resolve(r)}return r}onInit(t,e){const i=this.normalizeInstanceIdentifier(e),r=this.onInitCallbacks.get(i)??new Set;r.add(t),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&t(o,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,e){const i=this.onInitCallbacks.get(e);if(i)for(const r of i)try{r(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:t2(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Oa){return this.component?this.component.multipleInstances?t:Oa:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function t2(n){return n===Oa?void 0:n}function e2(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new ZC(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(jt||(jt={}));const i2={debug:jt.DEBUG,verbose:jt.VERBOSE,info:jt.INFO,warn:jt.WARN,error:jt.ERROR,silent:jt.SILENT},s2=jt.INFO,r2={[jt.DEBUG]:"log",[jt.VERBOSE]:"log",[jt.INFO]:"info",[jt.WARN]:"warn",[jt.ERROR]:"error"},a2=(n,t,...e)=>{if(t<n.logLevel)return;const i=new Date().toISOString(),r=r2[t];if(r)console[r](`[${i}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Ty{constructor(t){this.name=t,this._logLevel=s2,this._logHandler=a2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in jt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?i2[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,jt.DEBUG,...t),this._logHandler(this,jt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,jt.VERBOSE,...t),this._logHandler(this,jt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,jt.INFO,...t),this._logHandler(this,jt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,jt.WARN,...t),this._logHandler(this,jt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,jt.ERROR,...t),this._logHandler(this,jt.ERROR,...t)}}const o2=(n,t)=>t.some(e=>n instanceof e);let hT,fT;function l2(){return hT||(hT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function c2(){return fT||(fT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _x=new WeakMap,Ip=new WeakMap,bx=new WeakMap,np=new WeakMap,Ey=new WeakMap;function u2(n){const t=new Promise((e,i)=>{const r=()=>{n.removeEventListener("success",o),n.removeEventListener("error",c)},o=()=>{e(Ir(n.result)),r()},c=()=>{i(n.error),r()};n.addEventListener("success",o),n.addEventListener("error",c)});return t.then(e=>{e instanceof IDBCursor&&_x.set(e,n)}).catch(()=>{}),Ey.set(t,n),t}function h2(n){if(Ip.has(n))return;const t=new Promise((e,i)=>{const r=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",c),n.removeEventListener("abort",c)},o=()=>{e(),r()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",o),n.addEventListener("error",c),n.addEventListener("abort",c)});Ip.set(n,t)}let Dp={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return Ip.get(n);if(t==="objectStoreNames")return n.objectStoreNames||bx.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Ir(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function f2(n){Dp=n(Dp)}function d2(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const i=n.call(ip(this),t,...e);return bx.set(i,t.sort?t.sort():[t]),Ir(i)}:c2().includes(n)?function(...t){return n.apply(ip(this),t),Ir(_x.get(this))}:function(...t){return Ir(n.apply(ip(this),t))}}function g2(n){return typeof n=="function"?d2(n):(n instanceof IDBTransaction&&h2(n),o2(n,l2())?new Proxy(n,Dp):n)}function Ir(n){if(n instanceof IDBRequest)return u2(n);if(np.has(n))return np.get(n);const t=g2(n);return t!==n&&(np.set(n,t),Ey.set(t,n)),t}const ip=n=>Ey.get(n);function m2(n,t,{blocked:e,upgrade:i,blocking:r,terminated:o}={}){const c=indexedDB.open(n,t),u=Ir(c);return i&&c.addEventListener("upgradeneeded",f=>{i(Ir(c.result),f.oldVersion,f.newVersion,Ir(c.transaction),f)}),e&&c.addEventListener("blocked",f=>e(f.oldVersion,f.newVersion,f)),u.then(f=>{o&&f.addEventListener("close",()=>o()),r&&f.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),u}const p2=["get","getKey","getAll","getAllKeys","count"],y2=["put","add","delete","clear"],sp=new Map;function dT(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(sp.get(t))return sp.get(t);const e=t.replace(/FromIndex$/,""),i=t!==e,r=y2.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(r||p2.includes(e)))return;const o=async function(c,...u){const f=this.transaction(c,r?"readwrite":"readonly");let d=f.store;return i&&(d=d.index(u.shift())),(await Promise.all([d[e](...u),r&&f.done]))[0]};return sp.set(t,o),o}f2(n=>({...n,get:(t,e,i)=>dT(t,e)||n.get(t,e,i),has:(t,e)=>!!dT(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(b2(e)){const i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}}function b2(n){const t=n.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Mp="@firebase/app",gT="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps=new Ty("@firebase/app"),v2="@firebase/app-compat",T2="@firebase/analytics-compat",E2="@firebase/analytics",S2="@firebase/app-check-compat",x2="@firebase/app-check",A2="@firebase/auth",w2="@firebase/auth-compat",R2="@firebase/database",C2="@firebase/data-connect",I2="@firebase/database-compat",D2="@firebase/functions",M2="@firebase/functions-compat",O2="@firebase/installations",k2="@firebase/installations-compat",N2="@firebase/messaging",P2="@firebase/messaging-compat",V2="@firebase/performance",L2="@firebase/performance-compat",z2="@firebase/remote-config",U2="@firebase/remote-config-compat",j2="@firebase/storage",B2="@firebase/storage-compat",F2="@firebase/firestore",H2="@firebase/ai",q2="@firebase/firestore-compat",G2="firebase",Y2="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Op="[DEFAULT]",K2={[Mp]:"fire-core",[v2]:"fire-core-compat",[E2]:"fire-analytics",[T2]:"fire-analytics-compat",[x2]:"fire-app-check",[S2]:"fire-app-check-compat",[A2]:"fire-auth",[w2]:"fire-auth-compat",[R2]:"fire-rtdb",[C2]:"fire-data-connect",[I2]:"fire-rtdb-compat",[D2]:"fire-fn",[M2]:"fire-fn-compat",[O2]:"fire-iid",[k2]:"fire-iid-compat",[N2]:"fire-fcm",[P2]:"fire-fcm-compat",[V2]:"fire-perf",[L2]:"fire-perf-compat",[z2]:"fire-rc",[U2]:"fire-rc-compat",[j2]:"fire-gcs",[B2]:"fire-gcs-compat",[F2]:"fire-fst",[q2]:"fire-fst-compat",[H2]:"fire-vertex","fire-js":"fire-js",[G2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wf=new Map,W2=new Map,kp=new Map;function mT(n,t){try{n.container.addComponent(t)}catch(e){Ps.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function nl(n){const t=n.name;if(kp.has(t))return Ps.debug(`There were multiple attempts to register component ${t}.`),!1;kp.set(t,n);for(const e of Wf.values())mT(e,n);for(const e of W2.values())mT(e,n);return!0}function Sy(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function Hn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Dr=new yu("app","Firebase",X2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(t,e,i){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ha("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Dr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dl=Y2;function vx(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const i={name:Op,automaticDataCollectionEnabled:!0,...t},r=i.name;if(typeof r!="string"||!r)throw Dr.create("bad-app-name",{appName:String(r)});if(e||(e=gx()),!e)throw Dr.create("no-options");const o=Wf.get(r);if(o){if(Fa(e,o.options)&&Fa(i,o.config))return o;throw Dr.create("duplicate-app",{appName:r})}const c=new n2(r);for(const f of kp.values())c.addComponent(f);const u=new Q2(e,i,c);return Wf.set(r,u),u}function Tx(n=Op){const t=Wf.get(n);if(!t&&n===Op&&gx())return vx();if(!t)throw Dr.create("no-app",{appName:n});return t}function Mr(n,t,e){let i=K2[n]??n;e&&(i+=`-${e}`);const r=i.match(/\s|\//),o=t.match(/\s|\//);if(r||o){const c=[`Unable to register library "${i}" with version "${t}":`];r&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&c.push("and"),o&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ps.warn(c.join(" "));return}nl(new Ha(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2="firebase-heartbeat-database",J2=1,tu="firebase-heartbeat-store";let rp=null;function Ex(){return rp||(rp=m2($2,J2,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(tu)}catch(e){console.warn(e)}}}}).catch(n=>{throw Dr.create("idb-open",{originalErrorMessage:n.message})})),rp}async function Z2(n){try{const e=(await Ex()).transaction(tu),i=await e.objectStore(tu).get(Sx(n));return await e.done,i}catch(t){if(t instanceof Us)Ps.warn(t.message);else{const e=Dr.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Ps.warn(e.message)}}}async function pT(n,t){try{const i=(await Ex()).transaction(tu,"readwrite");await i.objectStore(tu).put(t,Sx(n)),await i.done}catch(e){if(e instanceof Us)Ps.warn(e.message);else{const i=Dr.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});Ps.warn(i.message)}}}function Sx(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI=1024,eI=30;class nI{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new sI(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,e;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=yT();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(c=>c.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>eI){const c=rI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ps.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=yT(),{heartbeatsToSend:i,unsentEntries:r}=iI(this._heartbeatsCache.heartbeats),o=Kf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Ps.warn(e),""}}}function yT(){return new Date().toISOString().substring(0,10)}function iI(n,t=tI){const e=[];let i=n.slice();for(const r of n){const o=e.find(c=>c.agent===r.agent);if(o){if(o.dates.push(r.date),_T(e)>t){o.dates.pop();break}}else if(e.push({agent:r.agent,dates:[r.date]}),_T(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}class sI{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return qC()?GC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await Z2(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return pT(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return pT(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function _T(n){return Kf(JSON.stringify({version:2,heartbeats:n})).length}function rI(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let i=1;i<n.length;i++)n[i].date<e&&(e=n[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(n){nl(new Ha("platform-logger",t=>new _2(t),"PRIVATE")),nl(new Ha("heartbeat",t=>new nI(t),"PRIVATE")),Mr(Mp,gT,n),Mr(Mp,gT,"esm2020"),Mr("fire-js","")}aI("");var oI="firebase",lI="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mr(oI,lI,"app");function xx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const cI=xx,Ax=new yu("auth","Firebase",xx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xf=new Ty("@firebase/auth");function uI(n,...t){Xf.logLevel<=jt.WARN&&Xf.warn(`Auth (${dl}): ${n}`,...t)}function Cf(n,...t){Xf.logLevel<=jt.ERROR&&Xf.error(`Auth (${dl}): ${n}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(n,...t){throw Ay(n,...t)}function Ei(n,...t){return Ay(n,...t)}function xy(n,t,e){const i={...cI(),[t]:e};return new yu("auth","Firebase",i).create(t,{appName:n.name})}function Ns(n){return xy(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function hI(n,t,e){const i=e;if(!(t instanceof i))throw i.name!==t.constructor.name&&ai(n,"argument-error"),xy(n,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ay(n,...t){if(typeof n!="string"){const e=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(e,...i)}return Ax.create(n,...t)}function St(n,t,...e){if(!n)throw Ay(t,...e)}function Is(n){const t="INTERNAL ASSERTION FAILED: "+n;throw Cf(t),new Error(t)}function Vs(n,t){n||Is(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Np(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function fI(){return bT()==="http:"||bT()==="https:"}function bT(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(fI()||jC()||"connection"in navigator)?navigator.onLine:!0}function gI(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(t,e){this.shortDelay=t,this.longDelay=e,Vs(e>t,"Short delay should be less than long delay!"),this.isMobile=LC()||BC()}get(){return dI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wy(n,t){Vs(n.emulator,"Emulator should always be set here");const{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{static initialize(t,e,i){this.fetchImpl=t,e&&(this.headersImpl=e),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Is("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Is("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Is("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],yI=new bu(3e4,6e4);function Gr(n,t){return n.tenantId&&!t.tenantId?{...t,tenantId:n.tenantId}:t}async function Yr(n,t,e,i,r={}){return Rx(n,r,async()=>{let o={},c={};i&&(t==="GET"?c=i:o={body:JSON.stringify(i)});const u=_u({key:n.config.apiKey,...c}).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const d={method:t,headers:f,...o};return UC()||(d.referrerPolicy="no-referrer"),n.emulatorConfig&&fl(n.emulatorConfig.host)&&(d.credentials="include"),wx.fetch()(await Cx(n,n.config.apiHost,e,u),d)})}async function Rx(n,t,e){n._canInitEmulator=!1;const i={...mI,...t};try{const r=new bI(n),o=await Promise.race([e(),r.promise]);r.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw cf(n,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const u=o.ok?c.errorMessage:c.error.message,[f,d]=u.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw cf(n,"credential-already-in-use",c);if(f==="EMAIL_EXISTS")throw cf(n,"email-already-in-use",c);if(f==="USER_DISABLED")throw cf(n,"user-disabled",c);const p=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw xy(n,p,d);ai(n,p)}}catch(r){if(r instanceof Us)throw r;ai(n,"network-request-failed",{message:String(r)})}}async function vu(n,t,e,i,r={}){const o=await Yr(n,t,e,i,r);return"mfaPendingCredential"in o&&ai(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function Cx(n,t,e,i){const r=`${t}${e}?${i}`,o=n,c=o.config.emulator?wy(n.config,r):`${n.config.apiScheme}://${r}`;return pI.includes(e)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function _I(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class bI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,i)=>{this.timer=setTimeout(()=>i(Ei(this.auth,"network-request-failed")),yI.get())})}}function cf(n,t,e){const i={appName:n.name};e.email&&(i.email=e.email),e.phoneNumber&&(i.phoneNumber=e.phoneNumber);const r=Ei(n,t,i);return r.customData._tokenResponse=e,r}function vT(n){return n!==void 0&&n.enterprise!==void 0}class vI{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return _I(e.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function TI(n,t){return Yr(n,"GET","/v2/recaptchaConfig",Gr(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EI(n,t){return Yr(n,"POST","/v1/accounts:delete",t)}async function Qf(n,t){return Yr(n,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qc(n){if(n)try{const t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function SI(n,t=!1){const e=Fe(n),i=await e.getIdToken(t),r=Ry(i);St(r&&r.exp&&r.auth_time&&r.iat,e.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,c=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:qc(ap(r.auth_time)),issuedAtTime:qc(ap(r.iat)),expirationTime:qc(ap(r.exp)),signInProvider:c||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function ap(n){return Number(n)*1e3}function Ry(n){const[t,e,i]=n.split(".");if(t===void 0||e===void 0||i===void 0)return Cf("JWT malformed, contained fewer than 3 sections"),null;try{const r=fx(e);return r?JSON.parse(r):(Cf("Failed to decode base64 JWT payload"),null)}catch(r){return Cf("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function TT(n){const t=Ry(n);return St(t,"internal-error"),St(typeof t.exp<"u","internal-error"),St(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eu(n,t,e=!1){if(e)return t;try{return await t}catch(i){throw i instanceof Us&&xI(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function xI({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=qc(this.lastLoginAt),this.creationTime=qc(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $f(n){var _;const t=n.auth,e=await n.getIdToken(),i=await eu(n,Qf(t,{idToken:e}));St(i==null?void 0:i.users.length,t,"internal-error");const r=i.users[0];n._notifyReloadListener(r);const o=(_=r.providerUserInfo)!=null&&_.length?Ix(r.providerUserInfo):[],c=RI(n.providerData,o),u=n.isAnonymous,f=!(n.email&&r.passwordHash)&&!(c!=null&&c.length),d=u?f:!1,p={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:c,metadata:new Pp(r.createdAt,r.lastLoginAt),isAnonymous:d};Object.assign(n,p)}async function wI(n){const t=Fe(n);await $f(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function RI(n,t){return[...n.filter(i=>!t.some(r=>r.providerId===i.providerId)),...t]}function Ix(n){return n.map(({providerId:t,...e})=>({providerId:t,uid:e.rawId||"",displayName:e.displayName||null,email:e.email||null,phoneNumber:e.phoneNumber||null,photoURL:e.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CI(n,t){const e=await Rx(n,{},async()=>{const i=_u({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:o}=n.config,c=await Cx(n,r,"/v1/token",`key=${o}`),u=await n._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:u,body:i};return n.emulatorConfig&&fl(n.emulatorConfig.host)&&(f.credentials="include"),wx.fetch()(c,f)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function II(n,t){return Yr(n,"POST","/v2/accounts:revokeToken",Gr(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){St(t.idToken,"internal-error"),St(typeof t.idToken<"u","internal-error"),St(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):TT(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){St(t.length!==0,"internal-error");const e=TT(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(St(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:i,refreshToken:r,expiresIn:o}=await CI(t,e);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(t,e,i){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,e){const{refreshToken:i,accessToken:r,expirationTime:o}=e,c=new $o;return i&&(St(typeof i=="string","internal-error",{appName:t}),c.refreshToken=i),r&&(St(typeof r=="string","internal-error",{appName:t}),c.accessToken=r),o&&(St(typeof o=="number","internal-error",{appName:t}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new $o,this.toJSON())}_performRefresh(){return Is("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function br(n,t){St(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}class vi{constructor({uid:t,auth:e,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new AI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=e,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Pp(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const e=await eu(this,this.stsTokenManager.getToken(this.auth,t));return St(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return SI(this,t)}reload(){return wI(this)}_assign(t){this!==t&&(St(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>({...e})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new vi({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return e.metadata._copy(this.metadata),e}_onReload(t){St(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),e&&await $f(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Hn(this.auth.app))return Promise.reject(Ns(this.auth));const t=await this.getIdToken();return await eu(this,EI(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){const i=e.displayName??void 0,r=e.email??void 0,o=e.phoneNumber??void 0,c=e.photoURL??void 0,u=e.tenantId??void 0,f=e._redirectEventId??void 0,d=e.createdAt??void 0,p=e.lastLoginAt??void 0,{uid:_,emailVerified:b,isAnonymous:S,providerData:w,stsTokenManager:A}=e;St(_&&A,t,"internal-error");const D=$o.fromJSON(this.name,A);St(typeof _=="string",t,"internal-error"),br(i,t.name),br(r,t.name),St(typeof b=="boolean",t,"internal-error"),St(typeof S=="boolean",t,"internal-error"),br(o,t.name),br(c,t.name),br(u,t.name),br(f,t.name),br(d,t.name),br(p,t.name);const L=new vi({uid:_,auth:t,email:r,emailVerified:b,displayName:i,isAnonymous:S,photoURL:c,phoneNumber:o,tenantId:u,stsTokenManager:D,createdAt:d,lastLoginAt:p});return w&&Array.isArray(w)&&(L.providerData=w.map(F=>({...F}))),f&&(L._redirectEventId=f),L}static async _fromIdTokenResponse(t,e,i=!1){const r=new $o;r.updateFromServerResponse(e);const o=new vi({uid:e.localId,auth:t,stsTokenManager:r,isAnonymous:i});return await $f(o),o}static async _fromGetAccountInfoResponse(t,e,i){const r=e.users[0];St(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?Ix(r.providerUserInfo):[],c=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),u=new $o;u.updateFromIdToken(i);const f=new vi({uid:r.localId,auth:t,stsTokenManager:u,isAnonymous:c}),d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new Pp(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(f,d),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET=new Map;function Ds(n){Vs(n instanceof Function,"Expected a class definition");let t=ET.get(n);return t?(Vs(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,ET.set(n,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}Dx.type="NONE";const ST=Dx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function If(n,t,e){return`firebase:${n}:${t}:${e}`}class Jo{constructor(t,e,i){this.persistence=t,this.auth=e,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=If(this.userKey,r.apiKey,o),this.fullPersistenceKey=If("persistence",r.apiKey,o),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await Qf(this.auth,{idToken:t}).catch(()=>{});return e?vi._fromGetAccountInfoResponse(this.auth,e,t):null}return vi._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,i="authUser"){if(!e.length)return new Jo(Ds(ST),t,i);const r=(await Promise.all(e.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let o=r[0]||Ds(ST);const c=If(i,t.config.apiKey,t.name);let u=null;for(const d of e)try{const p=await d._get(c);if(p){let _;if(typeof p=="string"){const b=await Qf(t,{idToken:p}).catch(()=>{});if(!b)break;_=await vi._fromGetAccountInfoResponse(t,b,p)}else _=vi._fromJSON(t,p);d!==o&&(u=_),o=d;break}}catch{}const f=r.filter(d=>d._shouldAllowMigration);return!o._shouldAllowMigration||!f.length?new Jo(o,t,i):(o=f[0],u&&await o._set(c,u.toJSON()),await Promise.all(e.map(async d=>{if(d!==o)try{await d._remove(c)}catch{}})),new Jo(o,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(n){const t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Nx(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Mx(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Vx(t))return"Blackberry";if(Lx(t))return"Webos";if(Ox(t))return"Safari";if((t.includes("chrome/")||kx(t))&&!t.includes("edge/"))return"Chrome";if(Px(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(e);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Mx(n=pn()){return/firefox\//i.test(n)}function Ox(n=pn()){const t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function kx(n=pn()){return/crios\//i.test(n)}function Nx(n=pn()){return/iemobile/i.test(n)}function Px(n=pn()){return/android/i.test(n)}function Vx(n=pn()){return/blackberry/i.test(n)}function Lx(n=pn()){return/webos/i.test(n)}function Cy(n=pn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function DI(n=pn()){var t;return Cy(n)&&!!((t=window.navigator)!=null&&t.standalone)}function MI(){return FC()&&document.documentMode===10}function zx(n=pn()){return Cy(n)||Px(n)||Lx(n)||Vx(n)||/windows phone/i.test(n)||Nx(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ux(n,t=[]){let e;switch(n){case"Browser":e=xT(pn());break;case"Worker":e=`${xT(pn())}-${n}`;break;default:e=n}const i=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${dl}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const i=o=>new Promise((c,u)=>{try{const f=t(o);c(f)}catch(f){u(f)}});i.onAbort=e,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const i of this.queue)await i(t),i.onAbort&&e.push(i.onAbort)}catch(i){e.reverse();for(const r of e)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kI(n,t={}){return Yr(n,"GET","/v2/passwordPolicy",Gr(n,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI=6;class PI{constructor(t){var i;const e=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=e.minPasswordLength??NI,e.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=e.maxPasswordLength),e.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=e.containsLowercaseCharacter),e.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=e.containsUppercaseCharacter),e.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=e.containsNumericCharacter),e.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=e.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=t.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const e={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,e),this.validatePasswordCharacterOptions(t,e),e.isValid&&(e.isValid=e.meetsMinPasswordLength??!0),e.isValid&&(e.isValid=e.meetsMaxPasswordLength??!0),e.isValid&&(e.isValid=e.containsLowercaseLetter??!0),e.isValid&&(e.isValid=e.containsUppercaseLetter??!0),e.isValid&&(e.isValid=e.containsNumericCharacter??!0),e.isValid&&(e.isValid=e.containsNonAlphanumericCharacter??!0),e}validatePasswordLengthOptions(t,e){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(e.meetsMinPasswordLength=t.length>=i),r&&(e.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let i;for(let r=0;r<t.length;r++)i=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(e,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,e,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(t,e,i,r){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new AT(this),this.idTokenSubscription=new AT(this),this.beforeStateQueue=new OI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ax,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=Ds(e)),this._initializationPromise=this.queue(async()=>{var i,r,o;if(!this._deleted&&(this.persistenceManager=await Jo.create(this,t),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await Qf(this,{idToken:t}),i=await vi._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(i)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var o;if(Hn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(u,u))}):this.directlySetCurrentUser(null)}const e=await this.assertedPersistence.getCurrentUser();let i=e,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(o=this.redirectUser)==null?void 0:o._redirectEventId,u=i==null?void 0:i._redirectEventId,f=await this.tryRedirectSignIn(t);(!c||c===u)&&(f!=null&&f.user)&&(i=f.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(c){i=e,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return St(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await $f(t)}catch(e){if((e==null?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=gI()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Hn(this.app))return Promise.reject(Ns(this));const e=t?Fe(t):null;return e&&St(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&St(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Hn(this.app)?Promise.reject(Ns(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Hn(this.app)?Promise.reject(Ns(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ds(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await kI(this),e=new PI(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new yu("auth","Firebase",t())}onAuthStateChanged(t,e,i){return this.registerStateListener(this.authStateSubscription,t,e,i)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,i){return this.registerStateListener(this.idTokenSubscription,t,e,i)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(i.tenantId=this.tenantId),await II(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,e){const i=await this.getOrInitRedirectPersistenceManager(e);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&Ds(t)||this._popupRedirectResolver;St(e,this,"argument-error"),this.redirectPersistenceManager=await Jo.create(this,[Ds(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,i;return this._isInitialized&&await this.queue(async()=>{}),((e=this._currentUser)==null?void 0:e._redirectEventId)===t?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((e=this.currentUser)==null?void 0:e.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,i,r){if(this._deleted)return()=>{};const o=typeof e=="function"?e:e.next.bind(e);let c=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(St(u,this,"internal-error"),u.then(()=>{c||o(this.currentUser)}),typeof e=="function"){const f=t.addObserver(e,i,r);return()=>{c=!0,f()}}else{const f=t.addObserver(e);return()=>{c=!0,f()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return St(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Ux(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const e=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());e&&(t["X-Firebase-Client"]=e);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(Hn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:e.getToken());return t!=null&&t.error&&uI(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Kr(n){return Fe(n)}class AT{constructor(t){this.auth=t,this.observer=null,this.addObserver=QC(e=>this.observer=e)}get next(){return St(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ed={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function LI(n){Ed=n}function jx(n){return Ed.loadJS(n)}function zI(){return Ed.recaptchaEnterpriseScript}function UI(){return Ed.gapiScript}function jI(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class BI{constructor(){this.enterprise=new FI}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class FI{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}const HI="recaptcha-enterprise",Bx="NO_RECAPTCHA";class qI{constructor(t){this.type=HI,this.auth=Kr(t)}async verify(t="verify",e=!1){async function i(o){if(!e){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,u)=>{TI(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const d=new vI(f);return o.tenantId==null?o._agentRecaptchaConfig=d:o._tenantRecaptchaConfigs[o.tenantId]=d,c(d.siteKey)}}).catch(f=>{u(f)})})}function r(o,c,u){const f=window.grecaptcha;vT(f)?f.enterprise.ready(()=>{f.enterprise.execute(o,{action:t}).then(d=>{c(d)}).catch(()=>{c(Bx)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new BI().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{i(this.auth).then(u=>{if(!e&&vT(window.grecaptcha))r(u,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let f=zI();f.length!==0&&(f+=u),jx(f).then(()=>{r(u,o,c)}).catch(d=>{c(d)})}}).catch(u=>{c(u)})})}}async function wT(n,t,e,i=!1,r=!1){const o=new qI(n);let c;if(r)c=Bx;else try{c=await o.verify(e)}catch{c=await o.verify(e,!0)}const u={...t};if(e==="mfaSmsEnrollment"||e==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const f=u.phoneEnrollmentInfo.phoneNumber,d=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:d,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const f=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return i?Object.assign(u,{captchaResp:c}):Object.assign(u,{captchaResponse:c}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function Vp(n,t,e,i,r){var o;if((o=n._getRecaptchaConfig())!=null&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await wT(n,t,e,e==="getOobCode");return i(n,c)}else return i(n,t).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${e} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await wT(n,t,e,e==="getOobCode");return i(n,u)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GI(n,t){const e=Sy(n,"auth");if(e.isInitialized()){const r=e.getImmediate(),o=e.getOptions();if(Fa(o,t??{}))return r;ai(r,"already-initialized")}return e.initialize({options:t})}function YI(n,t){const e=(t==null?void 0:t.persistence)||[],i=(Array.isArray(e)?e:[e]).map(Ds);t!=null&&t.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function KI(n,t,e){const i=Kr(n);St(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!1,o=Fx(t),{host:c,port:u}=WI(t),f=u===null?"":`:${u}`,d={url:`${o}//${c}${f}/`},p=Object.freeze({host:c,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){St(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),St(Fa(d,i.config.emulator)&&Fa(p,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=d,i.emulatorConfig=p,i.settings.appVerificationDisabledForTesting=!0,fl(c)?(px(`${o}//${c}${f}`),yx("Auth",!0)):XI()}function Fx(n){const t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function WI(n){const t=Fx(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};const i=e[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:RT(i.substr(o.length+1))}}else{const[o,c]=i.split(":");return{host:o,port:RT(c)}}}function RT(n){if(!n)return null;const t=Number(n);return isNaN(t)?null:t}function XI(){function n(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return Is("not implemented")}_getIdTokenResponse(t){return Is("not implemented")}_linkToIdToken(t,e){return Is("not implemented")}_getReauthenticationResolver(t){return Is("not implemented")}}async function QI(n,t){return Yr(n,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $I(n,t){return vu(n,"POST","/v1/accounts:signInWithPassword",Gr(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JI(n,t){return vu(n,"POST","/v1/accounts:signInWithEmailLink",Gr(n,t))}async function ZI(n,t){return vu(n,"POST","/v1/accounts:signInWithEmailLink",Gr(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu extends Iy{constructor(t,e,i,r=null){super("password",i),this._email=t,this._password=e,this._tenantId=r}static _fromEmailAndPassword(t,e){return new nu(t,e,"password")}static _fromEmailAndCode(t,e,i=null){return new nu(t,e,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;if(e!=null&&e.email&&(e!=null&&e.password)){if(e.signInMethod==="password")return this._fromEmailAndPassword(e.email,e.password);if(e.signInMethod==="emailLink")return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vp(t,e,"signInWithPassword",$I);case"emailLink":return JI(t,{email:this._email,oobCode:this._password});default:ai(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":const i={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vp(t,i,"signUpPassword",QI);case"emailLink":return ZI(t,{idToken:e,email:this._email,oobCode:this._password});default:ai(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zo(n,t){return vu(n,"POST","/v1/accounts:signInWithIdp",Gr(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD="http://localhost";class qa extends Iy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new qa(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):ai("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:r,...o}=e;if(!i||!r)return null;const c=new qa(i,r);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(t){const e=this.buildRequest();return Zo(t,e)}_linkToIdToken(t,e){const i=this.buildRequest();return i.idToken=e,Zo(t,i)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Zo(t,e)}buildRequest(){const t={requestUri:tD,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=_u(e)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eD(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function nD(n){const t=Mc(Oc(n)).link,e=t?Mc(Oc(t)).deep_link_id:null,i=Mc(Oc(n)).deep_link_id;return(i?Mc(Oc(i)).link:null)||i||e||t||n}class Dy{constructor(t){const e=Mc(Oc(t)),i=e.apiKey??null,r=e.oobCode??null,o=eD(e.mode??null);St(i&&r&&o,"argument-error"),this.apiKey=i,this.operation=o,this.code=r,this.continueUrl=e.continueUrl??null,this.languageCode=e.lang??null,this.tenantId=e.tenantId??null}static parseLink(t){const e=nD(t);try{return new Dy(e)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(){this.providerId=gl.PROVIDER_ID}static credential(t,e){return nu._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const i=Dy.parseLink(e);return St(i,"argument-error"),nu._fromEmailAndCode(t,i.code,i.tenantId)}}gl.PROVIDER_ID="password";gl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";gl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu extends My{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends Tu{constructor(){super("facebook.com")}static credential(t){return qa._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return vr.credentialFromTaggedObject(t)}static credentialFromError(t){return vr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return vr.credential(t.oauthAccessToken)}catch{return null}}}vr.FACEBOOK_SIGN_IN_METHOD="facebook.com";vr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs extends Tu{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return qa._fromParams({providerId:Cs.PROVIDER_ID,signInMethod:Cs.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return Cs.credentialFromTaggedObject(t)}static credentialFromError(t){return Cs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:i}=t;if(!e&&!i)return null;try{return Cs.credential(e,i)}catch{return null}}}Cs.GOOGLE_SIGN_IN_METHOD="google.com";Cs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr extends Tu{constructor(){super("github.com")}static credential(t){return qa._fromParams({providerId:Tr.PROVIDER_ID,signInMethod:Tr.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Tr.credentialFromTaggedObject(t)}static credentialFromError(t){return Tr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Tr.credential(t.oauthAccessToken)}catch{return null}}}Tr.GITHUB_SIGN_IN_METHOD="github.com";Tr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er extends Tu{constructor(){super("twitter.com")}static credential(t,e){return qa._fromParams({providerId:Er.PROVIDER_ID,signInMethod:Er.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return Er.credentialFromTaggedObject(t)}static credentialFromError(t){return Er.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:i}=t;if(!e||!i)return null;try{return Er.credential(e,i)}catch{return null}}}Er.TWITTER_SIGN_IN_METHOD="twitter.com";Er.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iD(n,t){return vu(n,"POST","/v1/accounts:signUp",Gr(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,i,r=!1){const o=await vi._fromIdTokenResponse(t,i,r),c=CT(i);return new Ga({user:o,providerId:c,_tokenResponse:i,operationType:e})}static async _forOperation(t,e,i){await t._updateTokensIfNecessary(i,!0);const r=CT(i);return new Ga({user:t,providerId:r,_tokenResponse:i,operationType:e})}}function CT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf extends Us{constructor(t,e,i,r){super(e.code,e.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Jf.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:e.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,e,i,r){return new Jf(t,e,i,r)}}function Hx(n,t,e,i){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Jf._fromErrorAndOperation(n,o,t,i):o})}async function sD(n,t,e=!1){const i=await eu(n,t._linkToIdToken(n.auth,await n.getIdToken()),e);return Ga._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rD(n,t,e=!1){const{auth:i}=n;if(Hn(i.app))return Promise.reject(Ns(i));const r="reauthenticate";try{const o=await eu(n,Hx(i,r,t,n),e);St(o.idToken,i,"internal-error");const c=Ry(o.idToken);St(c,i,"internal-error");const{sub:u}=c;return St(n.uid===u,i,"user-mismatch"),Ga._forOperation(n,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&ai(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qx(n,t,e=!1){if(Hn(n.app))return Promise.reject(Ns(n));const i="signIn",r=await Hx(n,i,t),o=await Ga._fromIdTokenResponse(n,i,r);return e||await n._updateCurrentUser(o.user),o}async function aD(n,t){return qx(Kr(n),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gx(n){const t=Kr(n);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function oD(n,t,e){if(Hn(n.app))return Promise.reject(Ns(n));const i=Kr(n),c=await Vp(i,{returnSecureToken:!0,email:t,password:e,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",iD).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&Gx(n),f}),u=await Ga._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(u.user),u}function lD(n,t,e){return Hn(n.app)?Promise.reject(Ns(n)):aD(Fe(n),gl.credential(t,e)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Gx(n),i})}function cD(n,t,e,i){return Fe(n).onIdTokenChanged(t,e,i)}function uD(n,t,e){return Fe(n).beforeAuthStateChanged(t,e)}function hD(n,t,e,i){return Fe(n).onAuthStateChanged(t,e,i)}function fD(n){return Fe(n).signOut()}const Zf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(Zf,"1"),this.storage.removeItem(Zf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dD=1e3,gD=10;class Kx extends Yx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=zx(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const i=this.storage.getItem(e),r=this.localCache[e];i!==r&&t(e,r,i)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((c,u,f)=>{this.notifyListeners(c,f)});return}const i=t.key;e?this.detachListener():this.stopPolling();const r=()=>{const c=this.storage.getItem(i);!e&&this.localCache[i]===c||this.notifyListeners(i,c)},o=this.storage.getItem(i);MI()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,gD):r()}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:i}),!0)})},dD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}Kx.type="LOCAL";const mD=Kx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx extends Yx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}Wx.type="SESSION";const Xx=Wx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pD(n){return Promise.all(n.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(r=>r.isListeningto(t));if(e)return e;const i=new Sd(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:i,eventType:r,data:o}=e.data,c=this.handlersMap[r];if(!(c!=null&&c.size))return;e.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const u=Array.from(c).map(async d=>d(e.origin,o)),f=await pD(u);e.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:f})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Sd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(n="",t=10){let e="";for(let i=0;i<t;i++)e+=Math.floor(Math.random()*10);return n+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,c;return new Promise((u,f)=>{const d=Oy("",20);r.port1.start();const p=setTimeout(()=>{f(new Error("unsupported_event"))},i);c={messageChannel:r,onMessage(_){const b=_;if(b.data.eventId===d)switch(b.data.status){case"ack":clearTimeout(p),o=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(b.data.response);break;default:clearTimeout(p),clearTimeout(o),f(new Error("invalid_response"));break}}},this.handlers.add(c),r.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:d,data:e},[r.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ji(){return window}function _D(n){Ji().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qx(){return typeof Ji().WorkerGlobalScope<"u"&&typeof Ji().importScripts=="function"}async function bD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function vD(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function TD(){return Qx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x="firebaseLocalStorageDb",ED=1,td="firebaseLocalStorage",Jx="fbase_key";class Eu{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function xd(n,t){return n.transaction([td],t?"readwrite":"readonly").objectStore(td)}function SD(){const n=indexedDB.deleteDatabase($x);return new Eu(n).toPromise()}function Lp(){const n=indexedDB.open($x,ED);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(td,{keyPath:Jx})}catch(r){e(r)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(td)?t(i):(i.close(),await SD(),t(await Lp()))})})}async function IT(n,t,e){const i=xd(n,!0).put({[Jx]:t,value:e});return new Eu(i).toPromise()}async function xD(n,t){const e=xd(n,!1).get(t),i=await new Eu(e).toPromise();return i===void 0?null:i.value}function DT(n,t){const e=xd(n,!0).delete(t);return new Eu(e).toPromise()}const AD=800,wD=3;class Zx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Lp(),this.db)}async _withRetries(t){let e=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(e++>wD)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Qx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Sd._getInstance(TD()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){var e,i;if(this.activeServiceWorker=await bD(),!this.activeServiceWorker)return;this.sender=new yD(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(e=t[0])!=null&&e.fulfilled&&(i=t[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||vD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Lp();return await IT(t,Zf,"1"),await DT(t,Zf),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(i=>IT(i,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(i=>xD(i,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>DT(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(r=>{const o=xd(r,!1).getAll();return new Eu(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],i=new Set;if(t.length!==0)for(const{fbase_key:r,value:o}of t)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),e.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),e.push(r));return e}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),AD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Zx.type="LOCAL";const RD=Zx;new bu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tA(n,t){return t?Ds(t):(St(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky extends Iy{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Zo(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Zo(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Zo(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function CD(n){return qx(n.auth,new ky(n),n.bypassAuthState)}function ID(n){const{auth:t,user:e}=n;return St(e,t,"internal-error"),rD(e,new ky(n),n.bypassAuthState)}async function DD(n){const{auth:t,user:e}=n;return St(e,t,"internal-error"),sD(e,new ky(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(t,e,i,r,o=!1){this.auth=t,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:i,postBody:r,tenantId:o,error:c,type:u}=t;if(c){this.reject(c);return}const f={auth:this.auth,requestUri:e,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(f))}catch(d){this.reject(d)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return CD;case"linkViaPopup":case"linkViaRedirect":return DD;case"reauthViaPopup":case"reauthViaRedirect":return ID;default:ai(this.auth,"internal-error")}}resolve(t){Vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD=new bu(2e3,1e4);async function OD(n,t,e){if(Hn(n.app))return Promise.reject(Ei(n,"operation-not-supported-in-this-environment"));const i=Kr(n);hI(n,t,My);const r=tA(i,e);return new Pa(i,"signInViaPopup",t,r).executeNotNull()}class Pa extends eA{constructor(t,e,i,r,o){super(t,e,r,o),this.provider=i,this.authWindow=null,this.pollId=null,Pa.currentPopupAction&&Pa.currentPopupAction.cancel(),Pa.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return St(t,this.auth,"internal-error"),t}async onExecution(){Vs(this.filter.length===1,"Popup operations only handle one event");const t=Oy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Ei(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(Ei(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Pa.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,i;if((i=(e=this.authWindow)==null?void 0:e.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ei(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,MD.get())};t()}}Pa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD="pendingRedirect",Df=new Map;class ND extends eA{constructor(t,e,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,i),this.eventId=null}async execute(){let t=Df.get(this.auth._key());if(!t){try{const i=await PD(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(e){t=()=>Promise.reject(e)}Df.set(this.auth._key(),t)}return this.bypassAuthState||Df.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function PD(n,t){const e=zD(t),i=LD(n);if(!await i._isAvailable())return!1;const r=await i._get(e)==="true";return await i._remove(e),r}function VD(n,t){Df.set(n._key(),t)}function LD(n){return Ds(n._redirectPersistence)}function zD(n){return If(kD,n.config.apiKey,n.name)}async function UD(n,t,e=!1){if(Hn(n.app))return Promise.reject(Ns(n));const i=Kr(n),r=tA(i,t),c=await new ND(i,r,e).execute();return c&&!e&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,t)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jD=600*1e3;class BD{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(e=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!FD(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var i;if(t.error&&!nA(t)){const r=((i=t.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";e.onError(Ei(this.auth,r))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const i=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=jD&&this.cachedEventUids.clear(),this.cachedEventUids.has(MT(t))}saveEventToCache(t){this.cachedEventUids.add(MT(t)),this.lastProcessedEventTime=Date.now()}}function MT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function nA({type:n,error:t}){return n==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function FD(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nA(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HD(n,t={}){return Yr(n,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,GD=/^https?/;async function YD(n){if(n.config.emulator)return;const{authorizedDomains:t}=await HD(n);for(const e of t)try{if(KD(e))return}catch{}ai(n,"unauthorized-domain")}function KD(n){const t=Np(),{protocol:e,hostname:i}=new URL(t);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&c.hostname===i}if(!GD.test(e))return!1;if(qD.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD=new bu(3e4,6e4);function OT(){const n=Ji().___jsl;if(n!=null&&n.H){for(const t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function XD(n){return new Promise((t,e)=>{var r,o,c;function i(){OT(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{OT(),e(Ei(n,"network-request-failed"))},timeout:WD.get()})}if((o=(r=Ji().gapi)==null?void 0:r.iframes)!=null&&o.Iframe)t(gapi.iframes.getContext());else if((c=Ji().gapi)!=null&&c.load)i();else{const u=jI("iframefcb");return Ji()[u]=()=>{gapi.load?i():e(Ei(n,"network-request-failed"))},jx(`${UI()}?onload=${u}`).catch(f=>e(f))}}).catch(t=>{throw Mf=null,t})}let Mf=null;function QD(n){return Mf=Mf||XD(n),Mf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $D=new bu(5e3,15e3),JD="__/auth/iframe",ZD="emulator/auth/iframe",tM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},eM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nM(n){const t=n.config;St(t.authDomain,n,"auth-domain-config-required");const e=t.emulator?wy(t,ZD):`https://${n.config.authDomain}/${JD}`,i={apiKey:t.apiKey,appName:n.name,v:dl},r=eM.get(n.config.apiHost);r&&(i.eid=r);const o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${e}?${_u(i).slice(1)}`}async function iM(n){const t=await QD(n),e=Ji().gapi;return St(e,n,"internal-error"),t.open({where:document.body,url:nM(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tM,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const c=Ei(n,"network-request-failed"),u=Ji().setTimeout(()=>{o(c)},$D.get());function f(){Ji().clearTimeout(u),r(i)}i.ping(f).then(f,()=>{o(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},rM=500,aM=600,oM="_blank",lM="http://localhost";class kT{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function cM(n,t,e,i=rM,r=aM){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const f={...sM,width:i.toString(),height:r.toString(),top:o,left:c},d=pn().toLowerCase();e&&(u=kx(d)?oM:e),Mx(d)&&(t=t||lM,f.scrollbars="yes");const p=Object.entries(f).reduce((b,[S,w])=>`${b}${S}=${w},`,"");if(DI(d)&&u!=="_self")return uM(t||"",u),new kT(null);const _=window.open(t||"",u,p);St(_,n,"popup-blocked");try{_.focus()}catch{}return new kT(_)}function uM(n,t){const e=document.createElement("a");e.href=n,e.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM="__/auth/handler",fM="emulator/auth/handler",dM=encodeURIComponent("fac");async function NT(n,t,e,i,r,o){St(n.config.authDomain,n,"auth-domain-config-required"),St(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:i,v:dl,eventId:r};if(t instanceof My){t.setDefaultLanguage(n.languageCode),c.providerId=t.providerId||"",XC(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[p,_]of Object.entries({}))c[p]=_}if(t instanceof Tu){const p=t.getScopes().filter(_=>_!=="");p.length>0&&(c.scopes=p.join(","))}n.tenantId&&(c.tid=n.tenantId);const u=c;for(const p of Object.keys(u))u[p]===void 0&&delete u[p];const f=await n._getAppCheckToken(),d=f?`#${dM}=${encodeURIComponent(f)}`:"";return`${gM(n)}?${_u(u).slice(1)}${d}`}function gM({config:n}){return n.emulator?wy(n,fM):`https://${n.authDomain}/${hM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op="webStorageSupport";class mM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Xx,this._completeRedirectFn=UD,this._overrideRedirectResult=VD}async _openPopup(t,e,i,r){var c;Vs((c=this.eventManagers[t._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const o=await NT(t,e,i,Np(),r);return cM(t,o,Oy())}async _openRedirect(t,e,i,r){await this._originValidation(t);const o=await NT(t,e,i,Np(),r);return _D(o),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:r,promise:o}=this.eventManagers[e];return r?Promise.resolve(r):(Vs(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(t);return this.eventManagers[e]={promise:i},i.catch(()=>{delete this.eventManagers[e]}),i}async initAndGetManager(t){const e=await iM(t),i=new BD(t);return e.register("authEvent",r=>(St(r==null?void 0:r.authEvent,t,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=e,i}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(op,{type:op},r=>{var c;const o=(c=r==null?void 0:r[0])==null?void 0:c[op];o!==void 0&&e(!!o),ai(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=YD(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return zx()||Ox()||Cy()}}const pM=mM;var PT="@firebase/auth",VT="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){St(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _M(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function bM(n){nl(new Ha("auth",(t,{options:e})=>{const i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),o=t.getProvider("app-check-internal"),{apiKey:c,authDomain:u}=i.options;St(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const f={apiKey:c,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ux(n)},d=new VI(i,r,o,f);return YI(d,e),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,i)=>{t.getProvider("auth-internal").initialize()})),nl(new Ha("auth-internal",t=>{const e=Kr(t.getProvider("auth").getImmediate());return(i=>new yM(i))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),Mr(PT,VT,_M(n)),Mr(PT,VT,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM=300,TM=mx("authIdTokenMaxAge")||vM;let LT=null;const EM=n=>async t=>{const e=t&&await t.getIdTokenResult(),i=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(i&&i>TM)return;const r=e==null?void 0:e.token;LT!==r&&(LT=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function SM(n=Tx()){const t=Sy(n,"auth");if(t.isInitialized())return t.getImmediate();const e=GI(n,{popupRedirectResolver:pM,persistence:[RD,mD,Xx]}),i=mx("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const c=EM(o.toString());uD(e,c,()=>c(e.currentUser)),cD(e,u=>c(u))}}const r=dx("auth");return r&&KI(e,`http://${r}`),e}function xM(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}LI({loadJS(n){return new Promise((t,e)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=t,i.onerror=r=>{const o=Ei("internal-error");o.customData=r,e(o)},i.type="text/javascript",i.charset="UTF-8",xM().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});bM("Browser");var zT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Or,iA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(I,R){function M(){}M.prototype=R.prototype,I.F=R.prototype,I.prototype=new M,I.prototype.constructor=I,I.D=function(P,N,z){for(var k=Array(arguments.length-2),kt=2;kt<arguments.length;kt++)k[kt-2]=arguments[kt];return R.prototype[N].apply(P,k)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(i,e),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,R,M){M||(M=0);const P=Array(16);if(typeof R=="string")for(var N=0;N<16;++N)P[N]=R.charCodeAt(M++)|R.charCodeAt(M++)<<8|R.charCodeAt(M++)<<16|R.charCodeAt(M++)<<24;else for(N=0;N<16;++N)P[N]=R[M++]|R[M++]<<8|R[M++]<<16|R[M++]<<24;R=I.g[0],M=I.g[1],N=I.g[2];let z=I.g[3],k;k=R+(z^M&(N^z))+P[0]+3614090360&4294967295,R=M+(k<<7&4294967295|k>>>25),k=z+(N^R&(M^N))+P[1]+3905402710&4294967295,z=R+(k<<12&4294967295|k>>>20),k=N+(M^z&(R^M))+P[2]+606105819&4294967295,N=z+(k<<17&4294967295|k>>>15),k=M+(R^N&(z^R))+P[3]+3250441966&4294967295,M=N+(k<<22&4294967295|k>>>10),k=R+(z^M&(N^z))+P[4]+4118548399&4294967295,R=M+(k<<7&4294967295|k>>>25),k=z+(N^R&(M^N))+P[5]+1200080426&4294967295,z=R+(k<<12&4294967295|k>>>20),k=N+(M^z&(R^M))+P[6]+2821735955&4294967295,N=z+(k<<17&4294967295|k>>>15),k=M+(R^N&(z^R))+P[7]+4249261313&4294967295,M=N+(k<<22&4294967295|k>>>10),k=R+(z^M&(N^z))+P[8]+1770035416&4294967295,R=M+(k<<7&4294967295|k>>>25),k=z+(N^R&(M^N))+P[9]+2336552879&4294967295,z=R+(k<<12&4294967295|k>>>20),k=N+(M^z&(R^M))+P[10]+4294925233&4294967295,N=z+(k<<17&4294967295|k>>>15),k=M+(R^N&(z^R))+P[11]+2304563134&4294967295,M=N+(k<<22&4294967295|k>>>10),k=R+(z^M&(N^z))+P[12]+1804603682&4294967295,R=M+(k<<7&4294967295|k>>>25),k=z+(N^R&(M^N))+P[13]+4254626195&4294967295,z=R+(k<<12&4294967295|k>>>20),k=N+(M^z&(R^M))+P[14]+2792965006&4294967295,N=z+(k<<17&4294967295|k>>>15),k=M+(R^N&(z^R))+P[15]+1236535329&4294967295,M=N+(k<<22&4294967295|k>>>10),k=R+(N^z&(M^N))+P[1]+4129170786&4294967295,R=M+(k<<5&4294967295|k>>>27),k=z+(M^N&(R^M))+P[6]+3225465664&4294967295,z=R+(k<<9&4294967295|k>>>23),k=N+(R^M&(z^R))+P[11]+643717713&4294967295,N=z+(k<<14&4294967295|k>>>18),k=M+(z^R&(N^z))+P[0]+3921069994&4294967295,M=N+(k<<20&4294967295|k>>>12),k=R+(N^z&(M^N))+P[5]+3593408605&4294967295,R=M+(k<<5&4294967295|k>>>27),k=z+(M^N&(R^M))+P[10]+38016083&4294967295,z=R+(k<<9&4294967295|k>>>23),k=N+(R^M&(z^R))+P[15]+3634488961&4294967295,N=z+(k<<14&4294967295|k>>>18),k=M+(z^R&(N^z))+P[4]+3889429448&4294967295,M=N+(k<<20&4294967295|k>>>12),k=R+(N^z&(M^N))+P[9]+568446438&4294967295,R=M+(k<<5&4294967295|k>>>27),k=z+(M^N&(R^M))+P[14]+3275163606&4294967295,z=R+(k<<9&4294967295|k>>>23),k=N+(R^M&(z^R))+P[3]+4107603335&4294967295,N=z+(k<<14&4294967295|k>>>18),k=M+(z^R&(N^z))+P[8]+1163531501&4294967295,M=N+(k<<20&4294967295|k>>>12),k=R+(N^z&(M^N))+P[13]+2850285829&4294967295,R=M+(k<<5&4294967295|k>>>27),k=z+(M^N&(R^M))+P[2]+4243563512&4294967295,z=R+(k<<9&4294967295|k>>>23),k=N+(R^M&(z^R))+P[7]+1735328473&4294967295,N=z+(k<<14&4294967295|k>>>18),k=M+(z^R&(N^z))+P[12]+2368359562&4294967295,M=N+(k<<20&4294967295|k>>>12),k=R+(M^N^z)+P[5]+4294588738&4294967295,R=M+(k<<4&4294967295|k>>>28),k=z+(R^M^N)+P[8]+2272392833&4294967295,z=R+(k<<11&4294967295|k>>>21),k=N+(z^R^M)+P[11]+1839030562&4294967295,N=z+(k<<16&4294967295|k>>>16),k=M+(N^z^R)+P[14]+4259657740&4294967295,M=N+(k<<23&4294967295|k>>>9),k=R+(M^N^z)+P[1]+2763975236&4294967295,R=M+(k<<4&4294967295|k>>>28),k=z+(R^M^N)+P[4]+1272893353&4294967295,z=R+(k<<11&4294967295|k>>>21),k=N+(z^R^M)+P[7]+4139469664&4294967295,N=z+(k<<16&4294967295|k>>>16),k=M+(N^z^R)+P[10]+3200236656&4294967295,M=N+(k<<23&4294967295|k>>>9),k=R+(M^N^z)+P[13]+681279174&4294967295,R=M+(k<<4&4294967295|k>>>28),k=z+(R^M^N)+P[0]+3936430074&4294967295,z=R+(k<<11&4294967295|k>>>21),k=N+(z^R^M)+P[3]+3572445317&4294967295,N=z+(k<<16&4294967295|k>>>16),k=M+(N^z^R)+P[6]+76029189&4294967295,M=N+(k<<23&4294967295|k>>>9),k=R+(M^N^z)+P[9]+3654602809&4294967295,R=M+(k<<4&4294967295|k>>>28),k=z+(R^M^N)+P[12]+3873151461&4294967295,z=R+(k<<11&4294967295|k>>>21),k=N+(z^R^M)+P[15]+530742520&4294967295,N=z+(k<<16&4294967295|k>>>16),k=M+(N^z^R)+P[2]+3299628645&4294967295,M=N+(k<<23&4294967295|k>>>9),k=R+(N^(M|~z))+P[0]+4096336452&4294967295,R=M+(k<<6&4294967295|k>>>26),k=z+(M^(R|~N))+P[7]+1126891415&4294967295,z=R+(k<<10&4294967295|k>>>22),k=N+(R^(z|~M))+P[14]+2878612391&4294967295,N=z+(k<<15&4294967295|k>>>17),k=M+(z^(N|~R))+P[5]+4237533241&4294967295,M=N+(k<<21&4294967295|k>>>11),k=R+(N^(M|~z))+P[12]+1700485571&4294967295,R=M+(k<<6&4294967295|k>>>26),k=z+(M^(R|~N))+P[3]+2399980690&4294967295,z=R+(k<<10&4294967295|k>>>22),k=N+(R^(z|~M))+P[10]+4293915773&4294967295,N=z+(k<<15&4294967295|k>>>17),k=M+(z^(N|~R))+P[1]+2240044497&4294967295,M=N+(k<<21&4294967295|k>>>11),k=R+(N^(M|~z))+P[8]+1873313359&4294967295,R=M+(k<<6&4294967295|k>>>26),k=z+(M^(R|~N))+P[15]+4264355552&4294967295,z=R+(k<<10&4294967295|k>>>22),k=N+(R^(z|~M))+P[6]+2734768916&4294967295,N=z+(k<<15&4294967295|k>>>17),k=M+(z^(N|~R))+P[13]+1309151649&4294967295,M=N+(k<<21&4294967295|k>>>11),k=R+(N^(M|~z))+P[4]+4149444226&4294967295,R=M+(k<<6&4294967295|k>>>26),k=z+(M^(R|~N))+P[11]+3174756917&4294967295,z=R+(k<<10&4294967295|k>>>22),k=N+(R^(z|~M))+P[2]+718787259&4294967295,N=z+(k<<15&4294967295|k>>>17),k=M+(z^(N|~R))+P[9]+3951481745&4294967295,I.g[0]=I.g[0]+R&4294967295,I.g[1]=I.g[1]+(N+(k<<21&4294967295|k>>>11))&4294967295,I.g[2]=I.g[2]+N&4294967295,I.g[3]=I.g[3]+z&4294967295}i.prototype.v=function(I,R){R===void 0&&(R=I.length);const M=R-this.blockSize,P=this.C;let N=this.h,z=0;for(;z<R;){if(N==0)for(;z<=M;)r(this,I,z),z+=this.blockSize;if(typeof I=="string"){for(;z<R;)if(P[N++]=I.charCodeAt(z++),N==this.blockSize){r(this,P),N=0;break}}else for(;z<R;)if(P[N++]=I[z++],N==this.blockSize){r(this,P),N=0;break}}this.h=N,this.o+=R},i.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var R=1;R<I.length-8;++R)I[R]=0;R=this.o*8;for(var M=I.length-8;M<I.length;++M)I[M]=R&255,R/=256;for(this.v(I),I=Array(16),R=0,M=0;M<4;++M)for(let P=0;P<32;P+=8)I[R++]=this.g[M]>>>P&255;return I};function o(I,R){var M=u;return Object.prototype.hasOwnProperty.call(M,I)?M[I]:M[I]=R(I)}function c(I,R){this.h=R;const M=[];let P=!0;for(let N=I.length-1;N>=0;N--){const z=I[N]|0;P&&z==R||(M[N]=z,P=!1)}this.g=M}var u={};function f(I){return-128<=I&&I<128?o(I,function(R){return new c([R|0],R<0?-1:0)}):new c([I|0],I<0?-1:0)}function d(I){if(isNaN(I)||!isFinite(I))return _;if(I<0)return D(d(-I));const R=[];let M=1;for(let P=0;I>=M;P++)R[P]=I/M|0,M*=4294967296;return new c(R,0)}function p(I,R){if(I.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(I.charAt(0)=="-")return D(p(I.substring(1),R));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const M=d(Math.pow(R,8));let P=_;for(let z=0;z<I.length;z+=8){var N=Math.min(8,I.length-z);const k=parseInt(I.substring(z,z+N),R);N<8?(N=d(Math.pow(R,N)),P=P.j(N).add(d(k))):(P=P.j(M),P=P.add(d(k)))}return P}var _=f(0),b=f(1),S=f(16777216);n=c.prototype,n.m=function(){if(A(this))return-D(this).m();let I=0,R=1;for(let M=0;M<this.g.length;M++){const P=this.i(M);I+=(P>=0?P:4294967296+P)*R,R*=4294967296}return I},n.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(w(this))return"0";if(A(this))return"-"+D(this).toString(I);const R=d(Math.pow(I,6));var M=this;let P="";for(;;){const N=J(M,R).g;M=L(M,N.j(R));let z=((M.g.length>0?M.g[0]:M.h)>>>0).toString(I);if(M=N,w(M))return z+P;for(;z.length<6;)z="0"+z;P=z+P}},n.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function w(I){if(I.h!=0)return!1;for(let R=0;R<I.g.length;R++)if(I.g[R]!=0)return!1;return!0}function A(I){return I.h==-1}n.l=function(I){return I=L(this,I),A(I)?-1:w(I)?0:1};function D(I){const R=I.g.length,M=[];for(let P=0;P<R;P++)M[P]=~I.g[P];return new c(M,~I.h).add(b)}n.abs=function(){return A(this)?D(this):this},n.add=function(I){const R=Math.max(this.g.length,I.g.length),M=[];let P=0;for(let N=0;N<=R;N++){let z=P+(this.i(N)&65535)+(I.i(N)&65535),k=(z>>>16)+(this.i(N)>>>16)+(I.i(N)>>>16);P=k>>>16,z&=65535,k&=65535,M[N]=k<<16|z}return new c(M,M[M.length-1]&-2147483648?-1:0)};function L(I,R){return I.add(D(R))}n.j=function(I){if(w(this)||w(I))return _;if(A(this))return A(I)?D(this).j(D(I)):D(D(this).j(I));if(A(I))return D(this.j(D(I)));if(this.l(S)<0&&I.l(S)<0)return d(this.m()*I.m());const R=this.g.length+I.g.length,M=[];for(var P=0;P<2*R;P++)M[P]=0;for(P=0;P<this.g.length;P++)for(let N=0;N<I.g.length;N++){const z=this.i(P)>>>16,k=this.i(P)&65535,kt=I.i(N)>>>16,At=I.i(N)&65535;M[2*P+2*N]+=k*At,F(M,2*P+2*N),M[2*P+2*N+1]+=z*At,F(M,2*P+2*N+1),M[2*P+2*N+1]+=k*kt,F(M,2*P+2*N+1),M[2*P+2*N+2]+=z*kt,F(M,2*P+2*N+2)}for(I=0;I<R;I++)M[I]=M[2*I+1]<<16|M[2*I];for(I=R;I<2*R;I++)M[I]=0;return new c(M,0)};function F(I,R){for(;(I[R]&65535)!=I[R];)I[R+1]+=I[R]>>>16,I[R]&=65535,R++}function W(I,R){this.g=I,this.h=R}function J(I,R){if(w(R))throw Error("division by zero");if(w(I))return new W(_,_);if(A(I))return R=J(D(I),R),new W(D(R.g),D(R.h));if(A(R))return R=J(I,D(R)),new W(D(R.g),R.h);if(I.g.length>30){if(A(I)||A(R))throw Error("slowDivide_ only works with positive integers.");for(var M=b,P=R;P.l(I)<=0;)M=$(M),P=$(P);var N=st(M,1),z=st(P,1);for(P=st(P,2),M=st(M,2);!w(P);){var k=z.add(P);k.l(I)<=0&&(N=N.add(M),z=k),P=st(P,1),M=st(M,1)}return R=L(I,N.j(R)),new W(N,R)}for(N=_;I.l(R)>=0;){for(M=Math.max(1,Math.floor(I.m()/R.m())),P=Math.ceil(Math.log(M)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),z=d(M),k=z.j(R);A(k)||k.l(I)>0;)M-=P,z=d(M),k=z.j(R);w(z)&&(z=b),N=N.add(z),I=L(I,k)}return new W(N,I)}n.B=function(I){return J(this,I).h},n.and=function(I){const R=Math.max(this.g.length,I.g.length),M=[];for(let P=0;P<R;P++)M[P]=this.i(P)&I.i(P);return new c(M,this.h&I.h)},n.or=function(I){const R=Math.max(this.g.length,I.g.length),M=[];for(let P=0;P<R;P++)M[P]=this.i(P)|I.i(P);return new c(M,this.h|I.h)},n.xor=function(I){const R=Math.max(this.g.length,I.g.length),M=[];for(let P=0;P<R;P++)M[P]=this.i(P)^I.i(P);return new c(M,this.h^I.h)};function $(I){const R=I.g.length+1,M=[];for(let P=0;P<R;P++)M[P]=I.i(P)<<1|I.i(P-1)>>>31;return new c(M,I.h)}function st(I,R){const M=R>>5;R%=32;const P=I.g.length-M,N=[];for(let z=0;z<P;z++)N[z]=R>0?I.i(z+M)>>>R|I.i(z+M+1)<<32-R:I.i(z+M);return new c(N,I.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,iA=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=d,c.fromString=p,Or=c}).apply(typeof zT<"u"?zT:typeof self<"u"?self:typeof window<"u"?window:{});var uf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sA,kc,rA,Of,zp,aA,oA,lA;(function(){var n,t=Object.defineProperty;function e(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof uf=="object"&&uf];for(var v=0;v<g.length;++v){var E=g[v];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=e(this);function r(g,v){if(v)t:{var E=i;g=g.split(".");for(var C=0;C<g.length-1;C++){var H=g[C];if(!(H in E))break t;E=E[H]}g=g[g.length-1],C=E[g],v=v(C),v!=C&&v!=null&&t(E,g,{configurable:!0,writable:!0,value:v})}}r("Symbol.dispose",function(g){return g||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(g){return g||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(g){return g||function(v){var E=[],C;for(C in v)Object.prototype.hasOwnProperty.call(v,C)&&E.push([C,v[C]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function u(g){var v=typeof g;return v=="object"&&g!=null||v=="function"}function f(g,v,E){return g.call.apply(g.bind,arguments)}function d(g,v,E){return d=f,d.apply(null,arguments)}function p(g,v){var E=Array.prototype.slice.call(arguments,1);return function(){var C=E.slice();return C.push.apply(C,arguments),g.apply(this,C)}}function _(g,v){function E(){}E.prototype=v.prototype,g.Z=v.prototype,g.prototype=new E,g.prototype.constructor=g,g.Ob=function(C,H,X){for(var ot=Array(arguments.length-2),Dt=2;Dt<arguments.length;Dt++)ot[Dt-2]=arguments[Dt];return v.prototype[H].apply(C,ot)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?g=>g&&AsyncContext.Snapshot.wrap(g):g=>g;function S(g){const v=g.length;if(v>0){const E=Array(v);for(let C=0;C<v;C++)E[C]=g[C];return E}return[]}function w(g,v){for(let C=1;C<arguments.length;C++){const H=arguments[C];var E=typeof H;if(E=E!="object"?E:H?Array.isArray(H)?"array":E:"null",E=="array"||E=="object"&&typeof H.length=="number"){E=g.length||0;const X=H.length||0;g.length=E+X;for(let ot=0;ot<X;ot++)g[E+ot]=H[ot]}else g.push(H)}}class A{constructor(v,E){this.i=v,this.j=E,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function D(g){c.setTimeout(()=>{throw g},0)}function L(){var g=I;let v=null;return g.g&&(v=g.g,g.g=g.g.next,g.g||(g.h=null),v.next=null),v}class F{constructor(){this.h=this.g=null}add(v,E){const C=W.get();C.set(v,E),this.h?this.h.next=C:this.g=C,this.h=C}}var W=new A(()=>new J,g=>g.reset());class J{constructor(){this.next=this.g=this.h=null}set(v,E){this.h=v,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let $,st=!1,I=new F,R=()=>{const g=Promise.resolve(void 0);$=()=>{g.then(M)}};function M(){for(var g;g=L();){try{g.h.call(g.g)}catch(E){D(E)}var v=W;v.j(g),v.h<100&&(v.h++,g.next=v.g,v.g=g)}st=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(g,v){this.type=g,this.g=this.target=v,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var g=!1,v=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const E=()=>{};c.addEventListener("test",E,v),c.removeEventListener("test",E,v)}catch{}return g})();function k(g){return/^[\s\xa0]*$/.test(g)}function kt(g,v){N.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g&&this.init(g,v)}_(kt,N),kt.prototype.init=function(g,v){const E=this.type=g.type,C=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;this.target=g.target||g.srcElement,this.g=v,v=g.relatedTarget,v||(E=="mouseover"?v=g.fromElement:E=="mouseout"&&(v=g.toElement)),this.relatedTarget=v,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=g.pointerType,this.state=g.state,this.i=g,g.defaultPrevented&&kt.Z.h.call(this)},kt.prototype.h=function(){kt.Z.h.call(this);const g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var At="closure_listenable_"+(Math.random()*1e6|0),K=0;function at(g,v,E,C,H){this.listener=g,this.proxy=null,this.src=v,this.type=E,this.capture=!!C,this.ha=H,this.key=++K,this.da=this.fa=!1}function dt(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function vt(g,v,E){for(const C in g)v.call(E,g[C],C,g)}function Lt(g,v){for(const E in g)v.call(void 0,g[E],E,g)}function U(g){const v={};for(const E in g)v[E]=g[E];return v}const tt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function lt(g,v){let E,C;for(let H=1;H<arguments.length;H++){C=arguments[H];for(E in C)g[E]=C[E];for(let X=0;X<tt.length;X++)E=tt[X],Object.prototype.hasOwnProperty.call(C,E)&&(g[E]=C[E])}}function ut(g){this.src=g,this.g={},this.h=0}ut.prototype.add=function(g,v,E,C,H){const X=g.toString();g=this.g[X],g||(g=this.g[X]=[],this.h++);const ot=Et(g,v,C,H);return ot>-1?(v=g[ot],E||(v.fa=!1)):(v=new at(v,this.src,X,!!C,H),v.fa=E,g.push(v)),v};function _t(g,v){const E=v.type;if(E in g.g){var C=g.g[E],H=Array.prototype.indexOf.call(C,v,void 0),X;(X=H>=0)&&Array.prototype.splice.call(C,H,1),X&&(dt(v),g.g[E].length==0&&(delete g.g[E],g.h--))}}function Et(g,v,E,C){for(let H=0;H<g.length;++H){const X=g[H];if(!X.da&&X.listener==v&&X.capture==!!E&&X.ha==C)return H}return-1}var Gt="closure_lm_"+(Math.random()*1e6|0),He={};function ge(g,v,E,C,H){if(Array.isArray(v)){for(let X=0;X<v.length;X++)ge(g,v[X],E,C,H);return null}return E=Tl(E),g&&g[At]?g.J(v,E,u(C)?!!C.capture:!1,H):$r(g,v,E,!1,C,H)}function $r(g,v,E,C,H,X){if(!v)throw Error("Invalid event type");const ot=u(H)?!!H.capture:!!H;let Dt=Jr(g);if(Dt||(g[Gt]=Dt=new ut(g)),E=Dt.add(v,E,C,ot,X),E.proxy)return E;if(C=to(),E.proxy=C,C.src=g,C.listener=E,g.addEventListener)z||(H=ot),H===void 0&&(H=!1),g.addEventListener(v.toString(),C,H);else if(g.attachEvent)g.attachEvent(Ri(v.toString()),C);else if(g.addListener&&g.removeListener)g.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return E}function to(){function g(E){return v.call(g.src,g.listener,E)}const v=bl;return g}function eo(g,v,E,C,H){if(Array.isArray(v))for(var X=0;X<v.length;X++)eo(g,v[X],E,C,H);else C=u(C)?!!C.capture:!!C,E=Tl(E),g&&g[At]?(g=g.i,X=String(v).toString(),X in g.g&&(v=g.g[X],E=Et(v,E,C,H),E>-1&&(dt(v[E]),Array.prototype.splice.call(v,E,1),v.length==0&&(delete g.g[X],g.h--)))):g&&(g=Jr(g))&&(v=g.g[v.toString()],g=-1,v&&(g=Et(v,E,C,H)),(E=g>-1?v[g]:null)&&no(E))}function no(g){if(typeof g!="number"&&g&&!g.da){var v=g.src;if(v&&v[At])_t(v.i,g);else{var E=g.type,C=g.proxy;v.removeEventListener?v.removeEventListener(E,C,g.capture):v.detachEvent?v.detachEvent(Ri(E),C):v.addListener&&v.removeListener&&v.removeListener(C),(E=Jr(v))?(_t(E,g),E.h==0&&(E.src=null,v[Gt]=null)):dt(g)}}}function Ri(g){return g in He?He[g]:He[g]="on"+g}function bl(g,v){if(g.da)g=!0;else{v=new kt(v,this);const E=g.listener,C=g.ha||g.src;g.fa&&no(g),g=E.call(C,v)}return g}function Jr(g){return g=g[Gt],g instanceof ut?g:null}var vl="__closure_events_fn_"+(Math.random()*1e9>>>0);function Tl(g){return typeof g=="function"?g:(g[vl]||(g[vl]=function(v){return g.handleEvent(v)}),g[vl])}function Ie(){P.call(this),this.i=new ut(this),this.M=this,this.G=null}_(Ie,P),Ie.prototype[At]=!0,Ie.prototype.removeEventListener=function(g,v,E,C){eo(this,g,v,E,C)};function qe(g,v){var E,C=g.G;if(C)for(E=[];C;C=C.G)E.push(C);if(g=g.M,C=v.type||v,typeof v=="string")v=new N(v,g);else if(v instanceof N)v.target=v.target||g;else{var H=v;v=new N(C,g),lt(v,H)}H=!0;let X,ot;if(E)for(ot=E.length-1;ot>=0;ot--)X=v.g=E[ot],H=js(X,C,!0,v)&&H;if(X=v.g=g,H=js(X,C,!0,v)&&H,H=js(X,C,!1,v)&&H,E)for(ot=0;ot<E.length;ot++)X=v.g=E[ot],H=js(X,C,!1,v)&&H}Ie.prototype.N=function(){if(Ie.Z.N.call(this),this.i){var g=this.i;for(const v in g.g){const E=g.g[v];for(let C=0;C<E.length;C++)dt(E[C]);delete g.g[v],g.h--}}this.G=null},Ie.prototype.J=function(g,v,E,C){return this.i.add(String(g),v,!1,E,C)},Ie.prototype.K=function(g,v,E,C){return this.i.add(String(g),v,!0,E,C)};function js(g,v,E,C){if(v=g.i.g[String(v)],!v)return!0;v=v.concat();let H=!0;for(let X=0;X<v.length;++X){const ot=v[X];if(ot&&!ot.da&&ot.capture==E){const Dt=ot.listener,xe=ot.ha||ot.src;ot.fa&&_t(g.i,ot),H=Dt.call(xe,C)!==!1&&H}}return H&&!C.defaultPrevented}function $d(g,v){if(typeof g!="function")if(g&&typeof g.handleEvent=="function")g=d(g.handleEvent,g);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:c.setTimeout(g,v||0)}function ku(g){g.g=$d(()=>{g.g=null,g.i&&(g.i=!1,ku(g))},g.l);const v=g.h;g.h=null,g.m.apply(null,v)}class _n extends P{constructor(v,E){super(),this.m=v,this.l=E,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:ku(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zr(g){P.call(this),this.h=g,this.g={}}_(Zr,P);var El=[];function Sl(g){vt(g.g,function(v,E){this.g.hasOwnProperty(E)&&no(v)},g),g.g={}}Zr.prototype.N=function(){Zr.Z.N.call(this),Sl(this)},Zr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bs=c.JSON.stringify,Jd=c.JSON.parse,Nu=class{stringify(g){return c.JSON.stringify(g,void 0)}parse(g){return c.JSON.parse(g,void 0)}};function Pu(){}function Vu(){}var oi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ze(){N.call(this,"d")}_(Ze,N);function Gn(){N.call(this,"c")}_(Gn,N);var Se={},Lu=null;function io(){return Lu=Lu||new Ie}Se.Ia="serverreachability";function zu(g){N.call(this,Se.Ia,g)}_(zu,N);function Ci(g){const v=io();qe(v,new zu(v))}Se.STAT_EVENT="statevent";function ta(g,v){N.call(this,Se.STAT_EVENT,g),this.stat=v}_(ta,N);function De(g){const v=io();qe(v,new ta(v,g))}Se.Ja="timingevent";function Ii(g,v){N.call(this,Se.Ja,g),this.size=v}_(Ii,N);function Di(g,v){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){g()},v)}function li(){this.g=!0}li.prototype.ua=function(){this.g=!1};function Zd(g,v,E,C,H,X){g.info(function(){if(g.g)if(X){var ot="",Dt=X.split("&");for(let Qt=0;Qt<Dt.length;Qt++){var xe=Dt[Qt].split("=");if(xe.length>1){const me=xe[0];xe=xe[1];const Xn=me.split("_");ot=Xn.length>=2&&Xn[1]=="type"?ot+(me+"="+xe+"&"):ot+(me+"=redacted&")}}}else ot=null;else ot=X;return"XMLHTTP REQ ("+C+") [attempt "+H+"]: "+v+`
`+E+`
`+ot})}function Uu(g,v,E,C,H,X,ot){g.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+H+"]: "+v+`
`+E+`
`+X+" "+ot})}function Mi(g,v,E,C){g.info(function(){return"XMLHTTP TEXT ("+v+"): "+tg(g,E)+(C?" "+C:"")})}function ea(g,v){g.info(function(){return"TIMEOUT: "+v})}li.prototype.info=function(){};function tg(g,v){if(!g.g)return v;if(!v)return null;try{const X=JSON.parse(v);if(X){for(g=0;g<X.length;g++)if(Array.isArray(X[g])){var E=X[g];if(!(E.length<2)){var C=E[1];if(Array.isArray(C)&&!(C.length<1)){var H=C[0];if(H!="noop"&&H!="stop"&&H!="close")for(let ot=1;ot<C.length;ot++)C[ot]=""}}}}return Bs(X)}catch{return v}}var na={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},xl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Al;function ia(){}_(ia,Pu),ia.prototype.g=function(){return new XMLHttpRequest},Al=new ia;function rs(g){return encodeURIComponent(String(g))}function ju(g){var v=1;g=g.split(":");const E=[];for(;v>0&&g.length;)E.push(g.shift()),v--;return g.length&&E.push(g.join(":")),E}function ci(g,v,E,C){this.j=g,this.i=v,this.l=E,this.S=C||1,this.V=new Zr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ui}function ui(){this.i=null,this.g="",this.h=!1}var Me={},We={};function Oi(g,v,E){g.M=1,g.A=sa(ke(v)),g.u=E,g.R=!0,so(g,null)}function so(g,v){g.F=Date.now(),ki(g),g.B=ke(g.A);var E=g.B,C=g.S;Array.isArray(C)||(C=[String(C)]),lo(E.i,"t",C),g.C=0,E=g.j.L,g.h=new ui,g.g=eh(g.j,E?v:null,!g.u),g.P>0&&(g.O=new _n(d(g.Y,g,g.g),g.P)),v=g.V,E=g.g,C=g.ba;var H="readystatechange";Array.isArray(H)||(H&&(El[0]=H.toString()),H=El);for(let X=0;X<H.length;X++){const ot=ge(E,H[X],C||v.handleEvent,!1,v.h||v);if(!ot)break;v.g[ot.key]=ot}v=g.J?U(g.J):{},g.u?(g.v||(g.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.B,g.v,g.u,v)):(g.v="GET",g.g.ea(g.B,g.v,null,v)),Ci(),Zd(g.i,g.v,g.B,g.l,g.S,g.u)}ci.prototype.ba=function(g){g=g.target;const v=this.O;v&&di(g)==3?v.j():this.Y(g)},ci.prototype.Y=function(g){try{if(g==this.g)t:{const Dt=di(this.g),xe=this.g.ya(),Qt=this.g.ca();if(!(Dt<3)&&(Dt!=3||this.g&&(this.h.h||this.g.la()||tn(this.g)))){this.K||Dt!=4||xe==7||(xe==8||Qt<=0?Ci(3):Ci(2)),Ni(this);var v=this.g.ca();this.X=v;var E=eg(this);if(this.o=v==200,Uu(this.i,this.v,this.B,this.l,this.S,Dt,v),this.o){if(this.U&&!this.L){e:{if(this.g){var C,H=this.g;if((C=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(C)){var X=C;break e}}X=null}if(g=X)Mi(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Pi(this,g);else{this.o=!1,this.m=3,De(12),kn(this),Yn(this);break t}}if(this.R){g=!0;let me;for(;!this.K&&this.C<E.length;)if(me=Fu(this,E),me==We){Dt==4&&(this.m=4,De(14),g=!1),Mi(this.i,this.l,null,"[Incomplete Response]");break}else if(me==Me){this.m=4,De(15),Mi(this.i,this.l,E,"[Invalid Chunk]"),g=!1;break}else Mi(this.i,this.l,me,null),Pi(this,me);if(Bu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Dt!=4||E.length!=0||this.h.h||(this.m=1,De(16),g=!1),this.o=this.o&&g,!g)Mi(this.i,this.l,E,"[Invalid Chunked Response]"),kn(this),Yn(this);else if(E.length>0&&!this.W){this.W=!0;var ot=this.j;ot.g==this&&ot.aa&&!ot.P&&(ot.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),jl(ot),ot.P=!0,De(11))}}else Mi(this.i,this.l,E,null),Pi(this,E);Dt==4&&kn(this),this.o&&!this.K&&(Dt==4?$u(this.j,this):(this.o=!1,ki(this)))}else os(this.g),v==400&&E.indexOf("Unknown SID")>0?(this.m=3,De(12)):(this.m=0,De(13)),kn(this),Yn(this)}}}catch{}finally{}};function eg(g){if(!Bu(g))return g.g.la();const v=tn(g.g);if(v==="")return"";let E="";const C=v.length,H=di(g.g)==4;if(!g.h.i){if(typeof TextDecoder>"u")return kn(g),Yn(g),"";g.h.i=new c.TextDecoder}for(let X=0;X<C;X++)g.h.h=!0,E+=g.h.i.decode(v[X],{stream:!(H&&X==C-1)});return v.length=0,g.h.g+=E,g.C=0,g.h.g}function Bu(g){return g.g?g.v=="GET"&&g.M!=2&&g.j.Aa:!1}function Fu(g,v){var E=g.C,C=v.indexOf(`
`,E);return C==-1?We:(E=Number(v.substring(E,C)),isNaN(E)?Me:(C+=1,C+E>v.length?We:(v=v.slice(C,C+E),g.C=C+E,v)))}ci.prototype.cancel=function(){this.K=!0,kn(this)};function ki(g){g.T=Date.now()+g.H,ro(g,g.H)}function ro(g,v){if(g.D!=null)throw Error("WatchDog timer not null");g.D=Di(d(g.aa,g),v)}function Ni(g){g.D&&(c.clearTimeout(g.D),g.D=null)}ci.prototype.aa=function(){this.D=null;const g=Date.now();g-this.T>=0?(ea(this.i,this.B),this.M!=2&&(Ci(),De(17)),kn(this),this.m=2,Yn(this)):ro(this,this.T-g)};function Yn(g){g.j.I==0||g.K||$u(g.j,g)}function kn(g){Ni(g);var v=g.O;v&&typeof v.dispose=="function"&&v.dispose(),g.O=null,Sl(g.V),g.g&&(v=g.g,g.g=null,v.abort(),v.dispose())}function Pi(g,v){try{var E=g.j;if(E.I!=0&&(E.g==g||Li(E.h,g))){if(!g.L&&Li(E.h,g)&&E.I==3){try{var C=E.Ba.g.parse(v)}catch{C=null}if(Array.isArray(C)&&C.length==3){var H=C;if(H[0]==0){t:if(!E.v){if(E.g)if(E.g.F+3e3<g.F)go(E),Xs(E);else break t;ha(E),De(18)}}else E.xa=H[1],0<E.xa-E.K&&H[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=Di(d(E.Va,E),6e3));Vi(E.h)<=1&&E.ta&&(E.ta=void 0)}else Hi(E,11)}else if((g.L||E.g==g)&&go(E),!k(v))for(H=E.Ba.g.parse(v),v=0;v<H.length;v++){let Qt=H[v];const me=Qt[0];if(!(me<=E.K))if(E.K=me,Qt=Qt[1],E.I==2)if(Qt[0]=="c"){E.M=Qt[1],E.ba=Qt[2];const Xn=Qt[3];Xn!=null&&(E.ka=Xn,E.j.info("VER="+E.ka));const qi=Qt[4];qi!=null&&(E.za=qi,E.j.info("SVER="+E.za));const gi=Qt[5];gi!=null&&typeof gi=="number"&&gi>0&&(C=1.5*gi,E.O=C,E.j.info("backChannelRequestTimeoutMs_="+C)),C=E;const mi=g.g;if(mi){const fa=mi.g?mi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fa){var X=C.h;X.g||fa.indexOf("spdy")==-1&&fa.indexOf("quic")==-1&&fa.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(Cl(X,X.h),X.h=null))}if(C.G){const mo=mi.g?mi.g.getResponseHeader("X-HTTP-Session-Id"):null;mo&&(C.wa=mo,Zt(C.J,C.G,mo))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-g.F,E.j.info("Handshake RTT: "+E.T+"ms")),C=E;var ot=g;if(C.na=th(C,C.L?C.ba:null,C.W),ot.L){Il(C.h,ot);var Dt=ot,xe=C.O;xe&&(Dt.H=xe),Dt.D&&(Ni(Dt),ki(Dt)),C.g=ot}else Xu(C);E.i.length>0&&Fi(E)}else Qt[0]!="stop"&&Qt[0]!="close"||Hi(E,7);else E.I==3&&(Qt[0]=="stop"||Qt[0]=="close"?Qt[0]=="stop"?Hi(E,7):zl(E):Qt[0]!="noop"&&E.l&&E.l.qa(Qt),E.A=0)}}Ci(4)}catch{}}var Oe=class{constructor(g,v){this.g=g,this.map=v}};function wl(g){this.l=g||10,c.PerformanceNavigationTiming?(g=c.performance.getEntriesByType("navigation"),g=g.length>0&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Rl(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function Vi(g){return g.h?1:g.g?g.g.size:0}function Li(g,v){return g.h?g.h==v:g.g?g.g.has(v):!1}function Cl(g,v){g.g?g.g.add(v):g.h=v}function Il(g,v){g.h&&g.h==v?g.h=null:g.g&&g.g.has(v)&&g.g.delete(v)}wl.prototype.cancel=function(){if(this.i=Dl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function Dl(g){if(g.h!=null)return g.i.concat(g.h.G);if(g.g!=null&&g.g.size!==0){let v=g.i;for(const E of g.g.values())v=v.concat(E.G);return v}return S(g.i)}var Hu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ao(g,v){if(g){g=g.split("&");for(let E=0;E<g.length;E++){const C=g[E].indexOf("=");let H,X=null;C>=0?(H=g[E].substring(0,C),X=g[E].substring(C+1)):H=g[E],v(H,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function Nn(g){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;g instanceof Nn?(this.l=g.l,Xe(this,g.j),this.o=g.o,this.g=g.g,Fs(this,g.u),this.h=g.h,Ml(this,Ku(g.i)),this.m=g.m):g&&(v=String(g).match(Hu))?(this.l=!1,Xe(this,v[1]||"",!0),this.o=zi(v[2]||""),this.g=zi(v[3]||"",!0),Fs(this,v[4]),this.h=zi(v[5]||"",!0),Ml(this,v[6]||"",!0),this.m=zi(v[7]||"")):(this.l=!1,this.i=new qs(null,this.l))}Nn.prototype.toString=function(){const g=[];var v=this.j;v&&g.push(ra(v,oo,!0),":");var E=this.g;return(E||v=="file")&&(g.push("//"),(v=this.o)&&g.push(ra(v,oo,!0),"@"),g.push(rs(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&g.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&g.push("/"),g.push(ra(E,E.charAt(0)=="/"?Ol:qu,!0))),(E=this.i.toString())&&g.push("?",E),(E=this.m)&&g.push("#",ra(E,Gu)),g.join("")},Nn.prototype.resolve=function(g){const v=ke(this);let E=!!g.j;E?Xe(v,g.j):E=!!g.o,E?v.o=g.o:E=!!g.g,E?v.g=g.g:E=g.u!=null;var C=g.h;if(E)Fs(v,g.u);else if(E=!!g.h){if(C.charAt(0)!="/")if(this.g&&!this.h)C="/"+C;else{var H=v.h.lastIndexOf("/");H!=-1&&(C=v.h.slice(0,H+1)+C)}if(H=C,H==".."||H==".")C="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){C=H.lastIndexOf("/",0)==0,H=H.split("/");const X=[];for(let ot=0;ot<H.length;){const Dt=H[ot++];Dt=="."?C&&ot==H.length&&X.push(""):Dt==".."?((X.length>1||X.length==1&&X[0]!="")&&X.pop(),C&&ot==H.length&&X.push("")):(X.push(Dt),C=!0)}C=X.join("/")}else C=H}return E?v.h=C:E=g.i.toString()!=="",E?Ml(v,Ku(g.i)):E=!!g.m,E&&(v.m=g.m),v};function ke(g){return new Nn(g)}function Xe(g,v,E){g.j=E?zi(v,!0):v,g.j&&(g.j=g.j.replace(/:$/,""))}function Fs(g,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);g.u=v}else g.u=null}function Ml(g,v,E){v instanceof qs?(g.i=v,co(g.i,g.l)):(E||(v=ra(v,Hs)),g.i=new qs(v,g.l))}function Zt(g,v,E){g.i.set(v,E)}function sa(g){return Zt(g,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),g}function zi(g,v){return g?v?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function ra(g,v,E){return typeof g=="string"?(g=encodeURI(g).replace(v,Tn),E&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function Tn(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var oo=/[#\/\?@]/g,qu=/[#\?:]/g,Ol=/[#\?]/g,Hs=/[#\?@]/g,Gu=/#/g;function qs(g,v){this.h=this.g=null,this.i=g||null,this.j=!!v}function En(g){g.g||(g.g=new Map,g.h=0,g.i&&ao(g.i,function(v,E){g.add(decodeURIComponent(v.replace(/\+/g," ")),E)}))}n=qs.prototype,n.add=function(g,v){En(this),this.i=null,g=Gs(this,g);let E=this.g.get(g);return E||this.g.set(g,E=[]),E.push(v),this.h+=1,this};function Yu(g,v){En(g),v=Gs(g,v),g.g.has(v)&&(g.i=null,g.h-=g.g.get(v).length,g.g.delete(v))}function kl(g,v){return En(g),v=Gs(g,v),g.g.has(v)}n.forEach=function(g,v){En(this),this.g.forEach(function(E,C){E.forEach(function(H){g.call(v,H,C,this)},this)},this)};function Nl(g,v){En(g);let E=[];if(typeof v=="string")kl(g,v)&&(E=E.concat(g.g.get(Gs(g,v))));else for(g=Array.from(g.g.values()),v=0;v<g.length;v++)E=E.concat(g[v]);return E}n.set=function(g,v){return En(this),this.i=null,g=Gs(this,g),kl(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[v]),this.h+=1,this},n.get=function(g,v){return g?(g=Nl(this,g),g.length>0?String(g[0]):v):v};function lo(g,v,E){Yu(g,v),E.length>0&&(g.i=null,g.g.set(Gs(g,v),S(E)),g.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],v=Array.from(this.g.keys());for(let C=0;C<v.length;C++){var E=v[C];const H=rs(E);E=Nl(this,E);for(let X=0;X<E.length;X++){let ot=H;E[X]!==""&&(ot+="="+rs(E[X])),g.push(ot)}}return this.i=g.join("&")};function Ku(g){const v=new qs;return v.i=g.i,g.g&&(v.g=new Map(g.g),v.h=g.h),v}function Gs(g,v){return v=String(v),g.j&&(v=v.toLowerCase()),v}function co(g,v){v&&!g.j&&(En(g),g.i=null,g.g.forEach(function(E,C){const H=C.toLowerCase();C!=H&&(Yu(this,C),lo(this,H,E))},g)),g.j=v}function hi(g,v){const E=new li;if(c.Image){const C=new Image;C.onload=p(Kn,E,"TestLoadImage: loaded",!0,v,C),C.onerror=p(Kn,E,"TestLoadImage: error",!1,v,C),C.onabort=p(Kn,E,"TestLoadImage: abort",!1,v,C),C.ontimeout=p(Kn,E,"TestLoadImage: timeout",!1,v,C),c.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=g}else v(!1)}function Pl(g,v){const E=new li,C=new AbortController,H=setTimeout(()=>{C.abort(),Kn(E,"TestPingServer: timeout",!1,v)},1e4);fetch(g,{signal:C.signal}).then(X=>{clearTimeout(H),X.ok?Kn(E,"TestPingServer: ok",!0,v):Kn(E,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(H),Kn(E,"TestPingServer: error",!1,v)})}function Kn(g,v,E,C,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),C(E)}catch{}}function Ys(){this.g=new Nu}function Ui(g){this.i=g.Sb||null,this.h=g.ab||!1}_(Ui,Pu),Ui.prototype.g=function(){return new aa(this.i,this.h)};function aa(g,v){Ie.call(this),this.H=g,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(aa,Ie),n=aa.prototype,n.open=function(g,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=g,this.D=v,this.readyState=1,fi(this)},n.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};g&&(v.body=g),(this.H||c).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ks(this)),this.readyState=0},n.Pa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,fi(this)),this.g&&(this.readyState=3,fi(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;uo(this)}else g.text().then(this.Oa.bind(this),this.ga.bind(this))};function uo(g){g.j.read().then(g.Ma.bind(g)).catch(g.ga.bind(g))}n.Ma=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var v=g.value?g.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!g.done}))&&(this.response=this.responseText+=v)}g.done?Ks(this):fi(this),this.readyState==3&&uo(this)}},n.Oa=function(g){this.g&&(this.response=this.responseText=g,Ks(this))},n.Na=function(g){this.g&&(this.response=g,Ks(this))},n.ga=function(){this.g&&Ks(this)};function Ks(g){g.readyState=4,g.l=null,g.j=null,g.B=null,fi(g)}n.setRequestHeader=function(g,v){this.A.append(g,v)},n.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],v=this.h.entries();for(var E=v.next();!E.done;)E=E.value,g.push(E[0]+": "+E[1]),E=v.next();return g.join(`\r
`)};function fi(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(aa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function Wn(g){let v="";return vt(g,function(E,C){v+=C,v+=":",v+=E,v+=`\r
`}),v}function oa(g,v,E){t:{for(C in E){var C=!1;break t}C=!0}C||(E=Wn(E),typeof g=="string"?E!=null&&rs(E):Zt(g,v,E))}function ie(g){Ie.call(this),this.headers=new Map,this.L=g||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(ie,Ie);var ji=/^https?$/i,Vl=["POST","PUT"];n=ie.prototype,n.Fa=function(g){this.H=g},n.ea=function(g,v,E,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);v=v?v.toUpperCase():"GET",this.D=g,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Al.g(),this.g.onreadystatechange=b(d(this.Ca,this));try{this.B=!0,this.g.open(v,String(g),!0),this.B=!1}catch(X){la(this,X);return}if(g=E||"",E=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var H in C)E.set(H,C[H]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const X of C.keys())E.set(X,C.get(X));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(E.keys()).find(X=>X.toLowerCase()=="content-type"),H=c.FormData&&g instanceof c.FormData,!(Array.prototype.indexOf.call(Vl,v,void 0)>=0)||C||H||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,ot]of E)this.g.setRequestHeader(X,ot);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(g),this.v=!1}catch(X){la(this,X)}};function la(g,v){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=v,g.o=5,Ll(g),as(g)}function Ll(g){g.A||(g.A=!0,qe(g,"complete"),qe(g,"error"))}n.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=g||7,qe(this,"complete"),qe(this,"abort"),as(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),as(this,!0)),ie.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?ca(this):this.Xa())},n.Xa=function(){ca(this)};function ca(g){if(g.h&&typeof o<"u"){if(g.v&&di(g)==4)setTimeout(g.Ca.bind(g),0);else if(qe(g,"readystatechange"),di(g)==4){g.h=!1;try{const X=g.ca();t:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break t;default:v=!1}var E;if(!(E=v)){var C;if(C=X===0){let ot=String(g.D).match(Hu)[1]||null;!ot&&c.self&&c.self.location&&(ot=c.self.location.protocol.slice(0,-1)),C=!ji.test(ot?ot.toLowerCase():"")}E=C}if(E)qe(g,"complete"),qe(g,"success");else{g.o=6;try{var H=di(g)>2?g.g.statusText:""}catch{H=""}g.l=H+" ["+g.ca()+"]",Ll(g)}}finally{as(g)}}}}function as(g,v){if(g.g){g.m&&(clearTimeout(g.m),g.m=null);const E=g.g;g.g=null,v||qe(g,"ready");try{E.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function di(g){return g.g?g.g.readyState:0}n.ca=function(){try{return di(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(g){if(this.g){var v=this.g.responseText;return g&&v.indexOf(g)==0&&(v=v.substring(g.length)),Jd(v)}};function tn(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.F){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function os(g){const v={};g=(g.g&&di(g)>=2&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<g.length;C++){if(k(g[C]))continue;var E=ju(g[C]);const H=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const X=v[H]||[];v[H]=X,X.push(E)}Lt(v,function(C){return C.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bi(g,v,E){return E&&E.internalChannelParams&&E.internalChannelParams[g]||v}function Ws(g){this.za=0,this.i=[],this.j=new li,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Bi("failFast",!1,g),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Bi("baseRetryDelayMs",5e3,g),this.Za=Bi("retryDelaySeedMs",1e4,g),this.Ta=Bi("forwardChannelMaxRetries",2,g),this.va=Bi("forwardChannelRequestTimeoutMs",2e4,g),this.ma=g&&g.xmlHttpFactory||void 0,this.Ua=g&&g.Rb||void 0,this.Aa=g&&g.useFetchStreams||!1,this.O=void 0,this.L=g&&g.supportsCrossDomainXhr||!1,this.M="",this.h=new wl(g&&g.concurrentRequestLimit),this.Ba=new Ys,this.S=g&&g.fastHandshake||!1,this.R=g&&g.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=g&&g.Pb||!1,g&&g.ua&&this.j.ua(),g&&g.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&g&&g.detectBufferingProxy||!1,this.ia=void 0,g&&g.longPollingTimeout&&g.longPollingTimeout>0&&(this.ia=g.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ws.prototype,n.ka=8,n.I=1,n.connect=function(g,v,E,C){De(0),this.W=g,this.H=v||{},E&&C!==void 0&&(this.H.OSID=E,this.H.OAID=C),this.F=this.X,this.J=th(this,null,this.W),Fi(this)};function zl(g){if(ho(g),g.I==3){var v=g.V++,E=ke(g.J);if(Zt(E,"SID",g.M),Zt(E,"RID",v),Zt(E,"TYPE","terminate"),ua(g,E),v=new ci(g,g.j,v),v.M=2,v.A=sa(ke(E)),E=!1,c.navigator&&c.navigator.sendBeacon)try{E=c.navigator.sendBeacon(v.A.toString(),"")}catch{}!E&&c.Image&&(new Image().src=v.A,E=!0),E||(v.g=eh(v.j,null),v.g.ea(v.A)),v.F=Date.now(),ki(v)}Zu(g)}function Xs(g){g.g&&(jl(g),g.g.cancel(),g.g=null)}function ho(g){Xs(g),g.v&&(c.clearTimeout(g.v),g.v=null),go(g),g.h.cancel(),g.m&&(typeof g.m=="number"&&c.clearTimeout(g.m),g.m=null)}function Fi(g){if(!Rl(g.h)&&!g.m){g.m=!0;var v=g.Ea;$||R(),st||($(),st=!0),I.add(v,g),g.D=0}}function fo(g,v){return Vi(g.h)>=g.h.j-(g.m?1:0)?!1:g.m?(g.i=v.G.concat(g.i),!0):g.I==1||g.I==2||g.D>=(g.Sa?0:g.Ta)?!1:(g.m=Di(d(g.Ea,g,v),Ju(g,g.D)),g.D++,!0)}n.Ea=function(g){if(this.m)if(this.m=null,this.I==1){if(!g){this.V=Math.floor(Math.random()*1e5),g=this.V++;const H=new ci(this,this.j,g);let X=this.o;if(this.U&&(X?(X=U(X),lt(X,this.U)):X=this.U),this.u!==null||this.R||(H.J=X,X=null),this.S)t:{for(var v=0,E=0;E<this.i.length;E++){e:{var C=this.i[E];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break e}C=void 0}if(C===void 0)break;if(v+=C,v>4096){v=E;break t}if(v===4096||E===this.i.length-1){v=E+1;break t}}v=1e3}else v=1e3;v=Wu(this,H,v),E=ke(this.J),Zt(E,"RID",g),Zt(E,"CVER",22),this.G&&Zt(E,"X-HTTP-Session-Id",this.G),ua(this,E),X&&(this.R?v="headers="+rs(Wn(X))+"&"+v:this.u&&oa(E,this.u,X)),Cl(this.h,H),this.Ra&&Zt(E,"TYPE","init"),this.S?(Zt(E,"$req",v),Zt(E,"SID","null"),H.U=!0,Oi(H,E,null)):Oi(H,E,v),this.I=2}}else this.I==3&&(g?Ul(this,g):this.i.length==0||Rl(this.h)||Ul(this))};function Ul(g,v){var E;v?E=v.l:E=g.V++;const C=ke(g.J);Zt(C,"SID",g.M),Zt(C,"RID",E),Zt(C,"AID",g.K),ua(g,C),g.u&&g.o&&oa(C,g.u,g.o),E=new ci(g,g.j,E,g.D+1),g.u===null&&(E.J=g.o),v&&(g.i=v.G.concat(g.i)),v=Wu(g,E,1e3),E.H=Math.round(g.va*.5)+Math.round(g.va*.5*Math.random()),Cl(g.h,E),Oi(E,C,v)}function ua(g,v){g.H&&vt(g.H,function(E,C){Zt(v,C,E)}),g.l&&vt({},function(E,C){Zt(v,C,E)})}function Wu(g,v,E){E=Math.min(g.i.length,E);const C=g.l?d(g.l.Ka,g.l,g):null;t:{var H=g.i;let Dt=-1;for(;;){const xe=["count="+E];Dt==-1?E>0?(Dt=H[0].g,xe.push("ofs="+Dt)):Dt=0:xe.push("ofs="+Dt);let Qt=!0;for(let me=0;me<E;me++){var X=H[me].g;const Xn=H[me].map;if(X-=Dt,X<0)Dt=Math.max(0,H[me].g-100),Qt=!1;else try{X="req"+X+"_"||"";try{var ot=Xn instanceof Map?Xn:Object.entries(Xn);for(const[qi,gi]of ot){let mi=gi;u(gi)&&(mi=Bs(gi)),xe.push(X+qi+"="+encodeURIComponent(mi))}}catch(qi){throw xe.push(X+"type="+encodeURIComponent("_badmap")),qi}}catch{C&&C(Xn)}}if(Qt){ot=xe.join("&");break t}}ot=void 0}return g=g.i.splice(0,E),v.G=g,ot}function Xu(g){if(!g.g&&!g.v){g.Y=1;var v=g.Da;$||R(),st||($(),st=!0),I.add(v,g),g.A=0}}function ha(g){return g.g||g.v||g.A>=3?!1:(g.Y++,g.v=Di(d(g.Da,g),Ju(g,g.A)),g.A++,!0)}n.Da=function(){if(this.v=null,Qu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var g=4*this.T;this.j.info("BP detection timer enabled: "+g),this.B=Di(d(this.Wa,this),g)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,De(10),Xs(this),Qu(this))};function jl(g){g.B!=null&&(c.clearTimeout(g.B),g.B=null)}function Qu(g){g.g=new ci(g,g.j,"rpc",g.Y),g.u===null&&(g.g.J=g.o),g.g.P=0;var v=ke(g.na);Zt(v,"RID","rpc"),Zt(v,"SID",g.M),Zt(v,"AID",g.K),Zt(v,"CI",g.F?"0":"1"),!g.F&&g.ia&&Zt(v,"TO",g.ia),Zt(v,"TYPE","xmlhttp"),ua(g,v),g.u&&g.o&&oa(v,g.u,g.o),g.O&&(g.g.H=g.O);var E=g.g;g=g.ba,E.M=1,E.A=sa(ke(v)),E.u=null,E.R=!0,so(E,g)}n.Va=function(){this.C!=null&&(this.C=null,Xs(this),ha(this),De(19))};function go(g){g.C!=null&&(c.clearTimeout(g.C),g.C=null)}function $u(g,v){var E=null;if(g.g==v){go(g),jl(g),g.g=null;var C=2}else if(Li(g.h,v))E=v.G,Il(g.h,v),C=1;else return;if(g.I!=0){if(v.o)if(C==1){E=v.u?v.u.length:0,v=Date.now()-v.F;var H=g.D;C=io(),qe(C,new Ii(C,E)),Fi(g)}else Xu(g);else if(H=v.m,H==3||H==0&&v.X>0||!(C==1&&fo(g,v)||C==2&&ha(g)))switch(E&&E.length>0&&(v=g.h,v.i=v.i.concat(E)),H){case 1:Hi(g,5);break;case 4:Hi(g,10);break;case 3:Hi(g,6);break;default:Hi(g,2)}}}function Ju(g,v){let E=g.Qa+Math.floor(Math.random()*g.Za);return g.isActive()||(E*=2),E*v}function Hi(g,v){if(g.j.info("Error code "+v),v==2){var E=d(g.bb,g),C=g.Ua;const H=!C;C=new Nn(C||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Xe(C,"https"),sa(C),H?hi(C.toString(),E):Pl(C.toString(),E)}else De(2);g.I=0,g.l&&g.l.pa(v),Zu(g),ho(g)}n.bb=function(g){g?(this.j.info("Successfully pinged google.com"),De(2)):(this.j.info("Failed to ping google.com"),De(1))};function Zu(g){if(g.I=0,g.ja=[],g.l){const v=Dl(g.h);(v.length!=0||g.i.length!=0)&&(w(g.ja,v),w(g.ja,g.i),g.h.i.length=0,S(g.i),g.i.length=0),g.l.oa()}}function th(g,v,E){var C=E instanceof Nn?ke(E):new Nn(E);if(C.g!="")v&&(C.g=v+"."+C.g),Fs(C,C.u);else{var H=c.location;C=H.protocol,v=v?v+"."+H.hostname:H.hostname,H=+H.port;const X=new Nn(null);C&&Xe(X,C),v&&(X.g=v),H&&Fs(X,H),E&&(X.h=E),C=X}return E=g.G,v=g.wa,E&&v&&Zt(C,E,v),Zt(C,"VER",g.ka),ua(g,C),C}function eh(g,v,E){if(v&&!g.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=g.Aa&&!g.ma?new ie(new Ui({ab:E})):new ie(g.ma),v.Fa(g.L),v}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function nh(){}n=nh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Qs(){}Qs.prototype.g=function(g,v){return new bn(g,v)};function bn(g,v){Ie.call(this),this.g=new Ws(v),this.l=g,this.h=v&&v.messageUrlParams||null,g=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(g?g["X-WebChannel-Content-Type"]=v.messageContentType:g={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(g?g["X-WebChannel-Client-Profile"]=v.sa:g={"X-WebChannel-Client-Profile":v.sa}),this.g.U=g,(g=v&&v.Qb)&&!k(g)&&(this.g.u=g),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!k(v)&&(this.g.G=v,g=this.h,g!==null&&v in g&&(g=this.h,v in g&&delete g[v])),this.j=new ls(this)}_(bn,Ie),bn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},bn.prototype.close=function(){zl(this.g)},bn.prototype.o=function(g){var v=this.g;if(typeof g=="string"){var E={};E.__data__=g,g=E}else this.v&&(E={},E.__data__=Bs(g),g=E);v.i.push(new Oe(v.Ya++,g)),v.I==3&&Fi(v)},bn.prototype.N=function(){this.g.l=null,delete this.j,zl(this.g),delete this.g,bn.Z.N.call(this)};function ih(g){Ze.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var v=g.__sm__;if(v){t:{for(const E in v){g=E;break t}g=void 0}(this.i=g)&&(g=this.i,v=v!==null&&g in v?v[g]:void 0),this.data=v}else this.data=g}_(ih,Ze);function sh(){Gn.call(this),this.status=1}_(sh,Gn);function ls(g){this.g=g}_(ls,nh),ls.prototype.ra=function(){qe(this.g,"a")},ls.prototype.qa=function(g){qe(this.g,new ih(g))},ls.prototype.pa=function(g){qe(this.g,new sh)},ls.prototype.oa=function(){qe(this.g,"b")},Qs.prototype.createWebChannel=Qs.prototype.g,bn.prototype.send=bn.prototype.o,bn.prototype.open=bn.prototype.m,bn.prototype.close=bn.prototype.close,lA=function(){return new Qs},oA=function(){return io()},aA=Se,zp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},na.NO_ERROR=0,na.TIMEOUT=8,na.HTTP_ERROR=6,Of=na,xl.COMPLETE="complete",rA=xl,Vu.EventType=oi,oi.OPEN="a",oi.CLOSE="b",oi.ERROR="c",oi.MESSAGE="d",Ie.prototype.listen=Ie.prototype.J,kc=Vu,ie.prototype.listenOnce=ie.prototype.K,ie.prototype.getLastError=ie.prototype.Ha,ie.prototype.getLastErrorCode=ie.prototype.ya,ie.prototype.getStatus=ie.prototype.ca,ie.prototype.getResponseJson=ie.prototype.La,ie.prototype.getResponseText=ie.prototype.la,ie.prototype.send=ie.prototype.ea,ie.prototype.setWithCredentials=ie.prototype.Fa,sA=ie}).apply(typeof uf<"u"?uf:typeof self<"u"?self:typeof window<"u"?window:{});const UT="@firebase/firestore",jT="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}fn.UNAUTHENTICATED=new fn(null),fn.GOOGLE_CREDENTIALS=new fn("google-credentials-uid"),fn.FIRST_PARTY=new fn("first-party-uid"),fn.MOCK_USER=new fn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ml="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ya=new Ty("@firebase/firestore");function Ko(){return Ya.logLevel}function ft(n,...t){if(Ya.logLevel<=jt.DEBUG){const e=t.map(Ny);Ya.debug(`Firestore (${ml}): ${n}`,...e)}}function Ls(n,...t){if(Ya.logLevel<=jt.ERROR){const e=t.map(Ny);Ya.error(`Firestore (${ml}): ${n}`,...e)}}function il(n,...t){if(Ya.logLevel<=jt.WARN){const e=t.map(Ny);Ya.warn(`Firestore (${ml}): ${n}`,...e)}}function Ny(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(e){return JSON.stringify(e)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(n,t,e){let i="Unexpected state";typeof t=="string"?i=t:e=t,cA(n,i,e)}function cA(n,t,e){let i=`FIRESTORE (${ml}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(e!==void 0)try{i+=" CONTEXT: "+JSON.stringify(e)}catch{i+=" CONTEXT: "+e}throw Ls(i),new Error(i)}function Jt(n,t,e,i){let r="Unexpected state";typeof e=="string"?r=e:i=e,n||cA(t,r,i)}function It(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const it={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ht extends Us{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class AM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(fn.UNAUTHENTICATED)))}shutdown(){}}class wM{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class RM{constructor(t){this.t=t,this.currentUser=fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){Jt(this.o===void 0,42304);let i=this.i;const r=f=>this.i!==i?(i=this.i,e(f)):Promise.resolve();let o=new kr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new kr,t.enqueueRetryable((()=>r(this.currentUser)))};const c=()=>{const f=o;t.enqueueRetryable((async()=>{await f.promise,await r(this.currentUser)}))},u=f=>{ft("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((f=>u(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?u(f):(ft("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new kr)}}),0),c()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((i=>this.i!==t?(ft("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Jt(typeof i.accessToken=="string",31837,{l:i}),new uA(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Jt(t===null||typeof t=="string",2055,{h:t}),new fn(t)}}class CM{constructor(t,e,i){this.P=t,this.T=e,this.I=i,this.type="FirstParty",this.user=fn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class IM{constructor(t,e,i){this.P=t,this.T=e,this.I=i}getToken(){return Promise.resolve(new CM(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable((()=>e(fn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class BT{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class DM{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Hn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){Jt(this.o===void 0,3512);const i=o=>{o.error!=null&&ft("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,ft("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable((()=>i(o)))};const r=o=>{ft("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>r(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):ft("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new BT(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((e=>e?(Jt(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new BT(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MM(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=MM(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<e&&(i+=t.charAt(r[o]%62))}return i}}function Bt(n,t){return n<t?-1:n>t?1:0}function Up(n,t){const e=Math.min(n.length,t.length);for(let i=0;i<e;i++){const r=n.charAt(i),o=t.charAt(i);if(r!==o)return lp(r)===lp(o)?Bt(r,o):lp(r)?1:-1}return Bt(n.length,t.length)}const OM=55296,kM=57343;function lp(n){const t=n.charCodeAt(0);return t>=OM&&t<=kM}function sl(n,t,e){return n.length===t.length&&n.every(((i,r)=>e(i,t[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT="__name__";class $i{constructor(t,e,i){e===void 0?e=0:e>t.length&&xt(637,{offset:e,range:t.length}),i===void 0?i=t.length-e:i>t.length-e&&xt(1746,{length:i,range:t.length-e}),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return $i.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof $i?t.forEach((i=>{e.push(i)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let r=0;r<i;r++){const o=$i.compareSegments(t.get(r),e.get(r));if(o!==0)return o}return Bt(t.length,e.length)}static compareSegments(t,e){const i=$i.isNumericId(t),r=$i.isNumericId(e);return i&&!r?-1:!i&&r?1:i&&r?$i.extractNumericId(t).compare($i.extractNumericId(e)):Up(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Or.fromString(t.substring(4,t.length-2))}}class ce extends $i{construct(t,e,i){return new ce(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new ht(it.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter((r=>r.length>0)))}return new ce(e)}static emptyPath(){return new ce([])}}const NM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class on extends $i{construct(t,e,i){return new on(t,e,i)}static isValidIdentifier(t){return NM.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),on.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===FT}static keyField(){return new on([FT])}static fromServerFormat(t){const e=[];let i="",r=0;const o=()=>{if(i.length===0)throw new ht(it.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let c=!1;for(;r<t.length;){const u=t[r];if(u==="\\"){if(r+1===t.length)throw new ht(it.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const f=t[r+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new ht(it.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=f,r+=2}else u==="`"?(c=!c,r++):u!=="."||c?(i+=u,r++):(o(),r++)}if(o(),c)throw new ht(it.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new on(e)}static emptyPath(){return new on([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(t){this.path=t}static fromPath(t){return new yt(ce.fromString(t))}static fromName(t){return new yt(ce.fromString(t).popFirst(5))}static empty(){return new yt(ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ce.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return ce.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new yt(new ce(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(n,t,e){if(!e)throw new ht(it.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function PM(n,t,e,i){if(t===!0&&i===!0)throw new ht(it.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function HT(n){if(!yt.isDocumentKey(n))throw new ht(it.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function qT(n){if(yt.isDocumentKey(n))throw new ht(it.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function fA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Ad(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=(function(i){return i.constructor?i.constructor.name:null})(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":xt(12329,{type:typeof n})}function Si(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new ht(it.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=Ad(n);throw new ht(it.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function je(n,t){const e={typeString:n};return t&&(e.value=t),e}function Su(n,t){if(!fA(n))throw new ht(it.INVALID_ARGUMENT,"JSON must be an object");let e;for(const i in t)if(t[i]){const r=t[i].typeString,o="value"in t[i]?{value:t[i].value}:void 0;if(!(i in n)){e=`JSON missing required field: '${i}'`;break}const c=n[i];if(r&&typeof c!==r){e=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&c!==o.value){e=`Expected '${i}' field to equal '${o.value}'`;break}}if(e)throw new ht(it.INVALID_ARGUMENT,e);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT=-62135596800,YT=1e6;class fe{static now(){return fe.fromMillis(Date.now())}static fromDate(t){return fe.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor((t-1e3*e)*YT);return new fe(e,i)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ht(it.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ht(it.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<GT)throw new ht(it.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ht(it.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/YT}_compareTo(t){return this.seconds===t.seconds?Bt(this.nanoseconds,t.nanoseconds):Bt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:fe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Su(t,fe._jsonSchema))return new fe(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-GT;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}fe._jsonSchemaVersion="firestore/timestamp/1.0",fe._jsonSchema={type:je("string",fe._jsonSchemaVersion),seconds:je("number"),nanoseconds:je("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{static fromTimestamp(t){return new wt(t)}static min(){return new wt(new fe(0,0))}static max(){return new wt(new fe(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu=-1;function VM(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=wt.fromTimestamp(i===1e9?new fe(e+1,0):new fe(e,i));return new Vr(r,yt.empty(),t)}function LM(n){return new Vr(n.readTime,n.key,iu)}class Vr{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new Vr(wt.min(),yt.empty(),iu)}static max(){return new Vr(wt.max(),yt.empty(),iu)}}function zM(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=yt.comparator(n.documentKey,t.documentKey),e!==0?e:Bt(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pl(n){if(n.code!==it.FAILED_PRECONDITION||n.message!==UM)throw n;ft("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&xt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new rt(((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(e,o).next(i,r)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof rt?e:rt.resolve(e)}catch(e){return rt.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):rt.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):rt.reject(e)}static resolve(t){return new rt(((e,i)=>{e(t)}))}static reject(t){return new rt(((e,i)=>{i(t)}))}static waitFor(t){return new rt(((e,i)=>{let r=0,o=0,c=!1;t.forEach((u=>{++r,u.next((()=>{++o,c&&o===r&&e()}),(f=>i(f)))})),c=!0,o===r&&e()}))}static or(t){let e=rt.resolve(!1);for(const i of t)e=e.next((r=>r?rt.resolve(r):i()));return e}static forEach(t,e){const i=[];return t.forEach(((r,o)=>{i.push(e.call(this,r,o))})),this.waitFor(i)}static mapArray(t,e){return new rt(((i,r)=>{const o=t.length,c=new Array(o);let u=0;for(let f=0;f<o;f++){const d=f;e(t[d]).next((p=>{c[d]=p,++u,u===o&&i(c)}),(p=>r(p)))}}))}static doWhile(t,e){return new rt(((i,r)=>{const o=()=>{t()===!0?e().next((()=>{o()}),r):i()};o()}))}}function BM(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function yl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>e.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}wd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vy=-1;function Rd(n){return n==null}function ed(n){return n===0&&1/n==-1/0}function FM(n){return typeof n=="number"&&Number.isInteger(n)&&!ed(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA="";function HM(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=KT(t)),t=qM(n.get(e),t);return KT(t)}function qM(n,t){let e=t;const i=n.length;for(let r=0;r<i;r++){const o=n.charAt(r);switch(o){case"\0":e+="";break;case dA:e+="";break;default:e+=o}}return e}function KT(n){return n+dA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WT(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Wr(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function gA(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(t,e){this.comparator=t,this.root=e||an.EMPTY}insert(t,e){return new be(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,an.BLACK,null,null))}remove(t){return new be(this.comparator,this.root.remove(t,this.comparator).copy(null,null,an.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,i)=>(t(e,i),!1)))}toString(){const t=[];return this.inorderTraversal(((e,i)=>(t.push(`${e}:${i}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new hf(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new hf(this.root,t,this.comparator,!1)}getReverseIterator(){return new hf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new hf(this.root,t,this.comparator,!0)}}class hf{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=e?i(t.key,e):1,e&&r&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class an{constructor(t,e,i,r,o){this.key=t,this.value=e,this.color=i??an.RED,this.left=r??an.EMPTY,this.right=o??an.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,o){return new an(t??this.key,e??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this;const o=i(t,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(t,e,i),null):o===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return an.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return an.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,an.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,an.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw xt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw xt(27949);return t+(this.isRed()?0:1)}}an.EMPTY=null,an.RED=!0,an.BLACK=!1;an.EMPTY=new class{constructor(){this.size=0}get key(){throw xt(57766)}get value(){throw xt(16141)}get color(){throw xt(16727)}get left(){throw xt(29726)}get right(){throw xt(36894)}copy(t,e,i,r,o){return this}insert(t,e,i){return new an(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(t){this.comparator=t,this.data=new be(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,i)=>(t(e),!1)))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new XT(this.data.getIterator())}getIteratorFrom(t){return new XT(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((i=>{e=e.add(i)})),e}isEqual(t){if(!(t instanceof Ke)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new Ke(this.comparator);return e.data=t,e}}class XT{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(t){this.fields=t,t.sort(on.comparator)}static empty(){return new qn([])}unionWith(t){let e=new Ke(on.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new qn(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return sl(this.fields,t.fields,((e,i)=>e.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(t){this.binaryString=t}static fromBase64String(t){const e=(function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new mA("Invalid base64 string: "+o):o}})(t);return new ln(e)}static fromUint8Array(t){const e=(function(r){let o="";for(let c=0;c<r.length;++c)o+=String.fromCharCode(r[c]);return o})(t);return new ln(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(e){return btoa(e)})(this.binaryString)}toUint8Array(){return(function(e){const i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Bt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ln.EMPTY_BYTE_STRING=new ln("");const GM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Lr(n){if(Jt(!!n,39018),typeof n=="string"){let t=0;const e=GM.exec(n);if(Jt(!!e,46558,{timestamp:n}),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Re(n.seconds),nanos:Re(n.nanos)}}function Re(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function zr(n){return typeof n=="string"?ln.fromBase64String(n):ln.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA="server_timestamp",yA="__type__",_A="__previous_value__",bA="__local_write_time__";function Ly(n){var e,i;return((i=(((e=n==null?void 0:n.mapValue)==null?void 0:e.fields)||{})[yA])==null?void 0:i.stringValue)===pA}function Cd(n){const t=n.mapValue.fields[_A];return Ly(t)?Cd(t):t}function su(n){const t=Lr(n.mapValue.fields[bA].timestampValue);return new fe(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(t,e,i,r,o,c,u,f,d,p){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=u,this.longPollingOptions=f,this.useFetchStreams=d,this.isUsingEmulator=p}}const nd="(default)";class ru{constructor(t,e){this.projectId=t,this.database=e||nd}static empty(){return new ru("","")}get isDefaultDatabase(){return this.database===nd}isEqual(t){return t instanceof ru&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA="__type__",KM="__max__",ff={mapValue:{}},TA="__vector__",id="value";function Ur(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ly(n)?4:XM(n)?9007199254740991:WM(n)?10:11:xt(28295,{value:n})}function ss(n,t){if(n===t)return!0;const e=Ur(n);if(e!==Ur(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return su(n).isEqual(su(t));case 3:return(function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const c=Lr(r.timestampValue),u=Lr(o.timestampValue);return c.seconds===u.seconds&&c.nanos===u.nanos})(n,t);case 5:return n.stringValue===t.stringValue;case 6:return(function(r,o){return zr(r.bytesValue).isEqual(zr(o.bytesValue))})(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return(function(r,o){return Re(r.geoPointValue.latitude)===Re(o.geoPointValue.latitude)&&Re(r.geoPointValue.longitude)===Re(o.geoPointValue.longitude)})(n,t);case 2:return(function(r,o){if("integerValue"in r&&"integerValue"in o)return Re(r.integerValue)===Re(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const c=Re(r.doubleValue),u=Re(o.doubleValue);return c===u?ed(c)===ed(u):isNaN(c)&&isNaN(u)}return!1})(n,t);case 9:return sl(n.arrayValue.values||[],t.arrayValue.values||[],ss);case 10:case 11:return(function(r,o){const c=r.mapValue.fields||{},u=o.mapValue.fields||{};if(WT(c)!==WT(u))return!1;for(const f in c)if(c.hasOwnProperty(f)&&(u[f]===void 0||!ss(c[f],u[f])))return!1;return!0})(n,t);default:return xt(52216,{left:n})}}function au(n,t){return(n.values||[]).find((e=>ss(e,t)))!==void 0}function rl(n,t){if(n===t)return 0;const e=Ur(n),i=Ur(t);if(e!==i)return Bt(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return Bt(n.booleanValue,t.booleanValue);case 2:return(function(o,c){const u=Re(o.integerValue||o.doubleValue),f=Re(c.integerValue||c.doubleValue);return u<f?-1:u>f?1:u===f?0:isNaN(u)?isNaN(f)?0:-1:1})(n,t);case 3:return QT(n.timestampValue,t.timestampValue);case 4:return QT(su(n),su(t));case 5:return Up(n.stringValue,t.stringValue);case 6:return(function(o,c){const u=zr(o),f=zr(c);return u.compareTo(f)})(n.bytesValue,t.bytesValue);case 7:return(function(o,c){const u=o.split("/"),f=c.split("/");for(let d=0;d<u.length&&d<f.length;d++){const p=Bt(u[d],f[d]);if(p!==0)return p}return Bt(u.length,f.length)})(n.referenceValue,t.referenceValue);case 8:return(function(o,c){const u=Bt(Re(o.latitude),Re(c.latitude));return u!==0?u:Bt(Re(o.longitude),Re(c.longitude))})(n.geoPointValue,t.geoPointValue);case 9:return $T(n.arrayValue,t.arrayValue);case 10:return(function(o,c){var b,S,w,A;const u=o.fields||{},f=c.fields||{},d=(b=u[id])==null?void 0:b.arrayValue,p=(S=f[id])==null?void 0:S.arrayValue,_=Bt(((w=d==null?void 0:d.values)==null?void 0:w.length)||0,((A=p==null?void 0:p.values)==null?void 0:A.length)||0);return _!==0?_:$T(d,p)})(n.mapValue,t.mapValue);case 11:return(function(o,c){if(o===ff.mapValue&&c===ff.mapValue)return 0;if(o===ff.mapValue)return 1;if(c===ff.mapValue)return-1;const u=o.fields||{},f=Object.keys(u),d=c.fields||{},p=Object.keys(d);f.sort(),p.sort();for(let _=0;_<f.length&&_<p.length;++_){const b=Up(f[_],p[_]);if(b!==0)return b;const S=rl(u[f[_]],d[p[_]]);if(S!==0)return S}return Bt(f.length,p.length)})(n.mapValue,t.mapValue);default:throw xt(23264,{he:e})}}function QT(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return Bt(n,t);const e=Lr(n),i=Lr(t),r=Bt(e.seconds,i.seconds);return r!==0?r:Bt(e.nanos,i.nanos)}function $T(n,t){const e=n.values||[],i=t.values||[];for(let r=0;r<e.length&&r<i.length;++r){const o=rl(e[r],i[r]);if(o)return o}return Bt(e.length,i.length)}function al(n){return jp(n)}function jp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(e){const i=Lr(e);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(e){return zr(e).toBase64()})(n.bytesValue):"referenceValue"in n?(function(e){return yt.fromName(e).toString()})(n.referenceValue):"geoPointValue"in n?(function(e){return`geo(${e.latitude},${e.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(e){let i="[",r=!0;for(const o of e.values||[])r?r=!1:i+=",",i+=jp(o);return i+"]"})(n.arrayValue):"mapValue"in n?(function(e){const i=Object.keys(e.fields||{}).sort();let r="{",o=!0;for(const c of i)o?o=!1:r+=",",r+=`${c}:${jp(e.fields[c])}`;return r+"}"})(n.mapValue):xt(61005,{value:n})}function kf(n){switch(Ur(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Cd(n);return t?16+kf(t):16;case 5:return 2*n.stringValue.length;case 6:return zr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((r,o)=>r+kf(o)),0)})(n.arrayValue);case 10:case 11:return(function(i){let r=0;return Wr(i.fields,((o,c)=>{r+=o.length+kf(c)})),r})(n.mapValue);default:throw xt(13486,{value:n})}}function JT(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function Bp(n){return!!n&&"integerValue"in n}function zy(n){return!!n&&"arrayValue"in n}function ZT(n){return!!n&&"nullValue"in n}function tE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Nf(n){return!!n&&"mapValue"in n}function WM(n){var e,i;return((i=(((e=n==null?void 0:n.mapValue)==null?void 0:e.fields)||{})[vA])==null?void 0:i.stringValue)===TA}function Gc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const t={mapValue:{fields:{}}};return Wr(n.mapValue.fields,((e,i)=>t.mapValue.fields[e]=Gc(i))),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Gc(n.arrayValue.values[e]);return t}return{...n}}function XM(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===KM}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(t){this.value=t}static empty(){return new Dn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!Nf(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Gc(e)}setAll(t){let e=on.emptyPath(),i={},r=[];t.forEach(((c,u)=>{if(!e.isImmediateParentOf(u)){const f=this.getFieldsMap(e);this.applyChanges(f,i,r),i={},r=[],e=u.popLast()}c?i[u.lastSegment()]=Gc(c):r.push(u.lastSegment())}));const o=this.getFieldsMap(e);this.applyChanges(o,i,r)}delete(t){const e=this.field(t.popLast());Nf(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return ss(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];Nf(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){Wr(e,((r,o)=>t[r]=o));for(const r of i)delete t[r]}clone(){return new Dn(Gc(this.value))}}function EA(n){const t=[];return Wr(n.fields,((e,i)=>{const r=new on([e]);if(Nf(i)){const o=EA(i.mapValue).fields;if(o.length===0)t.push(r);else for(const c of o)t.push(r.child(c))}else t.push(r)})),new qn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(t,e,i,r,o,c,u){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.createTime=o,this.data=c,this.documentState=u}static newInvalidDocument(t){return new gn(t,0,wt.min(),wt.min(),wt.min(),Dn.empty(),0)}static newFoundDocument(t,e,i,r){return new gn(t,1,e,wt.min(),i,r,0)}static newNoDocument(t,e){return new gn(t,2,e,wt.min(),wt.min(),Dn.empty(),0)}static newUnknownDocument(t,e){return new gn(t,3,e,wt.min(),wt.min(),Dn.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(wt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Dn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=wt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof gn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new gn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(t,e){this.position=t,this.inclusive=e}}function eE(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){const o=t[r],c=n.position[r];if(o.field.isKeyField()?i=yt.comparator(yt.fromName(c.referenceValue),e.key):i=rl(c,e.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function nE(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!ss(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(t,e="asc"){this.field=t,this.dir=e}}function QM(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{}class Ue extends SA{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new JM(t,e,i):e==="array-contains"?new eO(t,i):e==="in"?new nO(t,i):e==="not-in"?new iO(t,i):e==="array-contains-any"?new sO(t,i):new Ue(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new ZM(t,i):new tO(t,i)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(rl(e,this.value)):e!==null&&Ur(this.value)===Ur(e)&&this.matchesComparison(rl(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return xt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ai extends SA{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new Ai(t,e)}matches(t){return xA(this)?this.filters.find((e=>!e.matches(t)))===void 0:this.filters.find((e=>e.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function xA(n){return n.op==="and"}function AA(n){return $M(n)&&xA(n)}function $M(n){for(const t of n.filters)if(t instanceof Ai)return!1;return!0}function Fp(n){if(n instanceof Ue)return n.field.canonicalString()+n.op.toString()+al(n.value);if(AA(n))return n.filters.map((t=>Fp(t))).join(",");{const t=n.filters.map((e=>Fp(e))).join(",");return`${n.op}(${t})`}}function wA(n,t){return n instanceof Ue?(function(i,r){return r instanceof Ue&&i.op===r.op&&i.field.isEqual(r.field)&&ss(i.value,r.value)})(n,t):n instanceof Ai?(function(i,r){return r instanceof Ai&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce(((o,c,u)=>o&&wA(c,r.filters[u])),!0):!1})(n,t):void xt(19439)}function RA(n){return n instanceof Ue?(function(e){return`${e.field.canonicalString()} ${e.op} ${al(e.value)}`})(n):n instanceof Ai?(function(e){return e.op.toString()+" {"+e.getFilters().map(RA).join(" ,")+"}"})(n):"Filter"}class JM extends Ue{constructor(t,e,i){super(t,e,i),this.key=yt.fromName(i.referenceValue)}matches(t){const e=yt.comparator(t.key,this.key);return this.matchesComparison(e)}}class ZM extends Ue{constructor(t,e){super(t,"in",e),this.keys=CA("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class tO extends Ue{constructor(t,e){super(t,"not-in",e),this.keys=CA("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function CA(n,t){var e;return(((e=t.arrayValue)==null?void 0:e.values)||[]).map((i=>yt.fromName(i.referenceValue)))}class eO extends Ue{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return zy(e)&&au(e.arrayValue,this.value)}}class nO extends Ue{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&au(this.value.arrayValue,e)}}class iO extends Ue{constructor(t,e){super(t,"not-in",e)}matches(t){if(au(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!au(this.value.arrayValue,e)}}class sO extends Ue{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!zy(e)||!e.arrayValue.values)&&e.arrayValue.values.some((i=>au(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(t,e=null,i=[],r=[],o=null,c=null,u=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=c,this.endAt=u,this.Te=null}}function iE(n,t=null,e=[],i=[],r=null,o=null,c=null){return new rO(n,t,e,i,r,o,c)}function Uy(n){const t=It(n);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((i=>Fp(i))).join(","),e+="|ob:",e+=t.orderBy.map((i=>(function(o){return o.field.canonicalString()+o.dir})(i))).join(","),Rd(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((i=>al(i))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((i=>al(i))).join(",")),t.Te=e}return t.Te}function jy(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!QM(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!wA(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!nE(n.startAt,t.startAt)&&nE(n.endAt,t.endAt)}function Hp(n){return yt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(t,e=null,i=[],r=[],o=null,c="F",u=null,f=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=c,this.startAt=u,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function aO(n,t,e,i,r,o,c,u){return new xu(n,t,e,i,r,o,c,u)}function By(n){return new xu(n)}function sE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function IA(n){return n.collectionGroup!==null}function Yc(n){const t=It(n);if(t.Ie===null){t.Ie=[];const e=new Set;for(const o of t.explicitOrderBy)t.Ie.push(o),e.add(o.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let u=new Ke(on.comparator);return c.filters.forEach((f=>{f.getFlattenedFilters().forEach((d=>{d.isInequality()&&(u=u.add(d.field))}))})),u})(t).forEach((o=>{e.has(o.canonicalString())||o.isKeyField()||t.Ie.push(new rd(o,i))})),e.has(on.keyField().canonicalString())||t.Ie.push(new rd(on.keyField(),i))}return t.Ie}function Zi(n){const t=It(n);return t.Ee||(t.Ee=oO(t,Yc(n))),t.Ee}function oO(n,t){if(n.limitType==="F")return iE(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map((r=>{const o=r.dir==="desc"?"asc":"desc";return new rd(r.field,o)}));const e=n.endAt?new sd(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new sd(n.startAt.position,n.startAt.inclusive):null;return iE(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}function qp(n,t){const e=n.filters.concat([t]);return new xu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function Gp(n,t,e){return new xu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function Id(n,t){return jy(Zi(n),Zi(t))&&n.limitType===t.limitType}function DA(n){return`${Uy(Zi(n))}|lt:${n.limitType}`}function Wo(n){return`Query(target=${(function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map((r=>RA(r))).join(", ")}]`),Rd(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map((r=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(r))).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map((r=>al(r))).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map((r=>al(r))).join(",")),`Target(${i})`})(Zi(n))}; limitType=${n.limitType})`}function Dd(n,t){return t.isFoundDocument()&&(function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):yt.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)})(n,t)&&(function(i,r){for(const o of Yc(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0})(n,t)&&(function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0})(n,t)&&(function(i,r){return!(i.startAt&&!(function(c,u,f){const d=eE(c,u,f);return c.inclusive?d<=0:d<0})(i.startAt,Yc(i),r)||i.endAt&&!(function(c,u,f){const d=eE(c,u,f);return c.inclusive?d>=0:d>0})(i.endAt,Yc(i),r))})(n,t)}function lO(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function MA(n){return(t,e)=>{let i=!1;for(const r of Yc(n)){const o=cO(r,t,e);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function cO(n,t,e){const i=n.field.isKeyField()?yt.comparator(t.key,e.key):(function(o,c,u){const f=c.data.field(o),d=u.data.field(o);return f!==null&&d!==null?rl(f,d):xt(42886)})(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return xt(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,t))return o}}has(t){return this.get(t)!==void 0}set(t,e){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return void(r[o]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Wr(this.inner,((e,i)=>{for(const[r,o]of i)t(r,o)}))}isEmpty(){return gA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uO=new be(yt.comparator);function zs(){return uO}const OA=new be(yt.comparator);function Nc(...n){let t=OA;for(const e of n)t=t.insert(e.key,e);return t}function kA(n){let t=OA;return n.forEach(((e,i)=>t=t.insert(e,i.overlayedDocument))),t}function Va(){return Kc()}function NA(){return Kc()}function Kc(){return new Qa((n=>n.toString()),((n,t)=>n.isEqual(t)))}const hO=new be(yt.comparator),fO=new Ke(yt.comparator);function Ft(...n){let t=fO;for(const e of n)t=t.add(e);return t}const dO=new Ke(Bt);function gO(){return dO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fy(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ed(t)?"-0":t}}function PA(n){return{integerValue:""+n}}function mO(n,t){return FM(t)?PA(t):Fy(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(){this._=void 0}}function pO(n,t,e){return n instanceof ad?(function(r,o){const c={fields:{[yA]:{stringValue:pA},[bA]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&Ly(o)&&(o=Cd(o)),o&&(c.fields[_A]=o),{mapValue:c}})(e,t):n instanceof ou?LA(n,t):n instanceof lu?zA(n,t):(function(r,o){const c=VA(r,o),u=rE(c)+rE(r.Ae);return Bp(c)&&Bp(r.Ae)?PA(u):Fy(r.serializer,u)})(n,t)}function yO(n,t,e){return n instanceof ou?LA(n,t):n instanceof lu?zA(n,t):e}function VA(n,t){return n instanceof od?(function(i){return Bp(i)||(function(o){return!!o&&"doubleValue"in o})(i)})(t)?t:{integerValue:0}:null}class ad extends Md{}class ou extends Md{constructor(t){super(),this.elements=t}}function LA(n,t){const e=UA(t);for(const i of n.elements)e.some((r=>ss(r,i)))||e.push(i);return{arrayValue:{values:e}}}class lu extends Md{constructor(t){super(),this.elements=t}}function zA(n,t){let e=UA(t);for(const i of n.elements)e=e.filter((r=>!ss(r,i)));return{arrayValue:{values:e}}}class od extends Md{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function rE(n){return Re(n.integerValue||n.doubleValue)}function UA(n){return zy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function _O(n,t){return n.field.isEqual(t.field)&&(function(i,r){return i instanceof ou&&r instanceof ou||i instanceof lu&&r instanceof lu?sl(i.elements,r.elements,ss):i instanceof od&&r instanceof od?ss(i.Ae,r.Ae):i instanceof ad&&r instanceof ad})(n.transform,t.transform)}class bO{constructor(t,e){this.version=t,this.transformResults=e}}class On{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new On}static exists(t){return new On(void 0,t)}static updateTime(t){return new On(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Pf(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class Od{}function jA(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new kd(n.key,On.none()):new Au(n.key,n.data,On.none());{const e=n.data,i=Dn.empty();let r=new Ke(on.comparator);for(let o of t.fields)if(!r.has(o)){let c=e.field(o);c===null&&o.length>1&&(o=o.popLast(),c=e.field(o)),c===null?i.delete(o):i.set(o,c),r=r.add(o)}return new Xr(n.key,i,new qn(r.toArray()),On.none())}}function vO(n,t,e){n instanceof Au?(function(r,o,c){const u=r.value.clone(),f=oE(r.fieldTransforms,o,c.transformResults);u.setAll(f),o.convertToFoundDocument(c.version,u).setHasCommittedMutations()})(n,t,e):n instanceof Xr?(function(r,o,c){if(!Pf(r.precondition,o))return void o.convertToUnknownDocument(c.version);const u=oE(r.fieldTransforms,o,c.transformResults),f=o.data;f.setAll(BA(r)),f.setAll(u),o.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(n,t,e):(function(r,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()})(0,t,e)}function Wc(n,t,e,i){return n instanceof Au?(function(o,c,u,f){if(!Pf(o.precondition,c))return u;const d=o.value.clone(),p=lE(o.fieldTransforms,f,c);return d.setAll(p),c.convertToFoundDocument(c.version,d).setHasLocalMutations(),null})(n,t,e,i):n instanceof Xr?(function(o,c,u,f){if(!Pf(o.precondition,c))return u;const d=lE(o.fieldTransforms,f,c),p=c.data;return p.setAll(BA(o)),p.setAll(d),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((_=>_.field)))})(n,t,e,i):(function(o,c,u){return Pf(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):u})(n,t,e)}function TO(n,t){let e=null;for(const i of n.fieldTransforms){const r=t.data.field(i.field),o=VA(i.transform,r||null);o!=null&&(e===null&&(e=Dn.empty()),e.set(i.field,o))}return e||null}function aE(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&sl(i,r,((o,c)=>_O(o,c)))})(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class Au extends Od{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Xr extends Od{constructor(t,e,i,r,o=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function BA(n){const t=new Map;return n.fieldMask.fields.forEach((e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}})),t}function oE(n,t,e){const i=new Map;Jt(n.length===e.length,32656,{Re:e.length,Ve:n.length});for(let r=0;r<e.length;r++){const o=n[r],c=o.transform,u=t.data.field(o.field);i.set(o.field,yO(c,u,e[r]))}return i}function lE(n,t,e){const i=new Map;for(const r of n){const o=r.transform,c=e.data.field(r.field);i.set(r.field,pO(o,c,t))}return i}class kd extends Od{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class EO extends Od{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(t.key)&&vO(o,t,i[r])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=Wc(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=Wc(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=NA();return this.mutations.forEach((r=>{const o=t.get(r.key),c=o.overlayedDocument;let u=this.applyToLocalView(c,o.mutatedFields);u=e.has(r.key)?null:u;const f=jA(c,u);f!==null&&i.set(r.key,f),c.isValidDocument()||c.convertToNoDocument(wt.min())})),i}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Ft())}isEqual(t){return this.batchId===t.batchId&&sl(this.mutations,t.mutations,((e,i)=>aE(e,i)))&&sl(this.baseMutations,t.baseMutations,((e,i)=>aE(e,i)))}}class Hy{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){Jt(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let r=(function(){return hO})();const o=t.mutations;for(let c=0;c<o.length;c++)r=r.insert(o[c].key,i[c].version);return new Hy(t,e,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze,Yt;function wO(n){switch(n){case it.OK:return xt(64938);case it.CANCELLED:case it.UNKNOWN:case it.DEADLINE_EXCEEDED:case it.RESOURCE_EXHAUSTED:case it.INTERNAL:case it.UNAVAILABLE:case it.UNAUTHENTICATED:return!1;case it.INVALID_ARGUMENT:case it.NOT_FOUND:case it.ALREADY_EXISTS:case it.PERMISSION_DENIED:case it.FAILED_PRECONDITION:case it.ABORTED:case it.OUT_OF_RANGE:case it.UNIMPLEMENTED:case it.DATA_LOSS:return!0;default:return xt(15467,{code:n})}}function FA(n){if(n===void 0)return Ls("GRPC error has no .code"),it.UNKNOWN;switch(n){case ze.OK:return it.OK;case ze.CANCELLED:return it.CANCELLED;case ze.UNKNOWN:return it.UNKNOWN;case ze.DEADLINE_EXCEEDED:return it.DEADLINE_EXCEEDED;case ze.RESOURCE_EXHAUSTED:return it.RESOURCE_EXHAUSTED;case ze.INTERNAL:return it.INTERNAL;case ze.UNAVAILABLE:return it.UNAVAILABLE;case ze.UNAUTHENTICATED:return it.UNAUTHENTICATED;case ze.INVALID_ARGUMENT:return it.INVALID_ARGUMENT;case ze.NOT_FOUND:return it.NOT_FOUND;case ze.ALREADY_EXISTS:return it.ALREADY_EXISTS;case ze.PERMISSION_DENIED:return it.PERMISSION_DENIED;case ze.FAILED_PRECONDITION:return it.FAILED_PRECONDITION;case ze.ABORTED:return it.ABORTED;case ze.OUT_OF_RANGE:return it.OUT_OF_RANGE;case ze.UNIMPLEMENTED:return it.UNIMPLEMENTED;case ze.DATA_LOSS:return it.DATA_LOSS;default:return xt(39323,{code:n})}}(Yt=ze||(ze={}))[Yt.OK=0]="OK",Yt[Yt.CANCELLED=1]="CANCELLED",Yt[Yt.UNKNOWN=2]="UNKNOWN",Yt[Yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Yt[Yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Yt[Yt.NOT_FOUND=5]="NOT_FOUND",Yt[Yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Yt[Yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Yt[Yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Yt[Yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Yt[Yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Yt[Yt.ABORTED=10]="ABORTED",Yt[Yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Yt[Yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Yt[Yt.INTERNAL=13]="INTERNAL",Yt[Yt.UNAVAILABLE=14]="UNAVAILABLE",Yt[Yt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO=new Or([4294967295,4294967295],0);function cE(n){const t=RO().encode(n),e=new iA;return e.update(t),new Uint8Array(e.digest())}function uE(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new Or([e,i],0),new Or([r,o],0)]}class qy{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new Pc(`Invalid padding: ${e}`);if(i<0)throw new Pc(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new Pc(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new Pc(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=Or.fromNumber(this.ge)}ye(t,e,i){let r=t.add(e.multiply(Or.fromNumber(i)));return r.compare(CO)===1&&(r=new Or([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const e=cE(t),[i,r]=uE(e);for(let o=0;o<this.hashCount;o++){const c=this.ye(i,r,o);if(!this.we(c))return!1}return!0}static create(t,e,i){const r=t%8==0?0:8-t%8,o=new Uint8Array(Math.ceil(t/8)),c=new qy(o,r,e);return i.forEach((u=>c.insert(u))),c}insert(t){if(this.ge===0)return;const e=cE(t),[i,r]=uE(e);for(let o=0;o<this.hashCount;o++){const c=this.ye(i,r,o);this.Se(c)}}Se(t){const e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}}class Pc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(t,e,i,r,o){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const r=new Map;return r.set(t,wu.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new Nd(wt.min(),r,new be(Bt),zs(),Ft())}}class wu{constructor(t,e,i,r,o){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new wu(i,e,Ft(),Ft(),Ft())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(t,e,i,r){this.be=t,this.removedTargetIds=e,this.key=i,this.De=r}}class HA{constructor(t,e){this.targetId=t,this.Ce=e}}class qA{constructor(t,e,i=ln.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}}class hE{constructor(){this.ve=0,this.Fe=fE(),this.Me=ln.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Ft(),e=Ft(),i=Ft();return this.Fe.forEach(((r,o)=>{switch(o){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:xt(38017,{changeType:o})}})),new wu(this.Me,this.xe,t,e,i)}qe(){this.Oe=!1,this.Fe=fE()}Qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Jt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class IO{constructor(t){this.Ge=t,this.ze=new Map,this.je=zs(),this.Je=df(),this.He=df(),this.Ye=new be(Bt)}Ze(t){for(const e of t.be)t.De&&t.De.isFoundDocument()?this.Xe(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,(e=>{const i=this.nt(e);switch(t.state){case 0:this.rt(e)&&i.Le(t.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(t.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(i.We(),i.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),i.Le(t.resumeToken));break;default:xt(56790,{state:t.state})}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach(((i,r)=>{this.rt(r)&&e(r)}))}st(t){const e=t.targetId,i=t.Ce.count,r=this.ot(e);if(r){const o=r.target;if(Hp(o))if(i===0){const c=new yt(o.path);this.et(e,c,gn.newNoDocument(c,wt.min()))}else Jt(i===1,20013,{expectedCount:i});else{const c=this._t(e);if(c!==i){const u=this.ut(t),f=u?this.ct(u,t,c):1;if(f!==0){this.it(e);const d=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(e,d)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=e;let c,u;try{c=zr(i).toUint8Array()}catch(f){if(f instanceof mA)return il("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{u=new qy(c,r,o)}catch(f){return il(f instanceof Pc?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return u.ge===0?null:u}ct(t,e,i){return e.Ce.count===i-this.Pt(t,e.targetId)?0:2}Pt(t,e){const i=this.Ge.getRemoteKeysForTarget(e);let r=0;return i.forEach((o=>{const c=this.Ge.ht(),u=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;t.mightContain(u)||(this.et(e,o,null),r++)})),r}Tt(t){const e=new Map;this.ze.forEach(((o,c)=>{const u=this.ot(c);if(u){if(o.current&&Hp(u.target)){const f=new yt(u.target.path);this.It(f).has(c)||this.Et(c,f)||this.et(c,f,gn.newNoDocument(f,t))}o.Be&&(e.set(c,o.ke()),o.qe())}}));let i=Ft();this.He.forEach(((o,c)=>{let u=!0;c.forEachWhile((f=>{const d=this.ot(f);return!d||d.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(i=i.add(o))})),this.je.forEach(((o,c)=>c.setReadTime(t)));const r=new Nd(t,e,this.Ye,this.je,i);return this.je=zs(),this.Je=df(),this.He=df(),this.Ye=new be(Bt),r}Xe(t,e){if(!this.rt(t))return;const i=this.Et(t,e.key)?2:0;this.nt(t).Qe(e.key,i),this.je=this.je.insert(e.key,e),this.Je=this.Je.insert(e.key,this.It(e.key).add(t)),this.He=this.He.insert(e.key,this.dt(e.key).add(t))}et(t,e,i){if(!this.rt(t))return;const r=this.nt(t);this.Et(t,e)?r.Qe(e,1):r.$e(e),this.He=this.He.insert(e,this.dt(e).delete(t)),this.He=this.He.insert(e,this.dt(e).add(t)),i&&(this.je=this.je.insert(e,i))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let e=this.ze.get(t);return e||(e=new hE,this.ze.set(t,e)),e}dt(t){let e=this.He.get(t);return e||(e=new Ke(Bt),this.He=this.He.insert(t,e)),e}It(t){let e=this.Je.get(t);return e||(e=new Ke(Bt),this.Je=this.Je.insert(t,e)),e}rt(t){const e=this.ot(t)!==null;return e||ft("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new hE),this.Ge.getRemoteKeysForTarget(t).forEach((e=>{this.et(t,e,null)}))}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function df(){return new be(yt.comparator)}function fE(){return new be(yt.comparator)}const DO={asc:"ASCENDING",desc:"DESCENDING"},MO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},OO={and:"AND",or:"OR"};class kO{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Yp(n,t){return n.useProto3Json||Rd(t)?t:{value:t}}function ld(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function GA(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function NO(n,t){return ld(n,t.toTimestamp())}function ts(n){return Jt(!!n,49232),wt.fromTimestamp((function(e){const i=Lr(e);return new fe(i.seconds,i.nanos)})(n))}function Gy(n,t){return Kp(n,t).canonicalString()}function Kp(n,t){const e=(function(r){return new ce(["projects",r.projectId,"databases",r.database])})(n).child("documents");return t===void 0?e:e.child(t)}function YA(n){const t=ce.fromString(n);return Jt($A(t),10190,{key:t.toString()}),t}function Wp(n,t){return Gy(n.databaseId,t.path)}function cp(n,t){const e=YA(t);if(e.get(1)!==n.databaseId.projectId)throw new ht(it.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new ht(it.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new yt(WA(e))}function KA(n,t){return Gy(n.databaseId,t)}function PO(n){const t=YA(n);return t.length===4?ce.emptyPath():WA(t)}function Xp(n){return new ce(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function WA(n){return Jt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function dE(n,t,e){return{name:Wp(n,t),fields:e.value.mapValue.fields}}function VO(n,t){let e;if("targetChange"in t){t.targetChange;const i=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:xt(39313,{state:d})})(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],o=(function(d,p){return d.useProto3Json?(Jt(p===void 0||typeof p=="string",58123),ln.fromBase64String(p||"")):(Jt(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),ln.fromUint8Array(p||new Uint8Array))})(n,t.targetChange.resumeToken),c=t.targetChange.cause,u=c&&(function(d){const p=d.code===void 0?it.UNKNOWN:FA(d.code);return new ht(p,d.message||"")})(c);e=new qA(i,r,o,u||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=cp(n,i.document.name),o=ts(i.document.updateTime),c=i.document.createTime?ts(i.document.createTime):wt.min(),u=new Dn({mapValue:{fields:i.document.fields}}),f=gn.newFoundDocument(r,o,c,u),d=i.targetIds||[],p=i.removedTargetIds||[];e=new Vf(d,p,f.key,f)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=cp(n,i.document),o=i.readTime?ts(i.readTime):wt.min(),c=gn.newNoDocument(r,o),u=i.removedTargetIds||[];e=new Vf([],u,c.key,c)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=cp(n,i.document),o=i.removedTargetIds||[];e=new Vf([],o,r,null)}else{if(!("filter"in t))return xt(11601,{Rt:t});{t.filter;const i=t.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,c=new AO(r,o),u=i.targetId;e=new HA(u,c)}}return e}function LO(n,t){let e;if(t instanceof Au)e={update:dE(n,t.key,t.value)};else if(t instanceof kd)e={delete:Wp(n,t.key)};else if(t instanceof Xr)e={update:dE(n,t.key,t.data),updateMask:YO(t.fieldMask)};else{if(!(t instanceof EO))return xt(16599,{Vt:t.type});e={verify:Wp(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map((i=>(function(o,c){const u=c.transform;if(u instanceof ad)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof ou)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof lu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof od)return{fieldPath:c.field.canonicalString(),increment:u.Ae};throw xt(20930,{transform:c.transform})})(0,i)))),t.precondition.isNone||(e.currentDocument=(function(r,o){return o.updateTime!==void 0?{updateTime:NO(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:xt(27497)})(n,t.precondition)),e}function zO(n,t){return n&&n.length>0?(Jt(t!==void 0,14353),n.map((e=>(function(r,o){let c=r.updateTime?ts(r.updateTime):ts(o);return c.isEqual(wt.min())&&(c=ts(o)),new bO(c,r.transformResults||[])})(e,t)))):[]}function UO(n,t){return{documents:[KA(n,t.path)]}}function jO(n,t){const e={structuredQuery:{}},i=t.path;let r;t.collectionGroup!==null?(r=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=KA(n,r);const o=(function(d){if(d.length!==0)return QA(Ai.create(d,"and"))})(t.filters);o&&(e.structuredQuery.where=o);const c=(function(d){if(d.length!==0)return d.map((p=>(function(b){return{field:Xo(b.field),direction:HO(b.dir)}})(p)))})(t.orderBy);c&&(e.structuredQuery.orderBy=c);const u=Yp(n,t.limit);return u!==null&&(e.structuredQuery.limit=u),t.startAt&&(e.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(t.startAt)),t.endAt&&(e.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(t.endAt)),{ft:e,parent:r}}function BO(n){let t=PO(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let r=null;if(i>0){Jt(i===1,65062);const p=e.from[0];p.allDescendants?r=p.collectionId:t=t.child(p.collectionId)}let o=[];e.where&&(o=(function(_){const b=XA(_);return b instanceof Ai&&AA(b)?b.getFilters():[b]})(e.where));let c=[];e.orderBy&&(c=(function(_){return _.map((b=>(function(w){return new rd(Qo(w.field),(function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(w.direction))})(b)))})(e.orderBy));let u=null;e.limit&&(u=(function(_){let b;return b=typeof _=="object"?_.value:_,Rd(b)?null:b})(e.limit));let f=null;e.startAt&&(f=(function(_){const b=!!_.before,S=_.values||[];return new sd(S,b)})(e.startAt));let d=null;return e.endAt&&(d=(function(_){const b=!_.before,S=_.values||[];return new sd(S,b)})(e.endAt)),aO(t,r,c,o,u,"F",f,d)}function FO(n,t){const e=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xt(28987,{purpose:r})}})(t.purpose);return e==null?null:{"goog-listen-tags":e}}function XA(n){return n.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":const i=Qo(e.unaryFilter.field);return Ue.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Qo(e.unaryFilter.field);return Ue.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Qo(e.unaryFilter.field);return Ue.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Qo(e.unaryFilter.field);return Ue.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return xt(61313);default:return xt(60726)}})(n):n.fieldFilter!==void 0?(function(e){return Ue.create(Qo(e.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return xt(58110);default:return xt(50506)}})(e.fieldFilter.op),e.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(e){return Ai.create(e.compositeFilter.filters.map((i=>XA(i))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return xt(1026)}})(e.compositeFilter.op))})(n):xt(30097,{filter:n})}function HO(n){return DO[n]}function qO(n){return MO[n]}function GO(n){return OO[n]}function Xo(n){return{fieldPath:n.canonicalString()}}function Qo(n){return on.fromServerFormat(n.fieldPath)}function QA(n){return n instanceof Ue?(function(e){if(e.op==="=="){if(tE(e.value))return{unaryFilter:{field:Xo(e.field),op:"IS_NAN"}};if(ZT(e.value))return{unaryFilter:{field:Xo(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(tE(e.value))return{unaryFilter:{field:Xo(e.field),op:"IS_NOT_NAN"}};if(ZT(e.value))return{unaryFilter:{field:Xo(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xo(e.field),op:qO(e.op),value:e.value}}})(n):n instanceof Ai?(function(e){const i=e.getFilters().map((r=>QA(r)));return i.length===1?i[0]:{compositeFilter:{op:GO(e.op),filters:i}}})(n):xt(54877,{filter:n})}function YO(n){const t=[];return n.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function $A(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(t,e,i,r,o=wt.min(),c=wt.min(),u=ln.EMPTY_BYTE_STRING,f=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=u,this.expectedCount=f}withSequenceNumber(t){return new Sr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(t){this.yt=t}}function WO(n){const t=BO({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Gp(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(){this.Cn=new QO}addToCollectionParentIndex(t,e){return this.Cn.add(e),rt.resolve()}getCollectionParents(t,e){return rt.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return rt.resolve()}deleteFieldIndex(t,e){return rt.resolve()}deleteAllFieldIndexes(t){return rt.resolve()}createTargetIndexes(t,e){return rt.resolve()}getDocumentsMatchingTarget(t,e){return rt.resolve(null)}getIndexType(t,e){return rt.resolve(0)}getFieldIndexes(t,e){return rt.resolve([])}getNextCollectionGroupToUpdate(t){return rt.resolve(null)}getMinOffset(t,e){return rt.resolve(Vr.min())}getMinOffsetFromCollectionGroup(t,e){return rt.resolve(Vr.min())}updateCollectionGroup(t,e,i){return rt.resolve()}updateIndexEntries(t,e){return rt.resolve()}}class QO{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new Ke(ce.comparator),o=!r.has(i);return this.index[e]=r.add(i),o}has(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new Ke(ce.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},JA=41943040;class In{static withCacheSize(t){return new In(t,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */In.DEFAULT_COLLECTION_PERCENTILE=10,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,In.DEFAULT=new In(JA,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),In.DISABLED=new In(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new ol(0)}static cr(){return new ol(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE="LruGarbageCollector",$O=1048576;function pE([n,t],[e,i]){const r=Bt(n,e);return r===0?Bt(t,i):r}class JO{constructor(t){this.Ir=t,this.buffer=new Ke(pE),this.Er=0}dr(){return++this.Er}Ar(t){const e=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();pE(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class ZO{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){ft(mE,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){yl(e)?ft(mE,"Ignoring IndexedDB error during garbage collection: ",e):await pl(e)}await this.Vr(3e5)}))}}class tk{constructor(t,e){this.mr=t,this.params=e}calculateTargetCount(t,e){return this.mr.gr(t).next((i=>Math.floor(e/100*i)))}nthSequenceNumber(t,e){if(e===0)return rt.resolve(wd.ce);const i=new JO(e);return this.mr.forEachTarget(t,(r=>i.Ar(r.sequenceNumber))).next((()=>this.mr.pr(t,(r=>i.Ar(r))))).next((()=>i.maxValue))}removeTargets(t,e,i){return this.mr.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.mr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(ft("LruGarbageCollector","Garbage collection skipped; disabled"),rt.resolve(gE)):this.getCacheSize(t).next((i=>i<this.params.cacheSizeCollectionThreshold?(ft("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gE):this.yr(t,e)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,e){let i,r,o,c,u,f,d;const p=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(ft("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),r=this.params.maximumSequenceNumbersToCollect):r=_,c=Date.now(),this.nthSequenceNumber(t,r)))).next((_=>(i=_,u=Date.now(),this.removeTargets(t,i,e)))).next((_=>(o=_,f=Date.now(),this.removeOrphanedDocuments(t,i)))).next((_=>(d=Date.now(),Ko()<=jt.DEBUG&&ft("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-p}ms
	Determined least recently used ${r} in `+(u-c)+`ms
	Removed ${o} targets in `+(f-u)+`ms
	Removed ${_} documents in `+(d-f)+`ms
Total Duration: ${d-p}ms`),rt.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:_}))))}}function ek(n,t){return new tk(n,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(){this.changes=new Qa((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,gn.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return i!==void 0?rt.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next((r=>(i=r,this.remoteDocumentCache.getEntry(t,e)))).next((r=>(i!==null&&Wc(i.mutation,r,qn.empty(),fe.now()),r)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((i=>this.getLocalViewOfDocuments(t,i,Ft()).next((()=>i))))}getLocalViewOfDocuments(t,e,i=Ft()){const r=Va();return this.populateOverlays(t,r,e).next((()=>this.computeViews(t,e,r,i).next((o=>{let c=Nc();return o.forEach(((u,f)=>{c=c.insert(u,f.overlayedDocument)})),c}))))}getOverlayedDocuments(t,e){const i=Va();return this.populateOverlays(t,i,e).next((()=>this.computeViews(t,e,i,Ft())))}populateOverlays(t,e,i){const r=[];return i.forEach((o=>{e.has(o)||r.push(o)})),this.documentOverlayCache.getOverlays(t,r).next((o=>{o.forEach(((c,u)=>{e.set(c,u)}))}))}computeViews(t,e,i,r){let o=zs();const c=Kc(),u=(function(){return Kc()})();return e.forEach(((f,d)=>{const p=i.get(d.key);r.has(d.key)&&(p===void 0||p.mutation instanceof Xr)?o=o.insert(d.key,d):p!==void 0?(c.set(d.key,p.mutation.getFieldMask()),Wc(p.mutation,d,p.mutation.getFieldMask(),fe.now())):c.set(d.key,qn.empty())})),this.recalculateAndSaveOverlays(t,o).next((f=>(f.forEach(((d,p)=>c.set(d,p))),e.forEach(((d,p)=>u.set(d,new ik(p,c.get(d)??null)))),u)))}recalculateAndSaveOverlays(t,e){const i=Kc();let r=new be(((c,u)=>c-u)),o=Ft();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((c=>{for(const u of c)u.keys().forEach((f=>{const d=e.get(f);if(d===null)return;let p=i.get(f)||qn.empty();p=u.applyToLocalView(d,p),i.set(f,p);const _=(r.get(u.batchId)||Ft()).add(f);r=r.insert(u.batchId,_)}))})).next((()=>{const c=[],u=r.getReverseIterator();for(;u.hasNext();){const f=u.getNext(),d=f.key,p=f.value,_=NA();p.forEach((b=>{if(!o.has(b)){const S=jA(e.get(b),i.get(b));S!==null&&_.set(b,S),o=o.add(b)}})),c.push(this.documentOverlayCache.saveOverlays(t,d,_))}return rt.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((i=>this.recalculateAndSaveOverlays(t,i)))}getDocumentsMatchingQuery(t,e,i,r){return(function(c){return yt.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):IA(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,r):this.getDocumentsMatchingCollectionQuery(t,e,i,r)}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next((o=>{const c=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-o.size):rt.resolve(Va());let u=iu,f=o;return c.next((d=>rt.forEach(d,((p,_)=>(u<_.largestBatchId&&(u=_.largestBatchId),o.get(p)?rt.resolve():this.remoteDocumentCache.getEntry(t,p).next((b=>{f=f.insert(p,b)}))))).next((()=>this.populateOverlays(t,d,o))).next((()=>this.computeViews(t,f,d,Ft()))).next((p=>({batchId:u,changes:kA(p)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new yt(e)).next((i=>{let r=Nc();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r}))}getDocumentsMatchingCollectionGroupQuery(t,e,i,r){const o=e.collectionGroup;let c=Nc();return this.indexManager.getCollectionParents(t,o).next((u=>rt.forEach(u,(f=>{const d=(function(_,b){return new xu(b,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(e,f.child(o));return this.getDocumentsMatchingCollectionQuery(t,d,i,r).next((p=>{p.forEach(((_,b)=>{c=c.insert(_,b)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(t,e,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next((c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,o,r)))).next((c=>{o.forEach(((f,d)=>{const p=d.getKey();c.get(p)===null&&(c=c.insert(p,gn.newInvalidDocument(p)))}));let u=Nc();return c.forEach(((f,d)=>{const p=o.get(f);p!==void 0&&Wc(p.mutation,d,qn.empty(),fe.now()),Dd(e,d)&&(u=u.insert(f,d))})),u}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,e){return rt.resolve(this.Lr.get(e))}saveBundleMetadata(t,e){return this.Lr.set(e.id,(function(r){return{id:r.id,version:r.version,createTime:ts(r.createTime)}})(e)),rt.resolve()}getNamedQuery(t,e){return rt.resolve(this.kr.get(e))}saveNamedQuery(t,e){return this.kr.set(e.name,(function(r){return{name:r.name,query:WO(r.bundledQuery),readTime:ts(r.readTime)}})(e)),rt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(){this.overlays=new be(yt.comparator),this.qr=new Map}getOverlay(t,e){return rt.resolve(this.overlays.get(e))}getOverlays(t,e){const i=Va();return rt.forEach(e,(r=>this.getOverlay(t,r).next((o=>{o!==null&&i.set(r,o)})))).next((()=>i))}saveOverlays(t,e,i){return i.forEach(((r,o)=>{this.St(t,e,o)})),rt.resolve()}removeOverlaysForBatchId(t,e,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(i)),rt.resolve()}getOverlaysForCollection(t,e,i){const r=Va(),o=e.length+1,c=new yt(e.child("")),u=this.overlays.getIteratorFrom(c);for(;u.hasNext();){const f=u.getNext().value,d=f.getKey();if(!e.isPrefixOf(d.path))break;d.path.length===o&&f.largestBatchId>i&&r.set(f.getKey(),f)}return rt.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let o=new be(((d,p)=>d-p));const c=this.overlays.getIterator();for(;c.hasNext();){const d=c.getNext().value;if(d.getKey().getCollectionGroup()===e&&d.largestBatchId>i){let p=o.get(d.largestBatchId);p===null&&(p=Va(),o=o.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const u=Va(),f=o.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((d,p)=>u.set(d,p))),!(u.size()>=r)););return rt.resolve(u)}St(t,e,i){const r=this.overlays.get(i.key);if(r!==null){const c=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new xO(e,i));let o=this.qr.get(e);o===void 0&&(o=Ft(),this.qr.set(e,o)),this.qr.set(e,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(){this.sessionToken=ln.EMPTY_BYTE_STRING}getSessionToken(t){return rt.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,rt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy{constructor(){this.Qr=new Ke($e.$r),this.Ur=new Ke($e.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,e){const i=new $e(t,e);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(t,e){t.forEach((i=>this.addReference(i,e)))}removeReference(t,e){this.Gr(new $e(t,e))}zr(t,e){t.forEach((i=>this.removeReference(i,e)))}jr(t){const e=new yt(new ce([])),i=new $e(e,t),r=new $e(e,t+1),o=[];return this.Ur.forEachInRange([i,r],(c=>{this.Gr(c),o.push(c.key)})),o}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const e=new yt(new ce([])),i=new $e(e,t),r=new $e(e,t+1);let o=Ft();return this.Ur.forEachInRange([i,r],(c=>{o=o.add(c.key)})),o}containsKey(t){const e=new $e(t,0),i=this.Qr.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}}class $e{constructor(t,e){this.key=t,this.Yr=e}static $r(t,e){return yt.comparator(t.key,e.key)||Bt(t.Yr,e.Yr)}static Kr(t,e){return Bt(t.Yr,e.Yr)||yt.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.tr=1,this.Zr=new Ke($e.$r)}checkEmpty(t){return rt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,r){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new SO(o,e,i,r);this.mutationQueue.push(c);for(const u of r)this.Zr=this.Zr.add(new $e(u.key,o)),this.indexManager.addToCollectionParentIndex(t,u.key.path.popLast());return rt.resolve(c)}lookupMutationBatch(t,e){return rt.resolve(this.Xr(e))}getNextMutationBatchAfterBatchId(t,e){const i=e+1,r=this.ei(i),o=r<0?0:r;return rt.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return rt.resolve(this.mutationQueue.length===0?Vy:this.tr-1)}getAllMutationBatches(t){return rt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new $e(e,0),r=new $e(e,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,r],(c=>{const u=this.Xr(c.Yr);o.push(u)})),rt.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Ke(Bt);return e.forEach((r=>{const o=new $e(r,0),c=new $e(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,c],(u=>{i=i.add(u.Yr)}))})),rt.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1;let o=i;yt.isDocumentKey(o)||(o=o.child(""));const c=new $e(new yt(o),0);let u=new Ke(Bt);return this.Zr.forEachWhile((f=>{const d=f.key.path;return!!i.isPrefixOf(d)&&(d.length===r&&(u=u.add(f.Yr)),!0)}),c),rt.resolve(this.ti(u))}ti(t){const e=[];return t.forEach((i=>{const r=this.Xr(i);r!==null&&e.push(r)})),e}removeMutationBatch(t,e){Jt(this.ni(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return rt.forEach(e.mutations,(r=>{const o=new $e(r.key,e.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)})).next((()=>{this.Zr=i}))}ir(t){}containsKey(t,e){const i=new $e(e,0),r=this.Zr.firstAfterOrEqual(i);return rt.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,rt.resolve()}ni(t,e){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const e=this.ei(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(t){this.ri=t,this.docs=(function(){return new be(yt.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,r=this.docs.get(i),o=r?r.size:0,c=this.ri(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return rt.resolve(i?i.document.mutableCopy():gn.newInvalidDocument(e))}getEntries(t,e){let i=zs();return e.forEach((r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():gn.newInvalidDocument(r))})),rt.resolve(i)}getDocumentsMatchingQuery(t,e,i,r){let o=zs();const c=e.path,u=new yt(c.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(u);for(;f.hasNext();){const{key:d,value:{document:p}}=f.getNext();if(!c.isPrefixOf(d.path))break;d.path.length>c.length+1||zM(LM(p),i)<=0||(r.has(p.key)||Dd(e,p))&&(o=o.insert(p.key,p.mutableCopy()))}return rt.resolve(o)}getAllFromCollectionGroup(t,e,i,r){xt(9500)}ii(t,e){return rt.forEach(this.docs,(i=>e(i)))}newChangeBuffer(t){return new uk(this)}getSize(t){return rt.resolve(this.size)}}class uk extends nk{constructor(t){super(),this.Nr=t}applyChanges(t){const e=[];return this.changes.forEach(((i,r)=>{r.isValidDocument()?e.push(this.Nr.addEntry(t,r)):this.Nr.removeEntry(i)})),rt.waitFor(e)}getFromCache(t,e){return this.Nr.getEntry(t,e)}getAllFromCache(t,e){return this.Nr.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(t){this.persistence=t,this.si=new Qa((e=>Uy(e)),jy),this.lastRemoteSnapshotVersion=wt.min(),this.highestTargetId=0,this.oi=0,this._i=new Yy,this.targetCount=0,this.ai=ol.ur()}forEachTarget(t,e){return this.si.forEach(((i,r)=>e(r))),rt.resolve()}getLastRemoteSnapshotVersion(t){return rt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return rt.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),rt.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.oi&&(this.oi=e),rt.resolve()}Pr(t){this.si.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ai=new ol(e),this.highestTargetId=e),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,e){return this.Pr(e),this.targetCount+=1,rt.resolve()}updateTargetData(t,e){return this.Pr(e),rt.resolve()}removeTargetData(t,e){return this.si.delete(e.target),this._i.jr(e.targetId),this.targetCount-=1,rt.resolve()}removeTargets(t,e,i){let r=0;const o=[];return this.si.forEach(((c,u)=>{u.sequenceNumber<=e&&i.get(u.targetId)===null&&(this.si.delete(c),o.push(this.removeMatchingKeysForTargetId(t,u.targetId)),r++)})),rt.waitFor(o).next((()=>r))}getTargetCount(t){return rt.resolve(this.targetCount)}getTargetData(t,e){const i=this.si.get(e)||null;return rt.resolve(i)}addMatchingKeys(t,e,i){return this._i.Wr(e,i),rt.resolve()}removeMatchingKeys(t,e,i){this._i.zr(e,i);const r=this.persistence.referenceDelegate,o=[];return r&&e.forEach((c=>{o.push(r.markPotentiallyOrphaned(t,c))})),rt.waitFor(o)}removeMatchingKeysForTargetId(t,e){return this._i.jr(e),rt.resolve()}getMatchingKeysForTargetId(t,e){const i=this._i.Hr(e);return rt.resolve(i)}containsKey(t,e){return rt.resolve(this._i.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(t,e){this.ui={},this.overlays={},this.ci=new wd(0),this.li=!1,this.li=!0,this.hi=new ok,this.referenceDelegate=t(this),this.Pi=new hk(this),this.indexManager=new XO,this.remoteDocumentCache=(function(r){return new ck(r)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new KO(e),this.Ii=new rk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new ak,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.ui[t.toKey()];return i||(i=new lk(e,this.referenceDelegate),this.ui[t.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,e,i){ft("MemoryPersistence","Starting transaction:",t);const r=new fk(this.ci.next());return this.referenceDelegate.Ei(),i(r).next((o=>this.referenceDelegate.di(r).next((()=>o)))).toPromise().then((o=>(r.raiseOnCommittedEvent(),o)))}Ai(t,e){return rt.or(Object.values(this.ui).map((i=>()=>i.containsKey(t,e))))}}class fk extends jM{constructor(t){super(),this.currentSequenceNumber=t}}class Ky{constructor(t){this.persistence=t,this.Ri=new Yy,this.Vi=null}static mi(t){return new Ky(t)}get fi(){if(this.Vi)return this.Vi;throw xt(60996)}addReference(t,e,i){return this.Ri.addReference(i,e),this.fi.delete(i.toString()),rt.resolve()}removeReference(t,e,i){return this.Ri.removeReference(i,e),this.fi.add(i.toString()),rt.resolve()}markPotentiallyOrphaned(t,e){return this.fi.add(e.toString()),rt.resolve()}removeTarget(t,e){this.Ri.jr(e.targetId).forEach((r=>this.fi.add(r.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next((r=>{r.forEach((o=>this.fi.add(o.toString())))})).next((()=>i.removeTargetData(t,e)))}Ei(){this.Vi=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return rt.forEach(this.fi,(i=>{const r=yt.fromPath(i);return this.gi(t,r).next((o=>{o||e.removeEntry(r,wt.min())}))})).next((()=>(this.Vi=null,e.apply(t))))}updateLimboDocument(t,e){return this.gi(t,e).next((i=>{i?this.fi.delete(e.toString()):this.fi.add(e.toString())}))}Ti(t){return 0}gi(t,e){return rt.or([()=>rt.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ai(t,e)])}}class cd{constructor(t,e){this.persistence=t,this.pi=new Qa((i=>HM(i.path)),((i,r)=>i.isEqual(r))),this.garbageCollector=ek(this,e)}static mi(t,e){return new cd(t,e)}Ei(){}di(t){return rt.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}gr(t){const e=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((i=>e.next((r=>i+r))))}wr(t){let e=0;return this.pr(t,(i=>{e++})).next((()=>e))}pr(t,e){return rt.forEach(this.pi,((i,r)=>this.br(t,i,r).next((o=>o?rt.resolve():e(r)))))}removeTargets(t,e,i){return this.persistence.getTargetCache().removeTargets(t,e,i)}removeOrphanedDocuments(t,e){let i=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ii(t,(c=>this.br(t,c,e).next((u=>{u||(i++,o.removeEntry(c,wt.min()))})))).next((()=>o.apply(t))).next((()=>i))}markPotentiallyOrphaned(t,e){return this.pi.set(e,t.currentSequenceNumber),rt.resolve()}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,e,i){return this.pi.set(i,t.currentSequenceNumber),rt.resolve()}removeReference(t,e,i){return this.pi.set(i,t.currentSequenceNumber),rt.resolve()}updateLimboDocument(t,e){return this.pi.set(e,t.currentSequenceNumber),rt.resolve()}Ti(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=kf(t.data.value)),e}br(t,e,i){return rt.or([()=>this.persistence.Ai(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const r=this.pi.get(e);return rt.resolve(r!==void 0&&r>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.Es=i,this.ds=r}static As(t,e){let i=Ft(),r=Ft();for(const o of e.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new Wy(t,e.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return HC()?8:BM(pn())>0?6:4})()}initialize(t,e){this.ps=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,i,r){const o={result:null};return this.ys(t,e).next((c=>{o.result=c})).next((()=>{if(!o.result)return this.ws(t,e,r,i).next((c=>{o.result=c}))})).next((()=>{if(o.result)return;const c=new dk;return this.Ss(t,e,c).next((u=>{if(o.result=u,this.Vs)return this.bs(t,e,c,u.size)}))})).next((()=>o.result))}bs(t,e,i,r){return i.documentReadCount<this.fs?(Ko()<=jt.DEBUG&&ft("QueryEngine","SDK will not create cache indexes for query:",Wo(e),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),rt.resolve()):(Ko()<=jt.DEBUG&&ft("QueryEngine","Query:",Wo(e),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(Ko()<=jt.DEBUG&&ft("QueryEngine","The SDK decides to create cache indexes for query:",Wo(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Zi(e))):rt.resolve())}ys(t,e){if(sE(e))return rt.resolve(null);let i=Zi(e);return this.indexManager.getIndexType(t,i).next((r=>r===0?null:(e.limit!==null&&r===1&&(e=Gp(e,null,"F"),i=Zi(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next((o=>{const c=Ft(...o);return this.ps.getDocuments(t,c).next((u=>this.indexManager.getMinOffset(t,i).next((f=>{const d=this.Ds(e,u);return this.Cs(e,d,c,f.readTime)?this.ys(t,Gp(e,null,"F")):this.vs(t,d,e,f)}))))})))))}ws(t,e,i,r){return sE(e)||r.isEqual(wt.min())?rt.resolve(null):this.ps.getDocuments(t,i).next((o=>{const c=this.Ds(e,o);return this.Cs(e,c,i,r)?rt.resolve(null):(Ko()<=jt.DEBUG&&ft("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Wo(e)),this.vs(t,c,e,VM(r,iu)).next((u=>u)))}))}Ds(t,e){let i=new Ke(MA(t));return e.forEach(((r,o)=>{Dd(t,o)&&(i=i.add(o))})),i}Cs(t,e,i,r){if(t.limit===null)return!1;if(i.size!==e.size)return!0;const o=t.limitType==="F"?e.last():e.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ss(t,e,i){return Ko()<=jt.DEBUG&&ft("QueryEngine","Using full collection scan to execute query:",Wo(e)),this.ps.getDocumentsMatchingQuery(t,e,Vr.min(),i)}vs(t,e,i,r){return this.ps.getDocumentsMatchingQuery(t,i,r).next((o=>(e.forEach((c=>{o=o.insert(c.key,c)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy="LocalStore",mk=3e8;class pk{constructor(t,e,i,r){this.persistence=t,this.Fs=e,this.serializer=r,this.Ms=new be(Bt),this.xs=new Qa((o=>Uy(o)),jy),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(i)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new sk(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.Ms)))}}function yk(n,t,e,i){return new pk(n,t,e,i)}async function t1(n,t){const e=It(n);return await e.persistence.runTransaction("Handle user change","readonly",(i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next((o=>(r=o,e.Bs(t),e.mutationQueue.getAllMutationBatches(i)))).next((o=>{const c=[],u=[];let f=Ft();for(const d of r){c.push(d.batchId);for(const p of d.mutations)f=f.add(p.key)}for(const d of o){u.push(d.batchId);for(const p of d.mutations)f=f.add(p.key)}return e.localDocuments.getDocuments(i,f).next((d=>({Ls:d,removedBatchIds:c,addedBatchIds:u})))}))}))}function _k(n,t){const e=It(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const r=t.batch.keys(),o=e.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,f,d,p){const _=d.batch,b=_.keys();let S=rt.resolve();return b.forEach((w=>{S=S.next((()=>p.getEntry(f,w))).next((A=>{const D=d.docVersions.get(w);Jt(D!==null,48541),A.version.compareTo(D)<0&&(_.applyToRemoteDocument(A,d),A.isValidDocument()&&(A.setReadTime(d.commitVersion),p.addEntry(A)))}))})),S.next((()=>u.mutationQueue.removeMutationBatch(f,_)))})(e,i,t,o).next((()=>o.apply(i))).next((()=>e.mutationQueue.performConsistencyCheck(i))).next((()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId))).next((()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(u){let f=Ft();for(let d=0;d<u.mutationResults.length;++d)u.mutationResults[d].transformResults.length>0&&(f=f.add(u.batch.mutations[d].key));return f})(t)))).next((()=>e.localDocuments.getDocuments(i,r)))}))}function e1(n){const t=It(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Pi.getLastRemoteSnapshotVersion(e)))}function bk(n,t){const e=It(n),i=t.snapshotVersion;let r=e.Ms;return e.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const c=e.Ns.newChangeBuffer({trackRemovals:!0});r=e.Ms;const u=[];t.targetChanges.forEach(((p,_)=>{const b=r.get(_);if(!b)return;u.push(e.Pi.removeMatchingKeys(o,p.removedDocuments,_).next((()=>e.Pi.addMatchingKeys(o,p.addedDocuments,_))));let S=b.withSequenceNumber(o.currentSequenceNumber);t.targetMismatches.get(_)!==null?S=S.withResumeToken(ln.EMPTY_BYTE_STRING,wt.min()).withLastLimboFreeSnapshotVersion(wt.min()):p.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(p.resumeToken,i)),r=r.insert(_,S),(function(A,D,L){return A.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=mk?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0})(b,S,p)&&u.push(e.Pi.updateTargetData(o,S))}));let f=zs(),d=Ft();if(t.documentUpdates.forEach((p=>{t.resolvedLimboDocuments.has(p)&&u.push(e.persistence.referenceDelegate.updateLimboDocument(o,p))})),u.push(vk(o,c,t.documentUpdates).next((p=>{f=p.ks,d=p.qs}))),!i.isEqual(wt.min())){const p=e.Pi.getLastRemoteSnapshotVersion(o).next((_=>e.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i)));u.push(p)}return rt.waitFor(u).next((()=>c.apply(o))).next((()=>e.localDocuments.getLocalViewOfDocuments(o,f,d))).next((()=>f))})).then((o=>(e.Ms=r,o)))}function vk(n,t,e){let i=Ft(),r=Ft();return e.forEach((o=>i=i.add(o))),t.getEntries(n,i).next((o=>{let c=zs();return e.forEach(((u,f)=>{const d=o.get(u);f.isFoundDocument()!==d.isFoundDocument()&&(r=r.add(u)),f.isNoDocument()&&f.version.isEqual(wt.min())?(t.removeEntry(u,f.readTime),c=c.insert(u,f)):!d.isValidDocument()||f.version.compareTo(d.version)>0||f.version.compareTo(d.version)===0&&d.hasPendingWrites?(t.addEntry(f),c=c.insert(u,f)):ft(Xy,"Ignoring outdated watch update for ",u,". Current version:",d.version," Watch version:",f.version)})),{ks:c,qs:r}}))}function Tk(n,t){const e=It(n);return e.persistence.runTransaction("Get next mutation batch","readonly",(i=>(t===void 0&&(t=Vy),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t))))}function Ek(n,t){const e=It(n);return e.persistence.runTransaction("Allocate target","readwrite",(i=>{let r;return e.Pi.getTargetData(i,t).next((o=>o?(r=o,rt.resolve(r)):e.Pi.allocateTargetId(i).next((c=>(r=new Sr(t,c,"TargetPurposeListen",i.currentSequenceNumber),e.Pi.addTargetData(i,r).next((()=>r)))))))})).then((i=>{const r=e.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.Ms=e.Ms.insert(i.targetId,i),e.xs.set(t,i.targetId)),i}))}async function Qp(n,t,e){const i=It(n),r=i.Ms.get(t),o=e?"readwrite":"readwrite-primary";try{e||await i.persistence.runTransaction("Release target",o,(c=>i.persistence.referenceDelegate.removeTarget(c,r)))}catch(c){if(!yl(c))throw c;ft(Xy,`Failed to update sequence numbers for target ${t}: ${c}`)}i.Ms=i.Ms.remove(t),i.xs.delete(r.target)}function yE(n,t,e){const i=It(n);let r=wt.min(),o=Ft();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(f,d,p){const _=It(f),b=_.xs.get(p);return b!==void 0?rt.resolve(_.Ms.get(b)):_.Pi.getTargetData(d,p)})(i,c,Zi(t)).next((u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(c,u.targetId).next((f=>{o=f}))})).next((()=>i.Fs.getDocumentsMatchingQuery(c,t,e?r:wt.min(),e?o:Ft()))).next((u=>(Sk(i,lO(t),u),{documents:u,Qs:o})))))}function Sk(n,t,e){let i=n.Os.get(t)||wt.min();e.forEach(((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)})),n.Os.set(t,i)}class _E{constructor(){this.activeTargetIds=gO()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class xk{constructor(){this.Mo=new _E,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t,e=!0){return e&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,e,i){this.xo[t]=e}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new _E,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE="ConnectivityMonitor";class vE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ft(bE,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){ft(bE,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gf=null;function $p(){return gf===null?gf=(function(){return 268435456+Math.round(2147483648*Math.random())})():gf++,"0x"+gf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const up="RestConnection",wk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Rk{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=e+"://"+t.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===nd?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(t,e,i,r,o){const c=$p(),u=this.zo(t,e.toUriEncodedString());ft(up,`Sending RPC '${t}' ${c}:`,u,i);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,r,o);const{host:d}=new URL(u),p=fl(d);return this.Jo(t,u,f,i,p).then((_=>(ft(up,`Received RPC '${t}' ${c}: `,_),_)),(_=>{throw il(up,`RPC '${t}' ${c} failed with error: `,_,"url: ",u,"request:",i),_}))}Ho(t,e,i,r,o,c){return this.Go(t,e,i,r,o)}jo(t,e,i){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ml})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((r,o)=>t[o]=r)),i&&i.headers.forEach(((r,o)=>t[o]=r))}zo(t,e){const i=wk[t];return`${this.Uo}/v1/${e}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un="WebChannelConnection";class Ik extends Rk{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,i,r,o){const c=$p();return new Promise(((u,f)=>{const d=new sA;d.setWithCredentials(!0),d.listenOnce(rA.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case Of.NO_ERROR:const _=d.getResponseJson();ft(un,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(_)),u(_);break;case Of.TIMEOUT:ft(un,`RPC '${t}' ${c} timed out`),f(new ht(it.DEADLINE_EXCEEDED,"Request time out"));break;case Of.HTTP_ERROR:const b=d.getStatus();if(ft(un,`RPC '${t}' ${c} failed with status:`,b,"response text:",d.getResponseText()),b>0){let S=d.getResponseJson();Array.isArray(S)&&(S=S[0]);const w=S==null?void 0:S.error;if(w&&w.status&&w.message){const A=(function(L){const F=L.toLowerCase().replace(/_/g,"-");return Object.values(it).indexOf(F)>=0?F:it.UNKNOWN})(w.status);f(new ht(A,w.message))}else f(new ht(it.UNKNOWN,"Server responded with status "+d.getStatus()))}else f(new ht(it.UNAVAILABLE,"Connection failed."));break;default:xt(9055,{l_:t,streamId:c,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{ft(un,`RPC '${t}' ${c} completed.`)}}));const p=JSON.stringify(r);ft(un,`RPC '${t}' ${c} sending request:`,r),d.send(e,"POST",p,i,15)}))}T_(t,e,i){const r=$p(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=lA(),u=oA(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(f.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,e,i),f.encodeInitMessageHeaders=!0;const p=o.join("");ft(un,`Creating RPC '${t}' stream ${r}: ${p}`,f);const _=c.createWebChannel(p,f);this.I_(_);let b=!1,S=!1;const w=new Ck({Yo:D=>{S?ft(un,`Not sending because RPC '${t}' stream ${r} is closed:`,D):(b||(ft(un,`Opening RPC '${t}' stream ${r} transport.`),_.open(),b=!0),ft(un,`RPC '${t}' stream ${r} sending:`,D),_.send(D))},Zo:()=>_.close()}),A=(D,L,F)=>{D.listen(L,(W=>{try{F(W)}catch(J){setTimeout((()=>{throw J}),0)}}))};return A(_,kc.EventType.OPEN,(()=>{S||(ft(un,`RPC '${t}' stream ${r} transport opened.`),w.o_())})),A(_,kc.EventType.CLOSE,(()=>{S||(S=!0,ft(un,`RPC '${t}' stream ${r} transport closed`),w.a_(),this.E_(_))})),A(_,kc.EventType.ERROR,(D=>{S||(S=!0,il(un,`RPC '${t}' stream ${r} transport errored. Name:`,D.name,"Message:",D.message),w.a_(new ht(it.UNAVAILABLE,"The operation could not be completed")))})),A(_,kc.EventType.MESSAGE,(D=>{var L;if(!S){const F=D.data[0];Jt(!!F,16349);const W=F,J=(W==null?void 0:W.error)||((L=W[0])==null?void 0:L.error);if(J){ft(un,`RPC '${t}' stream ${r} received error:`,J);const $=J.status;let st=(function(M){const P=ze[M];if(P!==void 0)return FA(P)})($),I=J.message;st===void 0&&(st=it.INTERNAL,I="Unknown error status: "+$+" with message "+J.message),S=!0,w.a_(new ht(st,I)),_.close()}else ft(un,`RPC '${t}' stream ${r} received:`,F),w.u_(F)}})),A(u,aA.STAT_EVENT,(D=>{D.stat===zp.PROXY?ft(un,`RPC '${t}' stream ${r} detected buffering proxy`):D.stat===zp.NOPROXY&&ft(un,`RPC '${t}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{w.__()}),0),w}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((e=>e===t))}}function hp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pd(n){return new kO(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(t,e,i=1e3,r=1.5,o=6e4){this.Mi=t,this.timerId=e,this.d_=i,this.A_=r,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const e=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,e-i);r>0&&ft("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE="PersistentStream";class i1{constructor(t,e,i,r,o,c,u,f){this.Mi=t,this.S_=i,this.b_=r,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=u,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new n1(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===it.RESOURCE_EXHAUSTED?(Ls(e.toString()),Ls("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===it.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(e)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,r])=>{this.D_===e&&this.G_(i,r)}),(i=>{t((()=>{const r=new ht(it.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)}))}))}G_(t,e){const i=this.W_(this.D_);this.stream=this.j_(t,e),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{i((()=>this.z_(r)))})),this.stream.onMessage((r=>{i((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return ft(TE,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return e=>{this.Mi.enqueueAndForget((()=>this.D_===t?e():(ft(TE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Dk extends i1{constructor(t,e,i,r,o,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,c),this.serializer=o}j_(t,e){return this.connection.T_("Listen",t,e)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=VO(this.serializer,t),i=(function(o){if(!("targetChange"in o))return wt.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?wt.min():c.readTime?ts(c.readTime):wt.min()})(t);return this.listener.H_(e,i)}Y_(t){const e={};e.database=Xp(this.serializer),e.addTarget=(function(o,c){let u;const f=c.target;if(u=Hp(f)?{documents:UO(o,f)}:{query:jO(o,f).ft},u.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){u.resumeToken=GA(o,c.resumeToken);const d=Yp(o,c.expectedCount);d!==null&&(u.expectedCount=d)}else if(c.snapshotVersion.compareTo(wt.min())>0){u.readTime=ld(o,c.snapshotVersion.toTimestamp());const d=Yp(o,c.expectedCount);d!==null&&(u.expectedCount=d)}return u})(this.serializer,t);const i=FO(this.serializer,t);i&&(e.labels=i),this.q_(e)}Z_(t){const e={};e.database=Xp(this.serializer),e.removeTarget=t,this.q_(e)}}class Mk extends i1{constructor(t,e,i,r,o,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,c),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}J_(t){return Jt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Jt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Jt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=zO(t.writeResults,t.commitTime),i=ts(t.commitTime);return this.listener.na(i,e)}ra(){const t={};t.database=Xp(this.serializer),this.q_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map((i=>LO(this.serializer,i)))};this.q_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{}class kk extends Ok{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new ht(it.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,e,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Go(t,Kp(e,i),r,o,c))).catch((o=>{throw o.name==="FirebaseError"?(o.code===it.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ht(it.UNKNOWN,o.toString())}))}Ho(t,e,i,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,u])=>this.connection.Ho(t,Kp(e,i),r,c,u,o))).catch((c=>{throw c.name==="FirebaseError"?(c.code===it.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ht(it.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Nk{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ls(e),this.aa=!1):ft("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka="RemoteStore";class Pk{constructor(t,e,i,r,o){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((c=>{i.enqueueAndForget((async()=>{$a(this)&&(ft(Ka,"Restarting streams for network reachability change."),await(async function(f){const d=It(f);d.Ea.add(4),await Ru(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Vd(d)})(this))}))})),this.Ra=new Nk(i,r)}}async function Vd(n){if($a(n))for(const t of n.da)await t(!0)}async function Ru(n){for(const t of n.da)await t(!1)}function s1(n,t){const e=It(n);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),Zy(e)?Jy(e):_l(e).O_()&&$y(e,t))}function Qy(n,t){const e=It(n),i=_l(e);e.Ia.delete(t),i.O_()&&r1(e,t),e.Ia.size===0&&(i.O_()?i.L_():$a(e)&&e.Ra.set("Unknown"))}function $y(n,t){if(n.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(wt.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}_l(n).Y_(t)}function r1(n,t){n.Va.Ue(t),_l(n).Z_(t)}function Jy(n){n.Va=new IO({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),At:t=>n.Ia.get(t)||null,ht:()=>n.datastore.serializer.databaseId}),_l(n).start(),n.Ra.ua()}function Zy(n){return $a(n)&&!_l(n).x_()&&n.Ia.size>0}function $a(n){return It(n).Ea.size===0}function a1(n){n.Va=void 0}async function Vk(n){n.Ra.set("Online")}async function Lk(n){n.Ia.forEach(((t,e)=>{$y(n,t)}))}async function zk(n,t){a1(n),Zy(n)?(n.Ra.ha(t),Jy(n)):n.Ra.set("Unknown")}async function Uk(n,t,e){if(n.Ra.set("Online"),t instanceof qA&&t.state===2&&t.cause)try{await(async function(r,o){const c=o.cause;for(const u of o.targetIds)r.Ia.has(u)&&(await r.remoteSyncer.rejectListen(u,c),r.Ia.delete(u),r.Va.removeTarget(u))})(n,t)}catch(i){ft(Ka,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await ud(n,i)}else if(t instanceof Vf?n.Va.Ze(t):t instanceof HA?n.Va.st(t):n.Va.tt(t),!e.isEqual(wt.min()))try{const i=await e1(n.localStore);e.compareTo(i)>=0&&await(function(o,c){const u=o.Va.Tt(c);return u.targetChanges.forEach(((f,d)=>{if(f.resumeToken.approximateByteSize()>0){const p=o.Ia.get(d);p&&o.Ia.set(d,p.withResumeToken(f.resumeToken,c))}})),u.targetMismatches.forEach(((f,d)=>{const p=o.Ia.get(f);if(!p)return;o.Ia.set(f,p.withResumeToken(ln.EMPTY_BYTE_STRING,p.snapshotVersion)),r1(o,f);const _=new Sr(p.target,f,d,p.sequenceNumber);$y(o,_)})),o.remoteSyncer.applyRemoteEvent(u)})(n,e)}catch(i){ft(Ka,"Failed to raise snapshot:",i),await ud(n,i)}}async function ud(n,t,e){if(!yl(t))throw t;n.Ea.add(1),await Ru(n),n.Ra.set("Offline"),e||(e=()=>e1(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ft(Ka,"Retrying IndexedDB access"),await e(),n.Ea.delete(1),await Vd(n)}))}function o1(n,t){return t().catch((e=>ud(n,e,t)))}async function Ld(n){const t=It(n),e=jr(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Vy;for(;jk(t);)try{const r=await Tk(t.localStore,i);if(r===null){t.Ta.length===0&&e.L_();break}i=r.batchId,Bk(t,r)}catch(r){await ud(t,r)}l1(t)&&c1(t)}function jk(n){return $a(n)&&n.Ta.length<10}function Bk(n,t){n.Ta.push(t);const e=jr(n);e.O_()&&e.X_&&e.ea(t.mutations)}function l1(n){return $a(n)&&!jr(n).x_()&&n.Ta.length>0}function c1(n){jr(n).start()}async function Fk(n){jr(n).ra()}async function Hk(n){const t=jr(n);for(const e of n.Ta)t.ea(e.mutations)}async function qk(n,t,e){const i=n.Ta.shift(),r=Hy.from(i,t,e);await o1(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await Ld(n)}async function Gk(n,t){t&&jr(n).X_&&await(async function(i,r){if((function(c){return wO(c)&&c!==it.ABORTED})(r.code)){const o=i.Ta.shift();jr(i).B_(),await o1(i,(()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r))),await Ld(i)}})(n,t),l1(n)&&c1(n)}async function EE(n,t){const e=It(n);e.asyncQueue.verifyOperationInProgress(),ft(Ka,"RemoteStore received new credentials");const i=$a(e);e.Ea.add(3),await Ru(e),i&&e.Ra.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await Vd(e)}async function Yk(n,t){const e=It(n);t?(e.Ea.delete(2),await Vd(e)):t||(e.Ea.add(2),await Ru(e),e.Ra.set("Unknown"))}function _l(n){return n.ma||(n.ma=(function(e,i,r){const o=It(e);return o.sa(),new Dk(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(n.datastore,n.asyncQueue,{Xo:Vk.bind(null,n),t_:Lk.bind(null,n),r_:zk.bind(null,n),H_:Uk.bind(null,n)}),n.da.push((async t=>{t?(n.ma.B_(),Zy(n)?Jy(n):n.Ra.set("Unknown")):(await n.ma.stop(),a1(n))}))),n.ma}function jr(n){return n.fa||(n.fa=(function(e,i,r){const o=It(e);return o.sa(),new Mk(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:Fk.bind(null,n),r_:Gk.bind(null,n),ta:Hk.bind(null,n),na:qk.bind(null,n)}),n.da.push((async t=>{t?(n.fa.B_(),await Ld(n)):(await n.fa.stop(),n.Ta.length>0&&(ft(Ka,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(t,e,i,r,o){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new kr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,r,o){const c=Date.now()+i,u=new t_(t,e,c,r,o);return u.start(i),u}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ht(it.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function e_(n,t){if(Ls("AsyncQueue",`${t}: ${n}`),yl(n))return new ht(it.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{static emptySet(t){return new tl(t.comparator)}constructor(t){this.comparator=t?(e,i)=>t(e,i)||yt.comparator(e.key,i.key):(e,i)=>yt.comparator(e.key,i.key),this.keyedMap=Nc(),this.sortedSet=new be(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,i)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof tl)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const i=new tl;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(){this.ga=new be(yt.comparator)}track(t){const e=t.doc.key,i=this.ga.get(e);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(e,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(e):t.type===1&&i.type===2?this.ga=this.ga.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):xt(63341,{Rt:t,pa:i}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal(((e,i)=>{t.push(i)})),t}}class ll{constructor(t,e,i,r,o,c,u,f,d){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=u,this.excludesMetadataChanges=f,this.hasCachedResults=d}static fromInitialDocuments(t,e,i,r,o){const c=[];return e.forEach((u=>{c.push({type:0,doc:u})})),new ll(t,e,tl.emptySet(e),c,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Id(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class Wk{constructor(){this.queries=xE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,i){const r=It(e),o=r.queries;r.queries=xE(),o.forEach(((c,u)=>{for(const f of u.Sa)f.onError(i)}))})(this,new ht(it.ABORTED,"Firestore shutting down"))}}function xE(){return new Qa((n=>DA(n)),Id)}async function u1(n,t){const e=It(n);let i=3;const r=t.query;let o=e.queries.get(r);o?!o.ba()&&t.Da()&&(i=2):(o=new Kk,i=t.Da()?0:1);try{switch(i){case 0:o.wa=await e.onListen(r,!0);break;case 1:o.wa=await e.onListen(r,!1);break;case 2:await e.onFirstRemoteStoreListen(r)}}catch(c){const u=e_(c,`Initialization of query '${Wo(t.query)}' failed`);return void t.onError(u)}e.queries.set(r,o),o.Sa.push(t),t.va(e.onlineState),o.wa&&t.Fa(o.wa)&&n_(e)}async function h1(n,t){const e=It(n),i=t.query;let r=3;const o=e.queries.get(i);if(o){const c=o.Sa.indexOf(t);c>=0&&(o.Sa.splice(c,1),o.Sa.length===0?r=t.Da()?0:1:!o.ba()&&t.Da()&&(r=2))}switch(r){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}}function Xk(n,t){const e=It(n);let i=!1;for(const r of t){const o=r.query,c=e.queries.get(o);if(c){for(const u of c.Sa)u.Fa(r)&&(i=!0);c.wa=r}}i&&n_(e)}function Qk(n,t,e){const i=It(n),r=i.queries.get(t);if(r)for(const o of r.Sa)o.onError(e);i.queries.delete(t)}function n_(n){n.Ca.forEach((t=>{t.next()}))}var Jp,AE;(AE=Jp||(Jp={})).Ma="default",AE.Cache="cache";class f1{constructor(t,e,i){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)r.type!==3&&i.push(r);t=new ll(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;const i=e!=="Offline";return(!this.options.qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=ll.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Jp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(t){this.key=t}}class g1{constructor(t){this.key=t}}class $k{constructor(t,e){this.query=t,this.Ya=e,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ft(),this.mutatedKeys=Ft(),this.eu=MA(t),this.tu=new tl(this.eu)}get nu(){return this.Ya}ru(t,e){const i=e?e.iu:new SE,r=e?e.tu:this.tu;let o=e?e.mutatedKeys:this.mutatedKeys,c=r,u=!1;const f=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,d=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal(((p,_)=>{const b=r.get(p),S=Dd(this.query,_)?_:null,w=!!b&&this.mutatedKeys.has(b.key),A=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let D=!1;b&&S?b.data.isEqual(S.data)?w!==A&&(i.track({type:3,doc:S}),D=!0):this.su(b,S)||(i.track({type:2,doc:S}),D=!0,(f&&this.eu(S,f)>0||d&&this.eu(S,d)<0)&&(u=!0)):!b&&S?(i.track({type:0,doc:S}),D=!0):b&&!S&&(i.track({type:1,doc:b}),D=!0,(f||d)&&(u=!0)),D&&(S?(c=c.add(S),o=A?o.add(p):o.delete(p)):(c=c.delete(p),o=o.delete(p)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const p=this.query.limitType==="F"?c.last():c.first();c=c.delete(p.key),o=o.delete(p.key),i.track({type:1,doc:p})}return{tu:c,iu:i,Cs:u,mutatedKeys:o}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,r){const o=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const c=t.iu.ya();c.sort(((p,_)=>(function(S,w){const A=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xt(20277,{Rt:D})}};return A(S)-A(w)})(p.type,_.type)||this.eu(p.doc,_.doc))),this.ou(i),r=r??!1;const u=e&&!r?this._u():[],f=this.Xa.size===0&&this.current&&!r?1:0,d=f!==this.Za;return this.Za=f,c.length!==0||d?{snapshot:new ll(this.query,t.tu,o,c,t.mutatedKeys,f===0,d,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new SE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((e=>this.Ya=this.Ya.add(e))),t.modifiedDocuments.forEach((e=>{})),t.removedDocuments.forEach((e=>this.Ya=this.Ya.delete(e))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Ft(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const e=[];return t.forEach((i=>{this.Xa.has(i)||e.push(new g1(i))})),this.Xa.forEach((i=>{t.has(i)||e.push(new d1(i))})),e}cu(t){this.Ya=t.Qs,this.Xa=Ft();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return ll.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const i_="SyncEngine";class Jk{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class Zk{constructor(t){this.key=t,this.hu=!1}}class tN{constructor(t,e,i,r,o,c){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Qa((u=>DA(u)),Id),this.Iu=new Map,this.Eu=new Set,this.du=new be(yt.comparator),this.Au=new Map,this.Ru=new Yy,this.Vu={},this.mu=new Map,this.fu=ol.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function eN(n,t,e=!0){const i=v1(n);let r;const o=i.Tu.get(t);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.lu()):r=await m1(i,t,e,!0),r}async function nN(n,t){const e=v1(n);await m1(e,t,!0,!1)}async function m1(n,t,e,i){const r=await Ek(n.localStore,Zi(t)),o=r.targetId,c=n.sharedClientState.addLocalQueryTarget(o,e);let u;return i&&(u=await iN(n,t,o,c==="current",r.resumeToken)),n.isPrimaryClient&&e&&s1(n.remoteStore,r),u}async function iN(n,t,e,i,r){n.pu=(_,b,S)=>(async function(A,D,L,F){let W=D.view.ru(L);W.Cs&&(W=await yE(A.localStore,D.query,!1).then((({documents:I})=>D.view.ru(I,W))));const J=F&&F.targetChanges.get(D.targetId),$=F&&F.targetMismatches.get(D.targetId)!=null,st=D.view.applyChanges(W,A.isPrimaryClient,J,$);return RE(A,D.targetId,st.au),st.snapshot})(n,_,b,S);const o=await yE(n.localStore,t,!0),c=new $k(t,o.Qs),u=c.ru(o.documents),f=wu.createSynthesizedTargetChangeForCurrentChange(e,i&&n.onlineState!=="Offline",r),d=c.applyChanges(u,n.isPrimaryClient,f);RE(n,e,d.au);const p=new Jk(t,e,c);return n.Tu.set(t,p),n.Iu.has(e)?n.Iu.get(e).push(t):n.Iu.set(e,[t]),d.snapshot}async function sN(n,t,e){const i=It(n),r=i.Tu.get(t),o=i.Iu.get(r.targetId);if(o.length>1)return i.Iu.set(r.targetId,o.filter((c=>!Id(c,t)))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Qp(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),e&&Qy(i.remoteStore,r.targetId),Zp(i,r.targetId)})).catch(pl)):(Zp(i,r.targetId),await Qp(i.localStore,r.targetId,!0))}async function rN(n,t){const e=It(n),i=e.Tu.get(t),r=e.Iu.get(i.targetId);e.isPrimaryClient&&r.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),Qy(e.remoteStore,i.targetId))}async function aN(n,t,e){const i=dN(n);try{const r=await(function(c,u){const f=It(c),d=fe.now(),p=u.reduce(((S,w)=>S.add(w.key)),Ft());let _,b;return f.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let w=zs(),A=Ft();return f.Ns.getEntries(S,p).next((D=>{w=D,w.forEach(((L,F)=>{F.isValidDocument()||(A=A.add(L))}))})).next((()=>f.localDocuments.getOverlayedDocuments(S,w))).next((D=>{_=D;const L=[];for(const F of u){const W=TO(F,_.get(F.key).overlayedDocument);W!=null&&L.push(new Xr(F.key,W,EA(W.value.mapValue),On.exists(!0)))}return f.mutationQueue.addMutationBatch(S,d,L,u)})).next((D=>{b=D;const L=D.applyToLocalDocumentSet(_,A);return f.documentOverlayCache.saveOverlays(S,D.batchId,L)}))})).then((()=>({batchId:b.batchId,changes:kA(_)})))})(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),(function(c,u,f){let d=c.Vu[c.currentUser.toKey()];d||(d=new be(Bt)),d=d.insert(u,f),c.Vu[c.currentUser.toKey()]=d})(i,r.batchId,e),await Cu(i,r.changes),await Ld(i.remoteStore)}catch(r){const o=e_(r,"Failed to persist write");e.reject(o)}}async function p1(n,t){const e=It(n);try{const i=await bk(e.localStore,t);t.targetChanges.forEach(((r,o)=>{const c=e.Au.get(o);c&&(Jt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?c.hu=!0:r.modifiedDocuments.size>0?Jt(c.hu,14607):r.removedDocuments.size>0&&(Jt(c.hu,42227),c.hu=!1))})),await Cu(e,i,t)}catch(i){await pl(i)}}function wE(n,t,e){const i=It(n);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){const r=[];i.Tu.forEach(((o,c)=>{const u=c.view.va(t);u.snapshot&&r.push(u.snapshot)})),(function(c,u){const f=It(c);f.onlineState=u;let d=!1;f.queries.forEach(((p,_)=>{for(const b of _.Sa)b.va(u)&&(d=!0)})),d&&n_(f)})(i.eventManager,t),r.length&&i.Pu.H_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function oN(n,t,e){const i=It(n);i.sharedClientState.updateQueryState(t,"rejected",e);const r=i.Au.get(t),o=r&&r.key;if(o){let c=new be(yt.comparator);c=c.insert(o,gn.newNoDocument(o,wt.min()));const u=Ft().add(o),f=new Nd(wt.min(),new Map,new be(Bt),c,u);await p1(i,f),i.du=i.du.remove(o),i.Au.delete(t),s_(i)}else await Qp(i.localStore,t,!1).then((()=>Zp(i,t,e))).catch(pl)}async function lN(n,t){const e=It(n),i=t.batch.batchId;try{const r=await _k(e.localStore,t);_1(e,i,null),y1(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),await Cu(e,r)}catch(r){await pl(r)}}async function cN(n,t,e){const i=It(n);try{const r=await(function(c,u){const f=It(c);return f.persistence.runTransaction("Reject batch","readwrite-primary",(d=>{let p;return f.mutationQueue.lookupMutationBatch(d,u).next((_=>(Jt(_!==null,37113),p=_.keys(),f.mutationQueue.removeMutationBatch(d,_)))).next((()=>f.mutationQueue.performConsistencyCheck(d))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(d,p,u))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p))).next((()=>f.localDocuments.getDocuments(d,p)))}))})(i.localStore,t);_1(i,t,e),y1(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),await Cu(i,r)}catch(r){await pl(r)}}function y1(n,t){(n.mu.get(t)||[]).forEach((e=>{e.resolve()})),n.mu.delete(t)}function _1(n,t,e){const i=It(n);let r=i.Vu[i.currentUser.toKey()];if(r){const o=r.get(t);o&&(e?o.reject(e):o.resolve(),r=r.remove(t)),i.Vu[i.currentUser.toKey()]=r}}function Zp(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.Iu.get(t))n.Tu.delete(i),e&&n.Pu.yu(i,e);n.Iu.delete(t),n.isPrimaryClient&&n.Ru.jr(t).forEach((i=>{n.Ru.containsKey(i)||b1(n,i)}))}function b1(n,t){n.Eu.delete(t.path.canonicalString());const e=n.du.get(t);e!==null&&(Qy(n.remoteStore,e),n.du=n.du.remove(t),n.Au.delete(e),s_(n))}function RE(n,t,e){for(const i of e)i instanceof d1?(n.Ru.addReference(i.key,t),uN(n,i)):i instanceof g1?(ft(i_,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,t),n.Ru.containsKey(i.key)||b1(n,i.key)):xt(19791,{wu:i})}function uN(n,t){const e=t.key,i=e.path.canonicalString();n.du.get(e)||n.Eu.has(i)||(ft(i_,"New document in limbo: "+e),n.Eu.add(i),s_(n))}function s_(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const t=n.Eu.values().next().value;n.Eu.delete(t);const e=new yt(ce.fromString(t)),i=n.fu.next();n.Au.set(i,new Zk(e)),n.du=n.du.insert(e,i),s1(n.remoteStore,new Sr(Zi(By(e.path)),i,"TargetPurposeLimboResolution",wd.ce))}}async function Cu(n,t,e){const i=It(n),r=[],o=[],c=[];i.Tu.isEmpty()||(i.Tu.forEach(((u,f)=>{c.push(i.pu(f,t,e).then((d=>{var p;if((d||e)&&i.isPrimaryClient){const _=d?!d.fromCache:(p=e==null?void 0:e.targetChanges.get(f.targetId))==null?void 0:p.current;i.sharedClientState.updateQueryState(f.targetId,_?"current":"not-current")}if(d){r.push(d);const _=Wy.As(f.targetId,d);o.push(_)}})))})),await Promise.all(c),i.Pu.H_(r),await(async function(f,d){const p=It(f);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>rt.forEach(d,(b=>rt.forEach(b.Es,(S=>p.persistence.referenceDelegate.addReference(_,b.targetId,S))).next((()=>rt.forEach(b.ds,(S=>p.persistence.referenceDelegate.removeReference(_,b.targetId,S)))))))))}catch(_){if(!yl(_))throw _;ft(Xy,"Failed to update sequence numbers: "+_)}for(const _ of d){const b=_.targetId;if(!_.fromCache){const S=p.Ms.get(b),w=S.snapshotVersion,A=S.withLastLimboFreeSnapshotVersion(w);p.Ms=p.Ms.insert(b,A)}}})(i.localStore,o))}async function hN(n,t){const e=It(n);if(!e.currentUser.isEqual(t)){ft(i_,"User change. New user:",t.toKey());const i=await t1(e.localStore,t);e.currentUser=t,(function(o,c){o.mu.forEach((u=>{u.forEach((f=>{f.reject(new ht(it.CANCELLED,c))}))})),o.mu.clear()})(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await Cu(e,i.Ls)}}function fN(n,t){const e=It(n),i=e.Au.get(t);if(i&&i.hu)return Ft().add(i.key);{let r=Ft();const o=e.Iu.get(t);if(!o)return r;for(const c of o){const u=e.Tu.get(c);r=r.unionWith(u.view.nu)}return r}}function v1(n){const t=It(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=p1.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=fN.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=oN.bind(null,t),t.Pu.H_=Xk.bind(null,t.eventManager),t.Pu.yu=Qk.bind(null,t.eventManager),t}function dN(n){const t=It(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=lN.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=cN.bind(null,t),t}class hd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Pd(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return yk(this.persistence,new gk,t.initialUser,this.serializer)}Cu(t){return new ZA(Ky.mi,this.serializer)}Du(t){return new xk}async terminate(){var t,e;(t=this.gcScheduler)==null||t.stop(),(e=this.indexBackfillerScheduler)==null||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}hd.provider={build:()=>new hd};class gN extends hd{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){Jt(this.persistence.referenceDelegate instanceof cd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new ZO(i,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?In.withCacheSize(this.cacheSizeBytes):In.DEFAULT;return new ZA((i=>cd.mi(i,e)),this.serializer)}}class ty{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>wE(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=hN.bind(null,this.syncEngine),await Yk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new Wk})()}createDatastore(t){const e=Pd(t.databaseInfo.databaseId),i=(function(o){return new Ik(o)})(t.databaseInfo);return(function(o,c,u,f){return new kk(o,c,u,f)})(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return(function(i,r,o,c,u){return new Pk(i,r,o,c,u)})(this.localStore,this.datastore,t.asyncQueue,(e=>wE(this.syncEngine,e,0)),(function(){return vE.v()?new vE:new Ak})())}createSyncEngine(t,e){return(function(r,o,c,u,f,d,p){const _=new tN(r,o,c,u,f,d);return p&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await(async function(r){const o=It(r);ft(Ka,"RemoteStore shutting down."),o.Ea.add(5),await Ru(o),o.Aa.shutdown(),o.Ra.set("Unknown")})(this.remoteStore),(t=this.datastore)==null||t.terminate(),(e=this.eventManager)==null||e.terminate()}}ty.provider={build:()=>new ty};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Ls("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout((()=>{this.muted||t(e)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br="FirestoreClient";class mN{constructor(t,e,i,r,o){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=fn.UNAUTHENTICATED,this.clientId=Py.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,(async c=>{ft(Br,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(ft(Br,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new kr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const i=e_(e,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}async function fp(n,t){n.asyncQueue.verifyOperationInProgress(),ft(Br,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener((async r=>{i.isEqual(r)||(await t1(t.localStore,r),i=r)})),t.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=t}async function CE(n,t){n.asyncQueue.verifyOperationInProgress();const e=await pN(n);ft(Br,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener((i=>EE(t.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,r)=>EE(t.remoteStore,r))),n._onlineComponents=t}async function pN(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ft(Br,"Using user provided OfflineComponentProvider");try{await fp(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!(function(r){return r.name==="FirebaseError"?r.code===it.FAILED_PRECONDITION||r.code===it.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(e))throw e;il("Error using user provided cache. Falling back to memory cache: "+e),await fp(n,new hd)}}else ft(Br,"Using default OfflineComponentProvider"),await fp(n,new gN(void 0));return n._offlineComponents}async function E1(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ft(Br,"Using user provided OnlineComponentProvider"),await CE(n,n._uninitializedComponentsProvider._online)):(ft(Br,"Using default OnlineComponentProvider"),await CE(n,new ty))),n._onlineComponents}function yN(n){return E1(n).then((t=>t.syncEngine))}async function ey(n){const t=await E1(n),e=t.eventManager;return e.onListen=eN.bind(null,t.syncEngine),e.onUnlisten=sN.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=nN.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=rN.bind(null,t.syncEngine),e}function _N(n,t,e={}){const i=new kr;return n.asyncQueue.enqueueAndForget((async()=>(function(o,c,u,f,d){const p=new T1({next:b=>{p.Nu(),c.enqueueAndForget((()=>h1(o,_))),b.fromCache&&f.source==="server"?d.reject(new ht(it.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(b)},error:b=>d.reject(b)}),_=new f1(u,p,{includeMetadataChanges:!0,qa:!0});return u1(o,_)})(await ey(n),n.asyncQueue,t,e,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1="firestore.googleapis.com",DE=!0;class ME{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new ht(it.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=x1,this.ssl=DE}else this.host=t.host,this.ssl=t.ssl??DE;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=JA;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<$O)throw new ht(it.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}PM("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=S1(t.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ht(it.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ht(it.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ht(it.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class zd{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ME({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ht(it.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ht(it.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ME(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new AM;switch(i.type){case"firstParty":return new IM(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ht(it.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){const i=IE.get(e);i&&(ft("ComponentProvider","Removing Datastore"),IE.delete(e),i.terminate())})(this),Promise.resolve()}}function bN(n,t,e,i={}){var d;n=Si(n,zd);const r=fl(t),o=n._getSettings(),c={...o,emulatorOptions:n._getEmulatorOptions()},u=`${t}:${e}`;r&&(px(`https://${u}`),yx("Firestore",!0)),o.host!==x1&&o.host!==u&&il("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...o,host:u,ssl:r,emulatorOptions:i};if(!Fa(f,c)&&(n._setSettings(f),i.mockUserToken)){let p,_;if(typeof i.mockUserToken=="string")p=i.mockUserToken,_=fn.MOCK_USER;else{p=NC(i.mockUserToken,(d=n._app)==null?void 0:d.options.projectId);const b=i.mockUserToken.sub||i.mockUserToken.user_id;if(!b)throw new ht(it.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new fn(b)}n._authCredentials=new wM(new uA(p,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Ja(this.firestore,t,this._query)}}class Be{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Nr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Be(this.firestore,t,this._key)}toJSON(){return{type:Be._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,i){if(Su(e,Be._jsonSchema))return new Be(t,i||null,new yt(ce.fromString(e.referencePath)))}}Be._jsonSchemaVersion="firestore/documentReference/1.0",Be._jsonSchema={type:je("string",Be._jsonSchemaVersion),referencePath:je("string")};class Nr extends Ja{constructor(t,e,i){super(t,e,By(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Be(this.firestore,null,new yt(t))}withConverter(t){return new Nr(this.firestore,t,this._path)}}function vN(n,t,...e){if(n=Fe(n),hA("collection","path",t),n instanceof zd){const i=ce.fromString(t,...e);return qT(i),new Nr(n,null,i)}{if(!(n instanceof Be||n instanceof Nr))throw new ht(it.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(ce.fromString(t,...e));return qT(i),new Nr(n.firestore,null,i)}}function r_(n,t,...e){if(n=Fe(n),arguments.length===1&&(t=Py.newId()),hA("doc","path",t),n instanceof zd){const i=ce.fromString(t,...e);return HT(i),new Be(n,null,new yt(i))}{if(!(n instanceof Be||n instanceof Nr))throw new ht(it.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(ce.fromString(t,...e));return HT(i),new Be(n.firestore,n instanceof Nr?n.converter:null,new yt(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE="AsyncQueue";class kE{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new n1(this,"async_queue_retry"),this._c=()=>{const i=hp();i&&ft(OE,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const e=hp();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=hp();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const e=new kr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!yl(t))throw t;ft(OE,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const e=this.ac.then((()=>(this.rc=!0,t().catch((i=>{throw this.nc=i,this.rc=!1,Ls("INTERNAL UNHANDLED ERROR: ",NE(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=e,e}enqueueAfterDelay(t,e,i){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const r=t_.createAndSchedule(this,t,e,i,(o=>this.hc(o)));return this.tc.push(r),r}uc(){this.nc&&xt(47125,{Pc:NE(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((e,i)=>e.targetTimeMs-i.targetTimeMs));for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function NE(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PE(n){return(function(e,i){if(typeof e!="object"||e===null)return!1;const r=e;for(const o of i)if(o in r&&typeof r[o]=="function")return!0;return!1})(n,["next","error","complete"])}class Fr extends zd{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=new kE,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new kE(t),this._firestoreClient=void 0,await t}}}function TN(n,t){const e=typeof n=="object"?n:Tx(),i=typeof n=="string"?n:nd,r=Sy(e,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=OC("firestore");o&&bN(r,...o)}return r}function Ud(n){if(n._terminated)throw new ht(it.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||EN(n),n._firestoreClient}function EN(n){var i,r,o;const t=n._freezeSettings(),e=(function(u,f,d,p){return new YM(u,f,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,S1(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,t);n._componentsProvider||(r=t.localCache)!=null&&r._offlineComponentProvider&&((o=t.localCache)!=null&&o._onlineComponentProvider)&&(n._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),n._firestoreClient=new mN(n._authCredentials,n._appCheckCredentials,n._queue,e,n._componentsProvider&&(function(u){const f=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(f),_online:f}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(t){this._byteString=t}static fromBase64String(t){try{return new ri(ln.fromBase64String(t))}catch(e){throw new ht(it.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new ri(ln.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:ri._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Su(t,ri._jsonSchema))return ri.fromBase64String(t.bytes)}}ri._jsonSchemaVersion="firestore/bytes/1.0",ri._jsonSchema={type:je("string",ri._jsonSchemaVersion),bytes:je("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new ht(it.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new on(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new ht(it.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ht(it.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Bt(this._lat,t._lat)||Bt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:es._jsonSchemaVersion}}static fromJSON(t){if(Su(t,es._jsonSchema))return new es(t.latitude,t.longitude)}}es._jsonSchemaVersion="firestore/geoPoint/1.0",es._jsonSchema={type:je("string",es._jsonSchemaVersion),latitude:je("number"),longitude:je("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(t){this._values=(t||[]).map((e=>e))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0})(this._values,t._values)}toJSON(){return{type:ns._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Su(t,ns._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e=="number")))return new ns(t.vectorValues);throw new ht(it.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ns._jsonSchemaVersion="firestore/vectorValue/1.0",ns._jsonSchema={type:je("string",ns._jsonSchemaVersion),vectorValues:je("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=/^__.*__$/;class xN{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new Xr(t,this.data,this.fieldMask,e,this.fieldTransforms):new Au(t,this.data,e,this.fieldTransforms)}}class A1{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new Xr(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function w1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xt(40011,{Ac:n})}}class o_{constructor(t,e,i,r,o,c){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new o_({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var r;const e=(r=this.path)==null?void 0:r.child(t),i=this.Vc({path:e,fc:!1});return i.gc(t),i}yc(t){var r;const e=(r=this.path)==null?void 0:r.child(t),i=this.Vc({path:e,fc:!1});return i.Rc(),i}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return fd(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((e=>t.isPrefixOf(e)))!==void 0||this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(w1(this.Ac)&&SN.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class AN{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||Pd(t)}Cc(t,e,i,r=!1){return new o_({Ac:t,methodName:e,Dc:i,path:on.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bd(n){const t=n._freezeSettings(),e=Pd(n._databaseId);return new AN(n._databaseId,!!t.ignoreUndefinedProperties,e)}function l_(n,t,e,i,r,o={}){const c=n.Cc(o.merge||o.mergeFields?2:0,t,e,r);c_("Data must be an object, but it was:",c,i);const u=R1(i,c);let f,d;if(o.merge)f=new qn(c.fieldMask),d=c.fieldTransforms;else if(o.mergeFields){const p=[];for(const _ of o.mergeFields){const b=ny(t,_,e);if(!c.contains(b))throw new ht(it.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);I1(p,b)||p.push(b)}f=new qn(p),d=c.fieldTransforms.filter((_=>f.covers(_.field)))}else f=null,d=c.fieldTransforms;return new xN(new Dn(u),f,d)}class Fd extends a_{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Fd}}function wN(n,t,e,i){const r=n.Cc(1,t,e);c_("Data must be an object, but it was:",r,i);const o=[],c=Dn.empty();Wr(i,((f,d)=>{const p=u_(t,f,e);d=Fe(d);const _=r.yc(p);if(d instanceof Fd)o.push(p);else{const b=Iu(d,_);b!=null&&(o.push(p),c.set(p,b))}}));const u=new qn(o);return new A1(c,u,r.fieldTransforms)}function RN(n,t,e,i,r,o){const c=n.Cc(1,t,e),u=[ny(t,i,e)],f=[r];if(o.length%2!=0)throw new ht(it.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<o.length;b+=2)u.push(ny(t,o[b])),f.push(o[b+1]);const d=[],p=Dn.empty();for(let b=u.length-1;b>=0;--b)if(!I1(d,u[b])){const S=u[b];let w=f[b];w=Fe(w);const A=c.yc(S);if(w instanceof Fd)d.push(S);else{const D=Iu(w,A);D!=null&&(d.push(S),p.set(S,D))}}const _=new qn(d);return new A1(p,_,c.fieldTransforms)}function CN(n,t,e,i=!1){return Iu(e,n.Cc(i?4:3,t))}function Iu(n,t){if(C1(n=Fe(n)))return c_("Unsupported field value:",t,n),R1(n,t);if(n instanceof a_)return(function(i,r){if(!w1(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)})(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(i,r){const o=[];let c=0;for(const u of i){let f=Iu(u,r.wc(c));f==null&&(f={nullValue:"NULL_VALUE"}),o.push(f),c++}return{arrayValue:{values:o}}})(n,t)}return(function(i,r){if((i=Fe(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return mO(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=fe.fromDate(i);return{timestampValue:ld(r.serializer,o)}}if(i instanceof fe){const o=new fe(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:ld(r.serializer,o)}}if(i instanceof es)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ri)return{bytesValue:GA(r.serializer,i._byteString)};if(i instanceof Be){const o=r.databaseId,c=i.firestore._databaseId;if(!c.isEqual(o))throw r.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Gy(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof ns)return(function(c,u){return{mapValue:{fields:{[vA]:{stringValue:TA},[id]:{arrayValue:{values:c.toArray().map((d=>{if(typeof d!="number")throw u.Sc("VectorValues must only contain numeric values.");return Fy(u.serializer,d)}))}}}}}})(i,r);throw r.Sc(`Unsupported field value: ${Ad(i)}`)})(n,t)}function R1(n,t){const e={};return gA(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Wr(n,((i,r)=>{const o=Iu(r,t.mc(i));o!=null&&(e[i]=o)})),{mapValue:{fields:e}}}function C1(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof fe||n instanceof es||n instanceof ri||n instanceof Be||n instanceof a_||n instanceof ns)}function c_(n,t,e){if(!C1(e)||!fA(e)){const i=Ad(e);throw i==="an object"?t.Sc(n+" a custom object"):t.Sc(n+" "+i)}}function ny(n,t,e){if((t=Fe(t))instanceof jd)return t._internalPath;if(typeof t=="string")return u_(n,t);throw fd("Field path arguments must be of type string or ",n,!1,void 0,e)}const IN=new RegExp("[~\\*/\\[\\]]");function u_(n,t,e){if(t.search(IN)>=0)throw fd(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new jd(...t.split("."))._internalPath}catch{throw fd(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function fd(n,t,e,i,r){const o=i&&!i.isEmpty(),c=r!==void 0;let u=`Function ${t}() called with invalid data`;e&&(u+=" (via `toFirestore()`)"),u+=". ";let f="";return(o||c)&&(f+=" (found",o&&(f+=` in field ${i}`),c&&(f+=` in document ${r}`),f+=")"),new ht(it.INVALID_ARGUMENT,u+n+f)}function I1(n,t){return n.some((e=>e.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(t,e,i,r,o){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Be(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new DN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(M1("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class DN extends D1{data(){return super.data()}}function M1(n,t){return typeof t=="string"?u_(n,t):t instanceof jd?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O1(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ht(it.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class h_{}class MN extends h_{}function ON(n,t,...e){let i=[];t instanceof h_&&i.push(t),i=i.concat(e),(function(o){const c=o.filter((f=>f instanceof d_)).length,u=o.filter((f=>f instanceof f_)).length;if(c>1||c>0&&u>0)throw new ht(it.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const r of i)n=r._apply(n);return n}class f_ extends MN{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new f_(t,e,i)}_apply(t){const e=this._parse(t);return k1(t._query,e),new Ja(t.firestore,t.converter,qp(t._query,e))}_parse(t){const e=Bd(t.firestore);return(function(o,c,u,f,d,p,_){let b;if(d.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new ht(it.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){LE(_,p);const w=[];for(const A of _)w.push(VE(f,o,A));b={arrayValue:{values:w}}}else b=VE(f,o,_)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||LE(_,p),b=CN(u,c,_,p==="in"||p==="not-in");return Ue.create(d,p,b)})(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}class d_ extends h_{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new d_(t,e)}_parse(t){const e=this._queryConstraints.map((i=>i._parse(t))).filter((i=>i.getFilters().length>0));return e.length===1?e[0]:Ai.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:((function(r,o){let c=r;const u=o.getFlattenedFilters();for(const f of u)k1(c,f),c=qp(c,f)})(t._query,e),new Ja(t.firestore,t.converter,qp(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function VE(n,t,e){if(typeof(e=Fe(e))=="string"){if(e==="")throw new ht(it.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!IA(t)&&e.indexOf("/")!==-1)throw new ht(it.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(ce.fromString(e));if(!yt.isDocumentKey(i))throw new ht(it.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return JT(n,new yt(i))}if(e instanceof Be)return JT(n,e._key);throw new ht(it.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ad(e)}.`)}function LE(n,t){if(!Array.isArray(n)||n.length===0)throw new ht(it.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function k1(n,t){const e=(function(r,o){for(const c of r)for(const u of c.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null})(n.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(e!==null)throw e===t.op?new ht(it.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ht(it.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class kN{convertValue(t,e="none"){switch(Ur(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Re(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(zr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw xt(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return Wr(t,((r,o)=>{i[r]=this.convertValue(o,e)})),i}convertVectorValue(t){var i,r,o;const e=(o=(r=(i=t.fields)==null?void 0:i[id].arrayValue)==null?void 0:r.values)==null?void 0:o.map((c=>Re(c.doubleValue)));return new ns(e)}convertGeoPoint(t){return new es(Re(t.latitude),Re(t.longitude))}convertArray(t,e){return(t.values||[]).map((i=>this.convertValue(i,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const i=Cd(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(su(t));default:return null}}convertTimestamp(t){const e=Lr(t);return new fe(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=ce.fromString(t);Jt($A(i),9688,{name:t});const r=new ru(i.get(1),i.get(3)),o=new yt(i.popFirst(5));return r.isEqual(e)||Ls(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g_(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}class Vc{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class za extends D1{constructor(t,e,i,r,o,c){super(t,e,i,r,c),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Lf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(M1("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ht(it.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=za._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}za._jsonSchemaVersion="firestore/documentSnapshot/1.0",za._jsonSchema={type:je("string",za._jsonSchemaVersion),bundleSource:je("string","DocumentSnapshot"),bundleName:je("string"),bundle:je("string")};class Lf extends za{data(t={}){return super.data(t)}}class Ua{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Vc(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach((i=>{t.call(e,new Lf(this._firestore,this._userDataWriter,i.key,i,new Vc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ht(it.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=(function(r,o){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map((u=>{const f=new Lf(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Vc(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:f,oldIndex:-1,newIndex:c++}}))}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((u=>o||u.type!==3)).map((u=>{const f=new Lf(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Vc(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let d=-1,p=-1;return u.type!==0&&(d=c.indexOf(u.doc.key),c=c.delete(u.doc.key)),u.type!==1&&(c=c.add(u.doc),p=c.indexOf(u.doc.key)),{type:NN(u.type),doc:f,oldIndex:d,newIndex:p}}))}})(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ht(it.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Ua._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Py.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],i=[],r=[];return this.docs.forEach((o=>{o._document!==null&&(e.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function NN(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xt(61501,{type:n})}}Ua._jsonSchemaVersion="firestore/querySnapshot/1.0",Ua._jsonSchema={type:je("string",Ua._jsonSchemaVersion),bundleSource:je("string","QuerySnapshot"),bundleName:je("string"),bundle:je("string")};class m_ extends kN{constructor(t){super(),this.firestore=t}convertBytes(t){return new ri(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Be(this.firestore,null,e)}}function PN(n){n=Si(n,Ja);const t=Si(n.firestore,Fr),e=Ud(t),i=new m_(t);return O1(n._query),_N(e,n._query).then((r=>new Ua(t,i,n,r)))}function zE(n,t,e){n=Si(n,Be);const i=Si(n.firestore,Fr),r=g_(n.converter,t,e);return Hd(i,[l_(Bd(i),"setDoc",n._key,r,n.converter!==null,e).toMutation(n._key,On.none())])}function VN(n){return Hd(Si(n.firestore,Fr),[new kd(n._key,On.none())])}function LN(n,t){const e=Si(n.firestore,Fr),i=r_(n),r=g_(n.converter,t);return Hd(e,[l_(Bd(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,On.exists(!1))]).then((()=>i))}function N1(n,...t){var f,d,p;n=Fe(n);let e={includeMetadataChanges:!1,source:"default"},i=0;typeof t[i]!="object"||PE(t[i])||(e=t[i++]);const r={includeMetadataChanges:e.includeMetadataChanges,source:e.source};if(PE(t[i])){const _=t[i];t[i]=(f=_.next)==null?void 0:f.bind(_),t[i+1]=(d=_.error)==null?void 0:d.bind(_),t[i+2]=(p=_.complete)==null?void 0:p.bind(_)}let o,c,u;if(n instanceof Be)c=Si(n.firestore,Fr),u=By(n._key.path),o={next:_=>{t[i]&&t[i](zN(c,n,_))},error:t[i+1],complete:t[i+2]};else{const _=Si(n,Ja);c=Si(_.firestore,Fr),u=_._query;const b=new m_(c);o={next:S=>{t[i]&&t[i](new Ua(c,b,_,S))},error:t[i+1],complete:t[i+2]},O1(n._query)}return(function(b,S,w,A){const D=new T1(A),L=new f1(S,D,w);return b.asyncQueue.enqueueAndForget((async()=>u1(await ey(b),L))),()=>{D.Nu(),b.asyncQueue.enqueueAndForget((async()=>h1(await ey(b),L)))}})(Ud(c),u,r,o)}function Hd(n,t){return(function(i,r){const o=new kr;return i.asyncQueue.enqueueAndForget((async()=>aN(await yN(i),r,o))),o.promise})(Ud(n),t)}function zN(n,t,e){const i=e.docs.get(t._key),r=new m_(n);return new za(n,r,t._key,i,new Vc(e.hasPendingWrites,e.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Bd(t)}set(t,e,i){this._verifyNotCommitted();const r=dp(t,this._firestore),o=g_(r.converter,e,i),c=l_(this._dataReader,"WriteBatch.set",r._key,o,r.converter!==null,i);return this._mutations.push(c.toMutation(r._key,On.none())),this}update(t,e,i,...r){this._verifyNotCommitted();const o=dp(t,this._firestore);let c;return c=typeof(e=Fe(e))=="string"||e instanceof jd?RN(this._dataReader,"WriteBatch.update",o._key,e,i,r):wN(this._dataReader,"WriteBatch.update",o._key,e),this._mutations.push(c.toMutation(o._key,On.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=dp(t,this._firestore);return this._mutations=this._mutations.concat(new kd(e._key,On.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ht(it.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function dp(n,t){if((n=Fe(n)).firestore!==t)throw new ht(it.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jN(n){return Ud(n=Si(n,Fr)),new UN(n,(t=>Hd(n,t)))}(function(t,e=!0){(function(r){ml=r})(dl),nl(new Ha("firestore",((i,{instanceIdentifier:r,options:o})=>{const c=i.getProvider("app").getImmediate(),u=new Fr(new RM(i.getProvider("auth-internal")),new DM(c,i.getProvider("app-check-internal")),(function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ht(it.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ru(d.options.projectId,p)})(c,r),c);return o={useFetchStreams:e,...o},u._setSettings(o),u}),"PUBLIC").setMultipleInstances(!0)),Mr(UT,jT,t),Mr(UT,jT,"esm2020")})();const BN={apiKey:"AIzaSyDj9amBZsMkLeDIIWqUXhc19uwrxzhWGrg",authDomain:"trada-1992a.firebaseapp.com",projectId:"trada-1992a",storageBucket:"trada-1992a.firebasestorage.app",messagingSenderId:"835411805747",appId:"1:835411805747:web:447c3f8d2ecf73f3f4c546",measurementId:"G-2BZQ0EBZDF"},P1=vx(BN),Ac=SM(P1),iy=TN(P1),FN=new Cs;function HN(){const[n,t]=Tt.useState(null),[e,i]=Tt.useState(!0);return Tt.useEffect(()=>hD(Ac,d=>{t(d),i(!1)}),[]),{user:n,login:(f,d)=>lD(Ac,f,d),signup:(f,d)=>oD(Ac,f,d),logout:()=>fD(Ac),loginWithGoogle:()=>OD(Ac,FN),loading:e}}function qN(){const[n,t]=Tt.useState("dark");Tt.useEffect(()=>{const i=localStorage.getItem("theme"),r=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;t(i||(r?"dark":"light"))},[]),Tt.useEffect(()=>{n==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",n)},[n]);const e=Tt.useCallback(()=>{t(i=>i==="light"?"dark":"light")},[]);return[n,e]}const GN=({login:n,signup:t,loginWithGoogle:e})=>{const[i,r]=Tt.useState(!0),[o,c]=Tt.useState(""),[u,f]=Tt.useState(""),[d,p]=Tt.useState(""),[_,b]=Tt.useState(!1),S=async A=>{A.preventDefault(),p(""),b(!0);try{i?await n(o,u):await t(o,u)}catch(D){p(D.message||"Failed to authenticate")}b(!1)},w=async()=>{p(""),b(!0);try{await e()}catch(A){p(A.message||"Failed to sign in with Google.")}b(!1)};return O.jsx("div",{className:"bg-gray-100 dark:bg-gray-900 min-h-screen flex items-center justify-center p-4",children:O.jsxs("div",{className:"w-full max-w-md",children:[O.jsxs("div",{className:"text-center mb-8",children:[O.jsx("h1",{className:"text-4xl font-bold text-primary",children:"TRADA"}),O.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Your Personal Crypto Trading Journal"})]}),O.jsxs("div",{className:"bg-white dark:bg-gray-800/50 dark:backdrop-blur-sm border border-gray-200 dark:border-gray-700/50 rounded-xl shadow-lg p-8",children:[O.jsx("h2",{className:"text-xl font-bold mb-4 text-primary text-center",children:i?"Login":"Sign Up"}),O.jsxs("form",{onSubmit:S,className:"space-y-6",children:[d&&O.jsx("p",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded text-sm",children:d}),O.jsxs("div",{children:[O.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email Address"}),O.jsx("div",{className:"mt-1",children:O.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:o,onChange:A=>c(A.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary focus:border-primary sm:text-sm bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-white"})})]}),O.jsxs("div",{children:[O.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),O.jsx("div",{className:"mt-1",children:O.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:u,onChange:A=>f(A.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary focus:border-primary sm:text-sm bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-white"})})]}),O.jsx("div",{children:O.jsx("button",{type:"submit",disabled:_,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-gray-900 bg-primary hover:brightness-95 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:opacity-50",children:_?"Processing...":i?"Sign in":"Create account"})})]}),O.jsxs("div",{className:"mt-6",children:[O.jsxs("div",{className:"relative",children:[O.jsx("div",{className:"absolute inset-0 flex items-center",children:O.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),O.jsx("div",{className:"relative flex justify-center text-sm",children:O.jsx("span",{className:"px-2 bg-white dark:bg-gray-800 text-gray-500 dark:text-gray-400",children:"OR"})})]}),O.jsx("div",{className:"mt-6",children:O.jsxs("button",{onClick:w,disabled:_,type:"button",className:"w-full inline-flex justify-center py-2 px-4 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50",children:[O.jsxs("svg",{className:"w-5 h-5 mr-2",role:"img","aria-hidden":"true",focusable:"false",viewBox:"0 0 24 24",children:[O.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),O.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),O.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z",fill:"#FBBC05"}),O.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Sign in with Google"]})})]}),O.jsx("div",{className:"mt-6 text-center",children:O.jsx("button",{onClick:()=>r(!i),className:"font-medium text-primary hover:underline text-sm",children:i?"Don't have an account? Sign up":"Already have an account? Sign in"})})]})]})})};function YN(n,t){const[e,i]=Tt.useState([]),[r,o]=Tt.useState(!0),[c,u]=Tt.useState(null),f=Tt.useMemo(()=>t?vN(iy,"users",t,n):null,[t,n]);Tt.useEffect(()=>{if(!f){i([]),o(!1);return}const b=ON(f),S=N1(b,w=>{const A=[];w.forEach(D=>{A.push({id:D.id,...D.data()})}),i(A),o(!1)},w=>{u(w),o(!1),console.error(`Firestore error listening to ${n}:`,w)});return()=>S()},[f,n]);const d=Tt.useCallback(async b=>{if(f)try{await LN(f,b)}catch(S){u(S),console.error(`Firestore error adding to ${n}:`,S)}},[f,n]),p=Tt.useCallback(async()=>{if(f)try{const b=await PN(f),S=jN(iy);b.forEach(w=>{S.delete(w.ref)}),await S.commit()}catch(b){u(b),console.error(`Firestore error clearing ${n}:`,b)}},[f,n]),_=Tt.useCallback(async b=>{if(f)try{const S=r_(f,b);await VN(S)}catch(S){u(S),console.error(`Firestore error deleting from ${n}:`,S)}},[f,n]);return{data:e,loading:r,error:c,addDocument:d,clearCollection:p,deleteDocument:_}}function UE(n,t,e){const[i,r]=Tt.useState(e),[o,c]=Tt.useState(!0),[u,f]=Tt.useState(null),d=Tt.useMemo(()=>t?r_(iy,"users",t,n,"data"):null,[t,n]);Tt.useEffect(()=>{if(!d){r(e),c(!1);return}const _=N1(d,b=>{b.exists()?r(b.data()):(zE(d,e),r(e)),c(!1)},b=>{f(b),c(!1),console.error(`Firestore error listening to doc ${n}/data:`,b)});return()=>_()},[d]);const p=Tt.useCallback(async _=>{if(d)try{await zE(d,_,{merge:!0})}catch(b){f(b),console.error(`Firestore error updating doc ${n}/data:`,b)}},[d,n]);return{data:i,loading:o,error:u,updateDocument:p}}const KN=n=>{const t=n.margin*n.leverage,e=t/n.entryPrice,i=n.direction==="Long"?1:-1,r=(n.exitPrice-n.entryPrice)*e*i-n.fees,o=(n.exitPrice-n.entryPrice)/n.entryPrice*i*100,c=r/n.margin*100,u=t*(n.riskPercent/100);return{pnlNet:r,pnlAssetPercent:o,pnlMarginPercent:c,positionSize:e,riskAmount:u}},WN=(n,t)=>{const e=t.reduce((d,p)=>d+p.pnlNet,0),i=n.initial+n.deposits+e,r=t.filter(d=>d.pnlNet>0).length,o=t.length>0?r/t.length*100:0,c=t.filter(d=>d.pnlNet>0).reduce((d,p)=>d+p.pnlNet,0),u=Math.abs(t.filter(d=>d.pnlNet<0).reduce((d,p)=>d+p.pnlNet,0)),f=u>0?c/u:1/0;return{currentCapital:i,totalPnl:e,winRate:o,profitFactor:f}},Du=({title:n,children:t,className:e="",titleClassName:i=""})=>O.jsxs("div",{className:`bg-white dark:bg-gray-800/50 dark:backdrop-blur-sm border border-gray-200 dark:border-gray-700/50 rounded-xl shadow-lg p-6 ${e}`,children:[n&&O.jsx("h2",{className:`text-xl font-bold mb-4 text-primary ${i}`,children:n}),t]}),XN=({capital:n,setCapital:t,onAddDeposit:e})=>{const[i,r]=Tt.useState(!0),[o,c]=Tt.useState(""),[u,f]=Tt.useState(n.initial.toString());Tt.useEffect(()=>{f(n.initial.toString())},[n.initial]);const d=()=>{const b=parseFloat(o);!isNaN(b)&&b>0&&(e(b),c(""))},p=b=>{f(b.target.value)},_=()=>{const b=parseFloat(u),S=isNaN(b)?0:b;S!==n.initial&&t({initial:S})};return O.jsxs(Du,{children:[O.jsxs("div",{onClick:()=>r(!i),className:"flex justify-between items-center cursor-pointer",children:[O.jsx("h2",{className:"text-xl font-bold text-primary",children:"Capital Management"}),O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2.5,stroke:"currentColor",className:`w-5 h-5 text-gray-500 dark:text-gray-400 transform transition-transform duration-300 ${i?"":"rotate-180"}`,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"})})]}),O.jsx("div",{className:`transition-all duration-300 ease-in-out overflow-hidden ${i?"max-h-96 mt-4 opacity-100":"max-h-0 mt-0 opacity-0"}`,children:O.jsxs("div",{className:"space-y-4",children:[O.jsxs("div",{children:[O.jsx("label",{htmlFor:"initialCapital",className:"block text-sm font-medium text-gray-600 dark:text-gray-400",children:"Initial Capital ($)"}),O.jsx("input",{type:"number",id:"initialCapital",value:u,onChange:p,onBlur:_,className:"mt-1 block w-full bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-md shadow-sm py-2 px-3 text-gray-800 dark:text-white focus:outline-none focus:ring-primary focus:border-primary",placeholder:"e.g., 1000"})]}),O.jsxs("div",{className:"flex items-end space-x-2",children:[O.jsxs("div",{className:"flex-grow",children:[O.jsx("label",{htmlFor:"addDeposit",className:"block text-sm font-medium text-gray-600 dark:text-gray-400",children:"Add Deposit ($)"}),O.jsx("input",{type:"number",id:"addDeposit",value:o,onChange:b=>c(b.target.value),className:"mt-1 block w-full bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-md shadow-sm py-2 px-3 text-gray-800 dark:text-white focus:outline-none focus:ring-primary focus:border-primary",placeholder:"e.g., 500"})]}),O.jsx("button",{onClick:d,className:"bg-primary hover:brightness-95 text-gray-900 font-bold py-2 px-4 rounded-md transition duration-300 h-10",children:"Add"})]})]})})]})},jE={dateTime:new Date().toISOString().slice(0,16),pair:"",strategy:"",direction:"Long",riskReward:"2:1",entryPrice:0,exitPrice:0,margin:0,leverage:1,riskPercent:1,fees:0},QN=({onAddTrade:n})=>{const[t,e]=Tt.useState(jE),[i,r]=Tt.useState({positionValue:0,positionSize:0,riskAmount:0});Tt.useEffect(()=>{const u=t.margin*t.leverage,f=t.entryPrice>0?u/t.entryPrice:0,d=u*(t.riskPercent/100);r({positionValue:u,positionSize:f,riskAmount:d})},[t.margin,t.leverage,t.entryPrice,t.riskPercent]);const o=u=>{const{name:f,value:d}=u.target,p=["entryPrice","exitPrice","margin","leverage","riskPercent","fees"].includes(f);e(_=>({..._,[f]:p?parseFloat(d)||0:d}))},c=u=>{u.preventDefault(),n(t),e(jE)};return O.jsxs(Du,{title:"Log a New Trade",children:[O.jsxs("form",{onSubmit:c,className:"space-y-4",children:[O.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[O.jsxs("div",{children:[O.jsx("label",{htmlFor:"dateTime",className:"block text-sm font-medium text-gray-600 dark:text-gray-400",children:"Date & Time"}),O.jsx("input",{type:"datetime-local",name:"dateTime",id:"dateTime",value:t.dateTime,onChange:o,required:!0,className:"input-field"})]}),O.jsxs("div",{children:[O.jsx("label",{htmlFor:"pair",className:"block text-sm font-medium text-gray-600 dark:text-gray-400",children:"Pair"}),O.jsx("input",{type:"text",name:"pair",id:"pair",placeholder:"e.g., BTC/USDT",value:t.pair,onChange:o,required:!0,className:"input-field"})]})]}),O.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[O.jsxs("div",{children:[O.jsx("label",{htmlFor:"strategy",className:"block text-sm font-medium text-gray-600 dark:text-gray-400",children:"Strategy"}),O.jsx("input",{type:"text",name:"strategy",id:"strategy",placeholder:"e.g., Breakout",value:t.strategy,onChange:o,required:!0,className:"input-field"})]}),O.jsxs("div",{children:[O.jsx("label",{htmlFor:"direction",className:"block text-sm font-medium text-gray-600 dark:text-gray-400",children:"Direction"}),O.jsxs("select",{name:"direction",id:"direction",value:t.direction,onChange:o,className:"input-field",children:[O.jsx("option",{value:"Long",children:"Long"}),O.jsx("option",{value:"Short",children:"Short"})]})]})]}),O.jsxs("div",{children:[O.jsx("label",{htmlFor:"riskReward",className:"block text-sm font-medium text-gray-600 dark:text-gray-400",children:"Risk/Reward Ratio"}),O.jsx("input",{type:"text",name:"riskReward",id:"riskReward",placeholder:"e.g., 2:1",value:t.riskReward,onChange:o,className:"input-field"})]}),O.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[O.jsxs("div",{children:[O.jsx("label",{htmlFor:"entryPrice",className:"block text-sm font-medium text-gray-600 dark:text-gray-400",children:"Entry Price"}),O.jsx("input",{type:"number",step:"any",name:"entryPrice",id:"entryPrice",value:t.entryPrice,onChange:o,required:!0,className:"input-field"})]}),O.jsxs("div",{children:[O.jsx("label",{htmlFor:"exitPrice",className:"block text-sm font-medium text-gray-600 dark:text-gray-400",children:"Exit Price"}),O.jsx("input",{type:"number",step:"any",name:"exitPrice",id:"exitPrice",value:t.exitPrice,onChange:o,required:!0,className:"input-field"})]})]}),O.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[O.jsxs("div",{children:[O.jsx("label",{htmlFor:"margin",className:"block text-sm font-medium text-gray-600 dark:text-gray-400",children:"Margin ($)"}),O.jsx("input",{type:"number",step:"any",name:"margin",id:"margin",value:t.margin,onChange:o,required:!0,className:"input-field"})]}),O.jsxs("div",{children:[O.jsx("label",{htmlFor:"leverage",className:"block text-sm font-medium text-gray-600 dark:text-gray-400",children:"Leverage"}),O.jsx("select",{name:"leverage",id:"leverage",value:t.leverage,onChange:o,className:"input-field",children:[...Array(100).keys()].map(u=>O.jsxs("option",{value:u+1,children:[u+1,"x"]},u+1))})]})]}),O.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[O.jsxs("div",{children:[O.jsx("label",{htmlFor:"riskPercent",className:"block text-sm font-medium text-gray-600 dark:text-gray-400",children:"Risk (%)"}),O.jsx("input",{type:"number",step:"any",name:"riskPercent",id:"riskPercent",value:t.riskPercent,onChange:o,required:!0,className:"input-field"})]}),O.jsxs("div",{children:[O.jsx("label",{htmlFor:"fees",className:"block text-sm font-medium text-gray-600 dark:text-gray-400",children:"Fees ($)"}),O.jsx("input",{type:"number",step:"any",name:"fees",id:"fees",value:t.fees,onChange:o,required:!0,className:"input-field"})]})]}),O.jsxs("div",{className:"bg-gray-100 dark:bg-gray-900/50 p-4 rounded-lg space-y-2 text-sm",children:[O.jsx("h3",{className:"font-bold text-gray-700 dark:text-gray-300",children:"Auto-Calculated Values"}),O.jsxs("div",{className:"flex justify-between",children:[O.jsx("span",{children:"Position Value ($):"})," ",O.jsx("span",{children:i.positionValue.toFixed(2)})]}),O.jsxs("div",{className:"flex justify-between",children:[O.jsx("span",{children:"Position Size (Asset):"})," ",O.jsx("span",{children:i.positionSize.toFixed(8)})]}),O.jsxs("div",{className:"flex justify-between",children:[O.jsx("span",{children:"Risk Amount ($):"})," ",O.jsx("span",{children:i.riskAmount.toFixed(2)})]})]}),O.jsx("button",{type:"submit",className:"w-full bg-primary hover:brightness-95 text-gray-900 font-bold py-2 px-4 rounded-md transition duration-300",children:"Log Trade"})]}),O.jsx("style",{children:`
        .input-field {
            margin-top: 4px;
            display: block;
            width: 100%;
            background-color: rgb(249 250 251);
            border: 1px solid rgb(209 213 219);
            border-radius: 0.375rem;
            box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            padding: 0.5rem 0.75rem;
            color: rgb(17 24 39);
        }
        .dark .input-field {
            background-color: rgb(17 24 39);
            border-color: rgb(55 65 81);
            color: rgb(249 250 251);
        }
        .input-field:focus {
            outline: 2px solid transparent;
            outline-offset: 2px;
            --tw-ring-color: var(--color-primary);
            border-color: var(--color-primary);
        }
      `})]})},$N=({metrics:n,onOpenAnalytics:t})=>{const e=(r,o="",c=2)=>isFinite(r)?`${r.toFixed(c)}${o}`:"N/A",i=n.totalPnl>=0?"text-green-500":"text-red-500";return O.jsxs(Du,{title:"Performance Dashboard",children:[O.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[O.jsxs("div",{children:[O.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Current Capital"}),O.jsxs("p",{className:"text-2xl font-bold",children:["$",e(n.currentCapital)]})]}),O.jsxs("div",{children:[O.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total P/L ($)"}),O.jsxs("p",{className:`text-2xl font-bold ${i}`,children:["$",e(n.totalPnl)]})]}),O.jsxs("div",{children:[O.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Win Rate"}),O.jsx("p",{className:"text-2xl font-bold",children:e(n.winRate,"%")})]}),O.jsxs("div",{children:[O.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Profit Factor"}),O.jsx("p",{className:"text-2xl font-bold",children:e(n.profitFactor)})]})]}),O.jsx("div",{className:"mt-6 text-center",children:O.jsx("button",{onClick:t,className:"bg-primary hover:brightness-95 text-gray-900 font-bold py-2 px-6 rounded-md transition duration-300",children:"Performance Analytics"})})]})},JN=({trades:n,onDeleteTrade:t})=>{const e=Tt.useMemo(()=>n.reduce((o,c)=>(o.pnlNet+=c.pnlNet,o.fees+=c.fees,o.riskAmount+=c.riskAmount,o.margin+=c.margin,o),{pnlNet:0,fees:0,riskAmount:0,margin:0}),[n]),i=o=>o>=0?"text-green-500":"text-red-500",r=o=>{window.confirm("Delete this trade? This action cannot be undone.")&&t(o)};return O.jsxs(Du,{children:[O.jsx("div",{className:"flex justify-between items-center mb-4",children:O.jsx("h2",{className:"text-xl font-bold text-primary",children:"Trade Log"})}),O.jsx("div",{className:"overflow-x-auto",children:O.jsxs("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[O.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-100 dark:bg-gray-700 dark:text-gray-300",children:O.jsxs("tr",{children:[O.jsx("th",{scope:"col",className:"py-3 px-2",children:"Date"}),O.jsx("th",{scope:"col",className:"py-3 px-2",children:"Pair"}),O.jsx("th",{scope:"col",className:"py-3 px-2",children:"Direction"}),O.jsx("th",{scope:"col",className:"py-3 px-2",children:"Entry"}),O.jsx("th",{scope:"col",className:"py-3 px-2",children:"Exit"}),O.jsx("th",{scope:"col",className:"py-3 px-2",children:"Pos. Size"}),O.jsx("th",{scope:"col",className:"py-3 px-2",children:"Leverage"}),O.jsx("th",{scope:"col",className:"py-3 px-2",children:"Margin ($)"}),O.jsx("th",{scope:"col",className:"py-3 px-2",children:"R/R"}),O.jsx("th",{scope:"col",className:"py-3 px-2",children:"Risk ($)"}),O.jsx("th",{scope:"col",className:"py-3 px-2",children:"Fees ($)"}),O.jsx("th",{scope:"col",className:"py-3 px-2",children:"P/L ($)"}),O.jsx("th",{scope:"col",className:"py-3 px-2",children:"P/L Asset %"}),O.jsx("th",{scope:"col",className:"py-3 px-2",children:"P/L Margin %"}),O.jsx("th",{scope:"col",className:"py-3 px-2",children:"Capital End"}),O.jsx("th",{scope:"col",className:"py-3 px-2",children:"Strategy"}),O.jsx("th",{scope:"col",className:"py-3 px-2",children:"Actions"})]})}),O.jsxs("tbody",{children:[n.map(o=>O.jsxs("tr",{className:"bg-white dark:bg-gray-800 border-b dark:border-gray-700",children:[O.jsx("td",{className:"py-2 px-2",children:new Date(o.dateTime).toLocaleString()}),O.jsx("td",{className:"py-2 px-2 font-medium",children:o.pair}),O.jsx("td",{className:`py-2 px-2 font-semibold ${o.direction==="Long"?"text-green-500":"text-red-500"}`,children:o.direction}),O.jsx("td",{className:"py-2 px-2",children:o.entryPrice.toFixed(2)}),O.jsx("td",{className:"py-2 px-2",children:o.exitPrice.toFixed(2)}),O.jsx("td",{className:"py-2 px-2",children:o.positionSize.toFixed(4)}),O.jsxs("td",{className:"py-2 px-2",children:[o.leverage,"x"]}),O.jsx("td",{className:"py-2 px-2",children:o.margin.toFixed(2)}),O.jsx("td",{className:"py-2 px-2",children:o.riskReward}),O.jsx("td",{className:"py-2 px-2",children:o.riskAmount.toFixed(2)}),O.jsx("td",{className:"py-2 px-2",children:o.fees.toFixed(2)}),O.jsx("td",{className:`py-2 px-2 font-bold ${i(o.pnlNet)}`,children:o.pnlNet.toFixed(2)}),O.jsxs("td",{className:`py-2 px-2 ${i(o.pnlAssetPercent)}`,children:[o.pnlAssetPercent.toFixed(2),"%"]}),O.jsxs("td",{className:`py-2 px-2 ${i(o.pnlMarginPercent)}`,children:[o.pnlMarginPercent.toFixed(2),"%"]}),O.jsx("td",{className:"py-2 px-2",children:o.capitalEnd.toFixed(2)}),O.jsx("td",{className:"py-2 px-2",children:o.strategy}),O.jsx("td",{className:"py-2 px-2",children:O.jsx("button",{onClick:()=>r(o.id),className:"text-red-600 hover:text-red-500 font-semibold text-xs",children:"Delete"})})]},o.id)),n.length===0&&O.jsx("tr",{children:O.jsx("td",{colSpan:17,className:"text-center py-4",children:"No trades logged yet."})})]}),O.jsx("tfoot",{children:O.jsxs("tr",{className:"font-bold text-gray-800 dark:text-gray-200 bg-gray-100 dark:bg-gray-700",children:[O.jsx("td",{colSpan:7,className:"py-2 px-2 text-right",children:"Totals:"}),O.jsx("td",{className:"py-2 px-2",children:e.margin.toFixed(2)}),O.jsx("td",{className:"py-2 px-2"}),O.jsx("td",{className:"py-2 px-2",children:e.riskAmount.toFixed(2)}),O.jsx("td",{className:"py-2 px-2",children:e.fees.toFixed(2)}),O.jsx("td",{className:`py-2 px-2 ${i(e.pnlNet)}`,children:e.pnlNet.toFixed(2)}),O.jsx("td",{colSpan:4,className:"py-2 px-2"}),O.jsx("td",{className:"py-2 px-2"})]})})]})})]})},ZN=["default","gray","red","green","blue","yellow"],gp={default:{bg:"bg-white dark:bg-gray-800/50",text:"text-gray-700 dark:text-gray-300"},gray:{bg:"bg-gray-200 dark:bg-gray-700",text:"text-gray-800 dark:text-gray-200"},red:{bg:"bg-red-200 dark:bg-red-900/50",text:"text-red-800 dark:text-red-200"},green:{bg:"bg-green-200 dark:bg-green-900/50",text:"text-green-800 dark:text-green-200"},blue:{bg:"bg-blue-200 dark:bg-blue-900/50",text:"text-blue-800 dark:text-blue-200"},yellow:{bg:"bg-yellow-200 dark:bg-yellow-800/50",text:"text-yellow-800 dark:text-yellow-200"}},tP=({note:n,onNoteChange:t})=>{const[e,i]=Tt.useState(n.content||""),[r,o]=Tt.useState(!1),[c,u]=Tt.useState(!1),f=Tt.useRef(null);Tt.useEffect(()=>{i(n.content||"")},[n.content]);const d=Tt.useCallback(()=>{f.current&&u(f.current.scrollHeight>72)},[]);Tt.useEffect(()=>{d();const A=new ResizeObserver(d);return f.current&&A.observe(f.current),()=>A.disconnect()},[d,e]);const p=A=>{const D=A.currentTarget.innerHTML;i(D)},_=()=>{n.content!==e&&t({...n,content:e})},b=A=>{t({...n,color:A})},S=A=>{document.execCommand(A,!1)},w=gp[n.color]||gp.default;return O.jsxs("div",{className:`rounded-xl shadow-lg p-6 transition-colors duration-300 border border-gray-200 dark:border-gray-700/50 ${w.bg}`,children:[O.jsxs("div",{className:"flex justify-between items-center mb-4",children:[O.jsx("h2",{className:"text-xl font-bold text-primary",children:"Personal Notes"}),O.jsxs("div",{className:"flex items-center space-x-1",children:[O.jsx("button",{onClick:()=>S("bold"),className:"p-1 rounded hover:bg-gray-300 dark:hover:bg-gray-600",children:O.jsx("b",{children:"B"})}),O.jsx("button",{onClick:()=>S("italic"),className:"p-1 rounded hover:bg-gray-300 dark:hover:bg-gray-600",children:O.jsx("i",{children:"I"})}),O.jsx("button",{onClick:()=>S("underline"),className:"p-1 rounded hover:bg-gray-300 dark:hover:bg-gray-600",children:O.jsx("u",{children:"U"})}),O.jsx("button",{onClick:()=>S("strikeThrough"),className:"p-1 rounded hover:bg-gray-300 dark:hover:bg-gray-600",children:O.jsx("s",{children:"S"})}),O.jsx("div",{className:"w-px h-5 bg-gray-300 dark:bg-gray-600 mx-1"}),ZN.map(A=>O.jsx("button",{onClick:()=>b(A),className:`w-5 h-5 rounded-full border-2 ${n.color===A?"border-primary":"border-transparent"} ${gp[A].bg.split(" ")[0]}`},A))]})]}),O.jsx("div",{ref:f,contentEditable:!0,onInput:p,onBlur:_,dangerouslySetInnerHTML:{__html:e},className:`prose dark:prose-invert max-w-none focus:outline-none transition-all duration-300 ${w.text} ${r?"max-h-none":"max-h-18 overflow-hidden"}`,style:{maxHeight:r?"none":"72px"}}),O.jsxs("div",{className:"flex justify-between items-center mt-2 text-xs",children:[c&&O.jsx("button",{onClick:()=>o(!r),className:"text-primary font-semibold",children:r?"Show Less":"Read More"}),O.jsx("span",{className:"ml-auto text-gray-500 dark:text-gray-400",children:"Further reading"})]})]})},eP=()=>{const n=["Log every trade, win or lose.","Be honest with your reasons for entry and exit.","Analyze your emotional state during the trade.","Review your journal weekly to find patterns.","Consistency is more important than perfection."];return O.jsx(Du,{title:"Journaling Best Practices",children:O.jsx("ul",{className:"space-y-2 list-disc list-inside text-gray-700 dark:text-gray-300",children:n.map((t,e)=>O.jsx("li",{children:t},e))})})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Mu(n){return n+.5|0}const xr=(n,t,e)=>Math.max(Math.min(n,e),t);function Lc(n){return xr(Mu(n*2.55),0,255)}function Pr(n){return xr(Mu(n*255),0,255)}function Rs(n){return xr(Mu(n/2.55)/100,0,1)}function BE(n){return xr(Mu(n*100),0,100)}const si={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},sy=[..."0123456789ABCDEF"],nP=n=>sy[n&15],iP=n=>sy[(n&240)>>4]+sy[n&15],mf=n=>(n&240)>>4===(n&15),sP=n=>mf(n.r)&&mf(n.g)&&mf(n.b)&&mf(n.a);function rP(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&si[n[1]]*17,g:255&si[n[2]]*17,b:255&si[n[3]]*17,a:t===5?si[n[4]]*17:255}:(t===7||t===9)&&(e={r:si[n[1]]<<4|si[n[2]],g:si[n[3]]<<4|si[n[4]],b:si[n[5]]<<4|si[n[6]],a:t===9?si[n[7]]<<4|si[n[8]]:255})),e}const aP=(n,t)=>n<255?t(n):"";function oP(n){var t=sP(n)?nP:iP;return n?"#"+t(n.r)+t(n.g)+t(n.b)+aP(n.a,t):void 0}const lP=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function V1(n,t,e){const i=t*Math.min(e,1-e),r=(o,c=(o+n/30)%12)=>e-i*Math.max(Math.min(c-3,9-c,1),-1);return[r(0),r(8),r(4)]}function cP(n,t,e){const i=(r,o=(r+n/60)%6)=>e-e*t*Math.max(Math.min(o,4-o,1),0);return[i(5),i(3),i(1)]}function uP(n,t,e){const i=V1(n,1,.5);let r;for(t+e>1&&(r=1/(t+e),t*=r,e*=r),r=0;r<3;r++)i[r]*=1-t-e,i[r]+=t;return i}function hP(n,t,e,i,r){return n===r?(t-e)/i+(t<e?6:0):t===r?(e-n)/i+2:(n-t)/i+4}function p_(n){const e=n.r/255,i=n.g/255,r=n.b/255,o=Math.max(e,i,r),c=Math.min(e,i,r),u=(o+c)/2;let f,d,p;return o!==c&&(p=o-c,d=u>.5?p/(2-o-c):p/(o+c),f=hP(e,i,r,p,o),f=f*60+.5),[f|0,d||0,u]}function y_(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(Pr)}function __(n,t,e){return y_(V1,n,t,e)}function fP(n,t,e){return y_(uP,n,t,e)}function dP(n,t,e){return y_(cP,n,t,e)}function L1(n){return(n%360+360)%360}function gP(n){const t=lP.exec(n);let e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?Lc(+t[5]):Pr(+t[5]));const r=L1(+t[2]),o=+t[3]/100,c=+t[4]/100;return t[1]==="hwb"?i=fP(r,o,c):t[1]==="hsv"?i=dP(r,o,c):i=__(r,o,c),{r:i[0],g:i[1],b:i[2],a:e}}function mP(n,t){var e=p_(n);e[0]=L1(e[0]+t),e=__(e),n.r=e[0],n.g=e[1],n.b=e[2]}function pP(n){if(!n)return;const t=p_(n),e=t[0],i=BE(t[1]),r=BE(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${r}%, ${Rs(n.a)})`:`hsl(${e}, ${i}%, ${r}%)`}const FE={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},HE={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function yP(){const n={},t=Object.keys(HE),e=Object.keys(FE);let i,r,o,c,u;for(i=0;i<t.length;i++){for(c=u=t[i],r=0;r<e.length;r++)o=e[r],u=u.replace(o,FE[o]);o=parseInt(HE[c],16),n[u]=[o>>16&255,o>>8&255,o&255]}return n}let pf;function _P(n){pf||(pf=yP(),pf.transparent=[0,0,0,0]);const t=pf[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const bP=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function vP(n){const t=bP.exec(n);let e=255,i,r,o;if(t){if(t[7]!==i){const c=+t[7];e=t[8]?Lc(c):xr(c*255,0,255)}return i=+t[1],r=+t[3],o=+t[5],i=255&(t[2]?Lc(i):xr(i,0,255)),r=255&(t[4]?Lc(r):xr(r,0,255)),o=255&(t[6]?Lc(o):xr(o,0,255)),{r:i,g:r,b:o,a:e}}}function TP(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Rs(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const mp=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Go=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function EP(n,t,e){const i=Go(Rs(n.r)),r=Go(Rs(n.g)),o=Go(Rs(n.b));return{r:Pr(mp(i+e*(Go(Rs(t.r))-i))),g:Pr(mp(r+e*(Go(Rs(t.g))-r))),b:Pr(mp(o+e*(Go(Rs(t.b))-o))),a:n.a+e*(t.a-n.a)}}function yf(n,t,e){if(n){let i=p_(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=__(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function z1(n,t){return n&&Object.assign(t||{},n)}function qE(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=Pr(n[3]))):(t=z1(n,{r:0,g:0,b:0,a:1}),t.a=Pr(t.a)),t}function SP(n){return n.charAt(0)==="r"?vP(n):gP(n)}class cu{constructor(t){if(t instanceof cu)return t;const e=typeof t;let i;e==="object"?i=qE(t):e==="string"&&(i=rP(t)||_P(t)||SP(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=z1(this._rgb);return t&&(t.a=Rs(t.a)),t}set rgb(t){this._rgb=qE(t)}rgbString(){return this._valid?TP(this._rgb):void 0}hexString(){return this._valid?oP(this._rgb):void 0}hslString(){return this._valid?pP(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,r=t.rgb;let o;const c=e===o?.5:e,u=2*c-1,f=i.a-r.a,d=((u*f===-1?u:(u+f)/(1+u*f))+1)/2;o=1-d,i.r=255&d*i.r+o*r.r+.5,i.g=255&d*i.g+o*r.g+.5,i.b=255&d*i.b+o*r.b+.5,i.a=c*i.a+(1-c)*r.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=EP(this._rgb,t._rgb,e)),this}clone(){return new cu(this.rgb)}alpha(t){return this._rgb.a=Pr(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=Mu(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return yf(this._rgb,2,t),this}darken(t){return yf(this._rgb,2,-t),this}saturate(t){return yf(this._rgb,1,t),this}desaturate(t){return yf(this._rgb,1,-t),this}rotate(t){return mP(this._rgb,t),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function xs(){}const xP=(()=>{let n=0;return()=>n++})();function Vt(n){return n==null}function ye(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Ht(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Ee(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Fn(n,t){return Ee(n)?n:t}function Ct(n,t){return typeof n>"u"?t:n}const AP=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/t,U1=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function le(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function ne(n,t,e,i){let r,o,c;if(ye(n))for(o=n.length,r=0;r<o;r++)t.call(e,n[r],r);else if(Ht(n))for(c=Object.keys(n),o=c.length,r=0;r<o;r++)t.call(e,n[c[r]],c[r])}function dd(n,t){let e,i,r,o;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(r=n[e],o=t[e],r.datasetIndex!==o.datasetIndex||r.index!==o.index)return!1;return!0}function gd(n){if(ye(n))return n.map(gd);if(Ht(n)){const t=Object.create(null),e=Object.keys(n),i=e.length;let r=0;for(;r<i;++r)t[e[r]]=gd(n[e[r]]);return t}return n}function j1(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function wP(n,t,e,i){if(!j1(n))return;const r=t[n],o=e[n];Ht(r)&&Ht(o)?uu(r,o,i):t[n]=gd(o)}function uu(n,t,e){const i=ye(t)?t:[t],r=i.length;if(!Ht(n))return n;e=e||{};const o=e.merger||wP;let c;for(let u=0;u<r;++u){if(c=i[u],!Ht(c))continue;const f=Object.keys(c);for(let d=0,p=f.length;d<p;++d)o(f[d],n,c,e)}return n}function Xc(n,t){return uu(n,t,{merger:RP})}function RP(n,t,e){if(!j1(n))return;const i=t[n],r=e[n];Ht(i)&&Ht(r)?Xc(i,r):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=gd(r))}const GE={"":n=>n,x:n=>n.x,y:n=>n.y};function CP(n){const t=n.split("."),e=[];let i="";for(const r of t)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function IP(n){const t=CP(n);return e=>{for(const i of t){if(i==="")break;e=e&&e[i]}return e}}function Hr(n,t){return(GE[t]||(GE[t]=IP(t)))(n)}function b_(n){return n.charAt(0).toUpperCase()+n.slice(1)}const hu=n=>typeof n<"u",qr=n=>typeof n=="function",YE=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0};function DP(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const Xt=Math.PI,de=2*Xt,MP=de+Xt,md=Number.POSITIVE_INFINITY,OP=Xt/180,Ce=Xt/2,Ca=Xt/4,KE=Xt*2/3,Ar=Math.log10,is=Math.sign;function Qc(n,t,e){return Math.abs(n-t)<e}function WE(n){const t=Math.round(n);n=Qc(n,t,n/1e3)?t:n;const e=Math.pow(10,Math.floor(Ar(n))),i=n/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function kP(n){const t=[],e=Math.sqrt(n);let i;for(i=1;i<e;i++)n%i===0&&(t.push(i),t.push(n/i));return e===(e|0)&&t.push(e),t.sort((r,o)=>r-o).pop(),t}function NP(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function cl(n){return!NP(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function PP(n,t){const e=Math.round(n);return e-t<=n&&e+t>=n}function B1(n,t,e){let i,r,o;for(i=0,r=n.length;i<r;i++)o=n[i][e],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function Ti(n){return n*(Xt/180)}function v_(n){return n*(180/Xt)}function XE(n){if(!Ee(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function F1(n,t){const e=t.x-n.x,i=t.y-n.y,r=Math.sqrt(e*e+i*i);let o=Math.atan2(i,e);return o<-.5*Xt&&(o+=de),{angle:o,distance:r}}function ry(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function VP(n,t){return(n-t+MP)%de-Xt}function dn(n){return(n%de+de)%de}function fu(n,t,e,i){const r=dn(n),o=dn(t),c=dn(e),u=dn(o-r),f=dn(c-r),d=dn(r-o),p=dn(r-c);return r===o||r===c||i&&o===c||u>f&&d<p}function Je(n,t,e){return Math.max(t,Math.min(e,n))}function LP(n){return Je(n,-32768,32767)}function Ms(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function T_(n,t,e){e=e||(c=>n[c]<t);let i=n.length-1,r=0,o;for(;i-r>1;)o=r+i>>1,e(o)?r=o:i=o;return{lo:r,hi:i}}const Os=(n,t,e,i)=>T_(n,e,i?r=>{const o=n[r][t];return o<e||o===e&&n[r+1][t]===e}:r=>n[r][t]<e),zP=(n,t,e)=>T_(n,e,i=>n[i][t]>=e);function UP(n,t,e){let i=0,r=n.length;for(;i<r&&n[i]<t;)i++;for(;r>i&&n[r-1]>e;)r--;return i>0||r<n.length?n.slice(i,r):n}const H1=["push","pop","shift","splice","unshift"];function jP(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),H1.forEach(e=>{const i="_onData"+b_(e),r=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...o){const c=r.apply(this,o);return n._chartjs.listeners.forEach(u=>{typeof u[i]=="function"&&u[i](...o)}),c}})})}function QE(n,t){const e=n._chartjs;if(!e)return;const i=e.listeners,r=i.indexOf(t);r!==-1&&i.splice(r,1),!(i.length>0)&&(H1.forEach(o=>{delete n[o]}),delete n._chartjs)}function q1(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}const G1=(function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame})();function Y1(n,t){let e=[],i=!1;return function(...r){e=r,i||(i=!0,G1.call(window,()=>{i=!1,n.apply(t,e)}))}}function BP(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}const E_=n=>n==="start"?"left":n==="end"?"right":"center",hn=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,FP=(n,t,e,i)=>n===(i?"left":"right")?e:n==="center"?(t+e)/2:t;function K1(n,t,e){const i=t.length;let r=0,o=i;if(n._sorted){const{iScale:c,vScale:u,_parsed:f}=n,d=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,p=c.axis,{min:_,max:b,minDefined:S,maxDefined:w}=c.getUserBounds();if(S){if(r=Math.min(Os(f,p,_).lo,e?i:Os(t,p,c.getPixelForValue(_)).lo),d){const A=f.slice(0,r+1).reverse().findIndex(D=>!Vt(D[u.axis]));r-=Math.max(0,A)}r=Je(r,0,i-1)}if(w){let A=Math.max(Os(f,c.axis,b,!0).hi+1,e?0:Os(t,p,c.getPixelForValue(b),!0).hi+1);if(d){const D=f.slice(A-1).findIndex(L=>!Vt(L[u.axis]));A+=Math.max(0,D)}o=Je(A,r,i)-r}else o=i-r}return{start:r,count:o}}function W1(n){const{xScale:t,yScale:e,_scaleRanges:i}=n,r={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!i)return n._scaleRanges=r,!0;const o=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==e.min||i.ymax!==e.max;return Object.assign(i,r),o}const _f=n=>n===0||n===1,$E=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*de/e)),JE=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*de/e)+1,$c={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Ce)+1,easeOutSine:n=>Math.sin(n*Ce),easeInOutSine:n=>-.5*(Math.cos(Xt*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>_f(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>_f(n)?n:$E(n,.075,.3),easeOutElastic:n=>_f(n)?n:JE(n,.075,.3),easeInOutElastic(n){return _f(n)?n:n<.5?.5*$E(n*2,.1125,.45):.5+.5*JE(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-$c.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?$c.easeInBounce(n*2)*.5:$c.easeOutBounce(n*2-1)*.5+.5};function S_(n){if(n&&typeof n=="object"){const t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function ZE(n){return S_(n)?n:new cu(n)}function pp(n){return S_(n)?n:new cu(n).saturate(.5).darken(.1).hexString()}const HP=["x","y","borderWidth","radius","tension"],qP=["color","borderColor","backgroundColor"];function GP(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:qP},numbers:{type:"number",properties:HP}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function YP(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const tS=new Map;function KP(n,t){t=t||{};const e=n+JSON.stringify(t);let i=tS.get(e);return i||(i=new Intl.NumberFormat(n,t),tS.set(e,i)),i}function Ou(n,t,e){return KP(t,e).format(n)}const X1={values(n){return ye(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";const i=this.chart.options.locale;let r,o=n;if(e.length>1){const d=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(d<1e-4||d>1e15)&&(r="scientific"),o=WP(n,e)}const c=Ar(Math.abs(o)),u=isNaN(c)?1:Math.max(Math.min(-1*Math.floor(c),20),0),f={notation:r,minimumFractionDigits:u,maximumFractionDigits:u};return Object.assign(f,this.options.ticks.format),Ou(n,i,f)},logarithmic(n,t,e){if(n===0)return"0";const i=e[t].significand||n/Math.pow(10,Math.floor(Ar(n)));return[1,2,3,5,10,15].includes(i)||t>.8*e.length?X1.numeric.call(this,n,t,e):""}};function WP(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var qd={formatters:X1};function XP(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:qd.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Wa=Object.create(null),ay=Object.create(null);function Jc(n,t){if(!t)return n;const e=t.split(".");for(let i=0,r=e.length;i<r;++i){const o=e[i];n=n[o]||(n[o]=Object.create(null))}return n}function yp(n,t,e){return typeof t=="string"?uu(Jc(n,t),e):uu(Jc(n,""),t)}class QP{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>pp(r.backgroundColor),this.hoverBorderColor=(i,r)=>pp(r.borderColor),this.hoverColor=(i,r)=>pp(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return yp(this,t,e)}get(t){return Jc(this,t)}describe(t,e){return yp(ay,t,e)}override(t,e){return yp(Wa,t,e)}route(t,e,i,r){const o=Jc(this,t),c=Jc(this,i),u="_"+e;Object.defineProperties(o,{[u]:{value:o[e],writable:!0},[e]:{enumerable:!0,get(){const f=this[u],d=c[r];return Ht(f)?Object.assign({},d,f):Ct(f,d)},set(f){this[u]=f}}})}apply(t){t.forEach(e=>e(this))}}var _e=new QP({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[GP,YP,XP]);function $P(n){return!n||Vt(n.size)||Vt(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function pd(n,t,e,i,r){let o=t[r];return o||(o=t[r]=n.measureText(r).width,e.push(r)),o>i&&(i=o),i}function JP(n,t,e,i){i=i||{};let r=i.data=i.data||{},o=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(r=i.data={},o=i.garbageCollect=[],i.font=t),n.save(),n.font=t;let c=0;const u=e.length;let f,d,p,_,b;for(f=0;f<u;f++)if(_=e[f],_!=null&&!ye(_))c=pd(n,r,o,c,_);else if(ye(_))for(d=0,p=_.length;d<p;d++)b=_[d],b!=null&&!ye(b)&&(c=pd(n,r,o,c,b));n.restore();const S=o.length/2;if(S>e.length){for(f=0;f<S;f++)delete r[o[f]];o.splice(0,S)}return c}function Ia(n,t,e){const i=n.currentDevicePixelRatio,r=e!==0?Math.max(e/2,.5):0;return Math.round((t-r)*i)/i+r}function eS(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function oy(n,t,e,i){Q1(n,t,e,i,null)}function Q1(n,t,e,i,r){let o,c,u,f,d,p,_,b;const S=t.pointStyle,w=t.rotation,A=t.radius;let D=(w||0)*OP;if(S&&typeof S=="object"&&(o=S.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){n.save(),n.translate(e,i),n.rotate(D),n.drawImage(S,-S.width/2,-S.height/2,S.width,S.height),n.restore();return}if(!(isNaN(A)||A<=0)){switch(n.beginPath(),S){default:r?n.ellipse(e,i,r/2,A,0,0,de):n.arc(e,i,A,0,de),n.closePath();break;case"triangle":p=r?r/2:A,n.moveTo(e+Math.sin(D)*p,i-Math.cos(D)*A),D+=KE,n.lineTo(e+Math.sin(D)*p,i-Math.cos(D)*A),D+=KE,n.lineTo(e+Math.sin(D)*p,i-Math.cos(D)*A),n.closePath();break;case"rectRounded":d=A*.516,f=A-d,c=Math.cos(D+Ca)*f,_=Math.cos(D+Ca)*(r?r/2-d:f),u=Math.sin(D+Ca)*f,b=Math.sin(D+Ca)*(r?r/2-d:f),n.arc(e-_,i-u,d,D-Xt,D-Ce),n.arc(e+b,i-c,d,D-Ce,D),n.arc(e+_,i+u,d,D,D+Ce),n.arc(e-b,i+c,d,D+Ce,D+Xt),n.closePath();break;case"rect":if(!w){f=Math.SQRT1_2*A,p=r?r/2:f,n.rect(e-p,i-f,2*p,2*f);break}D+=Ca;case"rectRot":_=Math.cos(D)*(r?r/2:A),c=Math.cos(D)*A,u=Math.sin(D)*A,b=Math.sin(D)*(r?r/2:A),n.moveTo(e-_,i-u),n.lineTo(e+b,i-c),n.lineTo(e+_,i+u),n.lineTo(e-b,i+c),n.closePath();break;case"crossRot":D+=Ca;case"cross":_=Math.cos(D)*(r?r/2:A),c=Math.cos(D)*A,u=Math.sin(D)*A,b=Math.sin(D)*(r?r/2:A),n.moveTo(e-_,i-u),n.lineTo(e+_,i+u),n.moveTo(e+b,i-c),n.lineTo(e-b,i+c);break;case"star":_=Math.cos(D)*(r?r/2:A),c=Math.cos(D)*A,u=Math.sin(D)*A,b=Math.sin(D)*(r?r/2:A),n.moveTo(e-_,i-u),n.lineTo(e+_,i+u),n.moveTo(e+b,i-c),n.lineTo(e-b,i+c),D+=Ca,_=Math.cos(D)*(r?r/2:A),c=Math.cos(D)*A,u=Math.sin(D)*A,b=Math.sin(D)*(r?r/2:A),n.moveTo(e-_,i-u),n.lineTo(e+_,i+u),n.moveTo(e+b,i-c),n.lineTo(e-b,i+c);break;case"line":c=r?r/2:Math.cos(D)*A,u=Math.sin(D)*A,n.moveTo(e-c,i-u),n.lineTo(e+c,i+u);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(D)*(r?r/2:A),i+Math.sin(D)*A);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function ks(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function Gd(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function Yd(n){n.restore()}function ZP(n,t,e,i,r){if(!t)return n.lineTo(e.x,e.y);if(r==="middle"){const o=(t.x+e.x)/2;n.lineTo(o,t.y),n.lineTo(o,e.y)}else r==="after"!=!!i?n.lineTo(t.x,e.y):n.lineTo(e.x,t.y);n.lineTo(e.x,e.y)}function tV(n,t,e,i){if(!t)return n.lineTo(e.x,e.y);n.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?e.cp2x:e.cp1x,i?e.cp2y:e.cp1y,e.x,e.y)}function eV(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),Vt(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function nV(n,t,e,i,r){if(r.strikethrough||r.underline){const o=n.measureText(i),c=t-o.actualBoundingBoxLeft,u=t+o.actualBoundingBoxRight,f=e-o.actualBoundingBoxAscent,d=e+o.actualBoundingBoxDescent,p=r.strikethrough?(f+d)/2:d;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=r.decorationWidth||2,n.moveTo(c,p),n.lineTo(u,p),n.stroke()}}function iV(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function Xa(n,t,e,i,r,o={}){const c=ye(t)?t:[t],u=o.strokeWidth>0&&o.strokeColor!=="";let f,d;for(n.save(),n.font=r.string,eV(n,o),f=0;f<c.length;++f)d=c[f],o.backdrop&&iV(n,o.backdrop),u&&(o.strokeColor&&(n.strokeStyle=o.strokeColor),Vt(o.strokeWidth)||(n.lineWidth=o.strokeWidth),n.strokeText(d,e,i,o.maxWidth)),n.fillText(d,e,i,o.maxWidth),nV(n,e,i,d,o),i+=Number(r.lineHeight);n.restore()}function du(n,t){const{x:e,y:i,w:r,h:o,radius:c}=t;n.arc(e+c.topLeft,i+c.topLeft,c.topLeft,1.5*Xt,Xt,!0),n.lineTo(e,i+o-c.bottomLeft),n.arc(e+c.bottomLeft,i+o-c.bottomLeft,c.bottomLeft,Xt,Ce,!0),n.lineTo(e+r-c.bottomRight,i+o),n.arc(e+r-c.bottomRight,i+o-c.bottomRight,c.bottomRight,Ce,0,!0),n.lineTo(e+r,i+c.topRight),n.arc(e+r-c.topRight,i+c.topRight,c.topRight,0,-Ce,!0),n.lineTo(e+c.topLeft,i)}const sV=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,rV=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function aV(n,t){const e=(""+n).match(sV);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}const oV=n=>+n||0;function x_(n,t){const e={},i=Ht(t),r=i?Object.keys(t):t,o=Ht(n)?i?c=>Ct(n[c],n[t[c]]):c=>n[c]:()=>n;for(const c of r)e[c]=oV(o(c));return e}function $1(n){return x_(n,{top:"y",right:"x",bottom:"y",left:"x"})}function ja(n){return x_(n,["topLeft","topRight","bottomLeft","bottomRight"])}function yn(n){const t=$1(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Ye(n,t){n=n||{},t=t||_e.font;let e=Ct(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=Ct(n.style,t.style);i&&!(""+i).match(rV)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:Ct(n.family,t.family),lineHeight:aV(Ct(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:Ct(n.weight,t.weight),string:""};return r.string=$P(r),r}function zc(n,t,e,i){let r,o,c;for(r=0,o=n.length;r<o;++r)if(c=n[r],c!==void 0&&c!==void 0)return c}function lV(n,t,e){const{min:i,max:r}=n,o=U1(t,(r-i)/2),c=(u,f)=>e&&u===0?0:u+f;return{min:c(i,-Math.abs(o)),max:c(r,o)}}function Qr(n,t){return Object.assign(Object.create(n),t)}function A_(n,t=[""],e,i,r=()=>n[0]){const o=e||n;typeof i>"u"&&(i=ew("_fallback",n));const c={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:o,_fallback:i,_getTarget:r,override:u=>A_([u,...n],t,o,i)};return new Proxy(c,{deleteProperty(u,f){return delete u[f],delete u._keys,delete n[0][f],!0},get(u,f){return Z1(u,f,()=>pV(f,t,n,u))},getOwnPropertyDescriptor(u,f){return Reflect.getOwnPropertyDescriptor(u._scopes[0],f)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(u,f){return iS(u).includes(f)},ownKeys(u){return iS(u)},set(u,f,d){const p=u._storage||(u._storage=r());return u[f]=p[f]=d,delete u._keys,!0}})}function ul(n,t,e,i){const r={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:J1(n,i),setContext:o=>ul(n,o,e,i),override:o=>ul(n.override(o),t,e,i)};return new Proxy(r,{deleteProperty(o,c){return delete o[c],delete n[c],!0},get(o,c,u){return Z1(o,c,()=>uV(o,c,u))},getOwnPropertyDescriptor(o,c){return o._descriptors.allKeys?Reflect.has(n,c)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,c)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(o,c){return Reflect.has(n,c)},ownKeys(){return Reflect.ownKeys(n)},set(o,c,u){return n[c]=u,delete o[c],!0}})}function J1(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:r=t.allKeys}=n;return{allKeys:r,scriptable:e,indexable:i,isScriptable:qr(e)?e:()=>e,isIndexable:qr(i)?i:()=>i}}const cV=(n,t)=>n?n+b_(t):t,w_=(n,t)=>Ht(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function Z1(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];const i=e();return n[t]=i,i}function uV(n,t,e){const{_proxy:i,_context:r,_subProxy:o,_descriptors:c}=n;let u=i[t];return qr(u)&&c.isScriptable(t)&&(u=hV(t,u,n,e)),ye(u)&&u.length&&(u=fV(t,u,n,c.isIndexable)),w_(t,u)&&(u=ul(u,r,o&&o[t],c)),u}function hV(n,t,e,i){const{_proxy:r,_context:o,_subProxy:c,_stack:u}=e;if(u.has(n))throw new Error("Recursion detected: "+Array.from(u).join("->")+"->"+n);u.add(n);let f=t(o,c||i);return u.delete(n),w_(n,f)&&(f=R_(r._scopes,r,n,f)),f}function fV(n,t,e,i){const{_proxy:r,_context:o,_subProxy:c,_descriptors:u}=e;if(typeof o.index<"u"&&i(n))return t[o.index%t.length];if(Ht(t[0])){const f=t,d=r._scopes.filter(p=>p!==f);t=[];for(const p of f){const _=R_(d,r,n,p);t.push(ul(_,o,c&&c[n],u))}}return t}function tw(n,t,e){return qr(n)?n(t,e):n}const dV=(n,t)=>n===!0?t:typeof n=="string"?Hr(t,n):void 0;function gV(n,t,e,i,r){for(const o of t){const c=dV(e,o);if(c){n.add(c);const u=tw(c._fallback,e,r);if(typeof u<"u"&&u!==e&&u!==i)return u}else if(c===!1&&typeof i<"u"&&e!==i)return null}return!1}function R_(n,t,e,i){const r=t._rootScopes,o=tw(t._fallback,e,i),c=[...n,...r],u=new Set;u.add(i);let f=nS(u,c,e,o||e,i);return f===null||typeof o<"u"&&o!==e&&(f=nS(u,c,o,f,i),f===null)?!1:A_(Array.from(u),[""],r,o,()=>mV(t,e,i))}function nS(n,t,e,i,r){for(;e;)e=gV(n,t,e,i,r);return e}function mV(n,t,e){const i=n._getTarget();t in i||(i[t]={});const r=i[t];return ye(r)&&Ht(e)?e:r||{}}function pV(n,t,e,i){let r;for(const o of t)if(r=ew(cV(o,n),e),typeof r<"u")return w_(n,r)?R_(e,i,n,r):r}function ew(n,t){for(const e of t){if(!e)continue;const i=e[n];if(typeof i<"u")return i}}function iS(n){let t=n._keys;return t||(t=n._keys=yV(n._scopes)),t}function yV(n){const t=new Set;for(const e of n)for(const i of Object.keys(e).filter(r=>!r.startsWith("_")))t.add(i);return Array.from(t)}function nw(n,t,e,i){const{iScale:r}=n,{key:o="r"}=this._parsing,c=new Array(i);let u,f,d,p;for(u=0,f=i;u<f;++u)d=u+e,p=t[d],c[u]={r:r.parse(Hr(p,o),d)};return c}const _V=Number.EPSILON||1e-14,hl=(n,t)=>t<n.length&&!n[t].skip&&n[t],iw=n=>n==="x"?"y":"x";function bV(n,t,e,i){const r=n.skip?t:n,o=t,c=e.skip?t:e,u=ry(o,r),f=ry(c,o);let d=u/(u+f),p=f/(u+f);d=isNaN(d)?0:d,p=isNaN(p)?0:p;const _=i*d,b=i*p;return{previous:{x:o.x-_*(c.x-r.x),y:o.y-_*(c.y-r.y)},next:{x:o.x+b*(c.x-r.x),y:o.y+b*(c.y-r.y)}}}function vV(n,t,e){const i=n.length;let r,o,c,u,f,d=hl(n,0);for(let p=0;p<i-1;++p)if(f=d,d=hl(n,p+1),!(!f||!d)){if(Qc(t[p],0,_V)){e[p]=e[p+1]=0;continue}r=e[p]/t[p],o=e[p+1]/t[p],u=Math.pow(r,2)+Math.pow(o,2),!(u<=9)&&(c=3/Math.sqrt(u),e[p]=r*c*t[p],e[p+1]=o*c*t[p])}}function TV(n,t,e="x"){const i=iw(e),r=n.length;let o,c,u,f=hl(n,0);for(let d=0;d<r;++d){if(c=u,u=f,f=hl(n,d+1),!u)continue;const p=u[e],_=u[i];c&&(o=(p-c[e])/3,u[`cp1${e}`]=p-o,u[`cp1${i}`]=_-o*t[d]),f&&(o=(f[e]-p)/3,u[`cp2${e}`]=p+o,u[`cp2${i}`]=_+o*t[d])}}function EV(n,t="x"){const e=iw(t),i=n.length,r=Array(i).fill(0),o=Array(i);let c,u,f,d=hl(n,0);for(c=0;c<i;++c)if(u=f,f=d,d=hl(n,c+1),!!f){if(d){const p=d[t]-f[t];r[c]=p!==0?(d[e]-f[e])/p:0}o[c]=u?d?is(r[c-1])!==is(r[c])?0:(r[c-1]+r[c])/2:r[c-1]:r[c]}vV(n,r,o),TV(n,o,t)}function bf(n,t,e){return Math.max(Math.min(n,e),t)}function SV(n,t){let e,i,r,o,c,u=ks(n[0],t);for(e=0,i=n.length;e<i;++e)c=o,o=u,u=e<i-1&&ks(n[e+1],t),o&&(r=n[e],c&&(r.cp1x=bf(r.cp1x,t.left,t.right),r.cp1y=bf(r.cp1y,t.top,t.bottom)),u&&(r.cp2x=bf(r.cp2x,t.left,t.right),r.cp2y=bf(r.cp2y,t.top,t.bottom)))}function xV(n,t,e,i,r){let o,c,u,f;if(t.spanGaps&&(n=n.filter(d=>!d.skip)),t.cubicInterpolationMode==="monotone")EV(n,r);else{let d=i?n[n.length-1]:n[0];for(o=0,c=n.length;o<c;++o)u=n[o],f=bV(d,u,n[Math.min(o+1,c-(i?0:1))%c],t.tension),u.cp1x=f.previous.x,u.cp1y=f.previous.y,u.cp2x=f.next.x,u.cp2y=f.next.y,d=u}t.capBezierPoints&&SV(n,e)}function C_(){return typeof window<"u"&&typeof document<"u"}function I_(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function yd(n,t,e){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=n,i}const Kd=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function AV(n,t){return Kd(n).getPropertyValue(t)}const wV=["top","right","bottom","left"];function Ba(n,t,e){const i={};e=e?"-"+e:"";for(let r=0;r<4;r++){const o=wV[r];i[o]=parseFloat(n[t+"-"+o+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const RV=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function CV(n,t){const e=n.touches,i=e&&e.length?e[0]:n,{offsetX:r,offsetY:o}=i;let c=!1,u,f;if(RV(r,o,n.target))u=r,f=o;else{const d=t.getBoundingClientRect();u=i.clientX-d.left,f=i.clientY-d.top,c=!0}return{x:u,y:f,box:c}}function ka(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:i}=t,r=Kd(e),o=r.boxSizing==="border-box",c=Ba(r,"padding"),u=Ba(r,"border","width"),{x:f,y:d,box:p}=CV(n,e),_=c.left+(p&&u.left),b=c.top+(p&&u.top);let{width:S,height:w}=t;return o&&(S-=c.width+u.width,w-=c.height+u.height),{x:Math.round((f-_)/S*e.width/i),y:Math.round((d-b)/w*e.height/i)}}function IV(n,t,e){let i,r;if(t===void 0||e===void 0){const o=n&&I_(n);if(!o)t=n.clientWidth,e=n.clientHeight;else{const c=o.getBoundingClientRect(),u=Kd(o),f=Ba(u,"border","width"),d=Ba(u,"padding");t=c.width-d.width-f.width,e=c.height-d.height-f.height,i=yd(u.maxWidth,o,"clientWidth"),r=yd(u.maxHeight,o,"clientHeight")}}return{width:t,height:e,maxWidth:i||md,maxHeight:r||md}}const wr=n=>Math.round(n*10)/10;function DV(n,t,e,i){const r=Kd(n),o=Ba(r,"margin"),c=yd(r.maxWidth,n,"clientWidth")||md,u=yd(r.maxHeight,n,"clientHeight")||md,f=IV(n,t,e);let{width:d,height:p}=f;if(r.boxSizing==="content-box"){const b=Ba(r,"border","width"),S=Ba(r,"padding");d-=S.width+b.width,p-=S.height+b.height}return d=Math.max(0,d-o.width),p=Math.max(0,i?d/i:p-o.height),d=wr(Math.min(d,c,f.maxWidth)),p=wr(Math.min(p,u,f.maxHeight)),d&&!p&&(p=wr(d/2)),(t!==void 0||e!==void 0)&&i&&f.height&&p>f.height&&(p=f.height,d=wr(Math.floor(p*i))),{width:d,height:p}}function sS(n,t,e){const i=t||1,r=wr(n.height*i),o=wr(n.width*i);n.height=wr(n.height),n.width=wr(n.width);const c=n.canvas;return c.style&&(e||!c.style.height&&!c.style.width)&&(c.style.height=`${n.height}px`,c.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||c.height!==r||c.width!==o?(n.currentDevicePixelRatio=i,c.height=r,c.width=o,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const MV=(function(){let n=!1;try{const t={get passive(){return n=!0,!1}};C_()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n})();function rS(n,t){const e=AV(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Na(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}}function OV(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:i==="middle"?e<.5?n.y:t.y:i==="after"?e<1?n.y:t.y:e>0?t.y:n.y}}function kV(n,t,e,i){const r={x:n.cp2x,y:n.cp2y},o={x:t.cp1x,y:t.cp1y},c=Na(n,r,e),u=Na(r,o,e),f=Na(o,t,e),d=Na(c,u,e),p=Na(u,f,e);return Na(d,p,e)}const NV=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},PV=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function el(n,t,e){return n?NV(t,e):PV()}function sw(n,t){let e,i;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function rw(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function aw(n){return n==="angle"?{between:fu,compare:VP,normalize:dn}:{between:Ms,compare:(t,e)=>t-e,normalize:t=>t}}function aS({start:n,end:t,count:e,loop:i,style:r}){return{start:n%e,end:t%e,loop:i&&(t-n+1)%e===0,style:r}}function VV(n,t,e){const{property:i,start:r,end:o}=e,{between:c,normalize:u}=aw(i),f=t.length;let{start:d,end:p,loop:_}=n,b,S;if(_){for(d+=f,p+=f,b=0,S=f;b<S&&c(u(t[d%f][i]),r,o);++b)d--,p--;d%=f,p%=f}return p<d&&(p+=f),{start:d,end:p,loop:_,style:n.style}}function ow(n,t,e){if(!e)return[n];const{property:i,start:r,end:o}=e,c=t.length,{compare:u,between:f,normalize:d}=aw(i),{start:p,end:_,loop:b,style:S}=VV(n,t,e),w=[];let A=!1,D=null,L,F,W;const J=()=>f(r,W,L)&&u(r,W)!==0,$=()=>u(o,L)===0||f(o,W,L),st=()=>A||J(),I=()=>!A||$();for(let R=p,M=p;R<=_;++R)F=t[R%c],!F.skip&&(L=d(F[i]),L!==W&&(A=f(L,r,o),D===null&&st()&&(D=u(L,r)===0?R:M),D!==null&&I()&&(w.push(aS({start:D,end:R,loop:b,count:c,style:S})),D=null),M=R,W=L));return D!==null&&w.push(aS({start:D,end:_,loop:b,count:c,style:S})),w}function lw(n,t){const e=[],i=n.segments;for(let r=0;r<i.length;r++){const o=ow(i[r],n.points,t);o.length&&e.push(...o)}return e}function LV(n,t,e,i){let r=0,o=t-1;if(e&&!i)for(;r<t&&!n[r].skip;)r++;for(;r<t&&n[r].skip;)r++;for(r%=t,e&&(o+=r);o>r&&n[o%t].skip;)o--;return o%=t,{start:r,end:o}}function zV(n,t,e,i){const r=n.length,o=[];let c=t,u=n[t],f;for(f=t+1;f<=e;++f){const d=n[f%r];d.skip||d.stop?u.skip||(i=!1,o.push({start:t%r,end:(f-1)%r,loop:i}),t=c=d.stop?f:null):(c=f,u.skip&&(t=f)),u=d}return c!==null&&o.push({start:t%r,end:c%r,loop:i}),o}function UV(n,t){const e=n.points,i=n.options.spanGaps,r=e.length;if(!r)return[];const o=!!n._loop,{start:c,end:u}=LV(e,r,o,i);if(i===!0)return oS(n,[{start:c,end:u,loop:o}],e,t);const f=u<c?u+r:u,d=!!n._fullLoop&&c===0&&u===r-1;return oS(n,zV(e,c,f,d),e,t)}function oS(n,t,e,i){return!i||!i.setContext||!e?t:jV(n,t,e,i)}function jV(n,t,e,i){const r=n._chart.getContext(),o=lS(n.options),{_datasetIndex:c,options:{spanGaps:u}}=n,f=e.length,d=[];let p=o,_=t[0].start,b=_;function S(w,A,D,L){const F=u?-1:1;if(w!==A){for(w+=f;e[w%f].skip;)w-=F;for(;e[A%f].skip;)A+=F;w%f!==A%f&&(d.push({start:w%f,end:A%f,loop:D,style:L}),p=L,_=A%f)}}for(const w of t){_=u?_:w.start;let A=e[_%f],D;for(b=_+1;b<=w.end;b++){const L=e[b%f];D=lS(i.setContext(Qr(r,{type:"segment",p0:A,p1:L,p0DataIndex:(b-1)%f,p1DataIndex:b%f,datasetIndex:c}))),BV(D,p)&&S(_,b-1,w.loop,p),A=L,p=D}_<b-1&&S(_,b-1,w.loop,p)}return d}function lS(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function BV(n,t){if(!t)return!1;const e=[],i=function(r,o){return S_(o)?(e.includes(o)||e.push(o),e.indexOf(o)):o};return JSON.stringify(n,i)!==JSON.stringify(t,i)}function vf(n,t,e){return n.options.clip?n[e]:t[e]}function FV(n,t){const{xScale:e,yScale:i}=n;return e&&i?{left:vf(e,t,"left"),right:vf(e,t,"right"),top:vf(i,t,"top"),bottom:vf(i,t,"bottom")}:t}function cw(n,t){const e=t._clip;if(e.disabled)return!1;const i=FV(t,n.chartArea);return{left:e.left===!1?0:i.left-(e.left===!0?0:e.left),right:e.right===!1?n.width:i.right+(e.right===!0?0:e.right),top:e.top===!1?0:i.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?n.height:i.bottom+(e.bottom===!0?0:e.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class HV{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,r){const o=e.listeners[r],c=e.duration;o.forEach(u=>u({chart:t,initial:e.initial,numSteps:c,currentStep:Math.min(i-e.start,c)}))}_refresh(){this._request||(this._running=!0,this._request=G1.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const o=i.items;let c=o.length-1,u=!1,f;for(;c>=0;--c)f=o[c],f._active?(f._total>i.duration&&(i.duration=f._total),f.tick(t),u=!0):(o[c]=o[o.length-1],o.pop());u&&(r.draw(),this._notify(r,i,t,"progress")),o.length||(i.running=!1,this._notify(r,i,t,"complete"),i.initial=!1),e+=o.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var As=new HV;const cS="transparent",qV={boolean(n,t,e){return e>.5?t:n},color(n,t,e){const i=ZE(n||cS),r=i.valid&&ZE(t||cS);return r&&r.valid?r.mix(i,e).hexString():t},number(n,t,e){return n+(t-n)*e}};class GV{constructor(t,e,i,r){const o=e[i];r=zc([t.to,r,o,t.from]);const c=zc([t.from,o,r]);this._active=!0,this._fn=t.fn||qV[t.type||typeof c],this._easing=$c[t.easing]||$c.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=c,this._to=r,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const r=this._target[this._prop],o=i-this._start,c=this._duration-o;this._start=i,this._duration=Math.floor(Math.max(c,t.duration)),this._total+=o,this._loop=!!t.loop,this._to=zc([t.to,e,r,t.from]),this._from=zc([t.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,r=this._prop,o=this._from,c=this._loop,u=this._to;let f;if(this._active=o!==u&&(c||e<i),!this._active){this._target[r]=u,this._notify(!0);return}if(e<0){this._target[r]=o;return}f=e/i%2,f=c&&f>1?2-f:f,f=this._easing(Math.min(1,Math.max(0,f))),this._target[r]=this._fn(o,u,f)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][e]()}}class uw{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Ht(t))return;const e=Object.keys(_e.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const o=t[r];if(!Ht(o))return;const c={};for(const u of e)c[u]=o[u];(ye(o.properties)&&o.properties||[r]).forEach(u=>{(u===r||!i.has(u))&&i.set(u,c)})})}_animateOptions(t,e){const i=e.options,r=KV(t,i);if(!r)return[];const o=this._createAnimations(r,i);return i.$shared&&YV(t.options.$animations,i).then(()=>{t.options=i},()=>{}),o}_createAnimations(t,e){const i=this._properties,r=[],o=t.$animations||(t.$animations={}),c=Object.keys(e),u=Date.now();let f;for(f=c.length-1;f>=0;--f){const d=c[f];if(d.charAt(0)==="$")continue;if(d==="options"){r.push(...this._animateOptions(t,e));continue}const p=e[d];let _=o[d];const b=i.get(d);if(_)if(b&&_.active()){_.update(b,p,u);continue}else _.cancel();if(!b||!b.duration){t[d]=p;continue}o[d]=_=new GV(b,t,d,p),r.push(_)}return r}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const i=this._createAnimations(t,e);if(i.length)return As.add(this._chart,i),!0}}function YV(n,t){const e=[],i=Object.keys(t);for(let r=0;r<i.length;r++){const o=n[i[r]];o&&o.active()&&e.push(o.wait())}return Promise.all(e)}function KV(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function uS(n,t){const e=n&&n.options||{},i=e.reverse,r=e.min===void 0?t:0,o=e.max===void 0?t:0;return{start:i?o:r,end:i?r:o}}function WV(n,t,e){if(e===!1)return!1;const i=uS(n,e),r=uS(t,e);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function XV(n){let t,e,i,r;return Ht(n)?(t=n.top,e=n.right,i=n.bottom,r=n.left):t=e=i=r=n,{top:t,right:e,bottom:i,left:r,disabled:n===!1}}function hw(n,t){const e=[],i=n._getSortedDatasetMetas(t);let r,o;for(r=0,o=i.length;r<o;++r)e.push(i[r].index);return e}function hS(n,t,e,i={}){const r=n.keys,o=i.mode==="single";let c,u,f,d;if(t===null)return;let p=!1;for(c=0,u=r.length;c<u;++c){if(f=+r[c],f===e){if(p=!0,i.all)continue;break}d=n.values[f],Ee(d)&&(o||t===0||is(t)===is(d))&&(t+=d)}return!p&&!i.all?0:t}function QV(n,t){const{iScale:e,vScale:i}=t,r=e.axis==="x"?"x":"y",o=i.axis==="x"?"x":"y",c=Object.keys(n),u=new Array(c.length);let f,d,p;for(f=0,d=c.length;f<d;++f)p=c[f],u[f]={[r]:p,[o]:n[p]};return u}function _p(n,t){const e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function $V(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function JV(n){const{min:t,max:e,minDefined:i,maxDefined:r}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:r?e:Number.POSITIVE_INFINITY}}function ZV(n,t,e){const i=n[t]||(n[t]={});return i[e]||(i[e]={})}function fS(n,t,e,i){for(const r of t.getMatchingVisibleMetas(i).reverse()){const o=n[r.index];if(e&&o>0||!e&&o<0)return r.index}return null}function dS(n,t){const{chart:e,_cachedMeta:i}=n,r=e._stacks||(e._stacks={}),{iScale:o,vScale:c,index:u}=i,f=o.axis,d=c.axis,p=$V(o,c,i),_=t.length;let b;for(let S=0;S<_;++S){const w=t[S],{[f]:A,[d]:D}=w,L=w._stacks||(w._stacks={});b=L[d]=ZV(r,p,A),b[u]=D,b._top=fS(b,c,!0,i.type),b._bottom=fS(b,c,!1,i.type);const F=b._visualValues||(b._visualValues={});F[u]=D}}function bp(n,t){const e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function tL(n,t){return Qr(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function eL(n,t,e){return Qr(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function wc(n,t){const e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(const r of t){const o=r._stacks;if(!o||o[i]===void 0||o[i][e]===void 0)return;delete o[i][e],o[i]._visualValues!==void 0&&o[i]._visualValues[e]!==void 0&&delete o[i]._visualValues[e]}}}const vp=n=>n==="reset"||n==="none",gS=(n,t)=>t?n:Object.assign({},n),nL=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:hw(e,!0),values:null};class xi{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=_p(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&wc(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),r=(_,b,S,w)=>_==="x"?b:_==="r"?w:S,o=e.xAxisID=Ct(i.xAxisID,bp(t,"x")),c=e.yAxisID=Ct(i.yAxisID,bp(t,"y")),u=e.rAxisID=Ct(i.rAxisID,bp(t,"r")),f=e.indexAxis,d=e.iAxisID=r(f,o,c,u),p=e.vAxisID=r(f,c,o,u);e.xScale=this.getScaleForId(o),e.yScale=this.getScaleForId(c),e.rScale=this.getScaleForId(u),e.iScale=this.getScaleForId(d),e.vScale=this.getScaleForId(p)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&QE(this._data,this),t._stacked&&wc(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(Ht(e)){const r=this._cachedMeta;this._data=QV(e,r)}else if(i!==e){if(i){QE(i,this);const r=this._cachedMeta;wc(r),r._parsed=[]}e&&Object.isExtensible(e)&&jP(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const o=e._stacked;e._stacked=_p(e.vScale,e),e.stack!==i.stack&&(r=!0,wc(e),e.stack=i.stack),this._resyncElements(t),(r||o!==e._stacked)&&(dS(this,e._parsed),e._stacked=_p(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:r}=this,{iScale:o,_stacked:c}=i,u=o.axis;let f=t===0&&e===r.length?!0:i._sorted,d=t>0&&i._parsed[t-1],p,_,b;if(this._parsing===!1)i._parsed=r,i._sorted=!0,b=r;else{ye(r[t])?b=this.parseArrayData(i,r,t,e):Ht(r[t])?b=this.parseObjectData(i,r,t,e):b=this.parsePrimitiveData(i,r,t,e);const S=()=>_[u]===null||d&&_[u]<d[u];for(p=0;p<e;++p)i._parsed[p+t]=_=b[p],f&&(S()&&(f=!1),d=_);i._sorted=f}c&&dS(this,b)}parsePrimitiveData(t,e,i,r){const{iScale:o,vScale:c}=t,u=o.axis,f=c.axis,d=o.getLabels(),p=o===c,_=new Array(r);let b,S,w;for(b=0,S=r;b<S;++b)w=b+i,_[b]={[u]:p||o.parse(d[w],w),[f]:c.parse(e[w],w)};return _}parseArrayData(t,e,i,r){const{xScale:o,yScale:c}=t,u=new Array(r);let f,d,p,_;for(f=0,d=r;f<d;++f)p=f+i,_=e[p],u[f]={x:o.parse(_[0],p),y:c.parse(_[1],p)};return u}parseObjectData(t,e,i,r){const{xScale:o,yScale:c}=t,{xAxisKey:u="x",yAxisKey:f="y"}=this._parsing,d=new Array(r);let p,_,b,S;for(p=0,_=r;p<_;++p)b=p+i,S=e[b],d[p]={x:o.parse(Hr(S,u),b),y:c.parse(Hr(S,f),b)};return d}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const r=this.chart,o=this._cachedMeta,c=e[t.axis],u={keys:hw(r,!0),values:e._stacks[t.axis]._visualValues};return hS(u,c,o.index,{mode:i})}updateRangeFromParsed(t,e,i,r){const o=i[e.axis];let c=o===null?NaN:o;const u=r&&i._stacks[e.axis];r&&u&&(r.values=u,c=hS(r,o,this._cachedMeta.index)),t.min=Math.min(t.min,c),t.max=Math.max(t.max,c)}getMinMax(t,e){const i=this._cachedMeta,r=i._parsed,o=i._sorted&&t===i.iScale,c=r.length,u=this._getOtherScale(t),f=nL(e,i,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:p,max:_}=JV(u);let b,S;function w(){S=r[b];const A=S[u.axis];return!Ee(S[t.axis])||p>A||_<A}for(b=0;b<c&&!(!w()&&(this.updateRangeFromParsed(d,t,S,f),o));++b);if(o){for(b=c-1;b>=0;--b)if(!w()){this.updateRangeFromParsed(d,t,S,f);break}}return d}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let r,o,c;for(r=0,o=e.length;r<o;++r)c=e[r][t.axis],Ee(c)&&i.push(c);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,r=e.vScale,o=this.getParsed(t);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:r?""+r.getLabelForValue(o[r.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=XV(Ct(this.options.clip,WV(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,r=i.data||[],o=e.chartArea,c=[],u=this._drawStart||0,f=this._drawCount||r.length-u,d=this.options.drawActiveElementsOnTop;let p;for(i.dataset&&i.dataset.draw(t,o,u,f),p=u;p<u+f;++p){const _=r[p];_.hidden||(_.active&&d?c.push(_):_.draw(t,o))}for(p=0;p<c.length;++p)c[p].draw(t,o)}getStyle(t,e){const i=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const r=this.getDataset();let o;if(t>=0&&t<this._cachedMeta.data.length){const c=this._cachedMeta.data[t];o=c.$context||(c.$context=eL(this.getContext(),t,c)),o.parsed=this.getParsed(t),o.raw=r.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=tL(this.chart.getContext(),this.index)),o.dataset=r,o.index=o.datasetIndex=this.index;return o.active=!!e,o.mode=i,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const r=e==="active",o=this._cachedDataOpts,c=t+"-"+e,u=o[c],f=this.enableOptionSharing&&hu(i);if(u)return gS(u,f);const d=this.chart.config,p=d.datasetElementScopeKeys(this._type,t),_=r?[`${t}Hover`,"hover",t,""]:[t,""],b=d.getOptionScopes(this.getDataset(),p),S=Object.keys(_e.elements[t]),w=()=>this.getContext(i,r,e),A=d.resolveNamedOptions(b,S,w,_);return A.$shared&&(A.$shared=f,o[c]=Object.freeze(gS(A,f))),A}_resolveAnimations(t,e,i){const r=this.chart,o=this._cachedDataOpts,c=`animation-${e}`,u=o[c];if(u)return u;let f;if(r.options.animation!==!1){const p=this.chart.config,_=p.datasetAnimationScopeKeys(this._type,e),b=p.getOptionScopes(this.getDataset(),_);f=p.createResolver(b,this.getContext(t,i,e))}const d=new uw(r,f&&f.animations);return f&&f._cacheable&&(o[c]=Object.freeze(d)),d}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||vp(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),r=this._sharedOptions,o=this.getSharedOptions(i),c=this.includeOptions(e,o)||o!==r;return this.updateSharedOptions(o,e,i),{sharedOptions:o,includeOptions:c}}updateElement(t,e,i,r){vp(r)?Object.assign(t,i):this._resolveAnimations(e,r).update(t,i)}updateSharedOptions(t,e,i){t&&!vp(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,r){t.active=r;const o=this.getStyle(e,r);this._resolveAnimations(e,i,r).update(t,{options:!r&&this.getSharedOptions(o)||o})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[u,f,d]of this._syncList)this[u](f,d);this._syncList=[];const r=i.length,o=e.length,c=Math.min(o,r);c&&this.parse(0,c),o>r?this._insertElements(r,o-r,t):o<r&&this._removeElements(o,r-o)}_insertElements(t,e,i=!0){const r=this._cachedMeta,o=r.data,c=t+e;let u;const f=d=>{for(d.length+=e,u=d.length-1;u>=c;u--)d[u]=d[u-e]};for(f(o),u=t;u<c;++u)o[u]=new this.dataElementType;this._parsing&&f(r._parsed),this.parse(t,e),i&&this.updateElements(o,t,e,"reset")}updateElements(t,e,i,r){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(t,e);i._stacked&&wc(i,r)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,r]=t;this[e](i,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ct(xi,"defaults",{}),ct(xi,"datasetElementType",null),ct(xi,"dataElementType",null);function iL(n,t){if(!n._cache.$bar){const e=n.getMatchingVisibleMetas(t);let i=[];for(let r=0,o=e.length;r<o;r++)i=i.concat(e[r].controller.getAllParsedValues(n));n._cache.$bar=q1(i.sort((r,o)=>r-o))}return n._cache.$bar}function sL(n){const t=n.iScale,e=iL(t,n.type);let i=t._length,r,o,c,u;const f=()=>{c===32767||c===-32768||(hu(u)&&(i=Math.min(i,Math.abs(c-u)||i)),u=c)};for(r=0,o=e.length;r<o;++r)c=t.getPixelForValue(e[r]),f();for(u=void 0,r=0,o=t.ticks.length;r<o;++r)c=t.getPixelForTick(r),f();return i}function rL(n,t,e,i){const r=e.barThickness;let o,c;return Vt(r)?(o=t.min*e.categoryPercentage,c=e.barPercentage):(o=r*i,c=1),{chunk:o/i,ratio:c,start:t.pixels[n]-o/2}}function aL(n,t,e,i){const r=t.pixels,o=r[n];let c=n>0?r[n-1]:null,u=n<r.length-1?r[n+1]:null;const f=e.categoryPercentage;c===null&&(c=o-(u===null?t.end-t.start:u-o)),u===null&&(u=o+o-c);const d=o-(o-Math.min(c,u))/2*f;return{chunk:Math.abs(u-c)/2*f/i,ratio:e.barPercentage,start:d}}function oL(n,t,e,i){const r=e.parse(n[0],i),o=e.parse(n[1],i),c=Math.min(r,o),u=Math.max(r,o);let f=c,d=u;Math.abs(c)>Math.abs(u)&&(f=u,d=c),t[e.axis]=d,t._custom={barStart:f,barEnd:d,start:r,end:o,min:c,max:u}}function fw(n,t,e,i){return ye(n)?oL(n,t,e,i):t[e.axis]=e.parse(n,i),t}function mS(n,t,e,i){const r=n.iScale,o=n.vScale,c=r.getLabels(),u=r===o,f=[];let d,p,_,b;for(d=e,p=e+i;d<p;++d)b=t[d],_={},_[r.axis]=u||r.parse(c[d],d),f.push(fw(b,_,o,d));return f}function Tp(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function lL(n,t,e){return n!==0?is(n):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function cL(n){let t,e,i,r,o;return n.horizontal?(t=n.base>n.x,e="left",i="right"):(t=n.base<n.y,e="bottom",i="top"),t?(r="end",o="start"):(r="start",o="end"),{start:e,end:i,reverse:t,top:r,bottom:o}}function uL(n,t,e,i){let r=t.borderSkipped;const o={};if(!r){n.borderSkipped=o;return}if(r===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:c,end:u,reverse:f,top:d,bottom:p}=cL(n);r==="middle"&&e&&(n.enableBorderRadius=!0,(e._top||0)===i?r=d:(e._bottom||0)===i?r=p:(o[pS(p,c,u,f)]=!0,r=d)),o[pS(r,c,u,f)]=!0,n.borderSkipped=o}function pS(n,t,e,i){return i?(n=hL(n,t,e),n=yS(n,e,t)):n=yS(n,t,e),n}function hL(n,t,e){return n===t?e:n===e?t:n}function yS(n,t,e){return n==="start"?t:n==="end"?e:n}function fL(n,{inflateAmount:t},e){n.inflateAmount=t==="auto"?e===1?.33:0:t}class zf extends xi{parsePrimitiveData(t,e,i,r){return mS(t,e,i,r)}parseArrayData(t,e,i,r){return mS(t,e,i,r)}parseObjectData(t,e,i,r){const{iScale:o,vScale:c}=t,{xAxisKey:u="x",yAxisKey:f="y"}=this._parsing,d=o.axis==="x"?u:f,p=c.axis==="x"?u:f,_=[];let b,S,w,A;for(b=i,S=i+r;b<S;++b)A=e[b],w={},w[o.axis]=o.parse(Hr(A,d),b),_.push(fw(Hr(A,p),w,c,b));return _}updateRangeFromParsed(t,e,i,r){super.updateRangeFromParsed(t,e,i,r);const o=i._custom;o&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:i,vScale:r}=e,o=this.getParsed(t),c=o._custom,u=Tp(c)?"["+c.start+", "+c.end+"]":""+r.getLabelForValue(o[r.axis]);return{label:""+i.getLabelForValue(o[i.axis]),value:u}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,i,r){const o=r==="reset",{index:c,_cachedMeta:{vScale:u}}=this,f=u.getBasePixel(),d=u.isHorizontal(),p=this._getRuler(),{sharedOptions:_,includeOptions:b}=this._getSharedOptions(e,r);for(let S=e;S<e+i;S++){const w=this.getParsed(S),A=o||Vt(w[u.axis])?{base:f,head:f}:this._calculateBarValuePixels(S),D=this._calculateBarIndexPixels(S,p),L=(w._stacks||{})[u.axis],F={horizontal:d,base:A.base,enableBorderRadius:!L||Tp(w._custom)||c===L._top||c===L._bottom,x:d?A.head:D.center,y:d?D.center:A.head,height:d?D.size:Math.abs(A.size),width:d?Math.abs(A.size):D.size};b&&(F.options=_||this.resolveDataElementOptions(S,t[S].active?"active":r));const W=F.options||t[S].options;uL(F,W,L,c),fL(F,W,p.ratio),this.updateElement(t[S],S,F,r)}}_getStacks(t,e){const{iScale:i}=this._cachedMeta,r=i.getMatchingVisibleMetas(this._type).filter(p=>p.controller.options.grouped),o=i.options.stacked,c=[],u=this._cachedMeta.controller.getParsed(e),f=u&&u[i.axis],d=p=>{const _=p._parsed.find(S=>S[i.axis]===f),b=_&&_[p.vScale.axis];if(Vt(b)||isNaN(b))return!0};for(const p of r)if(!(e!==void 0&&d(p))&&((o===!1||c.indexOf(p.stack)===-1||o===void 0&&p.stack===void 0)&&c.push(p.stack),p.index===t))break;return c.length||c.push(void 0),c}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,e=this.chart.options.indexAxis;return Object.keys(t).filter(i=>t[i].axis===e).shift()}_getAxis(){const t={},e=this.getFirstScaleIdForIndexAxis();for(const i of this.chart.data.datasets)t[Ct(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,e)]=!0;return Object.keys(t)}_getStackIndex(t,e,i){const r=this._getStacks(t,i),o=e!==void 0?r.indexOf(e):-1;return o===-1?r.length-1:o}_getRuler(){const t=this.options,e=this._cachedMeta,i=e.iScale,r=[];let o,c;for(o=0,c=e.data.length;o<c;++o)r.push(i.getPixelForValue(this.getParsed(o)[i.axis],o));const u=t.barThickness;return{min:u||sL(e),pixels:r,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:u?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:i,index:r},options:{base:o,minBarLength:c}}=this,u=o||0,f=this.getParsed(t),d=f._custom,p=Tp(d);let _=f[e.axis],b=0,S=i?this.applyStack(e,f,i):_,w,A;S!==_&&(b=S-_,S=_),p&&(_=d.barStart,S=d.barEnd-d.barStart,_!==0&&is(_)!==is(d.barEnd)&&(b=0),b+=_);const D=!Vt(o)&&!p?o:b;let L=e.getPixelForValue(D);if(this.chart.getDataVisibility(t)?w=e.getPixelForValue(b+S):w=L,A=w-L,Math.abs(A)<c){A=lL(A,e,u)*c,_===u&&(L-=A/2);const F=e.getPixelForDecimal(0),W=e.getPixelForDecimal(1),J=Math.min(F,W),$=Math.max(F,W);L=Math.max(Math.min(L,$),J),w=L+A,i&&!p&&(f._stacks[e.axis]._visualValues[r]=e.getValueForPixel(w)-e.getValueForPixel(L))}if(L===e.getPixelForValue(u)){const F=is(A)*e.getLineWidthForValue(u)/2;L+=F,A-=F}return{size:A,base:L,head:w,center:w+A/2}}_calculateBarIndexPixels(t,e){const i=e.scale,r=this.options,o=r.skipNull,c=Ct(r.maxBarThickness,1/0);let u,f;const d=this._getAxisCount();if(e.grouped){const p=o?this._getStackCount(t):e.stackCount,_=r.barThickness==="flex"?aL(t,e,r,p*d):rL(t,e,r,p*d),b=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,S=this._getAxis().indexOf(Ct(b,this.getFirstScaleIdForIndexAxis())),w=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0)+S;u=_.start+_.chunk*w+_.chunk/2,f=Math.min(c,_.chunk*_.ratio)}else u=i.getPixelForValue(this.getParsed(t)[i.axis],t),f=Math.min(c,e.min*e.ratio);return{base:u-f/2,head:u+f/2,center:u,size:f}}draw(){const t=this._cachedMeta,e=t.vScale,i=t.data,r=i.length;let o=0;for(;o<r;++o)this.getParsed(o)[e.axis]!==null&&!i[o].hidden&&i[o].draw(this._ctx)}}ct(zf,"id","bar"),ct(zf,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),ct(zf,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Uf extends xi{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,i,r){const o=super.parsePrimitiveData(t,e,i,r);for(let c=0;c<o.length;c++)o[c]._custom=this.resolveDataElementOptions(c+i).radius;return o}parseArrayData(t,e,i,r){const o=super.parseArrayData(t,e,i,r);for(let c=0;c<o.length;c++){const u=e[i+c];o[c]._custom=Ct(u[2],this.resolveDataElementOptions(c+i).radius)}return o}parseObjectData(t,e,i,r){const o=super.parseObjectData(t,e,i,r);for(let c=0;c<o.length;c++){const u=e[i+c];o[c]._custom=Ct(u&&u.r&&+u.r,this.resolveDataElementOptions(c+i).radius)}return o}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let i=t.length-1;i>=0;--i)e=Math.max(e,t[i].size(this.resolveDataElementOptions(i))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:o}=e,c=this.getParsed(t),u=r.getLabelForValue(c.x),f=o.getLabelForValue(c.y),d=c._custom;return{label:i[t]||"",value:"("+u+", "+f+(d?", "+d:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,i,r){const o=r==="reset",{iScale:c,vScale:u}=this._cachedMeta,{sharedOptions:f,includeOptions:d}=this._getSharedOptions(e,r),p=c.axis,_=u.axis;for(let b=e;b<e+i;b++){const S=t[b],w=!o&&this.getParsed(b),A={},D=A[p]=o?c.getPixelForDecimal(.5):c.getPixelForValue(w[p]),L=A[_]=o?u.getBasePixel():u.getPixelForValue(w[_]);A.skip=isNaN(D)||isNaN(L),d&&(A.options=f||this.resolveDataElementOptions(b,S.active?"active":r),o&&(A.options.radius=0)),this.updateElement(S,b,A,r)}}resolveDataElementOptions(t,e){const i=this.getParsed(t);let r=super.resolveDataElementOptions(t,e);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const o=r.radius;return e!=="active"&&(r.radius=0),r.radius+=Ct(i&&i._custom,o),r}}ct(Uf,"id","bubble"),ct(Uf,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),ct(Uf,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function dL(n,t,e){let i=1,r=1,o=0,c=0;if(t<de){const u=n,f=u+t,d=Math.cos(u),p=Math.sin(u),_=Math.cos(f),b=Math.sin(f),S=(W,J,$)=>fu(W,u,f,!0)?1:Math.max(J,J*e,$,$*e),w=(W,J,$)=>fu(W,u,f,!0)?-1:Math.min(J,J*e,$,$*e),A=S(0,d,_),D=S(Ce,p,b),L=w(Xt,d,_),F=w(Xt+Ce,p,b);i=(A-L)/2,r=(D-F)/2,o=-(A+L)/2,c=-(D+F)/2}return{ratioX:i,ratioY:r,offsetX:o,offsetY:c}}class La extends xi{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const i=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=i;else{let o=f=>+i[f];if(Ht(i[t])){const{key:f="value"}=this._parsing;o=d=>+Hr(i[d],f)}let c,u;for(c=t,u=t+e;c<u;++c)r._parsed[c]=o(c)}}_getRotation(){return Ti(this.options.rotation-90)}_getCircumference(){return Ti(this.options.circumference)}_getRotationExtents(){let t=de,e=-de;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const r=this.chart.getDatasetMeta(i).controller,o=r._getRotation(),c=r._getCircumference();t=Math.min(t,o),e=Math.max(e,o+c)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:i}=e,r=this._cachedMeta,o=r.data,c=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,u=Math.max((Math.min(i.width,i.height)-c)/2,0),f=Math.min(AP(this.options.cutout,u),1),d=this._getRingWeight(this.index),{circumference:p,rotation:_}=this._getRotationExtents(),{ratioX:b,ratioY:S,offsetX:w,offsetY:A}=dL(_,p,f),D=(i.width-c)/b,L=(i.height-c)/S,F=Math.max(Math.min(D,L)/2,0),W=U1(this.options.radius,F),J=Math.max(W*f,0),$=(W-J)/this._getVisibleDatasetWeightTotal();this.offsetX=w*W,this.offsetY=A*W,r.total=this.calculateTotal(),this.outerRadius=W-$*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-$*d,0),this.updateElements(o,0,o.length,t)}_circumference(t,e){const i=this.options,r=this._cachedMeta,o=this._getCircumference();return e&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||r._parsed[t]===null||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*o/de)}updateElements(t,e,i,r){const o=r==="reset",c=this.chart,u=c.chartArea,d=c.options.animation,p=(u.left+u.right)/2,_=(u.top+u.bottom)/2,b=o&&d.animateScale,S=b?0:this.innerRadius,w=b?0:this.outerRadius,{sharedOptions:A,includeOptions:D}=this._getSharedOptions(e,r);let L=this._getRotation(),F;for(F=0;F<e;++F)L+=this._circumference(F,o);for(F=e;F<e+i;++F){const W=this._circumference(F,o),J=t[F],$={x:p+this.offsetX,y:_+this.offsetY,startAngle:L,endAngle:L+W,circumference:W,outerRadius:w,innerRadius:S};D&&($.options=A||this.resolveDataElementOptions(F,J.active?"active":r)),L+=W,this.updateElement(J,F,$,r)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let i=0,r;for(r=0;r<e.length;r++){const o=t._parsed[r];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(r)&&!e[r].hidden&&(i+=Math.abs(o))}return i}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?de*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,r=i.data.labels||[],o=Ou(e._parsed[t],i.options.locale);return{label:r[t]||"",value:o}}getMaxBorderWidth(t){let e=0;const i=this.chart;let r,o,c,u,f;if(!t){for(r=0,o=i.data.datasets.length;r<o;++r)if(i.isDatasetVisible(r)){c=i.getDatasetMeta(r),t=c.data,u=c.controller;break}}if(!t)return 0;for(r=0,o=t.length;r<o;++r)f=u.resolveDataElementOptions(r),f.borderAlign!=="inner"&&(e=Math.max(e,f.borderWidth||0,f.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let i=0,r=t.length;i<r;++i){const o=this.resolveDataElementOptions(i);e=Math.max(e,o.offset||0,o.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i));return e}_getRingWeight(t){return Math.max(Ct(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}ct(La,"id","doughnut"),ct(La,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),ct(La,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),ct(La,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data,{labels:{pointStyle:i,textAlign:r,color:o,useBorderRadius:c,borderRadius:u}}=t.legend.options;return e.labels.length&&e.datasets.length?e.labels.map((f,d)=>{const _=t.getDatasetMeta(0).controller.getStyle(d);return{text:f,fillStyle:_.backgroundColor,fontColor:o,hidden:!t.getDataVisibility(d),lineDash:_.borderDash,lineDashOffset:_.borderDashOffset,lineJoin:_.borderJoinStyle,lineWidth:_.borderWidth,strokeStyle:_.borderColor,textAlign:r,pointStyle:i,borderRadius:c&&(u||_.borderRadius),index:d}}):[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}}});class jf extends xi{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:i,data:r=[],_dataset:o}=e,c=this.chart._animationsDisabled;let{start:u,count:f}=K1(e,r,c);this._drawStart=u,this._drawCount=f,W1(e)&&(u=0,f=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!o._decimated,i.points=r;const d=this.resolveDatasetElementOptions(t);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(i,void 0,{animated:!c,options:d},t),this.updateElements(r,u,f,t)}updateElements(t,e,i,r){const o=r==="reset",{iScale:c,vScale:u,_stacked:f,_dataset:d}=this._cachedMeta,{sharedOptions:p,includeOptions:_}=this._getSharedOptions(e,r),b=c.axis,S=u.axis,{spanGaps:w,segment:A}=this.options,D=cl(w)?w:Number.POSITIVE_INFINITY,L=this.chart._animationsDisabled||o||r==="none",F=e+i,W=t.length;let J=e>0&&this.getParsed(e-1);for(let $=0;$<W;++$){const st=t[$],I=L?st:{};if($<e||$>=F){I.skip=!0;continue}const R=this.getParsed($),M=Vt(R[S]),P=I[b]=c.getPixelForValue(R[b],$),N=I[S]=o||M?u.getBasePixel():u.getPixelForValue(f?this.applyStack(u,R,f):R[S],$);I.skip=isNaN(P)||isNaN(N)||M,I.stop=$>0&&Math.abs(R[b]-J[b])>D,A&&(I.parsed=R,I.raw=d.data[$]),_&&(I.options=p||this.resolveDataElementOptions($,st.active?"active":r)),L||this.updateElement(st,$,I,r),J=R}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,i=e.options&&e.options.borderWidth||0,r=t.data||[];if(!r.length)return i;const o=r[0].size(this.resolveDataElementOptions(0)),c=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,o,c)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}ct(jf,"id","line"),ct(jf,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),ct(jf,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Zc extends xi{constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,r=i.data.labels||[],o=Ou(e._parsed[t].r,i.options.locale);return{label:r[t]||"",value:o}}parseObjectData(t,e,i,r){return nw.bind(this)(t,e,i,r)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((i,r)=>{const o=this.getParsed(r).r;!isNaN(o)&&this.chart.getDataVisibility(r)&&(o<e.min&&(e.min=o),o>e.max&&(e.max=o))}),e}_updateRadius(){const t=this.chart,e=t.chartArea,i=t.options,r=Math.min(e.right-e.left,e.bottom-e.top),o=Math.max(r/2,0),c=Math.max(i.cutoutPercentage?o/100*i.cutoutPercentage:1,0),u=(o-c)/t.getVisibleDatasetCount();this.outerRadius=o-u*this.index,this.innerRadius=this.outerRadius-u}updateElements(t,e,i,r){const o=r==="reset",c=this.chart,f=c.options.animation,d=this._cachedMeta.rScale,p=d.xCenter,_=d.yCenter,b=d.getIndexAngle(0)-.5*Xt;let S=b,w;const A=360/this.countVisibleElements();for(w=0;w<e;++w)S+=this._computeAngle(w,r,A);for(w=e;w<e+i;w++){const D=t[w];let L=S,F=S+this._computeAngle(w,r,A),W=c.getDataVisibility(w)?d.getDistanceFromCenterForValue(this.getParsed(w).r):0;S=F,o&&(f.animateScale&&(W=0),f.animateRotate&&(L=F=b));const J={x:p,y:_,innerRadius:0,outerRadius:W,startAngle:L,endAngle:F,options:this.resolveDataElementOptions(w,D.active?"active":r)};this.updateElement(D,w,J,r)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach((i,r)=>{!isNaN(this.getParsed(r).r)&&this.chart.getDataVisibility(r)&&e++}),e}_computeAngle(t,e,i){return this.chart.getDataVisibility(t)?Ti(this.resolveDataElementOptions(t,e).angle||i):0}}ct(Zc,"id","polarArea"),ct(Zc,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),ct(Zc,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i,color:r}}=t.legend.options;return e.labels.map((o,c)=>{const f=t.getDatasetMeta(0).controller.getStyle(c);return{text:o,fillStyle:f.backgroundColor,strokeStyle:f.borderColor,fontColor:r,lineWidth:f.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(c),index:c}})}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class ly extends La{}ct(ly,"id","pie"),ct(ly,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Bf extends xi{getLabelAndValue(t){const e=this._cachedMeta.vScale,i=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(i[e.axis])}}parseObjectData(t,e,i,r){return nw.bind(this)(t,e,i,r)}update(t){const e=this._cachedMeta,i=e.dataset,r=e.data||[],o=e.iScale.getLabels();if(i.points=r,t!=="resize"){const c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0);const u={_loop:!0,_fullLoop:o.length===r.length,options:c};this.updateElement(i,void 0,u,t)}this.updateElements(r,0,r.length,t)}updateElements(t,e,i,r){const o=this._cachedMeta.rScale,c=r==="reset";for(let u=e;u<e+i;u++){const f=t[u],d=this.resolveDataElementOptions(u,f.active?"active":r),p=o.getPointPositionForValue(u,this.getParsed(u).r),_=c?o.xCenter:p.x,b=c?o.yCenter:p.y,S={x:_,y:b,angle:p.angle,skip:isNaN(_)||isNaN(b),options:d};this.updateElement(f,u,S,r)}}}ct(Bf,"id","radar"),ct(Bf,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),ct(Bf,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Ff extends xi{getLabelAndValue(t){const e=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:o}=e,c=this.getParsed(t),u=r.getLabelForValue(c.x),f=o.getLabelForValue(c.y);return{label:i[t]||"",value:"("+u+", "+f+")"}}update(t){const e=this._cachedMeta,{data:i=[]}=e,r=this.chart._animationsDisabled;let{start:o,count:c}=K1(e,i,r);if(this._drawStart=o,this._drawCount=c,W1(e)&&(o=0,c=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:u,_dataset:f}=e;u._chart=this.chart,u._datasetIndex=this.index,u._decimated=!!f._decimated,u.points=i;const d=this.resolveDatasetElementOptions(t);d.segment=this.options.segment,this.updateElement(u,void 0,{animated:!r,options:d},t)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(i,o,c,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,i,r){const o=r==="reset",{iScale:c,vScale:u,_stacked:f,_dataset:d}=this._cachedMeta,p=this.resolveDataElementOptions(e,r),_=this.getSharedOptions(p),b=this.includeOptions(r,_),S=c.axis,w=u.axis,{spanGaps:A,segment:D}=this.options,L=cl(A)?A:Number.POSITIVE_INFINITY,F=this.chart._animationsDisabled||o||r==="none";let W=e>0&&this.getParsed(e-1);for(let J=e;J<e+i;++J){const $=t[J],st=this.getParsed(J),I=F?$:{},R=Vt(st[w]),M=I[S]=c.getPixelForValue(st[S],J),P=I[w]=o||R?u.getBasePixel():u.getPixelForValue(f?this.applyStack(u,st,f):st[w],J);I.skip=isNaN(M)||isNaN(P)||R,I.stop=J>0&&Math.abs(st[S]-W[S])>L,D&&(I.parsed=st,I.raw=d.data[J]),b&&(I.options=_||this.resolveDataElementOptions(J,$.active?"active":r)),F||this.updateElement($,J,I,r),W=st}this.updateSharedOptions(_,r,p)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let u=0;for(let f=e.length-1;f>=0;--f)u=Math.max(u,e[f].size(this.resolveDataElementOptions(f))/2);return u>0&&u}const i=t.dataset,r=i.options&&i.options.borderWidth||0;if(!e.length)return r;const o=e[0].size(this.resolveDataElementOptions(0)),c=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(r,o,c)/2}}ct(Ff,"id","scatter"),ct(Ff,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),ct(Ff,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var gL=Object.freeze({__proto__:null,BarController:zf,BubbleController:Uf,DoughnutController:La,LineController:jf,PieController:ly,PolarAreaController:Zc,RadarController:Bf,ScatterController:Ff});function Da(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class D_{constructor(t){ct(this,"options");this.options=t||{}}static override(t){Object.assign(D_.prototype,t)}init(){}formats(){return Da()}parse(){return Da()}format(){return Da()}add(){return Da()}diff(){return Da()}startOf(){return Da()}endOf(){return Da()}}var mL={_date:D_};function pL(n,t,e,i){const{controller:r,data:o,_sorted:c}=n,u=r._cachedMeta.iScale,f=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(u&&t===u.axis&&t!=="r"&&c&&o.length){const d=u._reversePixels?zP:Os;if(i){if(r._sharedOptions){const p=o[0],_=typeof p.getRange=="function"&&p.getRange(t);if(_){const b=d(o,t,e-_),S=d(o,t,e+_);return{lo:b.lo,hi:S.hi}}}}else{const p=d(o,t,e);if(f){const{vScale:_}=r._cachedMeta,{_parsed:b}=n,S=b.slice(0,p.lo+1).reverse().findIndex(A=>!Vt(A[_.axis]));p.lo-=Math.max(0,S);const w=b.slice(p.hi).findIndex(A=>!Vt(A[_.axis]));p.hi+=Math.max(0,w)}return p}}return{lo:0,hi:o.length-1}}function Wd(n,t,e,i,r){const o=n.getSortedVisibleDatasetMetas(),c=e[t];for(let u=0,f=o.length;u<f;++u){const{index:d,data:p}=o[u],{lo:_,hi:b}=pL(o[u],t,c,r);for(let S=_;S<=b;++S){const w=p[S];w.skip||i(w,d,S)}}}function yL(n){const t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(i,r){const o=t?Math.abs(i.x-r.x):0,c=e?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(c,2))}}function Ep(n,t,e,i,r){const o=[];return!r&&!n.isPointInArea(t)||Wd(n,e,t,function(u,f,d){!r&&!ks(u,n.chartArea,0)||u.inRange(t.x,t.y,i)&&o.push({element:u,datasetIndex:f,index:d})},!0),o}function _L(n,t,e,i){let r=[];function o(c,u,f){const{startAngle:d,endAngle:p}=c.getProps(["startAngle","endAngle"],i),{angle:_}=F1(c,{x:t.x,y:t.y});fu(_,d,p)&&r.push({element:c,datasetIndex:u,index:f})}return Wd(n,e,t,o),r}function bL(n,t,e,i,r,o){let c=[];const u=yL(e);let f=Number.POSITIVE_INFINITY;function d(p,_,b){const S=p.inRange(t.x,t.y,r);if(i&&!S)return;const w=p.getCenterPoint(r);if(!(!!o||n.isPointInArea(w))&&!S)return;const D=u(t,w);D<f?(c=[{element:p,datasetIndex:_,index:b}],f=D):D===f&&c.push({element:p,datasetIndex:_,index:b})}return Wd(n,e,t,d),c}function Sp(n,t,e,i,r,o){return!o&&!n.isPointInArea(t)?[]:e==="r"&&!i?_L(n,t,e,r):bL(n,t,e,i,r,o)}function _S(n,t,e,i,r){const o=[],c=e==="x"?"inXRange":"inYRange";let u=!1;return Wd(n,e,t,(f,d,p)=>{f[c]&&f[c](t[e],r)&&(o.push({element:f,datasetIndex:d,index:p}),u=u||f.inRange(t.x,t.y,r))}),i&&!u?[]:o}var vL={modes:{index(n,t,e,i){const r=ka(t,n),o=e.axis||"x",c=e.includeInvisible||!1,u=e.intersect?Ep(n,r,o,i,c):Sp(n,r,o,!1,i,c),f=[];return u.length?(n.getSortedVisibleDatasetMetas().forEach(d=>{const p=u[0].index,_=d.data[p];_&&!_.skip&&f.push({element:_,datasetIndex:d.index,index:p})}),f):[]},dataset(n,t,e,i){const r=ka(t,n),o=e.axis||"xy",c=e.includeInvisible||!1;let u=e.intersect?Ep(n,r,o,i,c):Sp(n,r,o,!1,i,c);if(u.length>0){const f=u[0].datasetIndex,d=n.getDatasetMeta(f).data;u=[];for(let p=0;p<d.length;++p)u.push({element:d[p],datasetIndex:f,index:p})}return u},point(n,t,e,i){const r=ka(t,n),o=e.axis||"xy",c=e.includeInvisible||!1;return Ep(n,r,o,i,c)},nearest(n,t,e,i){const r=ka(t,n),o=e.axis||"xy",c=e.includeInvisible||!1;return Sp(n,r,o,e.intersect,i,c)},x(n,t,e,i){const r=ka(t,n);return _S(n,r,"x",e.intersect,i)},y(n,t,e,i){const r=ka(t,n);return _S(n,r,"y",e.intersect,i)}}};const dw=["left","top","right","bottom"];function Rc(n,t){return n.filter(e=>e.pos===t)}function bS(n,t){return n.filter(e=>dw.indexOf(e.pos)===-1&&e.box.axis===t)}function Cc(n,t){return n.sort((e,i)=>{const r=t?i:e,o=t?e:i;return r.weight===o.weight?r.index-o.index:r.weight-o.weight})}function TL(n){const t=[];let e,i,r,o,c,u;for(e=0,i=(n||[]).length;e<i;++e)r=n[e],{position:o,options:{stack:c,stackWeight:u=1}}=r,t.push({index:e,box:r,pos:o,horizontal:r.isHorizontal(),weight:r.weight,stack:c&&o+c,stackWeight:u});return t}function EL(n){const t={};for(const e of n){const{stack:i,pos:r,stackWeight:o}=e;if(!i||!dw.includes(r))continue;const c=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});c.count++,c.weight+=o}return t}function SL(n,t){const e=EL(n),{vBoxMaxWidth:i,hBoxMaxHeight:r}=t;let o,c,u;for(o=0,c=n.length;o<c;++o){u=n[o];const{fullSize:f}=u.box,d=e[u.stack],p=d&&u.stackWeight/d.weight;u.horizontal?(u.width=p?p*i:f&&t.availableWidth,u.height=r):(u.width=i,u.height=p?p*r:f&&t.availableHeight)}return e}function xL(n){const t=TL(n),e=Cc(t.filter(d=>d.box.fullSize),!0),i=Cc(Rc(t,"left"),!0),r=Cc(Rc(t,"right")),o=Cc(Rc(t,"top"),!0),c=Cc(Rc(t,"bottom")),u=bS(t,"x"),f=bS(t,"y");return{fullSize:e,leftAndTop:i.concat(o),rightAndBottom:r.concat(f).concat(c).concat(u),chartArea:Rc(t,"chartArea"),vertical:i.concat(r).concat(f),horizontal:o.concat(c).concat(u)}}function vS(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function gw(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function AL(n,t,e,i){const{pos:r,box:o}=e,c=n.maxPadding;if(!Ht(r)){e.size&&(n[r]-=e.size);const _=i[e.stack]||{size:0,count:1};_.size=Math.max(_.size,e.horizontal?o.height:o.width),e.size=_.size/_.count,n[r]+=e.size}o.getPadding&&gw(c,o.getPadding());const u=Math.max(0,t.outerWidth-vS(c,n,"left","right")),f=Math.max(0,t.outerHeight-vS(c,n,"top","bottom")),d=u!==n.w,p=f!==n.h;return n.w=u,n.h=f,e.horizontal?{same:d,other:p}:{same:p,other:d}}function wL(n){const t=n.maxPadding;function e(i){const r=Math.max(t[i]-n[i],0);return n[i]+=r,r}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function RL(n,t){const e=t.maxPadding;function i(r){const o={left:0,top:0,right:0,bottom:0};return r.forEach(c=>{o[c]=Math.max(t[c],e[c])}),o}return i(n?["left","right"]:["top","bottom"])}function Uc(n,t,e,i){const r=[];let o,c,u,f,d,p;for(o=0,c=n.length,d=0;o<c;++o){u=n[o],f=u.box,f.update(u.width||t.w,u.height||t.h,RL(u.horizontal,t));const{same:_,other:b}=AL(t,e,u,i);d|=_&&r.length,p=p||b,f.fullSize||r.push(u)}return d&&Uc(r,t,e,i)||p}function Tf(n,t,e,i,r){n.top=e,n.left=t,n.right=t+i,n.bottom=e+r,n.width=i,n.height=r}function TS(n,t,e,i){const r=e.padding;let{x:o,y:c}=t;for(const u of n){const f=u.box,d=i[u.stack]||{placed:0,weight:1},p=u.stackWeight/d.weight||1;if(u.horizontal){const _=t.w*p,b=d.size||f.height;hu(d.start)&&(c=d.start),f.fullSize?Tf(f,r.left,c,e.outerWidth-r.right-r.left,b):Tf(f,t.left+d.placed,c,_,b),d.start=c,d.placed+=_,c=f.bottom}else{const _=t.h*p,b=d.size||f.width;hu(d.start)&&(o=d.start),f.fullSize?Tf(f,o,r.top,b,e.outerHeight-r.bottom-r.top):Tf(f,o,t.top+d.placed,b,_),d.start=o,d.placed+=_,o=f.right}}t.x=o,t.y=c}var mn={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;const r=yn(n.options.layout.padding),o=Math.max(t-r.width,0),c=Math.max(e-r.height,0),u=xL(n.boxes),f=u.vertical,d=u.horizontal;ne(n.boxes,A=>{typeof A.beforeLayout=="function"&&A.beforeLayout()});const p=f.reduce((A,D)=>D.box.options&&D.box.options.display===!1?A:A+1,0)||1,_=Object.freeze({outerWidth:t,outerHeight:e,padding:r,availableWidth:o,availableHeight:c,vBoxMaxWidth:o/2/p,hBoxMaxHeight:c/2}),b=Object.assign({},r);gw(b,yn(i));const S=Object.assign({maxPadding:b,w:o,h:c,x:r.left,y:r.top},r),w=SL(f.concat(d),_);Uc(u.fullSize,S,_,w),Uc(f,S,_,w),Uc(d,S,_,w)&&Uc(f,S,_,w),wL(S),TS(u.leftAndTop,S,_,w),S.x+=S.w,S.y+=S.h,TS(u.rightAndBottom,S,_,w),n.chartArea={left:S.left,top:S.top,right:S.left+S.w,bottom:S.top+S.h,height:S.h,width:S.w},ne(u.chartArea,A=>{const D=A.box;Object.assign(D,n.chartArea),D.update(S.w,S.h,{left:0,top:0,right:0,bottom:0})})}};class mw{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,r){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):i)}}isAttached(t){return!0}updateConfig(t){}}class CL extends mw{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Hf="$chartjs",IL={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},ES=n=>n===null||n==="";function DL(n,t){const e=n.style,i=n.getAttribute("height"),r=n.getAttribute("width");if(n[Hf]={initial:{height:i,width:r,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",ES(r)){const o=rS(n,"width");o!==void 0&&(n.width=o)}if(ES(i))if(n.style.height==="")n.height=n.width/(t||2);else{const o=rS(n,"height");o!==void 0&&(n.height=o)}return n}const pw=MV?{passive:!0}:!1;function ML(n,t,e){n&&n.addEventListener(t,e,pw)}function OL(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,pw)}function kL(n,t){const e=IL[n.type]||n.type,{x:i,y:r}=ka(n,t);return{type:e,chart:t,native:n,x:i!==void 0?i:null,y:r!==void 0?r:null}}function _d(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function NL(n,t,e){const i=n.canvas,r=new MutationObserver(o=>{let c=!1;for(const u of o)c=c||_d(u.addedNodes,i),c=c&&!_d(u.removedNodes,i);c&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}function PL(n,t,e){const i=n.canvas,r=new MutationObserver(o=>{let c=!1;for(const u of o)c=c||_d(u.removedNodes,i),c=c&&!_d(u.addedNodes,i);c&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}const gu=new Map;let SS=0;function yw(){const n=window.devicePixelRatio;n!==SS&&(SS=n,gu.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function VL(n,t){gu.size||window.addEventListener("resize",yw),gu.set(n,t)}function LL(n){gu.delete(n),gu.size||window.removeEventListener("resize",yw)}function zL(n,t,e){const i=n.canvas,r=i&&I_(i);if(!r)return;const o=Y1((u,f)=>{const d=r.clientWidth;e(u,f),d<r.clientWidth&&e()},window),c=new ResizeObserver(u=>{const f=u[0],d=f.contentRect.width,p=f.contentRect.height;d===0&&p===0||o(d,p)});return c.observe(r),VL(n,o),c}function xp(n,t,e){e&&e.disconnect(),t==="resize"&&LL(n)}function UL(n,t,e){const i=n.canvas,r=Y1(o=>{n.ctx!==null&&e(kL(o,n))},n);return ML(i,t,r),r}class jL extends mw{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(DL(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[Hf])return!1;const i=e[Hf].initial;["height","width"].forEach(o=>{const c=i[o];Vt(c)?e.removeAttribute(o):e.setAttribute(o,c)});const r=i.style||{};return Object.keys(r).forEach(o=>{e.style[o]=r[o]}),e.width=e.width,delete e[Hf],!0}addEventListener(t,e,i){this.removeEventListener(t,e);const r=t.$proxies||(t.$proxies={}),c={attach:NL,detach:PL,resize:zL}[e]||UL;r[e]=c(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),r=i[e];if(!r)return;({attach:xp,detach:xp,resize:xp}[e]||OL)(t,e,r),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,r){return DV(t,e,i,r)}isAttached(t){const e=t&&I_(t);return!!(e&&e.isConnected)}}function BL(n){return!C_()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?CL:jL}class wi{constructor(){ct(this,"x");ct(this,"y");ct(this,"active",!1);ct(this,"options");ct(this,"$animations")}tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return cl(this.x)&&cl(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const r={};return t.forEach(o=>{r[o]=i[o]&&i[o].active()?i[o]._to:this[o]}),r}}ct(wi,"defaults",{}),ct(wi,"defaultRoutes");function FL(n,t){const e=n.options.ticks,i=HL(n),r=Math.min(e.maxTicksLimit||i,i),o=e.major.enabled?GL(t):[],c=o.length,u=o[0],f=o[c-1],d=[];if(c>r)return YL(t,d,o,c/r),d;const p=qL(o,t,r);if(c>0){let _,b;const S=c>1?Math.round((f-u)/(c-1)):null;for(Ef(t,d,p,Vt(S)?0:u-S,u),_=0,b=c-1;_<b;_++)Ef(t,d,p,o[_],o[_+1]);return Ef(t,d,p,f,Vt(S)?t.length:f+S),d}return Ef(t,d,p),d}function HL(n){const t=n.options.offset,e=n._tickSize(),i=n._length/e+(t?0:1),r=n._maxLength/e;return Math.floor(Math.min(i,r))}function qL(n,t,e){const i=KL(n),r=t.length/e;if(!i)return Math.max(r,1);const o=kP(i);for(let c=0,u=o.length-1;c<u;c++){const f=o[c];if(f>r)return f}return Math.max(r,1)}function GL(n){const t=[];let e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}function YL(n,t,e,i){let r=0,o=e[0],c;for(i=Math.ceil(i),c=0;c<n.length;c++)c===o&&(t.push(n[c]),r++,o=e[r*i])}function Ef(n,t,e,i,r){const o=Ct(i,0),c=Math.min(Ct(r,n.length),n.length);let u=0,f,d,p;for(e=Math.ceil(e),r&&(f=r-i,e=f/Math.floor(f/e)),p=o;p<0;)u++,p=Math.round(o+u*e);for(d=Math.max(o,0);d<c;d++)d===p&&(t.push(n[d]),u++,p=Math.round(o+u*e))}function KL(n){const t=n.length;let e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}const WL=n=>n==="left"?"right":n==="right"?"left":n,xS=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,AS=(n,t)=>Math.min(t||n,n);function wS(n,t){const e=[],i=n.length/t,r=n.length;let o=0;for(;o<r;o+=i)e.push(n[Math.floor(o)]);return e}function XL(n,t,e){const i=n.ticks.length,r=Math.min(t,i-1),o=n._startPixel,c=n._endPixel,u=1e-6;let f=n.getPixelForTick(r),d;if(!(e&&(i===1?d=Math.max(f-o,c-f):t===0?d=(n.getPixelForTick(1)-f)/2:d=(f-n.getPixelForTick(r-1))/2,f+=r<t?d:-d,f<o-u||f>c+u)))return f}function QL(n,t){ne(n,e=>{const i=e.gc,r=i.length/2;let o;if(r>t){for(o=0;o<r;++o)delete e.data[i[o]];i.splice(0,r)}})}function Ic(n){return n.drawTicks?n.tickLength:0}function RS(n,t){if(!n.display)return 0;const e=Ye(n.font,t),i=yn(n.padding);return(ye(n.text)?n.text.length:1)*e.lineHeight+i.height}function $L(n,t){return Qr(n,{scale:t,type:"scale"})}function JL(n,t,e){return Qr(n,{tick:e,index:t,type:"tick"})}function ZL(n,t,e){let i=E_(n);return(e&&t!=="right"||!e&&t==="right")&&(i=WL(i)),i}function t4(n,t,e,i){const{top:r,left:o,bottom:c,right:u,chart:f}=n,{chartArea:d,scales:p}=f;let _=0,b,S,w;const A=c-r,D=u-o;if(n.isHorizontal()){if(S=hn(i,o,u),Ht(e)){const L=Object.keys(e)[0],F=e[L];w=p[L].getPixelForValue(F)+A-t}else e==="center"?w=(d.bottom+d.top)/2+A-t:w=xS(n,e,t);b=u-o}else{if(Ht(e)){const L=Object.keys(e)[0],F=e[L];S=p[L].getPixelForValue(F)-D+t}else e==="center"?S=(d.left+d.right)/2-D+t:S=xS(n,e,t);w=hn(i,c,r),_=e==="left"?-Ce:Ce}return{titleX:S,titleY:w,maxWidth:b,rotation:_}}class Za extends wi{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:r}=this;return t=Fn(t,Number.POSITIVE_INFINITY),e=Fn(e,Number.NEGATIVE_INFINITY),i=Fn(i,Number.POSITIVE_INFINITY),r=Fn(r,Number.NEGATIVE_INFINITY),{min:Fn(t,i),max:Fn(e,r),minDefined:Ee(t),maxDefined:Ee(e)}}getMinMax(t){let{min:e,max:i,minDefined:r,maxDefined:o}=this.getUserBounds(),c;if(r&&o)return{min:e,max:i};const u=this.getMatchingVisibleMetas();for(let f=0,d=u.length;f<d;++f)c=u[f].controller.getMinMax(this,t),r||(e=Math.min(e,c.min)),o||(i=Math.max(i,c.max));return e=o&&e>i?i:e,i=r&&e>i?e:i,{min:Fn(e,Fn(i,e)),max:Fn(i,Fn(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){le(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:r,grace:o,ticks:c}=this.options,u=c.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=lV(this,o,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const f=u<this.ticks.length;this._convertTicksToLabels(f?wS(this.ticks,u):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),c.display&&(c.autoSkip||c.source==="auto")&&(this.ticks=FL(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),f&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){le(this.options.afterUpdate,[this])}beforeSetDimensions(){le(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){le(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),le(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){le(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,r,o;for(i=0,r=t.length;i<r;i++)o=t[i],o.label=le(e.callback,[o.value,i,t],this)}afterTickToLabelConversion(){le(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){le(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=AS(this.ticks.length,t.ticks.maxTicksLimit),r=e.minRotation||0,o=e.maxRotation;let c=r,u,f,d;if(!this._isVisible()||!e.display||r>=o||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const p=this._getLabelSizes(),_=p.widest.width,b=p.highest.height,S=Je(this.chart.width-_,0,this.maxWidth);u=t.offset?this.maxWidth/i:S/(i-1),_+6>u&&(u=S/(i-(t.offset?.5:1)),f=this.maxHeight-Ic(t.grid)-e.padding-RS(t.title,this.chart.options.font),d=Math.sqrt(_*_+b*b),c=v_(Math.min(Math.asin(Je((p.highest.height+6)/u,-1,1)),Math.asin(Je(f/d,-1,1))-Math.asin(Je(b/d,-1,1)))),c=Math.max(r,Math.min(o,c))),this.labelRotation=c}afterCalculateLabelRotation(){le(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){le(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:r,grid:o}}=this,c=this._isVisible(),u=this.isHorizontal();if(c){const f=RS(r,e.options.font);if(u?(t.width=this.maxWidth,t.height=Ic(o)+f):(t.height=this.maxHeight,t.width=Ic(o)+f),i.display&&this.ticks.length){const{first:d,last:p,widest:_,highest:b}=this._getLabelSizes(),S=i.padding*2,w=Ti(this.labelRotation),A=Math.cos(w),D=Math.sin(w);if(u){const L=i.mirror?0:D*_.width+A*b.height;t.height=Math.min(this.maxHeight,t.height+L+S)}else{const L=i.mirror?0:A*_.width+D*b.height;t.width=Math.min(this.maxWidth,t.width+L+S)}this._calculatePadding(d,p,D,A)}}this._handleMargins(),u?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,r){const{ticks:{align:o,padding:c},position:u}=this.options,f=this.labelRotation!==0,d=u!=="top"&&this.axis==="x";if(this.isHorizontal()){const p=this.getPixelForTick(0)-this.left,_=this.right-this.getPixelForTick(this.ticks.length-1);let b=0,S=0;f?d?(b=r*t.width,S=i*e.height):(b=i*t.height,S=r*e.width):o==="start"?S=e.width:o==="end"?b=t.width:o!=="inner"&&(b=t.width/2,S=e.width/2),this.paddingLeft=Math.max((b-p+c)*this.width/(this.width-p),0),this.paddingRight=Math.max((S-_+c)*this.width/(this.width-_),0)}else{let p=e.height/2,_=t.height/2;o==="start"?(p=0,_=t.height):o==="end"&&(p=e.height,_=0),this.paddingTop=p+c,this.paddingBottom=_+c}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){le(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)Vt(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=wS(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:r,_longestTextCache:o}=this,c=[],u=[],f=Math.floor(e/AS(e,i));let d=0,p=0,_,b,S,w,A,D,L,F,W,J,$;for(_=0;_<e;_+=f){if(w=t[_].label,A=this._resolveTickFontOptions(_),r.font=D=A.string,L=o[D]=o[D]||{data:{},gc:[]},F=A.lineHeight,W=J=0,!Vt(w)&&!ye(w))W=pd(r,L.data,L.gc,W,w),J=F;else if(ye(w))for(b=0,S=w.length;b<S;++b)$=w[b],!Vt($)&&!ye($)&&(W=pd(r,L.data,L.gc,W,$),J+=F);c.push(W),u.push(J),d=Math.max(W,d),p=Math.max(J,p)}QL(o,e);const st=c.indexOf(d),I=u.indexOf(p),R=M=>({width:c[M]||0,height:u[M]||0});return{first:R(0),last:R(e-1),widest:R(st),highest:R(I),widths:c,heights:u}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return LP(this._alignToPixels?Ia(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=JL(this.getContext(),t,i))}return this.$context||(this.$context=$L(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=Ti(this.labelRotation),i=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),o=this._getLabelSizes(),c=t.autoSkipPadding||0,u=o?o.widest.width+c:0,f=o?o.highest.height+c:0;return this.isHorizontal()?f*i>u*r?u/i:f/r:f*r<u*i?f/i:u/r}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,r=this.options,{grid:o,position:c,border:u}=r,f=o.offset,d=this.isHorizontal(),_=this.ticks.length+(f?1:0),b=Ic(o),S=[],w=u.setContext(this.getContext()),A=w.display?w.width:0,D=A/2,L=function(K){return Ia(i,K,A)};let F,W,J,$,st,I,R,M,P,N,z,k;if(c==="top")F=L(this.bottom),I=this.bottom-b,M=F-D,N=L(t.top)+D,k=t.bottom;else if(c==="bottom")F=L(this.top),N=t.top,k=L(t.bottom)-D,I=F+D,M=this.top+b;else if(c==="left")F=L(this.right),st=this.right-b,R=F-D,P=L(t.left)+D,z=t.right;else if(c==="right")F=L(this.left),P=t.left,z=L(t.right)-D,st=F+D,R=this.left+b;else if(e==="x"){if(c==="center")F=L((t.top+t.bottom)/2+.5);else if(Ht(c)){const K=Object.keys(c)[0],at=c[K];F=L(this.chart.scales[K].getPixelForValue(at))}N=t.top,k=t.bottom,I=F+D,M=I+b}else if(e==="y"){if(c==="center")F=L((t.left+t.right)/2);else if(Ht(c)){const K=Object.keys(c)[0],at=c[K];F=L(this.chart.scales[K].getPixelForValue(at))}st=F-D,R=st-b,P=t.left,z=t.right}const kt=Ct(r.ticks.maxTicksLimit,_),At=Math.max(1,Math.ceil(_/kt));for(W=0;W<_;W+=At){const K=this.getContext(W),at=o.setContext(K),dt=u.setContext(K),vt=at.lineWidth,Lt=at.color,U=dt.dash||[],tt=dt.dashOffset,lt=at.tickWidth,ut=at.tickColor,_t=at.tickBorderDash||[],Et=at.tickBorderDashOffset;J=XL(this,W,f),J!==void 0&&($=Ia(i,J,vt),d?st=R=P=z=$:I=M=N=k=$,S.push({tx1:st,ty1:I,tx2:R,ty2:M,x1:P,y1:N,x2:z,y2:k,width:vt,color:Lt,borderDash:U,borderDashOffset:tt,tickWidth:lt,tickColor:ut,tickBorderDash:_t,tickBorderDashOffset:Et}))}return this._ticksLength=_,this._borderValue=F,S}_computeLabelItems(t){const e=this.axis,i=this.options,{position:r,ticks:o}=i,c=this.isHorizontal(),u=this.ticks,{align:f,crossAlign:d,padding:p,mirror:_}=o,b=Ic(i.grid),S=b+p,w=_?-p:S,A=-Ti(this.labelRotation),D=[];let L,F,W,J,$,st,I,R,M,P,N,z,k="middle";if(r==="top")st=this.bottom-w,I=this._getXAxisLabelAlignment();else if(r==="bottom")st=this.top+w,I=this._getXAxisLabelAlignment();else if(r==="left"){const At=this._getYAxisLabelAlignment(b);I=At.textAlign,$=At.x}else if(r==="right"){const At=this._getYAxisLabelAlignment(b);I=At.textAlign,$=At.x}else if(e==="x"){if(r==="center")st=(t.top+t.bottom)/2+S;else if(Ht(r)){const At=Object.keys(r)[0],K=r[At];st=this.chart.scales[At].getPixelForValue(K)+S}I=this._getXAxisLabelAlignment()}else if(e==="y"){if(r==="center")$=(t.left+t.right)/2-S;else if(Ht(r)){const At=Object.keys(r)[0],K=r[At];$=this.chart.scales[At].getPixelForValue(K)}I=this._getYAxisLabelAlignment(b).textAlign}e==="y"&&(f==="start"?k="top":f==="end"&&(k="bottom"));const kt=this._getLabelSizes();for(L=0,F=u.length;L<F;++L){W=u[L],J=W.label;const At=o.setContext(this.getContext(L));R=this.getPixelForTick(L)+o.labelOffset,M=this._resolveTickFontOptions(L),P=M.lineHeight,N=ye(J)?J.length:1;const K=N/2,at=At.color,dt=At.textStrokeColor,vt=At.textStrokeWidth;let Lt=I;c?($=R,I==="inner"&&(L===F-1?Lt=this.options.reverse?"left":"right":L===0?Lt=this.options.reverse?"right":"left":Lt="center"),r==="top"?d==="near"||A!==0?z=-N*P+P/2:d==="center"?z=-kt.highest.height/2-K*P+P:z=-kt.highest.height+P/2:d==="near"||A!==0?z=P/2:d==="center"?z=kt.highest.height/2-K*P:z=kt.highest.height-N*P,_&&(z*=-1),A!==0&&!At.showLabelBackdrop&&($+=P/2*Math.sin(A))):(st=R,z=(1-N)*P/2);let U;if(At.showLabelBackdrop){const tt=yn(At.backdropPadding),lt=kt.heights[L],ut=kt.widths[L];let _t=z-tt.top,Et=0-tt.left;switch(k){case"middle":_t-=lt/2;break;case"bottom":_t-=lt;break}switch(I){case"center":Et-=ut/2;break;case"right":Et-=ut;break;case"inner":L===F-1?Et-=ut:L>0&&(Et-=ut/2);break}U={left:Et,top:_t,width:ut+tt.width,height:lt+tt.height,color:At.backdropColor}}D.push({label:J,font:M,textOffset:z,options:{rotation:A,color:at,strokeColor:dt,strokeWidth:vt,textAlign:Lt,textBaseline:k,translation:[$,st],backdrop:U}})}return D}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-Ti(this.labelRotation))return t==="top"?"left":"right";let r="center";return e.align==="start"?r="left":e.align==="end"?r="right":e.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:r,padding:o}}=this.options,c=this._getLabelSizes(),u=t+o,f=c.widest.width;let d,p;return e==="left"?r?(p=this.right+o,i==="near"?d="left":i==="center"?(d="center",p+=f/2):(d="right",p+=f)):(p=this.right-u,i==="near"?d="right":i==="center"?(d="center",p-=f/2):(d="left",p=this.left)):e==="right"?r?(p=this.left+o,i==="near"?d="right":i==="center"?(d="center",p-=f/2):(d="left",p-=f)):(p=this.left+u,i==="near"?d="left":i==="center"?(d="center",p+=f/2):(d="right",p=this.right)):d="right",{textAlign:d,x:p}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:r,width:o,height:c}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,r,o,c),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const r=this.ticks.findIndex(o=>o.value===t);return r>=0?e.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let o,c;const u=(f,d,p)=>{!p.width||!p.color||(i.save(),i.lineWidth=p.width,i.strokeStyle=p.color,i.setLineDash(p.borderDash||[]),i.lineDashOffset=p.borderDashOffset,i.beginPath(),i.moveTo(f.x,f.y),i.lineTo(d.x,d.y),i.stroke(),i.restore())};if(e.display)for(o=0,c=r.length;o<c;++o){const f=r[o];e.drawOnChartArea&&u({x:f.x1,y:f.y1},{x:f.x2,y:f.y2},f),e.drawTicks&&u({x:f.tx1,y:f.ty1},{x:f.tx2,y:f.ty2},{color:f.tickColor,width:f.tickWidth,borderDash:f.tickBorderDash,borderDashOffset:f.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:r}}=this,o=i.setContext(this.getContext()),c=i.display?o.width:0;if(!c)return;const u=r.setContext(this.getContext(0)).lineWidth,f=this._borderValue;let d,p,_,b;this.isHorizontal()?(d=Ia(t,this.left,c)-c/2,p=Ia(t,this.right,u)+u/2,_=b=f):(_=Ia(t,this.top,c)-c/2,b=Ia(t,this.bottom,u)+u/2,d=p=f),e.save(),e.lineWidth=o.width,e.strokeStyle=o.color,e.beginPath(),e.moveTo(d,_),e.lineTo(p,b),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&Gd(i,r);const o=this.getLabelItems(t);for(const c of o){const u=c.options,f=c.font,d=c.label,p=c.textOffset;Xa(i,d,0,p,f,u)}r&&Yd(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:r}}=this;if(!i.display)return;const o=Ye(i.font),c=yn(i.padding),u=i.align;let f=o.lineHeight/2;e==="bottom"||e==="center"||Ht(e)?(f+=c.bottom,ye(i.text)&&(f+=o.lineHeight*(i.text.length-1))):f+=c.top;const{titleX:d,titleY:p,maxWidth:_,rotation:b}=t4(this,f,e,u);Xa(t,i.text,0,0,o,{color:i.color,maxWidth:_,rotation:b,textAlign:ZL(u,e,r),textBaseline:"middle",translation:[d,p]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=Ct(t.grid&&t.grid.z,-1),r=Ct(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Za.prototype.draw?[{z:e,draw:o=>{this.draw(o)}}]:[{z:i,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:e,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let o,c;for(o=0,c=e.length;o<c;++o){const u=e[o];u[i]===this.id&&(!t||u.type===t)&&r.push(u)}return r}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return Ye(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Sf{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;i4(e)&&(i=this.register(e));const r=this.items,o=t.id,c=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+t);return o in r||(r[o]=t,e4(t,c,i),this.override&&_e.override(t.id,t.overrides)),c}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,r=this.scope;i in e&&delete e[i],r&&i in _e[r]&&(delete _e[r][i],this.override&&delete Wa[i])}}function e4(n,t,e){const i=uu(Object.create(null),[e?_e.get(e):{},_e.get(t),n.defaults]);_e.set(t,i),n.defaultRoutes&&n4(t,n.defaultRoutes),n.descriptors&&_e.describe(t,n.descriptors)}function n4(n,t){Object.keys(t).forEach(e=>{const i=e.split("."),r=i.pop(),o=[n].concat(i).join("."),c=t[e].split("."),u=c.pop(),f=c.join(".");_e.route(o,r,f,u)})}function i4(n){return"id"in n&&"defaults"in n}class s4{constructor(){this.controllers=new Sf(xi,"datasets",!0),this.elements=new Sf(wi,"elements"),this.plugins=new Sf(Object,"plugins"),this.scales=new Sf(Za,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(r=>{const o=i||this._getRegistryForType(r);i||o.isForType(r)||o===this.plugins&&r.id?this._exec(t,o,r):ne(r,c=>{const u=i||this._getRegistryForType(c);this._exec(t,u,c)})})}_exec(t,e,i){const r=b_(t);le(i["before"+r],[],i),e[t](i),le(i["after"+r],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const r=e.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return r}}var Qi=new s4;class r4{constructor(){this._init=void 0}notify(t,e,i,r){if(e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const o=r?this._descriptors(t).filter(r):this._descriptors(t),c=this._notify(o,t,e,i);return e==="afterDestroy"&&(this._notify(o,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),c}_notify(t,e,i,r){r=r||{};for(const o of t){const c=o.plugin,u=c[i],f=[e,r,o.options];if(le(u,f,c)===!1&&r.cancelable)return!1}return!0}invalidate(){Vt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,r=Ct(i.options&&i.options.plugins,{}),o=a4(i);return r===!1&&!e?[]:l4(t,o,r,e)}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,r=(o,c)=>o.filter(u=>!c.some(f=>u.plugin.id===f.plugin.id));this._notify(r(e,i),t,"stop"),this._notify(r(i,e),t,"start")}}function a4(n){const t={},e=[],i=Object.keys(Qi.plugins.items);for(let o=0;o<i.length;o++)e.push(Qi.getPlugin(i[o]));const r=n.plugins||[];for(let o=0;o<r.length;o++){const c=r[o];e.indexOf(c)===-1&&(e.push(c),t[c.id]=!0)}return{plugins:e,localIds:t}}function o4(n,t){return!t&&n===!1?null:n===!0?{}:n}function l4(n,{plugins:t,localIds:e},i,r){const o=[],c=n.getContext();for(const u of t){const f=u.id,d=o4(i[f],r);d!==null&&o.push({plugin:u,options:c4(n.config,{plugin:u,local:e[f]},d,c)})}return o}function c4(n,{plugin:t,local:e},i,r){const o=n.pluginScopeKeys(t),c=n.getOptionScopes(i,o);return e&&t.defaults&&c.push(t.defaults),n.createResolver(c,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function cy(n,t){const e=_e.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function u4(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function h4(n,t){return n===t?"_index_":"_value_"}function CS(n){if(n==="x"||n==="y"||n==="r")return n}function f4(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function uy(n,...t){if(CS(n))return n;for(const e of t){const i=e.axis||f4(e.position)||n.length>1&&CS(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function IS(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function d4(n,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(e.length)return IS(n,"x",e[0])||IS(n,"y",e[0])}return{}}function g4(n,t){const e=Wa[n.type]||{scales:{}},i=t.scales||{},r=cy(n.type,t),o=Object.create(null);return Object.keys(i).forEach(c=>{const u=i[c];if(!Ht(u))return console.error(`Invalid scale configuration for scale: ${c}`);if(u._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${c}`);const f=uy(c,u,d4(c,n),_e.scales[u.type]),d=h4(f,r),p=e.scales||{};o[c]=Xc(Object.create(null),[{axis:f},u,p[f],p[d]])}),n.data.datasets.forEach(c=>{const u=c.type||n.type,f=c.indexAxis||cy(u,t),p=(Wa[u]||{}).scales||{};Object.keys(p).forEach(_=>{const b=u4(_,f),S=c[b+"AxisID"]||b;o[S]=o[S]||Object.create(null),Xc(o[S],[{axis:b},i[S],p[_]])})}),Object.keys(o).forEach(c=>{const u=o[c];Xc(u,[_e.scales[u.type],_e.scale])}),o}function _w(n){const t=n.options||(n.options={});t.plugins=Ct(t.plugins,{}),t.scales=g4(n,t)}function bw(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function m4(n){return n=n||{},n.data=bw(n.data),_w(n),n}const DS=new Map,vw=new Set;function xf(n,t){let e=DS.get(n);return e||(e=t(),DS.set(n,e),vw.add(e)),e}const Dc=(n,t,e)=>{const i=Hr(t,e);i!==void 0&&n.add(i)};class p4{constructor(t){this._config=m4(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=bw(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),_w(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return xf(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return xf(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return xf(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,i=this.type;return xf(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let r=i.get(t);return(!r||e)&&(r=new Map,i.set(t,r)),r}getOptionScopes(t,e,i){const{options:r,type:o}=this,c=this._cachedScopes(t,i),u=c.get(e);if(u)return u;const f=new Set;e.forEach(p=>{t&&(f.add(t),p.forEach(_=>Dc(f,t,_))),p.forEach(_=>Dc(f,r,_)),p.forEach(_=>Dc(f,Wa[o]||{},_)),p.forEach(_=>Dc(f,_e,_)),p.forEach(_=>Dc(f,ay,_))});const d=Array.from(f);return d.length===0&&d.push(Object.create(null)),vw.has(e)&&c.set(e,d),d}chartOptionScopes(){const{options:t,type:e}=this;return[t,Wa[e]||{},_e.datasets[e]||{},{type:e},_e,ay]}resolveNamedOptions(t,e,i,r=[""]){const o={$shared:!0},{resolver:c,subPrefixes:u}=MS(this._resolverCache,t,r);let f=c;if(_4(c,e)){o.$shared=!1,i=qr(i)?i():i;const d=this.createResolver(t,i,u);f=ul(c,i,d)}for(const d of e)o[d]=f[d];return o}createResolver(t,e,i=[""],r){const{resolver:o}=MS(this._resolverCache,t,i);return Ht(e)?ul(o,e,void 0,r):o}}function MS(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));const r=e.join();let o=i.get(r);return o||(o={resolver:A_(t,e),subPrefixes:e.filter(u=>!u.toLowerCase().includes("hover"))},i.set(r,o)),o}const y4=n=>Ht(n)&&Object.getOwnPropertyNames(n).some(t=>qr(n[t]));function _4(n,t){const{isScriptable:e,isIndexable:i}=J1(n);for(const r of t){const o=e(r),c=i(r),u=(c||o)&&n[r];if(o&&(qr(u)||y4(u))||c&&ye(u))return!0}return!1}var b4="4.5.1";const v4=["top","bottom","left","right","chartArea"];function OS(n,t){return n==="top"||n==="bottom"||v4.indexOf(n)===-1&&t==="x"}function kS(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function NS(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),le(e&&e.onComplete,[n],t)}function T4(n){const t=n.chart,e=t.options.animation;le(e&&e.onProgress,[n],t)}function Tw(n){return C_()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const qf={},PS=n=>{const t=Tw(n);return Object.values(qf).filter(e=>e.canvas===t).pop()};function E4(n,t,e){const i=Object.keys(n);for(const r of i){const o=+r;if(o>=t){const c=n[r];delete n[r],(e>0||o>t)&&(n[o+e]=c)}}}function S4(n,t,e,i){return!e||n.type==="mouseout"?null:i?t:n}class bi{static register(...t){Qi.add(...t),VS()}static unregister(...t){Qi.remove(...t),VS()}constructor(t,e){const i=this.config=new p4(e),r=Tw(t),o=PS(r);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const c=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||BL(r)),this.platform.updateConfig(i);const u=this.platform.acquireContext(r,c.aspectRatio),f=u&&u.canvas,d=f&&f.height,p=f&&f.width;if(this.id=xP(),this.ctx=u,this.canvas=f,this.width=p,this.height=d,this._options=c,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new r4,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=BP(_=>this.update(_),c.resizeDelay||0),this._dataChanges=[],qf[this.id]=this,!u||!f){console.error("Failed to create chart: can't acquire context from the given item");return}As.listen(this,"complete",NS),As.listen(this,"progress",T4),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:r,_aspectRatio:o}=this;return Vt(t)?e&&o?o:r?i/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Qi}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():sS(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return eS(this.canvas,this.ctx),this}stop(){return As.stop(this),this}resize(t,e){As.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,r=this.canvas,o=i.maintainAspectRatio&&this.aspectRatio,c=this.platform.getMaximumSize(r,t,e,o),u=i.devicePixelRatio||this.platform.getDevicePixelRatio(),f=this.width?"resize":"attach";this.width=c.width,this.height=c.height,this._aspectRatio=this.aspectRatio,sS(this,u,!0)&&(this.notifyPlugins("resize",{size:c}),le(i.onResize,[this,c],this),this.attached&&this._doResize(f)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};ne(e,(i,r)=>{i.id=r})}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,r=Object.keys(i).reduce((c,u)=>(c[u]=!1,c),{});let o=[];e&&(o=o.concat(Object.keys(e).map(c=>{const u=e[c],f=uy(c,u),d=f==="r",p=f==="x";return{options:u,dposition:d?"chartArea":p?"bottom":"left",dtype:d?"radialLinear":p?"category":"linear"}}))),ne(o,c=>{const u=c.options,f=u.id,d=uy(f,u),p=Ct(u.type,c.dtype);(u.position===void 0||OS(u.position,d)!==OS(c.dposition))&&(u.position=c.dposition),r[f]=!0;let _=null;if(f in i&&i[f].type===p)_=i[f];else{const b=Qi.getScale(p);_=new b({id:f,type:p,ctx:this.ctx,chart:this}),i[_.id]=_}_.init(u,t)}),ne(r,(c,u)=>{c||delete i[u]}),ne(i,c=>{mn.configure(this,c,c.options),mn.addBox(this,c)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((r,o)=>r.index-o.index),i>e){for(let r=e;r<i;++r)this._destroyDatasetMeta(r);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(kS("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((i,r)=>{e.filter(o=>o===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=e.length;i<r;i++){const o=e[i];let c=this.getDatasetMeta(i);const u=o.type||this.config.type;if(c.type&&c.type!==u&&(this._destroyDatasetMeta(i),c=this.getDatasetMeta(i)),c.type=u,c.indexAxis=o.indexAxis||cy(u,this.options),c.order=o.order||0,c.index=i,c.label=""+o.label,c.visible=this.isDatasetVisible(i),c.controller)c.controller.updateIndex(i),c.controller.linkScales();else{const f=Qi.getController(u),{datasetElementType:d,dataElementType:p}=_e.datasets[u];Object.assign(f,{dataElementType:Qi.getElement(p),datasetElementType:d&&Qi.getElement(d)}),c.controller=new f(this,i),t.push(c.controller)}}return this._updateMetasets(),t}_resetElements(){ne(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let c=0;for(let d=0,p=this.data.datasets.length;d<p;d++){const{controller:_}=this.getDatasetMeta(d),b=!r&&o.indexOf(_)===-1;_.buildOrUpdateElements(b),c=Math.max(+_.getMaxOverflow(),c)}c=this._minPadding=i.layout.autoPadding?c:0,this._updateLayout(c),r||ne(o,d=>{d.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(kS("z","_idx"));const{_active:u,_lastEvent:f}=this;f?this._eventHandler(f,!0):u.length&&this._updateHoverStyles(u,u,!0),this.render()}_updateScales(){ne(this.scales,t=>{mn.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!YE(e,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:o}of e){const c=i==="_removeElements"?-o:o;E4(t,r,c)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=o=>new Set(t.filter(c=>c[0]===o).map((c,u)=>u+","+c.splice(1).join(","))),r=i(0);for(let o=1;o<e;o++)if(!YE(r,i(o)))return;return Array.from(r).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;mn.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],ne(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,o)=>{r._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,qr(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),r={meta:i,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(e),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(As.has(this)?this.attached&&!As.running(this)&&As.start(this):(this.draw(),NS({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let r,o;for(r=0,o=e.length;r<o;++r){const c=e[r];(!t||c.visible)&&i.push(c)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i={meta:t,index:t.index,cancelable:!0},r=cw(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(r&&Gd(e,r),t.controller.draw(),r&&Yd(e),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return ks(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,r){const o=vL.modes[e];return typeof o=="function"?o(this,t,i,r):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let r=i.filter(o=>o&&o._dataset===e).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=Qr(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!e.hidden}setDatasetVisibility(t,e){const i=this.getDatasetMeta(t);i.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const r=i?"show":"hide",o=this.getDatasetMeta(t),c=o.controller._resolveAnimations(void 0,r);hu(e)?(o.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),c.update(o,{visible:i}),this.update(u=>u.datasetIndex===t?r:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),As.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),eS(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete qf[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(o,c)=>{e.addEventListener(this,o,c),t[o]=c},r=(o,c,u)=>{o.offsetX=c,o.offsetY=u,this._eventHandler(o)};ne(this.options.events,o=>i(o,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(f,d)=>{e.addEventListener(this,f,d),t[f]=d},r=(f,d)=>{t[f]&&(e.removeEventListener(this,f,d),delete t[f])},o=(f,d)=>{this.canvas&&this.resize(f,d)};let c;const u=()=>{r("attach",u),this.attached=!0,this.resize(),i("resize",o),i("detach",c)};c=()=>{this.attached=!1,r("resize",o),this._stop(),this._resize(0,0),i("attach",u)},e.isAttached(this.canvas)?u():c()}unbindEvents(){ne(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},ne(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const r=i?"set":"remove";let o,c,u,f;for(e==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+r+"DatasetHoverStyle"]()),u=0,f=t.length;u<f;++u){c=t[u];const d=c&&this.getDatasetMeta(c.datasetIndex).controller;d&&d[r+"HoverStyle"](c.element,c.datasetIndex,c.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map(({datasetIndex:o,index:c})=>{const u=this.getDatasetMeta(o);if(!u)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:u.data[c],index:c}});!dd(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,i){const r=this.options.hover,o=(f,d)=>f.filter(p=>!d.some(_=>p.datasetIndex===_.datasetIndex&&p.index===_.index)),c=o(e,t),u=i?t:o(t,e);c.length&&this.updateHoverStyle(c,r.mode,!1),u.length&&r.mode&&this.updateHoverStyle(u,r.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},r=c=>(c.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const o=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(o||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:r=[],options:o}=this,c=e,u=this._getActiveElements(t,r,i,c),f=DP(t),d=S4(t,this._lastEvent,i,f);i&&(this._lastEvent=null,le(o.onHover,[t,u,this],this),f&&le(o.onClick,[t,u,this],this));const p=!dd(u,r);return(p||e)&&(this._active=u,this._updateHoverStyles(u,r,e)),this._lastEvent=d,p}_getActiveElements(t,e,i,r){if(t.type==="mouseout")return[];if(!i)return e;const o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,r)}}ct(bi,"defaults",_e),ct(bi,"instances",qf),ct(bi,"overrides",Wa),ct(bi,"registry",Qi),ct(bi,"version",b4),ct(bi,"getChart",PS);function VS(){return ne(bi.instances,n=>n._plugins.invalidate())}function x4(n,t,e){const{startAngle:i,x:r,y:o,outerRadius:c,innerRadius:u,options:f}=t,{borderWidth:d,borderJoinStyle:p}=f,_=Math.min(d/c,dn(i-e));if(n.beginPath(),n.arc(r,o,c-d/2,i+_/2,e-_/2),u>0){const b=Math.min(d/u,dn(i-e));n.arc(r,o,u+d/2,e-b/2,i+b/2,!0)}else{const b=Math.min(d/2,c*dn(i-e));if(p==="round")n.arc(r,o,b,e-Xt/2,i+Xt/2,!0);else if(p==="bevel"){const S=2*b*b,w=-S*Math.cos(e+Xt/2)+r,A=-S*Math.sin(e+Xt/2)+o,D=S*Math.cos(i+Xt/2)+r,L=S*Math.sin(i+Xt/2)+o;n.lineTo(w,A),n.lineTo(D,L)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function A4(n,t,e){const{startAngle:i,pixelMargin:r,x:o,y:c,outerRadius:u,innerRadius:f}=t;let d=r/u;n.beginPath(),n.arc(o,c,u,i-d,e+d),f>r?(d=r/f,n.arc(o,c,f,e+d,i-d,!0)):n.arc(o,c,r,e+Ce,i-Ce),n.closePath(),n.clip()}function w4(n){return x_(n,["outerStart","outerEnd","innerStart","innerEnd"])}function R4(n,t,e,i){const r=w4(n.options.borderRadius),o=(e-t)/2,c=Math.min(o,i*t/2),u=f=>{const d=(e-Math.min(o,f))*i/2;return Je(f,0,Math.min(o,d))};return{outerStart:u(r.outerStart),outerEnd:u(r.outerEnd),innerStart:Je(r.innerStart,0,c),innerEnd:Je(r.innerEnd,0,c)}}function Yo(n,t,e,i){return{x:e+n*Math.cos(t),y:i+n*Math.sin(t)}}function bd(n,t,e,i,r,o){const{x:c,y:u,startAngle:f,pixelMargin:d,innerRadius:p}=t,_=Math.max(t.outerRadius+i+e-d,0),b=p>0?p+i+e+d:0;let S=0;const w=r-f;if(i){const At=p>0?p-i:0,K=_>0?_-i:0,at=(At+K)/2,dt=at!==0?w*at/(at+i):w;S=(w-dt)/2}const A=Math.max(.001,w*_-e/Xt)/_,D=(w-A)/2,L=f+D+S,F=r-D-S,{outerStart:W,outerEnd:J,innerStart:$,innerEnd:st}=R4(t,b,_,F-L),I=_-W,R=_-J,M=L+W/I,P=F-J/R,N=b+$,z=b+st,k=L+$/N,kt=F-st/z;if(n.beginPath(),o){const At=(M+P)/2;if(n.arc(c,u,_,M,At),n.arc(c,u,_,At,P),J>0){const vt=Yo(R,P,c,u);n.arc(vt.x,vt.y,J,P,F+Ce)}const K=Yo(z,F,c,u);if(n.lineTo(K.x,K.y),st>0){const vt=Yo(z,kt,c,u);n.arc(vt.x,vt.y,st,F+Ce,kt+Math.PI)}const at=(F-st/b+(L+$/b))/2;if(n.arc(c,u,b,F-st/b,at,!0),n.arc(c,u,b,at,L+$/b,!0),$>0){const vt=Yo(N,k,c,u);n.arc(vt.x,vt.y,$,k+Math.PI,L-Ce)}const dt=Yo(I,L,c,u);if(n.lineTo(dt.x,dt.y),W>0){const vt=Yo(I,M,c,u);n.arc(vt.x,vt.y,W,L-Ce,M)}}else{n.moveTo(c,u);const At=Math.cos(M)*_+c,K=Math.sin(M)*_+u;n.lineTo(At,K);const at=Math.cos(P)*_+c,dt=Math.sin(P)*_+u;n.lineTo(at,dt)}n.closePath()}function C4(n,t,e,i,r){const{fullCircles:o,startAngle:c,circumference:u}=t;let f=t.endAngle;if(o){bd(n,t,e,i,f,r);for(let d=0;d<o;++d)n.fill();isNaN(u)||(f=c+(u%de||de))}return bd(n,t,e,i,f,r),n.fill(),f}function I4(n,t,e,i,r){const{fullCircles:o,startAngle:c,circumference:u,options:f}=t,{borderWidth:d,borderJoinStyle:p,borderDash:_,borderDashOffset:b,borderRadius:S}=f,w=f.borderAlign==="inner";if(!d)return;n.setLineDash(_||[]),n.lineDashOffset=b,w?(n.lineWidth=d*2,n.lineJoin=p||"round"):(n.lineWidth=d,n.lineJoin=p||"bevel");let A=t.endAngle;if(o){bd(n,t,e,i,A,r);for(let D=0;D<o;++D)n.stroke();isNaN(u)||(A=c+(u%de||de))}w&&A4(n,t,A),f.selfJoin&&A-c>=Xt&&S===0&&p!=="miter"&&x4(n,t,A),o||(bd(n,t,e,i,A,r),n.stroke())}class jc extends wi{constructor(e){super();ct(this,"circumference");ct(this,"endAngle");ct(this,"fullCircles");ct(this,"innerRadius");ct(this,"outerRadius");ct(this,"pixelMargin");ct(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,i,r){const o=this.getProps(["x","y"],r),{angle:c,distance:u}=F1(o,{x:e,y:i}),{startAngle:f,endAngle:d,innerRadius:p,outerRadius:_,circumference:b}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),S=(this.options.spacing+this.options.borderWidth)/2,w=Ct(b,d-f),A=fu(c,f,d)&&f!==d,D=w>=de||A,L=Ms(u,p+S,_+S);return D&&L}getCenterPoint(e){const{x:i,y:r,startAngle:o,endAngle:c,innerRadius:u,outerRadius:f}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:d,spacing:p}=this.options,_=(o+c)/2,b=(u+f+p+d)/2;return{x:i+Math.cos(_)*b,y:r+Math.sin(_)*b}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:i,circumference:r}=this,o=(i.offset||0)/4,c=(i.spacing||0)/2,u=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=r>de?Math.floor(r/de):0,r===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const f=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(f)*o,Math.sin(f)*o);const d=1-Math.sin(Math.min(Xt,r||0)),p=o*d;e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,C4(e,this,p,c,u),I4(e,this,p,c,u),e.restore()}}ct(jc,"id","arc"),ct(jc,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),ct(jc,"defaultRoutes",{backgroundColor:"backgroundColor"}),ct(jc,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"});function Ew(n,t,e=t){n.lineCap=Ct(e.borderCapStyle,t.borderCapStyle),n.setLineDash(Ct(e.borderDash,t.borderDash)),n.lineDashOffset=Ct(e.borderDashOffset,t.borderDashOffset),n.lineJoin=Ct(e.borderJoinStyle,t.borderJoinStyle),n.lineWidth=Ct(e.borderWidth,t.borderWidth),n.strokeStyle=Ct(e.borderColor,t.borderColor)}function D4(n,t,e){n.lineTo(e.x,e.y)}function M4(n){return n.stepped?ZP:n.tension||n.cubicInterpolationMode==="monotone"?tV:D4}function Sw(n,t,e={}){const i=n.length,{start:r=0,end:o=i-1}=e,{start:c,end:u}=t,f=Math.max(r,c),d=Math.min(o,u),p=r<c&&o<c||r>u&&o>u;return{count:i,start:f,loop:t.loop,ilen:d<f&&!p?i+d-f:d-f}}function O4(n,t,e,i){const{points:r,options:o}=t,{count:c,start:u,loop:f,ilen:d}=Sw(r,e,i),p=M4(o);let{move:_=!0,reverse:b}=i||{},S,w,A;for(S=0;S<=d;++S)w=r[(u+(b?d-S:S))%c],!w.skip&&(_?(n.moveTo(w.x,w.y),_=!1):p(n,A,w,b,o.stepped),A=w);return f&&(w=r[(u+(b?d:0))%c],p(n,A,w,b,o.stepped)),!!f}function k4(n,t,e,i){const r=t.points,{count:o,start:c,ilen:u}=Sw(r,e,i),{move:f=!0,reverse:d}=i||{};let p=0,_=0,b,S,w,A,D,L;const F=J=>(c+(d?u-J:J))%o,W=()=>{A!==D&&(n.lineTo(p,D),n.lineTo(p,A),n.lineTo(p,L))};for(f&&(S=r[F(0)],n.moveTo(S.x,S.y)),b=0;b<=u;++b){if(S=r[F(b)],S.skip)continue;const J=S.x,$=S.y,st=J|0;st===w?($<A?A=$:$>D&&(D=$),p=(_*p+J)/++_):(W(),n.lineTo(J,$),w=st,_=0,A=D=$),L=$}W()}function hy(n){const t=n.options,e=t.borderDash&&t.borderDash.length;return!n._decimated&&!n._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?k4:O4}function N4(n){return n.stepped?OV:n.tension||n.cubicInterpolationMode==="monotone"?kV:Na}function P4(n,t,e,i){let r=t._path;r||(r=t._path=new Path2D,t.path(r,e,i)&&r.closePath()),Ew(n,t.options),n.stroke(r)}function V4(n,t,e,i){const{segments:r,options:o}=t,c=hy(t);for(const u of r)Ew(n,o,u.style),n.beginPath(),c(n,t,u,{start:e,end:e+i-1})&&n.closePath(),n.stroke()}const L4=typeof Path2D=="function";function z4(n,t,e,i){L4&&!t.options.segment?P4(n,t,e,i):V4(n,t,e,i)}class Rr extends wi{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;xV(this._points,i,t,r,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=UV(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,i=t.length;return i&&e[t[i-1].end]}interpolate(t,e){const i=this.options,r=t[e],o=this.points,c=lw(this,{property:e,start:r,end:r});if(!c.length)return;const u=[],f=N4(i);let d,p;for(d=0,p=c.length;d<p;++d){const{start:_,end:b}=c[d],S=o[_],w=o[b];if(S===w){u.push(S);continue}const A=Math.abs((r-S[e])/(w[e]-S[e])),D=f(S,w,A,i.stepped);D[e]=t[e],u.push(D)}return u.length===1?u[0]:u}pathSegment(t,e,i){return hy(this)(t,this,e,i)}path(t,e,i){const r=this.segments,o=hy(this);let c=this._loop;e=e||0,i=i||this.points.length-e;for(const u of r)c&=o(t,this,u,{start:e,end:e+i-1});return!!c}draw(t,e,i,r){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),z4(t,this,i,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ct(Rr,"id","line"),ct(Rr,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ct(Rr,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ct(Rr,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function LS(n,t,e,i){const r=n.options,{[e]:o}=n.getProps([e],i);return Math.abs(t-o)<r.radius+r.hitRadius}class Gf extends wi{constructor(e){super();ct(this,"parsed");ct(this,"skip");ct(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,i,r){const o=this.options,{x:c,y:u}=this.getProps(["x","y"],r);return Math.pow(e-c,2)+Math.pow(i-u,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(e,i){return LS(this,e,"x",i)}inYRange(e,i){return LS(this,e,"y",i)}getCenterPoint(e){const{x:i,y:r}=this.getProps(["x","y"],e);return{x:i,y:r}}size(e){e=e||this.options||{};let i=e.radius||0;i=Math.max(i,i&&e.hoverRadius||0);const r=i&&e.borderWidth||0;return(i+r)*2}draw(e,i){const r=this.options;this.skip||r.radius<.1||!ks(this,i,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,oy(e,r,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}ct(Gf,"id","point"),ct(Gf,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ct(Gf,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function xw(n,t){const{x:e,y:i,base:r,width:o,height:c}=n.getProps(["x","y","base","width","height"],t);let u,f,d,p,_;return n.horizontal?(_=c/2,u=Math.min(e,r),f=Math.max(e,r),d=i-_,p=i+_):(_=o/2,u=e-_,f=e+_,d=Math.min(i,r),p=Math.max(i,r)),{left:u,top:d,right:f,bottom:p}}function Cr(n,t,e,i){return n?0:Je(t,e,i)}function U4(n,t,e){const i=n.options.borderWidth,r=n.borderSkipped,o=$1(i);return{t:Cr(r.top,o.top,0,e),r:Cr(r.right,o.right,0,t),b:Cr(r.bottom,o.bottom,0,e),l:Cr(r.left,o.left,0,t)}}function j4(n,t,e){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),r=n.options.borderRadius,o=ja(r),c=Math.min(t,e),u=n.borderSkipped,f=i||Ht(r);return{topLeft:Cr(!f||u.top||u.left,o.topLeft,0,c),topRight:Cr(!f||u.top||u.right,o.topRight,0,c),bottomLeft:Cr(!f||u.bottom||u.left,o.bottomLeft,0,c),bottomRight:Cr(!f||u.bottom||u.right,o.bottomRight,0,c)}}function B4(n){const t=xw(n),e=t.right-t.left,i=t.bottom-t.top,r=U4(n,e/2,i/2),o=j4(n,e/2,i/2);return{outer:{x:t.left,y:t.top,w:e,h:i,radius:o},inner:{x:t.left+r.l,y:t.top+r.t,w:e-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,o.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(r.b,r.r))}}}}function Ap(n,t,e,i){const r=t===null,o=e===null,u=n&&!(r&&o)&&xw(n,i);return u&&(r||Ms(t,u.left,u.right))&&(o||Ms(e,u.top,u.bottom))}function F4(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function H4(n,t){n.rect(t.x,t.y,t.w,t.h)}function wp(n,t,e={}){const i=n.x!==e.x?-t:0,r=n.y!==e.y?-t:0,o=(n.x+n.w!==e.x+e.w?t:0)-i,c=(n.y+n.h!==e.y+e.h?t:0)-r;return{x:n.x+i,y:n.y+r,w:n.w+o,h:n.h+c,radius:n.radius}}class Yf extends wi{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:i,backgroundColor:r}}=this,{inner:o,outer:c}=B4(this),u=F4(c.radius)?du:H4;t.save(),(c.w!==o.w||c.h!==o.h)&&(t.beginPath(),u(t,wp(c,e,o)),t.clip(),u(t,wp(o,-e,c)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),u(t,wp(o,e)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,e,i){return Ap(this,t,e,i)}inXRange(t,e){return Ap(this,t,null,e)}inYRange(t,e){return Ap(this,null,t,e)}getCenterPoint(t){const{x:e,y:i,base:r,horizontal:o}=this.getProps(["x","y","base","horizontal"],t);return{x:o?(e+r)/2:e,y:o?i:(i+r)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}ct(Yf,"id","bar"),ct(Yf,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),ct(Yf,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var q4=Object.freeze({__proto__:null,ArcElement:jc,BarElement:Yf,LineElement:Rr,PointElement:Gf});const fy=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],zS=fy.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function Aw(n){return fy[n%fy.length]}function ww(n){return zS[n%zS.length]}function G4(n,t){return n.borderColor=Aw(t),n.backgroundColor=ww(t),++t}function Y4(n,t){return n.backgroundColor=n.data.map(()=>Aw(t++)),t}function K4(n,t){return n.backgroundColor=n.data.map(()=>ww(t++)),t}function W4(n){let t=0;return(e,i)=>{const r=n.getDatasetMeta(i).controller;r instanceof La?t=Y4(e,t):r instanceof Zc?t=K4(e,t):r&&(t=G4(e,t))}}function US(n){let t;for(t in n)if(n[t].borderColor||n[t].backgroundColor)return!0;return!1}function X4(n){return n&&(n.borderColor||n.backgroundColor)}function Q4(){return _e.borderColor!=="rgba(0,0,0,0.1)"||_e.backgroundColor!=="rgba(0,0,0,0.1)"}var $4={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,t,e){if(!e.enabled)return;const{data:{datasets:i},options:r}=n.config,{elements:o}=r,c=US(i)||X4(r)||o&&US(o)||Q4();if(!e.forceOverride&&c)return;const u=W4(n);i.forEach(u)}};function J4(n,t,e,i,r){const o=r.samples||i;if(o>=e)return n.slice(t,t+e);const c=[],u=(e-2)/(o-2);let f=0;const d=t+e-1;let p=t,_,b,S,w,A;for(c[f++]=n[p],_=0;_<o-2;_++){let D=0,L=0,F;const W=Math.floor((_+1)*u)+1+t,J=Math.min(Math.floor((_+2)*u)+1,e)+t,$=J-W;for(F=W;F<J;F++)D+=n[F].x,L+=n[F].y;D/=$,L/=$;const st=Math.floor(_*u)+1+t,I=Math.min(Math.floor((_+1)*u)+1,e)+t,{x:R,y:M}=n[p];for(S=w=-1,F=st;F<I;F++)w=.5*Math.abs((R-D)*(n[F].y-M)-(R-n[F].x)*(L-M)),w>S&&(S=w,b=n[F],A=F);c[f++]=b,p=A}return c[f++]=n[d],c}function Z4(n,t,e,i){let r=0,o=0,c,u,f,d,p,_,b,S,w,A;const D=[],L=t+e-1,F=n[t].x,J=n[L].x-F;for(c=t;c<t+e;++c){u=n[c],f=(u.x-F)/J*i,d=u.y;const $=f|0;if($===p)d<w?(w=d,_=c):d>A&&(A=d,b=c),r=(o*r+u.x)/++o;else{const st=c-1;if(!Vt(_)&&!Vt(b)){const I=Math.min(_,b),R=Math.max(_,b);I!==S&&I!==st&&D.push({...n[I],x:r}),R!==S&&R!==st&&D.push({...n[R],x:r})}c>0&&st!==S&&D.push(n[st]),D.push(u),p=$,o=0,w=A=d,_=b=S=c}}return D}function Rw(n){if(n._decimated){const t=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function jS(n){n.data.datasets.forEach(t=>{Rw(t)})}function t3(n,t){const e=t.length;let i=0,r;const{iScale:o}=n,{min:c,max:u,minDefined:f,maxDefined:d}=o.getUserBounds();return f&&(i=Je(Os(t,o.axis,c).lo,0,e-1)),d?r=Je(Os(t,o.axis,u).hi+1,i,e)-i:r=e-i,{start:i,count:r}}var e3={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,t,e)=>{if(!e.enabled){jS(n);return}const i=n.width;n.data.datasets.forEach((r,o)=>{const{_data:c,indexAxis:u}=r,f=n.getDatasetMeta(o),d=c||r.data;if(zc([u,n.options.indexAxis])==="y"||!f.controller.supportsDecimation)return;const p=n.scales[f.xAxisID];if(p.type!=="linear"&&p.type!=="time"||n.options.parsing)return;let{start:_,count:b}=t3(f,d);const S=e.threshold||4*i;if(b<=S){Rw(r);return}Vt(c)&&(r._data=d,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(A){this._data=A}}));let w;switch(e.algorithm){case"lttb":w=J4(d,_,b,i,e);break;case"min-max":w=Z4(d,_,b,i);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}r._decimated=w})},destroy(n){jS(n)}};function n3(n,t,e){const i=n.segments,r=n.points,o=t.points,c=[];for(const u of i){let{start:f,end:d}=u;d=Xd(f,d,r);const p=dy(e,r[f],r[d],u.loop);if(!t.segments){c.push({source:u,target:p,start:r[f],end:r[d]});continue}const _=lw(t,p);for(const b of _){const S=dy(e,o[b.start],o[b.end],b.loop),w=ow(u,r,S);for(const A of w)c.push({source:A,target:b,start:{[e]:BS(p,S,"start",Math.max)},end:{[e]:BS(p,S,"end",Math.min)}})}}return c}function dy(n,t,e,i){if(i)return;let r=t[n],o=e[n];return n==="angle"&&(r=dn(r),o=dn(o)),{property:n,start:r,end:o}}function i3(n,t){const{x:e=null,y:i=null}=n||{},r=t.points,o=[];return t.segments.forEach(({start:c,end:u})=>{u=Xd(c,u,r);const f=r[c],d=r[u];i!==null?(o.push({x:f.x,y:i}),o.push({x:d.x,y:i})):e!==null&&(o.push({x:e,y:f.y}),o.push({x:e,y:d.y}))}),o}function Xd(n,t,e){for(;t>n;t--){const i=e[t];if(!isNaN(i.x)&&!isNaN(i.y))break}return t}function BS(n,t,e,i){return n&&t?i(n[e],t[e]):n?n[e]:t?t[e]:0}function Cw(n,t){let e=[],i=!1;return ye(n)?(i=!0,e=n):e=i3(n,t),e.length?new Rr({points:e,options:{tension:0},_loop:i,_fullLoop:i}):null}function FS(n){return n&&n.fill!==!1}function s3(n,t,e){let r=n[t].fill;const o=[t];let c;if(!e)return r;for(;r!==!1&&o.indexOf(r)===-1;){if(!Ee(r))return r;if(c=n[r],!c)return!1;if(c.visible)return r;o.push(r),r=c.fill}return!1}function r3(n,t,e){const i=c3(n);if(Ht(i))return isNaN(i.value)?!1:i;let r=parseFloat(i);return Ee(r)&&Math.floor(r)===r?a3(i[0],t,r,e):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function a3(n,t,e,i){return(n==="-"||n==="+")&&(e=t+e),e===t||e<0||e>=i?!1:e}function o3(n,t){let e=null;return n==="start"?e=t.bottom:n==="end"?e=t.top:Ht(n)?e=t.getPixelForValue(n.value):t.getBasePixel&&(e=t.getBasePixel()),e}function l3(n,t,e){let i;return n==="start"?i=e:n==="end"?i=t.options.reverse?t.min:t.max:Ht(n)?i=n.value:i=t.getBaseValue(),i}function c3(n){const t=n.options,e=t.fill;let i=Ct(e&&e.target,e);return i===void 0&&(i=!!t.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function u3(n){const{scale:t,index:e,line:i}=n,r=[],o=i.segments,c=i.points,u=h3(t,e);u.push(Cw({x:null,y:t.bottom},i));for(let f=0;f<o.length;f++){const d=o[f];for(let p=d.start;p<=d.end;p++)f3(r,c[p],u)}return new Rr({points:r,options:{}})}function h3(n,t){const e=[],i=n.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){const o=i[r];if(o.index===t)break;o.hidden||e.unshift(o.dataset)}return e}function f3(n,t,e){const i=[];for(let r=0;r<e.length;r++){const o=e[r],{first:c,last:u,point:f}=d3(o,t,"x");if(!(!f||c&&u)){if(c)i.unshift(f);else if(n.push(f),!u)break}}n.push(...i)}function d3(n,t,e){const i=n.interpolate(t,e);if(!i)return{};const r=i[e],o=n.segments,c=n.points;let u=!1,f=!1;for(let d=0;d<o.length;d++){const p=o[d],_=c[p.start][e],b=c[p.end][e];if(Ms(r,_,b)){u=r===_,f=r===b;break}}return{first:u,last:f,point:i}}class Iw{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,i){const{x:r,y:o,radius:c}=this;return e=e||{start:0,end:de},t.arc(r,o,c,e.end,e.start,!0),!i.bounds}interpolate(t){const{x:e,y:i,radius:r}=this,o=t.angle;return{x:e+Math.cos(o)*r,y:i+Math.sin(o)*r,angle:o}}}function g3(n){const{chart:t,fill:e,line:i}=n;if(Ee(e))return m3(t,e);if(e==="stack")return u3(n);if(e==="shape")return!0;const r=p3(n);return r instanceof Iw?r:Cw(r,i)}function m3(n,t){const e=n.getDatasetMeta(t);return e&&n.isDatasetVisible(t)?e.dataset:null}function p3(n){return(n.scale||{}).getPointPositionForValue?_3(n):y3(n)}function y3(n){const{scale:t={},fill:e}=n,i=o3(e,t);if(Ee(i)){const r=t.isHorizontal();return{x:r?i:null,y:r?null:i}}return null}function _3(n){const{scale:t,fill:e}=n,i=t.options,r=t.getLabels().length,o=i.reverse?t.max:t.min,c=l3(e,t,o),u=[];if(i.grid.circular){const f=t.getPointPositionForValue(0,o);return new Iw({x:f.x,y:f.y,radius:t.getDistanceFromCenterForValue(c)})}for(let f=0;f<r;++f)u.push(t.getPointPositionForValue(f,c));return u}function Rp(n,t,e){const i=g3(t),{chart:r,index:o,line:c,scale:u,axis:f}=t,d=c.options,p=d.fill,_=d.backgroundColor,{above:b=_,below:S=_}=p||{},w=r.getDatasetMeta(o),A=cw(r,w);i&&c.points.length&&(Gd(n,e),b3(n,{line:c,target:i,above:b,below:S,area:e,scale:u,axis:f,clip:A}),Yd(n))}function b3(n,t){const{line:e,target:i,above:r,below:o,area:c,scale:u,clip:f}=t,d=e._loop?"angle":t.axis;n.save();let p=o;o!==r&&(d==="x"?(HS(n,i,c.top),Cp(n,{line:e,target:i,color:r,scale:u,property:d,clip:f}),n.restore(),n.save(),HS(n,i,c.bottom)):d==="y"&&(qS(n,i,c.left),Cp(n,{line:e,target:i,color:o,scale:u,property:d,clip:f}),n.restore(),n.save(),qS(n,i,c.right),p=r)),Cp(n,{line:e,target:i,color:p,scale:u,property:d,clip:f}),n.restore()}function HS(n,t,e){const{segments:i,points:r}=t;let o=!0,c=!1;n.beginPath();for(const u of i){const{start:f,end:d}=u,p=r[f],_=r[Xd(f,d,r)];o?(n.moveTo(p.x,p.y),o=!1):(n.lineTo(p.x,e),n.lineTo(p.x,p.y)),c=!!t.pathSegment(n,u,{move:c}),c?n.closePath():n.lineTo(_.x,e)}n.lineTo(t.first().x,e),n.closePath(),n.clip()}function qS(n,t,e){const{segments:i,points:r}=t;let o=!0,c=!1;n.beginPath();for(const u of i){const{start:f,end:d}=u,p=r[f],_=r[Xd(f,d,r)];o?(n.moveTo(p.x,p.y),o=!1):(n.lineTo(e,p.y),n.lineTo(p.x,p.y)),c=!!t.pathSegment(n,u,{move:c}),c?n.closePath():n.lineTo(e,_.y)}n.lineTo(e,t.first().y),n.closePath(),n.clip()}function Cp(n,t){const{line:e,target:i,property:r,color:o,scale:c,clip:u}=t,f=n3(e,i,r);for(const{source:d,target:p,start:_,end:b}of f){const{style:{backgroundColor:S=o}={}}=d,w=i!==!0;n.save(),n.fillStyle=S,v3(n,c,u,w&&dy(r,_,b)),n.beginPath();const A=!!e.pathSegment(n,d);let D;if(w){A?n.closePath():GS(n,i,b,r);const L=!!i.pathSegment(n,p,{move:A,reverse:!0});D=A&&L,D||GS(n,i,_,r)}n.closePath(),n.fill(D?"evenodd":"nonzero"),n.restore()}}function v3(n,t,e,i){const r=t.chart.chartArea,{property:o,start:c,end:u}=i||{};if(o==="x"||o==="y"){let f,d,p,_;o==="x"?(f=c,d=r.top,p=u,_=r.bottom):(f=r.left,d=c,p=r.right,_=u),n.beginPath(),e&&(f=Math.max(f,e.left),p=Math.min(p,e.right),d=Math.max(d,e.top),_=Math.min(_,e.bottom)),n.rect(f,d,p-f,_-d),n.clip()}}function GS(n,t,e,i){const r=t.interpolate(e,i);r&&n.lineTo(r.x,r.y)}var T3={id:"filler",afterDatasetsUpdate(n,t,e){const i=(n.data.datasets||[]).length,r=[];let o,c,u,f;for(c=0;c<i;++c)o=n.getDatasetMeta(c),u=o.dataset,f=null,u&&u.options&&u instanceof Rr&&(f={visible:n.isDatasetVisible(c),index:c,fill:r3(u,c,i),chart:n,axis:o.controller.options.indexAxis,scale:o.vScale,line:u}),o.$filler=f,r.push(f);for(c=0;c<i;++c)f=r[c],!(!f||f.fill===!1)&&(f.fill=s3(r,c,e.propagate))},beforeDraw(n,t,e){const i=e.drawTime==="beforeDraw",r=n.getSortedVisibleDatasetMetas(),o=n.chartArea;for(let c=r.length-1;c>=0;--c){const u=r[c].$filler;u&&(u.line.updateControlPoints(o,u.axis),i&&u.fill&&Rp(n.ctx,u,o))}},beforeDatasetsDraw(n,t,e){if(e.drawTime!=="beforeDatasetsDraw")return;const i=n.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){const o=i[r].$filler;FS(o)&&Rp(n.ctx,o,n.chartArea)}},beforeDatasetDraw(n,t,e){const i=t.meta.$filler;!FS(i)||e.drawTime!=="beforeDatasetDraw"||Rp(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const YS=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=n.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}},E3=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index;class KS extends wi{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=le(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,r)=>t.sort(i,r,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,r=Ye(i.font),o=r.size,c=this._computeTitleHeight(),{boxWidth:u,itemHeight:f}=YS(i,o);let d,p;e.font=r.string,this.isHorizontal()?(d=this.maxWidth,p=this._fitRows(c,o,u,f)+10):(p=this.maxHeight,d=this._fitCols(c,r,u,f)+10),this.width=Math.min(d,t.maxWidth||this.maxWidth),this.height=Math.min(p,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,r){const{ctx:o,maxWidth:c,options:{labels:{padding:u}}}=this,f=this.legendHitBoxes=[],d=this.lineWidths=[0],p=r+u;let _=t;o.textAlign="left",o.textBaseline="middle";let b=-1,S=-p;return this.legendItems.forEach((w,A)=>{const D=i+e/2+o.measureText(w.text).width;(A===0||d[d.length-1]+D+2*u>c)&&(_+=p,d[d.length-(A>0?0:1)]=0,S+=p,b++),f[A]={left:0,top:S,row:b,width:D,height:r},d[d.length-1]+=D+u}),_}_fitCols(t,e,i,r){const{ctx:o,maxHeight:c,options:{labels:{padding:u}}}=this,f=this.legendHitBoxes=[],d=this.columnSizes=[],p=c-t;let _=u,b=0,S=0,w=0,A=0;return this.legendItems.forEach((D,L)=>{const{itemWidth:F,itemHeight:W}=S3(i,e,o,D,r);L>0&&S+W+2*u>p&&(_+=b+u,d.push({width:b,height:S}),w+=b+u,A++,b=S=0),f[L]={left:w,top:S,col:A,width:F,height:W},b=Math.max(b,F),S+=W+u}),_+=b,d.push({width:b,height:S}),_}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:r},rtl:o}}=this,c=el(o,this.left,this.width);if(this.isHorizontal()){let u=0,f=hn(i,this.left+r,this.right-this.lineWidths[u]);for(const d of e)u!==d.row&&(u=d.row,f=hn(i,this.left+r,this.right-this.lineWidths[u])),d.top+=this.top+t+r,d.left=c.leftForLtr(c.x(f),d.width),f+=d.width+r}else{let u=0,f=hn(i,this.top+t+r,this.bottom-this.columnSizes[u].height);for(const d of e)d.col!==u&&(u=d.col,f=hn(i,this.top+t+r,this.bottom-this.columnSizes[u].height)),d.top=f,d.left+=this.left+r,d.left=c.leftForLtr(c.x(d.left),d.width),f+=d.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Gd(t,this),this._draw(),Yd(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:r}=this,{align:o,labels:c}=t,u=_e.color,f=el(t.rtl,this.left,this.width),d=Ye(c.font),{padding:p}=c,_=d.size,b=_/2;let S;this.drawTitle(),r.textAlign=f.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=d.string;const{boxWidth:w,boxHeight:A,itemHeight:D}=YS(c,_),L=function(st,I,R){if(isNaN(w)||w<=0||isNaN(A)||A<0)return;r.save();const M=Ct(R.lineWidth,1);if(r.fillStyle=Ct(R.fillStyle,u),r.lineCap=Ct(R.lineCap,"butt"),r.lineDashOffset=Ct(R.lineDashOffset,0),r.lineJoin=Ct(R.lineJoin,"miter"),r.lineWidth=M,r.strokeStyle=Ct(R.strokeStyle,u),r.setLineDash(Ct(R.lineDash,[])),c.usePointStyle){const P={radius:A*Math.SQRT2/2,pointStyle:R.pointStyle,rotation:R.rotation,borderWidth:M},N=f.xPlus(st,w/2),z=I+b;Q1(r,P,N,z,c.pointStyleWidth&&w)}else{const P=I+Math.max((_-A)/2,0),N=f.leftForLtr(st,w),z=ja(R.borderRadius);r.beginPath(),Object.values(z).some(k=>k!==0)?du(r,{x:N,y:P,w,h:A,radius:z}):r.rect(N,P,w,A),r.fill(),M!==0&&r.stroke()}r.restore()},F=function(st,I,R){Xa(r,R.text,st,I+D/2,d,{strikethrough:R.hidden,textAlign:f.textAlign(R.textAlign)})},W=this.isHorizontal(),J=this._computeTitleHeight();W?S={x:hn(o,this.left+p,this.right-i[0]),y:this.top+p+J,line:0}:S={x:this.left+p,y:hn(o,this.top+J+p,this.bottom-e[0].height),line:0},sw(this.ctx,t.textDirection);const $=D+p;this.legendItems.forEach((st,I)=>{r.strokeStyle=st.fontColor,r.fillStyle=st.fontColor;const R=r.measureText(st.text).width,M=f.textAlign(st.textAlign||(st.textAlign=c.textAlign)),P=w+b+R;let N=S.x,z=S.y;f.setWidth(this.width),W?I>0&&N+P+p>this.right&&(z=S.y+=$,S.line++,N=S.x=hn(o,this.left+p,this.right-i[S.line])):I>0&&z+$>this.bottom&&(N=S.x=N+e[S.line].width+p,S.line++,z=S.y=hn(o,this.top+J+p,this.bottom-e[S.line].height));const k=f.x(N);if(L(k,z,st),N=FP(M,N+w+b,W?N+P:this.right,t.rtl),F(f.x(N),z,st),W)S.x+=P+p;else if(typeof st.text!="string"){const kt=d.lineHeight;S.y+=Dw(st,kt)+p}else S.y+=$}),rw(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=Ye(e.font),r=yn(e.padding);if(!e.display)return;const o=el(t.rtl,this.left,this.width),c=this.ctx,u=e.position,f=i.size/2,d=r.top+f;let p,_=this.left,b=this.width;if(this.isHorizontal())b=Math.max(...this.lineWidths),p=this.top+d,_=hn(t.align,_,this.right-b);else{const w=this.columnSizes.reduce((A,D)=>Math.max(A,D.height),0);p=d+hn(t.align,this.top,this.bottom-w-t.labels.padding-this._computeTitleHeight())}const S=hn(u,_,_+b);c.textAlign=o.textAlign(E_(u)),c.textBaseline="middle",c.strokeStyle=e.color,c.fillStyle=e.color,c.font=i.string,Xa(c,e.text,S,p,i)}_computeTitleHeight(){const t=this.options.title,e=Ye(t.font),i=yn(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,r,o;if(Ms(t,this.left,this.right)&&Ms(e,this.top,this.bottom)){for(o=this.legendHitBoxes,i=0;i<o.length;++i)if(r=o[i],Ms(t,r.left,r.left+r.width)&&Ms(e,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(t){const e=this.options;if(!w3(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const r=this._hoveredItem,o=E3(r,i);r&&!o&&le(e.onLeave,[t,r,this],this),this._hoveredItem=i,i&&!o&&le(e.onHover,[t,i,this],this)}else i&&le(e.onClick,[t,i,this],this)}}function S3(n,t,e,i,r){const o=x3(i,n,t,e),c=A3(r,i,t.lineHeight);return{itemWidth:o,itemHeight:c}}function x3(n,t,e,i){let r=n.text;return r&&typeof r!="string"&&(r=r.reduce((o,c)=>o.length>c.length?o:c)),t+e.size/2+i.measureText(r).width}function A3(n,t,e){let i=n;return typeof t.text!="string"&&(i=Dw(t,e)),i}function Dw(n,t){const e=n.text?n.text.length:0;return t*e}function w3(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var R3={id:"legend",_element:KS,start(n,t,e){const i=n.legend=new KS({ctx:n.ctx,options:e,chart:n});mn.configure(n,i,e),mn.addBox(n,i)},stop(n){mn.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const i=n.legend;mn.configure(n,i,e),i.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const i=t.datasetIndex,r=e.chart;r.isDatasetVisible(i)?(r.hide(i),t.hidden=!0):(r.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:r,color:o,useBorderRadius:c,borderRadius:u}}=n.legend.options;return n._getSortedDatasetMetas().map(f=>{const d=f.controller.getStyle(e?0:void 0),p=yn(d.borderWidth);return{text:t[f.index].label,fillStyle:d.backgroundColor,fontColor:o,hidden:!f.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(p.width+p.height)/4,strokeStyle:d.borderColor,pointStyle:i||d.pointStyle,rotation:d.rotation,textAlign:r||d.textAlign,borderRadius:c&&(u||d.borderRadius),datasetIndex:f.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class M_ extends wi{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;const r=ye(i.text)?i.text.length:1;this._padding=yn(i.padding);const o=r*Ye(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:e,left:i,bottom:r,right:o,options:c}=this,u=c.align;let f=0,d,p,_;return this.isHorizontal()?(p=hn(u,i,o),_=e+t,d=o-i):(c.position==="left"?(p=i+t,_=hn(u,r,e),f=Xt*-.5):(p=o-t,_=hn(u,e,r),f=Xt*.5),d=r-e),{titleX:p,titleY:_,maxWidth:d,rotation:f}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const i=Ye(e.font),o=i.lineHeight/2+this._padding.top,{titleX:c,titleY:u,maxWidth:f,rotation:d}=this._drawArgs(o);Xa(t,e.text,0,0,i,{color:e.color,maxWidth:f,rotation:d,textAlign:E_(e.align),textBaseline:"middle",translation:[c,u]})}}function C3(n,t){const e=new M_({ctx:n.ctx,options:t,chart:n});mn.configure(n,e,t),mn.addBox(n,e),n.titleBlock=e}var I3={id:"title",_element:M_,start(n,t,e){C3(n,e)},stop(n){const t=n.titleBlock;mn.removeBox(n,t),delete n.titleBlock},beforeUpdate(n,t,e){const i=n.titleBlock;mn.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Af=new WeakMap;var D3={id:"subtitle",start(n,t,e){const i=new M_({ctx:n.ctx,options:e,chart:n});mn.configure(n,i,e),mn.addBox(n,i),Af.set(n,i)},stop(n){mn.removeBox(n,Af.get(n)),Af.delete(n)},beforeUpdate(n,t,e){const i=Af.get(n);mn.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Bc={average(n){if(!n.length)return!1;let t,e,i=new Set,r=0,o=0;for(t=0,e=n.length;t<e;++t){const u=n[t].element;if(u&&u.hasValue()){const f=u.tooltipPosition();i.add(f.x),r+=f.y,++o}}return o===0||i.size===0?!1:{x:[...i].reduce((u,f)=>u+f)/i.size,y:r/o}},nearest(n,t){if(!n.length)return!1;let e=t.x,i=t.y,r=Number.POSITIVE_INFINITY,o,c,u;for(o=0,c=n.length;o<c;++o){const f=n[o].element;if(f&&f.hasValue()){const d=f.getCenterPoint(),p=ry(t,d);p<r&&(r=p,u=f)}}if(u){const f=u.tooltipPosition();e=f.x,i=f.y}return{x:e,y:i}}};function Xi(n,t){return t&&(ye(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function ws(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function M3(n,t){const{element:e,datasetIndex:i,index:r}=t,o=n.getDatasetMeta(i).controller,{label:c,value:u}=o.getLabelAndValue(r);return{chart:n,label:c,parsed:o.getParsed(r),raw:n.data.datasets[i].data[r],formattedValue:u,dataset:o.getDataset(),dataIndex:r,datasetIndex:i,element:e}}function WS(n,t){const e=n.chart.ctx,{body:i,footer:r,title:o}=n,{boxWidth:c,boxHeight:u}=t,f=Ye(t.bodyFont),d=Ye(t.titleFont),p=Ye(t.footerFont),_=o.length,b=r.length,S=i.length,w=yn(t.padding);let A=w.height,D=0,L=i.reduce((J,$)=>J+$.before.length+$.lines.length+$.after.length,0);if(L+=n.beforeBody.length+n.afterBody.length,_&&(A+=_*d.lineHeight+(_-1)*t.titleSpacing+t.titleMarginBottom),L){const J=t.displayColors?Math.max(u,f.lineHeight):f.lineHeight;A+=S*J+(L-S)*f.lineHeight+(L-1)*t.bodySpacing}b&&(A+=t.footerMarginTop+b*p.lineHeight+(b-1)*t.footerSpacing);let F=0;const W=function(J){D=Math.max(D,e.measureText(J).width+F)};return e.save(),e.font=d.string,ne(n.title,W),e.font=f.string,ne(n.beforeBody.concat(n.afterBody),W),F=t.displayColors?c+2+t.boxPadding:0,ne(i,J=>{ne(J.before,W),ne(J.lines,W),ne(J.after,W)}),F=0,e.font=p.string,ne(n.footer,W),e.restore(),D+=w.width,{width:D,height:A}}function O3(n,t){const{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}function k3(n,t,e,i){const{x:r,width:o}=i,c=e.caretSize+e.caretPadding;if(n==="left"&&r+o+c>t.width||n==="right"&&r-o-c<0)return!0}function N3(n,t,e,i){const{x:r,width:o}=e,{width:c,chartArea:{left:u,right:f}}=n;let d="center";return i==="center"?d=r<=(u+f)/2?"left":"right":r<=o/2?d="left":r>=c-o/2&&(d="right"),k3(d,n,t,e)&&(d="center"),d}function XS(n,t,e){const i=e.yAlign||t.yAlign||O3(n,e);return{xAlign:e.xAlign||t.xAlign||N3(n,t,e,i),yAlign:i}}function P3(n,t){let{x:e,width:i}=n;return t==="right"?e-=i:t==="center"&&(e-=i/2),e}function V3(n,t,e){let{y:i,height:r}=n;return t==="top"?i+=e:t==="bottom"?i-=r+e:i-=r/2,i}function QS(n,t,e,i){const{caretSize:r,caretPadding:o,cornerRadius:c}=n,{xAlign:u,yAlign:f}=e,d=r+o,{topLeft:p,topRight:_,bottomLeft:b,bottomRight:S}=ja(c);let w=P3(t,u);const A=V3(t,f,d);return f==="center"?u==="left"?w+=d:u==="right"&&(w-=d):u==="left"?w-=Math.max(p,b)+r:u==="right"&&(w+=Math.max(_,S)+r),{x:Je(w,0,i.width-t.width),y:Je(A,0,i.height-t.height)}}function wf(n,t,e){const i=yn(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-i.right:n.x+i.left}function $S(n){return Xi([],ws(n))}function L3(n,t,e){return Qr(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function JS(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}const Mw={beforeTitle:xs,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:xs,beforeBody:xs,beforeLabel:xs,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return Vt(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:xs,afterBody:xs,beforeFooter:xs,footer:xs,afterFooter:xs};function Cn(n,t,e,i){const r=n[t].call(e,i);return typeof r>"u"?Mw[t].call(e,i):r}class gy extends wi{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&e.options.animation&&i.animations,o=new uw(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=L3(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:i}=e,r=Cn(i,"beforeTitle",this,t),o=Cn(i,"title",this,t),c=Cn(i,"afterTitle",this,t);let u=[];return u=Xi(u,ws(r)),u=Xi(u,ws(o)),u=Xi(u,ws(c)),u}getBeforeBody(t,e){return $S(Cn(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:i}=e,r=[];return ne(t,o=>{const c={before:[],lines:[],after:[]},u=JS(i,o);Xi(c.before,ws(Cn(u,"beforeLabel",this,o))),Xi(c.lines,Cn(u,"label",this,o)),Xi(c.after,ws(Cn(u,"afterLabel",this,o))),r.push(c)}),r}getAfterBody(t,e){return $S(Cn(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:i}=e,r=Cn(i,"beforeFooter",this,t),o=Cn(i,"footer",this,t),c=Cn(i,"afterFooter",this,t);let u=[];return u=Xi(u,ws(r)),u=Xi(u,ws(o)),u=Xi(u,ws(c)),u}_createItems(t){const e=this._active,i=this.chart.data,r=[],o=[],c=[];let u=[],f,d;for(f=0,d=e.length;f<d;++f)u.push(M3(this.chart,e[f]));return t.filter&&(u=u.filter((p,_,b)=>t.filter(p,_,b,i))),t.itemSort&&(u=u.sort((p,_)=>t.itemSort(p,_,i))),ne(u,p=>{const _=JS(t.callbacks,p);r.push(Cn(_,"labelColor",this,p)),o.push(Cn(_,"labelPointStyle",this,p)),c.push(Cn(_,"labelTextColor",this,p))}),this.labelColors=r,this.labelPointStyles=o,this.labelTextColors=c,this.dataPoints=u,u}update(t,e){const i=this.options.setContext(this.getContext()),r=this._active;let o,c=[];if(!r.length)this.opacity!==0&&(o={opacity:0});else{const u=Bc[i.position].call(this,r,this._eventPosition);c=this._createItems(i),this.title=this.getTitle(c,i),this.beforeBody=this.getBeforeBody(c,i),this.body=this.getBody(c,i),this.afterBody=this.getAfterBody(c,i),this.footer=this.getFooter(c,i);const f=this._size=WS(this,i),d=Object.assign({},u,f),p=XS(this.chart,i,d),_=QS(i,d,p,this.chart);this.xAlign=p.xAlign,this.yAlign=p.yAlign,o={opacity:1,x:_.x,y:_.y,width:f.width,height:f.height,caretX:u.x,caretY:u.y}}this._tooltipItems=c,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,r){const o=this.getCaretPosition(t,i,r);e.lineTo(o.x1,o.y1),e.lineTo(o.x2,o.y2),e.lineTo(o.x3,o.y3)}getCaretPosition(t,e,i){const{xAlign:r,yAlign:o}=this,{caretSize:c,cornerRadius:u}=i,{topLeft:f,topRight:d,bottomLeft:p,bottomRight:_}=ja(u),{x:b,y:S}=t,{width:w,height:A}=e;let D,L,F,W,J,$;return o==="center"?(J=S+A/2,r==="left"?(D=b,L=D-c,W=J+c,$=J-c):(D=b+w,L=D+c,W=J-c,$=J+c),F=D):(r==="left"?L=b+Math.max(f,p)+c:r==="right"?L=b+w-Math.max(d,_)-c:L=this.caretX,o==="top"?(W=S,J=W-c,D=L-c,F=L+c):(W=S+A,J=W+c,D=L+c,F=L-c),$=W),{x1:D,x2:L,x3:F,y1:W,y2:J,y3:$}}drawTitle(t,e,i){const r=this.title,o=r.length;let c,u,f;if(o){const d=el(i.rtl,this.x,this.width);for(t.x=wf(this,i.titleAlign,i),e.textAlign=d.textAlign(i.titleAlign),e.textBaseline="middle",c=Ye(i.titleFont),u=i.titleSpacing,e.fillStyle=i.titleColor,e.font=c.string,f=0;f<o;++f)e.fillText(r[f],d.x(t.x),t.y+c.lineHeight/2),t.y+=c.lineHeight+u,f+1===o&&(t.y+=i.titleMarginBottom-u)}}_drawColorBox(t,e,i,r,o){const c=this.labelColors[i],u=this.labelPointStyles[i],{boxHeight:f,boxWidth:d}=o,p=Ye(o.bodyFont),_=wf(this,"left",o),b=r.x(_),S=f<p.lineHeight?(p.lineHeight-f)/2:0,w=e.y+S;if(o.usePointStyle){const A={radius:Math.min(d,f)/2,pointStyle:u.pointStyle,rotation:u.rotation,borderWidth:1},D=r.leftForLtr(b,d)+d/2,L=w+f/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,oy(t,A,D,L),t.strokeStyle=c.borderColor,t.fillStyle=c.backgroundColor,oy(t,A,D,L)}else{t.lineWidth=Ht(c.borderWidth)?Math.max(...Object.values(c.borderWidth)):c.borderWidth||1,t.strokeStyle=c.borderColor,t.setLineDash(c.borderDash||[]),t.lineDashOffset=c.borderDashOffset||0;const A=r.leftForLtr(b,d),D=r.leftForLtr(r.xPlus(b,1),d-2),L=ja(c.borderRadius);Object.values(L).some(F=>F!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,du(t,{x:A,y:w,w:d,h:f,radius:L}),t.fill(),t.stroke(),t.fillStyle=c.backgroundColor,t.beginPath(),du(t,{x:D,y:w+1,w:d-2,h:f-2,radius:L}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(A,w,d,f),t.strokeRect(A,w,d,f),t.fillStyle=c.backgroundColor,t.fillRect(D,w+1,d-2,f-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:r}=this,{bodySpacing:o,bodyAlign:c,displayColors:u,boxHeight:f,boxWidth:d,boxPadding:p}=i,_=Ye(i.bodyFont);let b=_.lineHeight,S=0;const w=el(i.rtl,this.x,this.width),A=function(R){e.fillText(R,w.x(t.x+S),t.y+b/2),t.y+=b+o},D=w.textAlign(c);let L,F,W,J,$,st,I;for(e.textAlign=c,e.textBaseline="middle",e.font=_.string,t.x=wf(this,D,i),e.fillStyle=i.bodyColor,ne(this.beforeBody,A),S=u&&D!=="right"?c==="center"?d/2+p:d+2+p:0,J=0,st=r.length;J<st;++J){for(L=r[J],F=this.labelTextColors[J],e.fillStyle=F,ne(L.before,A),W=L.lines,u&&W.length&&(this._drawColorBox(e,t,J,w,i),b=Math.max(_.lineHeight,f)),$=0,I=W.length;$<I;++$)A(W[$]),b=_.lineHeight;ne(L.after,A)}S=0,b=_.lineHeight,ne(this.afterBody,A),t.y-=o}drawFooter(t,e,i){const r=this.footer,o=r.length;let c,u;if(o){const f=el(i.rtl,this.x,this.width);for(t.x=wf(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=f.textAlign(i.footerAlign),e.textBaseline="middle",c=Ye(i.footerFont),e.fillStyle=i.footerColor,e.font=c.string,u=0;u<o;++u)e.fillText(r[u],f.x(t.x),t.y+c.lineHeight/2),t.y+=c.lineHeight+i.footerSpacing}}drawBackground(t,e,i,r){const{xAlign:o,yAlign:c}=this,{x:u,y:f}=t,{width:d,height:p}=i,{topLeft:_,topRight:b,bottomLeft:S,bottomRight:w}=ja(r.cornerRadius);e.fillStyle=r.backgroundColor,e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.beginPath(),e.moveTo(u+_,f),c==="top"&&this.drawCaret(t,e,i,r),e.lineTo(u+d-b,f),e.quadraticCurveTo(u+d,f,u+d,f+b),c==="center"&&o==="right"&&this.drawCaret(t,e,i,r),e.lineTo(u+d,f+p-w),e.quadraticCurveTo(u+d,f+p,u+d-w,f+p),c==="bottom"&&this.drawCaret(t,e,i,r),e.lineTo(u+S,f+p),e.quadraticCurveTo(u,f+p,u,f+p-S),c==="center"&&o==="left"&&this.drawCaret(t,e,i,r),e.lineTo(u,f+_),e.quadraticCurveTo(u,f,u+_,f),e.closePath(),e.fill(),r.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,r=i&&i.x,o=i&&i.y;if(r||o){const c=Bc[t.position].call(this,this._active,this._eventPosition);if(!c)return;const u=this._size=WS(this,t),f=Object.assign({},c,this._size),d=XS(e,t,f),p=QS(t,f,d,e);(r._to!==p.x||o._to!==p.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=u.width,this.height=u.height,this.caretX=c.x,this.caretY=c.y,this._resolveAnimations().update(this,p))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const r={width:this.width,height:this.height},o={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const c=yn(e.padding),u=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&u&&(t.save(),t.globalAlpha=i,this.drawBackground(o,t,r,e),sw(t,e.textDirection),o.y+=c.top,this.drawTitle(o,t,e),this.drawBody(o,t,e),this.drawFooter(o,t,e),rw(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,r=t.map(({datasetIndex:u,index:f})=>{const d=this.chart.getDatasetMeta(u);if(!d)throw new Error("Cannot find a dataset at index "+u);return{datasetIndex:u,element:d.data[f],index:f}}),o=!dd(i,r),c=this._positionChanged(r,e);(o||c)&&(this._active=r,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,o=this._active||[],c=this._getActiveElements(t,o,e,i),u=this._positionChanged(c,t),f=e||!dd(c,o)||u;return f&&(this._active=c,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),f}_getActiveElements(t,e,i,r){const o=this.options;if(t.type==="mouseout")return[];if(!r)return e.filter(u=>this.chart.data.datasets[u.datasetIndex]&&this.chart.getDatasetMeta(u.datasetIndex).controller.getParsed(u.index)!==void 0);const c=this.chart.getElementsAtEventForMode(t,o.mode,o,i);return o.reverse&&c.reverse(),c}_positionChanged(t,e){const{caretX:i,caretY:r,options:o}=this,c=Bc[o.position].call(this,t,e);return c!==!1&&(i!==c.x||r!==c.y)}}ct(gy,"positioners",Bc);var z3={id:"tooltip",_element:gy,positioners:Bc,afterInit(n,t,e){e&&(n.tooltip=new gy({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){const e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Mw},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},U3=Object.freeze({__proto__:null,Colors:$4,Decimation:e3,Filler:T3,Legend:R3,SubTitle:D3,Title:I3,Tooltip:z3});const j3=(n,t,e,i)=>(typeof t=="string"?(e=n.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function B3(n,t,e,i){const r=n.indexOf(t);if(r===-1)return j3(n,t,e,i);const o=n.lastIndexOf(t);return r!==o?e:r}const F3=(n,t)=>n===null?null:Je(Math.round(n),0,t);function ZS(n){const t=this.getLabels();return n>=0&&n<t.length?t[n]:n}class my extends Za{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const i=this.getLabels();for(const{index:r,label:o}of e)i[r]===o&&i.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(Vt(t))return null;const i=this.getLabels();return e=isFinite(e)&&i[e]===t?e:B3(i,t,Ct(e,t),this._addedLabels),F3(e,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),e||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const t=this.min,e=this.max,i=this.options.offset,r=[];let o=this.getLabels();o=t===0&&e===o.length-1?o:o.slice(t,e+1),this._valueRange=Math.max(o.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let c=t;c<=e;c++)r.push({value:c});return r}getLabelForValue(t){return ZS.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}ct(my,"id","category"),ct(my,"defaults",{ticks:{callback:ZS}});function H3(n,t){const e=[],{bounds:r,step:o,min:c,max:u,precision:f,count:d,maxTicks:p,maxDigits:_,includeBounds:b}=n,S=o||1,w=p-1,{min:A,max:D}=t,L=!Vt(c),F=!Vt(u),W=!Vt(d),J=(D-A)/(_+1);let $=WE((D-A)/w/S)*S,st,I,R,M;if($<1e-14&&!L&&!F)return[{value:A},{value:D}];M=Math.ceil(D/$)-Math.floor(A/$),M>w&&($=WE(M*$/w/S)*S),Vt(f)||(st=Math.pow(10,f),$=Math.ceil($*st)/st),r==="ticks"?(I=Math.floor(A/$)*$,R=Math.ceil(D/$)*$):(I=A,R=D),L&&F&&o&&PP((u-c)/o,$/1e3)?(M=Math.round(Math.min((u-c)/$,p)),$=(u-c)/M,I=c,R=u):W?(I=L?c:I,R=F?u:R,M=d-1,$=(R-I)/M):(M=(R-I)/$,Qc(M,Math.round(M),$/1e3)?M=Math.round(M):M=Math.ceil(M));const P=Math.max(XE($),XE(I));st=Math.pow(10,Vt(f)?P:f),I=Math.round(I*st)/st,R=Math.round(R*st)/st;let N=0;for(L&&(b&&I!==c?(e.push({value:c}),I<c&&N++,Qc(Math.round((I+N*$)*st)/st,c,tx(c,J,n))&&N++):I<c&&N++);N<M;++N){const z=Math.round((I+N*$)*st)/st;if(F&&z>u)break;e.push({value:z})}return F&&b&&R!==u?e.length&&Qc(e[e.length-1].value,u,tx(u,J,n))?e[e.length-1].value=u:e.push({value:u}):(!F||R===u)&&e.push({value:R}),e}function tx(n,t,{horizontal:e,minRotation:i}){const r=Ti(i),o=(e?Math.sin(r):Math.cos(r))||.001,c=.75*t*(""+n).length;return Math.min(t/o,c)}class vd extends Za{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return Vt(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:r,max:o}=this;const c=f=>r=e?r:f,u=f=>o=i?o:f;if(t){const f=is(r),d=is(o);f<0&&d<0?u(0):f>0&&d>0&&c(0)}if(r===o){let f=o===0?1:Math.abs(o*.05);u(o+f),t||c(r-f)}this.min=r,this.max=o}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:i}=t,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),e=e||11),e&&(r=Math.min(e,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},o=this._range||this,c=H3(r,o);return t.bounds==="ticks"&&B1(c,this,"value"),t.reverse?(c.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),c}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const r=(i-e)/Math.max(t.length-1,1)/2;e-=r,i+=r}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return Ou(t,this.chart.options.locale,this.options.ticks.format)}}class py extends vd{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Ee(t)?t:0,this.max=Ee(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=Ti(this.options.ticks.minRotation),r=(t?Math.sin(i):Math.cos(i))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,o.lineHeight/r))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}ct(py,"id","linear"),ct(py,"defaults",{ticks:{callback:qd.formatters.numeric}});const mu=n=>Math.floor(Ar(n)),Ma=(n,t)=>Math.pow(10,mu(n)+t);function ex(n){return n/Math.pow(10,mu(n))===1}function nx(n,t,e){const i=Math.pow(10,e),r=Math.floor(n/i);return Math.ceil(t/i)-r}function q3(n,t){const e=t-n;let i=mu(e);for(;nx(n,t,i)>10;)i++;for(;nx(n,t,i)<10;)i--;return Math.min(i,mu(n))}function G3(n,{min:t,max:e}){t=Fn(n.min,t);const i=[],r=mu(t);let o=q3(t,e),c=o<0?Math.pow(10,Math.abs(o)):1;const u=Math.pow(10,o),f=r>o?Math.pow(10,r):0,d=Math.round((t-f)*c)/c,p=Math.floor((t-f)/u/10)*u*10;let _=Math.floor((d-p)/Math.pow(10,o)),b=Fn(n.min,Math.round((f+p+_*Math.pow(10,o))*c)/c);for(;b<e;)i.push({value:b,major:ex(b),significand:_}),_>=10?_=_<15?15:20:_++,_>=20&&(o++,_=2,c=o>=0?1:c),b=Math.round((f+p+_*Math.pow(10,o))*c)/c;const S=Fn(n.max,b);return i.push({value:S,major:ex(S),significand:_}),i}class yy extends Za{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const i=vd.prototype.parse.apply(this,[t,e]);if(i===0){this._zero=!0;return}return Ee(i)&&i>0?i:null}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Ee(t)?Math.max(0,t):null,this.max=Ee(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Ee(this._userMin)&&(this.min=t===Ma(this.min,0)?Ma(this.min,-1):Ma(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let i=this.min,r=this.max;const o=u=>i=t?i:u,c=u=>r=e?r:u;i===r&&(i<=0?(o(1),c(10)):(o(Ma(i,-1)),c(Ma(r,1)))),i<=0&&o(Ma(r,-1)),r<=0&&c(Ma(i,1)),this.min=i,this.max=r}buildTicks(){const t=this.options,e={min:this._userMin,max:this._userMax},i=G3(e,this);return t.bounds==="ticks"&&B1(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(t){return t===void 0?"0":Ou(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Ar(t),this._valueRange=Ar(this.max)-Ar(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Ar(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}ct(yy,"id","logarithmic"),ct(yy,"defaults",{ticks:{callback:qd.formatters.logarithmic,major:{enabled:!0}}});function _y(n){const t=n.ticks;if(t.display&&n.display){const e=yn(t.backdropPadding);return Ct(t.font&&t.font.size,_e.font.size)+e.height}return 0}function Y3(n,t,e){return e=ye(e)?e:[e],{w:JP(n,t.string,e),h:e.length*t.lineHeight}}function ix(n,t,e,i,r){return n===i||n===r?{start:t-e/2,end:t+e/2}:n<i||n>r?{start:t-e,end:t}:{start:t,end:t+e}}function K3(n){const t={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},e=Object.assign({},t),i=[],r=[],o=n._pointLabels.length,c=n.options.pointLabels,u=c.centerPointLabels?Xt/o:0;for(let f=0;f<o;f++){const d=c.setContext(n.getPointLabelContext(f));r[f]=d.padding;const p=n.getPointPosition(f,n.drawingArea+r[f],u),_=Ye(d.font),b=Y3(n.ctx,_,n._pointLabels[f]);i[f]=b;const S=dn(n.getIndexAngle(f)+u),w=Math.round(v_(S)),A=ix(w,p.x,b.w,0,180),D=ix(w,p.y,b.h,90,270);W3(e,t,S,A,D)}n.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),n._pointLabelItems=$3(n,i,r)}function W3(n,t,e,i,r){const o=Math.abs(Math.sin(e)),c=Math.abs(Math.cos(e));let u=0,f=0;i.start<t.l?(u=(t.l-i.start)/o,n.l=Math.min(n.l,t.l-u)):i.end>t.r&&(u=(i.end-t.r)/o,n.r=Math.max(n.r,t.r+u)),r.start<t.t?(f=(t.t-r.start)/c,n.t=Math.min(n.t,t.t-f)):r.end>t.b&&(f=(r.end-t.b)/c,n.b=Math.max(n.b,t.b+f))}function X3(n,t,e){const i=n.drawingArea,{extra:r,additionalAngle:o,padding:c,size:u}=e,f=n.getPointPosition(t,i+r+c,o),d=Math.round(v_(dn(f.angle+Ce))),p=t5(f.y,u.h,d),_=J3(d),b=Z3(f.x,u.w,_);return{visible:!0,x:f.x,y:p,textAlign:_,left:b,top:p,right:b+u.w,bottom:p+u.h}}function Q3(n,t){if(!t)return!0;const{left:e,top:i,right:r,bottom:o}=n;return!(ks({x:e,y:i},t)||ks({x:e,y:o},t)||ks({x:r,y:i},t)||ks({x:r,y:o},t))}function $3(n,t,e){const i=[],r=n._pointLabels.length,o=n.options,{centerPointLabels:c,display:u}=o.pointLabels,f={extra:_y(o)/2,additionalAngle:c?Xt/r:0};let d;for(let p=0;p<r;p++){f.padding=e[p],f.size=t[p];const _=X3(n,p,f);i.push(_),u==="auto"&&(_.visible=Q3(_,d),_.visible&&(d=_))}return i}function J3(n){return n===0||n===180?"center":n<180?"left":"right"}function Z3(n,t,e){return e==="right"?n-=t:e==="center"&&(n-=t/2),n}function t5(n,t,e){return e===90||e===270?n-=t/2:(e>270||e<90)&&(n-=t),n}function e5(n,t,e){const{left:i,top:r,right:o,bottom:c}=e,{backdropColor:u}=t;if(!Vt(u)){const f=ja(t.borderRadius),d=yn(t.backdropPadding);n.fillStyle=u;const p=i-d.left,_=r-d.top,b=o-i+d.width,S=c-r+d.height;Object.values(f).some(w=>w!==0)?(n.beginPath(),du(n,{x:p,y:_,w:b,h:S,radius:f}),n.fill()):n.fillRect(p,_,b,S)}}function n5(n,t){const{ctx:e,options:{pointLabels:i}}=n;for(let r=t-1;r>=0;r--){const o=n._pointLabelItems[r];if(!o.visible)continue;const c=i.setContext(n.getPointLabelContext(r));e5(e,c,o);const u=Ye(c.font),{x:f,y:d,textAlign:p}=o;Xa(e,n._pointLabels[r],f,d+u.lineHeight/2,u,{color:c.color,textAlign:p,textBaseline:"middle"})}}function Ow(n,t,e,i){const{ctx:r}=n;if(e)r.arc(n.xCenter,n.yCenter,t,0,de);else{let o=n.getPointPosition(0,t);r.moveTo(o.x,o.y);for(let c=1;c<i;c++)o=n.getPointPosition(c,t),r.lineTo(o.x,o.y)}}function i5(n,t,e,i,r){const o=n.ctx,c=t.circular,{color:u,lineWidth:f}=t;!c&&!i||!u||!f||e<0||(o.save(),o.strokeStyle=u,o.lineWidth=f,o.setLineDash(r.dash||[]),o.lineDashOffset=r.dashOffset,o.beginPath(),Ow(n,e,c,i),o.closePath(),o.stroke(),o.restore())}function s5(n,t,e){return Qr(n,{label:e,index:t,type:"pointLabel"})}class Fc extends vd{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=yn(_y(this.options)/2),e=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(e,i)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=Ee(t)&&!isNaN(t)?t:0,this.max=Ee(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/_y(this.options))}generateTickLabels(t){vd.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,i)=>{const r=le(this.options.pointLabels.callback,[e,i],this);return r||r===0?r:""}).filter((e,i)=>this.chart.getDataVisibility(i))}fit(){const t=this.options;t.display&&t.pointLabels.display?K3(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,i,r){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,i,r))}getIndexAngle(t){const e=de/(this._pointLabels.length||1),i=this.options.startAngle||0;return dn(t*e+Ti(i))}getDistanceFromCenterForValue(t){if(Vt(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(Vt(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const i=e[t];return s5(this.getContext(),t,i)}}getPointPosition(t,e,i=0){const r=this.getIndexAngle(t)-Ce+i;return{x:Math.cos(r)*e+this.xCenter,y:Math.sin(r)*e+this.yCenter,angle:r}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:i,right:r,bottom:o}=this._pointLabelItems[t];return{left:e,top:i,right:r,bottom:o}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const i=this.ctx;i.save(),i.beginPath(),Ow(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:i,grid:r,border:o}=e,c=this._pointLabels.length;let u,f,d;if(e.pointLabels.display&&n5(this,c),r.display&&this.ticks.forEach((p,_)=>{if(_!==0||_===0&&this.min<0){f=this.getDistanceFromCenterForValue(p.value);const b=this.getContext(_),S=r.setContext(b),w=o.setContext(b);i5(this,S,f,c,w)}}),i.display){for(t.save(),u=c-1;u>=0;u--){const p=i.setContext(this.getPointLabelContext(u)),{color:_,lineWidth:b}=p;!b||!_||(t.lineWidth=b,t.strokeStyle=_,t.setLineDash(p.borderDash),t.lineDashOffset=p.borderDashOffset,f=this.getDistanceFromCenterForValue(e.reverse?this.min:this.max),d=this.getPointPosition(u,f),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(d.x,d.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,i=e.ticks;if(!i.display)return;const r=this.getIndexAngle(0);let o,c;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(r),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((u,f)=>{if(f===0&&this.min>=0&&!e.reverse)return;const d=i.setContext(this.getContext(f)),p=Ye(d.font);if(o=this.getDistanceFromCenterForValue(this.ticks[f].value),d.showLabelBackdrop){t.font=p.string,c=t.measureText(u.label).width,t.fillStyle=d.backdropColor;const _=yn(d.backdropPadding);t.fillRect(-c/2-_.left,-o-p.size/2-_.top,c+_.width,p.size+_.height)}Xa(t,u.label,0,-o,p,{color:d.color,strokeColor:d.textStrokeColor,strokeWidth:d.textStrokeWidth})}),t.restore()}drawTitle(){}}ct(Fc,"id","radialLinear"),ct(Fc,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:qd.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}}),ct(Fc,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),ct(Fc,"descriptors",{angleLines:{_fallback:"grid"}});const Qd={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Mn=Object.keys(Qd);function sx(n,t){return n-t}function rx(n,t){if(Vt(t))return null;const e=n._adapter,{parser:i,round:r,isoWeekday:o}=n._parseOpts;let c=t;return typeof i=="function"&&(c=i(c)),Ee(c)||(c=typeof i=="string"?e.parse(c,i):e.parse(c)),c===null?null:(r&&(c=r==="week"&&(cl(o)||o===!0)?e.startOf(c,"isoWeek",o):e.startOf(c,r)),+c)}function ax(n,t,e,i){const r=Mn.length;for(let o=Mn.indexOf(n);o<r-1;++o){const c=Qd[Mn[o]],u=c.steps?c.steps:Number.MAX_SAFE_INTEGER;if(c.common&&Math.ceil((e-t)/(u*c.size))<=i)return Mn[o]}return Mn[r-1]}function r5(n,t,e,i,r){for(let o=Mn.length-1;o>=Mn.indexOf(e);o--){const c=Mn[o];if(Qd[c].common&&n._adapter.diff(r,i,c)>=t-1)return c}return Mn[e?Mn.indexOf(e):0]}function a5(n){for(let t=Mn.indexOf(n)+1,e=Mn.length;t<e;++t)if(Qd[Mn[t]].common)return Mn[t]}function ox(n,t,e){if(!e)n[t]=!0;else if(e.length){const{lo:i,hi:r}=T_(e,t),o=e[i]>=t?e[i]:e[r];n[o]=!0}}function o5(n,t,e,i){const r=n._adapter,o=+r.startOf(t[0].value,i),c=t[t.length-1].value;let u,f;for(u=o;u<=c;u=+r.add(u,1,i))f=e[u],f>=0&&(t[f].major=!0);return t}function lx(n,t,e){const i=[],r={},o=t.length;let c,u;for(c=0;c<o;++c)u=t[c],r[u]=c,i.push({value:u,major:!1});return o===0||!e?i:o5(n,i,r,e)}class pu extends Za{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const i=t.time||(t.time={}),r=this._adapter=new mL._date(t.adapters.date);r.init(e),Xc(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:rx(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:r,max:o,minDefined:c,maxDefined:u}=this.getUserBounds();function f(d){!c&&!isNaN(d.min)&&(r=Math.min(r,d.min)),!u&&!isNaN(d.max)&&(o=Math.max(o,d.max))}(!c||!u)&&(f(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&f(this.getMinMax(!1))),r=Ee(r)&&!isNaN(r)?r:+e.startOf(Date.now(),i),o=Ee(o)&&!isNaN(o)?o:+e.endOf(Date.now(),i)+1,this.min=Math.min(r,o-1),this.max=Math.max(r+1,o)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const o=this.min,c=this.max,u=UP(r,o,c);return this._unit=e.unit||(i.autoSkip?ax(e.minUnit,this.min,this.max,this._getLabelCapacity(o)):r5(this,u.length,e.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:a5(this._unit),this.initOffsets(r),t.reverse&&u.reverse(),lx(this,u,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,i=0,r,o;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),t.length===1?e=1-r:e=(this.getDecimalForValue(t[1])-r)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?i=o:i=(o-this.getDecimalForValue(t[t.length-2]))/2);const c=t.length<3?.5:.25;e=Je(e,0,c),i=Je(i,0,c),this._offsets={start:e,end:i,factor:1/(e+1+i)}}_generate(){const t=this._adapter,e=this.min,i=this.max,r=this.options,o=r.time,c=o.unit||ax(o.minUnit,e,i,this._getLabelCapacity(e)),u=Ct(r.ticks.stepSize,1),f=c==="week"?o.isoWeekday:!1,d=cl(f)||f===!0,p={};let _=e,b,S;if(d&&(_=+t.startOf(_,"isoWeek",f)),_=+t.startOf(_,d?"day":c),t.diff(i,e,c)>1e5*u)throw new Error(e+" and "+i+" are too far apart with stepSize of "+u+" "+c);const w=r.ticks.source==="data"&&this.getDataTimestamps();for(b=_,S=0;b<i;b=+t.add(b,u,c),S++)ox(p,b,w);return(b===i||r.bounds==="ticks"||S===1)&&ox(p,b,w),Object.keys(p).sort(sx).map(A=>+A)}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){const r=this.options.time.displayFormats,o=this._unit,c=e||r[o];return this._adapter.format(t,c)}_tickFormatFunction(t,e,i,r){const o=this.options,c=o.ticks.callback;if(c)return le(c,[t,e,i],this);const u=o.time.displayFormats,f=this._unit,d=this._majorUnit,p=f&&u[f],_=d&&u[d],b=i[e],S=d&&_&&b&&b.major;return this._adapter.format(t,r||(S?_:p))}generateTickLabels(t){let e,i,r;for(e=0,i=t.length;e<i;++e)r=t[e],r.label=this._tickFormatFunction(r.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,r=Ti(this.isHorizontal()?e.maxRotation:e.minRotation),o=Math.cos(r),c=Math.sin(r),u=this._resolveTickFontOptions(0).size;return{w:i*o+u*c,h:i*c+u*o}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,r=i[e.unit]||i.millisecond,o=this._tickFormatFunction(t,0,lx(this,[t],this._majorUnit),r),c=this._getLabelSize(o),u=Math.floor(this.isHorizontal()?this.width/c.w:this.height/c.h)-1;return u>0?u:1}getDataTimestamps(){let t=this._cache.data||[],e,i;if(t.length)return t;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,i=r.length;e<i;++e)t=t.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const r=this.getLabels();for(e=0,i=r.length;e<i;++e)t.push(rx(this,r[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return q1(t.sort(sx))}}ct(pu,"id","time"),ct(pu,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Rf(n,t,e){let i=0,r=n.length-1,o,c,u,f;e?(t>=n[i].pos&&t<=n[r].pos&&({lo:i,hi:r}=Os(n,"pos",t)),{pos:o,time:u}=n[i],{pos:c,time:f}=n[r]):(t>=n[i].time&&t<=n[r].time&&({lo:i,hi:r}=Os(n,"time",t)),{time:o,pos:u}=n[i],{time:c,pos:f}=n[r]);const d=c-o;return d?u+(f-u)*(t-o)/d:u}class by extends pu{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Rf(e,this.min),this._tableRange=Rf(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,r=[],o=[];let c,u,f,d,p;for(c=0,u=t.length;c<u;++c)d=t[c],d>=e&&d<=i&&r.push(d);if(r.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(c=0,u=r.length;c<u;++c)p=r[c+1],f=r[c-1],d=r[c],Math.round((p+f)/2)!==d&&o.push({time:d,pos:c/(u-1)});return o}_generate(){const t=this.min,e=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(e)||i.length===1)&&i.push(e),i.sort((r,o)=>r-o)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(Rf(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return Rf(this._table,i*this._tableRange+this._minPos,!0)}}ct(by,"id","timeseries"),ct(by,"defaults",pu.defaults);var l5=Object.freeze({__proto__:null,CategoryScale:my,LinearScale:py,LogarithmicScale:yy,RadialLinearScale:Fc,TimeScale:pu,TimeSeriesScale:by});const c5=[gL,q4,U3,l5];bi.register(...c5);const u5=({onClose:n,trades:t,capital:e})=>{const i=Tt.useRef(null),r=Tt.useRef(null),o=Tt.useRef(null);return Tt.useEffect(()=>{const c=[];if(i.current){const u=i.current.getContext("2d");if(u){const f=new bi(u,{type:"line",data:{labels:["Initial",...t.map((d,p)=>`Trade ${p+1}`)],datasets:[{label:"Equity Curve",data:[e.initial+e.deposits,...t.map(d=>d.capitalEnd)],borderColor:"rgb(75, 192, 192)",tension:.1,fill:!1}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Equity Curve"}},scales:{y:{beginAtZero:!1,ticks:{callback:d=>`$${d}`}}}}});c.push(f)}}if(r.current){const u=r.current.getContext("2d");if(u){const f=new bi(u,{type:"bar",data:{labels:t.map((d,p)=>`Trade ${p+1}`),datasets:[{label:"P/L per Trade ($)",data:t.map(d=>d.pnlNet),backgroundColor:t.map(d=>d.pnlNet>=0?"rgba(75, 192, 192, 0.6)":"rgba(255, 99, 132, 0.6)"),borderColor:t.map(d=>d.pnlNet>=0?"rgba(75, 192, 192, 1)":"rgba(255, 99, 132, 1)"),borderWidth:1}]},options:{responsive:!0,plugins:{title:{display:!0,text:"P/L Distribution"}},scales:{y:{ticks:{callback:d=>`$${d}`}}}}});c.push(f)}}if(o.current){const u=t.reduce((_,b)=>{const S=b.strategy||"Uncategorized";return _[S]||(_[S]=0),_[S]+=b.pnlNet,_},{}),f=Object.keys(u),d=Object.values(u),p=o.current.getContext("2d");if(p){const _=new bi(p,{type:"bar",data:{labels:f,datasets:[{label:"Net P/L by Strategy ($)",data:d,backgroundColor:d.map(b=>b>=0?"rgba(75, 192, 192, 0.6)":"rgba(255, 99, 132, 0.6)"),borderColor:d.map(b=>b>=0?"rgba(75, 192, 192, 1)":"rgba(255, 99, 132, 1)"),borderWidth:1}]},options:{indexAxis:"y",responsive:!0,plugins:{title:{display:!0,text:"Net Profit by Strategy"}},scales:{x:{ticks:{callback:b=>`$${b}`}}}}});c.push(_)}}return()=>{c.forEach(u=>u.destroy())}},[t,e]),O.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50 animate-fade-in",children:O.jsxs("div",{className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl shadow-2xl w-full max-w-6xl max-h-[90vh] flex flex-col",children:[O.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700",children:[O.jsx("h2",{className:"text-2xl font-bold text-primary",children:"Performance Analytics"}),O.jsx("button",{onClick:n,className:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-white text-2xl",children:""})]}),O.jsx("main",{className:"p-6 overflow-y-auto",children:t.length===0?O.jsx("div",{className:"text-center py-10",children:O.jsx("p",{className:"text-lg text-gray-500",children:"Log some trades to see your performance analytics."})}):O.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[O.jsx("div",{className:"xl:col-span-2",children:O.jsx("canvas",{ref:i})}),O.jsx("div",{children:O.jsx("canvas",{ref:r})}),O.jsx("div",{children:O.jsx("canvas",{ref:o})})]})})]})})},h5=`
Crea una aplicacin web de "Crypto Trading Journal" en un **nico archivo HTML**. La aplicacin debe usar **Tailwind CSS** para el estilo y **JavaScript** para toda la funcionalidad, incluyendo \`Chart.js\` para los grficos. No debe haber archivos CSS o JS externos, excepto los enlaces CDN para Tailwind y Chart.js.

La aplicacin debe tener un diseo de dos columnas en pantallas grandes (un formulario a la izquierda y el dashboard/log a la derecha).

**1. Columna Izquierda (Fija al hacer scroll):**

*   **Tarjeta "Capital Management":**
    *   Input "Initial Capital ($)".
    *   Input "Add Deposit ($)".
    *   Botn "Add Capital Deposit".
    *   Estos valores deben guardarse en \`localStorage\`.

*   **Tarjeta "Journaling Best Practices":**
    *   Una lista esttica de consejos sobre trading.

*   **Tarjeta "Personal Notes":**
    *   Un ttulo "Personal Notes".
    *   En la misma lnea del ttulo, botones de formato (Negrita, Itlica, Subrayado, Tachado) y 6 selectores de color (swatches) para cambiar el color de fondo de la tarjeta (incluyendo default, gris, rojo, verde, azul, amarillo).
    *   Un rea de \`contenteditable\` para escribir notas.
    *   Un botn "Read More / Show Less" que aparece si el texto excede 3 lneas.
    *   Un texto "Further reading" en la esquina inferior derecha.
    *   El contenido de la nota, su formato (HTML) y el color de la tarjeta deben guardarse en \`localStorage\`.

*   **Tarjeta "Log a New Trade" (Formulario):**
    *   **Inputs:** Date & Time, Pair, Strategy, Direction (Long/Short), Risk/Reward (ej. "2:1"), Entry Price, Exit Price, **Margin ($) (manual)**, Leverage (Select 1x-100x), **Risk (%) (manual)**, **Fees ($) (manual)**.
    *   **Campos Auto-calculados (solo lectura):**
        1.  \`Position Value ($)\` = Margin * Leverage
        2.  \`Position Size (Asset)\` = Position Value / Entry Price
        3.  \`Risk ($)\` = Position Value * (Risk % / 100)
    *   Toda la lgica de auto-clculo debe funcionar en tiempo real (\`oninput\`).
    *   Botn "Log Trade".

**2. Columna Derecha:**

*   **Tarjeta "Performance Dashboard":**
    *   Debe mostrar mtricas clave calculadas a partir del log de trades:
    *   \`Current Capital\`: Calculado como (Initial Capital + Total Deposits + Total P/L).
    *   \`Total P/L ($)\`: Suma de todos los P/L netos.
    *   \`Win Rate\`: (Trades ganadores / Total Trades) %.
    *   \`Profit Factor\`: (Suma de P/L de trades ganadores / Suma de P/L de trades perdedores).
    *   Botn "Performance Analytics" que abre un modal.

*   **Tarjeta "Trade Log":**
    *   Una tabla que muestra todos los trades.
    *   **Columnas:** Date, Pair, Direction, Entry, Exit, Position Size, Leverage, Margin ($), R/R, Risk ($), Fees ($), **P/L ($) (Neto)**, **P/L % (Asset)**, **P/L % (Margin) (ROI)**, **Capital (End)**, Strategy.
    *   **Clculos del Log (por operacin):**
        *   \`P/L ($) (Neto)\`: (Exit - Entry) * Position Size * (Direction) - Fees
        *   \`P/L % (Asset)\`: (Exit - Entry) / Entry * (Direction)
        *   \`P/L % (Margin)\`: P/L ($) (Neto) / Margin ($)
        *   \`Capital (End)\`: Saldo de capital corriente despus de cerrar la operacin.
    *   Debe tener una **fila de Totales (\`<tfoot>\`)** que sume P/L ($), Fees ($), Risk ($) y Margin ($).
    *   Botn "Clear All Trades".

**3. Modales:**

*   **Modal "Performance Analytics":**
    *   Se abre desde el Dashboard.
    *   Debe mostrar 3 grficos usando \`Chart.js\`:
        1.  **Equity Curve:** Un grfico de lnea que muestra \`Capital (End)\` despus de cada trade, en orden cronolgico.
        2.  **P/L Distribution:** Un grfico de barras que muestra el \`P/L ($)\` de cada trade individual.
        3.  **Net Profit by Strategy:** Un **grfico de barras horizontal** que muestra el P/L neto total para cada 'Strategy'. Las barras deben ser verdes para ganancias y rojas para prdidas.

*   **Modal "Prompt de Creacin" (Este mismo modal):**
    *   Un botn en el header principal ("Ver Prompt de Creacin").
    *   Muestra un texto preformateado (este prompt) que explica cmo construir la app.

**4. Lgica de JavaScript (localStorage):**

*   Toda la aplicacin debe usar \`localStorage\` para persistir datos.
*   **Claves de \`localStorage\`:**
    *   \`tradingJournal_trades_v3\`: Array de todos los objetos de trade.
    *   \`tradingJournal_capital_v3\`: Objeto con \`{ initial: 1000, deposits: 0 }\`.
    *   \`tradingJournal_note_v3\`: Objeto con \`{ content: "...", color: "..." }\`.
*   El P/L de los trades debe afectar el \`Current Capital\` en el dashboard.
*   El formulario de "Log a New Trade" debe auto-completar la fecha y hora actuales.
*   Todas las funciones (guardar, cargar, renderizar, calcular dashboard) deben estar bien organizadas y ejecutarse al cargar la pgina (\`DOMContentLoaded\`).
`,f5=({onClose:n})=>O.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:O.jsxs("div",{className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[O.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700",children:[O.jsx("h2",{className:"text-2xl font-bold text-primary",children:"Prompt de Creacin de la App"}),O.jsx("button",{onClick:n,className:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-white text-2xl",children:""})]}),O.jsx("main",{className:"p-6 overflow-y-auto",children:O.jsx("pre",{className:"whitespace-pre-wrap text-sm text-gray-700 dark:text-gray-300 font-sans",children:h5.trim()})})]})}),d5=({user:n,logout:t,theme:e,toggleTheme:i})=>{const[r,o]=Tt.useState(!1),[c,u]=Tt.useState(!1),{data:f,addDocument:d,deleteDocument:p,loading:_}=YN("trades",n.uid),{data:b,updateDocument:S,loading:w}=UE("capital",n.uid,{initial:1e3,deposits:0}),{data:A,updateDocument:D,loading:L}=UE("note",n.uid,{content:"Start typing your notes here...",color:"default"}),F=_||w||L,W=Tt.useMemo(()=>{let P=b.initial+b.deposits;return f.sort((N,z)=>new Date(N.dateTime).getTime()-new Date(z.dateTime).getTime()).map(N=>{const z=KN(N),k={...N,...z};return P+=k.pnlNet,{...k,capitalEnd:P}})},[f,b]),J=Tt.useMemo(()=>WN(b,W),[b,W]),$=P=>{d(P)},st=P=>{S(P)},I=P=>{S({deposits:(b.deposits||0)+P})},R=P=>{D(P)},M=P=>{p(P)};return F?O.jsx("div",{className:"bg-gray-100 dark:bg-gray-900 min-h-screen flex items-center justify-center",children:O.jsx("div",{className:"animate-pulse text-primary text-xl font-bold",children:"Loading Journal..."})}):O.jsxs(O.Fragment,{children:[O.jsxs("div",{className:"bg-gray-100 dark:bg-gray-900 min-h-screen font-sans text-gray-800 dark:text-gray-300",children:[O.jsx("header",{className:"bg-white dark:bg-gray-800/50 dark:backdrop-blur-sm border-b border-gray-200 dark:border-gray-700/50 shadow-md sticky top-0 z-40",children:O.jsxs("div",{className:"container mx-auto px-4 py-3 flex justify-between items-center",children:[O.jsx("h1",{className:"text-2xl font-bold text-primary",children:"TRADA"}),O.jsxs("div",{className:"flex items-center space-x-4",children:[O.jsx("button",{onClick:()=>u(!0),className:"text-sm font-medium text-primary hover:underline hidden md:block",children:"View Creation Prompt"}),O.jsx("button",{onClick:i,className:"p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 text-2xl leading-none",children:e==="dark"?"":""}),O.jsx("button",{onClick:t,className:"bg-primary hover:brightness-95 text-gray-900 font-bold py-2 px-4 rounded-md transition duration-300 text-sm",children:"Logout"})]})]})}),O.jsx("main",{className:"container mx-auto p-4 lg:p-6",children:O.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 lg:gap-6",children:[O.jsxs("div",{className:"lg:col-span-1 space-y-6 lg:sticky lg:top-24 self-start",children:[O.jsx(XN,{capital:b,setCapital:st,onAddDeposit:I}),O.jsx(eP,{}),O.jsx(tP,{note:A,onNoteChange:R}),O.jsx(QN,{onAddTrade:$})]}),O.jsxs("div",{className:"lg:col-span-2 space-y-6 mt-6 lg:mt-0",children:[O.jsx($N,{metrics:J,onOpenAnalytics:()=>o(!0)}),O.jsx(JN,{trades:W,onDeleteTrade:M})]})]})})]}),r&&O.jsx(u5,{onClose:()=>o(!1),trades:W,capital:b}),c&&O.jsx(f5,{onClose:()=>u(!1)})]})},g5=()=>{const{user:n,logout:t,loading:e,loginWithGoogle:i,login:r,signup:o}=HN(),[c,u]=qN();if(e)return O.jsx("div",{className:"bg-gray-100 dark:bg-gray-900 min-h-screen flex items-center justify-center",children:O.jsx("div",{className:"animate-pulse text-primary text-xl font-bold",children:"Loading..."})});if(n){const f={uid:n.uid,email:n.email};return O.jsx(d5,{user:f,logout:t,theme:c,toggleTheme:u})}return O.jsx(GN,{login:r,signup:o,loginWithGoogle:i})},kw=document.getElementById("root");if(!kw)throw new Error("Could not find root element to mount to");const m5=SC.createRoot(kw);m5.render(O.jsx(mC.StrictMode,{children:O.jsx(g5,{})}));
