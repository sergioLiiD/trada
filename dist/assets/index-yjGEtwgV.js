var gR=Object.defineProperty;var mR=(n,t,e)=>t in n?gR(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var ct=(n,t,e)=>mR(n,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function e(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=e(r);fetch(r.href,o)}})();function fS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Zm={exports:{}},Ac={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eT;function pR(){if(eT)return Ac;eT=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,r,o){var l=null;if(o!==void 0&&(l=""+o),r.key!==void 0&&(l=""+r.key),"key"in r){o={};for(var u in r)u!=="key"&&(o[u]=r[u])}else o=r;return r=o.ref,{$$typeof:n,type:i,key:l,ref:r!==void 0?r:null,props:o}}return Ac.Fragment=t,Ac.jsx=e,Ac.jsxs=e,Ac}var nT;function yR(){return nT||(nT=1,Zm.exports=pR()),Zm.exports}var R=yR(),tp={exports:{}},Ct={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iT;function _R(){if(iT)return Ct;iT=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),b=Symbol.iterator;function E(L){return L===null||typeof L!="object"?null:(L=b&&L[b]||L["@@iterator"],typeof L=="function"?L:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,D={};function z(L,J,ot){this.props=L,this.context=J,this.refs=D,this.updater=ot||S}z.prototype.isReactComponent={},z.prototype.setState=function(L,J){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,J,"setState")},z.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function F(){}F.prototype=z.prototype;function W(L,J,ot){this.props=L,this.context=J,this.refs=D,this.updater=ot||S}var Z=W.prototype=new F;Z.constructor=W,w(Z,z.prototype),Z.isPureReactComponent=!0;var $=Array.isArray;function st(){}var M={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function O(L,J,ot){var ut=ot.ref;return{$$typeof:n,type:L,key:J,ref:ut!==void 0?ut:null,props:ot}}function P(L,J){return O(L.type,J,L.props)}function k(L){return typeof L=="object"&&L!==null&&L.$$typeof===n}function j(L){var J={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(ot){return J[ot]})}var N=/\/+/g;function Nt(L,J){return typeof L=="object"&&L!==null&&L.key!=null?j(""+L.key):J.toString(36)}function Et(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(st,st):(L.status="pending",L.then(function(J){L.status==="pending"&&(L.status="fulfilled",L.value=J)},function(J){L.status==="pending"&&(L.status="rejected",L.reason=J)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function K(L,J,ot,ut,vt){var xt=typeof L;(xt==="undefined"||xt==="boolean")&&(L=null);var Gt=!1;if(L===null)Gt=!0;else switch(xt){case"bigint":case"string":case"number":Gt=!0;break;case"object":switch(L.$$typeof){case n:case t:Gt=!0;break;case p:return Gt=L._init,K(Gt(L._payload),J,ot,ut,vt)}}if(Gt)return vt=vt(L),Gt=ut===""?"."+Nt(L,0):ut,$(vt)?(ot="",Gt!=null&&(ot=Gt.replace(N,"$&/")+"/"),K(vt,J,ot,"",function(Jr){return Jr})):vt!=null&&(k(vt)&&(vt=P(vt,ot+(vt.key==null||L&&L.key===vt.key?"":(""+vt.key).replace(N,"$&/")+"/")+Gt)),J.push(vt)),1;Gt=0;var He=ut===""?".":ut+":";if($(L))for(var ge=0;ge<L.length;ge++)ut=L[ge],xt=He+Nt(ut,ge),Gt+=K(ut,J,ot,xt,vt);else if(ge=E(L),typeof ge=="function")for(L=ge.call(L),ge=0;!(ut=L.next()).done;)ut=ut.value,xt=He+Nt(ut,ge++),Gt+=K(ut,J,ot,xt,vt);else if(xt==="object"){if(typeof L.then=="function")return K(Et(L),J,ot,ut,vt);throw J=String(L),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return Gt}function at(L,J,ot){if(L==null)return L;var ut=[],vt=0;return K(L,ut,"","",function(xt){return J.call(ot,xt,vt++)}),ut}function ft(L){if(L._status===-1){var J=L._result;J=J(),J.then(function(ot){(L._status===0||L._status===-1)&&(L._status=1,L._result=ot)},function(ot){(L._status===0||L._status===-1)&&(L._status=2,L._result=ot)}),L._status===-1&&(L._status=0,L._result=J)}if(L._status===1)return L._result.default;throw L._result}var bt=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},kt={map:at,forEach:function(L,J,ot){at(L,function(){J.apply(this,arguments)},ot)},count:function(L){var J=0;return at(L,function(){J++}),J},toArray:function(L){return at(L,function(J){return J})||[]},only:function(L){if(!k(L))throw Error("React.Children.only expected to receive a single React element child.");return L}};return Ct.Activity=_,Ct.Children=kt,Ct.Component=z,Ct.Fragment=e,Ct.Profiler=r,Ct.PureComponent=W,Ct.StrictMode=i,Ct.Suspense=f,Ct.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Ct.__COMPILER_RUNTIME={__proto__:null,c:function(L){return M.H.useMemoCache(L)}},Ct.cache=function(L){return function(){return L.apply(null,arguments)}},Ct.cacheSignal=function(){return null},Ct.cloneElement=function(L,J,ot){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var ut=w({},L.props),vt=L.key;if(J!=null)for(xt in J.key!==void 0&&(vt=""+J.key),J)!C.call(J,xt)||xt==="key"||xt==="__self"||xt==="__source"||xt==="ref"&&J.ref===void 0||(ut[xt]=J[xt]);var xt=arguments.length-2;if(xt===1)ut.children=ot;else if(1<xt){for(var Gt=Array(xt),He=0;He<xt;He++)Gt[He]=arguments[He+2];ut.children=Gt}return O(L.type,vt,ut)},Ct.createContext=function(L){return L={$$typeof:l,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:o,_context:L},L},Ct.createElement=function(L,J,ot){var ut,vt={},xt=null;if(J!=null)for(ut in J.key!==void 0&&(xt=""+J.key),J)C.call(J,ut)&&ut!=="key"&&ut!=="__self"&&ut!=="__source"&&(vt[ut]=J[ut]);var Gt=arguments.length-2;if(Gt===1)vt.children=ot;else if(1<Gt){for(var He=Array(Gt),ge=0;ge<Gt;ge++)He[ge]=arguments[ge+2];vt.children=He}if(L&&L.defaultProps)for(ut in Gt=L.defaultProps,Gt)vt[ut]===void 0&&(vt[ut]=Gt[ut]);return O(L,xt,vt)},Ct.createRef=function(){return{current:null}},Ct.forwardRef=function(L){return{$$typeof:u,render:L}},Ct.isValidElement=k,Ct.lazy=function(L){return{$$typeof:p,_payload:{_status:-1,_result:L},_init:ft}},Ct.memo=function(L,J){return{$$typeof:d,type:L,compare:J===void 0?null:J}},Ct.startTransition=function(L){var J=M.T,ot={};M.T=ot;try{var ut=L(),vt=M.S;vt!==null&&vt(ot,ut),typeof ut=="object"&&ut!==null&&typeof ut.then=="function"&&ut.then(st,bt)}catch(xt){bt(xt)}finally{J!==null&&ot.types!==null&&(J.types=ot.types),M.T=J}},Ct.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Ct.use=function(L){return M.H.use(L)},Ct.useActionState=function(L,J,ot){return M.H.useActionState(L,J,ot)},Ct.useCallback=function(L,J){return M.H.useCallback(L,J)},Ct.useContext=function(L){return M.H.useContext(L)},Ct.useDebugValue=function(){},Ct.useDeferredValue=function(L,J){return M.H.useDeferredValue(L,J)},Ct.useEffect=function(L,J){return M.H.useEffect(L,J)},Ct.useEffectEvent=function(L){return M.H.useEffectEvent(L)},Ct.useId=function(){return M.H.useId()},Ct.useImperativeHandle=function(L,J,ot){return M.H.useImperativeHandle(L,J,ot)},Ct.useInsertionEffect=function(L,J){return M.H.useInsertionEffect(L,J)},Ct.useLayoutEffect=function(L,J){return M.H.useLayoutEffect(L,J)},Ct.useMemo=function(L,J){return M.H.useMemo(L,J)},Ct.useOptimistic=function(L,J){return M.H.useOptimistic(L,J)},Ct.useReducer=function(L,J,ot){return M.H.useReducer(L,J,ot)},Ct.useRef=function(L){return M.H.useRef(L)},Ct.useState=function(L){return M.H.useState(L)},Ct.useSyncExternalStore=function(L,J,ot){return M.H.useSyncExternalStore(L,J,ot)},Ct.useTransition=function(){return M.H.useTransition()},Ct.version="19.2.0",Ct}var sT;function Sy(){return sT||(sT=1,tp.exports=_R()),tp.exports}var pt=Sy();const bR=fS(pt);var ep={exports:{}},wc={},np={exports:{}},ip={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rT;function vR(){return rT||(rT=1,(function(n){function t(K,at){var ft=K.length;K.push(at);t:for(;0<ft;){var bt=ft-1>>>1,kt=K[bt];if(0<r(kt,at))K[bt]=at,K[ft]=kt,ft=bt;else break t}}function e(K){return K.length===0?null:K[0]}function i(K){if(K.length===0)return null;var at=K[0],ft=K.pop();if(ft!==at){K[0]=ft;t:for(var bt=0,kt=K.length,L=kt>>>1;bt<L;){var J=2*(bt+1)-1,ot=K[J],ut=J+1,vt=K[ut];if(0>r(ot,ft))ut<kt&&0>r(vt,ot)?(K[bt]=vt,K[ut]=ft,bt=ut):(K[bt]=ot,K[J]=ft,bt=J);else if(ut<kt&&0>r(vt,ft))K[bt]=vt,K[ut]=ft,bt=ut;else break t}}return at}function r(K,at){var ft=K.sortIndex-at.sortIndex;return ft!==0?ft:K.id-at.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var f=[],d=[],p=1,_=null,b=3,E=!1,S=!1,w=!1,D=!1,z=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;function Z(K){for(var at=e(d);at!==null;){if(at.callback===null)i(d);else if(at.startTime<=K)i(d),at.sortIndex=at.expirationTime,t(f,at);else break;at=e(d)}}function $(K){if(w=!1,Z(K),!S)if(e(f)!==null)S=!0,st||(st=!0,j());else{var at=e(d);at!==null&&Et($,at.startTime-K)}}var st=!1,M=-1,C=5,O=-1;function P(){return D?!0:!(n.unstable_now()-O<C)}function k(){if(D=!1,st){var K=n.unstable_now();O=K;var at=!0;try{t:{S=!1,w&&(w=!1,F(M),M=-1),E=!0;var ft=b;try{e:{for(Z(K),_=e(f);_!==null&&!(_.expirationTime>K&&P());){var bt=_.callback;if(typeof bt=="function"){_.callback=null,b=_.priorityLevel;var kt=bt(_.expirationTime<=K);if(K=n.unstable_now(),typeof kt=="function"){_.callback=kt,Z(K),at=!0;break e}_===e(f)&&i(f),Z(K)}else i(f);_=e(f)}if(_!==null)at=!0;else{var L=e(d);L!==null&&Et($,L.startTime-K),at=!1}}break t}finally{_=null,b=ft,E=!1}at=void 0}}finally{at?j():st=!1}}}var j;if(typeof W=="function")j=function(){W(k)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,Nt=N.port2;N.port1.onmessage=k,j=function(){Nt.postMessage(null)}}else j=function(){z(k,0)};function Et(K,at){M=z(function(){K(n.unstable_now())},at)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(K){K.callback=null},n.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<K?Math.floor(1e3/K):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(K){switch(b){case 1:case 2:case 3:var at=3;break;default:at=b}var ft=b;b=at;try{return K()}finally{b=ft}},n.unstable_requestPaint=function(){D=!0},n.unstable_runWithPriority=function(K,at){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var ft=b;b=K;try{return at()}finally{b=ft}},n.unstable_scheduleCallback=function(K,at,ft){var bt=n.unstable_now();switch(typeof ft=="object"&&ft!==null?(ft=ft.delay,ft=typeof ft=="number"&&0<ft?bt+ft:bt):ft=bt,K){case 1:var kt=-1;break;case 2:kt=250;break;case 5:kt=1073741823;break;case 4:kt=1e4;break;default:kt=5e3}return kt=ft+kt,K={id:p++,callback:at,priorityLevel:K,startTime:ft,expirationTime:kt,sortIndex:-1},ft>bt?(K.sortIndex=ft,t(d,K),e(f)===null&&K===e(d)&&(w?(F(M),M=-1):w=!0,Et($,ft-bt))):(K.sortIndex=kt,t(f,K),S||E||(S=!0,st||(st=!0,j()))),K},n.unstable_shouldYield=P,n.unstable_wrapCallback=function(K){var at=b;return function(){var ft=b;b=at;try{return K.apply(this,arguments)}finally{b=ft}}}})(ip)),ip}var aT;function TR(){return aT||(aT=1,np.exports=vR()),np.exports}var sp={exports:{}},cn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oT;function ER(){if(oT)return cn;oT=1;var n=Sy();function t(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(f,d,p){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:_==null?null:""+_,children:f,containerInfo:d,implementation:p}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return cn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,cn.createPortal=function(f,d){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return o(f,d,null,p)},cn.flushSync=function(f){var d=l.T,p=i.p;try{if(l.T=null,i.p=2,f)return f()}finally{l.T=d,i.p=p,i.d.f()}},cn.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,i.d.C(f,d))},cn.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},cn.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var p=d.as,_=u(p,d.crossOrigin),b=typeof d.integrity=="string"?d.integrity:void 0,E=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;p==="style"?i.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:_,integrity:b,fetchPriority:E}):p==="script"&&i.d.X(f,{crossOrigin:_,integrity:b,fetchPriority:E,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},cn.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var p=u(d.as,d.crossOrigin);i.d.M(f,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&i.d.M(f)},cn.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var p=d.as,_=u(p,d.crossOrigin);i.d.L(f,p,{crossOrigin:_,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},cn.preloadModule=function(f,d){if(typeof f=="string")if(d){var p=u(d.as,d.crossOrigin);i.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else i.d.m(f)},cn.requestFormReset=function(f){i.d.r(f)},cn.unstable_batchedUpdates=function(f,d){return f(d)},cn.useFormState=function(f,d,p){return l.H.useFormState(f,d,p)},cn.useFormStatus=function(){return l.H.useHostTransitionStatus()},cn.version="19.2.0",cn}var lT;function xR(){if(lT)return sp.exports;lT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),sp.exports=ER(),sp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cT;function SR(){if(cT)return wc;cT=1;var n=TR(),t=Sy(),e=xR();function i(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var a=s,c=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(c=a.return),s=a.return;while(s)}return a.tag===3?c:null}function l(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function u(s){if(s.tag===31){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function f(s){if(o(s)!==s)throw Error(i(188))}function d(s){var a=s.alternate;if(!a){if(a=o(s),a===null)throw Error(i(188));return a!==s?null:s}for(var c=s,h=a;;){var m=c.return;if(m===null)break;var y=m.alternate;if(y===null){if(h=m.return,h!==null){c=h;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===c)return f(m),s;if(y===h)return f(m),a;y=y.sibling}throw Error(i(188))}if(c.return!==h.return)c=m,h=y;else{for(var T=!1,A=m.child;A;){if(A===c){T=!0,c=m,h=y;break}if(A===h){T=!0,h=m,c=y;break}A=A.sibling}if(!T){for(A=y.child;A;){if(A===c){T=!0,c=y,h=m;break}if(A===h){T=!0,h=y,c=m;break}A=A.sibling}if(!T)throw Error(i(189))}}if(c.alternate!==h)throw Error(i(190))}if(c.tag!==3)throw Error(i(188));return c.stateNode.current===c?s:a}function p(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=p(s),a!==null)return a;s=s.sibling}return null}var _=Object.assign,b=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),F=Symbol.for("react.consumer"),W=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),st=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function j(s){return s===null||typeof s!="object"?null:(s=k&&s[k]||s["@@iterator"],typeof s=="function"?s:null)}var N=Symbol.for("react.client.reference");function Nt(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===N?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case w:return"Fragment";case z:return"Profiler";case D:return"StrictMode";case $:return"Suspense";case st:return"SuspenseList";case O:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case S:return"Portal";case W:return s.displayName||"Context";case F:return(s._context.displayName||"Context")+".Consumer";case Z:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case M:return a=s.displayName||null,a!==null?a:Nt(s.type)||"Memo";case C:a=s._payload,s=s._init;try{return Nt(s(a))}catch{}}return null}var Et=Array.isArray,K=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,at=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ft={pending:!1,data:null,method:null,action:null},bt=[],kt=-1;function L(s){return{current:s}}function J(s){0>kt||(s.current=bt[kt],bt[kt]=null,kt--)}function ot(s,a){kt++,bt[kt]=s.current,s.current=a}var ut=L(null),vt=L(null),xt=L(null),Gt=L(null);function He(s,a){switch(ot(xt,a),ot(vt,s),ot(ut,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?Sv(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=Sv(a),s=Av(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}J(ut),ot(ut,s)}function ge(){J(ut),J(vt),J(xt)}function Jr(s){s.memoizedState!==null&&ot(Gt,s);var a=ut.current,c=Av(a,s.type);a!==c&&(ot(vt,s),ot(ut,c))}function no(s){vt.current===s&&(J(ut),J(vt)),Gt.current===s&&(J(Gt),Tc._currentValue=ft)}var io,so;function Ri(s){if(io===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);io=a&&a[1]||"",so=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+io+s+so}var Tl=!1;function Zr(s,a){if(!s||Tl)return"";Tl=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(a){var nt=function(){throw Error()};if(Object.defineProperty(nt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(nt,[])}catch(Q){var Y=Q}Reflect.construct(s,[],nt)}else{try{nt.call()}catch(Q){Y=Q}s.call(nt.prototype)}}else{try{throw Error()}catch(Q){Y=Q}(nt=s())&&typeof nt.catch=="function"&&nt.catch(function(){})}}catch(Q){if(Q&&Y&&typeof Q.stack=="string")return[Q.stack,Y.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=h.DetermineComponentFrameRoot(),T=y[0],A=y[1];if(T&&A){var V=T.split(`
`),G=A.split(`
`);for(m=h=0;h<V.length&&!V[h].includes("DetermineComponentFrameRoot");)h++;for(;m<G.length&&!G[m].includes("DetermineComponentFrameRoot");)m++;if(h===V.length||m===G.length)for(h=V.length-1,m=G.length-1;1<=h&&0<=m&&V[h]!==G[m];)m--;for(;1<=h&&0<=m;h--,m--)if(V[h]!==G[m]){if(h!==1||m!==1)do if(h--,m--,0>m||V[h]!==G[m]){var tt=`
`+V[h].replace(" at new "," at ");return s.displayName&&tt.includes("<anonymous>")&&(tt=tt.replace("<anonymous>",s.displayName)),tt}while(1<=h&&0<=m);break}}}finally{Tl=!1,Error.prepareStackTrace=c}return(c=s?s.displayName||s.name:"")?Ri(c):""}function El(s,a){switch(s.tag){case 26:case 27:case 5:return Ri(s.type);case 16:return Ri("Lazy");case 13:return s.child!==a&&a!==null?Ri("Suspense Fallback"):Ri("Suspense");case 19:return Ri("SuspenseList");case 0:case 15:return Zr(s.type,!1);case 11:return Zr(s.type.render,!1);case 1:return Zr(s.type,!0);case 31:return Ri("Activity");default:return""}}function xl(s){try{var a="",c=null;do a+=El(s,c),c=s,s=s.return;while(s);return a}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var Ie=Object.prototype.hasOwnProperty,qe=n.unstable_scheduleCallback,Bs=n.unstable_cancelCallback,eg=n.unstable_shouldYield,ku=n.unstable_requestPaint,_n=n.unstable_now,ta=n.unstable_getCurrentPriorityLevel,Sl=n.unstable_ImmediatePriority,Al=n.unstable_UserBlockingPriority,Fs=n.unstable_NormalPriority,ng=n.unstable_LowPriority,Pu=n.unstable_IdlePriority,Vu=n.log,Lu=n.unstable_setDisableYieldValue,li=null,Ze=null;function Yn(s){if(typeof Vu=="function"&&Lu(s),Ze&&typeof Ze.setStrictMode=="function")try{Ze.setStrictMode(li,s)}catch{}}var xe=Math.clz32?Math.clz32:ju,zu=Math.log,ro=Math.LN2;function ju(s){return s>>>=0,s===0?32:31-(zu(s)/ro|0)|0}var Ii=256,ea=262144,De=4194304;function Di(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Mi(s,a,c){var h=s.pendingLanes;if(h===0)return 0;var m=0,y=s.suspendedLanes,T=s.pingedLanes;s=s.warmLanes;var A=h&134217727;return A!==0?(h=A&~y,h!==0?m=Di(h):(T&=A,T!==0?m=Di(T):c||(c=A&~s,c!==0&&(m=Di(c))))):(A=h&~y,A!==0?m=Di(A):T!==0?m=Di(T):c||(c=h&~s,c!==0&&(m=Di(c)))),m===0?0:a!==0&&a!==m&&(a&y)===0&&(y=m&-m,c=a&-a,y>=c||y===32&&(c&4194048)!==0)?a:m}function ci(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function ig(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Uu(){var s=De;return De<<=1,(De&62914560)===0&&(De=4194304),s}function Oi(s){for(var a=[],c=0;31>c;c++)a.push(s);return a}function na(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function sg(s,a,c,h,m,y){var T=s.pendingLanes;s.pendingLanes=c,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=c,s.entangledLanes&=c,s.errorRecoveryDisabledLanes&=c,s.shellSuspendCounter=0;var A=s.entanglements,V=s.expirationTimes,G=s.hiddenUpdates;for(c=T&~c;0<c;){var tt=31-xe(c),nt=1<<tt;A[tt]=0,V[tt]=-1;var Y=G[tt];if(Y!==null)for(G[tt]=null,tt=0;tt<Y.length;tt++){var Q=Y[tt];Q!==null&&(Q.lane&=-536870913)}c&=~nt}h!==0&&ia(s,h,0),y!==0&&m===0&&s.tag!==0&&(s.suspendedLanes|=y&~(T&~a))}function ia(s,a,c){s.pendingLanes|=a,s.suspendedLanes&=~a;var h=31-xe(a);s.entangledLanes|=a,s.entanglements[h]=s.entanglements[h]|1073741824|c&261930}function wl(s,a){var c=s.entangledLanes|=a;for(s=s.entanglements;c;){var h=31-xe(c),m=1<<h;m&a|s[h]&a&&(s[h]|=a),c&=~m}}function Cl(s,a){var c=a&-a;return c=(c&42)!==0?1:sa(c),(c&(s.suspendedLanes|a))!==0?0:c}function sa(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function as(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Bu(){var s=at.p;return s!==0?s:(s=window.event,s===void 0?32:Wv(s.type))}function ui(s,a){var c=at.p;try{return at.p=s,a()}finally{at.p=c}}var hi=Math.random().toString(36).slice(2),Me="__reactFiber$"+hi,We="__reactProps$"+hi,Ni="__reactContainer$"+hi,ao="__reactEvents$"+hi,rg="__reactListeners$"+hi,Fu="__reactHandles$"+hi,Hu="__reactResources$"+hi,ki="__reactMarker$"+hi;function oo(s){delete s[Me],delete s[We],delete s[ao],delete s[rg],delete s[Fu]}function Pi(s){var a=s[Me];if(a)return a;for(var c=s.parentNode;c;){if(a=c[Ni]||c[Me]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(s=Ov(s);s!==null;){if(c=s[Me])return c;s=Ov(s)}return a}s=c,c=s.parentNode}return null}function Kn(s){if(s=s[Me]||s[Ni]){var a=s.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return s}return null}function kn(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(i(33))}function Vi(s){var a=s[Hu];return a||(a=s[Hu]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Oe(s){s[ki]=!0}var Rl=new Set,Il={};function Li(s,a){zi(s,a),zi(s+"Capture",a)}function zi(s,a){for(Il[s]=a,s=0;s<a.length;s++)Rl.add(a[s])}var Dl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ml={},Ol={};function qu(s){return Ie.call(Ol,s)?!0:Ie.call(Ml,s)?!1:Dl.test(s)?Ol[s]=!0:(Ml[s]=!0,!1)}function lo(s,a,c){if(qu(a))if(c===null)s.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var h=a.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+c)}}function Pn(s,a,c){if(c===null)s.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+c)}}function Ne(s,a,c,h){if(h===null)s.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(c);return}s.setAttributeNS(a,c,""+h)}}function Xe(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Hs(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Nl(s,a,c){var h=Object.getOwnPropertyDescriptor(s.constructor.prototype,a);if(!s.hasOwnProperty(a)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var m=h.get,y=h.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return m.call(this)},set:function(T){c=""+T,y.call(this,T)}}),Object.defineProperty(s,a,{enumerable:h.enumerable}),{getValue:function(){return c},setValue:function(T){c=""+T},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function Zt(s){if(!s._valueTracker){var a=Hs(s)?"checked":"value";s._valueTracker=Nl(s,a,""+s[a])}}function ra(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var c=a.getValue(),h="";return s&&(h=Hs(s)?s.checked?"true":"false":s.value),s=h,s!==c?(a.setValue(s),!0):!1}function ji(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var aa=/[\n"\\]/g;function Tn(s){return s.replace(aa,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function co(s,a,c,h,m,y,T,A){s.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?s.type=T:s.removeAttribute("type"),a!=null?T==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+Xe(a)):s.value!==""+Xe(a)&&(s.value=""+Xe(a)):T!=="submit"&&T!=="reset"||s.removeAttribute("value"),a!=null?kl(s,T,Xe(a)):c!=null?kl(s,T,Xe(c)):h!=null&&s.removeAttribute("value"),m==null&&y!=null&&(s.defaultChecked=!!y),m!=null&&(s.checked=m&&typeof m!="function"&&typeof m!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?s.name=""+Xe(A):s.removeAttribute("name")}function Gu(s,a,c,h,m,y,T,A){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(s.type=y),a!=null||c!=null){if(!(y!=="submit"&&y!=="reset"||a!=null)){Zt(s);return}c=c!=null?""+Xe(c):"",a=a!=null?""+Xe(a):c,A||a===s.value||(s.value=a),s.defaultValue=a}h=h??m,h=typeof h!="function"&&typeof h!="symbol"&&!!h,s.checked=A?s.checked:!!h,s.defaultChecked=!!h,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(s.name=T),Zt(s)}function kl(s,a,c){a==="number"&&ji(s.ownerDocument)===s||s.defaultValue===""+c||(s.defaultValue=""+c)}function qs(s,a,c,h){if(s=s.options,a){a={};for(var m=0;m<c.length;m++)a["$"+c[m]]=!0;for(c=0;c<s.length;c++)m=a.hasOwnProperty("$"+s[c].value),s[c].selected!==m&&(s[c].selected=m),m&&h&&(s[c].defaultSelected=!0)}else{for(c=""+Xe(c),a=null,m=0;m<s.length;m++){if(s[m].value===c){s[m].selected=!0,h&&(s[m].defaultSelected=!0);return}a!==null||s[m].disabled||(a=s[m])}a!==null&&(a.selected=!0)}}function Yu(s,a,c){if(a!=null&&(a=""+Xe(a),a!==s.value&&(s.value=a),c==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=c!=null?""+Xe(c):""}function Gs(s,a,c,h){if(a==null){if(h!=null){if(c!=null)throw Error(i(92));if(Et(h)){if(1<h.length)throw Error(i(93));h=h[0]}c=h}c==null&&(c=""),a=c}c=Xe(a),s.defaultValue=c,h=s.textContent,h===c&&h!==""&&h!==null&&(s.value=h),Zt(s)}function En(s,a){if(a){var c=s.firstChild;if(c&&c===s.lastChild&&c.nodeType===3){c.nodeValue=a;return}}s.textContent=a}var Ku=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Pl(s,a,c){var h=a.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?h?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":h?s.setProperty(a,c):typeof c!="number"||c===0||Ku.has(a)?a==="float"?s.cssFloat=c:s[a]=(""+c).trim():s[a]=c+"px"}function Vl(s,a,c){if(a!=null&&typeof a!="object")throw Error(i(62));if(s=s.style,c!=null){for(var h in c)!c.hasOwnProperty(h)||a!=null&&a.hasOwnProperty(h)||(h.indexOf("--")===0?s.setProperty(h,""):h==="float"?s.cssFloat="":s[h]="");for(var m in a)h=a[m],a.hasOwnProperty(m)&&c[m]!==h&&Pl(s,m,h)}else for(var y in a)a.hasOwnProperty(y)&&Pl(s,y,a[y])}function uo(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ys=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ho(s){return Ys.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function fi(){}var Ll=null;function Wn(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ks=null,Ui=null;function oa(s){var a=Kn(s);if(a&&(s=a.stateNode)){var c=s[We]||null;t:switch(s=a.stateNode,a.type){case"input":if(co(s,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),a=c.name,c.type==="radio"&&a!=null){for(c=s;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Tn(""+a)+'"][type="radio"]'),a=0;a<c.length;a++){var h=c[a];if(h!==s&&h.form===s.form){var m=h[We]||null;if(!m)throw Error(i(90));co(h,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(a=0;a<c.length;a++)h=c[a],h.form===s.form&&ra(h)}break t;case"textarea":Yu(s,c.value,c.defaultValue);break t;case"select":a=c.value,a!=null&&qs(s,!!c.multiple,a,!1)}}}var fo=!1;function Ws(s,a,c){if(fo)return s(a,c);fo=!0;try{var h=s(a);return h}finally{if(fo=!1,(Ks!==null||Ui!==null)&&(Bh(),Ks&&(a=Ks,s=Ui,Ui=Ks=null,oa(a),s)))for(a=0;a<s.length;a++)oa(s[a])}}function di(s,a){var c=s.stateNode;if(c===null)return null;var h=c[We]||null;if(h===null)return null;c=h[a];t:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(s=s.type,h=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!h;break t;default:s=!1}if(s)return null;if(c&&typeof c!="function")throw Error(i(231,a,typeof c));return c}var Xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),la=!1;if(Xn)try{var ie={};Object.defineProperty(ie,"passive",{get:function(){la=!0}}),window.addEventListener("test",ie,ie),window.removeEventListener("test",ie,ie)}catch{la=!1}var Bi=null,zl=null,ca=null;function jl(){if(ca)return ca;var s,a=zl,c=a.length,h,m="value"in Bi?Bi.value:Bi.textContent,y=m.length;for(s=0;s<c&&a[s]===m[s];s++);var T=c-s;for(h=1;h<=T&&a[c-h]===m[y-h];h++);return ca=m.slice(s,1<h?1-h:void 0)}function ua(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function os(){return!0}function gi(){return!1}function tn(s){function a(c,h,m,y,T){this._reactName=c,this._targetInst=m,this.type=h,this.nativeEvent=y,this.target=T,this.currentTarget=null;for(var A in s)s.hasOwnProperty(A)&&(c=s[A],this[A]=c?c(y):y[A]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?os:gi,this.isPropagationStopped=gi,this}return _(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=os)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=os)},persist:function(){},isPersistent:os}),a}var ls={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fi=tn(ls),Xs=_({},ls,{view:0,detail:0}),Ul=tn(Xs),Qs,go,Hi,mo=_({},Xs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$s,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Hi&&(Hi&&s.type==="mousemove"?(Qs=s.screenX-Hi.screenX,go=s.screenY-Hi.screenY):go=Qs=0,Hi=s),Qs)},movementY:function(s){return"movementY"in s?s.movementY:go}}),Bl=tn(mo),ha=_({},mo,{dataTransfer:0}),Xu=tn(ha),Qu=_({},Xs,{relatedTarget:0}),fa=tn(Qu),Fl=_({},ls,{animationName:0,elapsedTime:0,pseudoElement:0}),$u=tn(Fl),po=_({},ls,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Ju=tn(po),Zu=_({},ls,{data:0}),qi=tn(Zu),th={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ih(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=nh[s])?!!a[s]:!1}function $s(){return ih}var bn=_({},Xs,{key:function(s){if(s.key){var a=th[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=ua(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?eh[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$s,charCode:function(s){return s.type==="keypress"?ua(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?ua(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),sh=tn(bn),rh=_({},mo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cs=tn(rh),g=_({},Xs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$s}),v=tn(g),x=_({},ls,{propertyName:0,elapsedTime:0,pseudoElement:0}),I=tn(x),H=_({},mo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),X=tn(H),lt=_({},ls,{newState:0,oldState:0}),Dt=tn(lt),Se=[9,13,27,32],Qt=Xn&&"CompositionEvent"in window,me=null;Xn&&"documentMode"in document&&(me=document.documentMode);var Qn=Xn&&"TextEvent"in window&&!me,Gi=Xn&&(!Qt||me&&8<me&&11>=me),mi=" ",pi=!1;function da(s,a){switch(s){case"keyup":return Se.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yo(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var _o=!1;function zw(s,a){switch(s){case"compositionend":return yo(a);case"keypress":return a.which!==32?null:(pi=!0,mi);case"textInput":return s=a.data,s===mi&&pi?null:s;default:return null}}function jw(s,a){if(_o)return s==="compositionend"||!Qt&&da(s,a)?(s=jl(),ca=zl=Bi=null,_o=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Gi&&a.locale!=="ko"?null:a.data;default:return null}}var Uw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function P_(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!Uw[s.type]:a==="textarea"}function V_(s,a,c,h){Ks?Ui?Ui.push(h):Ui=[h]:Ks=h,a=Wh(a,"onChange"),0<a.length&&(c=new Fi("onChange","change",null,c,h),s.push({event:c,listeners:a}))}var Hl=null,ql=null;function Bw(s){_v(s,0)}function ah(s){var a=kn(s);if(ra(a))return s}function L_(s,a){if(s==="change")return a}var z_=!1;if(Xn){var ag;if(Xn){var og="oninput"in document;if(!og){var j_=document.createElement("div");j_.setAttribute("oninput","return;"),og=typeof j_.oninput=="function"}ag=og}else ag=!1;z_=ag&&(!document.documentMode||9<document.documentMode)}function U_(){Hl&&(Hl.detachEvent("onpropertychange",B_),ql=Hl=null)}function B_(s){if(s.propertyName==="value"&&ah(ql)){var a=[];V_(a,ql,s,Wn(s)),Ws(Bw,a)}}function Fw(s,a,c){s==="focusin"?(U_(),Hl=a,ql=c,Hl.attachEvent("onpropertychange",B_)):s==="focusout"&&U_()}function Hw(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return ah(ql)}function qw(s,a){if(s==="click")return ah(a)}function Gw(s,a){if(s==="input"||s==="change")return ah(a)}function Yw(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var Vn=typeof Object.is=="function"?Object.is:Yw;function Gl(s,a){if(Vn(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var c=Object.keys(s),h=Object.keys(a);if(c.length!==h.length)return!1;for(h=0;h<c.length;h++){var m=c[h];if(!Ie.call(a,m)||!Vn(s[m],a[m]))return!1}return!0}function F_(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function H_(s,a){var c=F_(s);s=0;for(var h;c;){if(c.nodeType===3){if(h=s+c.textContent.length,s<=a&&h>=a)return{node:c,offset:a-s};s=h}t:{for(;c;){if(c.nextSibling){c=c.nextSibling;break t}c=c.parentNode}c=void 0}c=F_(c)}}function q_(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?q_(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function G_(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=ji(s.document);a instanceof s.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)s=a.contentWindow;else break;a=ji(s.document)}return a}function lg(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var Kw=Xn&&"documentMode"in document&&11>=document.documentMode,bo=null,cg=null,Yl=null,ug=!1;function Y_(s,a,c){var h=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;ug||bo==null||bo!==ji(h)||(h=bo,"selectionStart"in h&&lg(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Yl&&Gl(Yl,h)||(Yl=h,h=Wh(cg,"onSelect"),0<h.length&&(a=new Fi("onSelect","select",null,a,c),s.push({event:a,listeners:h}),a.target=bo)))}function ga(s,a){var c={};return c[s.toLowerCase()]=a.toLowerCase(),c["Webkit"+s]="webkit"+a,c["Moz"+s]="moz"+a,c}var vo={animationend:ga("Animation","AnimationEnd"),animationiteration:ga("Animation","AnimationIteration"),animationstart:ga("Animation","AnimationStart"),transitionrun:ga("Transition","TransitionRun"),transitionstart:ga("Transition","TransitionStart"),transitioncancel:ga("Transition","TransitionCancel"),transitionend:ga("Transition","TransitionEnd")},hg={},K_={};Xn&&(K_=document.createElement("div").style,"AnimationEvent"in window||(delete vo.animationend.animation,delete vo.animationiteration.animation,delete vo.animationstart.animation),"TransitionEvent"in window||delete vo.transitionend.transition);function ma(s){if(hg[s])return hg[s];if(!vo[s])return s;var a=vo[s],c;for(c in a)if(a.hasOwnProperty(c)&&c in K_)return hg[s]=a[c];return s}var W_=ma("animationend"),X_=ma("animationiteration"),Q_=ma("animationstart"),Ww=ma("transitionrun"),Xw=ma("transitionstart"),Qw=ma("transitioncancel"),$_=ma("transitionend"),J_=new Map,fg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");fg.push("scrollEnd");function yi(s,a){J_.set(s,a),Li(a,[s])}var oh=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},$n=[],To=0,dg=0;function lh(){for(var s=To,a=dg=To=0;a<s;){var c=$n[a];$n[a++]=null;var h=$n[a];$n[a++]=null;var m=$n[a];$n[a++]=null;var y=$n[a];if($n[a++]=null,h!==null&&m!==null){var T=h.pending;T===null?m.next=m:(m.next=T.next,T.next=m),h.pending=m}y!==0&&Z_(c,m,y)}}function ch(s,a,c,h){$n[To++]=s,$n[To++]=a,$n[To++]=c,$n[To++]=h,dg|=h,s.lanes|=h,s=s.alternate,s!==null&&(s.lanes|=h)}function gg(s,a,c,h){return ch(s,a,c,h),uh(s)}function pa(s,a){return ch(s,null,null,a),uh(s)}function Z_(s,a,c){s.lanes|=c;var h=s.alternate;h!==null&&(h.lanes|=c);for(var m=!1,y=s.return;y!==null;)y.childLanes|=c,h=y.alternate,h!==null&&(h.childLanes|=c),y.tag===22&&(s=y.stateNode,s===null||s._visibility&1||(m=!0)),s=y,y=y.return;return s.tag===3?(y=s.stateNode,m&&a!==null&&(m=31-xe(c),s=y.hiddenUpdates,h=s[m],h===null?s[m]=[a]:h.push(a),a.lane=c|536870912),y):null}function uh(s){if(50<gc)throw gc=0,xm=null,Error(i(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var Eo={};function $w(s,a,c,h){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ln(s,a,c,h){return new $w(s,a,c,h)}function mg(s){return s=s.prototype,!(!s||!s.isReactComponent)}function us(s,a){var c=s.alternate;return c===null?(c=Ln(s.tag,a,s.key,s.mode),c.elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=a,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=s.flags&65011712,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,a=s.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c.refCleanup=s.refCleanup,c}function t0(s,a){s.flags&=65011714;var c=s.alternate;return c===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,a=c.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function hh(s,a,c,h,m,y){var T=0;if(h=s,typeof s=="function")mg(s)&&(T=1);else if(typeof s=="string")T=nR(s,c,ut.current)?26:s==="html"||s==="head"||s==="body"?27:5;else t:switch(s){case O:return s=Ln(31,c,a,m),s.elementType=O,s.lanes=y,s;case w:return ya(c.children,m,y,a);case D:T=8,m|=24;break;case z:return s=Ln(12,c,a,m|2),s.elementType=z,s.lanes=y,s;case $:return s=Ln(13,c,a,m),s.elementType=$,s.lanes=y,s;case st:return s=Ln(19,c,a,m),s.elementType=st,s.lanes=y,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case W:T=10;break t;case F:T=9;break t;case Z:T=11;break t;case M:T=14;break t;case C:T=16,h=null;break t}T=29,c=Error(i(130,s===null?"null":typeof s,"")),h=null}return a=Ln(T,c,a,m),a.elementType=s,a.type=h,a.lanes=y,a}function ya(s,a,c,h){return s=Ln(7,s,h,a),s.lanes=c,s}function pg(s,a,c){return s=Ln(6,s,null,a),s.lanes=c,s}function e0(s){var a=Ln(18,null,null,0);return a.stateNode=s,a}function yg(s,a,c){return a=Ln(4,s.children!==null?s.children:[],s.key,a),a.lanes=c,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var n0=new WeakMap;function Jn(s,a){if(typeof s=="object"&&s!==null){var c=n0.get(s);return c!==void 0?c:(a={value:s,source:a,stack:xl(a)},n0.set(s,a),a)}return{value:s,source:a,stack:xl(a)}}var xo=[],So=0,fh=null,Kl=0,Zn=[],ti=0,Js=null,Yi=1,Ki="";function hs(s,a){xo[So++]=Kl,xo[So++]=fh,fh=s,Kl=a}function i0(s,a,c){Zn[ti++]=Yi,Zn[ti++]=Ki,Zn[ti++]=Js,Js=s;var h=Yi;s=Ki;var m=32-xe(h)-1;h&=~(1<<m),c+=1;var y=32-xe(a)+m;if(30<y){var T=m-m%5;y=(h&(1<<T)-1).toString(32),h>>=T,m-=T,Yi=1<<32-xe(a)+m|c<<m|h,Ki=y+s}else Yi=1<<y|c<<m|h,Ki=s}function _g(s){s.return!==null&&(hs(s,1),i0(s,1,0))}function bg(s){for(;s===fh;)fh=xo[--So],xo[So]=null,Kl=xo[--So],xo[So]=null;for(;s===Js;)Js=Zn[--ti],Zn[ti]=null,Ki=Zn[--ti],Zn[ti]=null,Yi=Zn[--ti],Zn[ti]=null}function s0(s,a){Zn[ti++]=Yi,Zn[ti++]=Ki,Zn[ti++]=Js,Yi=a.id,Ki=a.overflow,Js=s}var en=null,ue=null,qt=!1,Zs=null,ei=!1,vg=Error(i(519));function tr(s){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Wl(Jn(a,s)),vg}function r0(s){var a=s.stateNode,c=s.type,h=s.memoizedProps;switch(a[Me]=s,a[We]=h,c){case"dialog":Vt("cancel",a),Vt("close",a);break;case"iframe":case"object":case"embed":Vt("load",a);break;case"video":case"audio":for(c=0;c<pc.length;c++)Vt(pc[c],a);break;case"source":Vt("error",a);break;case"img":case"image":case"link":Vt("error",a),Vt("load",a);break;case"details":Vt("toggle",a);break;case"input":Vt("invalid",a),Gu(a,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":Vt("invalid",a);break;case"textarea":Vt("invalid",a),Gs(a,h.value,h.defaultValue,h.children)}c=h.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||a.textContent===""+c||h.suppressHydrationWarning===!0||Ev(a.textContent,c)?(h.popover!=null&&(Vt("beforetoggle",a),Vt("toggle",a)),h.onScroll!=null&&Vt("scroll",a),h.onScrollEnd!=null&&Vt("scrollend",a),h.onClick!=null&&(a.onclick=fi),a=!0):a=!1,a||tr(s,!0)}function a0(s){for(en=s.return;en;)switch(en.tag){case 5:case 31:case 13:ei=!1;return;case 27:case 3:ei=!0;return;default:en=en.return}}function Ao(s){if(s!==en)return!1;if(!qt)return a0(s),qt=!0,!1;var a=s.tag,c;if((c=a!==3&&a!==27)&&((c=a===5)&&(c=s.type,c=!(c!=="form"&&c!=="button")||zm(s.type,s.memoizedProps)),c=!c),c&&ue&&tr(s),a0(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));ue=Mv(s)}else if(a===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));ue=Mv(s)}else a===27?(a=ue,gr(s.type)?(s=Hm,Hm=null,ue=s):ue=a):ue=en?ii(s.stateNode.nextSibling):null;return!0}function _a(){ue=en=null,qt=!1}function Tg(){var s=Zs;return s!==null&&(wn===null?wn=s:wn.push.apply(wn,s),Zs=null),s}function Wl(s){Zs===null?Zs=[s]:Zs.push(s)}var Eg=L(null),ba=null,fs=null;function er(s,a,c){ot(Eg,a._currentValue),a._currentValue=c}function ds(s){s._currentValue=Eg.current,J(Eg)}function xg(s,a,c){for(;s!==null;){var h=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,h!==null&&(h.childLanes|=a)):h!==null&&(h.childLanes&a)!==a&&(h.childLanes|=a),s===c)break;s=s.return}}function Sg(s,a,c,h){var m=s.child;for(m!==null&&(m.return=s);m!==null;){var y=m.dependencies;if(y!==null){var T=m.child;y=y.firstContext;t:for(;y!==null;){var A=y;y=m;for(var V=0;V<a.length;V++)if(A.context===a[V]){y.lanes|=c,A=y.alternate,A!==null&&(A.lanes|=c),xg(y.return,c,s),h||(T=null);break t}y=A.next}}else if(m.tag===18){if(T=m.return,T===null)throw Error(i(341));T.lanes|=c,y=T.alternate,y!==null&&(y.lanes|=c),xg(T,c,s),T=null}else T=m.child;if(T!==null)T.return=m;else for(T=m;T!==null;){if(T===s){T=null;break}if(m=T.sibling,m!==null){m.return=T.return,T=m;break}T=T.return}m=T}}function wo(s,a,c,h){s=null;for(var m=a,y=!1;m!==null;){if(!y){if((m.flags&524288)!==0)y=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var T=m.alternate;if(T===null)throw Error(i(387));if(T=T.memoizedProps,T!==null){var A=m.type;Vn(m.pendingProps.value,T.value)||(s!==null?s.push(A):s=[A])}}else if(m===Gt.current){if(T=m.alternate,T===null)throw Error(i(387));T.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(s!==null?s.push(Tc):s=[Tc])}m=m.return}s!==null&&Sg(a,s,c,h),a.flags|=262144}function dh(s){for(s=s.firstContext;s!==null;){if(!Vn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function va(s){ba=s,fs=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function nn(s){return o0(ba,s)}function gh(s,a){return ba===null&&va(s),o0(s,a)}function o0(s,a){var c=a._currentValue;if(a={context:a,memoizedValue:c,next:null},fs===null){if(s===null)throw Error(i(308));fs=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else fs=fs.next=a;return c}var Jw=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(c,h){s.push(h)}};this.abort=function(){a.aborted=!0,s.forEach(function(c){return c()})}},Zw=n.unstable_scheduleCallback,tC=n.unstable_NormalPriority,ke={$$typeof:W,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ag(){return{controller:new Jw,data:new Map,refCount:0}}function Xl(s){s.refCount--,s.refCount===0&&Zw(tC,function(){s.controller.abort()})}var Ql=null,wg=0,Co=0,Ro=null;function eC(s,a){if(Ql===null){var c=Ql=[];wg=0,Co=Im(),Ro={status:"pending",value:void 0,then:function(h){c.push(h)}}}return wg++,a.then(l0,l0),a}function l0(){if(--wg===0&&Ql!==null){Ro!==null&&(Ro.status="fulfilled");var s=Ql;Ql=null,Co=0,Ro=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function nC(s,a){var c=[],h={status:"pending",value:null,reason:null,then:function(m){c.push(m)}};return s.then(function(){h.status="fulfilled",h.value=a;for(var m=0;m<c.length;m++)(0,c[m])(a)},function(m){for(h.status="rejected",h.reason=m,m=0;m<c.length;m++)(0,c[m])(void 0)}),h}var c0=K.S;K.S=function(s,a){Yb=_n(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&eC(s,a),c0!==null&&c0(s,a)};var Ta=L(null);function Cg(){var s=Ta.current;return s!==null?s:oe.pooledCache}function mh(s,a){a===null?ot(Ta,Ta.current):ot(Ta,a.pool)}function u0(){var s=Cg();return s===null?null:{parent:ke._currentValue,pool:s}}var Io=Error(i(460)),Rg=Error(i(474)),ph=Error(i(542)),yh={then:function(){}};function h0(s){return s=s.status,s==="fulfilled"||s==="rejected"}function f0(s,a,c){switch(c=s[c],c===void 0?s.push(a):c!==a&&(a.then(fi,fi),a=c),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,g0(s),s;default:if(typeof a.status=="string")a.then(fi,fi);else{if(s=oe,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=a,s.status="pending",s.then(function(h){if(a.status==="pending"){var m=a;m.status="fulfilled",m.value=h}},function(h){if(a.status==="pending"){var m=a;m.status="rejected",m.reason=h}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,g0(s),s}throw xa=a,Io}}function Ea(s){try{var a=s._init;return a(s._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(xa=c,Io):c}}var xa=null;function d0(){if(xa===null)throw Error(i(459));var s=xa;return xa=null,s}function g0(s){if(s===Io||s===ph)throw Error(i(483))}var Do=null,$l=0;function _h(s){var a=$l;return $l+=1,Do===null&&(Do=[]),f0(Do,s,a)}function Jl(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function bh(s,a){throw a.$$typeof===b?Error(i(525)):(s=Object.prototype.toString.call(a),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function m0(s){function a(B,U){if(s){var q=B.deletions;q===null?(B.deletions=[U],B.flags|=16):q.push(U)}}function c(B,U){if(!s)return null;for(;U!==null;)a(B,U),U=U.sibling;return null}function h(B){for(var U=new Map;B!==null;)B.key!==null?U.set(B.key,B):U.set(B.index,B),B=B.sibling;return U}function m(B,U){return B=us(B,U),B.index=0,B.sibling=null,B}function y(B,U,q){return B.index=q,s?(q=B.alternate,q!==null?(q=q.index,q<U?(B.flags|=67108866,U):q):(B.flags|=67108866,U)):(B.flags|=1048576,U)}function T(B){return s&&B.alternate===null&&(B.flags|=67108866),B}function A(B,U,q,et){return U===null||U.tag!==6?(U=pg(q,B.mode,et),U.return=B,U):(U=m(U,q),U.return=B,U)}function V(B,U,q,et){var yt=q.type;return yt===w?tt(B,U,q.props.children,et,q.key):U!==null&&(U.elementType===yt||typeof yt=="object"&&yt!==null&&yt.$$typeof===C&&Ea(yt)===U.type)?(U=m(U,q.props),Jl(U,q),U.return=B,U):(U=hh(q.type,q.key,q.props,null,B.mode,et),Jl(U,q),U.return=B,U)}function G(B,U,q,et){return U===null||U.tag!==4||U.stateNode.containerInfo!==q.containerInfo||U.stateNode.implementation!==q.implementation?(U=yg(q,B.mode,et),U.return=B,U):(U=m(U,q.children||[]),U.return=B,U)}function tt(B,U,q,et,yt){return U===null||U.tag!==7?(U=ya(q,B.mode,et,yt),U.return=B,U):(U=m(U,q),U.return=B,U)}function nt(B,U,q){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=pg(""+U,B.mode,q),U.return=B,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case E:return q=hh(U.type,U.key,U.props,null,B.mode,q),Jl(q,U),q.return=B,q;case S:return U=yg(U,B.mode,q),U.return=B,U;case C:return U=Ea(U),nt(B,U,q)}if(Et(U)||j(U))return U=ya(U,B.mode,q,null),U.return=B,U;if(typeof U.then=="function")return nt(B,_h(U),q);if(U.$$typeof===W)return nt(B,gh(B,U),q);bh(B,U)}return null}function Y(B,U,q,et){var yt=U!==null?U.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return yt!==null?null:A(B,U,""+q,et);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case E:return q.key===yt?V(B,U,q,et):null;case S:return q.key===yt?G(B,U,q,et):null;case C:return q=Ea(q),Y(B,U,q,et)}if(Et(q)||j(q))return yt!==null?null:tt(B,U,q,et,null);if(typeof q.then=="function")return Y(B,U,_h(q),et);if(q.$$typeof===W)return Y(B,U,gh(B,q),et);bh(B,q)}return null}function Q(B,U,q,et,yt){if(typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint")return B=B.get(q)||null,A(U,B,""+et,yt);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case E:return B=B.get(et.key===null?q:et.key)||null,V(U,B,et,yt);case S:return B=B.get(et.key===null?q:et.key)||null,G(U,B,et,yt);case C:return et=Ea(et),Q(B,U,q,et,yt)}if(Et(et)||j(et))return B=B.get(q)||null,tt(U,B,et,yt,null);if(typeof et.then=="function")return Q(B,U,q,_h(et),yt);if(et.$$typeof===W)return Q(B,U,q,gh(U,et),yt);bh(U,et)}return null}function gt(B,U,q,et){for(var yt=null,Kt=null,mt=U,Ot=U=0,jt=null;mt!==null&&Ot<q.length;Ot++){mt.index>Ot?(jt=mt,mt=null):jt=mt.sibling;var Wt=Y(B,mt,q[Ot],et);if(Wt===null){mt===null&&(mt=jt);break}s&&mt&&Wt.alternate===null&&a(B,mt),U=y(Wt,U,Ot),Kt===null?yt=Wt:Kt.sibling=Wt,Kt=Wt,mt=jt}if(Ot===q.length)return c(B,mt),qt&&hs(B,Ot),yt;if(mt===null){for(;Ot<q.length;Ot++)mt=nt(B,q[Ot],et),mt!==null&&(U=y(mt,U,Ot),Kt===null?yt=mt:Kt.sibling=mt,Kt=mt);return qt&&hs(B,Ot),yt}for(mt=h(mt);Ot<q.length;Ot++)jt=Q(mt,B,Ot,q[Ot],et),jt!==null&&(s&&jt.alternate!==null&&mt.delete(jt.key===null?Ot:jt.key),U=y(jt,U,Ot),Kt===null?yt=jt:Kt.sibling=jt,Kt=jt);return s&&mt.forEach(function(br){return a(B,br)}),qt&&hs(B,Ot),yt}function Tt(B,U,q,et){if(q==null)throw Error(i(151));for(var yt=null,Kt=null,mt=U,Ot=U=0,jt=null,Wt=q.next();mt!==null&&!Wt.done;Ot++,Wt=q.next()){mt.index>Ot?(jt=mt,mt=null):jt=mt.sibling;var br=Y(B,mt,Wt.value,et);if(br===null){mt===null&&(mt=jt);break}s&&mt&&br.alternate===null&&a(B,mt),U=y(br,U,Ot),Kt===null?yt=br:Kt.sibling=br,Kt=br,mt=jt}if(Wt.done)return c(B,mt),qt&&hs(B,Ot),yt;if(mt===null){for(;!Wt.done;Ot++,Wt=q.next())Wt=nt(B,Wt.value,et),Wt!==null&&(U=y(Wt,U,Ot),Kt===null?yt=Wt:Kt.sibling=Wt,Kt=Wt);return qt&&hs(B,Ot),yt}for(mt=h(mt);!Wt.done;Ot++,Wt=q.next())Wt=Q(mt,B,Ot,Wt.value,et),Wt!==null&&(s&&Wt.alternate!==null&&mt.delete(Wt.key===null?Ot:Wt.key),U=y(Wt,U,Ot),Kt===null?yt=Wt:Kt.sibling=Wt,Kt=Wt);return s&&mt.forEach(function(dR){return a(B,dR)}),qt&&hs(B,Ot),yt}function ae(B,U,q,et){if(typeof q=="object"&&q!==null&&q.type===w&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case E:t:{for(var yt=q.key;U!==null;){if(U.key===yt){if(yt=q.type,yt===w){if(U.tag===7){c(B,U.sibling),et=m(U,q.props.children),et.return=B,B=et;break t}}else if(U.elementType===yt||typeof yt=="object"&&yt!==null&&yt.$$typeof===C&&Ea(yt)===U.type){c(B,U.sibling),et=m(U,q.props),Jl(et,q),et.return=B,B=et;break t}c(B,U);break}else a(B,U);U=U.sibling}q.type===w?(et=ya(q.props.children,B.mode,et,q.key),et.return=B,B=et):(et=hh(q.type,q.key,q.props,null,B.mode,et),Jl(et,q),et.return=B,B=et)}return T(B);case S:t:{for(yt=q.key;U!==null;){if(U.key===yt)if(U.tag===4&&U.stateNode.containerInfo===q.containerInfo&&U.stateNode.implementation===q.implementation){c(B,U.sibling),et=m(U,q.children||[]),et.return=B,B=et;break t}else{c(B,U);break}else a(B,U);U=U.sibling}et=yg(q,B.mode,et),et.return=B,B=et}return T(B);case C:return q=Ea(q),ae(B,U,q,et)}if(Et(q))return gt(B,U,q,et);if(j(q)){if(yt=j(q),typeof yt!="function")throw Error(i(150));return q=yt.call(q),Tt(B,U,q,et)}if(typeof q.then=="function")return ae(B,U,_h(q),et);if(q.$$typeof===W)return ae(B,U,gh(B,q),et);bh(B,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,U!==null&&U.tag===6?(c(B,U.sibling),et=m(U,q),et.return=B,B=et):(c(B,U),et=pg(q,B.mode,et),et.return=B,B=et),T(B)):c(B,U)}return function(B,U,q,et){try{$l=0;var yt=ae(B,U,q,et);return Do=null,yt}catch(mt){if(mt===Io||mt===ph)throw mt;var Kt=Ln(29,mt,null,B.mode);return Kt.lanes=et,Kt.return=B,Kt}finally{}}}var Sa=m0(!0),p0=m0(!1),nr=!1;function Ig(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Dg(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function ir(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function sr(s,a,c){var h=s.updateQueue;if(h===null)return null;if(h=h.shared,($t&2)!==0){var m=h.pending;return m===null?a.next=a:(a.next=m.next,m.next=a),h.pending=a,a=uh(s),Z_(s,null,c),a}return ch(s,h,a,c),uh(s)}function Zl(s,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194048)!==0)){var h=a.lanes;h&=s.pendingLanes,c|=h,a.lanes=c,wl(s,c)}}function Mg(s,a){var c=s.updateQueue,h=s.alternate;if(h!==null&&(h=h.updateQueue,c===h)){var m=null,y=null;if(c=c.firstBaseUpdate,c!==null){do{var T={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};y===null?m=y=T:y=y.next=T,c=c.next}while(c!==null);y===null?m=y=a:y=y.next=a}else m=y=a;c={baseState:h.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:h.shared,callbacks:h.callbacks},s.updateQueue=c;return}s=c.lastBaseUpdate,s===null?c.firstBaseUpdate=a:s.next=a,c.lastBaseUpdate=a}var Og=!1;function tc(){if(Og){var s=Ro;if(s!==null)throw s}}function ec(s,a,c,h){Og=!1;var m=s.updateQueue;nr=!1;var y=m.firstBaseUpdate,T=m.lastBaseUpdate,A=m.shared.pending;if(A!==null){m.shared.pending=null;var V=A,G=V.next;V.next=null,T===null?y=G:T.next=G,T=V;var tt=s.alternate;tt!==null&&(tt=tt.updateQueue,A=tt.lastBaseUpdate,A!==T&&(A===null?tt.firstBaseUpdate=G:A.next=G,tt.lastBaseUpdate=V))}if(y!==null){var nt=m.baseState;T=0,tt=G=V=null,A=y;do{var Y=A.lane&-536870913,Q=Y!==A.lane;if(Q?(zt&Y)===Y:(h&Y)===Y){Y!==0&&Y===Co&&(Og=!0),tt!==null&&(tt=tt.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});t:{var gt=s,Tt=A;Y=a;var ae=c;switch(Tt.tag){case 1:if(gt=Tt.payload,typeof gt=="function"){nt=gt.call(ae,nt,Y);break t}nt=gt;break t;case 3:gt.flags=gt.flags&-65537|128;case 0:if(gt=Tt.payload,Y=typeof gt=="function"?gt.call(ae,nt,Y):gt,Y==null)break t;nt=_({},nt,Y);break t;case 2:nr=!0}}Y=A.callback,Y!==null&&(s.flags|=64,Q&&(s.flags|=8192),Q=m.callbacks,Q===null?m.callbacks=[Y]:Q.push(Y))}else Q={lane:Y,tag:A.tag,payload:A.payload,callback:A.callback,next:null},tt===null?(G=tt=Q,V=nt):tt=tt.next=Q,T|=Y;if(A=A.next,A===null){if(A=m.shared.pending,A===null)break;Q=A,A=Q.next,Q.next=null,m.lastBaseUpdate=Q,m.shared.pending=null}}while(!0);tt===null&&(V=nt),m.baseState=V,m.firstBaseUpdate=G,m.lastBaseUpdate=tt,y===null&&(m.shared.lanes=0),cr|=T,s.lanes=T,s.memoizedState=nt}}function y0(s,a){if(typeof s!="function")throw Error(i(191,s));s.call(a)}function _0(s,a){var c=s.callbacks;if(c!==null)for(s.callbacks=null,s=0;s<c.length;s++)y0(c[s],a)}var Mo=L(null),vh=L(0);function b0(s,a){s=Es,ot(vh,s),ot(Mo,a),Es=s|a.baseLanes}function Ng(){ot(vh,Es),ot(Mo,Mo.current)}function kg(){Es=vh.current,J(Mo),J(vh)}var zn=L(null),ni=null;function rr(s){var a=s.alternate;ot(Ae,Ae.current&1),ot(zn,s),ni===null&&(a===null||Mo.current!==null||a.memoizedState!==null)&&(ni=s)}function Pg(s){ot(Ae,Ae.current),ot(zn,s),ni===null&&(ni=s)}function v0(s){s.tag===22?(ot(Ae,Ae.current),ot(zn,s),ni===null&&(ni=s)):ar()}function ar(){ot(Ae,Ae.current),ot(zn,zn.current)}function jn(s){J(zn),ni===s&&(ni=null),J(Ae)}var Ae=L(0);function Th(s){for(var a=s;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||Bm(c)||Fm(c)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var gs=0,Mt=null,se=null,Pe=null,Eh=!1,Oo=!1,Aa=!1,xh=0,nc=0,No=null,iC=0;function ve(){throw Error(i(321))}function Vg(s,a){if(a===null)return!1;for(var c=0;c<a.length&&c<s.length;c++)if(!Vn(s[c],a[c]))return!1;return!0}function Lg(s,a,c,h,m,y){return gs=y,Mt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,K.H=s===null||s.memoizedState===null?ib:Jg,Aa=!1,y=c(h,m),Aa=!1,Oo&&(y=E0(a,c,h,m)),T0(s),y}function T0(s){K.H=rc;var a=se!==null&&se.next!==null;if(gs=0,Pe=se=Mt=null,Eh=!1,nc=0,No=null,a)throw Error(i(300));s===null||Ve||(s=s.dependencies,s!==null&&dh(s)&&(Ve=!0))}function E0(s,a,c,h){Mt=s;var m=0;do{if(Oo&&(No=null),nc=0,Oo=!1,25<=m)throw Error(i(301));if(m+=1,Pe=se=null,s.updateQueue!=null){var y=s.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}K.H=sb,y=a(c,h)}while(Oo);return y}function sC(){var s=K.H,a=s.useState()[0];return a=typeof a.then=="function"?ic(a):a,s=s.useState()[0],(se!==null?se.memoizedState:null)!==s&&(Mt.flags|=1024),a}function zg(){var s=xh!==0;return xh=0,s}function jg(s,a,c){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~c}function Ug(s){if(Eh){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Eh=!1}gs=0,Pe=se=Mt=null,Oo=!1,nc=xh=0,No=null}function vn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pe===null?Mt.memoizedState=Pe=s:Pe=Pe.next=s,Pe}function we(){if(se===null){var s=Mt.alternate;s=s!==null?s.memoizedState:null}else s=se.next;var a=Pe===null?Mt.memoizedState:Pe.next;if(a!==null)Pe=a,se=s;else{if(s===null)throw Mt.alternate===null?Error(i(467)):Error(i(310));se=s,s={memoizedState:se.memoizedState,baseState:se.baseState,baseQueue:se.baseQueue,queue:se.queue,next:null},Pe===null?Mt.memoizedState=Pe=s:Pe=Pe.next=s}return Pe}function Sh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ic(s){var a=nc;return nc+=1,No===null&&(No=[]),s=f0(No,s,a),a=Mt,(Pe===null?a.memoizedState:Pe.next)===null&&(a=a.alternate,K.H=a===null||a.memoizedState===null?ib:Jg),s}function Ah(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return ic(s);if(s.$$typeof===W)return nn(s)}throw Error(i(438,String(s)))}function Bg(s){var a=null,c=Mt.updateQueue;if(c!==null&&(a=c.memoCache),a==null){var h=Mt.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(a={data:h.data.map(function(m){return m.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),c===null&&(c=Sh(),Mt.updateQueue=c),c.memoCache=a,c=a.data[a.index],c===void 0)for(c=a.data[a.index]=Array(s),h=0;h<s;h++)c[h]=P;return a.index++,c}function ms(s,a){return typeof a=="function"?a(s):a}function wh(s){var a=we();return Fg(a,se,s)}function Fg(s,a,c){var h=s.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=c;var m=s.baseQueue,y=h.pending;if(y!==null){if(m!==null){var T=m.next;m.next=y.next,y.next=T}a.baseQueue=m=y,h.pending=null}if(y=s.baseState,m===null)s.memoizedState=y;else{a=m.next;var A=T=null,V=null,G=a,tt=!1;do{var nt=G.lane&-536870913;if(nt!==G.lane?(zt&nt)===nt:(gs&nt)===nt){var Y=G.revertLane;if(Y===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),nt===Co&&(tt=!0);else if((gs&Y)===Y){G=G.next,Y===Co&&(tt=!0);continue}else nt={lane:0,revertLane:G.revertLane,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},V===null?(A=V=nt,T=y):V=V.next=nt,Mt.lanes|=Y,cr|=Y;nt=G.action,Aa&&c(y,nt),y=G.hasEagerState?G.eagerState:c(y,nt)}else Y={lane:nt,revertLane:G.revertLane,gesture:G.gesture,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},V===null?(A=V=Y,T=y):V=V.next=Y,Mt.lanes|=nt,cr|=nt;G=G.next}while(G!==null&&G!==a);if(V===null?T=y:V.next=A,!Vn(y,s.memoizedState)&&(Ve=!0,tt&&(c=Ro,c!==null)))throw c;s.memoizedState=y,s.baseState=T,s.baseQueue=V,h.lastRenderedState=y}return m===null&&(h.lanes=0),[s.memoizedState,h.dispatch]}function Hg(s){var a=we(),c=a.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=s;var h=c.dispatch,m=c.pending,y=a.memoizedState;if(m!==null){c.pending=null;var T=m=m.next;do y=s(y,T.action),T=T.next;while(T!==m);Vn(y,a.memoizedState)||(Ve=!0),a.memoizedState=y,a.baseQueue===null&&(a.baseState=y),c.lastRenderedState=y}return[y,h]}function x0(s,a,c){var h=Mt,m=we(),y=qt;if(y){if(c===void 0)throw Error(i(407));c=c()}else c=a();var T=!Vn((se||m).memoizedState,c);if(T&&(m.memoizedState=c,Ve=!0),m=m.queue,Yg(w0.bind(null,h,m,s),[s]),m.getSnapshot!==a||T||Pe!==null&&Pe.memoizedState.tag&1){if(h.flags|=2048,ko(9,{destroy:void 0},A0.bind(null,h,m,c,a),null),oe===null)throw Error(i(349));y||(gs&127)!==0||S0(h,a,c)}return c}function S0(s,a,c){s.flags|=16384,s={getSnapshot:a,value:c},a=Mt.updateQueue,a===null?(a=Sh(),Mt.updateQueue=a,a.stores=[s]):(c=a.stores,c===null?a.stores=[s]:c.push(s))}function A0(s,a,c,h){a.value=c,a.getSnapshot=h,C0(a)&&R0(s)}function w0(s,a,c){return c(function(){C0(a)&&R0(s)})}function C0(s){var a=s.getSnapshot;s=s.value;try{var c=a();return!Vn(s,c)}catch{return!0}}function R0(s){var a=pa(s,2);a!==null&&Cn(a,s,2)}function qg(s){var a=vn();if(typeof s=="function"){var c=s;if(s=c(),Aa){Yn(!0);try{c()}finally{Yn(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:s},a}function I0(s,a,c,h){return s.baseState=c,Fg(s,se,typeof h=="function"?h:ms)}function rC(s,a,c,h,m){if(Ih(s))throw Error(i(485));if(s=a.action,s!==null){var y={payload:m,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){y.listeners.push(T)}};K.T!==null?c(!0):y.isTransition=!1,h(y),c=a.pending,c===null?(y.next=a.pending=y,D0(a,y)):(y.next=c.next,a.pending=c.next=y)}}function D0(s,a){var c=a.action,h=a.payload,m=s.state;if(a.isTransition){var y=K.T,T={};K.T=T;try{var A=c(m,h),V=K.S;V!==null&&V(T,A),M0(s,a,A)}catch(G){Gg(s,a,G)}finally{y!==null&&T.types!==null&&(y.types=T.types),K.T=y}}else try{y=c(m,h),M0(s,a,y)}catch(G){Gg(s,a,G)}}function M0(s,a,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(h){O0(s,a,h)},function(h){return Gg(s,a,h)}):O0(s,a,c)}function O0(s,a,c){a.status="fulfilled",a.value=c,N0(a),s.state=c,a=s.pending,a!==null&&(c=a.next,c===a?s.pending=null:(c=c.next,a.next=c,D0(s,c)))}function Gg(s,a,c){var h=s.pending;if(s.pending=null,h!==null){h=h.next;do a.status="rejected",a.reason=c,N0(a),a=a.next;while(a!==h)}s.action=null}function N0(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function k0(s,a){return a}function P0(s,a){if(qt){var c=oe.formState;if(c!==null){t:{var h=Mt;if(qt){if(ue){e:{for(var m=ue,y=ei;m.nodeType!==8;){if(!y){m=null;break e}if(m=ii(m.nextSibling),m===null){m=null;break e}}y=m.data,m=y==="F!"||y==="F"?m:null}if(m){ue=ii(m.nextSibling),h=m.data==="F!";break t}}tr(h)}h=!1}h&&(a=c[0])}}return c=vn(),c.memoizedState=c.baseState=a,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:k0,lastRenderedState:a},c.queue=h,c=tb.bind(null,Mt,h),h.dispatch=c,h=qg(!1),y=$g.bind(null,Mt,!1,h.queue),h=vn(),m={state:a,dispatch:null,action:s,pending:null},h.queue=m,c=rC.bind(null,Mt,m,y,c),m.dispatch=c,h.memoizedState=s,[a,c,!1]}function V0(s){var a=we();return L0(a,se,s)}function L0(s,a,c){if(a=Fg(s,a,k0)[0],s=wh(ms)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var h=ic(a)}catch(T){throw T===Io?ph:T}else h=a;a=we();var m=a.queue,y=m.dispatch;return c!==a.memoizedState&&(Mt.flags|=2048,ko(9,{destroy:void 0},aC.bind(null,m,c),null)),[h,y,s]}function aC(s,a){s.action=a}function z0(s){var a=we(),c=se;if(c!==null)return L0(a,c,s);we(),a=a.memoizedState,c=we();var h=c.queue.dispatch;return c.memoizedState=s,[a,h,!1]}function ko(s,a,c,h){return s={tag:s,create:c,deps:h,inst:a,next:null},a=Mt.updateQueue,a===null&&(a=Sh(),Mt.updateQueue=a),c=a.lastEffect,c===null?a.lastEffect=s.next=s:(h=c.next,c.next=s,s.next=h,a.lastEffect=s),s}function j0(){return we().memoizedState}function Ch(s,a,c,h){var m=vn();Mt.flags|=s,m.memoizedState=ko(1|a,{destroy:void 0},c,h===void 0?null:h)}function Rh(s,a,c,h){var m=we();h=h===void 0?null:h;var y=m.memoizedState.inst;se!==null&&h!==null&&Vg(h,se.memoizedState.deps)?m.memoizedState=ko(a,y,c,h):(Mt.flags|=s,m.memoizedState=ko(1|a,y,c,h))}function U0(s,a){Ch(8390656,8,s,a)}function Yg(s,a){Rh(2048,8,s,a)}function oC(s){Mt.flags|=4;var a=Mt.updateQueue;if(a===null)a=Sh(),Mt.updateQueue=a,a.events=[s];else{var c=a.events;c===null?a.events=[s]:c.push(s)}}function B0(s){var a=we().memoizedState;return oC({ref:a,nextImpl:s}),function(){if(($t&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function F0(s,a){return Rh(4,2,s,a)}function H0(s,a){return Rh(4,4,s,a)}function q0(s,a){if(typeof a=="function"){s=s();var c=a(s);return function(){typeof c=="function"?c():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function G0(s,a,c){c=c!=null?c.concat([s]):null,Rh(4,4,q0.bind(null,a,s),c)}function Kg(){}function Y0(s,a){var c=we();a=a===void 0?null:a;var h=c.memoizedState;return a!==null&&Vg(a,h[1])?h[0]:(c.memoizedState=[s,a],s)}function K0(s,a){var c=we();a=a===void 0?null:a;var h=c.memoizedState;if(a!==null&&Vg(a,h[1]))return h[0];if(h=s(),Aa){Yn(!0);try{s()}finally{Yn(!1)}}return c.memoizedState=[h,a],h}function Wg(s,a,c){return c===void 0||(gs&1073741824)!==0&&(zt&261930)===0?s.memoizedState=a:(s.memoizedState=c,s=Wb(),Mt.lanes|=s,cr|=s,c)}function W0(s,a,c,h){return Vn(c,a)?c:Mo.current!==null?(s=Wg(s,c,h),Vn(s,a)||(Ve=!0),s):(gs&42)===0||(gs&1073741824)!==0&&(zt&261930)===0?(Ve=!0,s.memoizedState=c):(s=Wb(),Mt.lanes|=s,cr|=s,a)}function X0(s,a,c,h,m){var y=at.p;at.p=y!==0&&8>y?y:8;var T=K.T,A={};K.T=A,$g(s,!1,a,c);try{var V=m(),G=K.S;if(G!==null&&G(A,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var tt=nC(V,h);sc(s,a,tt,Fn(s))}else sc(s,a,h,Fn(s))}catch(nt){sc(s,a,{then:function(){},status:"rejected",reason:nt},Fn())}finally{at.p=y,T!==null&&A.types!==null&&(T.types=A.types),K.T=T}}function lC(){}function Xg(s,a,c,h){if(s.tag!==5)throw Error(i(476));var m=Q0(s).queue;X0(s,m,a,ft,c===null?lC:function(){return $0(s),c(h)})}function Q0(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:ft,baseState:ft,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:ft},next:null};var c={};return a.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:c},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function $0(s){var a=Q0(s);a.next===null&&(a=s.alternate.memoizedState),sc(s,a.next.queue,{},Fn())}function Qg(){return nn(Tc)}function J0(){return we().memoizedState}function Z0(){return we().memoizedState}function cC(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var c=Fn();s=ir(c);var h=sr(a,s,c);h!==null&&(Cn(h,a,c),Zl(h,a,c)),a={cache:Ag()},s.payload=a;return}a=a.return}}function uC(s,a,c){var h=Fn();c={lane:h,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Ih(s)?eb(a,c):(c=gg(s,a,c,h),c!==null&&(Cn(c,s,h),nb(c,a,h)))}function tb(s,a,c){var h=Fn();sc(s,a,c,h)}function sc(s,a,c,h){var m={lane:h,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Ih(s))eb(a,m);else{var y=s.alternate;if(s.lanes===0&&(y===null||y.lanes===0)&&(y=a.lastRenderedReducer,y!==null))try{var T=a.lastRenderedState,A=y(T,c);if(m.hasEagerState=!0,m.eagerState=A,Vn(A,T))return ch(s,a,m,0),oe===null&&lh(),!1}catch{}finally{}if(c=gg(s,a,m,h),c!==null)return Cn(c,s,h),nb(c,a,h),!0}return!1}function $g(s,a,c,h){if(h={lane:2,revertLane:Im(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Ih(s)){if(a)throw Error(i(479))}else a=gg(s,c,h,2),a!==null&&Cn(a,s,2)}function Ih(s){var a=s.alternate;return s===Mt||a!==null&&a===Mt}function eb(s,a){Oo=Eh=!0;var c=s.pending;c===null?a.next=a:(a.next=c.next,c.next=a),s.pending=a}function nb(s,a,c){if((c&4194048)!==0){var h=a.lanes;h&=s.pendingLanes,c|=h,a.lanes=c,wl(s,c)}}var rc={readContext:nn,use:Ah,useCallback:ve,useContext:ve,useEffect:ve,useImperativeHandle:ve,useLayoutEffect:ve,useInsertionEffect:ve,useMemo:ve,useReducer:ve,useRef:ve,useState:ve,useDebugValue:ve,useDeferredValue:ve,useTransition:ve,useSyncExternalStore:ve,useId:ve,useHostTransitionStatus:ve,useFormState:ve,useActionState:ve,useOptimistic:ve,useMemoCache:ve,useCacheRefresh:ve};rc.useEffectEvent=ve;var ib={readContext:nn,use:Ah,useCallback:function(s,a){return vn().memoizedState=[s,a===void 0?null:a],s},useContext:nn,useEffect:U0,useImperativeHandle:function(s,a,c){c=c!=null?c.concat([s]):null,Ch(4194308,4,q0.bind(null,a,s),c)},useLayoutEffect:function(s,a){return Ch(4194308,4,s,a)},useInsertionEffect:function(s,a){Ch(4,2,s,a)},useMemo:function(s,a){var c=vn();a=a===void 0?null:a;var h=s();if(Aa){Yn(!0);try{s()}finally{Yn(!1)}}return c.memoizedState=[h,a],h},useReducer:function(s,a,c){var h=vn();if(c!==void 0){var m=c(a);if(Aa){Yn(!0);try{c(a)}finally{Yn(!1)}}}else m=a;return h.memoizedState=h.baseState=m,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:m},h.queue=s,s=s.dispatch=uC.bind(null,Mt,s),[h.memoizedState,s]},useRef:function(s){var a=vn();return s={current:s},a.memoizedState=s},useState:function(s){s=qg(s);var a=s.queue,c=tb.bind(null,Mt,a);return a.dispatch=c,[s.memoizedState,c]},useDebugValue:Kg,useDeferredValue:function(s,a){var c=vn();return Wg(c,s,a)},useTransition:function(){var s=qg(!1);return s=X0.bind(null,Mt,s.queue,!0,!1),vn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,c){var h=Mt,m=vn();if(qt){if(c===void 0)throw Error(i(407));c=c()}else{if(c=a(),oe===null)throw Error(i(349));(zt&127)!==0||S0(h,a,c)}m.memoizedState=c;var y={value:c,getSnapshot:a};return m.queue=y,U0(w0.bind(null,h,y,s),[s]),h.flags|=2048,ko(9,{destroy:void 0},A0.bind(null,h,y,c,a),null),c},useId:function(){var s=vn(),a=oe.identifierPrefix;if(qt){var c=Ki,h=Yi;c=(h&~(1<<32-xe(h)-1)).toString(32)+c,a="_"+a+"R_"+c,c=xh++,0<c&&(a+="H"+c.toString(32)),a+="_"}else c=iC++,a="_"+a+"r_"+c.toString(32)+"_";return s.memoizedState=a},useHostTransitionStatus:Qg,useFormState:P0,useActionState:P0,useOptimistic:function(s){var a=vn();a.memoizedState=a.baseState=s;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=c,a=$g.bind(null,Mt,!0,c),c.dispatch=a,[s,a]},useMemoCache:Bg,useCacheRefresh:function(){return vn().memoizedState=cC.bind(null,Mt)},useEffectEvent:function(s){var a=vn(),c={impl:s};return a.memoizedState=c,function(){if(($t&2)!==0)throw Error(i(440));return c.impl.apply(void 0,arguments)}}},Jg={readContext:nn,use:Ah,useCallback:Y0,useContext:nn,useEffect:Yg,useImperativeHandle:G0,useInsertionEffect:F0,useLayoutEffect:H0,useMemo:K0,useReducer:wh,useRef:j0,useState:function(){return wh(ms)},useDebugValue:Kg,useDeferredValue:function(s,a){var c=we();return W0(c,se.memoizedState,s,a)},useTransition:function(){var s=wh(ms)[0],a=we().memoizedState;return[typeof s=="boolean"?s:ic(s),a]},useSyncExternalStore:x0,useId:J0,useHostTransitionStatus:Qg,useFormState:V0,useActionState:V0,useOptimistic:function(s,a){var c=we();return I0(c,se,s,a)},useMemoCache:Bg,useCacheRefresh:Z0};Jg.useEffectEvent=B0;var sb={readContext:nn,use:Ah,useCallback:Y0,useContext:nn,useEffect:Yg,useImperativeHandle:G0,useInsertionEffect:F0,useLayoutEffect:H0,useMemo:K0,useReducer:Hg,useRef:j0,useState:function(){return Hg(ms)},useDebugValue:Kg,useDeferredValue:function(s,a){var c=we();return se===null?Wg(c,s,a):W0(c,se.memoizedState,s,a)},useTransition:function(){var s=Hg(ms)[0],a=we().memoizedState;return[typeof s=="boolean"?s:ic(s),a]},useSyncExternalStore:x0,useId:J0,useHostTransitionStatus:Qg,useFormState:z0,useActionState:z0,useOptimistic:function(s,a){var c=we();return se!==null?I0(c,se,s,a):(c.baseState=s,[s,c.queue.dispatch])},useMemoCache:Bg,useCacheRefresh:Z0};sb.useEffectEvent=B0;function Zg(s,a,c,h){a=s.memoizedState,c=c(h,a),c=c==null?a:_({},a,c),s.memoizedState=c,s.lanes===0&&(s.updateQueue.baseState=c)}var tm={enqueueSetState:function(s,a,c){s=s._reactInternals;var h=Fn(),m=ir(h);m.payload=a,c!=null&&(m.callback=c),a=sr(s,m,h),a!==null&&(Cn(a,s,h),Zl(a,s,h))},enqueueReplaceState:function(s,a,c){s=s._reactInternals;var h=Fn(),m=ir(h);m.tag=1,m.payload=a,c!=null&&(m.callback=c),a=sr(s,m,h),a!==null&&(Cn(a,s,h),Zl(a,s,h))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var c=Fn(),h=ir(c);h.tag=2,a!=null&&(h.callback=a),a=sr(s,h,c),a!==null&&(Cn(a,s,c),Zl(a,s,c))}};function rb(s,a,c,h,m,y,T){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(h,y,T):a.prototype&&a.prototype.isPureReactComponent?!Gl(c,h)||!Gl(m,y):!0}function ab(s,a,c,h){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,h),a.state!==s&&tm.enqueueReplaceState(a,a.state,null)}function wa(s,a){var c=a;if("ref"in a){c={};for(var h in a)h!=="ref"&&(c[h]=a[h])}if(s=s.defaultProps){c===a&&(c=_({},c));for(var m in s)c[m]===void 0&&(c[m]=s[m])}return c}function ob(s){oh(s)}function lb(s){console.error(s)}function cb(s){oh(s)}function Dh(s,a){try{var c=s.onUncaughtError;c(a.value,{componentStack:a.stack})}catch(h){setTimeout(function(){throw h})}}function ub(s,a,c){try{var h=s.onCaughtError;h(c.value,{componentStack:c.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function em(s,a,c){return c=ir(c),c.tag=3,c.payload={element:null},c.callback=function(){Dh(s,a)},c}function hb(s){return s=ir(s),s.tag=3,s}function fb(s,a,c,h){var m=c.type.getDerivedStateFromError;if(typeof m=="function"){var y=h.value;s.payload=function(){return m(y)},s.callback=function(){ub(a,c,h)}}var T=c.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(s.callback=function(){ub(a,c,h),typeof m!="function"&&(ur===null?ur=new Set([this]):ur.add(this));var A=h.stack;this.componentDidCatch(h.value,{componentStack:A!==null?A:""})})}function hC(s,a,c,h,m){if(c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(a=c.alternate,a!==null&&wo(a,c,m,!0),c=zn.current,c!==null){switch(c.tag){case 31:case 13:return ni===null?Fh():c.alternate===null&&Te===0&&(Te=3),c.flags&=-257,c.flags|=65536,c.lanes=m,h===yh?c.flags|=16384:(a=c.updateQueue,a===null?c.updateQueue=new Set([h]):a.add(h),wm(s,h,m)),!1;case 22:return c.flags|=65536,h===yh?c.flags|=16384:(a=c.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([h])},c.updateQueue=a):(c=a.retryQueue,c===null?a.retryQueue=new Set([h]):c.add(h)),wm(s,h,m)),!1}throw Error(i(435,c.tag))}return wm(s,h,m),Fh(),!1}if(qt)return a=zn.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=m,h!==vg&&(s=Error(i(422),{cause:h}),Wl(Jn(s,c)))):(h!==vg&&(a=Error(i(423),{cause:h}),Wl(Jn(a,c))),s=s.current.alternate,s.flags|=65536,m&=-m,s.lanes|=m,h=Jn(h,c),m=em(s.stateNode,h,m),Mg(s,m),Te!==4&&(Te=2)),!1;var y=Error(i(520),{cause:h});if(y=Jn(y,c),dc===null?dc=[y]:dc.push(y),Te!==4&&(Te=2),a===null)return!0;h=Jn(h,c),c=a;do{switch(c.tag){case 3:return c.flags|=65536,s=m&-m,c.lanes|=s,s=em(c.stateNode,h,s),Mg(c,s),!1;case 1:if(a=c.type,y=c.stateNode,(c.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ur===null||!ur.has(y))))return c.flags|=65536,m&=-m,c.lanes|=m,m=hb(m),fb(m,s,c,h),Mg(c,m),!1}c=c.return}while(c!==null);return!1}var nm=Error(i(461)),Ve=!1;function sn(s,a,c,h){a.child=s===null?p0(a,null,c,h):Sa(a,s.child,c,h)}function db(s,a,c,h,m){c=c.render;var y=a.ref;if("ref"in h){var T={};for(var A in h)A!=="ref"&&(T[A]=h[A])}else T=h;return va(a),h=Lg(s,a,c,T,y,m),A=zg(),s!==null&&!Ve?(jg(s,a,m),ps(s,a,m)):(qt&&A&&_g(a),a.flags|=1,sn(s,a,h,m),a.child)}function gb(s,a,c,h,m){if(s===null){var y=c.type;return typeof y=="function"&&!mg(y)&&y.defaultProps===void 0&&c.compare===null?(a.tag=15,a.type=y,mb(s,a,y,h,m)):(s=hh(c.type,null,h,a,a.mode,m),s.ref=a.ref,s.return=a,a.child=s)}if(y=s.child,!um(s,m)){var T=y.memoizedProps;if(c=c.compare,c=c!==null?c:Gl,c(T,h)&&s.ref===a.ref)return ps(s,a,m)}return a.flags|=1,s=us(y,h),s.ref=a.ref,s.return=a,a.child=s}function mb(s,a,c,h,m){if(s!==null){var y=s.memoizedProps;if(Gl(y,h)&&s.ref===a.ref)if(Ve=!1,a.pendingProps=h=y,um(s,m))(s.flags&131072)!==0&&(Ve=!0);else return a.lanes=s.lanes,ps(s,a,m)}return im(s,a,c,h,m)}function pb(s,a,c,h){var m=h.children,y=s!==null?s.memoizedState:null;if(s===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((a.flags&128)!==0){if(y=y!==null?y.baseLanes|c:c,s!==null){for(h=a.child=s.child,m=0;h!==null;)m=m|h.lanes|h.childLanes,h=h.sibling;h=m&~y}else h=0,a.child=null;return yb(s,a,y,c,h)}if((c&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&mh(a,y!==null?y.cachePool:null),y!==null?b0(a,y):Ng(),v0(a);else return h=a.lanes=536870912,yb(s,a,y!==null?y.baseLanes|c:c,c,h)}else y!==null?(mh(a,y.cachePool),b0(a,y),ar(),a.memoizedState=null):(s!==null&&mh(a,null),Ng(),ar());return sn(s,a,m,c),a.child}function ac(s,a){return s!==null&&s.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function yb(s,a,c,h,m){var y=Cg();return y=y===null?null:{parent:ke._currentValue,pool:y},a.memoizedState={baseLanes:c,cachePool:y},s!==null&&mh(a,null),Ng(),v0(a),s!==null&&wo(s,a,h,!0),a.childLanes=m,null}function Mh(s,a){return a=Nh({mode:a.mode,children:a.children},s.mode),a.ref=s.ref,s.child=a,a.return=s,a}function _b(s,a,c){return Sa(a,s.child,null,c),s=Mh(a,a.pendingProps),s.flags|=2,jn(a),a.memoizedState=null,s}function fC(s,a,c){var h=a.pendingProps,m=(a.flags&128)!==0;if(a.flags&=-129,s===null){if(qt){if(h.mode==="hidden")return s=Mh(a,h),a.lanes=536870912,ac(null,s);if(Pg(a),(s=ue)?(s=Dv(s,ei),s=s!==null&&s.data==="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:Js!==null?{id:Yi,overflow:Ki}:null,retryLane:536870912,hydrationErrors:null},c=e0(s),c.return=a,a.child=c,en=a,ue=null)):s=null,s===null)throw tr(a);return a.lanes=536870912,null}return Mh(a,h)}var y=s.memoizedState;if(y!==null){var T=y.dehydrated;if(Pg(a),m)if(a.flags&256)a.flags&=-257,a=_b(s,a,c);else if(a.memoizedState!==null)a.child=s.child,a.flags|=128,a=null;else throw Error(i(558));else if(Ve||wo(s,a,c,!1),m=(c&s.childLanes)!==0,Ve||m){if(h=oe,h!==null&&(T=Cl(h,c),T!==0&&T!==y.retryLane))throw y.retryLane=T,pa(s,T),Cn(h,s,T),nm;Fh(),a=_b(s,a,c)}else s=y.treeContext,ue=ii(T.nextSibling),en=a,qt=!0,Zs=null,ei=!1,s!==null&&s0(a,s),a=Mh(a,h),a.flags|=4096;return a}return s=us(s.child,{mode:h.mode,children:h.children}),s.ref=a.ref,a.child=s,s.return=a,s}function Oh(s,a){var c=a.ref;if(c===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(i(284));(s===null||s.ref!==c)&&(a.flags|=4194816)}}function im(s,a,c,h,m){return va(a),c=Lg(s,a,c,h,void 0,m),h=zg(),s!==null&&!Ve?(jg(s,a,m),ps(s,a,m)):(qt&&h&&_g(a),a.flags|=1,sn(s,a,c,m),a.child)}function bb(s,a,c,h,m,y){return va(a),a.updateQueue=null,c=E0(a,h,c,m),T0(s),h=zg(),s!==null&&!Ve?(jg(s,a,y),ps(s,a,y)):(qt&&h&&_g(a),a.flags|=1,sn(s,a,c,y),a.child)}function vb(s,a,c,h,m){if(va(a),a.stateNode===null){var y=Eo,T=c.contextType;typeof T=="object"&&T!==null&&(y=nn(T)),y=new c(h,y),a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=tm,a.stateNode=y,y._reactInternals=a,y=a.stateNode,y.props=h,y.state=a.memoizedState,y.refs={},Ig(a),T=c.contextType,y.context=typeof T=="object"&&T!==null?nn(T):Eo,y.state=a.memoizedState,T=c.getDerivedStateFromProps,typeof T=="function"&&(Zg(a,c,T,h),y.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(T=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),T!==y.state&&tm.enqueueReplaceState(y,y.state,null),ec(a,h,y,m),tc(),y.state=a.memoizedState),typeof y.componentDidMount=="function"&&(a.flags|=4194308),h=!0}else if(s===null){y=a.stateNode;var A=a.memoizedProps,V=wa(c,A);y.props=V;var G=y.context,tt=c.contextType;T=Eo,typeof tt=="object"&&tt!==null&&(T=nn(tt));var nt=c.getDerivedStateFromProps;tt=typeof nt=="function"||typeof y.getSnapshotBeforeUpdate=="function",A=a.pendingProps!==A,tt||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(A||G!==T)&&ab(a,y,h,T),nr=!1;var Y=a.memoizedState;y.state=Y,ec(a,h,y,m),tc(),G=a.memoizedState,A||Y!==G||nr?(typeof nt=="function"&&(Zg(a,c,nt,h),G=a.memoizedState),(V=nr||rb(a,c,V,h,Y,G,T))?(tt||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(a.flags|=4194308)):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=h,a.memoizedState=G),y.props=h,y.state=G,y.context=T,h=V):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),h=!1)}else{y=a.stateNode,Dg(s,a),T=a.memoizedProps,tt=wa(c,T),y.props=tt,nt=a.pendingProps,Y=y.context,G=c.contextType,V=Eo,typeof G=="object"&&G!==null&&(V=nn(G)),A=c.getDerivedStateFromProps,(G=typeof A=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T!==nt||Y!==V)&&ab(a,y,h,V),nr=!1,Y=a.memoizedState,y.state=Y,ec(a,h,y,m),tc();var Q=a.memoizedState;T!==nt||Y!==Q||nr||s!==null&&s.dependencies!==null&&dh(s.dependencies)?(typeof A=="function"&&(Zg(a,c,A,h),Q=a.memoizedState),(tt=nr||rb(a,c,tt,h,Y,Q,V)||s!==null&&s.dependencies!==null&&dh(s.dependencies))?(G||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(h,Q,V),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(h,Q,V)),typeof y.componentDidUpdate=="function"&&(a.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof y.componentDidUpdate!="function"||T===s.memoizedProps&&Y===s.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===s.memoizedProps&&Y===s.memoizedState||(a.flags|=1024),a.memoizedProps=h,a.memoizedState=Q),y.props=h,y.state=Q,y.context=V,h=tt):(typeof y.componentDidUpdate!="function"||T===s.memoizedProps&&Y===s.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===s.memoizedProps&&Y===s.memoizedState||(a.flags|=1024),h=!1)}return y=h,Oh(s,a),h=(a.flags&128)!==0,y||h?(y=a.stateNode,c=h&&typeof c.getDerivedStateFromError!="function"?null:y.render(),a.flags|=1,s!==null&&h?(a.child=Sa(a,s.child,null,m),a.child=Sa(a,null,c,m)):sn(s,a,c,m),a.memoizedState=y.state,s=a.child):s=ps(s,a,m),s}function Tb(s,a,c,h){return _a(),a.flags|=256,sn(s,a,c,h),a.child}var sm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function rm(s){return{baseLanes:s,cachePool:u0()}}function am(s,a,c){return s=s!==null?s.childLanes&~c:0,a&&(s|=Bn),s}function Eb(s,a,c){var h=a.pendingProps,m=!1,y=(a.flags&128)!==0,T;if((T=y)||(T=s!==null&&s.memoizedState===null?!1:(Ae.current&2)!==0),T&&(m=!0,a.flags&=-129),T=(a.flags&32)!==0,a.flags&=-33,s===null){if(qt){if(m?rr(a):ar(),(s=ue)?(s=Dv(s,ei),s=s!==null&&s.data!=="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:Js!==null?{id:Yi,overflow:Ki}:null,retryLane:536870912,hydrationErrors:null},c=e0(s),c.return=a,a.child=c,en=a,ue=null)):s=null,s===null)throw tr(a);return Fm(s)?a.lanes=32:a.lanes=536870912,null}var A=h.children;return h=h.fallback,m?(ar(),m=a.mode,A=Nh({mode:"hidden",children:A},m),h=ya(h,m,c,null),A.return=a,h.return=a,A.sibling=h,a.child=A,h=a.child,h.memoizedState=rm(c),h.childLanes=am(s,T,c),a.memoizedState=sm,ac(null,h)):(rr(a),om(a,A))}var V=s.memoizedState;if(V!==null&&(A=V.dehydrated,A!==null)){if(y)a.flags&256?(rr(a),a.flags&=-257,a=lm(s,a,c)):a.memoizedState!==null?(ar(),a.child=s.child,a.flags|=128,a=null):(ar(),A=h.fallback,m=a.mode,h=Nh({mode:"visible",children:h.children},m),A=ya(A,m,c,null),A.flags|=2,h.return=a,A.return=a,h.sibling=A,a.child=h,Sa(a,s.child,null,c),h=a.child,h.memoizedState=rm(c),h.childLanes=am(s,T,c),a.memoizedState=sm,a=ac(null,h));else if(rr(a),Fm(A)){if(T=A.nextSibling&&A.nextSibling.dataset,T)var G=T.dgst;T=G,h=Error(i(419)),h.stack="",h.digest=T,Wl({value:h,source:null,stack:null}),a=lm(s,a,c)}else if(Ve||wo(s,a,c,!1),T=(c&s.childLanes)!==0,Ve||T){if(T=oe,T!==null&&(h=Cl(T,c),h!==0&&h!==V.retryLane))throw V.retryLane=h,pa(s,h),Cn(T,s,h),nm;Bm(A)||Fh(),a=lm(s,a,c)}else Bm(A)?(a.flags|=192,a.child=s.child,a=null):(s=V.treeContext,ue=ii(A.nextSibling),en=a,qt=!0,Zs=null,ei=!1,s!==null&&s0(a,s),a=om(a,h.children),a.flags|=4096);return a}return m?(ar(),A=h.fallback,m=a.mode,V=s.child,G=V.sibling,h=us(V,{mode:"hidden",children:h.children}),h.subtreeFlags=V.subtreeFlags&65011712,G!==null?A=us(G,A):(A=ya(A,m,c,null),A.flags|=2),A.return=a,h.return=a,h.sibling=A,a.child=h,ac(null,h),h=a.child,A=s.child.memoizedState,A===null?A=rm(c):(m=A.cachePool,m!==null?(V=ke._currentValue,m=m.parent!==V?{parent:V,pool:V}:m):m=u0(),A={baseLanes:A.baseLanes|c,cachePool:m}),h.memoizedState=A,h.childLanes=am(s,T,c),a.memoizedState=sm,ac(s.child,h)):(rr(a),c=s.child,s=c.sibling,c=us(c,{mode:"visible",children:h.children}),c.return=a,c.sibling=null,s!==null&&(T=a.deletions,T===null?(a.deletions=[s],a.flags|=16):T.push(s)),a.child=c,a.memoizedState=null,c)}function om(s,a){return a=Nh({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function Nh(s,a){return s=Ln(22,s,null,a),s.lanes=0,s}function lm(s,a,c){return Sa(a,s.child,null,c),s=om(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function xb(s,a,c){s.lanes|=a;var h=s.alternate;h!==null&&(h.lanes|=a),xg(s.return,a,c)}function cm(s,a,c,h,m,y){var T=s.memoizedState;T===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:c,tailMode:m,treeForkCount:y}:(T.isBackwards=a,T.rendering=null,T.renderingStartTime=0,T.last=h,T.tail=c,T.tailMode=m,T.treeForkCount=y)}function Sb(s,a,c){var h=a.pendingProps,m=h.revealOrder,y=h.tail;h=h.children;var T=Ae.current,A=(T&2)!==0;if(A?(T=T&1|2,a.flags|=128):T&=1,ot(Ae,T),sn(s,a,h,c),h=qt?Kl:0,!A&&s!==null&&(s.flags&128)!==0)t:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&xb(s,c,a);else if(s.tag===19)xb(s,c,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break t;for(;s.sibling===null;){if(s.return===null||s.return===a)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(m){case"forwards":for(c=a.child,m=null;c!==null;)s=c.alternate,s!==null&&Th(s)===null&&(m=c),c=c.sibling;c=m,c===null?(m=a.child,a.child=null):(m=c.sibling,c.sibling=null),cm(a,!1,m,c,y,h);break;case"backwards":case"unstable_legacy-backwards":for(c=null,m=a.child,a.child=null;m!==null;){if(s=m.alternate,s!==null&&Th(s)===null){a.child=m;break}s=m.sibling,m.sibling=c,c=m,m=s}cm(a,!0,c,null,y,h);break;case"together":cm(a,!1,null,null,void 0,h);break;default:a.memoizedState=null}return a.child}function ps(s,a,c){if(s!==null&&(a.dependencies=s.dependencies),cr|=a.lanes,(c&a.childLanes)===0)if(s!==null){if(wo(s,a,c,!1),(c&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(i(153));if(a.child!==null){for(s=a.child,c=us(s,s.pendingProps),a.child=c,c.return=a;s.sibling!==null;)s=s.sibling,c=c.sibling=us(s,s.pendingProps),c.return=a;c.sibling=null}return a.child}function um(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&dh(s)))}function dC(s,a,c){switch(a.tag){case 3:He(a,a.stateNode.containerInfo),er(a,ke,s.memoizedState.cache),_a();break;case 27:case 5:Jr(a);break;case 4:He(a,a.stateNode.containerInfo);break;case 10:er(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Pg(a),null;break;case 13:var h=a.memoizedState;if(h!==null)return h.dehydrated!==null?(rr(a),a.flags|=128,null):(c&a.child.childLanes)!==0?Eb(s,a,c):(rr(a),s=ps(s,a,c),s!==null?s.sibling:null);rr(a);break;case 19:var m=(s.flags&128)!==0;if(h=(c&a.childLanes)!==0,h||(wo(s,a,c,!1),h=(c&a.childLanes)!==0),m){if(h)return Sb(s,a,c);a.flags|=128}if(m=a.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),ot(Ae,Ae.current),h)break;return null;case 22:return a.lanes=0,pb(s,a,c,a.pendingProps);case 24:er(a,ke,s.memoizedState.cache)}return ps(s,a,c)}function Ab(s,a,c){if(s!==null)if(s.memoizedProps!==a.pendingProps)Ve=!0;else{if(!um(s,c)&&(a.flags&128)===0)return Ve=!1,dC(s,a,c);Ve=(s.flags&131072)!==0}else Ve=!1,qt&&(a.flags&1048576)!==0&&i0(a,Kl,a.index);switch(a.lanes=0,a.tag){case 16:t:{var h=a.pendingProps;if(s=Ea(a.elementType),a.type=s,typeof s=="function")mg(s)?(h=wa(s,h),a.tag=1,a=vb(null,a,s,h,c)):(a.tag=0,a=im(null,a,s,h,c));else{if(s!=null){var m=s.$$typeof;if(m===Z){a.tag=11,a=db(null,a,s,h,c);break t}else if(m===M){a.tag=14,a=gb(null,a,s,h,c);break t}}throw a=Nt(s)||s,Error(i(306,a,""))}}return a;case 0:return im(s,a,a.type,a.pendingProps,c);case 1:return h=a.type,m=wa(h,a.pendingProps),vb(s,a,h,m,c);case 3:t:{if(He(a,a.stateNode.containerInfo),s===null)throw Error(i(387));h=a.pendingProps;var y=a.memoizedState;m=y.element,Dg(s,a),ec(a,h,null,c);var T=a.memoizedState;if(h=T.cache,er(a,ke,h),h!==y.cache&&Sg(a,[ke],c,!0),tc(),h=T.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:T.cache},a.updateQueue.baseState=y,a.memoizedState=y,a.flags&256){a=Tb(s,a,h,c);break t}else if(h!==m){m=Jn(Error(i(424)),a),Wl(m),a=Tb(s,a,h,c);break t}else{switch(s=a.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(ue=ii(s.firstChild),en=a,qt=!0,Zs=null,ei=!0,c=p0(a,null,h,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(_a(),h===m){a=ps(s,a,c);break t}sn(s,a,h,c)}a=a.child}return a;case 26:return Oh(s,a),s===null?(c=Vv(a.type,null,a.pendingProps,null))?a.memoizedState=c:qt||(c=a.type,s=a.pendingProps,h=Xh(xt.current).createElement(c),h[Me]=a,h[We]=s,rn(h,c,s),Oe(h),a.stateNode=h):a.memoizedState=Vv(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return Jr(a),s===null&&qt&&(h=a.stateNode=Nv(a.type,a.pendingProps,xt.current),en=a,ei=!0,m=ue,gr(a.type)?(Hm=m,ue=ii(h.firstChild)):ue=m),sn(s,a,a.pendingProps.children,c),Oh(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&qt&&((m=h=ue)&&(h=HC(h,a.type,a.pendingProps,ei),h!==null?(a.stateNode=h,en=a,ue=ii(h.firstChild),ei=!1,m=!0):m=!1),m||tr(a)),Jr(a),m=a.type,y=a.pendingProps,T=s!==null?s.memoizedProps:null,h=y.children,zm(m,y)?h=null:T!==null&&zm(m,T)&&(a.flags|=32),a.memoizedState!==null&&(m=Lg(s,a,sC,null,null,c),Tc._currentValue=m),Oh(s,a),sn(s,a,h,c),a.child;case 6:return s===null&&qt&&((s=c=ue)&&(c=qC(c,a.pendingProps,ei),c!==null?(a.stateNode=c,en=a,ue=null,s=!0):s=!1),s||tr(a)),null;case 13:return Eb(s,a,c);case 4:return He(a,a.stateNode.containerInfo),h=a.pendingProps,s===null?a.child=Sa(a,null,h,c):sn(s,a,h,c),a.child;case 11:return db(s,a,a.type,a.pendingProps,c);case 7:return sn(s,a,a.pendingProps,c),a.child;case 8:return sn(s,a,a.pendingProps.children,c),a.child;case 12:return sn(s,a,a.pendingProps.children,c),a.child;case 10:return h=a.pendingProps,er(a,a.type,h.value),sn(s,a,h.children,c),a.child;case 9:return m=a.type._context,h=a.pendingProps.children,va(a),m=nn(m),h=h(m),a.flags|=1,sn(s,a,h,c),a.child;case 14:return gb(s,a,a.type,a.pendingProps,c);case 15:return mb(s,a,a.type,a.pendingProps,c);case 19:return Sb(s,a,c);case 31:return fC(s,a,c);case 22:return pb(s,a,c,a.pendingProps);case 24:return va(a),h=nn(ke),s===null?(m=Cg(),m===null&&(m=oe,y=Ag(),m.pooledCache=y,y.refCount++,y!==null&&(m.pooledCacheLanes|=c),m=y),a.memoizedState={parent:h,cache:m},Ig(a),er(a,ke,m)):((s.lanes&c)!==0&&(Dg(s,a),ec(a,null,null,c),tc()),m=s.memoizedState,y=a.memoizedState,m.parent!==h?(m={parent:h,cache:h},a.memoizedState=m,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=m),er(a,ke,h)):(h=y.cache,er(a,ke,h),h!==m.cache&&Sg(a,[ke],c,!0))),sn(s,a,a.pendingProps.children,c),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function ys(s){s.flags|=4}function hm(s,a,c,h,m){if((a=(s.mode&32)!==0)&&(a=!1),a){if(s.flags|=16777216,(m&335544128)===m)if(s.stateNode.complete)s.flags|=8192;else if(Jb())s.flags|=8192;else throw xa=yh,Rg}else s.flags&=-16777217}function wb(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Bv(a))if(Jb())s.flags|=8192;else throw xa=yh,Rg}function kh(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?Uu():536870912,s.lanes|=a,zo|=a)}function oc(s,a){if(!qt)switch(s.tailMode){case"hidden":a=s.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:h.sibling=null}}function he(s){var a=s.alternate!==null&&s.alternate.child===s.child,c=0,h=0;if(a)for(var m=s.child;m!==null;)c|=m.lanes|m.childLanes,h|=m.subtreeFlags&65011712,h|=m.flags&65011712,m.return=s,m=m.sibling;else for(m=s.child;m!==null;)c|=m.lanes|m.childLanes,h|=m.subtreeFlags,h|=m.flags,m.return=s,m=m.sibling;return s.subtreeFlags|=h,s.childLanes=c,a}function gC(s,a,c){var h=a.pendingProps;switch(bg(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return he(a),null;case 1:return he(a),null;case 3:return c=a.stateNode,h=null,s!==null&&(h=s.memoizedState.cache),a.memoizedState.cache!==h&&(a.flags|=2048),ds(ke),ge(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(s===null||s.child===null)&&(Ao(a)?ys(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Tg())),he(a),null;case 26:var m=a.type,y=a.memoizedState;return s===null?(ys(a),y!==null?(he(a),wb(a,y)):(he(a),hm(a,m,null,h,c))):y?y!==s.memoizedState?(ys(a),he(a),wb(a,y)):(he(a),a.flags&=-16777217):(s=s.memoizedProps,s!==h&&ys(a),he(a),hm(a,m,s,h,c)),null;case 27:if(no(a),c=xt.current,m=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==h&&ys(a);else{if(!h){if(a.stateNode===null)throw Error(i(166));return he(a),null}s=ut.current,Ao(a)?r0(a):(s=Nv(m,h,c),a.stateNode=s,ys(a))}return he(a),null;case 5:if(no(a),m=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==h&&ys(a);else{if(!h){if(a.stateNode===null)throw Error(i(166));return he(a),null}if(y=ut.current,Ao(a))r0(a);else{var T=Xh(xt.current);switch(y){case 1:y=T.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:y=T.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":y=T.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":y=T.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":y=T.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof h.is=="string"?T.createElement("select",{is:h.is}):T.createElement("select"),h.multiple?y.multiple=!0:h.size&&(y.size=h.size);break;default:y=typeof h.is=="string"?T.createElement(m,{is:h.is}):T.createElement(m)}}y[Me]=a,y[We]=h;t:for(T=a.child;T!==null;){if(T.tag===5||T.tag===6)y.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===a)break t;for(;T.sibling===null;){if(T.return===null||T.return===a)break t;T=T.return}T.sibling.return=T.return,T=T.sibling}a.stateNode=y;t:switch(rn(y,m,h),m){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break t;case"img":h=!0;break t;default:h=!1}h&&ys(a)}}return he(a),hm(a,a.type,s===null?null:s.memoizedProps,a.pendingProps,c),null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==h&&ys(a);else{if(typeof h!="string"&&a.stateNode===null)throw Error(i(166));if(s=xt.current,Ao(a)){if(s=a.stateNode,c=a.memoizedProps,h=null,m=en,m!==null)switch(m.tag){case 27:case 5:h=m.memoizedProps}s[Me]=a,s=!!(s.nodeValue===c||h!==null&&h.suppressHydrationWarning===!0||Ev(s.nodeValue,c)),s||tr(a,!0)}else s=Xh(s).createTextNode(h),s[Me]=a,a.stateNode=s}return he(a),null;case 31:if(c=a.memoizedState,s===null||s.memoizedState!==null){if(h=Ao(a),c!==null){if(s===null){if(!h)throw Error(i(318));if(s=a.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[Me]=a}else _a(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;he(a),s=!1}else c=Tg(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=c),s=!0;if(!s)return a.flags&256?(jn(a),a):(jn(a),null);if((a.flags&128)!==0)throw Error(i(558))}return he(a),null;case 13:if(h=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(m=Ao(a),h!==null&&h.dehydrated!==null){if(s===null){if(!m)throw Error(i(318));if(m=a.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(i(317));m[Me]=a}else _a(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;he(a),m=!1}else m=Tg(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=m),m=!0;if(!m)return a.flags&256?(jn(a),a):(jn(a),null)}return jn(a),(a.flags&128)!==0?(a.lanes=c,a):(c=h!==null,s=s!==null&&s.memoizedState!==null,c&&(h=a.child,m=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(m=h.alternate.memoizedState.cachePool.pool),y=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(y=h.memoizedState.cachePool.pool),y!==m&&(h.flags|=2048)),c!==s&&c&&(a.child.flags|=8192),kh(a,a.updateQueue),he(a),null);case 4:return ge(),s===null&&Nm(a.stateNode.containerInfo),he(a),null;case 10:return ds(a.type),he(a),null;case 19:if(J(Ae),h=a.memoizedState,h===null)return he(a),null;if(m=(a.flags&128)!==0,y=h.rendering,y===null)if(m)oc(h,!1);else{if(Te!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(y=Th(s),y!==null){for(a.flags|=128,oc(h,!1),s=y.updateQueue,a.updateQueue=s,kh(a,s),a.subtreeFlags=0,s=c,c=a.child;c!==null;)t0(c,s),c=c.sibling;return ot(Ae,Ae.current&1|2),qt&&hs(a,h.treeForkCount),a.child}s=s.sibling}h.tail!==null&&_n()>jh&&(a.flags|=128,m=!0,oc(h,!1),a.lanes=4194304)}else{if(!m)if(s=Th(y),s!==null){if(a.flags|=128,m=!0,s=s.updateQueue,a.updateQueue=s,kh(a,s),oc(h,!0),h.tail===null&&h.tailMode==="hidden"&&!y.alternate&&!qt)return he(a),null}else 2*_n()-h.renderingStartTime>jh&&c!==536870912&&(a.flags|=128,m=!0,oc(h,!1),a.lanes=4194304);h.isBackwards?(y.sibling=a.child,a.child=y):(s=h.last,s!==null?s.sibling=y:a.child=y,h.last=y)}return h.tail!==null?(s=h.tail,h.rendering=s,h.tail=s.sibling,h.renderingStartTime=_n(),s.sibling=null,c=Ae.current,ot(Ae,m?c&1|2:c&1),qt&&hs(a,h.treeForkCount),s):(he(a),null);case 22:case 23:return jn(a),kg(),h=a.memoizedState!==null,s!==null?s.memoizedState!==null!==h&&(a.flags|=8192):h&&(a.flags|=8192),h?(c&536870912)!==0&&(a.flags&128)===0&&(he(a),a.subtreeFlags&6&&(a.flags|=8192)):he(a),c=a.updateQueue,c!==null&&kh(a,c.retryQueue),c=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),h=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),h!==c&&(a.flags|=2048),s!==null&&J(Ta),null;case 24:return c=null,s!==null&&(c=s.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),ds(ke),he(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function mC(s,a){switch(bg(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return ds(ke),ge(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return no(a),null;case 31:if(a.memoizedState!==null){if(jn(a),a.alternate===null)throw Error(i(340));_a()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 13:if(jn(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(i(340));_a()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return J(Ae),null;case 4:return ge(),null;case 10:return ds(a.type),null;case 22:case 23:return jn(a),kg(),s!==null&&J(Ta),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return ds(ke),null;case 25:return null;default:return null}}function Cb(s,a){switch(bg(a),a.tag){case 3:ds(ke),ge();break;case 26:case 27:case 5:no(a);break;case 4:ge();break;case 31:a.memoizedState!==null&&jn(a);break;case 13:jn(a);break;case 19:J(Ae);break;case 10:ds(a.type);break;case 22:case 23:jn(a),kg(),s!==null&&J(Ta);break;case 24:ds(ke)}}function lc(s,a){try{var c=a.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var m=h.next;c=m;do{if((c.tag&s)===s){h=void 0;var y=c.create,T=c.inst;h=y(),T.destroy=h}c=c.next}while(c!==m)}}catch(A){ee(a,a.return,A)}}function or(s,a,c){try{var h=a.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var y=m.next;h=y;do{if((h.tag&s)===s){var T=h.inst,A=T.destroy;if(A!==void 0){T.destroy=void 0,m=a;var V=c,G=A;try{G()}catch(tt){ee(m,V,tt)}}}h=h.next}while(h!==y)}}catch(tt){ee(a,a.return,tt)}}function Rb(s){var a=s.updateQueue;if(a!==null){var c=s.stateNode;try{_0(a,c)}catch(h){ee(s,s.return,h)}}}function Ib(s,a,c){c.props=wa(s.type,s.memoizedProps),c.state=s.memoizedState;try{c.componentWillUnmount()}catch(h){ee(s,a,h)}}function cc(s,a){try{var c=s.ref;if(c!==null){switch(s.tag){case 26:case 27:case 5:var h=s.stateNode;break;case 30:h=s.stateNode;break;default:h=s.stateNode}typeof c=="function"?s.refCleanup=c(h):c.current=h}}catch(m){ee(s,a,m)}}function Wi(s,a){var c=s.ref,h=s.refCleanup;if(c!==null)if(typeof h=="function")try{h()}catch(m){ee(s,a,m)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(m){ee(s,a,m)}else c.current=null}function Db(s){var a=s.type,c=s.memoizedProps,h=s.stateNode;try{t:switch(a){case"button":case"input":case"select":case"textarea":c.autoFocus&&h.focus();break t;case"img":c.src?h.src=c.src:c.srcSet&&(h.srcset=c.srcSet)}}catch(m){ee(s,s.return,m)}}function fm(s,a,c){try{var h=s.stateNode;LC(h,s.type,c,a),h[We]=a}catch(m){ee(s,s.return,m)}}function Mb(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&gr(s.type)||s.tag===4}function dm(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||Mb(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&gr(s.type)||s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function gm(s,a,c){var h=s.tag;if(h===5||h===6)s=s.stateNode,a?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(s,a):(a=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,a.appendChild(s),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=fi));else if(h!==4&&(h===27&&gr(s.type)&&(c=s.stateNode,a=null),s=s.child,s!==null))for(gm(s,a,c),s=s.sibling;s!==null;)gm(s,a,c),s=s.sibling}function Ph(s,a,c){var h=s.tag;if(h===5||h===6)s=s.stateNode,a?c.insertBefore(s,a):c.appendChild(s);else if(h!==4&&(h===27&&gr(s.type)&&(c=s.stateNode),s=s.child,s!==null))for(Ph(s,a,c),s=s.sibling;s!==null;)Ph(s,a,c),s=s.sibling}function Ob(s){var a=s.stateNode,c=s.memoizedProps;try{for(var h=s.type,m=a.attributes;m.length;)a.removeAttributeNode(m[0]);rn(a,h,c),a[Me]=s,a[We]=c}catch(y){ee(s,s.return,y)}}var _s=!1,Le=!1,mm=!1,Nb=typeof WeakSet=="function"?WeakSet:Set,Qe=null;function pC(s,a){if(s=s.containerInfo,Vm=nf,s=G_(s),lg(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else t:{c=(c=s.ownerDocument)&&c.defaultView||window;var h=c.getSelection&&c.getSelection();if(h&&h.rangeCount!==0){c=h.anchorNode;var m=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{c.nodeType,y.nodeType}catch{c=null;break t}var T=0,A=-1,V=-1,G=0,tt=0,nt=s,Y=null;e:for(;;){for(var Q;nt!==c||m!==0&&nt.nodeType!==3||(A=T+m),nt!==y||h!==0&&nt.nodeType!==3||(V=T+h),nt.nodeType===3&&(T+=nt.nodeValue.length),(Q=nt.firstChild)!==null;)Y=nt,nt=Q;for(;;){if(nt===s)break e;if(Y===c&&++G===m&&(A=T),Y===y&&++tt===h&&(V=T),(Q=nt.nextSibling)!==null)break;nt=Y,Y=nt.parentNode}nt=Q}c=A===-1||V===-1?null:{start:A,end:V}}else c=null}c=c||{start:0,end:0}}else c=null;for(Lm={focusedElem:s,selectionRange:c},nf=!1,Qe=a;Qe!==null;)if(a=Qe,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,Qe=s;else for(;Qe!==null;){switch(a=Qe,y=a.alternate,s=a.flags,a.tag){case 0:if((s&4)!==0&&(s=a.updateQueue,s=s!==null?s.events:null,s!==null))for(c=0;c<s.length;c++)m=s[c],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&y!==null){s=void 0,c=a,m=y.memoizedProps,y=y.memoizedState,h=c.stateNode;try{var gt=wa(c.type,m);s=h.getSnapshotBeforeUpdate(gt,y),h.__reactInternalSnapshotBeforeUpdate=s}catch(Tt){ee(c,c.return,Tt)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,c=s.nodeType,c===9)Um(s);else if(c===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Um(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=a.sibling,s!==null){s.return=a.return,Qe=s;break}Qe=a.return}}function kb(s,a,c){var h=c.flags;switch(c.tag){case 0:case 11:case 15:vs(s,c),h&4&&lc(5,c);break;case 1:if(vs(s,c),h&4)if(s=c.stateNode,a===null)try{s.componentDidMount()}catch(T){ee(c,c.return,T)}else{var m=wa(c.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(m,a,s.__reactInternalSnapshotBeforeUpdate)}catch(T){ee(c,c.return,T)}}h&64&&Rb(c),h&512&&cc(c,c.return);break;case 3:if(vs(s,c),h&64&&(s=c.updateQueue,s!==null)){if(a=null,c.child!==null)switch(c.child.tag){case 27:case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}try{_0(s,a)}catch(T){ee(c,c.return,T)}}break;case 27:a===null&&h&4&&Ob(c);case 26:case 5:vs(s,c),a===null&&h&4&&Db(c),h&512&&cc(c,c.return);break;case 12:vs(s,c);break;case 31:vs(s,c),h&4&&Lb(s,c);break;case 13:vs(s,c),h&4&&zb(s,c),h&64&&(s=c.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(c=AC.bind(null,c),GC(s,c))));break;case 22:if(h=c.memoizedState!==null||_s,!h){a=a!==null&&a.memoizedState!==null||Le,m=_s;var y=Le;_s=h,(Le=a)&&!y?Ts(s,c,(c.subtreeFlags&8772)!==0):vs(s,c),_s=m,Le=y}break;case 30:break;default:vs(s,c)}}function Pb(s){var a=s.alternate;a!==null&&(s.alternate=null,Pb(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&oo(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var pe=null,xn=!1;function bs(s,a,c){for(c=c.child;c!==null;)Vb(s,a,c),c=c.sibling}function Vb(s,a,c){if(Ze&&typeof Ze.onCommitFiberUnmount=="function")try{Ze.onCommitFiberUnmount(li,c)}catch{}switch(c.tag){case 26:Le||Wi(c,a),bs(s,a,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Le||Wi(c,a);var h=pe,m=xn;gr(c.type)&&(pe=c.stateNode,xn=!1),bs(s,a,c),_c(c.stateNode),pe=h,xn=m;break;case 5:Le||Wi(c,a);case 6:if(h=pe,m=xn,pe=null,bs(s,a,c),pe=h,xn=m,pe!==null)if(xn)try{(pe.nodeType===9?pe.body:pe.nodeName==="HTML"?pe.ownerDocument.body:pe).removeChild(c.stateNode)}catch(y){ee(c,a,y)}else try{pe.removeChild(c.stateNode)}catch(y){ee(c,a,y)}break;case 18:pe!==null&&(xn?(s=pe,Rv(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,c.stateNode),Yo(s)):Rv(pe,c.stateNode));break;case 4:h=pe,m=xn,pe=c.stateNode.containerInfo,xn=!0,bs(s,a,c),pe=h,xn=m;break;case 0:case 11:case 14:case 15:or(2,c,a),Le||or(4,c,a),bs(s,a,c);break;case 1:Le||(Wi(c,a),h=c.stateNode,typeof h.componentWillUnmount=="function"&&Ib(c,a,h)),bs(s,a,c);break;case 21:bs(s,a,c);break;case 22:Le=(h=Le)||c.memoizedState!==null,bs(s,a,c),Le=h;break;default:bs(s,a,c)}}function Lb(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Yo(s)}catch(c){ee(a,a.return,c)}}}function zb(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Yo(s)}catch(c){ee(a,a.return,c)}}function yC(s){switch(s.tag){case 31:case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new Nb),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new Nb),a;default:throw Error(i(435,s.tag))}}function Vh(s,a){var c=yC(s);a.forEach(function(h){if(!c.has(h)){c.add(h);var m=wC.bind(null,s,h);h.then(m,m)}})}function Sn(s,a){var c=a.deletions;if(c!==null)for(var h=0;h<c.length;h++){var m=c[h],y=s,T=a,A=T;t:for(;A!==null;){switch(A.tag){case 27:if(gr(A.type)){pe=A.stateNode,xn=!1;break t}break;case 5:pe=A.stateNode,xn=!1;break t;case 3:case 4:pe=A.stateNode.containerInfo,xn=!0;break t}A=A.return}if(pe===null)throw Error(i(160));Vb(y,T,m),pe=null,xn=!1,y=m.alternate,y!==null&&(y.return=null),m.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)jb(a,s),a=a.sibling}var _i=null;function jb(s,a){var c=s.alternate,h=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Sn(a,s),An(s),h&4&&(or(3,s,s.return),lc(3,s),or(5,s,s.return));break;case 1:Sn(a,s),An(s),h&512&&(Le||c===null||Wi(c,c.return)),h&64&&_s&&(s=s.updateQueue,s!==null&&(h=s.callbacks,h!==null&&(c=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=c===null?h:c.concat(h))));break;case 26:var m=_i;if(Sn(a,s),An(s),h&512&&(Le||c===null||Wi(c,c.return)),h&4){var y=c!==null?c.memoizedState:null;if(h=s.memoizedState,c===null)if(h===null)if(s.stateNode===null){t:{h=s.type,c=s.memoizedProps,m=m.ownerDocument||m;e:switch(h){case"title":y=m.getElementsByTagName("title")[0],(!y||y[ki]||y[Me]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=m.createElement(h),m.head.insertBefore(y,m.querySelector("head > title"))),rn(y,h,c),y[Me]=s,Oe(y),h=y;break t;case"link":var T=jv("link","href",m).get(h+(c.href||""));if(T){for(var A=0;A<T.length;A++)if(y=T[A],y.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&y.getAttribute("rel")===(c.rel==null?null:c.rel)&&y.getAttribute("title")===(c.title==null?null:c.title)&&y.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){T.splice(A,1);break e}}y=m.createElement(h),rn(y,h,c),m.head.appendChild(y);break;case"meta":if(T=jv("meta","content",m).get(h+(c.content||""))){for(A=0;A<T.length;A++)if(y=T[A],y.getAttribute("content")===(c.content==null?null:""+c.content)&&y.getAttribute("name")===(c.name==null?null:c.name)&&y.getAttribute("property")===(c.property==null?null:c.property)&&y.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&y.getAttribute("charset")===(c.charSet==null?null:c.charSet)){T.splice(A,1);break e}}y=m.createElement(h),rn(y,h,c),m.head.appendChild(y);break;default:throw Error(i(468,h))}y[Me]=s,Oe(y),h=y}s.stateNode=h}else Uv(m,s.type,s.stateNode);else s.stateNode=zv(m,h,s.memoizedProps);else y!==h?(y===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):y.count--,h===null?Uv(m,s.type,s.stateNode):zv(m,h,s.memoizedProps)):h===null&&s.stateNode!==null&&fm(s,s.memoizedProps,c.memoizedProps)}break;case 27:Sn(a,s),An(s),h&512&&(Le||c===null||Wi(c,c.return)),c!==null&&h&4&&fm(s,s.memoizedProps,c.memoizedProps);break;case 5:if(Sn(a,s),An(s),h&512&&(Le||c===null||Wi(c,c.return)),s.flags&32){m=s.stateNode;try{En(m,"")}catch(gt){ee(s,s.return,gt)}}h&4&&s.stateNode!=null&&(m=s.memoizedProps,fm(s,m,c!==null?c.memoizedProps:m)),h&1024&&(mm=!0);break;case 6:if(Sn(a,s),An(s),h&4){if(s.stateNode===null)throw Error(i(162));h=s.memoizedProps,c=s.stateNode;try{c.nodeValue=h}catch(gt){ee(s,s.return,gt)}}break;case 3:if(Jh=null,m=_i,_i=Qh(a.containerInfo),Sn(a,s),_i=m,An(s),h&4&&c!==null&&c.memoizedState.isDehydrated)try{Yo(a.containerInfo)}catch(gt){ee(s,s.return,gt)}mm&&(mm=!1,Ub(s));break;case 4:h=_i,_i=Qh(s.stateNode.containerInfo),Sn(a,s),An(s),_i=h;break;case 12:Sn(a,s),An(s);break;case 31:Sn(a,s),An(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,Vh(s,h)));break;case 13:Sn(a,s),An(s),s.child.flags&8192&&s.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(zh=_n()),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,Vh(s,h)));break;case 22:m=s.memoizedState!==null;var V=c!==null&&c.memoizedState!==null,G=_s,tt=Le;if(_s=G||m,Le=tt||V,Sn(a,s),Le=tt,_s=G,An(s),h&8192)t:for(a=s.stateNode,a._visibility=m?a._visibility&-2:a._visibility|1,m&&(c===null||V||_s||Le||Ca(s)),c=null,a=s;;){if(a.tag===5||a.tag===26){if(c===null){V=c=a;try{if(y=V.stateNode,m)T=y.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{A=V.stateNode;var nt=V.memoizedProps.style,Y=nt!=null&&nt.hasOwnProperty("display")?nt.display:null;A.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(gt){ee(V,V.return,gt)}}}else if(a.tag===6){if(c===null){V=a;try{V.stateNode.nodeValue=m?"":V.memoizedProps}catch(gt){ee(V,V.return,gt)}}}else if(a.tag===18){if(c===null){V=a;try{var Q=V.stateNode;m?Iv(Q,!0):Iv(V.stateNode,!1)}catch(gt){ee(V,V.return,gt)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break t;for(;a.sibling===null;){if(a.return===null||a.return===s)break t;c===a&&(c=null),a=a.return}c===a&&(c=null),a.sibling.return=a.return,a=a.sibling}h&4&&(h=s.updateQueue,h!==null&&(c=h.retryQueue,c!==null&&(h.retryQueue=null,Vh(s,c))));break;case 19:Sn(a,s),An(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,Vh(s,h)));break;case 30:break;case 21:break;default:Sn(a,s),An(s)}}function An(s){var a=s.flags;if(a&2){try{for(var c,h=s.return;h!==null;){if(Mb(h)){c=h;break}h=h.return}if(c==null)throw Error(i(160));switch(c.tag){case 27:var m=c.stateNode,y=dm(s);Ph(s,y,m);break;case 5:var T=c.stateNode;c.flags&32&&(En(T,""),c.flags&=-33);var A=dm(s);Ph(s,A,T);break;case 3:case 4:var V=c.stateNode.containerInfo,G=dm(s);gm(s,G,V);break;default:throw Error(i(161))}}catch(tt){ee(s,s.return,tt)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function Ub(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;Ub(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function vs(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)kb(s,a.alternate,a),a=a.sibling}function Ca(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:or(4,a,a.return),Ca(a);break;case 1:Wi(a,a.return);var c=a.stateNode;typeof c.componentWillUnmount=="function"&&Ib(a,a.return,c),Ca(a);break;case 27:_c(a.stateNode);case 26:case 5:Wi(a,a.return),Ca(a);break;case 22:a.memoizedState===null&&Ca(a);break;case 30:Ca(a);break;default:Ca(a)}s=s.sibling}}function Ts(s,a,c){for(c=c&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var h=a.alternate,m=s,y=a,T=y.flags;switch(y.tag){case 0:case 11:case 15:Ts(m,y,c),lc(4,y);break;case 1:if(Ts(m,y,c),h=y,m=h.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(G){ee(h,h.return,G)}if(h=y,m=h.updateQueue,m!==null){var A=h.stateNode;try{var V=m.shared.hiddenCallbacks;if(V!==null)for(m.shared.hiddenCallbacks=null,m=0;m<V.length;m++)y0(V[m],A)}catch(G){ee(h,h.return,G)}}c&&T&64&&Rb(y),cc(y,y.return);break;case 27:Ob(y);case 26:case 5:Ts(m,y,c),c&&h===null&&T&4&&Db(y),cc(y,y.return);break;case 12:Ts(m,y,c);break;case 31:Ts(m,y,c),c&&T&4&&Lb(m,y);break;case 13:Ts(m,y,c),c&&T&4&&zb(m,y);break;case 22:y.memoizedState===null&&Ts(m,y,c),cc(y,y.return);break;case 30:break;default:Ts(m,y,c)}a=a.sibling}}function pm(s,a){var c=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==c&&(s!=null&&s.refCount++,c!=null&&Xl(c))}function ym(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&Xl(s))}function bi(s,a,c,h){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Bb(s,a,c,h),a=a.sibling}function Bb(s,a,c,h){var m=a.flags;switch(a.tag){case 0:case 11:case 15:bi(s,a,c,h),m&2048&&lc(9,a);break;case 1:bi(s,a,c,h);break;case 3:bi(s,a,c,h),m&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&Xl(s)));break;case 12:if(m&2048){bi(s,a,c,h),s=a.stateNode;try{var y=a.memoizedProps,T=y.id,A=y.onPostCommit;typeof A=="function"&&A(T,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(V){ee(a,a.return,V)}}else bi(s,a,c,h);break;case 31:bi(s,a,c,h);break;case 13:bi(s,a,c,h);break;case 23:break;case 22:y=a.stateNode,T=a.alternate,a.memoizedState!==null?y._visibility&2?bi(s,a,c,h):uc(s,a):y._visibility&2?bi(s,a,c,h):(y._visibility|=2,Po(s,a,c,h,(a.subtreeFlags&10256)!==0||!1)),m&2048&&pm(T,a);break;case 24:bi(s,a,c,h),m&2048&&ym(a.alternate,a);break;default:bi(s,a,c,h)}}function Po(s,a,c,h,m){for(m=m&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var y=s,T=a,A=c,V=h,G=T.flags;switch(T.tag){case 0:case 11:case 15:Po(y,T,A,V,m),lc(8,T);break;case 23:break;case 22:var tt=T.stateNode;T.memoizedState!==null?tt._visibility&2?Po(y,T,A,V,m):uc(y,T):(tt._visibility|=2,Po(y,T,A,V,m)),m&&G&2048&&pm(T.alternate,T);break;case 24:Po(y,T,A,V,m),m&&G&2048&&ym(T.alternate,T);break;default:Po(y,T,A,V,m)}a=a.sibling}}function uc(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var c=s,h=a,m=h.flags;switch(h.tag){case 22:uc(c,h),m&2048&&pm(h.alternate,h);break;case 24:uc(c,h),m&2048&&ym(h.alternate,h);break;default:uc(c,h)}a=a.sibling}}var hc=8192;function Vo(s,a,c){if(s.subtreeFlags&hc)for(s=s.child;s!==null;)Fb(s,a,c),s=s.sibling}function Fb(s,a,c){switch(s.tag){case 26:Vo(s,a,c),s.flags&hc&&s.memoizedState!==null&&iR(c,_i,s.memoizedState,s.memoizedProps);break;case 5:Vo(s,a,c);break;case 3:case 4:var h=_i;_i=Qh(s.stateNode.containerInfo),Vo(s,a,c),_i=h;break;case 22:s.memoizedState===null&&(h=s.alternate,h!==null&&h.memoizedState!==null?(h=hc,hc=16777216,Vo(s,a,c),hc=h):Vo(s,a,c));break;default:Vo(s,a,c)}}function Hb(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function fc(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var h=a[c];Qe=h,Gb(h,s)}Hb(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)qb(s),s=s.sibling}function qb(s){switch(s.tag){case 0:case 11:case 15:fc(s),s.flags&2048&&or(9,s,s.return);break;case 3:fc(s);break;case 12:fc(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,Lh(s)):fc(s);break;default:fc(s)}}function Lh(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var h=a[c];Qe=h,Gb(h,s)}Hb(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:or(8,a,a.return),Lh(a);break;case 22:c=a.stateNode,c._visibility&2&&(c._visibility&=-3,Lh(a));break;default:Lh(a)}s=s.sibling}}function Gb(s,a){for(;Qe!==null;){var c=Qe;switch(c.tag){case 0:case 11:case 15:or(8,c,a);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var h=c.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Xl(c.memoizedState.cache)}if(h=c.child,h!==null)h.return=c,Qe=h;else t:for(c=s;Qe!==null;){h=Qe;var m=h.sibling,y=h.return;if(Pb(h),h===c){Qe=null;break t}if(m!==null){m.return=y,Qe=m;break t}Qe=y}}}var _C={getCacheForType:function(s){var a=nn(ke),c=a.data.get(s);return c===void 0&&(c=s(),a.data.set(s,c)),c},cacheSignal:function(){return nn(ke).controller.signal}},bC=typeof WeakMap=="function"?WeakMap:Map,$t=0,oe=null,Pt=null,zt=0,te=0,Un=null,lr=!1,Lo=!1,_m=!1,Es=0,Te=0,cr=0,Ra=0,bm=0,Bn=0,zo=0,dc=null,wn=null,vm=!1,zh=0,Yb=0,jh=1/0,Uh=null,ur=null,Ge=0,hr=null,jo=null,xs=0,Tm=0,Em=null,Kb=null,gc=0,xm=null;function Fn(){return($t&2)!==0&&zt!==0?zt&-zt:K.T!==null?Im():Bu()}function Wb(){if(Bn===0)if((zt&536870912)===0||qt){var s=ea;ea<<=1,(ea&3932160)===0&&(ea=262144),Bn=s}else Bn=536870912;return s=zn.current,s!==null&&(s.flags|=32),Bn}function Cn(s,a,c){(s===oe&&(te===2||te===9)||s.cancelPendingCommit!==null)&&(Uo(s,0),fr(s,zt,Bn,!1)),na(s,c),(($t&2)===0||s!==oe)&&(s===oe&&(($t&2)===0&&(Ra|=c),Te===4&&fr(s,zt,Bn,!1)),Xi(s))}function Xb(s,a,c){if(($t&6)!==0)throw Error(i(327));var h=!c&&(a&127)===0&&(a&s.expiredLanes)===0||ci(s,a),m=h?EC(s,a):Am(s,a,!0),y=h;do{if(m===0){Lo&&!h&&fr(s,a,0,!1);break}else{if(c=s.current.alternate,y&&!vC(c)){m=Am(s,a,!1),y=!1;continue}if(m===2){if(y=a,s.errorRecoveryDisabledLanes&y)var T=0;else T=s.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){a=T;t:{var A=s;m=dc;var V=A.current.memoizedState.isDehydrated;if(V&&(Uo(A,T).flags|=256),T=Am(A,T,!1),T!==2){if(_m&&!V){A.errorRecoveryDisabledLanes|=y,Ra|=y,m=4;break t}y=wn,wn=m,y!==null&&(wn===null?wn=y:wn.push.apply(wn,y))}m=T}if(y=!1,m!==2)continue}}if(m===1){Uo(s,0),fr(s,a,0,!0);break}t:{switch(h=s,y=m,y){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:fr(h,a,Bn,!lr);break t;case 2:wn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(m=zh+300-_n(),10<m)){if(fr(h,a,Bn,!lr),Mi(h,0,!0)!==0)break t;xs=a,h.timeoutHandle=wv(Qb.bind(null,h,c,wn,Uh,vm,a,Bn,Ra,zo,lr,y,"Throttled",-0,0),m);break t}Qb(h,c,wn,Uh,vm,a,Bn,Ra,zo,lr,y,null,-0,0)}}break}while(!0);Xi(s)}function Qb(s,a,c,h,m,y,T,A,V,G,tt,nt,Y,Q){if(s.timeoutHandle=-1,nt=a.subtreeFlags,nt&8192||(nt&16785408)===16785408){nt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:fi},Fb(a,y,nt);var gt=(y&62914560)===y?zh-_n():(y&4194048)===y?Yb-_n():0;if(gt=sR(nt,gt),gt!==null){xs=y,s.cancelPendingCommit=gt(sv.bind(null,s,a,y,c,h,m,T,A,V,tt,nt,null,Y,Q)),fr(s,y,T,!G);return}}sv(s,a,y,c,h,m,T,A,V)}function vC(s){for(var a=s;;){var c=a.tag;if((c===0||c===11||c===15)&&a.flags&16384&&(c=a.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var h=0;h<c.length;h++){var m=c[h],y=m.getSnapshot;m=m.value;try{if(!Vn(y(),m))return!1}catch{return!1}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function fr(s,a,c,h){a&=~bm,a&=~Ra,s.suspendedLanes|=a,s.pingedLanes&=~a,h&&(s.warmLanes|=a),h=s.expirationTimes;for(var m=a;0<m;){var y=31-xe(m),T=1<<y;h[y]=-1,m&=~T}c!==0&&ia(s,c,a)}function Bh(){return($t&6)===0?(mc(0),!1):!0}function Sm(){if(Pt!==null){if(te===0)var s=Pt.return;else s=Pt,fs=ba=null,Ug(s),Do=null,$l=0,s=Pt;for(;s!==null;)Cb(s.alternate,s),s=s.return;Pt=null}}function Uo(s,a){var c=s.timeoutHandle;c!==-1&&(s.timeoutHandle=-1,UC(c)),c=s.cancelPendingCommit,c!==null&&(s.cancelPendingCommit=null,c()),xs=0,Sm(),oe=s,Pt=c=us(s.current,null),zt=a,te=0,Un=null,lr=!1,Lo=ci(s,a),_m=!1,zo=Bn=bm=Ra=cr=Te=0,wn=dc=null,vm=!1,(a&8)!==0&&(a|=a&32);var h=s.entangledLanes;if(h!==0)for(s=s.entanglements,h&=a;0<h;){var m=31-xe(h),y=1<<m;a|=s[m],h&=~y}return Es=a,lh(),c}function $b(s,a){Mt=null,K.H=rc,a===Io||a===ph?(a=d0(),te=3):a===Rg?(a=d0(),te=4):te=a===nm?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Un=a,Pt===null&&(Te=1,Dh(s,Jn(a,s.current)))}function Jb(){var s=zn.current;return s===null?!0:(zt&4194048)===zt?ni===null:(zt&62914560)===zt||(zt&536870912)!==0?s===ni:!1}function Zb(){var s=K.H;return K.H=rc,s===null?rc:s}function tv(){var s=K.A;return K.A=_C,s}function Fh(){Te=4,lr||(zt&4194048)!==zt&&zn.current!==null||(Lo=!0),(cr&134217727)===0&&(Ra&134217727)===0||oe===null||fr(oe,zt,Bn,!1)}function Am(s,a,c){var h=$t;$t|=2;var m=Zb(),y=tv();(oe!==s||zt!==a)&&(Uh=null,Uo(s,a)),a=!1;var T=Te;t:do try{if(te!==0&&Pt!==null){var A=Pt,V=Un;switch(te){case 8:Sm(),T=6;break t;case 3:case 2:case 9:case 6:zn.current===null&&(a=!0);var G=te;if(te=0,Un=null,Bo(s,A,V,G),c&&Lo){T=0;break t}break;default:G=te,te=0,Un=null,Bo(s,A,V,G)}}TC(),T=Te;break}catch(tt){$b(s,tt)}while(!0);return a&&s.shellSuspendCounter++,fs=ba=null,$t=h,K.H=m,K.A=y,Pt===null&&(oe=null,zt=0,lh()),T}function TC(){for(;Pt!==null;)ev(Pt)}function EC(s,a){var c=$t;$t|=2;var h=Zb(),m=tv();oe!==s||zt!==a?(Uh=null,jh=_n()+500,Uo(s,a)):Lo=ci(s,a);t:do try{if(te!==0&&Pt!==null){a=Pt;var y=Un;e:switch(te){case 1:te=0,Un=null,Bo(s,a,y,1);break;case 2:case 9:if(h0(y)){te=0,Un=null,nv(a);break}a=function(){te!==2&&te!==9||oe!==s||(te=7),Xi(s)},y.then(a,a);break t;case 3:te=7;break t;case 4:te=5;break t;case 7:h0(y)?(te=0,Un=null,nv(a)):(te=0,Un=null,Bo(s,a,y,7));break;case 5:var T=null;switch(Pt.tag){case 26:T=Pt.memoizedState;case 5:case 27:var A=Pt;if(T?Bv(T):A.stateNode.complete){te=0,Un=null;var V=A.sibling;if(V!==null)Pt=V;else{var G=A.return;G!==null?(Pt=G,Hh(G)):Pt=null}break e}}te=0,Un=null,Bo(s,a,y,5);break;case 6:te=0,Un=null,Bo(s,a,y,6);break;case 8:Sm(),Te=6;break t;default:throw Error(i(462))}}xC();break}catch(tt){$b(s,tt)}while(!0);return fs=ba=null,K.H=h,K.A=m,$t=c,Pt!==null?0:(oe=null,zt=0,lh(),Te)}function xC(){for(;Pt!==null&&!eg();)ev(Pt)}function ev(s){var a=Ab(s.alternate,s,Es);s.memoizedProps=s.pendingProps,a===null?Hh(s):Pt=a}function nv(s){var a=s,c=a.alternate;switch(a.tag){case 15:case 0:a=bb(c,a,a.pendingProps,a.type,void 0,zt);break;case 11:a=bb(c,a,a.pendingProps,a.type.render,a.ref,zt);break;case 5:Ug(a);default:Cb(c,a),a=Pt=t0(a,Es),a=Ab(c,a,Es)}s.memoizedProps=s.pendingProps,a===null?Hh(s):Pt=a}function Bo(s,a,c,h){fs=ba=null,Ug(a),Do=null,$l=0;var m=a.return;try{if(hC(s,m,a,c,zt)){Te=1,Dh(s,Jn(c,s.current)),Pt=null;return}}catch(y){if(m!==null)throw Pt=m,y;Te=1,Dh(s,Jn(c,s.current)),Pt=null;return}a.flags&32768?(qt||h===1?s=!0:Lo||(zt&536870912)!==0?s=!1:(lr=s=!0,(h===2||h===9||h===3||h===6)&&(h=zn.current,h!==null&&h.tag===13&&(h.flags|=16384))),iv(a,s)):Hh(a)}function Hh(s){var a=s;do{if((a.flags&32768)!==0){iv(a,lr);return}s=a.return;var c=gC(a.alternate,a,Es);if(c!==null){Pt=c;return}if(a=a.sibling,a!==null){Pt=a;return}Pt=a=s}while(a!==null);Te===0&&(Te=5)}function iv(s,a){do{var c=mC(s.alternate,s);if(c!==null){c.flags&=32767,Pt=c;return}if(c=s.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!a&&(s=s.sibling,s!==null)){Pt=s;return}Pt=s=c}while(s!==null);Te=6,Pt=null}function sv(s,a,c,h,m,y,T,A,V){s.cancelPendingCommit=null;do qh();while(Ge!==0);if(($t&6)!==0)throw Error(i(327));if(a!==null){if(a===s.current)throw Error(i(177));if(y=a.lanes|a.childLanes,y|=dg,sg(s,c,y,T,A,V),s===oe&&(Pt=oe=null,zt=0),jo=a,hr=s,xs=c,Tm=y,Em=m,Kb=h,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,CC(Fs,function(){return cv(),null})):(s.callbackNode=null,s.callbackPriority=0),h=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||h){h=K.T,K.T=null,m=at.p,at.p=2,T=$t,$t|=4;try{pC(s,a,c)}finally{$t=T,at.p=m,K.T=h}}Ge=1,rv(),av(),ov()}}function rv(){if(Ge===1){Ge=0;var s=hr,a=jo,c=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||c){c=K.T,K.T=null;var h=at.p;at.p=2;var m=$t;$t|=4;try{jb(a,s);var y=Lm,T=G_(s.containerInfo),A=y.focusedElem,V=y.selectionRange;if(T!==A&&A&&A.ownerDocument&&q_(A.ownerDocument.documentElement,A)){if(V!==null&&lg(A)){var G=V.start,tt=V.end;if(tt===void 0&&(tt=G),"selectionStart"in A)A.selectionStart=G,A.selectionEnd=Math.min(tt,A.value.length);else{var nt=A.ownerDocument||document,Y=nt&&nt.defaultView||window;if(Y.getSelection){var Q=Y.getSelection(),gt=A.textContent.length,Tt=Math.min(V.start,gt),ae=V.end===void 0?Tt:Math.min(V.end,gt);!Q.extend&&Tt>ae&&(T=ae,ae=Tt,Tt=T);var B=H_(A,Tt),U=H_(A,ae);if(B&&U&&(Q.rangeCount!==1||Q.anchorNode!==B.node||Q.anchorOffset!==B.offset||Q.focusNode!==U.node||Q.focusOffset!==U.offset)){var q=nt.createRange();q.setStart(B.node,B.offset),Q.removeAllRanges(),Tt>ae?(Q.addRange(q),Q.extend(U.node,U.offset)):(q.setEnd(U.node,U.offset),Q.addRange(q))}}}}for(nt=[],Q=A;Q=Q.parentNode;)Q.nodeType===1&&nt.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<nt.length;A++){var et=nt[A];et.element.scrollLeft=et.left,et.element.scrollTop=et.top}}nf=!!Vm,Lm=Vm=null}finally{$t=m,at.p=h,K.T=c}}s.current=a,Ge=2}}function av(){if(Ge===2){Ge=0;var s=hr,a=jo,c=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||c){c=K.T,K.T=null;var h=at.p;at.p=2;var m=$t;$t|=4;try{kb(s,a.alternate,a)}finally{$t=m,at.p=h,K.T=c}}Ge=3}}function ov(){if(Ge===4||Ge===3){Ge=0,ku();var s=hr,a=jo,c=xs,h=Kb;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Ge=5:(Ge=0,jo=hr=null,lv(s,s.pendingLanes));var m=s.pendingLanes;if(m===0&&(ur=null),as(c),a=a.stateNode,Ze&&typeof Ze.onCommitFiberRoot=="function")try{Ze.onCommitFiberRoot(li,a,void 0,(a.current.flags&128)===128)}catch{}if(h!==null){a=K.T,m=at.p,at.p=2,K.T=null;try{for(var y=s.onRecoverableError,T=0;T<h.length;T++){var A=h[T];y(A.value,{componentStack:A.stack})}}finally{K.T=a,at.p=m}}(xs&3)!==0&&qh(),Xi(s),m=s.pendingLanes,(c&261930)!==0&&(m&42)!==0?s===xm?gc++:(gc=0,xm=s):gc=0,mc(0)}}function lv(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,Xl(a)))}function qh(){return rv(),av(),ov(),cv()}function cv(){if(Ge!==5)return!1;var s=hr,a=Tm;Tm=0;var c=as(xs),h=K.T,m=at.p;try{at.p=32>c?32:c,K.T=null,c=Em,Em=null;var y=hr,T=xs;if(Ge=0,jo=hr=null,xs=0,($t&6)!==0)throw Error(i(331));var A=$t;if($t|=4,qb(y.current),Bb(y,y.current,T,c),$t=A,mc(0,!1),Ze&&typeof Ze.onPostCommitFiberRoot=="function")try{Ze.onPostCommitFiberRoot(li,y)}catch{}return!0}finally{at.p=m,K.T=h,lv(s,a)}}function uv(s,a,c){a=Jn(c,a),a=em(s.stateNode,a,2),s=sr(s,a,2),s!==null&&(na(s,2),Xi(s))}function ee(s,a,c){if(s.tag===3)uv(s,s,c);else for(;a!==null;){if(a.tag===3){uv(a,s,c);break}else if(a.tag===1){var h=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(ur===null||!ur.has(h))){s=Jn(c,s),c=hb(2),h=sr(a,c,2),h!==null&&(fb(c,h,a,s),na(h,2),Xi(h));break}}a=a.return}}function wm(s,a,c){var h=s.pingCache;if(h===null){h=s.pingCache=new bC;var m=new Set;h.set(a,m)}else m=h.get(a),m===void 0&&(m=new Set,h.set(a,m));m.has(c)||(_m=!0,m.add(c),s=SC.bind(null,s,a,c),a.then(s,s))}function SC(s,a,c){var h=s.pingCache;h!==null&&h.delete(a),s.pingedLanes|=s.suspendedLanes&c,s.warmLanes&=~c,oe===s&&(zt&c)===c&&(Te===4||Te===3&&(zt&62914560)===zt&&300>_n()-zh?($t&2)===0&&Uo(s,0):bm|=c,zo===zt&&(zo=0)),Xi(s)}function hv(s,a){a===0&&(a=Uu()),s=pa(s,a),s!==null&&(na(s,a),Xi(s))}function AC(s){var a=s.memoizedState,c=0;a!==null&&(c=a.retryLane),hv(s,c)}function wC(s,a){var c=0;switch(s.tag){case 31:case 13:var h=s.stateNode,m=s.memoizedState;m!==null&&(c=m.retryLane);break;case 19:h=s.stateNode;break;case 22:h=s.stateNode._retryCache;break;default:throw Error(i(314))}h!==null&&h.delete(a),hv(s,c)}function CC(s,a){return qe(s,a)}var Gh=null,Fo=null,Cm=!1,Yh=!1,Rm=!1,dr=0;function Xi(s){s!==Fo&&s.next===null&&(Fo===null?Gh=Fo=s:Fo=Fo.next=s),Yh=!0,Cm||(Cm=!0,IC())}function mc(s,a){if(!Rm&&Yh){Rm=!0;do for(var c=!1,h=Gh;h!==null;){if(s!==0){var m=h.pendingLanes;if(m===0)var y=0;else{var T=h.suspendedLanes,A=h.pingedLanes;y=(1<<31-xe(42|s)+1)-1,y&=m&~(T&~A),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(c=!0,mv(h,y))}else y=zt,y=Mi(h,h===oe?y:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(y&3)===0||ci(h,y)||(c=!0,mv(h,y));h=h.next}while(c);Rm=!1}}function RC(){fv()}function fv(){Yh=Cm=!1;var s=0;dr!==0&&jC()&&(s=dr);for(var a=_n(),c=null,h=Gh;h!==null;){var m=h.next,y=dv(h,a);y===0?(h.next=null,c===null?Gh=m:c.next=m,m===null&&(Fo=c)):(c=h,(s!==0||(y&3)!==0)&&(Yh=!0)),h=m}Ge!==0&&Ge!==5||mc(s),dr!==0&&(dr=0)}function dv(s,a){for(var c=s.suspendedLanes,h=s.pingedLanes,m=s.expirationTimes,y=s.pendingLanes&-62914561;0<y;){var T=31-xe(y),A=1<<T,V=m[T];V===-1?((A&c)===0||(A&h)!==0)&&(m[T]=ig(A,a)):V<=a&&(s.expiredLanes|=A),y&=~A}if(a=oe,c=zt,c=Mi(s,s===a?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h=s.callbackNode,c===0||s===a&&(te===2||te===9)||s.cancelPendingCommit!==null)return h!==null&&h!==null&&Bs(h),s.callbackNode=null,s.callbackPriority=0;if((c&3)===0||ci(s,c)){if(a=c&-c,a===s.callbackPriority)return a;switch(h!==null&&Bs(h),as(c)){case 2:case 8:c=Al;break;case 32:c=Fs;break;case 268435456:c=Pu;break;default:c=Fs}return h=gv.bind(null,s),c=qe(c,h),s.callbackPriority=a,s.callbackNode=c,a}return h!==null&&h!==null&&Bs(h),s.callbackPriority=2,s.callbackNode=null,2}function gv(s,a){if(Ge!==0&&Ge!==5)return s.callbackNode=null,s.callbackPriority=0,null;var c=s.callbackNode;if(qh()&&s.callbackNode!==c)return null;var h=zt;return h=Mi(s,s===oe?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h===0?null:(Xb(s,h,a),dv(s,_n()),s.callbackNode!=null&&s.callbackNode===c?gv.bind(null,s):null)}function mv(s,a){if(qh())return null;Xb(s,a,!0)}function IC(){BC(function(){($t&6)!==0?qe(Sl,RC):fv()})}function Im(){if(dr===0){var s=Co;s===0&&(s=Ii,Ii<<=1,(Ii&261888)===0&&(Ii=256)),dr=s}return dr}function pv(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:ho(""+s)}function yv(s,a){var c=a.ownerDocument.createElement("input");return c.name=a.name,c.value=a.value,s.id&&c.setAttribute("form",s.id),a.parentNode.insertBefore(c,a),s=new FormData(s),c.parentNode.removeChild(c),s}function DC(s,a,c,h,m){if(a==="submit"&&c&&c.stateNode===m){var y=pv((m[We]||null).action),T=h.submitter;T&&(a=(a=T[We]||null)?pv(a.formAction):T.getAttribute("formAction"),a!==null&&(y=a,T=null));var A=new Fi("action","action",null,h,m);s.push({event:A,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(dr!==0){var V=T?yv(m,T):new FormData(m);Xg(c,{pending:!0,data:V,method:m.method,action:y},null,V)}}else typeof y=="function"&&(A.preventDefault(),V=T?yv(m,T):new FormData(m),Xg(c,{pending:!0,data:V,method:m.method,action:y},y,V))},currentTarget:m}]})}}for(var Dm=0;Dm<fg.length;Dm++){var Mm=fg[Dm],MC=Mm.toLowerCase(),OC=Mm[0].toUpperCase()+Mm.slice(1);yi(MC,"on"+OC)}yi(W_,"onAnimationEnd"),yi(X_,"onAnimationIteration"),yi(Q_,"onAnimationStart"),yi("dblclick","onDoubleClick"),yi("focusin","onFocus"),yi("focusout","onBlur"),yi(Ww,"onTransitionRun"),yi(Xw,"onTransitionStart"),yi(Qw,"onTransitionCancel"),yi($_,"onTransitionEnd"),zi("onMouseEnter",["mouseout","mouseover"]),zi("onMouseLeave",["mouseout","mouseover"]),zi("onPointerEnter",["pointerout","pointerover"]),zi("onPointerLeave",["pointerout","pointerover"]),Li("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Li("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Li("onBeforeInput",["compositionend","keypress","textInput","paste"]),Li("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Li("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Li("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),NC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pc));function _v(s,a){a=(a&4)!==0;for(var c=0;c<s.length;c++){var h=s[c],m=h.event;h=h.listeners;t:{var y=void 0;if(a)for(var T=h.length-1;0<=T;T--){var A=h[T],V=A.instance,G=A.currentTarget;if(A=A.listener,V!==y&&m.isPropagationStopped())break t;y=A,m.currentTarget=G;try{y(m)}catch(tt){oh(tt)}m.currentTarget=null,y=V}else for(T=0;T<h.length;T++){if(A=h[T],V=A.instance,G=A.currentTarget,A=A.listener,V!==y&&m.isPropagationStopped())break t;y=A,m.currentTarget=G;try{y(m)}catch(tt){oh(tt)}m.currentTarget=null,y=V}}}}function Vt(s,a){var c=a[ao];c===void 0&&(c=a[ao]=new Set);var h=s+"__bubble";c.has(h)||(bv(a,s,2,!1),c.add(h))}function Om(s,a,c){var h=0;a&&(h|=4),bv(c,s,h,a)}var Kh="_reactListening"+Math.random().toString(36).slice(2);function Nm(s){if(!s[Kh]){s[Kh]=!0,Rl.forEach(function(c){c!=="selectionchange"&&(NC.has(c)||Om(c,!1,s),Om(c,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Kh]||(a[Kh]=!0,Om("selectionchange",!1,a))}}function bv(s,a,c,h){switch(Wv(a)){case 2:var m=oR;break;case 8:m=lR;break;default:m=Wm}c=m.bind(null,a,c,s),m=void 0,!la||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(m=!0),h?m!==void 0?s.addEventListener(a,c,{capture:!0,passive:m}):s.addEventListener(a,c,!0):m!==void 0?s.addEventListener(a,c,{passive:m}):s.addEventListener(a,c,!1)}function km(s,a,c,h,m){var y=h;if((a&1)===0&&(a&2)===0&&h!==null)t:for(;;){if(h===null)return;var T=h.tag;if(T===3||T===4){var A=h.stateNode.containerInfo;if(A===m)break;if(T===4)for(T=h.return;T!==null;){var V=T.tag;if((V===3||V===4)&&T.stateNode.containerInfo===m)return;T=T.return}for(;A!==null;){if(T=Pi(A),T===null)return;if(V=T.tag,V===5||V===6||V===26||V===27){h=y=T;continue t}A=A.parentNode}}h=h.return}Ws(function(){var G=y,tt=Wn(c),nt=[];t:{var Y=J_.get(s);if(Y!==void 0){var Q=Fi,gt=s;switch(s){case"keypress":if(ua(c)===0)break t;case"keydown":case"keyup":Q=sh;break;case"focusin":gt="focus",Q=fa;break;case"focusout":gt="blur",Q=fa;break;case"beforeblur":case"afterblur":Q=fa;break;case"click":if(c.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=Bl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=Xu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=v;break;case W_:case X_:case Q_:Q=$u;break;case $_:Q=I;break;case"scroll":case"scrollend":Q=Ul;break;case"wheel":Q=X;break;case"copy":case"cut":case"paste":Q=Ju;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=cs;break;case"toggle":case"beforetoggle":Q=Dt}var Tt=(a&4)!==0,ae=!Tt&&(s==="scroll"||s==="scrollend"),B=Tt?Y!==null?Y+"Capture":null:Y;Tt=[];for(var U=G,q;U!==null;){var et=U;if(q=et.stateNode,et=et.tag,et!==5&&et!==26&&et!==27||q===null||B===null||(et=di(U,B),et!=null&&Tt.push(yc(U,et,q))),ae)break;U=U.return}0<Tt.length&&(Y=new Q(Y,gt,null,c,tt),nt.push({event:Y,listeners:Tt}))}}if((a&7)===0){t:{if(Y=s==="mouseover"||s==="pointerover",Q=s==="mouseout"||s==="pointerout",Y&&c!==Ll&&(gt=c.relatedTarget||c.fromElement)&&(Pi(gt)||gt[Ni]))break t;if((Q||Y)&&(Y=tt.window===tt?tt:(Y=tt.ownerDocument)?Y.defaultView||Y.parentWindow:window,Q?(gt=c.relatedTarget||c.toElement,Q=G,gt=gt?Pi(gt):null,gt!==null&&(ae=o(gt),Tt=gt.tag,gt!==ae||Tt!==5&&Tt!==27&&Tt!==6)&&(gt=null)):(Q=null,gt=G),Q!==gt)){if(Tt=Bl,et="onMouseLeave",B="onMouseEnter",U="mouse",(s==="pointerout"||s==="pointerover")&&(Tt=cs,et="onPointerLeave",B="onPointerEnter",U="pointer"),ae=Q==null?Y:kn(Q),q=gt==null?Y:kn(gt),Y=new Tt(et,U+"leave",Q,c,tt),Y.target=ae,Y.relatedTarget=q,et=null,Pi(tt)===G&&(Tt=new Tt(B,U+"enter",gt,c,tt),Tt.target=q,Tt.relatedTarget=ae,et=Tt),ae=et,Q&&gt)e:{for(Tt=kC,B=Q,U=gt,q=0,et=B;et;et=Tt(et))q++;et=0;for(var yt=U;yt;yt=Tt(yt))et++;for(;0<q-et;)B=Tt(B),q--;for(;0<et-q;)U=Tt(U),et--;for(;q--;){if(B===U||U!==null&&B===U.alternate){Tt=B;break e}B=Tt(B),U=Tt(U)}Tt=null}else Tt=null;Q!==null&&vv(nt,Y,Q,Tt,!1),gt!==null&&ae!==null&&vv(nt,ae,gt,Tt,!0)}}t:{if(Y=G?kn(G):window,Q=Y.nodeName&&Y.nodeName.toLowerCase(),Q==="select"||Q==="input"&&Y.type==="file")var Kt=L_;else if(P_(Y))if(z_)Kt=Gw;else{Kt=Hw;var mt=Fw}else Q=Y.nodeName,!Q||Q.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?G&&uo(G.elementType)&&(Kt=L_):Kt=qw;if(Kt&&(Kt=Kt(s,G))){V_(nt,Kt,c,tt);break t}mt&&mt(s,Y,G),s==="focusout"&&G&&Y.type==="number"&&G.memoizedProps.value!=null&&kl(Y,"number",Y.value)}switch(mt=G?kn(G):window,s){case"focusin":(P_(mt)||mt.contentEditable==="true")&&(bo=mt,cg=G,Yl=null);break;case"focusout":Yl=cg=bo=null;break;case"mousedown":ug=!0;break;case"contextmenu":case"mouseup":case"dragend":ug=!1,Y_(nt,c,tt);break;case"selectionchange":if(Kw)break;case"keydown":case"keyup":Y_(nt,c,tt)}var Ot;if(Qt)t:{switch(s){case"compositionstart":var jt="onCompositionStart";break t;case"compositionend":jt="onCompositionEnd";break t;case"compositionupdate":jt="onCompositionUpdate";break t}jt=void 0}else _o?da(s,c)&&(jt="onCompositionEnd"):s==="keydown"&&c.keyCode===229&&(jt="onCompositionStart");jt&&(Gi&&c.locale!=="ko"&&(_o||jt!=="onCompositionStart"?jt==="onCompositionEnd"&&_o&&(Ot=jl()):(Bi=tt,zl="value"in Bi?Bi.value:Bi.textContent,_o=!0)),mt=Wh(G,jt),0<mt.length&&(jt=new qi(jt,s,null,c,tt),nt.push({event:jt,listeners:mt}),Ot?jt.data=Ot:(Ot=yo(c),Ot!==null&&(jt.data=Ot)))),(Ot=Qn?zw(s,c):jw(s,c))&&(jt=Wh(G,"onBeforeInput"),0<jt.length&&(mt=new qi("onBeforeInput","beforeinput",null,c,tt),nt.push({event:mt,listeners:jt}),mt.data=Ot)),DC(nt,s,G,c,tt)}_v(nt,a)})}function yc(s,a,c){return{instance:s,listener:a,currentTarget:c}}function Wh(s,a){for(var c=a+"Capture",h=[];s!==null;){var m=s,y=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||y===null||(m=di(s,c),m!=null&&h.unshift(yc(s,m,y)),m=di(s,a),m!=null&&h.push(yc(s,m,y))),s.tag===3)return h;s=s.return}return[]}function kC(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function vv(s,a,c,h,m){for(var y=a._reactName,T=[];c!==null&&c!==h;){var A=c,V=A.alternate,G=A.stateNode;if(A=A.tag,V!==null&&V===h)break;A!==5&&A!==26&&A!==27||G===null||(V=G,m?(G=di(c,y),G!=null&&T.unshift(yc(c,G,V))):m||(G=di(c,y),G!=null&&T.push(yc(c,G,V)))),c=c.return}T.length!==0&&s.push({event:a,listeners:T})}var PC=/\r\n?/g,VC=/\u0000|\uFFFD/g;function Tv(s){return(typeof s=="string"?s:""+s).replace(PC,`
`).replace(VC,"")}function Ev(s,a){return a=Tv(a),Tv(s)===a}function re(s,a,c,h,m,y){switch(c){case"children":typeof h=="string"?a==="body"||a==="textarea"&&h===""||En(s,h):(typeof h=="number"||typeof h=="bigint")&&a!=="body"&&En(s,""+h);break;case"className":Pn(s,"class",h);break;case"tabIndex":Pn(s,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Pn(s,c,h);break;case"style":Vl(s,h,y);break;case"data":if(a!=="object"){Pn(s,"data",h);break}case"src":case"href":if(h===""&&(a!=="a"||c!=="href")){s.removeAttribute(c);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(c);break}h=ho(""+h),s.setAttribute(c,h);break;case"action":case"formAction":if(typeof h=="function"){s.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(c==="formAction"?(a!=="input"&&re(s,a,"name",m.name,m,null),re(s,a,"formEncType",m.formEncType,m,null),re(s,a,"formMethod",m.formMethod,m,null),re(s,a,"formTarget",m.formTarget,m,null)):(re(s,a,"encType",m.encType,m,null),re(s,a,"method",m.method,m,null),re(s,a,"target",m.target,m,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(c);break}h=ho(""+h),s.setAttribute(c,h);break;case"onClick":h!=null&&(s.onclick=fi);break;case"onScroll":h!=null&&Vt("scroll",s);break;case"onScrollEnd":h!=null&&Vt("scrollend",s);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(c=h.__html,c!=null){if(m.children!=null)throw Error(i(60));s.innerHTML=c}}break;case"multiple":s.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":s.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){s.removeAttribute("xlink:href");break}c=ho(""+h),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(c,""+h):s.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(c,""):s.removeAttribute(c);break;case"capture":case"download":h===!0?s.setAttribute(c,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(c,h):s.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?s.setAttribute(c,h):s.removeAttribute(c);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?s.removeAttribute(c):s.setAttribute(c,h);break;case"popover":Vt("beforetoggle",s),Vt("toggle",s),lo(s,"popover",h);break;case"xlinkActuate":Ne(s,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Ne(s,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Ne(s,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Ne(s,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Ne(s,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Ne(s,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Ne(s,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Ne(s,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Ne(s,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":lo(s,"is",h);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Wu.get(c)||c,lo(s,c,h))}}function Pm(s,a,c,h,m,y){switch(c){case"style":Vl(s,h,y);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(c=h.__html,c!=null){if(m.children!=null)throw Error(i(60));s.innerHTML=c}}break;case"children":typeof h=="string"?En(s,h):(typeof h=="number"||typeof h=="bigint")&&En(s,""+h);break;case"onScroll":h!=null&&Vt("scroll",s);break;case"onScrollEnd":h!=null&&Vt("scrollend",s);break;case"onClick":h!=null&&(s.onclick=fi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Il.hasOwnProperty(c))t:{if(c[0]==="o"&&c[1]==="n"&&(m=c.endsWith("Capture"),a=c.slice(2,m?c.length-7:void 0),y=s[We]||null,y=y!=null?y[c]:null,typeof y=="function"&&s.removeEventListener(a,y,m),typeof h=="function")){typeof y!="function"&&y!==null&&(c in s?s[c]=null:s.hasAttribute(c)&&s.removeAttribute(c)),s.addEventListener(a,h,m);break t}c in s?s[c]=h:h===!0?s.setAttribute(c,""):lo(s,c,h)}}}function rn(s,a,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Vt("error",s),Vt("load",s);var h=!1,m=!1,y;for(y in c)if(c.hasOwnProperty(y)){var T=c[y];if(T!=null)switch(y){case"src":h=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:re(s,a,y,T,c,null)}}m&&re(s,a,"srcSet",c.srcSet,c,null),h&&re(s,a,"src",c.src,c,null);return;case"input":Vt("invalid",s);var A=y=T=m=null,V=null,G=null;for(h in c)if(c.hasOwnProperty(h)){var tt=c[h];if(tt!=null)switch(h){case"name":m=tt;break;case"type":T=tt;break;case"checked":V=tt;break;case"defaultChecked":G=tt;break;case"value":y=tt;break;case"defaultValue":A=tt;break;case"children":case"dangerouslySetInnerHTML":if(tt!=null)throw Error(i(137,a));break;default:re(s,a,h,tt,c,null)}}Gu(s,y,A,V,G,T,m,!1);return;case"select":Vt("invalid",s),h=T=y=null;for(m in c)if(c.hasOwnProperty(m)&&(A=c[m],A!=null))switch(m){case"value":y=A;break;case"defaultValue":T=A;break;case"multiple":h=A;default:re(s,a,m,A,c,null)}a=y,c=T,s.multiple=!!h,a!=null?qs(s,!!h,a,!1):c!=null&&qs(s,!!h,c,!0);return;case"textarea":Vt("invalid",s),y=m=h=null;for(T in c)if(c.hasOwnProperty(T)&&(A=c[T],A!=null))switch(T){case"value":h=A;break;case"defaultValue":m=A;break;case"children":y=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(i(91));break;default:re(s,a,T,A,c,null)}Gs(s,h,m,y);return;case"option":for(V in c)if(c.hasOwnProperty(V)&&(h=c[V],h!=null))switch(V){case"selected":s.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:re(s,a,V,h,c,null)}return;case"dialog":Vt("beforetoggle",s),Vt("toggle",s),Vt("cancel",s),Vt("close",s);break;case"iframe":case"object":Vt("load",s);break;case"video":case"audio":for(h=0;h<pc.length;h++)Vt(pc[h],s);break;case"image":Vt("error",s),Vt("load",s);break;case"details":Vt("toggle",s);break;case"embed":case"source":case"link":Vt("error",s),Vt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in c)if(c.hasOwnProperty(G)&&(h=c[G],h!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:re(s,a,G,h,c,null)}return;default:if(uo(a)){for(tt in c)c.hasOwnProperty(tt)&&(h=c[tt],h!==void 0&&Pm(s,a,tt,h,c,void 0));return}}for(A in c)c.hasOwnProperty(A)&&(h=c[A],h!=null&&re(s,a,A,h,c,null))}function LC(s,a,c,h){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,y=null,T=null,A=null,V=null,G=null,tt=null;for(Q in c){var nt=c[Q];if(c.hasOwnProperty(Q)&&nt!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":V=nt;default:h.hasOwnProperty(Q)||re(s,a,Q,null,h,nt)}}for(var Y in h){var Q=h[Y];if(nt=c[Y],h.hasOwnProperty(Y)&&(Q!=null||nt!=null))switch(Y){case"type":y=Q;break;case"name":m=Q;break;case"checked":G=Q;break;case"defaultChecked":tt=Q;break;case"value":T=Q;break;case"defaultValue":A=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,a));break;default:Q!==nt&&re(s,a,Y,Q,h,nt)}}co(s,T,A,V,G,tt,y,m);return;case"select":Q=T=A=Y=null;for(y in c)if(V=c[y],c.hasOwnProperty(y)&&V!=null)switch(y){case"value":break;case"multiple":Q=V;default:h.hasOwnProperty(y)||re(s,a,y,null,h,V)}for(m in h)if(y=h[m],V=c[m],h.hasOwnProperty(m)&&(y!=null||V!=null))switch(m){case"value":Y=y;break;case"defaultValue":A=y;break;case"multiple":T=y;default:y!==V&&re(s,a,m,y,h,V)}a=A,c=T,h=Q,Y!=null?qs(s,!!c,Y,!1):!!h!=!!c&&(a!=null?qs(s,!!c,a,!0):qs(s,!!c,c?[]:"",!1));return;case"textarea":Q=Y=null;for(A in c)if(m=c[A],c.hasOwnProperty(A)&&m!=null&&!h.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:re(s,a,A,null,h,m)}for(T in h)if(m=h[T],y=c[T],h.hasOwnProperty(T)&&(m!=null||y!=null))switch(T){case"value":Y=m;break;case"defaultValue":Q=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(i(91));break;default:m!==y&&re(s,a,T,m,h,y)}Yu(s,Y,Q);return;case"option":for(var gt in c)if(Y=c[gt],c.hasOwnProperty(gt)&&Y!=null&&!h.hasOwnProperty(gt))switch(gt){case"selected":s.selected=!1;break;default:re(s,a,gt,null,h,Y)}for(V in h)if(Y=h[V],Q=c[V],h.hasOwnProperty(V)&&Y!==Q&&(Y!=null||Q!=null))switch(V){case"selected":s.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:re(s,a,V,Y,h,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Tt in c)Y=c[Tt],c.hasOwnProperty(Tt)&&Y!=null&&!h.hasOwnProperty(Tt)&&re(s,a,Tt,null,h,Y);for(G in h)if(Y=h[G],Q=c[G],h.hasOwnProperty(G)&&Y!==Q&&(Y!=null||Q!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(i(137,a));break;default:re(s,a,G,Y,h,Q)}return;default:if(uo(a)){for(var ae in c)Y=c[ae],c.hasOwnProperty(ae)&&Y!==void 0&&!h.hasOwnProperty(ae)&&Pm(s,a,ae,void 0,h,Y);for(tt in h)Y=h[tt],Q=c[tt],!h.hasOwnProperty(tt)||Y===Q||Y===void 0&&Q===void 0||Pm(s,a,tt,Y,h,Q);return}}for(var B in c)Y=c[B],c.hasOwnProperty(B)&&Y!=null&&!h.hasOwnProperty(B)&&re(s,a,B,null,h,Y);for(nt in h)Y=h[nt],Q=c[nt],!h.hasOwnProperty(nt)||Y===Q||Y==null&&Q==null||re(s,a,nt,Y,h,Q)}function xv(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function zC(){if(typeof performance.getEntriesByType=="function"){for(var s=0,a=0,c=performance.getEntriesByType("resource"),h=0;h<c.length;h++){var m=c[h],y=m.transferSize,T=m.initiatorType,A=m.duration;if(y&&A&&xv(T)){for(T=0,A=m.responseEnd,h+=1;h<c.length;h++){var V=c[h],G=V.startTime;if(G>A)break;var tt=V.transferSize,nt=V.initiatorType;tt&&xv(nt)&&(V=V.responseEnd,T+=tt*(V<A?1:(A-G)/(V-G)))}if(--h,a+=8*(y+T)/(m.duration/1e3),s++,10<s)break}}if(0<s)return a/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Vm=null,Lm=null;function Xh(s){return s.nodeType===9?s:s.ownerDocument}function Sv(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Av(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function zm(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var jm=null;function jC(){var s=window.event;return s&&s.type==="popstate"?s===jm?!1:(jm=s,!0):(jm=null,!1)}var wv=typeof setTimeout=="function"?setTimeout:void 0,UC=typeof clearTimeout=="function"?clearTimeout:void 0,Cv=typeof Promise=="function"?Promise:void 0,BC=typeof queueMicrotask=="function"?queueMicrotask:typeof Cv<"u"?function(s){return Cv.resolve(null).then(s).catch(FC)}:wv;function FC(s){setTimeout(function(){throw s})}function gr(s){return s==="head"}function Rv(s,a){var c=a,h=0;do{var m=c.nextSibling;if(s.removeChild(c),m&&m.nodeType===8)if(c=m.data,c==="/$"||c==="/&"){if(h===0){s.removeChild(m),Yo(a);return}h--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")h++;else if(c==="html")_c(s.ownerDocument.documentElement);else if(c==="head"){c=s.ownerDocument.head,_c(c);for(var y=c.firstChild;y;){var T=y.nextSibling,A=y.nodeName;y[ki]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&y.rel.toLowerCase()==="stylesheet"||c.removeChild(y),y=T}}else c==="body"&&_c(s.ownerDocument.body);c=m}while(c);Yo(a)}function Iv(s,a){var c=s;s=0;do{var h=c.nextSibling;if(c.nodeType===1?a?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(a?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),h&&h.nodeType===8)if(c=h.data,c==="/$"){if(s===0)break;s--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||s++;c=h}while(c)}function Um(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var c=a;switch(a=a.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Um(c),oo(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}s.removeChild(c)}}function HC(s,a,c,h){for(;s.nodeType===1;){var m=c;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!h&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(h){if(!s[ki])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(y=s.getAttribute("rel"),y==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(y!==m.rel||s.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||s.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||s.getAttribute("title")!==(m.title==null?null:m.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(y=s.getAttribute("src"),(y!==(m.src==null?null:m.src)||s.getAttribute("type")!==(m.type==null?null:m.type)||s.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&y&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var y=m.name==null?null:""+m.name;if(m.type==="hidden"&&s.getAttribute("name")===y)return s}else return s;if(s=ii(s.nextSibling),s===null)break}return null}function qC(s,a,c){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!c||(s=ii(s.nextSibling),s===null))return null;return s}function Dv(s,a){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!a||(s=ii(s.nextSibling),s===null))return null;return s}function Bm(s){return s.data==="$?"||s.data==="$~"}function Fm(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function GC(s,a){var c=s.ownerDocument;if(s.data==="$~")s._reactRetry=a;else if(s.data!=="$?"||c.readyState!=="loading")a();else{var h=function(){a(),c.removeEventListener("DOMContentLoaded",h)};c.addEventListener("DOMContentLoaded",h),s._reactRetry=h}}function ii(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return s}var Hm=null;function Mv(s){s=s.nextSibling;for(var a=0;s;){if(s.nodeType===8){var c=s.data;if(c==="/$"||c==="/&"){if(a===0)return ii(s.nextSibling);a--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||a++}s=s.nextSibling}return null}function Ov(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var c=s.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(a===0)return s;a--}else c!=="/$"&&c!=="/&"||a++}s=s.previousSibling}return null}function Nv(s,a,c){switch(a=Xh(c),s){case"html":if(s=a.documentElement,!s)throw Error(i(452));return s;case"head":if(s=a.head,!s)throw Error(i(453));return s;case"body":if(s=a.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function _c(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);oo(s)}var si=new Map,kv=new Set;function Qh(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Ss=at.d;at.d={f:YC,r:KC,D:WC,C:XC,L:QC,m:$C,X:ZC,S:JC,M:tR};function YC(){var s=Ss.f(),a=Bh();return s||a}function KC(s){var a=Kn(s);a!==null&&a.tag===5&&a.type==="form"?$0(a):Ss.r(s)}var Ho=typeof document>"u"?null:document;function Pv(s,a,c){var h=Ho;if(h&&typeof a=="string"&&a){var m=Tn(a);m='link[rel="'+s+'"][href="'+m+'"]',typeof c=="string"&&(m+='[crossorigin="'+c+'"]'),kv.has(m)||(kv.add(m),s={rel:s,crossOrigin:c,href:a},h.querySelector(m)===null&&(a=h.createElement("link"),rn(a,"link",s),Oe(a),h.head.appendChild(a)))}}function WC(s){Ss.D(s),Pv("dns-prefetch",s,null)}function XC(s,a){Ss.C(s,a),Pv("preconnect",s,a)}function QC(s,a,c){Ss.L(s,a,c);var h=Ho;if(h&&s&&a){var m='link[rel="preload"][as="'+Tn(a)+'"]';a==="image"&&c&&c.imageSrcSet?(m+='[imagesrcset="'+Tn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(m+='[imagesizes="'+Tn(c.imageSizes)+'"]')):m+='[href="'+Tn(s)+'"]';var y=m;switch(a){case"style":y=qo(s);break;case"script":y=Go(s)}si.has(y)||(s=_({rel:"preload",href:a==="image"&&c&&c.imageSrcSet?void 0:s,as:a},c),si.set(y,s),h.querySelector(m)!==null||a==="style"&&h.querySelector(bc(y))||a==="script"&&h.querySelector(vc(y))||(a=h.createElement("link"),rn(a,"link",s),Oe(a),h.head.appendChild(a)))}}function $C(s,a){Ss.m(s,a);var c=Ho;if(c&&s){var h=a&&typeof a.as=="string"?a.as:"script",m='link[rel="modulepreload"][as="'+Tn(h)+'"][href="'+Tn(s)+'"]',y=m;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Go(s)}if(!si.has(y)&&(s=_({rel:"modulepreload",href:s},a),si.set(y,s),c.querySelector(m)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(vc(y)))return}h=c.createElement("link"),rn(h,"link",s),Oe(h),c.head.appendChild(h)}}}function JC(s,a,c){Ss.S(s,a,c);var h=Ho;if(h&&s){var m=Vi(h).hoistableStyles,y=qo(s);a=a||"default";var T=m.get(y);if(!T){var A={loading:0,preload:null};if(T=h.querySelector(bc(y)))A.loading=5;else{s=_({rel:"stylesheet",href:s,"data-precedence":a},c),(c=si.get(y))&&qm(s,c);var V=T=h.createElement("link");Oe(V),rn(V,"link",s),V._p=new Promise(function(G,tt){V.onload=G,V.onerror=tt}),V.addEventListener("load",function(){A.loading|=1}),V.addEventListener("error",function(){A.loading|=2}),A.loading|=4,$h(T,a,h)}T={type:"stylesheet",instance:T,count:1,state:A},m.set(y,T)}}}function ZC(s,a){Ss.X(s,a);var c=Ho;if(c&&s){var h=Vi(c).hoistableScripts,m=Go(s),y=h.get(m);y||(y=c.querySelector(vc(m)),y||(s=_({src:s,async:!0},a),(a=si.get(m))&&Gm(s,a),y=c.createElement("script"),Oe(y),rn(y,"link",s),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},h.set(m,y))}}function tR(s,a){Ss.M(s,a);var c=Ho;if(c&&s){var h=Vi(c).hoistableScripts,m=Go(s),y=h.get(m);y||(y=c.querySelector(vc(m)),y||(s=_({src:s,async:!0,type:"module"},a),(a=si.get(m))&&Gm(s,a),y=c.createElement("script"),Oe(y),rn(y,"link",s),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},h.set(m,y))}}function Vv(s,a,c,h){var m=(m=xt.current)?Qh(m):null;if(!m)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(a=qo(c.href),c=Vi(m).hoistableStyles,h=c.get(a),h||(h={type:"style",instance:null,count:0,state:null},c.set(a,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){s=qo(c.href);var y=Vi(m).hoistableStyles,T=y.get(s);if(T||(m=m.ownerDocument||m,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(s,T),(y=m.querySelector(bc(s)))&&!y._p&&(T.instance=y,T.state.loading=5),si.has(s)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},si.set(s,c),y||eR(m,s,c,T.state))),a&&h===null)throw Error(i(528,""));return T}if(a&&h!==null)throw Error(i(529,""));return null;case"script":return a=c.async,c=c.src,typeof c=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Go(c),c=Vi(m).hoistableScripts,h=c.get(a),h||(h={type:"script",instance:null,count:0,state:null},c.set(a,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function qo(s){return'href="'+Tn(s)+'"'}function bc(s){return'link[rel="stylesheet"]['+s+"]"}function Lv(s){return _({},s,{"data-precedence":s.precedence,precedence:null})}function eR(s,a,c,h){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?h.loading=1:(a=s.createElement("link"),h.preload=a,a.addEventListener("load",function(){return h.loading|=1}),a.addEventListener("error",function(){return h.loading|=2}),rn(a,"link",c),Oe(a),s.head.appendChild(a))}function Go(s){return'[src="'+Tn(s)+'"]'}function vc(s){return"script[async]"+s}function zv(s,a,c){if(a.count++,a.instance===null)switch(a.type){case"style":var h=s.querySelector('style[data-href~="'+Tn(c.href)+'"]');if(h)return a.instance=h,Oe(h),h;var m=_({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return h=(s.ownerDocument||s).createElement("style"),Oe(h),rn(h,"style",m),$h(h,c.precedence,s),a.instance=h;case"stylesheet":m=qo(c.href);var y=s.querySelector(bc(m));if(y)return a.state.loading|=4,a.instance=y,Oe(y),y;h=Lv(c),(m=si.get(m))&&qm(h,m),y=(s.ownerDocument||s).createElement("link"),Oe(y);var T=y;return T._p=new Promise(function(A,V){T.onload=A,T.onerror=V}),rn(y,"link",h),a.state.loading|=4,$h(y,c.precedence,s),a.instance=y;case"script":return y=Go(c.src),(m=s.querySelector(vc(y)))?(a.instance=m,Oe(m),m):(h=c,(m=si.get(y))&&(h=_({},c),Gm(h,m)),s=s.ownerDocument||s,m=s.createElement("script"),Oe(m),rn(m,"link",h),s.head.appendChild(m),a.instance=m);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(h=a.instance,a.state.loading|=4,$h(h,c.precedence,s));return a.instance}function $h(s,a,c){for(var h=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=h.length?h[h.length-1]:null,y=m,T=0;T<h.length;T++){var A=h[T];if(A.dataset.precedence===a)y=A;else if(y!==m)break}y?y.parentNode.insertBefore(s,y.nextSibling):(a=c.nodeType===9?c.head:c,a.insertBefore(s,a.firstChild))}function qm(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function Gm(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var Jh=null;function jv(s,a,c){if(Jh===null){var h=new Map,m=Jh=new Map;m.set(c,h)}else m=Jh,h=m.get(c),h||(h=new Map,m.set(c,h));if(h.has(s))return h;for(h.set(s,null),c=c.getElementsByTagName(s),m=0;m<c.length;m++){var y=c[m];if(!(y[ki]||y[Me]||s==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var T=y.getAttribute(a)||"";T=s+T;var A=h.get(T);A?A.push(y):h.set(T,[y])}}return h}function Uv(s,a,c){s=s.ownerDocument||s,s.head.insertBefore(c,a==="title"?s.querySelector("head > title"):null)}function nR(s,a,c){if(c===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Bv(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function iR(s,a,c,h){if(c.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var m=qo(h.href),y=a.querySelector(bc(m));if(y){a=y._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(s.count++,s=Zh.bind(s),a.then(s,s)),c.state.loading|=4,c.instance=y,Oe(y);return}y=a.ownerDocument||a,h=Lv(h),(m=si.get(m))&&qm(h,m),y=y.createElement("link"),Oe(y);var T=y;T._p=new Promise(function(A,V){T.onload=A,T.onerror=V}),rn(y,"link",h),c.instance=y}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(c,a),(a=c.state.preload)&&(c.state.loading&3)===0&&(s.count++,c=Zh.bind(s),a.addEventListener("load",c),a.addEventListener("error",c))}}var Ym=0;function sR(s,a){return s.stylesheets&&s.count===0&&ef(s,s.stylesheets),0<s.count||0<s.imgCount?function(c){var h=setTimeout(function(){if(s.stylesheets&&ef(s,s.stylesheets),s.unsuspend){var y=s.unsuspend;s.unsuspend=null,y()}},6e4+a);0<s.imgBytes&&Ym===0&&(Ym=62500*zC());var m=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&ef(s,s.stylesheets),s.unsuspend)){var y=s.unsuspend;s.unsuspend=null,y()}},(s.imgBytes>Ym?50:800)+a);return s.unsuspend=c,function(){s.unsuspend=null,clearTimeout(h),clearTimeout(m)}}:null}function Zh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ef(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var tf=null;function ef(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,tf=new Map,a.forEach(rR,s),tf=null,Zh.call(s))}function rR(s,a){if(!(a.state.loading&4)){var c=tf.get(s);if(c)var h=c.get(null);else{c=new Map,tf.set(s,c);for(var m=s.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<m.length;y++){var T=m[y];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(c.set(T.dataset.precedence,T),h=T)}h&&c.set(null,h)}m=a.instance,T=m.getAttribute("data-precedence"),y=c.get(T)||h,y===h&&c.set(null,m),c.set(T,m),this.count++,h=Zh.bind(this),m.addEventListener("load",h),m.addEventListener("error",h),y?y.parentNode.insertBefore(m,y.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(m,s.firstChild)),a.state.loading|=4}}var Tc={$$typeof:W,Provider:null,Consumer:null,_currentValue:ft,_currentValue2:ft,_threadCount:0};function aR(s,a,c,h,m,y,T,A,V){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Oi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Oi(0),this.hiddenUpdates=Oi(null),this.identifierPrefix=h,this.onUncaughtError=m,this.onCaughtError=y,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function Fv(s,a,c,h,m,y,T,A,V,G,tt,nt){return s=new aR(s,a,c,T,V,G,tt,nt,A),a=1,y===!0&&(a|=24),y=Ln(3,null,null,a),s.current=y,y.stateNode=s,a=Ag(),a.refCount++,s.pooledCache=a,a.refCount++,y.memoizedState={element:h,isDehydrated:c,cache:a},Ig(y),s}function Hv(s){return s?(s=Eo,s):Eo}function qv(s,a,c,h,m,y){m=Hv(m),h.context===null?h.context=m:h.pendingContext=m,h=ir(a),h.payload={element:c},y=y===void 0?null:y,y!==null&&(h.callback=y),c=sr(s,h,a),c!==null&&(Cn(c,s,a),Zl(c,s,a))}function Gv(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var c=s.retryLane;s.retryLane=c!==0&&c<a?c:a}}function Km(s,a){Gv(s,a),(s=s.alternate)&&Gv(s,a)}function Yv(s){if(s.tag===13||s.tag===31){var a=pa(s,67108864);a!==null&&Cn(a,s,67108864),Km(s,67108864)}}function Kv(s){if(s.tag===13||s.tag===31){var a=Fn();a=sa(a);var c=pa(s,a);c!==null&&Cn(c,s,a),Km(s,a)}}var nf=!0;function oR(s,a,c,h){var m=K.T;K.T=null;var y=at.p;try{at.p=2,Wm(s,a,c,h)}finally{at.p=y,K.T=m}}function lR(s,a,c,h){var m=K.T;K.T=null;var y=at.p;try{at.p=8,Wm(s,a,c,h)}finally{at.p=y,K.T=m}}function Wm(s,a,c,h){if(nf){var m=Xm(h);if(m===null)km(s,a,h,sf,c),Xv(s,h);else if(uR(m,s,a,c,h))h.stopPropagation();else if(Xv(s,h),a&4&&-1<cR.indexOf(s)){for(;m!==null;){var y=Kn(m);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var T=Di(y.pendingLanes);if(T!==0){var A=y;for(A.pendingLanes|=2,A.entangledLanes|=2;T;){var V=1<<31-xe(T);A.entanglements[1]|=V,T&=~V}Xi(y),($t&6)===0&&(jh=_n()+500,mc(0))}}break;case 31:case 13:A=pa(y,2),A!==null&&Cn(A,y,2),Bh(),Km(y,2)}if(y=Xm(h),y===null&&km(s,a,h,sf,c),y===m)break;m=y}m!==null&&h.stopPropagation()}else km(s,a,h,null,c)}}function Xm(s){return s=Wn(s),Qm(s)}var sf=null;function Qm(s){if(sf=null,s=Pi(s),s!==null){var a=o(s);if(a===null)s=null;else{var c=a.tag;if(c===13){if(s=l(a),s!==null)return s;s=null}else if(c===31){if(s=u(a),s!==null)return s;s=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return sf=s,null}function Wv(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ta()){case Sl:return 2;case Al:return 8;case Fs:case ng:return 32;case Pu:return 268435456;default:return 32}default:return 32}}var $m=!1,mr=null,pr=null,yr=null,Ec=new Map,xc=new Map,_r=[],cR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Xv(s,a){switch(s){case"focusin":case"focusout":mr=null;break;case"dragenter":case"dragleave":pr=null;break;case"mouseover":case"mouseout":yr=null;break;case"pointerover":case"pointerout":Ec.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":xc.delete(a.pointerId)}}function Sc(s,a,c,h,m,y){return s===null||s.nativeEvent!==y?(s={blockedOn:a,domEventName:c,eventSystemFlags:h,nativeEvent:y,targetContainers:[m]},a!==null&&(a=Kn(a),a!==null&&Yv(a)),s):(s.eventSystemFlags|=h,a=s.targetContainers,m!==null&&a.indexOf(m)===-1&&a.push(m),s)}function uR(s,a,c,h,m){switch(a){case"focusin":return mr=Sc(mr,s,a,c,h,m),!0;case"dragenter":return pr=Sc(pr,s,a,c,h,m),!0;case"mouseover":return yr=Sc(yr,s,a,c,h,m),!0;case"pointerover":var y=m.pointerId;return Ec.set(y,Sc(Ec.get(y)||null,s,a,c,h,m)),!0;case"gotpointercapture":return y=m.pointerId,xc.set(y,Sc(xc.get(y)||null,s,a,c,h,m)),!0}return!1}function Qv(s){var a=Pi(s.target);if(a!==null){var c=o(a);if(c!==null){if(a=c.tag,a===13){if(a=l(c),a!==null){s.blockedOn=a,ui(s.priority,function(){Kv(c)});return}}else if(a===31){if(a=u(c),a!==null){s.blockedOn=a,ui(s.priority,function(){Kv(c)});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){s.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}s.blockedOn=null}function rf(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var c=Xm(s.nativeEvent);if(c===null){c=s.nativeEvent;var h=new c.constructor(c.type,c);Ll=h,c.target.dispatchEvent(h),Ll=null}else return a=Kn(c),a!==null&&Yv(a),s.blockedOn=c,!1;a.shift()}return!0}function $v(s,a,c){rf(s)&&c.delete(a)}function hR(){$m=!1,mr!==null&&rf(mr)&&(mr=null),pr!==null&&rf(pr)&&(pr=null),yr!==null&&rf(yr)&&(yr=null),Ec.forEach($v),xc.forEach($v)}function af(s,a){s.blockedOn===a&&(s.blockedOn=null,$m||($m=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,hR)))}var of=null;function Jv(s){of!==s&&(of=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){of===s&&(of=null);for(var a=0;a<s.length;a+=3){var c=s[a],h=s[a+1],m=s[a+2];if(typeof h!="function"){if(Qm(h||c)===null)continue;break}var y=Kn(c);y!==null&&(s.splice(a,3),a-=3,Xg(y,{pending:!0,data:m,method:c.method,action:h},h,m))}}))}function Yo(s){function a(V){return af(V,s)}mr!==null&&af(mr,s),pr!==null&&af(pr,s),yr!==null&&af(yr,s),Ec.forEach(a),xc.forEach(a);for(var c=0;c<_r.length;c++){var h=_r[c];h.blockedOn===s&&(h.blockedOn=null)}for(;0<_r.length&&(c=_r[0],c.blockedOn===null);)Qv(c),c.blockedOn===null&&_r.shift();if(c=(s.ownerDocument||s).$$reactFormReplay,c!=null)for(h=0;h<c.length;h+=3){var m=c[h],y=c[h+1],T=m[We]||null;if(typeof y=="function")T||Jv(c);else if(T){var A=null;if(y&&y.hasAttribute("formAction")){if(m=y,T=y[We]||null)A=T.formAction;else if(Qm(m)!==null)continue}else A=T.action;typeof A=="function"?c[h+1]=A:(c.splice(h,3),h-=3),Jv(c)}}}function Zv(){function s(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(T){return m=T})},focusReset:"manual",scroll:"manual"})}function a(){m!==null&&(m(),m=null),h||setTimeout(c,20)}function c(){if(!h&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,m=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(c,100),function(){h=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),m!==null&&(m(),m=null)}}}function Jm(s){this._internalRoot=s}lf.prototype.render=Jm.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(i(409));var c=a.current,h=Fn();qv(c,h,s,a,null,null)},lf.prototype.unmount=Jm.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;qv(s.current,2,null,s,null,null),Bh(),a[Ni]=null}};function lf(s){this._internalRoot=s}lf.prototype.unstable_scheduleHydration=function(s){if(s){var a=Bu();s={blockedOn:null,target:s,priority:a};for(var c=0;c<_r.length&&a!==0&&a<_r[c].priority;c++);_r.splice(c,0,s),c===0&&Qv(s)}};var tT=t.version;if(tT!=="19.2.0")throw Error(i(527,tT,"19.2.0"));at.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=d(a),s=s!==null?p(s):null,s=s===null?null:s.stateNode,s};var fR={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cf.isDisabled&&cf.supportsFiber)try{li=cf.inject(fR),Ze=cf}catch{}}return wc.createRoot=function(s,a){if(!r(s))throw Error(i(299));var c=!1,h="",m=ob,y=lb,T=cb;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError)),a=Fv(s,1,!1,null,null,c,h,null,m,y,T,Zv),s[Ni]=a.current,Nm(s),new Jm(a)},wc.hydrateRoot=function(s,a,c){if(!r(s))throw Error(i(299));var h=!1,m="",y=ob,T=lb,A=cb,V=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(m=c.identifierPrefix),c.onUncaughtError!==void 0&&(y=c.onUncaughtError),c.onCaughtError!==void 0&&(T=c.onCaughtError),c.onRecoverableError!==void 0&&(A=c.onRecoverableError),c.formState!==void 0&&(V=c.formState)),a=Fv(s,1,!0,a,c??null,h,m,V,y,T,A,Zv),a.context=Hv(null),c=a.current,h=Fn(),h=sa(h),m=ir(h),m.callback=null,sr(c,m,h),c=h,a.current.lanes=c,na(a,c),Xi(a),s[Ni]=a.current,Nm(s),new lf(a)},wc.version="19.2.0",wc}var uT;function AR(){if(uT)return ep.exports;uT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),ep.exports=SR(),ep.exports}var wR=AR();const CR=fS(wR),RR=()=>{};var hT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS=function(n){const t=[];let e=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?t[e++]=r:r<2048?(t[e++]=r>>6|192,t[e++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),t[e++]=r>>18|240,t[e++]=r>>12&63|128,t[e++]=r>>6&63|128,t[e++]=r&63|128):(t[e++]=r>>12|224,t[e++]=r>>6&63|128,t[e++]=r&63|128)}return t},IR=function(n){const t=[];let e=0,i=0;for(;e<n.length;){const r=n[e++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=n[e++];t[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=n[e++],l=n[e++],u=n[e++],f=((r&7)<<18|(o&63)<<12|(l&63)<<6|u&63)-65536;t[i++]=String.fromCharCode(55296+(f>>10)),t[i++]=String.fromCharCode(56320+(f&1023))}else{const o=n[e++],l=n[e++];t[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|l&63)}}return t.join("")},gS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const o=n[r],l=r+1<n.length,u=l?n[r+1]:0,f=r+2<n.length,d=f?n[r+2]:0,p=o>>2,_=(o&3)<<4|u>>4;let b=(u&15)<<2|d>>6,E=d&63;f||(E=64,l||(b=64)),i.push(e[p],e[_],e[b],e[E])}return i.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(dS(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):IR(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const o=e[n.charAt(r++)],u=r<n.length?e[n.charAt(r)]:0;++r;const d=r<n.length?e[n.charAt(r)]:64;++r;const _=r<n.length?e[n.charAt(r)]:64;if(++r,o==null||u==null||d==null||_==null)throw new DR;const b=o<<2|u>>4;if(i.push(b),d!==64){const E=u<<4&240|d>>2;if(i.push(E),_!==64){const S=d<<6&192|_;i.push(S)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class DR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const MR=function(n){const t=dS(n);return gS.encodeByteArray(t,!0)},Qf=function(n){return MR(n).replace(/\./g,"")},mS=function(n){try{return gS.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR=()=>OR().__FIREBASE_DEFAULTS__,kR=()=>{if(typeof process>"u"||typeof hT>"u")return;const n=hT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},PR=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&mS(n[1]);return t&&JSON.parse(t)},Ad=()=>{try{return RR()||NR()||kR()||PR()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},pS=n=>{var t,e;return(e=(t=Ad())==null?void 0:t.emulatorHosts)==null?void 0:e[n]},VR=n=>{const t=pS(n);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),i]:[t.substring(0,e),i]},yS=()=>{var n;return(n=Ad())==null?void 0:n.config},_S=n=>{var t;return(t=Ad())==null?void 0:t[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function bS(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zR(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},i=t||"demo-project",r=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Qf(JSON.stringify(e)),Qf(JSON.stringify(l)),""].join(".")}const Gc={};function jR(){const n={prod:[],emulator:[]};for(const t of Object.keys(Gc))Gc[t]?n.emulator.push(t):n.prod.push(t);return n}function UR(n){let t=document.getElementById(n),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),e=!0),{created:e,element:t}}let fT=!1;function vS(n,t){if(typeof window>"u"||typeof document>"u"||!gl(window.location.host)||Gc[n]===t||Gc[n]||fT)return;Gc[n]=t;function e(b){return`__firebase__banner__${b}`}const i="__firebase__banner",o=jR().prod.length>0;function l(){const b=document.getElementById(i);b&&b.remove()}function u(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function f(b,E){b.setAttribute("width","24"),b.setAttribute("id",E),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function d(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{fT=!0,l()},b}function p(b,E){b.setAttribute("id",E),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function _(){const b=UR(i),E=e("text"),S=document.getElementById(E)||document.createElement("span"),w=e("learnmore"),D=document.getElementById(w)||document.createElement("a"),z=e("preprendIcon"),F=document.getElementById(z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const W=b.element;u(W),p(D,w);const Z=d();f(F,z),W.append(F,S,D,Z),document.body.appendChild(W)}o?(S.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function BR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pn())}function FR(){var t;const n=(t=Ad())==null?void 0:t.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function HR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function qR(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function GR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function YR(){const n=pn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function KR(){return!FR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function WR(){try{return typeof indexedDB=="object"}catch{return!1}}function XR(){return new Promise((n,t)=>{try{let e=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),e||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{e=!1},r.onerror=()=>{var o;t(((o=r.error)==null?void 0:o.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR="FirebaseError";class Us extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=QR,Object.setPrototypeOf(this,Us.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bu.prototype.create)}}class bu{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},r=`${this.service}/${t}`,o=this.errors[t],l=o?$R(o,i):"Error",u=`${this.serviceName}: ${l} (${r}).`;return new Us(r,u,i)}}function $R(n,t){return n.replace(JR,(e,i)=>{const r=t[i];return r!=null?String(r):`<${i}?>`})}const JR=/\{\$([^}]+)}/g;function ZR(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function Ha(n,t){if(n===t)return!0;const e=Object.keys(n),i=Object.keys(t);for(const r of e){if(!i.includes(r))return!1;const o=n[r],l=t[r];if(dT(o)&&dT(l)){if(!Ha(o,l))return!1}else if(o!==l)return!1}for(const r of i)if(!e.includes(r))return!1;return!0}function dT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vu(n){const t=[];for(const[e,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function Nc(n){const t={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,o]=i.split("=");t[decodeURIComponent(r)]=decodeURIComponent(o)}}),t}function kc(n){const t=n.indexOf("?");if(!t)return"";const e=n.indexOf("#",t);return n.substring(t,e>0?e:void 0)}function t2(n,t){const e=new e2(n,t);return e.subscribe.bind(e)}class e2{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,i){let r;if(t===void 0&&e===void 0&&i===void 0)throw new Error("Missing Observer.");n2(t,["next","error","complete"])?r=t:r={next:t,error:e,complete:i},r.next===void 0&&(r.next=rp),r.error===void 0&&(r.error=rp),r.complete===void 0&&(r.complete=rp);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function n2(n,t){if(typeof n!="object"||n===null)return!1;for(const e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function rp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fe(n){return n&&n._delegate?n._delegate:n}class qa{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const i=new LR;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:e});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(t==null?void 0:t.optional)??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(r2(t))try{this.getOrInitializeService({instanceIdentifier:Na})}catch{}for(const[e,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(t=Na){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Na){return this.instances.has(t)}getOptions(t=Na){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[o,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);i===u&&l.resolve(r)}return r}onInit(t,e){const i=this.normalizeInstanceIdentifier(e),r=this.onInitCallbacks.get(i)??new Set;r.add(t),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&t(o,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,e){const i=this.onInitCallbacks.get(e);if(i)for(const r of i)try{r(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:s2(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Na){return this.component?this.component.multipleInstances?t:Na:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function s2(n){return n===Na?void 0:n}function r2(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new i2(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ut;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ut||(Ut={}));const o2={debug:Ut.DEBUG,verbose:Ut.VERBOSE,info:Ut.INFO,warn:Ut.WARN,error:Ut.ERROR,silent:Ut.SILENT},l2=Ut.INFO,c2={[Ut.DEBUG]:"log",[Ut.VERBOSE]:"log",[Ut.INFO]:"info",[Ut.WARN]:"warn",[Ut.ERROR]:"error"},u2=(n,t,...e)=>{if(t<n.logLevel)return;const i=new Date().toISOString(),r=c2[t];if(r)console[r](`[${i}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Ay{constructor(t){this.name=t,this._logLevel=l2,this._logHandler=u2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ut))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?o2[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ut.DEBUG,...t),this._logHandler(this,Ut.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ut.VERBOSE,...t),this._logHandler(this,Ut.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ut.INFO,...t),this._logHandler(this,Ut.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ut.WARN,...t),this._logHandler(this,Ut.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ut.ERROR,...t),this._logHandler(this,Ut.ERROR,...t)}}const h2=(n,t)=>t.some(e=>n instanceof e);let gT,mT;function f2(){return gT||(gT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function d2(){return mT||(mT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const TS=new WeakMap,Op=new WeakMap,ES=new WeakMap,ap=new WeakMap,wy=new WeakMap;function g2(n){const t=new Promise((e,i)=>{const r=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{e(Dr(n.result)),r()},l=()=>{i(n.error),r()};n.addEventListener("success",o),n.addEventListener("error",l)});return t.then(e=>{e instanceof IDBCursor&&TS.set(e,n)}).catch(()=>{}),wy.set(t,n),t}function m2(n){if(Op.has(n))return;const t=new Promise((e,i)=>{const r=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{e(),r()},l=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});Op.set(n,t)}let Np={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return Op.get(n);if(t==="objectStoreNames")return n.objectStoreNames||ES.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Dr(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function p2(n){Np=n(Np)}function y2(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const i=n.call(op(this),t,...e);return ES.set(i,t.sort?t.sort():[t]),Dr(i)}:d2().includes(n)?function(...t){return n.apply(op(this),t),Dr(TS.get(this))}:function(...t){return Dr(n.apply(op(this),t))}}function _2(n){return typeof n=="function"?y2(n):(n instanceof IDBTransaction&&m2(n),h2(n,f2())?new Proxy(n,Np):n)}function Dr(n){if(n instanceof IDBRequest)return g2(n);if(ap.has(n))return ap.get(n);const t=_2(n);return t!==n&&(ap.set(n,t),wy.set(t,n)),t}const op=n=>wy.get(n);function b2(n,t,{blocked:e,upgrade:i,blocking:r,terminated:o}={}){const l=indexedDB.open(n,t),u=Dr(l);return i&&l.addEventListener("upgradeneeded",f=>{i(Dr(l.result),f.oldVersion,f.newVersion,Dr(l.transaction),f)}),e&&l.addEventListener("blocked",f=>e(f.oldVersion,f.newVersion,f)),u.then(f=>{o&&f.addEventListener("close",()=>o()),r&&f.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),u}const v2=["get","getKey","getAll","getAllKeys","count"],T2=["put","add","delete","clear"],lp=new Map;function pT(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(lp.get(t))return lp.get(t);const e=t.replace(/FromIndex$/,""),i=t!==e,r=T2.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(r||v2.includes(e)))return;const o=async function(l,...u){const f=this.transaction(l,r?"readwrite":"readonly");let d=f.store;return i&&(d=d.index(u.shift())),(await Promise.all([d[e](...u),r&&f.done]))[0]};return lp.set(t,o),o}p2(n=>({...n,get:(t,e,i)=>pT(t,e)||n.get(t,e,i),has:(t,e)=>!!pT(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(x2(e)){const i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}}function x2(n){const t=n.getComponent();return(t==null?void 0:t.type)==="VERSION"}const kp="@firebase/app",yT="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs=new Ay("@firebase/app"),S2="@firebase/app-compat",A2="@firebase/analytics-compat",w2="@firebase/analytics",C2="@firebase/app-check-compat",R2="@firebase/app-check",I2="@firebase/auth",D2="@firebase/auth-compat",M2="@firebase/database",O2="@firebase/data-connect",N2="@firebase/database-compat",k2="@firebase/functions",P2="@firebase/functions-compat",V2="@firebase/installations",L2="@firebase/installations-compat",z2="@firebase/messaging",j2="@firebase/messaging-compat",U2="@firebase/performance",B2="@firebase/performance-compat",F2="@firebase/remote-config",H2="@firebase/remote-config-compat",q2="@firebase/storage",G2="@firebase/storage-compat",Y2="@firebase/firestore",K2="@firebase/ai",W2="@firebase/firestore-compat",X2="firebase",Q2="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pp="[DEFAULT]",$2={[kp]:"fire-core",[S2]:"fire-core-compat",[w2]:"fire-analytics",[A2]:"fire-analytics-compat",[R2]:"fire-app-check",[C2]:"fire-app-check-compat",[I2]:"fire-auth",[D2]:"fire-auth-compat",[M2]:"fire-rtdb",[O2]:"fire-data-connect",[N2]:"fire-rtdb-compat",[k2]:"fire-fn",[P2]:"fire-fn-compat",[V2]:"fire-iid",[L2]:"fire-iid-compat",[z2]:"fire-fcm",[j2]:"fire-fcm-compat",[U2]:"fire-perf",[B2]:"fire-perf-compat",[F2]:"fire-rc",[H2]:"fire-rc-compat",[q2]:"fire-gcs",[G2]:"fire-gcs-compat",[Y2]:"fire-fst",[W2]:"fire-fst-compat",[K2]:"fire-vertex","fire-js":"fire-js",[X2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $f=new Map,J2=new Map,Vp=new Map;function _T(n,t){try{n.container.addComponent(t)}catch(e){Vs.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function sl(n){const t=n.name;if(Vp.has(t))return Vs.debug(`There were multiple attempts to register component ${t}.`),!1;Vp.set(t,n);for(const e of $f.values())_T(e,n);for(const e of J2.values())_T(e,n);return!0}function Cy(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function qn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Mr=new bu("app","Firebase",Z2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(t,e,i){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new qa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Mr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ml=Q2;function xS(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const i={name:Pp,automaticDataCollectionEnabled:!0,...t},r=i.name;if(typeof r!="string"||!r)throw Mr.create("bad-app-name",{appName:String(r)});if(e||(e=yS()),!e)throw Mr.create("no-options");const o=$f.get(r);if(o){if(Ha(e,o.options)&&Ha(i,o.config))return o;throw Mr.create("duplicate-app",{appName:r})}const l=new a2(r);for(const f of Vp.values())l.addComponent(f);const u=new tI(e,i,l);return $f.set(r,u),u}function SS(n=Pp){const t=$f.get(n);if(!t&&n===Pp&&yS())return xS();if(!t)throw Mr.create("no-app",{appName:n});return t}function Or(n,t,e){let i=$2[n]??n;e&&(i+=`-${e}`);const r=i.match(/\s|\//),o=t.match(/\s|\//);if(r||o){const l=[`Unable to register library "${i}" with version "${t}":`];r&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&l.push("and"),o&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Vs.warn(l.join(" "));return}sl(new qa(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI="firebase-heartbeat-database",nI=1,nu="firebase-heartbeat-store";let cp=null;function AS(){return cp||(cp=b2(eI,nI,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(nu)}catch(e){console.warn(e)}}}}).catch(n=>{throw Mr.create("idb-open",{originalErrorMessage:n.message})})),cp}async function iI(n){try{const e=(await AS()).transaction(nu),i=await e.objectStore(nu).get(wS(n));return await e.done,i}catch(t){if(t instanceof Us)Vs.warn(t.message);else{const e=Mr.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Vs.warn(e.message)}}}async function bT(n,t){try{const i=(await AS()).transaction(nu,"readwrite");await i.objectStore(nu).put(t,wS(n)),await i.done}catch(e){if(e instanceof Us)Vs.warn(e.message);else{const i=Mr.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});Vs.warn(i.message)}}}function wS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI=1024,rI=30;class aI{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new lI(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,e;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=vT();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>rI){const l=cI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Vs.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=vT(),{heartbeatsToSend:i,unsentEntries:r}=oI(this._heartbeatsCache.heartbeats),o=Qf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Vs.warn(e),""}}}function vT(){return new Date().toISOString().substring(0,10)}function oI(n,t=sI){const e=[];let i=n.slice();for(const r of n){const o=e.find(l=>l.agent===r.agent);if(o){if(o.dates.push(r.date),TT(e)>t){o.dates.pop();break}}else if(e.push({agent:r.agent,dates:[r.date]}),TT(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}class lI{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return WR()?XR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await iI(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return bT(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return bT(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function TT(n){return Qf(JSON.stringify({version:2,heartbeats:n})).length}function cI(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let i=1;i<n.length;i++)n[i].date<e&&(e=n[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uI(n){sl(new qa("platform-logger",t=>new E2(t),"PRIVATE")),sl(new qa("heartbeat",t=>new aI(t),"PRIVATE")),Or(kp,yT,n),Or(kp,yT,"esm2020"),Or("fire-js","")}uI("");var hI="firebase",fI="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Or(hI,fI,"app");function CS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const dI=CS,RS=new bu("auth","Firebase",CS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jf=new Ay("@firebase/auth");function gI(n,...t){Jf.logLevel<=Ut.WARN&&Jf.warn(`Auth (${ml}): ${n}`,...t)}function Mf(n,...t){Jf.logLevel<=Ut.ERROR&&Jf.error(`Auth (${ml}): ${n}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oi(n,...t){throw Iy(n,...t)}function xi(n,...t){return Iy(n,...t)}function Ry(n,t,e){const i={...dI(),[t]:e};return new bu("auth","Firebase",i).create(t,{appName:n.name})}function Ps(n){return Ry(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function mI(n,t,e){const i=e;if(!(t instanceof i))throw i.name!==t.constructor.name&&oi(n,"argument-error"),Ry(n,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Iy(n,...t){if(typeof n!="string"){const e=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(e,...i)}return RS.create(n,...t)}function St(n,t,...e){if(!n)throw Iy(t,...e)}function Ds(n){const t="INTERNAL ASSERTION FAILED: "+n;throw Mf(t),new Error(t)}function Ls(n,t){n||Ds(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lp(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function pI(){return ET()==="http:"||ET()==="https:"}function ET(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(pI()||qR()||"connection"in navigator)?navigator.onLine:!0}function _I(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(t,e){this.shortDelay=t,this.longDelay=e,Ls(e>t,"Short delay should be less than long delay!"),this.isMobile=BR()||GR()}get(){return yI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dy(n,t){Ls(n.emulator,"Emulator should always be set here");const{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{static initialize(t,e,i){this.fetchImpl=t,e&&(this.headersImpl=e),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ds("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ds("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ds("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],TI=new Tu(3e4,6e4);function Yr(n,t){return n.tenantId&&!t.tenantId?{...t,tenantId:n.tenantId}:t}async function Kr(n,t,e,i,r={}){return DS(n,r,async()=>{let o={},l={};i&&(t==="GET"?l=i:o={body:JSON.stringify(i)});const u=vu({key:n.config.apiKey,...l}).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const d={method:t,headers:f,...o};return HR()||(d.referrerPolicy="no-referrer"),n.emulatorConfig&&gl(n.emulatorConfig.host)&&(d.credentials="include"),IS.fetch()(await MS(n,n.config.apiHost,e,u),d)})}async function DS(n,t,e){n._canInitEmulator=!1;const i={...bI,...t};try{const r=new xI(n),o=await Promise.race([e(),r.promise]);r.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw uf(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const u=o.ok?l.errorMessage:l.error.message,[f,d]=u.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw uf(n,"credential-already-in-use",l);if(f==="EMAIL_EXISTS")throw uf(n,"email-already-in-use",l);if(f==="USER_DISABLED")throw uf(n,"user-disabled",l);const p=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Ry(n,p,d);oi(n,p)}}catch(r){if(r instanceof Us)throw r;oi(n,"network-request-failed",{message:String(r)})}}async function Eu(n,t,e,i,r={}){const o=await Kr(n,t,e,i,r);return"mfaPendingCredential"in o&&oi(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function MS(n,t,e,i){const r=`${t}${e}?${i}`,o=n,l=o.config.emulator?Dy(n.config,r):`${n.config.apiScheme}://${r}`;return vI.includes(e)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function EI(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class xI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,i)=>{this.timer=setTimeout(()=>i(xi(this.auth,"network-request-failed")),TI.get())})}}function uf(n,t,e){const i={appName:n.name};e.email&&(i.email=e.email),e.phoneNumber&&(i.phoneNumber=e.phoneNumber);const r=xi(n,t,i);return r.customData._tokenResponse=e,r}function xT(n){return n!==void 0&&n.enterprise!==void 0}class SI{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return EI(e.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function AI(n,t){return Kr(n,"GET","/v2/recaptchaConfig",Yr(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wI(n,t){return Kr(n,"POST","/v1/accounts:delete",t)}async function Zf(n,t){return Kr(n,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yc(n){if(n)try{const t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function CI(n,t=!1){const e=Fe(n),i=await e.getIdToken(t),r=My(i);St(r&&r.exp&&r.auth_time&&r.iat,e.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:Yc(up(r.auth_time)),issuedAtTime:Yc(up(r.iat)),expirationTime:Yc(up(r.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function up(n){return Number(n)*1e3}function My(n){const[t,e,i]=n.split(".");if(t===void 0||e===void 0||i===void 0)return Mf("JWT malformed, contained fewer than 3 sections"),null;try{const r=mS(e);return r?JSON.parse(r):(Mf("Failed to decode base64 JWT payload"),null)}catch(r){return Mf("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function ST(n){const t=My(n);return St(t,"internal-error"),St(typeof t.exp<"u","internal-error"),St(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iu(n,t,e=!1){if(e)return t;try{return await t}catch(i){throw i instanceof Us&&RI(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function RI({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yc(this.lastLoginAt),this.creationTime=Yc(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function td(n){var _;const t=n.auth,e=await n.getIdToken(),i=await iu(n,Zf(t,{idToken:e}));St(i==null?void 0:i.users.length,t,"internal-error");const r=i.users[0];n._notifyReloadListener(r);const o=(_=r.providerUserInfo)!=null&&_.length?OS(r.providerUserInfo):[],l=MI(n.providerData,o),u=n.isAnonymous,f=!(n.email&&r.passwordHash)&&!(l!=null&&l.length),d=u?f:!1,p={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:l,metadata:new zp(r.createdAt,r.lastLoginAt),isAnonymous:d};Object.assign(n,p)}async function DI(n){const t=Fe(n);await td(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function MI(n,t){return[...n.filter(i=>!t.some(r=>r.providerId===i.providerId)),...t]}function OS(n){return n.map(({providerId:t,...e})=>({providerId:t,uid:e.rawId||"",displayName:e.displayName||null,email:e.email||null,phoneNumber:e.phoneNumber||null,photoURL:e.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OI(n,t){const e=await DS(n,{},async()=>{const i=vu({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:o}=n.config,l=await MS(n,r,"/v1/token",`key=${o}`),u=await n._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:u,body:i};return n.emulatorConfig&&gl(n.emulatorConfig.host)&&(f.credentials="include"),IS.fetch()(l,f)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function NI(n,t){return Kr(n,"POST","/v2/accounts:revokeToken",Yr(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){St(t.idToken,"internal-error"),St(typeof t.idToken<"u","internal-error"),St(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):ST(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){St(t.length!==0,"internal-error");const e=ST(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(St(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:i,refreshToken:r,expiresIn:o}=await OI(t,e);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(t,e,i){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,e){const{refreshToken:i,accessToken:r,expirationTime:o}=e,l=new Zo;return i&&(St(typeof i=="string","internal-error",{appName:t}),l.refreshToken=i),r&&(St(typeof r=="string","internal-error",{appName:t}),l.accessToken=r),o&&(St(typeof o=="number","internal-error",{appName:t}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Zo,this.toJSON())}_performRefresh(){return Ds("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vr(n,t){St(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}class Ti{constructor({uid:t,auth:e,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new II(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=e,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new zp(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const e=await iu(this,this.stsTokenManager.getToken(this.auth,t));return St(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return CI(this,t)}reload(){return DI(this)}_assign(t){this!==t&&(St(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>({...e})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new Ti({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return e.metadata._copy(this.metadata),e}_onReload(t){St(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),e&&await td(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qn(this.auth.app))return Promise.reject(Ps(this.auth));const t=await this.getIdToken();return await iu(this,wI(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){const i=e.displayName??void 0,r=e.email??void 0,o=e.phoneNumber??void 0,l=e.photoURL??void 0,u=e.tenantId??void 0,f=e._redirectEventId??void 0,d=e.createdAt??void 0,p=e.lastLoginAt??void 0,{uid:_,emailVerified:b,isAnonymous:E,providerData:S,stsTokenManager:w}=e;St(_&&w,t,"internal-error");const D=Zo.fromJSON(this.name,w);St(typeof _=="string",t,"internal-error"),vr(i,t.name),vr(r,t.name),St(typeof b=="boolean",t,"internal-error"),St(typeof E=="boolean",t,"internal-error"),vr(o,t.name),vr(l,t.name),vr(u,t.name),vr(f,t.name),vr(d,t.name),vr(p,t.name);const z=new Ti({uid:_,auth:t,email:r,emailVerified:b,displayName:i,isAnonymous:E,photoURL:l,phoneNumber:o,tenantId:u,stsTokenManager:D,createdAt:d,lastLoginAt:p});return S&&Array.isArray(S)&&(z.providerData=S.map(F=>({...F}))),f&&(z._redirectEventId=f),z}static async _fromIdTokenResponse(t,e,i=!1){const r=new Zo;r.updateFromServerResponse(e);const o=new Ti({uid:e.localId,auth:t,stsTokenManager:r,isAnonymous:i});return await td(o),o}static async _fromGetAccountInfoResponse(t,e,i){const r=e.users[0];St(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?OS(r.providerUserInfo):[],l=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),u=new Zo;u.updateFromIdToken(i);const f=new Ti({uid:r.localId,auth:t,stsTokenManager:u,isAnonymous:l}),d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new zp(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(f,d),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT=new Map;function Ms(n){Ls(n instanceof Function,"Expected a class definition");let t=AT.get(n);return t?(Ls(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,AT.set(n,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}NS.type="NONE";const wT=NS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Of(n,t,e){return`firebase:${n}:${t}:${e}`}class tl{constructor(t,e,i){this.persistence=t,this.auth=e,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=Of(this.userKey,r.apiKey,o),this.fullPersistenceKey=Of("persistence",r.apiKey,o),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await Zf(this.auth,{idToken:t}).catch(()=>{});return e?Ti._fromGetAccountInfoResponse(this.auth,e,t):null}return Ti._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,i="authUser"){if(!e.length)return new tl(Ms(wT),t,i);const r=(await Promise.all(e.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let o=r[0]||Ms(wT);const l=Of(i,t.config.apiKey,t.name);let u=null;for(const d of e)try{const p=await d._get(l);if(p){let _;if(typeof p=="string"){const b=await Zf(t,{idToken:p}).catch(()=>{});if(!b)break;_=await Ti._fromGetAccountInfoResponse(t,b,p)}else _=Ti._fromJSON(t,p);d!==o&&(u=_),o=d;break}}catch{}const f=r.filter(d=>d._shouldAllowMigration);return!o._shouldAllowMigration||!f.length?new tl(o,t,i):(o=f[0],u&&await o._set(l,u.toJSON()),await Promise.all(e.map(async d=>{if(d!==o)try{await d._remove(l)}catch{}})),new tl(o,t,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CT(n){const t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(LS(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(kS(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(jS(t))return"Blackberry";if(US(t))return"Webos";if(PS(t))return"Safari";if((t.includes("chrome/")||VS(t))&&!t.includes("edge/"))return"Chrome";if(zS(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(e);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function kS(n=pn()){return/firefox\//i.test(n)}function PS(n=pn()){const t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function VS(n=pn()){return/crios\//i.test(n)}function LS(n=pn()){return/iemobile/i.test(n)}function zS(n=pn()){return/android/i.test(n)}function jS(n=pn()){return/blackberry/i.test(n)}function US(n=pn()){return/webos/i.test(n)}function Oy(n=pn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function kI(n=pn()){var t;return Oy(n)&&!!((t=window.navigator)!=null&&t.standalone)}function PI(){return YR()&&document.documentMode===10}function BS(n=pn()){return Oy(n)||zS(n)||US(n)||jS(n)||/windows phone/i.test(n)||LS(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FS(n,t=[]){let e;switch(n){case"Browser":e=CT(pn());break;case"Worker":e=`${CT(pn())}-${n}`;break;default:e=n}const i=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${ml}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const i=o=>new Promise((l,u)=>{try{const f=t(o);l(f)}catch(f){u(f)}});i.onAbort=e,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const i of this.queue)await i(t),i.onAbort&&e.push(i.onAbort)}catch(i){e.reverse();for(const r of e)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LI(n,t={}){return Kr(n,"GET","/v2/passwordPolicy",Yr(n,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI=6;class jI{constructor(t){var i;const e=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=e.minPasswordLength??zI,e.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=e.maxPasswordLength),e.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=e.containsLowercaseCharacter),e.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=e.containsUppercaseCharacter),e.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=e.containsNumericCharacter),e.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=e.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=t.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const e={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,e),this.validatePasswordCharacterOptions(t,e),e.isValid&&(e.isValid=e.meetsMinPasswordLength??!0),e.isValid&&(e.isValid=e.meetsMaxPasswordLength??!0),e.isValid&&(e.isValid=e.containsLowercaseLetter??!0),e.isValid&&(e.isValid=e.containsUppercaseLetter??!0),e.isValid&&(e.isValid=e.containsNumericCharacter??!0),e.isValid&&(e.isValid=e.containsNonAlphanumericCharacter??!0),e}validatePasswordLengthOptions(t,e){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(e.meetsMinPasswordLength=t.length>=i),r&&(e.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let i;for(let r=0;r<t.length;r++)i=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(e,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,e,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(t,e,i,r){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new RT(this),this.idTokenSubscription=new RT(this),this.beforeStateQueue=new VI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=RS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=Ms(e)),this._initializationPromise=this.queue(async()=>{var i,r,o;if(!this._deleted&&(this.persistenceManager=await tl.create(this,t),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await Zf(this,{idToken:t}),i=await Ti._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(i)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var o;if(qn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(u,u))}):this.directlySetCurrentUser(null)}const e=await this.assertedPersistence.getCurrentUser();let i=e,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(o=this.redirectUser)==null?void 0:o._redirectEventId,u=i==null?void 0:i._redirectEventId,f=await this.tryRedirectSignIn(t);(!l||l===u)&&(f!=null&&f.user)&&(i=f.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=e,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return St(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await td(t)}catch(e){if((e==null?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=_I()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(qn(this.app))return Promise.reject(Ps(this));const e=t?Fe(t):null;return e&&St(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&St(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return qn(this.app)?Promise.reject(Ps(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return qn(this.app)?Promise.reject(Ps(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ms(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await LI(this),e=new jI(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new bu("auth","Firebase",t())}onAuthStateChanged(t,e,i){return this.registerStateListener(this.authStateSubscription,t,e,i)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,i){return this.registerStateListener(this.idTokenSubscription,t,e,i)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(i.tenantId=this.tenantId),await NI(this,i)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,e){const i=await this.getOrInitRedirectPersistenceManager(e);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&Ms(t)||this._popupRedirectResolver;St(e,this,"argument-error"),this.redirectPersistenceManager=await tl.create(this,[Ms(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,i;return this._isInitialized&&await this.queue(async()=>{}),((e=this._currentUser)==null?void 0:e._redirectEventId)===t?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((e=this.currentUser)==null?void 0:e.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,i,r){if(this._deleted)return()=>{};const o=typeof e=="function"?e:e.next.bind(e);let l=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(St(u,this,"internal-error"),u.then(()=>{l||o(this.currentUser)}),typeof e=="function"){const f=t.addObserver(e,i,r);return()=>{l=!0,f()}}else{const f=t.addObserver(e);return()=>{l=!0,f()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return St(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=FS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const e=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());e&&(t["X-Firebase-Client"]=e);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(qn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:e.getToken());return t!=null&&t.error&&gI(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Wr(n){return Fe(n)}class RT{constructor(t){this.auth=t,this.observer=null,this.addObserver=t2(e=>this.observer=e)}get next(){return St(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function BI(n){wd=n}function HS(n){return wd.loadJS(n)}function FI(){return wd.recaptchaEnterpriseScript}function HI(){return wd.gapiScript}function qI(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class GI{constructor(){this.enterprise=new YI}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class YI{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}const KI="recaptcha-enterprise",qS="NO_RECAPTCHA";class WI{constructor(t){this.type=KI,this.auth=Wr(t)}async verify(t="verify",e=!1){async function i(o){if(!e){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,u)=>{AI(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const d=new SI(f);return o.tenantId==null?o._agentRecaptchaConfig=d:o._tenantRecaptchaConfigs[o.tenantId]=d,l(d.siteKey)}}).catch(f=>{u(f)})})}function r(o,l,u){const f=window.grecaptcha;xT(f)?f.enterprise.ready(()=>{f.enterprise.execute(o,{action:t}).then(d=>{l(d)}).catch(()=>{l(qS)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new GI().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{i(this.auth).then(u=>{if(!e&&xT(window.grecaptcha))r(u,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let f=FI();f.length!==0&&(f+=u),HS(f).then(()=>{r(u,o,l)}).catch(d=>{l(d)})}}).catch(u=>{l(u)})})}}async function IT(n,t,e,i=!1,r=!1){const o=new WI(n);let l;if(r)l=qS;else try{l=await o.verify(e)}catch{l=await o.verify(e,!0)}const u={...t};if(e==="mfaSmsEnrollment"||e==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const f=u.phoneEnrollmentInfo.phoneNumber,d=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const f=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return i?Object.assign(u,{captchaResp:l}):Object.assign(u,{captchaResponse:l}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function jp(n,t,e,i,r){var o;if((o=n._getRecaptchaConfig())!=null&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await IT(n,t,e,e==="getOobCode");return i(n,l)}else return i(n,t).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${e} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await IT(n,t,e,e==="getOobCode");return i(n,u)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(n,t){const e=Cy(n,"auth");if(e.isInitialized()){const r=e.getImmediate(),o=e.getOptions();if(Ha(o,t??{}))return r;oi(r,"already-initialized")}return e.initialize({options:t})}function QI(n,t){const e=(t==null?void 0:t.persistence)||[],i=(Array.isArray(e)?e:[e]).map(Ms);t!=null&&t.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(i,t==null?void 0:t.popupRedirectResolver)}function $I(n,t,e){const i=Wr(n);St(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!1,o=GS(t),{host:l,port:u}=JI(t),f=u===null?"":`:${u}`,d={url:`${o}//${l}${f}/`},p=Object.freeze({host:l,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){St(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),St(Ha(d,i.config.emulator)&&Ha(p,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=d,i.emulatorConfig=p,i.settings.appVerificationDisabledForTesting=!0,gl(l)?(bS(`${o}//${l}${f}`),vS("Auth",!0)):ZI()}function GS(n){const t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function JI(n){const t=GS(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};const i=e[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:DT(i.substr(o.length+1))}}else{const[o,l]=i.split(":");return{host:o,port:DT(l)}}}function DT(n){if(!n)return null;const t=Number(n);return isNaN(t)?null:t}function ZI(){function n(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return Ds("not implemented")}_getIdTokenResponse(t){return Ds("not implemented")}_linkToIdToken(t,e){return Ds("not implemented")}_getReauthenticationResolver(t){return Ds("not implemented")}}async function tD(n,t){return Kr(n,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eD(n,t){return Eu(n,"POST","/v1/accounts:signInWithPassword",Yr(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nD(n,t){return Eu(n,"POST","/v1/accounts:signInWithEmailLink",Yr(n,t))}async function iD(n,t){return Eu(n,"POST","/v1/accounts:signInWithEmailLink",Yr(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su extends Ny{constructor(t,e,i,r=null){super("password",i),this._email=t,this._password=e,this._tenantId=r}static _fromEmailAndPassword(t,e){return new su(t,e,"password")}static _fromEmailAndCode(t,e,i=null){return new su(t,e,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;if(e!=null&&e.email&&(e!=null&&e.password)){if(e.signInMethod==="password")return this._fromEmailAndPassword(e.email,e.password);if(e.signInMethod==="emailLink")return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jp(t,e,"signInWithPassword",eD);case"emailLink":return nD(t,{email:this._email,oobCode:this._password});default:oi(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":const i={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jp(t,i,"signUpPassword",tD);case"emailLink":return iD(t,{idToken:e,email:this._email,oobCode:this._password});default:oi(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function el(n,t){return Eu(n,"POST","/v1/accounts:signInWithIdp",Yr(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD="http://localhost";class Ga extends Ny{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Ga(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):oi("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:r,...o}=e;if(!i||!r)return null;const l=new Ga(i,r);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(t){const e=this.buildRequest();return el(t,e)}_linkToIdToken(t,e){const i=this.buildRequest();return i.idToken=e,el(t,i)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,el(t,e)}buildRequest(){const t={requestUri:sD,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=vu(e)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rD(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function aD(n){const t=Nc(kc(n)).link,e=t?Nc(kc(t)).deep_link_id:null,i=Nc(kc(n)).deep_link_id;return(i?Nc(kc(i)).link:null)||i||e||t||n}class ky{constructor(t){const e=Nc(kc(t)),i=e.apiKey??null,r=e.oobCode??null,o=rD(e.mode??null);St(i&&r&&o,"argument-error"),this.apiKey=i,this.operation=o,this.code=r,this.continueUrl=e.continueUrl??null,this.languageCode=e.lang??null,this.tenantId=e.tenantId??null}static parseLink(t){const e=aD(t);try{return new ky(e)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(){this.providerId=pl.PROVIDER_ID}static credential(t,e){return su._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const i=ky.parseLink(e);return St(i,"argument-error"),su._fromEmailAndCode(t,i.code,i.tenantId)}}pl.PROVIDER_ID="password";pl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";pl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu extends Py{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr extends xu{constructor(){super("facebook.com")}static credential(t){return Ga._fromParams({providerId:Tr.PROVIDER_ID,signInMethod:Tr.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Tr.credentialFromTaggedObject(t)}static credentialFromError(t){return Tr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Tr.credential(t.oauthAccessToken)}catch{return null}}}Tr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Tr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is extends xu{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Ga._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return Is.credentialFromTaggedObject(t)}static credentialFromError(t){return Is.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:i}=t;if(!e&&!i)return null;try{return Is.credential(e,i)}catch{return null}}}Is.GOOGLE_SIGN_IN_METHOD="google.com";Is.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er extends xu{constructor(){super("github.com")}static credential(t){return Ga._fromParams({providerId:Er.PROVIDER_ID,signInMethod:Er.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Er.credentialFromTaggedObject(t)}static credentialFromError(t){return Er.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Er.credential(t.oauthAccessToken)}catch{return null}}}Er.GITHUB_SIGN_IN_METHOD="github.com";Er.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr extends xu{constructor(){super("twitter.com")}static credential(t,e){return Ga._fromParams({providerId:xr.PROVIDER_ID,signInMethod:xr.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return xr.credentialFromTaggedObject(t)}static credentialFromError(t){return xr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:i}=t;if(!e||!i)return null;try{return xr.credential(e,i)}catch{return null}}}xr.TWITTER_SIGN_IN_METHOD="twitter.com";xr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oD(n,t){return Eu(n,"POST","/v1/accounts:signUp",Yr(n,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,i,r=!1){const o=await Ti._fromIdTokenResponse(t,i,r),l=MT(i);return new Ya({user:o,providerId:l,_tokenResponse:i,operationType:e})}static async _forOperation(t,e,i){await t._updateTokensIfNecessary(i,!0);const r=MT(i);return new Ya({user:t,providerId:r,_tokenResponse:i,operationType:e})}}function MT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed extends Us{constructor(t,e,i,r){super(e.code,e.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,ed.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:e.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,e,i,r){return new ed(t,e,i,r)}}function YS(n,t,e,i){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?ed._fromErrorAndOperation(n,o,t,i):o})}async function lD(n,t,e=!1){const i=await iu(n,t._linkToIdToken(n.auth,await n.getIdToken()),e);return Ya._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cD(n,t,e=!1){const{auth:i}=n;if(qn(i.app))return Promise.reject(Ps(i));const r="reauthenticate";try{const o=await iu(n,YS(i,r,t,n),e);St(o.idToken,i,"internal-error");const l=My(o.idToken);St(l,i,"internal-error");const{sub:u}=l;return St(n.uid===u,i,"user-mismatch"),Ya._forOperation(n,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&oi(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KS(n,t,e=!1){if(qn(n.app))return Promise.reject(Ps(n));const i="signIn",r=await YS(n,i,t),o=await Ya._fromIdTokenResponse(n,i,r);return e||await n._updateCurrentUser(o.user),o}async function uD(n,t){return KS(Wr(n),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WS(n){const t=Wr(n);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function hD(n,t,e){if(qn(n.app))return Promise.reject(Ps(n));const i=Wr(n),l=await jp(i,{returnSecureToken:!0,email:t,password:e,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",oD).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&WS(n),f}),u=await Ya._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(u.user),u}function fD(n,t,e){return qn(n.app)?Promise.reject(Ps(n)):uD(Fe(n),pl.credential(t,e)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&WS(n),i})}function dD(n,t,e,i){return Fe(n).onIdTokenChanged(t,e,i)}function gD(n,t,e){return Fe(n).beforeAuthStateChanged(t,e)}function mD(n,t,e,i){return Fe(n).onAuthStateChanged(t,e,i)}function pD(n){return Fe(n).signOut()}const nd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(nd,"1"),this.storage.removeItem(nd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD=1e3,_D=10;class QS extends XS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=BS(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const i=this.storage.getItem(e),r=this.localCache[e];i!==r&&t(e,r,i)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((l,u,f)=>{this.notifyListeners(l,f)});return}const i=t.key;e?this.detachListener():this.stopPolling();const r=()=>{const l=this.storage.getItem(i);!e&&this.localCache[i]===l||this.notifyListeners(i,l)},o=this.storage.getItem(i);PI()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,_D):r()}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:i}),!0)})},yD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}QS.type="LOCAL";const bD=QS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S extends XS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}$S.type="SESSION";const JS=$S;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vD(n){return Promise.all(n.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(r=>r.isListeningto(t));if(e)return e;const i=new Cd(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:i,eventType:r,data:o}=e.data,l=this.handlersMap[r];if(!(l!=null&&l.size))return;e.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const u=Array.from(l).map(async d=>d(e.origin,o)),f=await vD(u);e.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:f})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Cd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vy(n="",t=10){let e="";for(let i=0;i<t;i++)e+=Math.floor(Math.random()*10);return n+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,l;return new Promise((u,f)=>{const d=Vy("",20);r.port1.start();const p=setTimeout(()=>{f(new Error("unsupported_event"))},i);l={messageChannel:r,onMessage(_){const b=_;if(b.data.eventId===d)switch(b.data.status){case"ack":clearTimeout(p),o=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(b.data.response);break;default:clearTimeout(p),clearTimeout(o),f(new Error("invalid_response"));break}}},this.handlers.add(l),r.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:t,eventId:d,data:e},[r.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zi(){return window}function ED(n){Zi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(){return typeof Zi().WorkerGlobalScope<"u"&&typeof Zi().importScripts=="function"}async function xD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function SD(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function AD(){return ZS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA="firebaseLocalStorageDb",wD=1,id="firebaseLocalStorage",eA="fbase_key";class Su{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function Rd(n,t){return n.transaction([id],t?"readwrite":"readonly").objectStore(id)}function CD(){const n=indexedDB.deleteDatabase(tA);return new Su(n).toPromise()}function Up(){const n=indexedDB.open(tA,wD);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(id,{keyPath:eA})}catch(r){e(r)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(id)?t(i):(i.close(),await CD(),t(await Up()))})})}async function OT(n,t,e){const i=Rd(n,!0).put({[eA]:t,value:e});return new Su(i).toPromise()}async function RD(n,t){const e=Rd(n,!1).get(t),i=await new Su(e).toPromise();return i===void 0?null:i.value}function NT(n,t){const e=Rd(n,!0).delete(t);return new Su(e).toPromise()}const ID=800,DD=3;class nA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Up(),this.db)}async _withRetries(t){let e=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(e++>DD)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ZS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Cd._getInstance(AD()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){var e,i;if(this.activeServiceWorker=await xD(),!this.activeServiceWorker)return;this.sender=new TD(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(e=t[0])!=null&&e.fulfilled&&(i=t[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||SD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Up();return await OT(t,nd,"1"),await NT(t,nd),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(i=>OT(i,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(i=>RD(i,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>NT(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(r=>{const o=Rd(r,!1).getAll();return new Su(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],i=new Set;if(t.length!==0)for(const{fbase_key:r,value:o}of t)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),e.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),e.push(r));return e}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const r of Array.from(i))r(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ID)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}nA.type="LOCAL";const MD=nA;new Tu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iA(n,t){return t?Ms(t):(St(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly extends Ny{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return el(t,this._buildIdpRequest())}_linkToIdToken(t,e){return el(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return el(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function OD(n){return KS(n.auth,new Ly(n),n.bypassAuthState)}function ND(n){const{auth:t,user:e}=n;return St(e,t,"internal-error"),cD(e,new Ly(n),n.bypassAuthState)}async function kD(n){const{auth:t,user:e}=n;return St(e,t,"internal-error"),lD(e,new Ly(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(t,e,i,r,o=!1){this.auth=t,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:i,postBody:r,tenantId:o,error:l,type:u}=t;if(l){this.reject(l);return}const f={auth:this.auth,requestUri:e,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(f))}catch(d){this.reject(d)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return OD;case"linkViaPopup":case"linkViaRedirect":return kD;case"reauthViaPopup":case"reauthViaRedirect":return ND;default:oi(this.auth,"internal-error")}}resolve(t){Ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD=new Tu(2e3,1e4);async function VD(n,t,e){if(qn(n.app))return Promise.reject(xi(n,"operation-not-supported-in-this-environment"));const i=Wr(n);mI(n,t,Py);const r=iA(i,e);return new Va(i,"signInViaPopup",t,r).executeNotNull()}class Va extends sA{constructor(t,e,i,r,o){super(t,e,r,o),this.provider=i,this.authWindow=null,this.pollId=null,Va.currentPopupAction&&Va.currentPopupAction.cancel(),Va.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return St(t,this.auth,"internal-error"),t}async onExecution(){Ls(this.filter.length===1,"Popup operations only handle one event");const t=Vy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(xi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(xi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Va.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,i;if((i=(e=this.authWindow)==null?void 0:e.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(xi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,PD.get())};t()}}Va.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD="pendingRedirect",Nf=new Map;class zD extends sA{constructor(t,e,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,i),this.eventId=null}async execute(){let t=Nf.get(this.auth._key());if(!t){try{const i=await jD(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(e){t=()=>Promise.reject(e)}Nf.set(this.auth._key(),t)}return this.bypassAuthState||Nf.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function jD(n,t){const e=FD(t),i=BD(n);if(!await i._isAvailable())return!1;const r=await i._get(e)==="true";return await i._remove(e),r}function UD(n,t){Nf.set(n._key(),t)}function BD(n){return Ms(n._redirectPersistence)}function FD(n){return Of(LD,n.config.apiKey,n.name)}async function HD(n,t,e=!1){if(qn(n.app))return Promise.reject(Ps(n));const i=Wr(n),r=iA(i,t),l=await new zD(i,r,e).execute();return l&&!e&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,t)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD=600*1e3;class GD{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(e=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!YD(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var i;if(t.error&&!rA(t)){const r=((i=t.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";e.onError(xi(this.auth,r))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const i=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=qD&&this.cachedEventUids.clear(),this.cachedEventUids.has(kT(t))}saveEventToCache(t){this.cachedEventUids.add(kT(t)),this.lastProcessedEventTime=Date.now()}}function kT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function rA({type:n,error:t}){return n==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function YD(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return rA(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KD(n,t={}){return Kr(n,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,XD=/^https?/;async function QD(n){if(n.config.emulator)return;const{authorizedDomains:t}=await KD(n);for(const e of t)try{if($D(e))return}catch{}oi(n,"unauthorized-domain")}function $D(n){const t=Lp(),{protocol:e,hostname:i}=new URL(t);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&i===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&l.hostname===i}if(!XD.test(e))return!1;if(WD.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD=new Tu(3e4,6e4);function PT(){const n=Zi().___jsl;if(n!=null&&n.H){for(const t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function ZD(n){return new Promise((t,e)=>{var r,o,l;function i(){PT(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{PT(),e(xi(n,"network-request-failed"))},timeout:JD.get()})}if((o=(r=Zi().gapi)==null?void 0:r.iframes)!=null&&o.Iframe)t(gapi.iframes.getContext());else if((l=Zi().gapi)!=null&&l.load)i();else{const u=qI("iframefcb");return Zi()[u]=()=>{gapi.load?i():e(xi(n,"network-request-failed"))},HS(`${HI()}?onload=${u}`).catch(f=>e(f))}}).catch(t=>{throw kf=null,t})}let kf=null;function tM(n){return kf=kf||ZD(n),kf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eM=new Tu(5e3,15e3),nM="__/auth/iframe",iM="emulator/auth/iframe",sM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function aM(n){const t=n.config;St(t.authDomain,n,"auth-domain-config-required");const e=t.emulator?Dy(t,iM):`https://${n.config.authDomain}/${nM}`,i={apiKey:t.apiKey,appName:n.name,v:ml},r=rM.get(n.config.apiHost);r&&(i.eid=r);const o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${e}?${vu(i).slice(1)}`}async function oM(n){const t=await tM(n),e=Zi().gapi;return St(e,n,"internal-error"),t.open({where:document.body,url:aM(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sM,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const l=xi(n,"network-request-failed"),u=Zi().setTimeout(()=>{o(l)},eM.get());function f(){Zi().clearTimeout(u),r(i)}i.ping(f).then(f,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cM=500,uM=600,hM="_blank",fM="http://localhost";class VT{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function dM(n,t,e,i=cM,r=uM){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const f={...lM,width:i.toString(),height:r.toString(),top:o,left:l},d=pn().toLowerCase();e&&(u=VS(d)?hM:e),kS(d)&&(t=t||fM,f.scrollbars="yes");const p=Object.entries(f).reduce((b,[E,S])=>`${b}${E}=${S},`,"");if(kI(d)&&u!=="_self")return gM(t||"",u),new VT(null);const _=window.open(t||"",u,p);St(_,n,"popup-blocked");try{_.focus()}catch{}return new VT(_)}function gM(n,t){const e=document.createElement("a");e.href=n,e.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mM="__/auth/handler",pM="emulator/auth/handler",yM=encodeURIComponent("fac");async function LT(n,t,e,i,r,o){St(n.config.authDomain,n,"auth-domain-config-required"),St(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:i,v:ml,eventId:r};if(t instanceof Py){t.setDefaultLanguage(n.languageCode),l.providerId=t.providerId||"",ZR(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters()));for(const[p,_]of Object.entries({}))l[p]=_}if(t instanceof xu){const p=t.getScopes().filter(_=>_!=="");p.length>0&&(l.scopes=p.join(","))}n.tenantId&&(l.tid=n.tenantId);const u=l;for(const p of Object.keys(u))u[p]===void 0&&delete u[p];const f=await n._getAppCheckToken(),d=f?`#${yM}=${encodeURIComponent(f)}`:"";return`${_M(n)}?${vu(u).slice(1)}${d}`}function _M({config:n}){return n.emulator?Dy(n,pM):`https://${n.authDomain}/${mM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hp="webStorageSupport";class bM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=JS,this._completeRedirectFn=HD,this._overrideRedirectResult=UD}async _openPopup(t,e,i,r){var l;Ls((l=this.eventManagers[t._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const o=await LT(t,e,i,Lp(),r);return dM(t,o,Vy())}async _openRedirect(t,e,i,r){await this._originValidation(t);const o=await LT(t,e,i,Lp(),r);return ED(o),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:r,promise:o}=this.eventManagers[e];return r?Promise.resolve(r):(Ls(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(t);return this.eventManagers[e]={promise:i},i.catch(()=>{delete this.eventManagers[e]}),i}async initAndGetManager(t){const e=await oM(t),i=new GD(t);return e.register("authEvent",r=>(St(r==null?void 0:r.authEvent,t,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=e,i}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(hp,{type:hp},r=>{var l;const o=(l=r==null?void 0:r[0])==null?void 0:l[hp];o!==void 0&&e(!!o),oi(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=QD(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return BS()||PS()||Oy()}}const vM=bM;var zT="@firebase/auth",jT="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(i=>{t((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){St(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EM(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function xM(n){sl(new qa("auth",(t,{options:e})=>{const i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),o=t.getProvider("app-check-internal"),{apiKey:l,authDomain:u}=i.options;St(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const f={apiKey:l,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:FS(n)},d=new UI(i,r,o,f);return QI(d,e),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,i)=>{t.getProvider("auth-internal").initialize()})),sl(new qa("auth-internal",t=>{const e=Wr(t.getProvider("auth").getImmediate());return(i=>new TM(i))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),Or(zT,jT,EM(n)),Or(zT,jT,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM=300,AM=_S("authIdTokenMaxAge")||SM;let UT=null;const wM=n=>async t=>{const e=t&&await t.getIdTokenResult(),i=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(i&&i>AM)return;const r=e==null?void 0:e.token;UT!==r&&(UT=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function CM(n=SS()){const t=Cy(n,"auth");if(t.isInitialized())return t.getImmediate();const e=XI(n,{popupRedirectResolver:vM,persistence:[MD,bD,JS]}),i=_S("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const l=wM(o.toString());gD(e,l,()=>l(e.currentUser)),dD(e,u=>l(u))}}const r=pS("auth");return r&&$I(e,`http://${r}`),e}function RM(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}BI({loadJS(n){return new Promise((t,e)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=t,i.onerror=r=>{const o=xi("internal-error");o.customData=r,e(o)},i.type="text/javascript",i.charset="UTF-8",RM().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});xM("Browser");var BT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Nr,aA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(M,C){function O(){}O.prototype=C.prototype,M.F=C.prototype,M.prototype=new O,M.prototype.constructor=M,M.D=function(P,k,j){for(var N=Array(arguments.length-2),Nt=2;Nt<arguments.length;Nt++)N[Nt-2]=arguments[Nt];return C.prototype[k].apply(P,N)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(i,e),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(M,C,O){O||(O=0);const P=Array(16);if(typeof C=="string")for(var k=0;k<16;++k)P[k]=C.charCodeAt(O++)|C.charCodeAt(O++)<<8|C.charCodeAt(O++)<<16|C.charCodeAt(O++)<<24;else for(k=0;k<16;++k)P[k]=C[O++]|C[O++]<<8|C[O++]<<16|C[O++]<<24;C=M.g[0],O=M.g[1],k=M.g[2];let j=M.g[3],N;N=C+(j^O&(k^j))+P[0]+3614090360&4294967295,C=O+(N<<7&4294967295|N>>>25),N=j+(k^C&(O^k))+P[1]+3905402710&4294967295,j=C+(N<<12&4294967295|N>>>20),N=k+(O^j&(C^O))+P[2]+606105819&4294967295,k=j+(N<<17&4294967295|N>>>15),N=O+(C^k&(j^C))+P[3]+3250441966&4294967295,O=k+(N<<22&4294967295|N>>>10),N=C+(j^O&(k^j))+P[4]+4118548399&4294967295,C=O+(N<<7&4294967295|N>>>25),N=j+(k^C&(O^k))+P[5]+1200080426&4294967295,j=C+(N<<12&4294967295|N>>>20),N=k+(O^j&(C^O))+P[6]+2821735955&4294967295,k=j+(N<<17&4294967295|N>>>15),N=O+(C^k&(j^C))+P[7]+4249261313&4294967295,O=k+(N<<22&4294967295|N>>>10),N=C+(j^O&(k^j))+P[8]+1770035416&4294967295,C=O+(N<<7&4294967295|N>>>25),N=j+(k^C&(O^k))+P[9]+2336552879&4294967295,j=C+(N<<12&4294967295|N>>>20),N=k+(O^j&(C^O))+P[10]+4294925233&4294967295,k=j+(N<<17&4294967295|N>>>15),N=O+(C^k&(j^C))+P[11]+2304563134&4294967295,O=k+(N<<22&4294967295|N>>>10),N=C+(j^O&(k^j))+P[12]+1804603682&4294967295,C=O+(N<<7&4294967295|N>>>25),N=j+(k^C&(O^k))+P[13]+4254626195&4294967295,j=C+(N<<12&4294967295|N>>>20),N=k+(O^j&(C^O))+P[14]+2792965006&4294967295,k=j+(N<<17&4294967295|N>>>15),N=O+(C^k&(j^C))+P[15]+1236535329&4294967295,O=k+(N<<22&4294967295|N>>>10),N=C+(k^j&(O^k))+P[1]+4129170786&4294967295,C=O+(N<<5&4294967295|N>>>27),N=j+(O^k&(C^O))+P[6]+3225465664&4294967295,j=C+(N<<9&4294967295|N>>>23),N=k+(C^O&(j^C))+P[11]+643717713&4294967295,k=j+(N<<14&4294967295|N>>>18),N=O+(j^C&(k^j))+P[0]+3921069994&4294967295,O=k+(N<<20&4294967295|N>>>12),N=C+(k^j&(O^k))+P[5]+3593408605&4294967295,C=O+(N<<5&4294967295|N>>>27),N=j+(O^k&(C^O))+P[10]+38016083&4294967295,j=C+(N<<9&4294967295|N>>>23),N=k+(C^O&(j^C))+P[15]+3634488961&4294967295,k=j+(N<<14&4294967295|N>>>18),N=O+(j^C&(k^j))+P[4]+3889429448&4294967295,O=k+(N<<20&4294967295|N>>>12),N=C+(k^j&(O^k))+P[9]+568446438&4294967295,C=O+(N<<5&4294967295|N>>>27),N=j+(O^k&(C^O))+P[14]+3275163606&4294967295,j=C+(N<<9&4294967295|N>>>23),N=k+(C^O&(j^C))+P[3]+4107603335&4294967295,k=j+(N<<14&4294967295|N>>>18),N=O+(j^C&(k^j))+P[8]+1163531501&4294967295,O=k+(N<<20&4294967295|N>>>12),N=C+(k^j&(O^k))+P[13]+2850285829&4294967295,C=O+(N<<5&4294967295|N>>>27),N=j+(O^k&(C^O))+P[2]+4243563512&4294967295,j=C+(N<<9&4294967295|N>>>23),N=k+(C^O&(j^C))+P[7]+1735328473&4294967295,k=j+(N<<14&4294967295|N>>>18),N=O+(j^C&(k^j))+P[12]+2368359562&4294967295,O=k+(N<<20&4294967295|N>>>12),N=C+(O^k^j)+P[5]+4294588738&4294967295,C=O+(N<<4&4294967295|N>>>28),N=j+(C^O^k)+P[8]+2272392833&4294967295,j=C+(N<<11&4294967295|N>>>21),N=k+(j^C^O)+P[11]+1839030562&4294967295,k=j+(N<<16&4294967295|N>>>16),N=O+(k^j^C)+P[14]+4259657740&4294967295,O=k+(N<<23&4294967295|N>>>9),N=C+(O^k^j)+P[1]+2763975236&4294967295,C=O+(N<<4&4294967295|N>>>28),N=j+(C^O^k)+P[4]+1272893353&4294967295,j=C+(N<<11&4294967295|N>>>21),N=k+(j^C^O)+P[7]+4139469664&4294967295,k=j+(N<<16&4294967295|N>>>16),N=O+(k^j^C)+P[10]+3200236656&4294967295,O=k+(N<<23&4294967295|N>>>9),N=C+(O^k^j)+P[13]+681279174&4294967295,C=O+(N<<4&4294967295|N>>>28),N=j+(C^O^k)+P[0]+3936430074&4294967295,j=C+(N<<11&4294967295|N>>>21),N=k+(j^C^O)+P[3]+3572445317&4294967295,k=j+(N<<16&4294967295|N>>>16),N=O+(k^j^C)+P[6]+76029189&4294967295,O=k+(N<<23&4294967295|N>>>9),N=C+(O^k^j)+P[9]+3654602809&4294967295,C=O+(N<<4&4294967295|N>>>28),N=j+(C^O^k)+P[12]+3873151461&4294967295,j=C+(N<<11&4294967295|N>>>21),N=k+(j^C^O)+P[15]+530742520&4294967295,k=j+(N<<16&4294967295|N>>>16),N=O+(k^j^C)+P[2]+3299628645&4294967295,O=k+(N<<23&4294967295|N>>>9),N=C+(k^(O|~j))+P[0]+4096336452&4294967295,C=O+(N<<6&4294967295|N>>>26),N=j+(O^(C|~k))+P[7]+1126891415&4294967295,j=C+(N<<10&4294967295|N>>>22),N=k+(C^(j|~O))+P[14]+2878612391&4294967295,k=j+(N<<15&4294967295|N>>>17),N=O+(j^(k|~C))+P[5]+4237533241&4294967295,O=k+(N<<21&4294967295|N>>>11),N=C+(k^(O|~j))+P[12]+1700485571&4294967295,C=O+(N<<6&4294967295|N>>>26),N=j+(O^(C|~k))+P[3]+2399980690&4294967295,j=C+(N<<10&4294967295|N>>>22),N=k+(C^(j|~O))+P[10]+4293915773&4294967295,k=j+(N<<15&4294967295|N>>>17),N=O+(j^(k|~C))+P[1]+2240044497&4294967295,O=k+(N<<21&4294967295|N>>>11),N=C+(k^(O|~j))+P[8]+1873313359&4294967295,C=O+(N<<6&4294967295|N>>>26),N=j+(O^(C|~k))+P[15]+4264355552&4294967295,j=C+(N<<10&4294967295|N>>>22),N=k+(C^(j|~O))+P[6]+2734768916&4294967295,k=j+(N<<15&4294967295|N>>>17),N=O+(j^(k|~C))+P[13]+1309151649&4294967295,O=k+(N<<21&4294967295|N>>>11),N=C+(k^(O|~j))+P[4]+4149444226&4294967295,C=O+(N<<6&4294967295|N>>>26),N=j+(O^(C|~k))+P[11]+3174756917&4294967295,j=C+(N<<10&4294967295|N>>>22),N=k+(C^(j|~O))+P[2]+718787259&4294967295,k=j+(N<<15&4294967295|N>>>17),N=O+(j^(k|~C))+P[9]+3951481745&4294967295,M.g[0]=M.g[0]+C&4294967295,M.g[1]=M.g[1]+(k+(N<<21&4294967295|N>>>11))&4294967295,M.g[2]=M.g[2]+k&4294967295,M.g[3]=M.g[3]+j&4294967295}i.prototype.v=function(M,C){C===void 0&&(C=M.length);const O=C-this.blockSize,P=this.C;let k=this.h,j=0;for(;j<C;){if(k==0)for(;j<=O;)r(this,M,j),j+=this.blockSize;if(typeof M=="string"){for(;j<C;)if(P[k++]=M.charCodeAt(j++),k==this.blockSize){r(this,P),k=0;break}}else for(;j<C;)if(P[k++]=M[j++],k==this.blockSize){r(this,P),k=0;break}}this.h=k,this.o+=C},i.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var C=1;C<M.length-8;++C)M[C]=0;C=this.o*8;for(var O=M.length-8;O<M.length;++O)M[O]=C&255,C/=256;for(this.v(M),M=Array(16),C=0,O=0;O<4;++O)for(let P=0;P<32;P+=8)M[C++]=this.g[O]>>>P&255;return M};function o(M,C){var O=u;return Object.prototype.hasOwnProperty.call(O,M)?O[M]:O[M]=C(M)}function l(M,C){this.h=C;const O=[];let P=!0;for(let k=M.length-1;k>=0;k--){const j=M[k]|0;P&&j==C||(O[k]=j,P=!1)}this.g=O}var u={};function f(M){return-128<=M&&M<128?o(M,function(C){return new l([C|0],C<0?-1:0)}):new l([M|0],M<0?-1:0)}function d(M){if(isNaN(M)||!isFinite(M))return _;if(M<0)return D(d(-M));const C=[];let O=1;for(let P=0;M>=O;P++)C[P]=M/O|0,O*=4294967296;return new l(C,0)}function p(M,C){if(M.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(M.charAt(0)=="-")return D(p(M.substring(1),C));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');const O=d(Math.pow(C,8));let P=_;for(let j=0;j<M.length;j+=8){var k=Math.min(8,M.length-j);const N=parseInt(M.substring(j,j+k),C);k<8?(k=d(Math.pow(C,k)),P=P.j(k).add(d(N))):(P=P.j(O),P=P.add(d(N)))}return P}var _=f(0),b=f(1),E=f(16777216);n=l.prototype,n.m=function(){if(w(this))return-D(this).m();let M=0,C=1;for(let O=0;O<this.g.length;O++){const P=this.i(O);M+=(P>=0?P:4294967296+P)*C,C*=4294967296}return M},n.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(S(this))return"0";if(w(this))return"-"+D(this).toString(M);const C=d(Math.pow(M,6));var O=this;let P="";for(;;){const k=Z(O,C).g;O=z(O,k.j(C));let j=((O.g.length>0?O.g[0]:O.h)>>>0).toString(M);if(O=k,S(O))return j+P;for(;j.length<6;)j="0"+j;P=j+P}},n.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function S(M){if(M.h!=0)return!1;for(let C=0;C<M.g.length;C++)if(M.g[C]!=0)return!1;return!0}function w(M){return M.h==-1}n.l=function(M){return M=z(this,M),w(M)?-1:S(M)?0:1};function D(M){const C=M.g.length,O=[];for(let P=0;P<C;P++)O[P]=~M.g[P];return new l(O,~M.h).add(b)}n.abs=function(){return w(this)?D(this):this},n.add=function(M){const C=Math.max(this.g.length,M.g.length),O=[];let P=0;for(let k=0;k<=C;k++){let j=P+(this.i(k)&65535)+(M.i(k)&65535),N=(j>>>16)+(this.i(k)>>>16)+(M.i(k)>>>16);P=N>>>16,j&=65535,N&=65535,O[k]=N<<16|j}return new l(O,O[O.length-1]&-2147483648?-1:0)};function z(M,C){return M.add(D(C))}n.j=function(M){if(S(this)||S(M))return _;if(w(this))return w(M)?D(this).j(D(M)):D(D(this).j(M));if(w(M))return D(this.j(D(M)));if(this.l(E)<0&&M.l(E)<0)return d(this.m()*M.m());const C=this.g.length+M.g.length,O=[];for(var P=0;P<2*C;P++)O[P]=0;for(P=0;P<this.g.length;P++)for(let k=0;k<M.g.length;k++){const j=this.i(P)>>>16,N=this.i(P)&65535,Nt=M.i(k)>>>16,Et=M.i(k)&65535;O[2*P+2*k]+=N*Et,F(O,2*P+2*k),O[2*P+2*k+1]+=j*Et,F(O,2*P+2*k+1),O[2*P+2*k+1]+=N*Nt,F(O,2*P+2*k+1),O[2*P+2*k+2]+=j*Nt,F(O,2*P+2*k+2)}for(M=0;M<C;M++)O[M]=O[2*M+1]<<16|O[2*M];for(M=C;M<2*C;M++)O[M]=0;return new l(O,0)};function F(M,C){for(;(M[C]&65535)!=M[C];)M[C+1]+=M[C]>>>16,M[C]&=65535,C++}function W(M,C){this.g=M,this.h=C}function Z(M,C){if(S(C))throw Error("division by zero");if(S(M))return new W(_,_);if(w(M))return C=Z(D(M),C),new W(D(C.g),D(C.h));if(w(C))return C=Z(M,D(C)),new W(D(C.g),C.h);if(M.g.length>30){if(w(M)||w(C))throw Error("slowDivide_ only works with positive integers.");for(var O=b,P=C;P.l(M)<=0;)O=$(O),P=$(P);var k=st(O,1),j=st(P,1);for(P=st(P,2),O=st(O,2);!S(P);){var N=j.add(P);N.l(M)<=0&&(k=k.add(O),j=N),P=st(P,1),O=st(O,1)}return C=z(M,k.j(C)),new W(k,C)}for(k=_;M.l(C)>=0;){for(O=Math.max(1,Math.floor(M.m()/C.m())),P=Math.ceil(Math.log(O)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),j=d(O),N=j.j(C);w(N)||N.l(M)>0;)O-=P,j=d(O),N=j.j(C);S(j)&&(j=b),k=k.add(j),M=z(M,N)}return new W(k,M)}n.B=function(M){return Z(this,M).h},n.and=function(M){const C=Math.max(this.g.length,M.g.length),O=[];for(let P=0;P<C;P++)O[P]=this.i(P)&M.i(P);return new l(O,this.h&M.h)},n.or=function(M){const C=Math.max(this.g.length,M.g.length),O=[];for(let P=0;P<C;P++)O[P]=this.i(P)|M.i(P);return new l(O,this.h|M.h)},n.xor=function(M){const C=Math.max(this.g.length,M.g.length),O=[];for(let P=0;P<C;P++)O[P]=this.i(P)^M.i(P);return new l(O,this.h^M.h)};function $(M){const C=M.g.length+1,O=[];for(let P=0;P<C;P++)O[P]=M.i(P)<<1|M.i(P-1)>>>31;return new l(O,M.h)}function st(M,C){const O=C>>5;C%=32;const P=M.g.length-O,k=[];for(let j=0;j<P;j++)k[j]=C>0?M.i(j+O)>>>C|M.i(j+O+1)<<32-C:M.i(j+O);return new l(k,M.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,aA=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=d,l.fromString=p,Nr=l}).apply(typeof BT<"u"?BT:typeof self<"u"?self:typeof window<"u"?window:{});var hf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var oA,Pc,lA,Pf,Bp,cA,uA,hA;(function(){var n,t=Object.defineProperty;function e(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof hf=="object"&&hf];for(var v=0;v<g.length;++v){var x=g[v];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var i=e(this);function r(g,v){if(v)t:{var x=i;g=g.split(".");for(var I=0;I<g.length-1;I++){var H=g[I];if(!(H in x))break t;x=x[H]}g=g[g.length-1],I=x[g],v=v(I),v!=I&&v!=null&&t(x,g,{configurable:!0,writable:!0,value:v})}}r("Symbol.dispose",function(g){return g||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(g){return g||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(g){return g||function(v){var x=[],I;for(I in v)Object.prototype.hasOwnProperty.call(v,I)&&x.push([I,v[I]]);return x}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(g){var v=typeof g;return v=="object"&&g!=null||v=="function"}function f(g,v,x){return g.call.apply(g.bind,arguments)}function d(g,v,x){return d=f,d.apply(null,arguments)}function p(g,v){var x=Array.prototype.slice.call(arguments,1);return function(){var I=x.slice();return I.push.apply(I,arguments),g.apply(this,I)}}function _(g,v){function x(){}x.prototype=v.prototype,g.Z=v.prototype,g.prototype=new x,g.prototype.constructor=g,g.Ob=function(I,H,X){for(var lt=Array(arguments.length-2),Dt=2;Dt<arguments.length;Dt++)lt[Dt-2]=arguments[Dt];return v.prototype[H].apply(I,lt)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?g=>g&&AsyncContext.Snapshot.wrap(g):g=>g;function E(g){const v=g.length;if(v>0){const x=Array(v);for(let I=0;I<v;I++)x[I]=g[I];return x}return[]}function S(g,v){for(let I=1;I<arguments.length;I++){const H=arguments[I];var x=typeof H;if(x=x!="object"?x:H?Array.isArray(H)?"array":x:"null",x=="array"||x=="object"&&typeof H.length=="number"){x=g.length||0;const X=H.length||0;g.length=x+X;for(let lt=0;lt<X;lt++)g[x+lt]=H[lt]}else g.push(H)}}class w{constructor(v,x){this.i=v,this.j=x,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function D(g){l.setTimeout(()=>{throw g},0)}function z(){var g=M;let v=null;return g.g&&(v=g.g,g.g=g.g.next,g.g||(g.h=null),v.next=null),v}class F{constructor(){this.h=this.g=null}add(v,x){const I=W.get();I.set(v,x),this.h?this.h.next=I:this.g=I,this.h=I}}var W=new w(()=>new Z,g=>g.reset());class Z{constructor(){this.next=this.g=this.h=null}set(v,x){this.h=v,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let $,st=!1,M=new F,C=()=>{const g=Promise.resolve(void 0);$=()=>{g.then(O)}};function O(){for(var g;g=z();){try{g.h.call(g.g)}catch(x){D(x)}var v=W;v.j(g),v.h<100&&(v.h++,g.next=v.g,v.g=g)}st=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(g,v){this.type=g,this.g=this.target=v,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var j=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var g=!1,v=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const x=()=>{};l.addEventListener("test",x,v),l.removeEventListener("test",x,v)}catch{}return g})();function N(g){return/^[\s\xa0]*$/.test(g)}function Nt(g,v){k.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g&&this.init(g,v)}_(Nt,k),Nt.prototype.init=function(g,v){const x=this.type=g.type,I=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;this.target=g.target||g.srcElement,this.g=v,v=g.relatedTarget,v||(x=="mouseover"?v=g.fromElement:x=="mouseout"&&(v=g.toElement)),this.relatedTarget=v,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=g.pointerType,this.state=g.state,this.i=g,g.defaultPrevented&&Nt.Z.h.call(this)},Nt.prototype.h=function(){Nt.Z.h.call(this);const g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var Et="closure_listenable_"+(Math.random()*1e6|0),K=0;function at(g,v,x,I,H){this.listener=g,this.proxy=null,this.src=v,this.type=x,this.capture=!!I,this.ha=H,this.key=++K,this.da=this.fa=!1}function ft(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function bt(g,v,x){for(const I in g)v.call(x,g[I],I,g)}function kt(g,v){for(const x in g)v.call(void 0,g[x],x,g)}function L(g){const v={};for(const x in g)v[x]=g[x];return v}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ot(g,v){let x,I;for(let H=1;H<arguments.length;H++){I=arguments[H];for(x in I)g[x]=I[x];for(let X=0;X<J.length;X++)x=J[X],Object.prototype.hasOwnProperty.call(I,x)&&(g[x]=I[x])}}function ut(g){this.src=g,this.g={},this.h=0}ut.prototype.add=function(g,v,x,I,H){const X=g.toString();g=this.g[X],g||(g=this.g[X]=[],this.h++);const lt=xt(g,v,I,H);return lt>-1?(v=g[lt],x||(v.fa=!1)):(v=new at(v,this.src,X,!!I,H),v.fa=x,g.push(v)),v};function vt(g,v){const x=v.type;if(x in g.g){var I=g.g[x],H=Array.prototype.indexOf.call(I,v,void 0),X;(X=H>=0)&&Array.prototype.splice.call(I,H,1),X&&(ft(v),g.g[x].length==0&&(delete g.g[x],g.h--))}}function xt(g,v,x,I){for(let H=0;H<g.length;++H){const X=g[H];if(!X.da&&X.listener==v&&X.capture==!!x&&X.ha==I)return H}return-1}var Gt="closure_lm_"+(Math.random()*1e6|0),He={};function ge(g,v,x,I,H){if(Array.isArray(v)){for(let X=0;X<v.length;X++)ge(g,v[X],x,I,H);return null}return x=xl(x),g&&g[Et]?g.J(v,x,u(I)?!!I.capture:!1,H):Jr(g,v,x,!1,I,H)}function Jr(g,v,x,I,H,X){if(!v)throw Error("Invalid event type");const lt=u(H)?!!H.capture:!!H;let Dt=Zr(g);if(Dt||(g[Gt]=Dt=new ut(g)),x=Dt.add(v,x,I,lt,X),x.proxy)return x;if(I=no(),x.proxy=I,I.src=g,I.listener=x,g.addEventListener)j||(H=lt),H===void 0&&(H=!1),g.addEventListener(v.toString(),I,H);else if(g.attachEvent)g.attachEvent(Ri(v.toString()),I);else if(g.addListener&&g.removeListener)g.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return x}function no(){function g(x){return v.call(g.src,g.listener,x)}const v=Tl;return g}function io(g,v,x,I,H){if(Array.isArray(v))for(var X=0;X<v.length;X++)io(g,v[X],x,I,H);else I=u(I)?!!I.capture:!!I,x=xl(x),g&&g[Et]?(g=g.i,X=String(v).toString(),X in g.g&&(v=g.g[X],x=xt(v,x,I,H),x>-1&&(ft(v[x]),Array.prototype.splice.call(v,x,1),v.length==0&&(delete g.g[X],g.h--)))):g&&(g=Zr(g))&&(v=g.g[v.toString()],g=-1,v&&(g=xt(v,x,I,H)),(x=g>-1?v[g]:null)&&so(x))}function so(g){if(typeof g!="number"&&g&&!g.da){var v=g.src;if(v&&v[Et])vt(v.i,g);else{var x=g.type,I=g.proxy;v.removeEventListener?v.removeEventListener(x,I,g.capture):v.detachEvent?v.detachEvent(Ri(x),I):v.addListener&&v.removeListener&&v.removeListener(I),(x=Zr(v))?(vt(x,g),x.h==0&&(x.src=null,v[Gt]=null)):ft(g)}}}function Ri(g){return g in He?He[g]:He[g]="on"+g}function Tl(g,v){if(g.da)g=!0;else{v=new Nt(v,this);const x=g.listener,I=g.ha||g.src;g.fa&&so(g),g=x.call(I,v)}return g}function Zr(g){return g=g[Gt],g instanceof ut?g:null}var El="__closure_events_fn_"+(Math.random()*1e9>>>0);function xl(g){return typeof g=="function"?g:(g[El]||(g[El]=function(v){return g.handleEvent(v)}),g[El])}function Ie(){P.call(this),this.i=new ut(this),this.M=this,this.G=null}_(Ie,P),Ie.prototype[Et]=!0,Ie.prototype.removeEventListener=function(g,v,x,I){io(this,g,v,x,I)};function qe(g,v){var x,I=g.G;if(I)for(x=[];I;I=I.G)x.push(I);if(g=g.M,I=v.type||v,typeof v=="string")v=new k(v,g);else if(v instanceof k)v.target=v.target||g;else{var H=v;v=new k(I,g),ot(v,H)}H=!0;let X,lt;if(x)for(lt=x.length-1;lt>=0;lt--)X=v.g=x[lt],H=Bs(X,I,!0,v)&&H;if(X=v.g=g,H=Bs(X,I,!0,v)&&H,H=Bs(X,I,!1,v)&&H,x)for(lt=0;lt<x.length;lt++)X=v.g=x[lt],H=Bs(X,I,!1,v)&&H}Ie.prototype.N=function(){if(Ie.Z.N.call(this),this.i){var g=this.i;for(const v in g.g){const x=g.g[v];for(let I=0;I<x.length;I++)ft(x[I]);delete g.g[v],g.h--}}this.G=null},Ie.prototype.J=function(g,v,x,I){return this.i.add(String(g),v,!1,x,I)},Ie.prototype.K=function(g,v,x,I){return this.i.add(String(g),v,!0,x,I)};function Bs(g,v,x,I){if(v=g.i.g[String(v)],!v)return!0;v=v.concat();let H=!0;for(let X=0;X<v.length;++X){const lt=v[X];if(lt&&!lt.da&&lt.capture==x){const Dt=lt.listener,Se=lt.ha||lt.src;lt.fa&&vt(g.i,lt),H=Dt.call(Se,I)!==!1&&H}}return H&&!I.defaultPrevented}function eg(g,v){if(typeof g!="function")if(g&&typeof g.handleEvent=="function")g=d(g.handleEvent,g);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:l.setTimeout(g,v||0)}function ku(g){g.g=eg(()=>{g.g=null,g.i&&(g.i=!1,ku(g))},g.l);const v=g.h;g.h=null,g.m.apply(null,v)}class _n extends P{constructor(v,x){super(),this.m=v,this.l=x,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:ku(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ta(g){P.call(this),this.h=g,this.g={}}_(ta,P);var Sl=[];function Al(g){bt(g.g,function(v,x){this.g.hasOwnProperty(x)&&so(v)},g),g.g={}}ta.prototype.N=function(){ta.Z.N.call(this),Al(this)},ta.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Fs=l.JSON.stringify,ng=l.JSON.parse,Pu=class{stringify(g){return l.JSON.stringify(g,void 0)}parse(g){return l.JSON.parse(g,void 0)}};function Vu(){}function Lu(){}var li={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ze(){k.call(this,"d")}_(Ze,k);function Yn(){k.call(this,"c")}_(Yn,k);var xe={},zu=null;function ro(){return zu=zu||new Ie}xe.Ia="serverreachability";function ju(g){k.call(this,xe.Ia,g)}_(ju,k);function Ii(g){const v=ro();qe(v,new ju(v))}xe.STAT_EVENT="statevent";function ea(g,v){k.call(this,xe.STAT_EVENT,g),this.stat=v}_(ea,k);function De(g){const v=ro();qe(v,new ea(v,g))}xe.Ja="timingevent";function Di(g,v){k.call(this,xe.Ja,g),this.size=v}_(Di,k);function Mi(g,v){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){g()},v)}function ci(){this.g=!0}ci.prototype.ua=function(){this.g=!1};function ig(g,v,x,I,H,X){g.info(function(){if(g.g)if(X){var lt="",Dt=X.split("&");for(let Qt=0;Qt<Dt.length;Qt++){var Se=Dt[Qt].split("=");if(Se.length>1){const me=Se[0];Se=Se[1];const Qn=me.split("_");lt=Qn.length>=2&&Qn[1]=="type"?lt+(me+"="+Se+"&"):lt+(me+"=redacted&")}}}else lt=null;else lt=X;return"XMLHTTP REQ ("+I+") [attempt "+H+"]: "+v+`
`+x+`
`+lt})}function Uu(g,v,x,I,H,X,lt){g.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+H+"]: "+v+`
`+x+`
`+X+" "+lt})}function Oi(g,v,x,I){g.info(function(){return"XMLHTTP TEXT ("+v+"): "+sg(g,x)+(I?" "+I:"")})}function na(g,v){g.info(function(){return"TIMEOUT: "+v})}ci.prototype.info=function(){};function sg(g,v){if(!g.g)return v;if(!v)return null;try{const X=JSON.parse(v);if(X){for(g=0;g<X.length;g++)if(Array.isArray(X[g])){var x=X[g];if(!(x.length<2)){var I=x[1];if(Array.isArray(I)&&!(I.length<1)){var H=I[0];if(H!="noop"&&H!="stop"&&H!="close")for(let lt=1;lt<I.length;lt++)I[lt]=""}}}}return Fs(X)}catch{return v}}var ia={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},wl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Cl;function sa(){}_(sa,Vu),sa.prototype.g=function(){return new XMLHttpRequest},Cl=new sa;function as(g){return encodeURIComponent(String(g))}function Bu(g){var v=1;g=g.split(":");const x=[];for(;v>0&&g.length;)x.push(g.shift()),v--;return g.length&&x.push(g.join(":")),x}function ui(g,v,x,I){this.j=g,this.i=v,this.l=x,this.S=I||1,this.V=new ta(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new hi}function hi(){this.i=null,this.g="",this.h=!1}var Me={},We={};function Ni(g,v,x){g.M=1,g.A=ra(Ne(v)),g.u=x,g.R=!0,ao(g,null)}function ao(g,v){g.F=Date.now(),ki(g),g.B=Ne(g.A);var x=g.B,I=g.S;Array.isArray(I)||(I=[String(I)]),uo(x.i,"t",I),g.C=0,x=g.j.L,g.h=new hi,g.g=nh(g.j,x?v:null,!g.u),g.P>0&&(g.O=new _n(d(g.Y,g,g.g),g.P)),v=g.V,x=g.g,I=g.ba;var H="readystatechange";Array.isArray(H)||(H&&(Sl[0]=H.toString()),H=Sl);for(let X=0;X<H.length;X++){const lt=ge(x,H[X],I||v.handleEvent,!1,v.h||v);if(!lt)break;v.g[lt.key]=lt}v=g.J?L(g.J):{},g.u?(g.v||(g.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.B,g.v,g.u,v)):(g.v="GET",g.g.ea(g.B,g.v,null,v)),Ii(),ig(g.i,g.v,g.B,g.l,g.S,g.u)}ui.prototype.ba=function(g){g=g.target;const v=this.O;v&&gi(g)==3?v.j():this.Y(g)},ui.prototype.Y=function(g){try{if(g==this.g)t:{const Dt=gi(this.g),Se=this.g.ya(),Qt=this.g.ca();if(!(Dt<3)&&(Dt!=3||this.g&&(this.h.h||this.g.la()||tn(this.g)))){this.K||Dt!=4||Se==7||(Se==8||Qt<=0?Ii(3):Ii(2)),Pi(this);var v=this.g.ca();this.X=v;var x=rg(this);if(this.o=v==200,Uu(this.i,this.v,this.B,this.l,this.S,Dt,v),this.o){if(this.U&&!this.L){e:{if(this.g){var I,H=this.g;if((I=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(I)){var X=I;break e}}X=null}if(g=X)Oi(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Vi(this,g);else{this.o=!1,this.m=3,De(12),kn(this),Kn(this);break t}}if(this.R){g=!0;let me;for(;!this.K&&this.C<x.length;)if(me=Hu(this,x),me==We){Dt==4&&(this.m=4,De(14),g=!1),Oi(this.i,this.l,null,"[Incomplete Response]");break}else if(me==Me){this.m=4,De(15),Oi(this.i,this.l,x,"[Invalid Chunk]"),g=!1;break}else Oi(this.i,this.l,me,null),Vi(this,me);if(Fu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Dt!=4||x.length!=0||this.h.h||(this.m=1,De(16),g=!1),this.o=this.o&&g,!g)Oi(this.i,this.l,x,"[Invalid Chunked Response]"),kn(this),Kn(this);else if(x.length>0&&!this.W){this.W=!0;var lt=this.j;lt.g==this&&lt.aa&&!lt.P&&(lt.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),Fl(lt),lt.P=!0,De(11))}}else Oi(this.i,this.l,x,null),Vi(this,x);Dt==4&&kn(this),this.o&&!this.K&&(Dt==4?Ju(this.j,this):(this.o=!1,ki(this)))}else ls(this.g),v==400&&x.indexOf("Unknown SID")>0?(this.m=3,De(12)):(this.m=0,De(13)),kn(this),Kn(this)}}}catch{}finally{}};function rg(g){if(!Fu(g))return g.g.la();const v=tn(g.g);if(v==="")return"";let x="";const I=v.length,H=gi(g.g)==4;if(!g.h.i){if(typeof TextDecoder>"u")return kn(g),Kn(g),"";g.h.i=new l.TextDecoder}for(let X=0;X<I;X++)g.h.h=!0,x+=g.h.i.decode(v[X],{stream:!(H&&X==I-1)});return v.length=0,g.h.g+=x,g.C=0,g.h.g}function Fu(g){return g.g?g.v=="GET"&&g.M!=2&&g.j.Aa:!1}function Hu(g,v){var x=g.C,I=v.indexOf(`
`,x);return I==-1?We:(x=Number(v.substring(x,I)),isNaN(x)?Me:(I+=1,I+x>v.length?We:(v=v.slice(I,I+x),g.C=I+x,v)))}ui.prototype.cancel=function(){this.K=!0,kn(this)};function ki(g){g.T=Date.now()+g.H,oo(g,g.H)}function oo(g,v){if(g.D!=null)throw Error("WatchDog timer not null");g.D=Mi(d(g.aa,g),v)}function Pi(g){g.D&&(l.clearTimeout(g.D),g.D=null)}ui.prototype.aa=function(){this.D=null;const g=Date.now();g-this.T>=0?(na(this.i,this.B),this.M!=2&&(Ii(),De(17)),kn(this),this.m=2,Kn(this)):oo(this,this.T-g)};function Kn(g){g.j.I==0||g.K||Ju(g.j,g)}function kn(g){Pi(g);var v=g.O;v&&typeof v.dispose=="function"&&v.dispose(),g.O=null,Al(g.V),g.g&&(v=g.g,g.g=null,v.abort(),v.dispose())}function Vi(g,v){try{var x=g.j;if(x.I!=0&&(x.g==g||zi(x.h,g))){if(!g.L&&zi(x.h,g)&&x.I==3){try{var I=x.Ba.g.parse(v)}catch{I=null}if(Array.isArray(I)&&I.length==3){var H=I;if(H[0]==0){t:if(!x.v){if(x.g)if(x.g.F+3e3<g.F)po(x),Qs(x);else break t;fa(x),De(18)}}else x.xa=H[1],0<x.xa-x.K&&H[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=Mi(d(x.Va,x),6e3));Li(x.h)<=1&&x.ta&&(x.ta=void 0)}else qi(x,11)}else if((g.L||x.g==g)&&po(x),!N(v))for(H=x.Ba.g.parse(v),v=0;v<H.length;v++){let Qt=H[v];const me=Qt[0];if(!(me<=x.K))if(x.K=me,Qt=Qt[1],x.I==2)if(Qt[0]=="c"){x.M=Qt[1],x.ba=Qt[2];const Qn=Qt[3];Qn!=null&&(x.ka=Qn,x.j.info("VER="+x.ka));const Gi=Qt[4];Gi!=null&&(x.za=Gi,x.j.info("SVER="+x.za));const mi=Qt[5];mi!=null&&typeof mi=="number"&&mi>0&&(I=1.5*mi,x.O=I,x.j.info("backChannelRequestTimeoutMs_="+I)),I=x;const pi=g.g;if(pi){const da=pi.g?pi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(da){var X=I.h;X.g||da.indexOf("spdy")==-1&&da.indexOf("quic")==-1&&da.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(Dl(X,X.h),X.h=null))}if(I.G){const yo=pi.g?pi.g.getResponseHeader("X-HTTP-Session-Id"):null;yo&&(I.wa=yo,Zt(I.J,I.G,yo))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-g.F,x.j.info("Handshake RTT: "+x.T+"ms")),I=x;var lt=g;if(I.na=eh(I,I.L?I.ba:null,I.W),lt.L){Ml(I.h,lt);var Dt=lt,Se=I.O;Se&&(Dt.H=Se),Dt.D&&(Pi(Dt),ki(Dt)),I.g=lt}else Qu(I);x.i.length>0&&Hi(x)}else Qt[0]!="stop"&&Qt[0]!="close"||qi(x,7);else x.I==3&&(Qt[0]=="stop"||Qt[0]=="close"?Qt[0]=="stop"?qi(x,7):Ul(x):Qt[0]!="noop"&&x.l&&x.l.qa(Qt),x.A=0)}}Ii(4)}catch{}}var Oe=class{constructor(g,v){this.g=g,this.map=v}};function Rl(g){this.l=g||10,l.PerformanceNavigationTiming?(g=l.performance.getEntriesByType("navigation"),g=g.length>0&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Il(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function Li(g){return g.h?1:g.g?g.g.size:0}function zi(g,v){return g.h?g.h==v:g.g?g.g.has(v):!1}function Dl(g,v){g.g?g.g.add(v):g.h=v}function Ml(g,v){g.h&&g.h==v?g.h=null:g.g&&g.g.has(v)&&g.g.delete(v)}Rl.prototype.cancel=function(){if(this.i=Ol(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function Ol(g){if(g.h!=null)return g.i.concat(g.h.G);if(g.g!=null&&g.g.size!==0){let v=g.i;for(const x of g.g.values())v=v.concat(x.G);return v}return E(g.i)}var qu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function lo(g,v){if(g){g=g.split("&");for(let x=0;x<g.length;x++){const I=g[x].indexOf("=");let H,X=null;I>=0?(H=g[x].substring(0,I),X=g[x].substring(I+1)):H=g[x],v(H,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function Pn(g){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;g instanceof Pn?(this.l=g.l,Xe(this,g.j),this.o=g.o,this.g=g.g,Hs(this,g.u),this.h=g.h,Nl(this,Wu(g.i)),this.m=g.m):g&&(v=String(g).match(qu))?(this.l=!1,Xe(this,v[1]||"",!0),this.o=ji(v[2]||""),this.g=ji(v[3]||"",!0),Hs(this,v[4]),this.h=ji(v[5]||"",!0),Nl(this,v[6]||"",!0),this.m=ji(v[7]||"")):(this.l=!1,this.i=new Gs(null,this.l))}Pn.prototype.toString=function(){const g=[];var v=this.j;v&&g.push(aa(v,co,!0),":");var x=this.g;return(x||v=="file")&&(g.push("//"),(v=this.o)&&g.push(aa(v,co,!0),"@"),g.push(as(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&g.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&g.push("/"),g.push(aa(x,x.charAt(0)=="/"?kl:Gu,!0))),(x=this.i.toString())&&g.push("?",x),(x=this.m)&&g.push("#",aa(x,Yu)),g.join("")},Pn.prototype.resolve=function(g){const v=Ne(this);let x=!!g.j;x?Xe(v,g.j):x=!!g.o,x?v.o=g.o:x=!!g.g,x?v.g=g.g:x=g.u!=null;var I=g.h;if(x)Hs(v,g.u);else if(x=!!g.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var H=v.h.lastIndexOf("/");H!=-1&&(I=v.h.slice(0,H+1)+I)}if(H=I,H==".."||H==".")I="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){I=H.lastIndexOf("/",0)==0,H=H.split("/");const X=[];for(let lt=0;lt<H.length;){const Dt=H[lt++];Dt=="."?I&&lt==H.length&&X.push(""):Dt==".."?((X.length>1||X.length==1&&X[0]!="")&&X.pop(),I&&lt==H.length&&X.push("")):(X.push(Dt),I=!0)}I=X.join("/")}else I=H}return x?v.h=I:x=g.i.toString()!=="",x?Nl(v,Wu(g.i)):x=!!g.m,x&&(v.m=g.m),v};function Ne(g){return new Pn(g)}function Xe(g,v,x){g.j=x?ji(v,!0):v,g.j&&(g.j=g.j.replace(/:$/,""))}function Hs(g,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);g.u=v}else g.u=null}function Nl(g,v,x){v instanceof Gs?(g.i=v,ho(g.i,g.l)):(x||(v=aa(v,qs)),g.i=new Gs(v,g.l))}function Zt(g,v,x){g.i.set(v,x)}function ra(g){return Zt(g,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),g}function ji(g,v){return g?v?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function aa(g,v,x){return typeof g=="string"?(g=encodeURI(g).replace(v,Tn),x&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function Tn(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var co=/[#\/\?@]/g,Gu=/[#\?:]/g,kl=/[#\?]/g,qs=/[#\?@]/g,Yu=/#/g;function Gs(g,v){this.h=this.g=null,this.i=g||null,this.j=!!v}function En(g){g.g||(g.g=new Map,g.h=0,g.i&&lo(g.i,function(v,x){g.add(decodeURIComponent(v.replace(/\+/g," ")),x)}))}n=Gs.prototype,n.add=function(g,v){En(this),this.i=null,g=Ys(this,g);let x=this.g.get(g);return x||this.g.set(g,x=[]),x.push(v),this.h+=1,this};function Ku(g,v){En(g),v=Ys(g,v),g.g.has(v)&&(g.i=null,g.h-=g.g.get(v).length,g.g.delete(v))}function Pl(g,v){return En(g),v=Ys(g,v),g.g.has(v)}n.forEach=function(g,v){En(this),this.g.forEach(function(x,I){x.forEach(function(H){g.call(v,H,I,this)},this)},this)};function Vl(g,v){En(g);let x=[];if(typeof v=="string")Pl(g,v)&&(x=x.concat(g.g.get(Ys(g,v))));else for(g=Array.from(g.g.values()),v=0;v<g.length;v++)x=x.concat(g[v]);return x}n.set=function(g,v){return En(this),this.i=null,g=Ys(this,g),Pl(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[v]),this.h+=1,this},n.get=function(g,v){return g?(g=Vl(this,g),g.length>0?String(g[0]):v):v};function uo(g,v,x){Ku(g,v),x.length>0&&(g.i=null,g.g.set(Ys(g,v),E(x)),g.h+=x.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],v=Array.from(this.g.keys());for(let I=0;I<v.length;I++){var x=v[I];const H=as(x);x=Vl(this,x);for(let X=0;X<x.length;X++){let lt=H;x[X]!==""&&(lt+="="+as(x[X])),g.push(lt)}}return this.i=g.join("&")};function Wu(g){const v=new Gs;return v.i=g.i,g.g&&(v.g=new Map(g.g),v.h=g.h),v}function Ys(g,v){return v=String(v),g.j&&(v=v.toLowerCase()),v}function ho(g,v){v&&!g.j&&(En(g),g.i=null,g.g.forEach(function(x,I){const H=I.toLowerCase();I!=H&&(Ku(this,I),uo(this,H,x))},g)),g.j=v}function fi(g,v){const x=new ci;if(l.Image){const I=new Image;I.onload=p(Wn,x,"TestLoadImage: loaded",!0,v,I),I.onerror=p(Wn,x,"TestLoadImage: error",!1,v,I),I.onabort=p(Wn,x,"TestLoadImage: abort",!1,v,I),I.ontimeout=p(Wn,x,"TestLoadImage: timeout",!1,v,I),l.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=g}else v(!1)}function Ll(g,v){const x=new ci,I=new AbortController,H=setTimeout(()=>{I.abort(),Wn(x,"TestPingServer: timeout",!1,v)},1e4);fetch(g,{signal:I.signal}).then(X=>{clearTimeout(H),X.ok?Wn(x,"TestPingServer: ok",!0,v):Wn(x,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(H),Wn(x,"TestPingServer: error",!1,v)})}function Wn(g,v,x,I,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),I(x)}catch{}}function Ks(){this.g=new Pu}function Ui(g){this.i=g.Sb||null,this.h=g.ab||!1}_(Ui,Vu),Ui.prototype.g=function(){return new oa(this.i,this.h)};function oa(g,v){Ie.call(this),this.H=g,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(oa,Ie),n=oa.prototype,n.open=function(g,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=g,this.D=v,this.readyState=1,di(this)},n.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};g&&(v.body=g),(this.H||l).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ws(this)),this.readyState=0},n.Pa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,di(this)),this.g&&(this.readyState=3,di(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;fo(this)}else g.text().then(this.Oa.bind(this),this.ga.bind(this))};function fo(g){g.j.read().then(g.Ma.bind(g)).catch(g.ga.bind(g))}n.Ma=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var v=g.value?g.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!g.done}))&&(this.response=this.responseText+=v)}g.done?Ws(this):di(this),this.readyState==3&&fo(this)}},n.Oa=function(g){this.g&&(this.response=this.responseText=g,Ws(this))},n.Na=function(g){this.g&&(this.response=g,Ws(this))},n.ga=function(){this.g&&Ws(this)};function Ws(g){g.readyState=4,g.l=null,g.j=null,g.B=null,di(g)}n.setRequestHeader=function(g,v){this.A.append(g,v)},n.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],v=this.h.entries();for(var x=v.next();!x.done;)x=x.value,g.push(x[0]+": "+x[1]),x=v.next();return g.join(`\r
`)};function di(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(oa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function Xn(g){let v="";return bt(g,function(x,I){v+=I,v+=":",v+=x,v+=`\r
`}),v}function la(g,v,x){t:{for(I in x){var I=!1;break t}I=!0}I||(x=Xn(x),typeof g=="string"?x!=null&&as(x):Zt(g,v,x))}function ie(g){Ie.call(this),this.headers=new Map,this.L=g||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(ie,Ie);var Bi=/^https?$/i,zl=["POST","PUT"];n=ie.prototype,n.Fa=function(g){this.H=g},n.ea=function(g,v,x,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);v=v?v.toUpperCase():"GET",this.D=g,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Cl.g(),this.g.onreadystatechange=b(d(this.Ca,this));try{this.B=!0,this.g.open(v,String(g),!0),this.B=!1}catch(X){ca(this,X);return}if(g=x||"",x=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var H in I)x.set(H,I[H]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const X of I.keys())x.set(X,I.get(X));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(x.keys()).find(X=>X.toLowerCase()=="content-type"),H=l.FormData&&g instanceof l.FormData,!(Array.prototype.indexOf.call(zl,v,void 0)>=0)||I||H||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,lt]of x)this.g.setRequestHeader(X,lt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(g),this.v=!1}catch(X){ca(this,X)}};function ca(g,v){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=v,g.o=5,jl(g),os(g)}function jl(g){g.A||(g.A=!0,qe(g,"complete"),qe(g,"error"))}n.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=g||7,qe(this,"complete"),qe(this,"abort"),os(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),os(this,!0)),ie.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?ua(this):this.Xa())},n.Xa=function(){ua(this)};function ua(g){if(g.h&&typeof o<"u"){if(g.v&&gi(g)==4)setTimeout(g.Ca.bind(g),0);else if(qe(g,"readystatechange"),gi(g)==4){g.h=!1;try{const X=g.ca();t:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break t;default:v=!1}var x;if(!(x=v)){var I;if(I=X===0){let lt=String(g.D).match(qu)[1]||null;!lt&&l.self&&l.self.location&&(lt=l.self.location.protocol.slice(0,-1)),I=!Bi.test(lt?lt.toLowerCase():"")}x=I}if(x)qe(g,"complete"),qe(g,"success");else{g.o=6;try{var H=gi(g)>2?g.g.statusText:""}catch{H=""}g.l=H+" ["+g.ca()+"]",jl(g)}}finally{os(g)}}}}function os(g,v){if(g.g){g.m&&(clearTimeout(g.m),g.m=null);const x=g.g;g.g=null,v||qe(g,"ready");try{x.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function gi(g){return g.g?g.g.readyState:0}n.ca=function(){try{return gi(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(g){if(this.g){var v=this.g.responseText;return g&&v.indexOf(g)==0&&(v=v.substring(g.length)),ng(v)}};function tn(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.F){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function ls(g){const v={};g=(g.g&&gi(g)>=2&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<g.length;I++){if(N(g[I]))continue;var x=Bu(g[I]);const H=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const X=v[H]||[];v[H]=X,X.push(x)}kt(v,function(I){return I.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fi(g,v,x){return x&&x.internalChannelParams&&x.internalChannelParams[g]||v}function Xs(g){this.za=0,this.i=[],this.j=new ci,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Fi("failFast",!1,g),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Fi("baseRetryDelayMs",5e3,g),this.Za=Fi("retryDelaySeedMs",1e4,g),this.Ta=Fi("forwardChannelMaxRetries",2,g),this.va=Fi("forwardChannelRequestTimeoutMs",2e4,g),this.ma=g&&g.xmlHttpFactory||void 0,this.Ua=g&&g.Rb||void 0,this.Aa=g&&g.useFetchStreams||!1,this.O=void 0,this.L=g&&g.supportsCrossDomainXhr||!1,this.M="",this.h=new Rl(g&&g.concurrentRequestLimit),this.Ba=new Ks,this.S=g&&g.fastHandshake||!1,this.R=g&&g.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=g&&g.Pb||!1,g&&g.ua&&this.j.ua(),g&&g.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&g&&g.detectBufferingProxy||!1,this.ia=void 0,g&&g.longPollingTimeout&&g.longPollingTimeout>0&&(this.ia=g.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Xs.prototype,n.ka=8,n.I=1,n.connect=function(g,v,x,I){De(0),this.W=g,this.H=v||{},x&&I!==void 0&&(this.H.OSID=x,this.H.OAID=I),this.F=this.X,this.J=eh(this,null,this.W),Hi(this)};function Ul(g){if(go(g),g.I==3){var v=g.V++,x=Ne(g.J);if(Zt(x,"SID",g.M),Zt(x,"RID",v),Zt(x,"TYPE","terminate"),ha(g,x),v=new ui(g,g.j,v),v.M=2,v.A=ra(Ne(x)),x=!1,l.navigator&&l.navigator.sendBeacon)try{x=l.navigator.sendBeacon(v.A.toString(),"")}catch{}!x&&l.Image&&(new Image().src=v.A,x=!0),x||(v.g=nh(v.j,null),v.g.ea(v.A)),v.F=Date.now(),ki(v)}th(g)}function Qs(g){g.g&&(Fl(g),g.g.cancel(),g.g=null)}function go(g){Qs(g),g.v&&(l.clearTimeout(g.v),g.v=null),po(g),g.h.cancel(),g.m&&(typeof g.m=="number"&&l.clearTimeout(g.m),g.m=null)}function Hi(g){if(!Il(g.h)&&!g.m){g.m=!0;var v=g.Ea;$||C(),st||($(),st=!0),M.add(v,g),g.D=0}}function mo(g,v){return Li(g.h)>=g.h.j-(g.m?1:0)?!1:g.m?(g.i=v.G.concat(g.i),!0):g.I==1||g.I==2||g.D>=(g.Sa?0:g.Ta)?!1:(g.m=Mi(d(g.Ea,g,v),Zu(g,g.D)),g.D++,!0)}n.Ea=function(g){if(this.m)if(this.m=null,this.I==1){if(!g){this.V=Math.floor(Math.random()*1e5),g=this.V++;const H=new ui(this,this.j,g);let X=this.o;if(this.U&&(X?(X=L(X),ot(X,this.U)):X=this.U),this.u!==null||this.R||(H.J=X,X=null),this.S)t:{for(var v=0,x=0;x<this.i.length;x++){e:{var I=this.i[x];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break e}I=void 0}if(I===void 0)break;if(v+=I,v>4096){v=x;break t}if(v===4096||x===this.i.length-1){v=x+1;break t}}v=1e3}else v=1e3;v=Xu(this,H,v),x=Ne(this.J),Zt(x,"RID",g),Zt(x,"CVER",22),this.G&&Zt(x,"X-HTTP-Session-Id",this.G),ha(this,x),X&&(this.R?v="headers="+as(Xn(X))+"&"+v:this.u&&la(x,this.u,X)),Dl(this.h,H),this.Ra&&Zt(x,"TYPE","init"),this.S?(Zt(x,"$req",v),Zt(x,"SID","null"),H.U=!0,Ni(H,x,null)):Ni(H,x,v),this.I=2}}else this.I==3&&(g?Bl(this,g):this.i.length==0||Il(this.h)||Bl(this))};function Bl(g,v){var x;v?x=v.l:x=g.V++;const I=Ne(g.J);Zt(I,"SID",g.M),Zt(I,"RID",x),Zt(I,"AID",g.K),ha(g,I),g.u&&g.o&&la(I,g.u,g.o),x=new ui(g,g.j,x,g.D+1),g.u===null&&(x.J=g.o),v&&(g.i=v.G.concat(g.i)),v=Xu(g,x,1e3),x.H=Math.round(g.va*.5)+Math.round(g.va*.5*Math.random()),Dl(g.h,x),Ni(x,I,v)}function ha(g,v){g.H&&bt(g.H,function(x,I){Zt(v,I,x)}),g.l&&bt({},function(x,I){Zt(v,I,x)})}function Xu(g,v,x){x=Math.min(g.i.length,x);const I=g.l?d(g.l.Ka,g.l,g):null;t:{var H=g.i;let Dt=-1;for(;;){const Se=["count="+x];Dt==-1?x>0?(Dt=H[0].g,Se.push("ofs="+Dt)):Dt=0:Se.push("ofs="+Dt);let Qt=!0;for(let me=0;me<x;me++){var X=H[me].g;const Qn=H[me].map;if(X-=Dt,X<0)Dt=Math.max(0,H[me].g-100),Qt=!1;else try{X="req"+X+"_"||"";try{var lt=Qn instanceof Map?Qn:Object.entries(Qn);for(const[Gi,mi]of lt){let pi=mi;u(mi)&&(pi=Fs(mi)),Se.push(X+Gi+"="+encodeURIComponent(pi))}}catch(Gi){throw Se.push(X+"type="+encodeURIComponent("_badmap")),Gi}}catch{I&&I(Qn)}}if(Qt){lt=Se.join("&");break t}}lt=void 0}return g=g.i.splice(0,x),v.G=g,lt}function Qu(g){if(!g.g&&!g.v){g.Y=1;var v=g.Da;$||C(),st||($(),st=!0),M.add(v,g),g.A=0}}function fa(g){return g.g||g.v||g.A>=3?!1:(g.Y++,g.v=Mi(d(g.Da,g),Zu(g,g.A)),g.A++,!0)}n.Da=function(){if(this.v=null,$u(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var g=4*this.T;this.j.info("BP detection timer enabled: "+g),this.B=Mi(d(this.Wa,this),g)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,De(10),Qs(this),$u(this))};function Fl(g){g.B!=null&&(l.clearTimeout(g.B),g.B=null)}function $u(g){g.g=new ui(g,g.j,"rpc",g.Y),g.u===null&&(g.g.J=g.o),g.g.P=0;var v=Ne(g.na);Zt(v,"RID","rpc"),Zt(v,"SID",g.M),Zt(v,"AID",g.K),Zt(v,"CI",g.F?"0":"1"),!g.F&&g.ia&&Zt(v,"TO",g.ia),Zt(v,"TYPE","xmlhttp"),ha(g,v),g.u&&g.o&&la(v,g.u,g.o),g.O&&(g.g.H=g.O);var x=g.g;g=g.ba,x.M=1,x.A=ra(Ne(v)),x.u=null,x.R=!0,ao(x,g)}n.Va=function(){this.C!=null&&(this.C=null,Qs(this),fa(this),De(19))};function po(g){g.C!=null&&(l.clearTimeout(g.C),g.C=null)}function Ju(g,v){var x=null;if(g.g==v){po(g),Fl(g),g.g=null;var I=2}else if(zi(g.h,v))x=v.G,Ml(g.h,v),I=1;else return;if(g.I!=0){if(v.o)if(I==1){x=v.u?v.u.length:0,v=Date.now()-v.F;var H=g.D;I=ro(),qe(I,new Di(I,x)),Hi(g)}else Qu(g);else if(H=v.m,H==3||H==0&&v.X>0||!(I==1&&mo(g,v)||I==2&&fa(g)))switch(x&&x.length>0&&(v=g.h,v.i=v.i.concat(x)),H){case 1:qi(g,5);break;case 4:qi(g,10);break;case 3:qi(g,6);break;default:qi(g,2)}}}function Zu(g,v){let x=g.Qa+Math.floor(Math.random()*g.Za);return g.isActive()||(x*=2),x*v}function qi(g,v){if(g.j.info("Error code "+v),v==2){var x=d(g.bb,g),I=g.Ua;const H=!I;I=new Pn(I||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Xe(I,"https"),ra(I),H?fi(I.toString(),x):Ll(I.toString(),x)}else De(2);g.I=0,g.l&&g.l.pa(v),th(g),go(g)}n.bb=function(g){g?(this.j.info("Successfully pinged google.com"),De(2)):(this.j.info("Failed to ping google.com"),De(1))};function th(g){if(g.I=0,g.ja=[],g.l){const v=Ol(g.h);(v.length!=0||g.i.length!=0)&&(S(g.ja,v),S(g.ja,g.i),g.h.i.length=0,E(g.i),g.i.length=0),g.l.oa()}}function eh(g,v,x){var I=x instanceof Pn?Ne(x):new Pn(x);if(I.g!="")v&&(I.g=v+"."+I.g),Hs(I,I.u);else{var H=l.location;I=H.protocol,v=v?v+"."+H.hostname:H.hostname,H=+H.port;const X=new Pn(null);I&&Xe(X,I),v&&(X.g=v),H&&Hs(X,H),x&&(X.h=x),I=X}return x=g.G,v=g.wa,x&&v&&Zt(I,x,v),Zt(I,"VER",g.ka),ha(g,I),I}function nh(g,v,x){if(v&&!g.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=g.Aa&&!g.ma?new ie(new Ui({ab:x})):new ie(g.ma),v.Fa(g.L),v}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ih(){}n=ih.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function $s(){}$s.prototype.g=function(g,v){return new bn(g,v)};function bn(g,v){Ie.call(this),this.g=new Xs(v),this.l=g,this.h=v&&v.messageUrlParams||null,g=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(g?g["X-WebChannel-Content-Type"]=v.messageContentType:g={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(g?g["X-WebChannel-Client-Profile"]=v.sa:g={"X-WebChannel-Client-Profile":v.sa}),this.g.U=g,(g=v&&v.Qb)&&!N(g)&&(this.g.u=g),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!N(v)&&(this.g.G=v,g=this.h,g!==null&&v in g&&(g=this.h,v in g&&delete g[v])),this.j=new cs(this)}_(bn,Ie),bn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},bn.prototype.close=function(){Ul(this.g)},bn.prototype.o=function(g){var v=this.g;if(typeof g=="string"){var x={};x.__data__=g,g=x}else this.v&&(x={},x.__data__=Fs(g),g=x);v.i.push(new Oe(v.Ya++,g)),v.I==3&&Hi(v)},bn.prototype.N=function(){this.g.l=null,delete this.j,Ul(this.g),delete this.g,bn.Z.N.call(this)};function sh(g){Ze.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var v=g.__sm__;if(v){t:{for(const x in v){g=x;break t}g=void 0}(this.i=g)&&(g=this.i,v=v!==null&&g in v?v[g]:void 0),this.data=v}else this.data=g}_(sh,Ze);function rh(){Yn.call(this),this.status=1}_(rh,Yn);function cs(g){this.g=g}_(cs,ih),cs.prototype.ra=function(){qe(this.g,"a")},cs.prototype.qa=function(g){qe(this.g,new sh(g))},cs.prototype.pa=function(g){qe(this.g,new rh)},cs.prototype.oa=function(){qe(this.g,"b")},$s.prototype.createWebChannel=$s.prototype.g,bn.prototype.send=bn.prototype.o,bn.prototype.open=bn.prototype.m,bn.prototype.close=bn.prototype.close,hA=function(){return new $s},uA=function(){return ro()},cA=xe,Bp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ia.NO_ERROR=0,ia.TIMEOUT=8,ia.HTTP_ERROR=6,Pf=ia,wl.COMPLETE="complete",lA=wl,Lu.EventType=li,li.OPEN="a",li.CLOSE="b",li.ERROR="c",li.MESSAGE="d",Ie.prototype.listen=Ie.prototype.J,Pc=Lu,ie.prototype.listenOnce=ie.prototype.K,ie.prototype.getLastError=ie.prototype.Ha,ie.prototype.getLastErrorCode=ie.prototype.ya,ie.prototype.getStatus=ie.prototype.ca,ie.prototype.getResponseJson=ie.prototype.La,ie.prototype.getResponseText=ie.prototype.la,ie.prototype.send=ie.prototype.ea,ie.prototype.setWithCredentials=ie.prototype.Fa,oA=ie}).apply(typeof hf<"u"?hf:typeof self<"u"?self:typeof window<"u"?window:{});const FT="@firebase/firestore",HT="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}fn.UNAUTHENTICATED=new fn(null),fn.GOOGLE_CREDENTIALS=new fn("google-credentials-uid"),fn.FIRST_PARTY=new fn("first-party-uid"),fn.MOCK_USER=new fn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka=new Ay("@firebase/firestore");function Xo(){return Ka.logLevel}function dt(n,...t){if(Ka.logLevel<=Ut.DEBUG){const e=t.map(zy);Ka.debug(`Firestore (${yl}): ${n}`,...e)}}function zs(n,...t){if(Ka.logLevel<=Ut.ERROR){const e=t.map(zy);Ka.error(`Firestore (${yl}): ${n}`,...e)}}function rl(n,...t){if(Ka.logLevel<=Ut.WARN){const e=t.map(zy);Ka.warn(`Firestore (${yl}): ${n}`,...e)}}function zy(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(e){return JSON.stringify(e)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(n,t,e){let i="Unexpected state";typeof t=="string"?i=t:e=t,fA(n,i,e)}function fA(n,t,e){let i=`FIRESTORE (${yl}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(e!==void 0)try{i+=" CONTEXT: "+JSON.stringify(e)}catch{i+=" CONTEXT: "+e}throw zs(i),new Error(i)}function Jt(n,t,e,i){let r="Unexpected state";typeof e=="string"?r=e:i=e,n||fA(t,r,i)}function It(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const it={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ht extends Us{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class IM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(fn.UNAUTHENTICATED)))}shutdown(){}}class DM{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class MM{constructor(t){this.t=t,this.currentUser=fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){Jt(this.o===void 0,42304);let i=this.i;const r=f=>this.i!==i?(i=this.i,e(f)):Promise.resolve();let o=new kr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new kr,t.enqueueRetryable((()=>r(this.currentUser)))};const l=()=>{const f=o;t.enqueueRetryable((async()=>{await f.promise,await r(this.currentUser)}))},u=f=>{dt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((f=>u(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?u(f):(dt("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new kr)}}),0),l()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((i=>this.i!==t?(dt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Jt(typeof i.accessToken=="string",31837,{l:i}),new dA(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Jt(t===null||typeof t=="string",2055,{h:t}),new fn(t)}}class OM{constructor(t,e,i){this.P=t,this.T=e,this.I=i,this.type="FirstParty",this.user=fn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class NM{constructor(t,e,i){this.P=t,this.T=e,this.I=i}getToken(){return Promise.resolve(new OM(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable((()=>e(fn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class qT{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kM{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,qn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){Jt(this.o===void 0,3512);const i=o=>{o.error!=null&&dt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,dt("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?e(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable((()=>i(o)))};const r=o=>{dt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>r(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):dt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new qT(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((e=>e?(Jt(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new qT(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PM(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=PM(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<e&&(i+=t.charAt(r[o]%62))}return i}}function Bt(n,t){return n<t?-1:n>t?1:0}function Fp(n,t){const e=Math.min(n.length,t.length);for(let i=0;i<e;i++){const r=n.charAt(i),o=t.charAt(i);if(r!==o)return fp(r)===fp(o)?Bt(r,o):fp(r)?1:-1}return Bt(n.length,t.length)}const VM=55296,LM=57343;function fp(n){const t=n.charCodeAt(0);return t>=VM&&t<=LM}function al(n,t,e){return n.length===t.length&&n.every(((i,r)=>e(i,t[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT="__name__";class Ji{constructor(t,e,i){e===void 0?e=0:e>t.length&&At(637,{offset:e,range:t.length}),i===void 0?i=t.length-e:i>t.length-e&&At(1746,{length:i,range:t.length-e}),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return Ji.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Ji?t.forEach((i=>{e.push(i)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let r=0;r<i;r++){const o=Ji.compareSegments(t.get(r),e.get(r));if(o!==0)return o}return Bt(t.length,e.length)}static compareSegments(t,e){const i=Ji.isNumericId(t),r=Ji.isNumericId(e);return i&&!r?-1:!i&&r?1:i&&r?Ji.extractNumericId(t).compare(Ji.extractNumericId(e)):Fp(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Nr.fromString(t.substring(4,t.length-2))}}class ce extends Ji{construct(t,e,i){return new ce(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new ht(it.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter((r=>r.length>0)))}return new ce(e)}static emptyPath(){return new ce([])}}const zM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class on extends Ji{construct(t,e,i){return new on(t,e,i)}static isValidIdentifier(t){return zM.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),on.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===GT}static keyField(){return new on([GT])}static fromServerFormat(t){const e=[];let i="",r=0;const o=()=>{if(i.length===0)throw new ht(it.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let l=!1;for(;r<t.length;){const u=t[r];if(u==="\\"){if(r+1===t.length)throw new ht(it.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const f=t[r+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new ht(it.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=f,r+=2}else u==="`"?(l=!l,r++):u!=="."||l?(i+=u,r++):(o(),r++)}if(o(),l)throw new ht(it.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new on(e)}static emptyPath(){return new on([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(t){this.path=t}static fromPath(t){return new _t(ce.fromString(t))}static fromName(t){return new _t(ce.fromString(t).popFirst(5))}static empty(){return new _t(ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ce.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return ce.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new _t(new ce(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gA(n,t,e){if(!e)throw new ht(it.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function jM(n,t,e,i){if(t===!0&&i===!0)throw new ht(it.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function YT(n){if(!_t.isDocumentKey(n))throw new ht(it.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function KT(n){if(_t.isDocumentKey(n))throw new ht(it.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function mA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Id(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=(function(i){return i.constructor?i.constructor.name:null})(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":At(12329,{type:typeof n})}function Si(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new ht(it.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=Id(n);throw new ht(it.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(n,t){const e={typeString:n};return t&&(e.value=t),e}function Au(n,t){if(!mA(n))throw new ht(it.INVALID_ARGUMENT,"JSON must be an object");let e;for(const i in t)if(t[i]){const r=t[i].typeString,o="value"in t[i]?{value:t[i].value}:void 0;if(!(i in n)){e=`JSON missing required field: '${i}'`;break}const l=n[i];if(r&&typeof l!==r){e=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&l!==o.value){e=`Expected '${i}' field to equal '${o.value}'`;break}}if(e)throw new ht(it.INVALID_ARGUMENT,e);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT=-62135596800,XT=1e6;class fe{static now(){return fe.fromMillis(Date.now())}static fromDate(t){return fe.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor((t-1e3*e)*XT);return new fe(e,i)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ht(it.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ht(it.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<WT)throw new ht(it.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ht(it.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/XT}_compareTo(t){return this.seconds===t.seconds?Bt(this.nanoseconds,t.nanoseconds):Bt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:fe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Au(t,fe._jsonSchema))return new fe(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-WT;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}fe._jsonSchemaVersion="firestore/timestamp/1.0",fe._jsonSchema={type:Ue("string",fe._jsonSchemaVersion),seconds:Ue("number"),nanoseconds:Ue("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{static fromTimestamp(t){return new wt(t)}static min(){return new wt(new fe(0,0))}static max(){return new wt(new fe(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ru=-1;function UM(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=wt.fromTimestamp(i===1e9?new fe(e+1,0):new fe(e,i));return new Lr(r,_t.empty(),t)}function BM(n){return new Lr(n.readTime,n.key,ru)}class Lr{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new Lr(wt.min(),_t.empty(),ru)}static max(){return new Lr(wt.max(),_t.empty(),ru)}}function FM(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=_t.comparator(n.documentKey,t.documentKey),e!==0?e:Bt(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _l(n){if(n.code!==it.FAILED_PRECONDITION||n.message!==HM)throw n;dt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&At(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new rt(((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(e,o).next(i,r)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof rt?e:rt.resolve(e)}catch(e){return rt.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):rt.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):rt.reject(e)}static resolve(t){return new rt(((e,i)=>{e(t)}))}static reject(t){return new rt(((e,i)=>{i(t)}))}static waitFor(t){return new rt(((e,i)=>{let r=0,o=0,l=!1;t.forEach((u=>{++r,u.next((()=>{++o,l&&o===r&&e()}),(f=>i(f)))})),l=!0,o===r&&e()}))}static or(t){let e=rt.resolve(!1);for(const i of t)e=e.next((r=>r?rt.resolve(r):i()));return e}static forEach(t,e){const i=[];return t.forEach(((r,o)=>{i.push(e.call(this,r,o))})),this.waitFor(i)}static mapArray(t,e){return new rt(((i,r)=>{const o=t.length,l=new Array(o);let u=0;for(let f=0;f<o;f++){const d=f;e(t[d]).next((p=>{l[d]=p,++u,u===o&&i(l)}),(p=>r(p)))}}))}static doWhile(t,e){return new rt(((i,r)=>{const o=()=>{t()===!0?e().next((()=>{o()}),r):i()};o()}))}}function GM(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function bl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>e.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Dd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy=-1;function Md(n){return n==null}function sd(n){return n===0&&1/n==-1/0}function YM(n){return typeof n=="number"&&Number.isInteger(n)&&!sd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA="";function KM(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=QT(t)),t=WM(n.get(e),t);return QT(t)}function WM(n,t){let e=t;const i=n.length;for(let r=0;r<i;r++){const o=n.charAt(r);switch(o){case"\0":e+="";break;case pA:e+="";break;default:e+=o}}return e}function QT(n){return n+pA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Xr(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function yA(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(t,e){this.comparator=t,this.root=e||an.EMPTY}insert(t,e){return new be(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,an.BLACK,null,null))}remove(t){return new be(this.comparator,this.root.remove(t,this.comparator).copy(null,null,an.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(r===0)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,i)=>(t(e,i),!1)))}toString(){const t=[];return this.inorderTraversal(((e,i)=>(t.push(`${e}:${i}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new ff(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new ff(this.root,t,this.comparator,!1)}getReverseIterator(){return new ff(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new ff(this.root,t,this.comparator,!0)}}class ff{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=e?i(t.key,e):1,e&&r&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class an{constructor(t,e,i,r,o){this.key=t,this.value=e,this.color=i??an.RED,this.left=r??an.EMPTY,this.right=o??an.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,o){return new an(t??this.key,e??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this;const o=i(t,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(t,e,i),null):o===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return an.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return an.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,an.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,an.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw At(43730,{key:this.key,value:this.value});if(this.right.isRed())throw At(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw At(27949);return t+(this.isRed()?0:1)}}an.EMPTY=null,an.RED=!0,an.BLACK=!1;an.EMPTY=new class{constructor(){this.size=0}get key(){throw At(57766)}get value(){throw At(16141)}get color(){throw At(16727)}get left(){throw At(29726)}get right(){throw At(36894)}copy(t,e,i,r,o){return this}insert(t,e,i){return new an(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(t){this.comparator=t,this.data=new be(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,i)=>(t(e),!1)))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new JT(this.data.getIterator())}getIteratorFrom(t){return new JT(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((i=>{e=e.add(i)})),e}isEqual(t){if(!(t instanceof Ke)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new Ke(this.comparator);return e.data=t,e}}class JT{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(t){this.fields=t,t.sort(on.comparator)}static empty(){return new Gn([])}unionWith(t){let e=new Ke(on.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new Gn(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return al(this.fields,t.fields,((e,i)=>e.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(t){this.binaryString=t}static fromBase64String(t){const e=(function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new _A("Invalid base64 string: "+o):o}})(t);return new ln(e)}static fromUint8Array(t){const e=(function(r){let o="";for(let l=0;l<r.length;++l)o+=String.fromCharCode(r[l]);return o})(t);return new ln(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(e){return btoa(e)})(this.binaryString)}toUint8Array(){return(function(e){const i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Bt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ln.EMPTY_BYTE_STRING=new ln("");const XM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zr(n){if(Jt(!!n,39018),typeof n=="string"){let t=0;const e=XM.exec(n);if(Jt(!!e,46558,{timestamp:n}),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Ce(n.seconds),nanos:Ce(n.nanos)}}function Ce(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function jr(n){return typeof n=="string"?ln.fromBase64String(n):ln.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA="server_timestamp",vA="__type__",TA="__previous_value__",EA="__local_write_time__";function By(n){var e,i;return((i=(((e=n==null?void 0:n.mapValue)==null?void 0:e.fields)||{})[vA])==null?void 0:i.stringValue)===bA}function Od(n){const t=n.mapValue.fields[TA];return By(t)?Od(t):t}function au(n){const t=zr(n.mapValue.fields[EA].timestampValue);return new fe(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(t,e,i,r,o,l,u,f,d,p){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=f,this.useFetchStreams=d,this.isUsingEmulator=p}}const rd="(default)";class ou{constructor(t,e){this.projectId=t,this.database=e||rd}static empty(){return new ou("","")}get isDefaultDatabase(){return this.database===rd}isEqual(t){return t instanceof ou&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA="__type__",$M="__max__",df={mapValue:{}},SA="__vector__",ad="value";function Ur(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?By(n)?4:ZM(n)?9007199254740991:JM(n)?10:11:At(28295,{value:n})}function rs(n,t){if(n===t)return!0;const e=Ur(n);if(e!==Ur(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return au(n).isEqual(au(t));case 3:return(function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const l=zr(r.timestampValue),u=zr(o.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos})(n,t);case 5:return n.stringValue===t.stringValue;case 6:return(function(r,o){return jr(r.bytesValue).isEqual(jr(o.bytesValue))})(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return(function(r,o){return Ce(r.geoPointValue.latitude)===Ce(o.geoPointValue.latitude)&&Ce(r.geoPointValue.longitude)===Ce(o.geoPointValue.longitude)})(n,t);case 2:return(function(r,o){if("integerValue"in r&&"integerValue"in o)return Ce(r.integerValue)===Ce(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const l=Ce(r.doubleValue),u=Ce(o.doubleValue);return l===u?sd(l)===sd(u):isNaN(l)&&isNaN(u)}return!1})(n,t);case 9:return al(n.arrayValue.values||[],t.arrayValue.values||[],rs);case 10:case 11:return(function(r,o){const l=r.mapValue.fields||{},u=o.mapValue.fields||{};if($T(l)!==$T(u))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(u[f]===void 0||!rs(l[f],u[f])))return!1;return!0})(n,t);default:return At(52216,{left:n})}}function lu(n,t){return(n.values||[]).find((e=>rs(e,t)))!==void 0}function ol(n,t){if(n===t)return 0;const e=Ur(n),i=Ur(t);if(e!==i)return Bt(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return Bt(n.booleanValue,t.booleanValue);case 2:return(function(o,l){const u=Ce(o.integerValue||o.doubleValue),f=Ce(l.integerValue||l.doubleValue);return u<f?-1:u>f?1:u===f?0:isNaN(u)?isNaN(f)?0:-1:1})(n,t);case 3:return ZT(n.timestampValue,t.timestampValue);case 4:return ZT(au(n),au(t));case 5:return Fp(n.stringValue,t.stringValue);case 6:return(function(o,l){const u=jr(o),f=jr(l);return u.compareTo(f)})(n.bytesValue,t.bytesValue);case 7:return(function(o,l){const u=o.split("/"),f=l.split("/");for(let d=0;d<u.length&&d<f.length;d++){const p=Bt(u[d],f[d]);if(p!==0)return p}return Bt(u.length,f.length)})(n.referenceValue,t.referenceValue);case 8:return(function(o,l){const u=Bt(Ce(o.latitude),Ce(l.latitude));return u!==0?u:Bt(Ce(o.longitude),Ce(l.longitude))})(n.geoPointValue,t.geoPointValue);case 9:return tE(n.arrayValue,t.arrayValue);case 10:return(function(o,l){var b,E,S,w;const u=o.fields||{},f=l.fields||{},d=(b=u[ad])==null?void 0:b.arrayValue,p=(E=f[ad])==null?void 0:E.arrayValue,_=Bt(((S=d==null?void 0:d.values)==null?void 0:S.length)||0,((w=p==null?void 0:p.values)==null?void 0:w.length)||0);return _!==0?_:tE(d,p)})(n.mapValue,t.mapValue);case 11:return(function(o,l){if(o===df.mapValue&&l===df.mapValue)return 0;if(o===df.mapValue)return 1;if(l===df.mapValue)return-1;const u=o.fields||{},f=Object.keys(u),d=l.fields||{},p=Object.keys(d);f.sort(),p.sort();for(let _=0;_<f.length&&_<p.length;++_){const b=Fp(f[_],p[_]);if(b!==0)return b;const E=ol(u[f[_]],d[p[_]]);if(E!==0)return E}return Bt(f.length,p.length)})(n.mapValue,t.mapValue);default:throw At(23264,{he:e})}}function ZT(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return Bt(n,t);const e=zr(n),i=zr(t),r=Bt(e.seconds,i.seconds);return r!==0?r:Bt(e.nanos,i.nanos)}function tE(n,t){const e=n.values||[],i=t.values||[];for(let r=0;r<e.length&&r<i.length;++r){const o=ol(e[r],i[r]);if(o)return o}return Bt(e.length,i.length)}function ll(n){return Hp(n)}function Hp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(e){const i=zr(e);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(e){return jr(e).toBase64()})(n.bytesValue):"referenceValue"in n?(function(e){return _t.fromName(e).toString()})(n.referenceValue):"geoPointValue"in n?(function(e){return`geo(${e.latitude},${e.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(e){let i="[",r=!0;for(const o of e.values||[])r?r=!1:i+=",",i+=Hp(o);return i+"]"})(n.arrayValue):"mapValue"in n?(function(e){const i=Object.keys(e.fields||{}).sort();let r="{",o=!0;for(const l of i)o?o=!1:r+=",",r+=`${l}:${Hp(e.fields[l])}`;return r+"}"})(n.mapValue):At(61005,{value:n})}function Vf(n){switch(Ur(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Od(n);return t?16+Vf(t):16;case 5:return 2*n.stringValue.length;case 6:return jr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((r,o)=>r+Vf(o)),0)})(n.arrayValue);case 10:case 11:return(function(i){let r=0;return Xr(i.fields,((o,l)=>{r+=o.length+Vf(l)})),r})(n.mapValue);default:throw At(13486,{value:n})}}function eE(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function qp(n){return!!n&&"integerValue"in n}function Fy(n){return!!n&&"arrayValue"in n}function nE(n){return!!n&&"nullValue"in n}function iE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Lf(n){return!!n&&"mapValue"in n}function JM(n){var e,i;return((i=(((e=n==null?void 0:n.mapValue)==null?void 0:e.fields)||{})[xA])==null?void 0:i.stringValue)===SA}function Kc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const t={mapValue:{fields:{}}};return Xr(n.mapValue.fields,((e,i)=>t.mapValue.fields[e]=Kc(i))),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Kc(n.arrayValue.values[e]);return t}return{...n}}function ZM(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===$M}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(t){this.value=t}static empty(){return new Mn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!Lf(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Kc(e)}setAll(t){let e=on.emptyPath(),i={},r=[];t.forEach(((l,u)=>{if(!e.isImmediateParentOf(u)){const f=this.getFieldsMap(e);this.applyChanges(f,i,r),i={},r=[],e=u.popLast()}l?i[u.lastSegment()]=Kc(l):r.push(u.lastSegment())}));const o=this.getFieldsMap(e);this.applyChanges(o,i,r)}delete(t){const e=this.field(t.popLast());Lf(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return rs(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];Lf(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){Xr(e,((r,o)=>t[r]=o));for(const r of i)delete t[r]}clone(){return new Mn(Kc(this.value))}}function AA(n){const t=[];return Xr(n.fields,((e,i)=>{const r=new on([e]);if(Lf(i)){const o=AA(i.mapValue).fields;if(o.length===0)t.push(r);else for(const l of o)t.push(r.child(l))}else t.push(r)})),new Gn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(t,e,i,r,o,l,u){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.createTime=o,this.data=l,this.documentState=u}static newInvalidDocument(t){return new gn(t,0,wt.min(),wt.min(),wt.min(),Mn.empty(),0)}static newFoundDocument(t,e,i,r){return new gn(t,1,e,wt.min(),i,r,0)}static newNoDocument(t,e){return new gn(t,2,e,wt.min(),wt.min(),Mn.empty(),0)}static newUnknownDocument(t,e){return new gn(t,3,e,wt.min(),wt.min(),Mn.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(wt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Mn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Mn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=wt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof gn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new gn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(t,e){this.position=t,this.inclusive=e}}function sE(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){const o=t[r],l=n.position[r];if(o.field.isKeyField()?i=_t.comparator(_t.fromName(l.referenceValue),e.key):i=ol(l,e.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function rE(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!rs(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(t,e="asc"){this.field=t,this.dir=e}}function tO(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{}class je extends wA{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new nO(t,e,i):e==="array-contains"?new rO(t,i):e==="in"?new aO(t,i):e==="not-in"?new oO(t,i):e==="array-contains-any"?new lO(t,i):new je(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new iO(t,i):new sO(t,i)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(ol(e,this.value)):e!==null&&Ur(this.value)===Ur(e)&&this.matchesComparison(ol(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return At(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class wi extends wA{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new wi(t,e)}matches(t){return CA(this)?this.filters.find((e=>!e.matches(t)))===void 0:this.filters.find((e=>e.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function CA(n){return n.op==="and"}function RA(n){return eO(n)&&CA(n)}function eO(n){for(const t of n.filters)if(t instanceof wi)return!1;return!0}function Gp(n){if(n instanceof je)return n.field.canonicalString()+n.op.toString()+ll(n.value);if(RA(n))return n.filters.map((t=>Gp(t))).join(",");{const t=n.filters.map((e=>Gp(e))).join(",");return`${n.op}(${t})`}}function IA(n,t){return n instanceof je?(function(i,r){return r instanceof je&&i.op===r.op&&i.field.isEqual(r.field)&&rs(i.value,r.value)})(n,t):n instanceof wi?(function(i,r){return r instanceof wi&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce(((o,l,u)=>o&&IA(l,r.filters[u])),!0):!1})(n,t):void At(19439)}function DA(n){return n instanceof je?(function(e){return`${e.field.canonicalString()} ${e.op} ${ll(e.value)}`})(n):n instanceof wi?(function(e){return e.op.toString()+" {"+e.getFilters().map(DA).join(" ,")+"}"})(n):"Filter"}class nO extends je{constructor(t,e,i){super(t,e,i),this.key=_t.fromName(i.referenceValue)}matches(t){const e=_t.comparator(t.key,this.key);return this.matchesComparison(e)}}class iO extends je{constructor(t,e){super(t,"in",e),this.keys=MA("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class sO extends je{constructor(t,e){super(t,"not-in",e),this.keys=MA("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function MA(n,t){var e;return(((e=t.arrayValue)==null?void 0:e.values)||[]).map((i=>_t.fromName(i.referenceValue)))}class rO extends je{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Fy(e)&&lu(e.arrayValue,this.value)}}class aO extends je{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&lu(this.value.arrayValue,e)}}class oO extends je{constructor(t,e){super(t,"not-in",e)}matches(t){if(lu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!lu(this.value.arrayValue,e)}}class lO extends je{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Fy(e)||!e.arrayValue.values)&&e.arrayValue.values.some((i=>lu(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(t,e=null,i=[],r=[],o=null,l=null,u=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=l,this.endAt=u,this.Te=null}}function aE(n,t=null,e=[],i=[],r=null,o=null,l=null){return new cO(n,t,e,i,r,o,l)}function Hy(n){const t=It(n);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((i=>Gp(i))).join(","),e+="|ob:",e+=t.orderBy.map((i=>(function(o){return o.field.canonicalString()+o.dir})(i))).join(","),Md(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((i=>ll(i))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((i=>ll(i))).join(",")),t.Te=e}return t.Te}function qy(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!tO(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!IA(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!rE(n.startAt,t.startAt)&&rE(n.endAt,t.endAt)}function Yp(n){return _t.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(t,e=null,i=[],r=[],o=null,l="F",u=null,f=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=l,this.startAt=u,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function uO(n,t,e,i,r,o,l,u){return new wu(n,t,e,i,r,o,l,u)}function Gy(n){return new wu(n)}function oE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function OA(n){return n.collectionGroup!==null}function Wc(n){const t=It(n);if(t.Ie===null){t.Ie=[];const e=new Set;for(const o of t.explicitOrderBy)t.Ie.push(o),e.add(o.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(l){let u=new Ke(on.comparator);return l.filters.forEach((f=>{f.getFlattenedFilters().forEach((d=>{d.isInequality()&&(u=u.add(d.field))}))})),u})(t).forEach((o=>{e.has(o.canonicalString())||o.isKeyField()||t.Ie.push(new ld(o,i))})),e.has(on.keyField().canonicalString())||t.Ie.push(new ld(on.keyField(),i))}return t.Ie}function ts(n){const t=It(n);return t.Ee||(t.Ee=hO(t,Wc(n))),t.Ee}function hO(n,t){if(n.limitType==="F")return aE(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map((r=>{const o=r.dir==="desc"?"asc":"desc";return new ld(r.field,o)}));const e=n.endAt?new od(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new od(n.startAt.position,n.startAt.inclusive):null;return aE(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}function Kp(n,t){const e=n.filters.concat([t]);return new wu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function Wp(n,t,e){return new wu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function Nd(n,t){return qy(ts(n),ts(t))&&n.limitType===t.limitType}function NA(n){return`${Hy(ts(n))}|lt:${n.limitType}`}function Qo(n){return`Query(target=${(function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map((r=>DA(r))).join(", ")}]`),Md(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map((r=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(r))).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map((r=>ll(r))).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map((r=>ll(r))).join(",")),`Target(${i})`})(ts(n))}; limitType=${n.limitType})`}function kd(n,t){return t.isFoundDocument()&&(function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):_t.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)})(n,t)&&(function(i,r){for(const o of Wc(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0})(n,t)&&(function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0})(n,t)&&(function(i,r){return!(i.startAt&&!(function(l,u,f){const d=sE(l,u,f);return l.inclusive?d<=0:d<0})(i.startAt,Wc(i),r)||i.endAt&&!(function(l,u,f){const d=sE(l,u,f);return l.inclusive?d>=0:d>0})(i.endAt,Wc(i),r))})(n,t)}function fO(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function kA(n){return(t,e)=>{let i=!1;for(const r of Wc(n)){const o=dO(r,t,e);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function dO(n,t,e){const i=n.field.isKeyField()?_t.comparator(t.key,e.key):(function(o,l,u){const f=l.data.field(o),d=u.data.field(o);return f!==null&&d!==null?ol(f,d):At(42886)})(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return At(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,t))return o}}has(t){return this.get(t)!==void 0}set(t,e){const i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return void(r[o]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Xr(this.inner,((e,i)=>{for(const[r,o]of i)t(r,o)}))}isEmpty(){return yA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gO=new be(_t.comparator);function js(){return gO}const PA=new be(_t.comparator);function Vc(...n){let t=PA;for(const e of n)t=t.insert(e.key,e);return t}function VA(n){let t=PA;return n.forEach(((e,i)=>t=t.insert(e,i.overlayedDocument))),t}function La(){return Xc()}function LA(){return Xc()}function Xc(){return new Ja((n=>n.toString()),((n,t)=>n.isEqual(t)))}const mO=new be(_t.comparator),pO=new Ke(_t.comparator);function Ft(...n){let t=pO;for(const e of n)t=t.add(e);return t}const yO=new Ke(Bt);function _O(){return yO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yy(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sd(t)?"-0":t}}function zA(n){return{integerValue:""+n}}function bO(n,t){return YM(t)?zA(t):Yy(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(){this._=void 0}}function vO(n,t,e){return n instanceof cd?(function(r,o){const l={fields:{[vA]:{stringValue:bA},[EA]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&By(o)&&(o=Od(o)),o&&(l.fields[TA]=o),{mapValue:l}})(e,t):n instanceof cu?UA(n,t):n instanceof uu?BA(n,t):(function(r,o){const l=jA(r,o),u=lE(l)+lE(r.Ae);return qp(l)&&qp(r.Ae)?zA(u):Yy(r.serializer,u)})(n,t)}function TO(n,t,e){return n instanceof cu?UA(n,t):n instanceof uu?BA(n,t):e}function jA(n,t){return n instanceof ud?(function(i){return qp(i)||(function(o){return!!o&&"doubleValue"in o})(i)})(t)?t:{integerValue:0}:null}class cd extends Pd{}class cu extends Pd{constructor(t){super(),this.elements=t}}function UA(n,t){const e=FA(t);for(const i of n.elements)e.some((r=>rs(r,i)))||e.push(i);return{arrayValue:{values:e}}}class uu extends Pd{constructor(t){super(),this.elements=t}}function BA(n,t){let e=FA(t);for(const i of n.elements)e=e.filter((r=>!rs(r,i)));return{arrayValue:{values:e}}}class ud extends Pd{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function lE(n){return Ce(n.integerValue||n.doubleValue)}function FA(n){return Fy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function EO(n,t){return n.field.isEqual(t.field)&&(function(i,r){return i instanceof cu&&r instanceof cu||i instanceof uu&&r instanceof uu?al(i.elements,r.elements,rs):i instanceof ud&&r instanceof ud?rs(i.Ae,r.Ae):i instanceof cd&&r instanceof cd})(n.transform,t.transform)}class xO{constructor(t,e){this.version=t,this.transformResults=e}}class Nn{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Nn}static exists(t){return new Nn(void 0,t)}static updateTime(t){return new Nn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function zf(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class Vd{}function HA(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new Ld(n.key,Nn.none()):new Cu(n.key,n.data,Nn.none());{const e=n.data,i=Mn.empty();let r=new Ke(on.comparator);for(let o of t.fields)if(!r.has(o)){let l=e.field(o);l===null&&o.length>1&&(o=o.popLast(),l=e.field(o)),l===null?i.delete(o):i.set(o,l),r=r.add(o)}return new Qr(n.key,i,new Gn(r.toArray()),Nn.none())}}function SO(n,t,e){n instanceof Cu?(function(r,o,l){const u=r.value.clone(),f=uE(r.fieldTransforms,o,l.transformResults);u.setAll(f),o.convertToFoundDocument(l.version,u).setHasCommittedMutations()})(n,t,e):n instanceof Qr?(function(r,o,l){if(!zf(r.precondition,o))return void o.convertToUnknownDocument(l.version);const u=uE(r.fieldTransforms,o,l.transformResults),f=o.data;f.setAll(qA(r)),f.setAll(u),o.convertToFoundDocument(l.version,f).setHasCommittedMutations()})(n,t,e):(function(r,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()})(0,t,e)}function Qc(n,t,e,i){return n instanceof Cu?(function(o,l,u,f){if(!zf(o.precondition,l))return u;const d=o.value.clone(),p=hE(o.fieldTransforms,f,l);return d.setAll(p),l.convertToFoundDocument(l.version,d).setHasLocalMutations(),null})(n,t,e,i):n instanceof Qr?(function(o,l,u,f){if(!zf(o.precondition,l))return u;const d=hE(o.fieldTransforms,f,l),p=l.data;return p.setAll(qA(o)),p.setAll(d),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((_=>_.field)))})(n,t,e,i):(function(o,l,u){return zf(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u})(n,t,e)}function AO(n,t){let e=null;for(const i of n.fieldTransforms){const r=t.data.field(i.field),o=jA(i.transform,r||null);o!=null&&(e===null&&(e=Mn.empty()),e.set(i.field,o))}return e||null}function cE(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&al(i,r,((o,l)=>EO(o,l)))})(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class Cu extends Vd{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Qr extends Vd{constructor(t,e,i,r,o=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function qA(n){const t=new Map;return n.fieldMask.fields.forEach((e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}})),t}function uE(n,t,e){const i=new Map;Jt(n.length===e.length,32656,{Re:e.length,Ve:n.length});for(let r=0;r<e.length;r++){const o=n[r],l=o.transform,u=t.data.field(o.field);i.set(o.field,TO(l,u,e[r]))}return i}function hE(n,t,e){const i=new Map;for(const r of n){const o=r.transform,l=e.data.field(r.field);i.set(r.field,vO(o,l,t))}return i}class Ld extends Vd{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wO extends Vd{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(t.key)&&SO(o,t,i[r])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=Qc(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=Qc(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=LA();return this.mutations.forEach((r=>{const o=t.get(r.key),l=o.overlayedDocument;let u=this.applyToLocalView(l,o.mutatedFields);u=e.has(r.key)?null:u;const f=HA(l,u);f!==null&&i.set(r.key,f),l.isValidDocument()||l.convertToNoDocument(wt.min())})),i}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Ft())}isEqual(t){return this.batchId===t.batchId&&al(this.mutations,t.mutations,((e,i)=>cE(e,i)))&&al(this.baseMutations,t.baseMutations,((e,i)=>cE(e,i)))}}class Ky{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){Jt(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let r=(function(){return mO})();const o=t.mutations;for(let l=0;l<o.length;l++)r=r.insert(o[l].key,i[l].version);return new Ky(t,e,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze,Yt;function DO(n){switch(n){case it.OK:return At(64938);case it.CANCELLED:case it.UNKNOWN:case it.DEADLINE_EXCEEDED:case it.RESOURCE_EXHAUSTED:case it.INTERNAL:case it.UNAVAILABLE:case it.UNAUTHENTICATED:return!1;case it.INVALID_ARGUMENT:case it.NOT_FOUND:case it.ALREADY_EXISTS:case it.PERMISSION_DENIED:case it.FAILED_PRECONDITION:case it.ABORTED:case it.OUT_OF_RANGE:case it.UNIMPLEMENTED:case it.DATA_LOSS:return!0;default:return At(15467,{code:n})}}function GA(n){if(n===void 0)return zs("GRPC error has no .code"),it.UNKNOWN;switch(n){case ze.OK:return it.OK;case ze.CANCELLED:return it.CANCELLED;case ze.UNKNOWN:return it.UNKNOWN;case ze.DEADLINE_EXCEEDED:return it.DEADLINE_EXCEEDED;case ze.RESOURCE_EXHAUSTED:return it.RESOURCE_EXHAUSTED;case ze.INTERNAL:return it.INTERNAL;case ze.UNAVAILABLE:return it.UNAVAILABLE;case ze.UNAUTHENTICATED:return it.UNAUTHENTICATED;case ze.INVALID_ARGUMENT:return it.INVALID_ARGUMENT;case ze.NOT_FOUND:return it.NOT_FOUND;case ze.ALREADY_EXISTS:return it.ALREADY_EXISTS;case ze.PERMISSION_DENIED:return it.PERMISSION_DENIED;case ze.FAILED_PRECONDITION:return it.FAILED_PRECONDITION;case ze.ABORTED:return it.ABORTED;case ze.OUT_OF_RANGE:return it.OUT_OF_RANGE;case ze.UNIMPLEMENTED:return it.UNIMPLEMENTED;case ze.DATA_LOSS:return it.DATA_LOSS;default:return At(39323,{code:n})}}(Yt=ze||(ze={}))[Yt.OK=0]="OK",Yt[Yt.CANCELLED=1]="CANCELLED",Yt[Yt.UNKNOWN=2]="UNKNOWN",Yt[Yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Yt[Yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Yt[Yt.NOT_FOUND=5]="NOT_FOUND",Yt[Yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Yt[Yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Yt[Yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Yt[Yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Yt[Yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Yt[Yt.ABORTED=10]="ABORTED",Yt[Yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Yt[Yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Yt[Yt.INTERNAL=13]="INTERNAL",Yt[Yt.UNAVAILABLE=14]="UNAVAILABLE",Yt[Yt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OO=new Nr([4294967295,4294967295],0);function fE(n){const t=MO().encode(n),e=new aA;return e.update(t),new Uint8Array(e.digest())}function dE(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new Nr([e,i],0),new Nr([r,o],0)]}class Wy{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new Lc(`Invalid padding: ${e}`);if(i<0)throw new Lc(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new Lc(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new Lc(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=Nr.fromNumber(this.ge)}ye(t,e,i){let r=t.add(e.multiply(Nr.fromNumber(i)));return r.compare(OO)===1&&(r=new Nr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const e=fE(t),[i,r]=dE(e);for(let o=0;o<this.hashCount;o++){const l=this.ye(i,r,o);if(!this.we(l))return!1}return!0}static create(t,e,i){const r=t%8==0?0:8-t%8,o=new Uint8Array(Math.ceil(t/8)),l=new Wy(o,r,e);return i.forEach((u=>l.insert(u))),l}insert(t){if(this.ge===0)return;const e=fE(t),[i,r]=dE(e);for(let o=0;o<this.hashCount;o++){const l=this.ye(i,r,o);this.Se(l)}}Se(t){const e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}}class Lc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(t,e,i,r,o){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const r=new Map;return r.set(t,Ru.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new zd(wt.min(),r,new be(Bt),js(),Ft())}}class Ru{constructor(t,e,i,r,o){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new Ru(i,e,Ft(),Ft(),Ft())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(t,e,i,r){this.be=t,this.removedTargetIds=e,this.key=i,this.De=r}}class YA{constructor(t,e){this.targetId=t,this.Ce=e}}class KA{constructor(t,e,i=ln.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}}class gE{constructor(){this.ve=0,this.Fe=mE(),this.Me=ln.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Ft(),e=Ft(),i=Ft();return this.Fe.forEach(((r,o)=>{switch(o){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:At(38017,{changeType:o})}})),new Ru(this.Me,this.xe,t,e,i)}qe(){this.Oe=!1,this.Fe=mE()}Qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Jt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class NO{constructor(t){this.Ge=t,this.ze=new Map,this.je=js(),this.Je=gf(),this.He=gf(),this.Ye=new be(Bt)}Ze(t){for(const e of t.be)t.De&&t.De.isFoundDocument()?this.Xe(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,(e=>{const i=this.nt(e);switch(t.state){case 0:this.rt(e)&&i.Le(t.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(t.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(i.We(),i.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),i.Le(t.resumeToken));break;default:At(56790,{state:t.state})}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach(((i,r)=>{this.rt(r)&&e(r)}))}st(t){const e=t.targetId,i=t.Ce.count,r=this.ot(e);if(r){const o=r.target;if(Yp(o))if(i===0){const l=new _t(o.path);this.et(e,l,gn.newNoDocument(l,wt.min()))}else Jt(i===1,20013,{expectedCount:i});else{const l=this._t(e);if(l!==i){const u=this.ut(t),f=u?this.ct(u,t,l):1;if(f!==0){this.it(e);const d=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(e,d)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=e;let l,u;try{l=jr(i).toUint8Array()}catch(f){if(f instanceof _A)return rl("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{u=new Wy(l,r,o)}catch(f){return rl(f instanceof Lc?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return u.ge===0?null:u}ct(t,e,i){return e.Ce.count===i-this.Pt(t,e.targetId)?0:2}Pt(t,e){const i=this.Ge.getRemoteKeysForTarget(e);let r=0;return i.forEach((o=>{const l=this.Ge.ht(),u=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;t.mightContain(u)||(this.et(e,o,null),r++)})),r}Tt(t){const e=new Map;this.ze.forEach(((o,l)=>{const u=this.ot(l);if(u){if(o.current&&Yp(u.target)){const f=new _t(u.target.path);this.It(f).has(l)||this.Et(l,f)||this.et(l,f,gn.newNoDocument(f,t))}o.Be&&(e.set(l,o.ke()),o.qe())}}));let i=Ft();this.He.forEach(((o,l)=>{let u=!0;l.forEachWhile((f=>{const d=this.ot(f);return!d||d.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(i=i.add(o))})),this.je.forEach(((o,l)=>l.setReadTime(t)));const r=new zd(t,e,this.Ye,this.je,i);return this.je=js(),this.Je=gf(),this.He=gf(),this.Ye=new be(Bt),r}Xe(t,e){if(!this.rt(t))return;const i=this.Et(t,e.key)?2:0;this.nt(t).Qe(e.key,i),this.je=this.je.insert(e.key,e),this.Je=this.Je.insert(e.key,this.It(e.key).add(t)),this.He=this.He.insert(e.key,this.dt(e.key).add(t))}et(t,e,i){if(!this.rt(t))return;const r=this.nt(t);this.Et(t,e)?r.Qe(e,1):r.$e(e),this.He=this.He.insert(e,this.dt(e).delete(t)),this.He=this.He.insert(e,this.dt(e).add(t)),i&&(this.je=this.je.insert(e,i))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let e=this.ze.get(t);return e||(e=new gE,this.ze.set(t,e)),e}dt(t){let e=this.He.get(t);return e||(e=new Ke(Bt),this.He=this.He.insert(t,e)),e}It(t){let e=this.Je.get(t);return e||(e=new Ke(Bt),this.Je=this.Je.insert(t,e)),e}rt(t){const e=this.ot(t)!==null;return e||dt("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new gE),this.Ge.getRemoteKeysForTarget(t).forEach((e=>{this.et(t,e,null)}))}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function gf(){return new be(_t.comparator)}function mE(){return new be(_t.comparator)}const kO={asc:"ASCENDING",desc:"DESCENDING"},PO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},VO={and:"AND",or:"OR"};class LO{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Xp(n,t){return n.useProto3Json||Md(t)?t:{value:t}}function hd(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function WA(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function zO(n,t){return hd(n,t.toTimestamp())}function es(n){return Jt(!!n,49232),wt.fromTimestamp((function(e){const i=zr(e);return new fe(i.seconds,i.nanos)})(n))}function Xy(n,t){return Qp(n,t).canonicalString()}function Qp(n,t){const e=(function(r){return new ce(["projects",r.projectId,"databases",r.database])})(n).child("documents");return t===void 0?e:e.child(t)}function XA(n){const t=ce.fromString(n);return Jt(t1(t),10190,{key:t.toString()}),t}function $p(n,t){return Xy(n.databaseId,t.path)}function dp(n,t){const e=XA(t);if(e.get(1)!==n.databaseId.projectId)throw new ht(it.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new ht(it.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new _t($A(e))}function QA(n,t){return Xy(n.databaseId,t)}function jO(n){const t=XA(n);return t.length===4?ce.emptyPath():$A(t)}function Jp(n){return new ce(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function $A(n){return Jt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function pE(n,t,e){return{name:$p(n,t),fields:e.value.mapValue.fields}}function UO(n,t){let e;if("targetChange"in t){t.targetChange;const i=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:At(39313,{state:d})})(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],o=(function(d,p){return d.useProto3Json?(Jt(p===void 0||typeof p=="string",58123),ln.fromBase64String(p||"")):(Jt(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),ln.fromUint8Array(p||new Uint8Array))})(n,t.targetChange.resumeToken),l=t.targetChange.cause,u=l&&(function(d){const p=d.code===void 0?it.UNKNOWN:GA(d.code);return new ht(p,d.message||"")})(l);e=new KA(i,r,o,u||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=dp(n,i.document.name),o=es(i.document.updateTime),l=i.document.createTime?es(i.document.createTime):wt.min(),u=new Mn({mapValue:{fields:i.document.fields}}),f=gn.newFoundDocument(r,o,l,u),d=i.targetIds||[],p=i.removedTargetIds||[];e=new jf(d,p,f.key,f)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=dp(n,i.document),o=i.readTime?es(i.readTime):wt.min(),l=gn.newNoDocument(r,o),u=i.removedTargetIds||[];e=new jf([],u,l.key,l)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=dp(n,i.document),o=i.removedTargetIds||[];e=new jf([],o,r,null)}else{if(!("filter"in t))return At(11601,{Rt:t});{t.filter;const i=t.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,l=new IO(r,o),u=i.targetId;e=new YA(u,l)}}return e}function BO(n,t){let e;if(t instanceof Cu)e={update:pE(n,t.key,t.value)};else if(t instanceof Ld)e={delete:$p(n,t.key)};else if(t instanceof Qr)e={update:pE(n,t.key,t.data),updateMask:QO(t.fieldMask)};else{if(!(t instanceof wO))return At(16599,{Vt:t.type});e={verify:$p(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map((i=>(function(o,l){const u=l.transform;if(u instanceof cd)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof cu)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof uu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof ud)return{fieldPath:l.field.canonicalString(),increment:u.Ae};throw At(20930,{transform:l.transform})})(0,i)))),t.precondition.isNone||(e.currentDocument=(function(r,o){return o.updateTime!==void 0?{updateTime:zO(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:At(27497)})(n,t.precondition)),e}function FO(n,t){return n&&n.length>0?(Jt(t!==void 0,14353),n.map((e=>(function(r,o){let l=r.updateTime?es(r.updateTime):es(o);return l.isEqual(wt.min())&&(l=es(o)),new xO(l,r.transformResults||[])})(e,t)))):[]}function HO(n,t){return{documents:[QA(n,t.path)]}}function qO(n,t){const e={structuredQuery:{}},i=t.path;let r;t.collectionGroup!==null?(r=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=QA(n,r);const o=(function(d){if(d.length!==0)return ZA(wi.create(d,"and"))})(t.filters);o&&(e.structuredQuery.where=o);const l=(function(d){if(d.length!==0)return d.map((p=>(function(b){return{field:$o(b.field),direction:KO(b.dir)}})(p)))})(t.orderBy);l&&(e.structuredQuery.orderBy=l);const u=Xp(n,t.limit);return u!==null&&(e.structuredQuery.limit=u),t.startAt&&(e.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(t.startAt)),t.endAt&&(e.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(t.endAt)),{ft:e,parent:r}}function GO(n){let t=jO(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let r=null;if(i>0){Jt(i===1,65062);const p=e.from[0];p.allDescendants?r=p.collectionId:t=t.child(p.collectionId)}let o=[];e.where&&(o=(function(_){const b=JA(_);return b instanceof wi&&RA(b)?b.getFilters():[b]})(e.where));let l=[];e.orderBy&&(l=(function(_){return _.map((b=>(function(S){return new ld(Jo(S.field),(function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(b)))})(e.orderBy));let u=null;e.limit&&(u=(function(_){let b;return b=typeof _=="object"?_.value:_,Md(b)?null:b})(e.limit));let f=null;e.startAt&&(f=(function(_){const b=!!_.before,E=_.values||[];return new od(E,b)})(e.startAt));let d=null;return e.endAt&&(d=(function(_){const b=!_.before,E=_.values||[];return new od(E,b)})(e.endAt)),uO(t,r,l,o,u,"F",f,d)}function YO(n,t){const e=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return At(28987,{purpose:r})}})(t.purpose);return e==null?null:{"goog-listen-tags":e}}function JA(n){return n.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":const i=Jo(e.unaryFilter.field);return je.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Jo(e.unaryFilter.field);return je.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Jo(e.unaryFilter.field);return je.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Jo(e.unaryFilter.field);return je.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return At(61313);default:return At(60726)}})(n):n.fieldFilter!==void 0?(function(e){return je.create(Jo(e.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return At(58110);default:return At(50506)}})(e.fieldFilter.op),e.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(e){return wi.create(e.compositeFilter.filters.map((i=>JA(i))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return At(1026)}})(e.compositeFilter.op))})(n):At(30097,{filter:n})}function KO(n){return kO[n]}function WO(n){return PO[n]}function XO(n){return VO[n]}function $o(n){return{fieldPath:n.canonicalString()}}function Jo(n){return on.fromServerFormat(n.fieldPath)}function ZA(n){return n instanceof je?(function(e){if(e.op==="=="){if(iE(e.value))return{unaryFilter:{field:$o(e.field),op:"IS_NAN"}};if(nE(e.value))return{unaryFilter:{field:$o(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(iE(e.value))return{unaryFilter:{field:$o(e.field),op:"IS_NOT_NAN"}};if(nE(e.value))return{unaryFilter:{field:$o(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$o(e.field),op:WO(e.op),value:e.value}}})(n):n instanceof wi?(function(e){const i=e.getFilters().map((r=>ZA(r)));return i.length===1?i[0]:{compositeFilter:{op:XO(e.op),filters:i}}})(n):At(54877,{filter:n})}function QO(n){const t=[];return n.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function t1(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(t,e,i,r,o=wt.min(),l=wt.min(),u=ln.EMPTY_BYTE_STRING,f=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=f}withSequenceNumber(t){return new Sr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(t){this.yt=t}}function JO(n){const t=GO({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Wp(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{constructor(){this.Cn=new tN}addToCollectionParentIndex(t,e){return this.Cn.add(e),rt.resolve()}getCollectionParents(t,e){return rt.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return rt.resolve()}deleteFieldIndex(t,e){return rt.resolve()}deleteAllFieldIndexes(t){return rt.resolve()}createTargetIndexes(t,e){return rt.resolve()}getDocumentsMatchingTarget(t,e){return rt.resolve(null)}getIndexType(t,e){return rt.resolve(0)}getFieldIndexes(t,e){return rt.resolve([])}getNextCollectionGroupToUpdate(t){return rt.resolve(null)}getMinOffset(t,e){return rt.resolve(Lr.min())}getMinOffsetFromCollectionGroup(t,e){return rt.resolve(Lr.min())}updateCollectionGroup(t,e,i){return rt.resolve()}updateIndexEntries(t,e){return rt.resolve()}}class tN{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new Ke(ce.comparator),o=!r.has(i);return this.index[e]=r.add(i),o}has(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new Ke(ce.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},e1=41943040;class Dn{static withCacheSize(t){return new Dn(t,Dn.DEFAULT_COLLECTION_PERCENTILE,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Dn.DEFAULT_COLLECTION_PERCENTILE=10,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Dn.DEFAULT=new Dn(e1,Dn.DEFAULT_COLLECTION_PERCENTILE,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Dn.DISABLED=new Dn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new cl(0)}static cr(){return new cl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E="LruGarbageCollector",eN=1048576;function bE([n,t],[e,i]){const r=Bt(n,e);return r===0?Bt(t,i):r}class nN{constructor(t){this.Ir=t,this.buffer=new Ke(bE),this.Er=0}dr(){return++this.Er}Ar(t){const e=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();bE(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class iN{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){dt(_E,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){bl(e)?dt(_E,"Ignoring IndexedDB error during garbage collection: ",e):await _l(e)}await this.Vr(3e5)}))}}class sN{constructor(t,e){this.mr=t,this.params=e}calculateTargetCount(t,e){return this.mr.gr(t).next((i=>Math.floor(e/100*i)))}nthSequenceNumber(t,e){if(e===0)return rt.resolve(Dd.ce);const i=new nN(e);return this.mr.forEachTarget(t,(r=>i.Ar(r.sequenceNumber))).next((()=>this.mr.pr(t,(r=>i.Ar(r))))).next((()=>i.maxValue))}removeTargets(t,e,i){return this.mr.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.mr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(dt("LruGarbageCollector","Garbage collection skipped; disabled"),rt.resolve(yE)):this.getCacheSize(t).next((i=>i<this.params.cacheSizeCollectionThreshold?(dt("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yE):this.yr(t,e)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,e){let i,r,o,l,u,f,d;const p=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(dt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),r=this.params.maximumSequenceNumbersToCollect):r=_,l=Date.now(),this.nthSequenceNumber(t,r)))).next((_=>(i=_,u=Date.now(),this.removeTargets(t,i,e)))).next((_=>(o=_,f=Date.now(),this.removeOrphanedDocuments(t,i)))).next((_=>(d=Date.now(),Xo()<=Ut.DEBUG&&dt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-p}ms
	Determined least recently used ${r} in `+(u-l)+`ms
	Removed ${o} targets in `+(f-u)+`ms
	Removed ${_} documents in `+(d-f)+`ms
Total Duration: ${d-p}ms`),rt.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:_}))))}}function rN(n,t){return new sN(n,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(){this.changes=new Ja((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,gn.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return i!==void 0?rt.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next((r=>(i=r,this.remoteDocumentCache.getEntry(t,e)))).next((r=>(i!==null&&Qc(i.mutation,r,Gn.empty(),fe.now()),r)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((i=>this.getLocalViewOfDocuments(t,i,Ft()).next((()=>i))))}getLocalViewOfDocuments(t,e,i=Ft()){const r=La();return this.populateOverlays(t,r,e).next((()=>this.computeViews(t,e,r,i).next((o=>{let l=Vc();return o.forEach(((u,f)=>{l=l.insert(u,f.overlayedDocument)})),l}))))}getOverlayedDocuments(t,e){const i=La();return this.populateOverlays(t,i,e).next((()=>this.computeViews(t,e,i,Ft())))}populateOverlays(t,e,i){const r=[];return i.forEach((o=>{e.has(o)||r.push(o)})),this.documentOverlayCache.getOverlays(t,r).next((o=>{o.forEach(((l,u)=>{e.set(l,u)}))}))}computeViews(t,e,i,r){let o=js();const l=Xc(),u=(function(){return Xc()})();return e.forEach(((f,d)=>{const p=i.get(d.key);r.has(d.key)&&(p===void 0||p.mutation instanceof Qr)?o=o.insert(d.key,d):p!==void 0?(l.set(d.key,p.mutation.getFieldMask()),Qc(p.mutation,d,p.mutation.getFieldMask(),fe.now())):l.set(d.key,Gn.empty())})),this.recalculateAndSaveOverlays(t,o).next((f=>(f.forEach(((d,p)=>l.set(d,p))),e.forEach(((d,p)=>u.set(d,new oN(p,l.get(d)??null)))),u)))}recalculateAndSaveOverlays(t,e){const i=Xc();let r=new be(((l,u)=>l-u)),o=Ft();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((l=>{for(const u of l)u.keys().forEach((f=>{const d=e.get(f);if(d===null)return;let p=i.get(f)||Gn.empty();p=u.applyToLocalView(d,p),i.set(f,p);const _=(r.get(u.batchId)||Ft()).add(f);r=r.insert(u.batchId,_)}))})).next((()=>{const l=[],u=r.getReverseIterator();for(;u.hasNext();){const f=u.getNext(),d=f.key,p=f.value,_=LA();p.forEach((b=>{if(!o.has(b)){const E=HA(e.get(b),i.get(b));E!==null&&_.set(b,E),o=o.add(b)}})),l.push(this.documentOverlayCache.saveOverlays(t,d,_))}return rt.waitFor(l)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((i=>this.recalculateAndSaveOverlays(t,i)))}getDocumentsMatchingQuery(t,e,i,r){return(function(l){return _t.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):OA(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,r):this.getDocumentsMatchingCollectionQuery(t,e,i,r)}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next((o=>{const l=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-o.size):rt.resolve(La());let u=ru,f=o;return l.next((d=>rt.forEach(d,((p,_)=>(u<_.largestBatchId&&(u=_.largestBatchId),o.get(p)?rt.resolve():this.remoteDocumentCache.getEntry(t,p).next((b=>{f=f.insert(p,b)}))))).next((()=>this.populateOverlays(t,d,o))).next((()=>this.computeViews(t,f,d,Ft()))).next((p=>({batchId:u,changes:VA(p)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new _t(e)).next((i=>{let r=Vc();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r}))}getDocumentsMatchingCollectionGroupQuery(t,e,i,r){const o=e.collectionGroup;let l=Vc();return this.indexManager.getCollectionParents(t,o).next((u=>rt.forEach(u,(f=>{const d=(function(_,b){return new wu(b,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(e,f.child(o));return this.getDocumentsMatchingCollectionQuery(t,d,i,r).next((p=>{p.forEach(((_,b)=>{l=l.insert(_,b)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(t,e,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next((l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,o,r)))).next((l=>{o.forEach(((f,d)=>{const p=d.getKey();l.get(p)===null&&(l=l.insert(p,gn.newInvalidDocument(p)))}));let u=Vc();return l.forEach(((f,d)=>{const p=o.get(f);p!==void 0&&Qc(p.mutation,d,Gn.empty(),fe.now()),kd(e,d)&&(u=u.insert(f,d))})),u}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,e){return rt.resolve(this.Lr.get(e))}saveBundleMetadata(t,e){return this.Lr.set(e.id,(function(r){return{id:r.id,version:r.version,createTime:es(r.createTime)}})(e)),rt.resolve()}getNamedQuery(t,e){return rt.resolve(this.kr.get(e))}saveNamedQuery(t,e){return this.kr.set(e.name,(function(r){return{name:r.name,query:JO(r.bundledQuery),readTime:es(r.readTime)}})(e)),rt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(){this.overlays=new be(_t.comparator),this.qr=new Map}getOverlay(t,e){return rt.resolve(this.overlays.get(e))}getOverlays(t,e){const i=La();return rt.forEach(e,(r=>this.getOverlay(t,r).next((o=>{o!==null&&i.set(r,o)})))).next((()=>i))}saveOverlays(t,e,i){return i.forEach(((r,o)=>{this.St(t,e,o)})),rt.resolve()}removeOverlaysForBatchId(t,e,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(i)),rt.resolve()}getOverlaysForCollection(t,e,i){const r=La(),o=e.length+1,l=new _t(e.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const f=u.getNext().value,d=f.getKey();if(!e.isPrefixOf(d.path))break;d.path.length===o&&f.largestBatchId>i&&r.set(f.getKey(),f)}return rt.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let o=new be(((d,p)=>d-p));const l=this.overlays.getIterator();for(;l.hasNext();){const d=l.getNext().value;if(d.getKey().getCollectionGroup()===e&&d.largestBatchId>i){let p=o.get(d.largestBatchId);p===null&&(p=La(),o=o.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const u=La(),f=o.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((d,p)=>u.set(d,p))),!(u.size()>=r)););return rt.resolve(u)}St(t,e,i){const r=this.overlays.get(i.key);if(r!==null){const l=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new RO(e,i));let o=this.qr.get(e);o===void 0&&(o=Ft(),this.qr.set(e,o)),this.qr.set(e,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(){this.sessionToken=ln.EMPTY_BYTE_STRING}getSessionToken(t){return rt.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,rt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(){this.Qr=new Ke($e.$r),this.Ur=new Ke($e.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,e){const i=new $e(t,e);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(t,e){t.forEach((i=>this.addReference(i,e)))}removeReference(t,e){this.Gr(new $e(t,e))}zr(t,e){t.forEach((i=>this.removeReference(i,e)))}jr(t){const e=new _t(new ce([])),i=new $e(e,t),r=new $e(e,t+1),o=[];return this.Ur.forEachInRange([i,r],(l=>{this.Gr(l),o.push(l.key)})),o}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const e=new _t(new ce([])),i=new $e(e,t),r=new $e(e,t+1);let o=Ft();return this.Ur.forEachInRange([i,r],(l=>{o=o.add(l.key)})),o}containsKey(t){const e=new $e(t,0),i=this.Qr.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}}class $e{constructor(t,e){this.key=t,this.Yr=e}static $r(t,e){return _t.comparator(t.key,e.key)||Bt(t.Yr,e.Yr)}static Kr(t,e){return Bt(t.Yr,e.Yr)||_t.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.tr=1,this.Zr=new Ke($e.$r)}checkEmpty(t){return rt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,r){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new CO(o,e,i,r);this.mutationQueue.push(l);for(const u of r)this.Zr=this.Zr.add(new $e(u.key,o)),this.indexManager.addToCollectionParentIndex(t,u.key.path.popLast());return rt.resolve(l)}lookupMutationBatch(t,e){return rt.resolve(this.Xr(e))}getNextMutationBatchAfterBatchId(t,e){const i=e+1,r=this.ei(i),o=r<0?0:r;return rt.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return rt.resolve(this.mutationQueue.length===0?Uy:this.tr-1)}getAllMutationBatches(t){return rt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new $e(e,0),r=new $e(e,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,r],(l=>{const u=this.Xr(l.Yr);o.push(u)})),rt.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Ke(Bt);return e.forEach((r=>{const o=new $e(r,0),l=new $e(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,l],(u=>{i=i.add(u.Yr)}))})),rt.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1;let o=i;_t.isDocumentKey(o)||(o=o.child(""));const l=new $e(new _t(o),0);let u=new Ke(Bt);return this.Zr.forEachWhile((f=>{const d=f.key.path;return!!i.isPrefixOf(d)&&(d.length===r&&(u=u.add(f.Yr)),!0)}),l),rt.resolve(this.ti(u))}ti(t){const e=[];return t.forEach((i=>{const r=this.Xr(i);r!==null&&e.push(r)})),e}removeMutationBatch(t,e){Jt(this.ni(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return rt.forEach(e.mutations,(r=>{const o=new $e(r.key,e.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)})).next((()=>{this.Zr=i}))}ir(t){}containsKey(t,e){const i=new $e(e,0),r=this.Zr.firstAfterOrEqual(i);return rt.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,rt.resolve()}ni(t,e){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const e=this.ei(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(t){this.ri=t,this.docs=(function(){return new be(_t.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,r=this.docs.get(i),o=r?r.size:0,l=this.ri(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return rt.resolve(i?i.document.mutableCopy():gn.newInvalidDocument(e))}getEntries(t,e){let i=js();return e.forEach((r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():gn.newInvalidDocument(r))})),rt.resolve(i)}getDocumentsMatchingQuery(t,e,i,r){let o=js();const l=e.path,u=new _t(l.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(u);for(;f.hasNext();){const{key:d,value:{document:p}}=f.getNext();if(!l.isPrefixOf(d.path))break;d.path.length>l.length+1||FM(BM(p),i)<=0||(r.has(p.key)||kd(e,p))&&(o=o.insert(p.key,p.mutableCopy()))}return rt.resolve(o)}getAllFromCollectionGroup(t,e,i,r){At(9500)}ii(t,e){return rt.forEach(this.docs,(i=>e(i)))}newChangeBuffer(t){return new gN(this)}getSize(t){return rt.resolve(this.size)}}class gN extends aN{constructor(t){super(),this.Nr=t}applyChanges(t){const e=[];return this.changes.forEach(((i,r)=>{r.isValidDocument()?e.push(this.Nr.addEntry(t,r)):this.Nr.removeEntry(i)})),rt.waitFor(e)}getFromCache(t,e){return this.Nr.getEntry(t,e)}getAllFromCache(t,e){return this.Nr.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(t){this.persistence=t,this.si=new Ja((e=>Hy(e)),qy),this.lastRemoteSnapshotVersion=wt.min(),this.highestTargetId=0,this.oi=0,this._i=new Qy,this.targetCount=0,this.ai=cl.ur()}forEachTarget(t,e){return this.si.forEach(((i,r)=>e(r))),rt.resolve()}getLastRemoteSnapshotVersion(t){return rt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return rt.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),rt.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.oi&&(this.oi=e),rt.resolve()}Pr(t){this.si.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ai=new cl(e),this.highestTargetId=e),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,e){return this.Pr(e),this.targetCount+=1,rt.resolve()}updateTargetData(t,e){return this.Pr(e),rt.resolve()}removeTargetData(t,e){return this.si.delete(e.target),this._i.jr(e.targetId),this.targetCount-=1,rt.resolve()}removeTargets(t,e,i){let r=0;const o=[];return this.si.forEach(((l,u)=>{u.sequenceNumber<=e&&i.get(u.targetId)===null&&(this.si.delete(l),o.push(this.removeMatchingKeysForTargetId(t,u.targetId)),r++)})),rt.waitFor(o).next((()=>r))}getTargetCount(t){return rt.resolve(this.targetCount)}getTargetData(t,e){const i=this.si.get(e)||null;return rt.resolve(i)}addMatchingKeys(t,e,i){return this._i.Wr(e,i),rt.resolve()}removeMatchingKeys(t,e,i){this._i.zr(e,i);const r=this.persistence.referenceDelegate,o=[];return r&&e.forEach((l=>{o.push(r.markPotentiallyOrphaned(t,l))})),rt.waitFor(o)}removeMatchingKeysForTargetId(t,e){return this._i.jr(e),rt.resolve()}getMatchingKeysForTargetId(t,e){const i=this._i.Hr(e);return rt.resolve(i)}containsKey(t,e){return rt.resolve(this._i.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(t,e){this.ui={},this.overlays={},this.ci=new Dd(0),this.li=!1,this.li=!0,this.hi=new hN,this.referenceDelegate=t(this),this.Pi=new mN(this),this.indexManager=new ZO,this.remoteDocumentCache=(function(r){return new dN(r)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new $O(e),this.Ii=new cN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new uN,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.ui[t.toKey()];return i||(i=new fN(e,this.referenceDelegate),this.ui[t.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,e,i){dt("MemoryPersistence","Starting transaction:",t);const r=new pN(this.ci.next());return this.referenceDelegate.Ei(),i(r).next((o=>this.referenceDelegate.di(r).next((()=>o)))).toPromise().then((o=>(r.raiseOnCommittedEvent(),o)))}Ai(t,e){return rt.or(Object.values(this.ui).map((i=>()=>i.containsKey(t,e))))}}class pN extends qM{constructor(t){super(),this.currentSequenceNumber=t}}class $y{constructor(t){this.persistence=t,this.Ri=new Qy,this.Vi=null}static mi(t){return new $y(t)}get fi(){if(this.Vi)return this.Vi;throw At(60996)}addReference(t,e,i){return this.Ri.addReference(i,e),this.fi.delete(i.toString()),rt.resolve()}removeReference(t,e,i){return this.Ri.removeReference(i,e),this.fi.add(i.toString()),rt.resolve()}markPotentiallyOrphaned(t,e){return this.fi.add(e.toString()),rt.resolve()}removeTarget(t,e){this.Ri.jr(e.targetId).forEach((r=>this.fi.add(r.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next((r=>{r.forEach((o=>this.fi.add(o.toString())))})).next((()=>i.removeTargetData(t,e)))}Ei(){this.Vi=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return rt.forEach(this.fi,(i=>{const r=_t.fromPath(i);return this.gi(t,r).next((o=>{o||e.removeEntry(r,wt.min())}))})).next((()=>(this.Vi=null,e.apply(t))))}updateLimboDocument(t,e){return this.gi(t,e).next((i=>{i?this.fi.delete(e.toString()):this.fi.add(e.toString())}))}Ti(t){return 0}gi(t,e){return rt.or([()=>rt.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ai(t,e)])}}class fd{constructor(t,e){this.persistence=t,this.pi=new Ja((i=>KM(i.path)),((i,r)=>i.isEqual(r))),this.garbageCollector=rN(this,e)}static mi(t,e){return new fd(t,e)}Ei(){}di(t){return rt.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}gr(t){const e=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((i=>e.next((r=>i+r))))}wr(t){let e=0;return this.pr(t,(i=>{e++})).next((()=>e))}pr(t,e){return rt.forEach(this.pi,((i,r)=>this.br(t,i,r).next((o=>o?rt.resolve():e(r)))))}removeTargets(t,e,i){return this.persistence.getTargetCache().removeTargets(t,e,i)}removeOrphanedDocuments(t,e){let i=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ii(t,(l=>this.br(t,l,e).next((u=>{u||(i++,o.removeEntry(l,wt.min()))})))).next((()=>o.apply(t))).next((()=>i))}markPotentiallyOrphaned(t,e){return this.pi.set(e,t.currentSequenceNumber),rt.resolve()}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,e,i){return this.pi.set(i,t.currentSequenceNumber),rt.resolve()}removeReference(t,e,i){return this.pi.set(i,t.currentSequenceNumber),rt.resolve()}updateLimboDocument(t,e){return this.pi.set(e,t.currentSequenceNumber),rt.resolve()}Ti(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=Vf(t.data.value)),e}br(t,e,i){return rt.or([()=>this.persistence.Ai(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const r=this.pi.get(e);return rt.resolve(r!==void 0&&r>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.Es=i,this.ds=r}static As(t,e){let i=Ft(),r=Ft();for(const o of e.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new Jy(t,e.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return KR()?8:GM(pn())>0?6:4})()}initialize(t,e){this.ps=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,i,r){const o={result:null};return this.ys(t,e).next((l=>{o.result=l})).next((()=>{if(!o.result)return this.ws(t,e,r,i).next((l=>{o.result=l}))})).next((()=>{if(o.result)return;const l=new yN;return this.Ss(t,e,l).next((u=>{if(o.result=u,this.Vs)return this.bs(t,e,l,u.size)}))})).next((()=>o.result))}bs(t,e,i,r){return i.documentReadCount<this.fs?(Xo()<=Ut.DEBUG&&dt("QueryEngine","SDK will not create cache indexes for query:",Qo(e),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),rt.resolve()):(Xo()<=Ut.DEBUG&&dt("QueryEngine","Query:",Qo(e),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(Xo()<=Ut.DEBUG&&dt("QueryEngine","The SDK decides to create cache indexes for query:",Qo(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ts(e))):rt.resolve())}ys(t,e){if(oE(e))return rt.resolve(null);let i=ts(e);return this.indexManager.getIndexType(t,i).next((r=>r===0?null:(e.limit!==null&&r===1&&(e=Wp(e,null,"F"),i=ts(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next((o=>{const l=Ft(...o);return this.ps.getDocuments(t,l).next((u=>this.indexManager.getMinOffset(t,i).next((f=>{const d=this.Ds(e,u);return this.Cs(e,d,l,f.readTime)?this.ys(t,Wp(e,null,"F")):this.vs(t,d,e,f)}))))})))))}ws(t,e,i,r){return oE(e)||r.isEqual(wt.min())?rt.resolve(null):this.ps.getDocuments(t,i).next((o=>{const l=this.Ds(e,o);return this.Cs(e,l,i,r)?rt.resolve(null):(Xo()<=Ut.DEBUG&&dt("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Qo(e)),this.vs(t,l,e,UM(r,ru)).next((u=>u)))}))}Ds(t,e){let i=new Ke(kA(t));return e.forEach(((r,o)=>{kd(t,o)&&(i=i.add(o))})),i}Cs(t,e,i,r){if(t.limit===null)return!1;if(i.size!==e.size)return!0;const o=t.limitType==="F"?e.last():e.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ss(t,e,i){return Xo()<=Ut.DEBUG&&dt("QueryEngine","Using full collection scan to execute query:",Qo(e)),this.ps.getDocumentsMatchingQuery(t,e,Lr.min(),i)}vs(t,e,i,r){return this.ps.getDocumentsMatchingQuery(t,i,r).next((o=>(e.forEach((l=>{o=o.insert(l.key,l)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy="LocalStore",bN=3e8;class vN{constructor(t,e,i,r){this.persistence=t,this.Fs=e,this.serializer=r,this.Ms=new be(Bt),this.xs=new Ja((o=>Hy(o)),qy),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(i)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new lN(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.Ms)))}}function TN(n,t,e,i){return new vN(n,t,e,i)}async function i1(n,t){const e=It(n);return await e.persistence.runTransaction("Handle user change","readonly",(i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next((o=>(r=o,e.Bs(t),e.mutationQueue.getAllMutationBatches(i)))).next((o=>{const l=[],u=[];let f=Ft();for(const d of r){l.push(d.batchId);for(const p of d.mutations)f=f.add(p.key)}for(const d of o){u.push(d.batchId);for(const p of d.mutations)f=f.add(p.key)}return e.localDocuments.getDocuments(i,f).next((d=>({Ls:d,removedBatchIds:l,addedBatchIds:u})))}))}))}function EN(n,t){const e=It(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const r=t.batch.keys(),o=e.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,f,d,p){const _=d.batch,b=_.keys();let E=rt.resolve();return b.forEach((S=>{E=E.next((()=>p.getEntry(f,S))).next((w=>{const D=d.docVersions.get(S);Jt(D!==null,48541),w.version.compareTo(D)<0&&(_.applyToRemoteDocument(w,d),w.isValidDocument()&&(w.setReadTime(d.commitVersion),p.addEntry(w)))}))})),E.next((()=>u.mutationQueue.removeMutationBatch(f,_)))})(e,i,t,o).next((()=>o.apply(i))).next((()=>e.mutationQueue.performConsistencyCheck(i))).next((()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId))).next((()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(u){let f=Ft();for(let d=0;d<u.mutationResults.length;++d)u.mutationResults[d].transformResults.length>0&&(f=f.add(u.batch.mutations[d].key));return f})(t)))).next((()=>e.localDocuments.getDocuments(i,r)))}))}function s1(n){const t=It(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Pi.getLastRemoteSnapshotVersion(e)))}function xN(n,t){const e=It(n),i=t.snapshotVersion;let r=e.Ms;return e.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const l=e.Ns.newChangeBuffer({trackRemovals:!0});r=e.Ms;const u=[];t.targetChanges.forEach(((p,_)=>{const b=r.get(_);if(!b)return;u.push(e.Pi.removeMatchingKeys(o,p.removedDocuments,_).next((()=>e.Pi.addMatchingKeys(o,p.addedDocuments,_))));let E=b.withSequenceNumber(o.currentSequenceNumber);t.targetMismatches.get(_)!==null?E=E.withResumeToken(ln.EMPTY_BYTE_STRING,wt.min()).withLastLimboFreeSnapshotVersion(wt.min()):p.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(p.resumeToken,i)),r=r.insert(_,E),(function(w,D,z){return w.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=bN?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0})(b,E,p)&&u.push(e.Pi.updateTargetData(o,E))}));let f=js(),d=Ft();if(t.documentUpdates.forEach((p=>{t.resolvedLimboDocuments.has(p)&&u.push(e.persistence.referenceDelegate.updateLimboDocument(o,p))})),u.push(SN(o,l,t.documentUpdates).next((p=>{f=p.ks,d=p.qs}))),!i.isEqual(wt.min())){const p=e.Pi.getLastRemoteSnapshotVersion(o).next((_=>e.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i)));u.push(p)}return rt.waitFor(u).next((()=>l.apply(o))).next((()=>e.localDocuments.getLocalViewOfDocuments(o,f,d))).next((()=>f))})).then((o=>(e.Ms=r,o)))}function SN(n,t,e){let i=Ft(),r=Ft();return e.forEach((o=>i=i.add(o))),t.getEntries(n,i).next((o=>{let l=js();return e.forEach(((u,f)=>{const d=o.get(u);f.isFoundDocument()!==d.isFoundDocument()&&(r=r.add(u)),f.isNoDocument()&&f.version.isEqual(wt.min())?(t.removeEntry(u,f.readTime),l=l.insert(u,f)):!d.isValidDocument()||f.version.compareTo(d.version)>0||f.version.compareTo(d.version)===0&&d.hasPendingWrites?(t.addEntry(f),l=l.insert(u,f)):dt(Zy,"Ignoring outdated watch update for ",u,". Current version:",d.version," Watch version:",f.version)})),{ks:l,qs:r}}))}function AN(n,t){const e=It(n);return e.persistence.runTransaction("Get next mutation batch","readonly",(i=>(t===void 0&&(t=Uy),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t))))}function wN(n,t){const e=It(n);return e.persistence.runTransaction("Allocate target","readwrite",(i=>{let r;return e.Pi.getTargetData(i,t).next((o=>o?(r=o,rt.resolve(r)):e.Pi.allocateTargetId(i).next((l=>(r=new Sr(t,l,"TargetPurposeListen",i.currentSequenceNumber),e.Pi.addTargetData(i,r).next((()=>r)))))))})).then((i=>{const r=e.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.Ms=e.Ms.insert(i.targetId,i),e.xs.set(t,i.targetId)),i}))}async function Zp(n,t,e){const i=It(n),r=i.Ms.get(t),o=e?"readwrite":"readwrite-primary";try{e||await i.persistence.runTransaction("Release target",o,(l=>i.persistence.referenceDelegate.removeTarget(l,r)))}catch(l){if(!bl(l))throw l;dt(Zy,`Failed to update sequence numbers for target ${t}: ${l}`)}i.Ms=i.Ms.remove(t),i.xs.delete(r.target)}function vE(n,t,e){const i=It(n);let r=wt.min(),o=Ft();return i.persistence.runTransaction("Execute query","readwrite",(l=>(function(f,d,p){const _=It(f),b=_.xs.get(p);return b!==void 0?rt.resolve(_.Ms.get(b)):_.Pi.getTargetData(d,p)})(i,l,ts(t)).next((u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(l,u.targetId).next((f=>{o=f}))})).next((()=>i.Fs.getDocumentsMatchingQuery(l,t,e?r:wt.min(),e?o:Ft()))).next((u=>(CN(i,fO(t),u),{documents:u,Qs:o})))))}function CN(n,t,e){let i=n.Os.get(t)||wt.min();e.forEach(((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)})),n.Os.set(t,i)}class TE{constructor(){this.activeTargetIds=_O()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class RN{constructor(){this.Mo=new TE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t,e=!0){return e&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,e,i){this.xo[t]=e}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new TE,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="ConnectivityMonitor";class xE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){dt(EE,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){dt(EE,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mf=null;function ty(){return mf===null?mf=(function(){return 268435456+Math.round(2147483648*Math.random())})():mf++,"0x"+mf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gp="RestConnection",DN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class MN{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=e+"://"+t.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===rd?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(t,e,i,r,o){const l=ty(),u=this.zo(t,e.toUriEncodedString());dt(gp,`Sending RPC '${t}' ${l}:`,u,i);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,r,o);const{host:d}=new URL(u),p=gl(d);return this.Jo(t,u,f,i,p).then((_=>(dt(gp,`Received RPC '${t}' ${l}: `,_),_)),(_=>{throw rl(gp,`RPC '${t}' ${l} failed with error: `,_,"url: ",u,"request:",i),_}))}Ho(t,e,i,r,o,l){return this.Go(t,e,i,r,o)}jo(t,e,i){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+yl})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((r,o)=>t[o]=r)),i&&i.headers.forEach(((r,o)=>t[o]=r))}zo(t,e){const i=DN[t];return`${this.Uo}/v1/${e}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un="WebChannelConnection";class NN extends MN{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,i,r,o){const l=ty();return new Promise(((u,f)=>{const d=new oA;d.setWithCredentials(!0),d.listenOnce(lA.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case Pf.NO_ERROR:const _=d.getResponseJson();dt(un,`XHR for RPC '${t}' ${l} received:`,JSON.stringify(_)),u(_);break;case Pf.TIMEOUT:dt(un,`RPC '${t}' ${l} timed out`),f(new ht(it.DEADLINE_EXCEEDED,"Request time out"));break;case Pf.HTTP_ERROR:const b=d.getStatus();if(dt(un,`RPC '${t}' ${l} failed with status:`,b,"response text:",d.getResponseText()),b>0){let E=d.getResponseJson();Array.isArray(E)&&(E=E[0]);const S=E==null?void 0:E.error;if(S&&S.status&&S.message){const w=(function(z){const F=z.toLowerCase().replace(/_/g,"-");return Object.values(it).indexOf(F)>=0?F:it.UNKNOWN})(S.status);f(new ht(w,S.message))}else f(new ht(it.UNKNOWN,"Server responded with status "+d.getStatus()))}else f(new ht(it.UNAVAILABLE,"Connection failed."));break;default:At(9055,{l_:t,streamId:l,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{dt(un,`RPC '${t}' ${l} completed.`)}}));const p=JSON.stringify(r);dt(un,`RPC '${t}' ${l} sending request:`,r),d.send(e,"POST",p,i,15)}))}T_(t,e,i){const r=ty(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],l=hA(),u=uA(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(f.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,e,i),f.encodeInitMessageHeaders=!0;const p=o.join("");dt(un,`Creating RPC '${t}' stream ${r}: ${p}`,f);const _=l.createWebChannel(p,f);this.I_(_);let b=!1,E=!1;const S=new ON({Yo:D=>{E?dt(un,`Not sending because RPC '${t}' stream ${r} is closed:`,D):(b||(dt(un,`Opening RPC '${t}' stream ${r} transport.`),_.open(),b=!0),dt(un,`RPC '${t}' stream ${r} sending:`,D),_.send(D))},Zo:()=>_.close()}),w=(D,z,F)=>{D.listen(z,(W=>{try{F(W)}catch(Z){setTimeout((()=>{throw Z}),0)}}))};return w(_,Pc.EventType.OPEN,(()=>{E||(dt(un,`RPC '${t}' stream ${r} transport opened.`),S.o_())})),w(_,Pc.EventType.CLOSE,(()=>{E||(E=!0,dt(un,`RPC '${t}' stream ${r} transport closed`),S.a_(),this.E_(_))})),w(_,Pc.EventType.ERROR,(D=>{E||(E=!0,rl(un,`RPC '${t}' stream ${r} transport errored. Name:`,D.name,"Message:",D.message),S.a_(new ht(it.UNAVAILABLE,"The operation could not be completed")))})),w(_,Pc.EventType.MESSAGE,(D=>{var z;if(!E){const F=D.data[0];Jt(!!F,16349);const W=F,Z=(W==null?void 0:W.error)||((z=W[0])==null?void 0:z.error);if(Z){dt(un,`RPC '${t}' stream ${r} received error:`,Z);const $=Z.status;let st=(function(O){const P=ze[O];if(P!==void 0)return GA(P)})($),M=Z.message;st===void 0&&(st=it.INTERNAL,M="Unknown error status: "+$+" with message "+Z.message),E=!0,S.a_(new ht(st,M)),_.close()}else dt(un,`RPC '${t}' stream ${r} received:`,F),S.u_(F)}})),w(u,cA.STAT_EVENT,(D=>{D.stat===Bp.PROXY?dt(un,`RPC '${t}' stream ${r} detected buffering proxy`):D.stat===Bp.NOPROXY&&dt(un,`RPC '${t}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{S.__()}),0),S}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((e=>e===t))}}function mp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jd(n){return new LO(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(t,e,i=1e3,r=1.5,o=6e4){this.Mi=t,this.timerId=e,this.d_=i,this.A_=r,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const e=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,e-i);r>0&&dt("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE="PersistentStream";class a1{constructor(t,e,i,r,o,l,u,f){this.Mi=t,this.S_=i,this.b_=r,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new r1(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===it.RESOURCE_EXHAUSTED?(zs(e.toString()),zs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===it.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(e)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,r])=>{this.D_===e&&this.G_(i,r)}),(i=>{t((()=>{const r=new ht(it.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)}))}))}G_(t,e){const i=this.W_(this.D_);this.stream=this.j_(t,e),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{i((()=>this.z_(r)))})),this.stream.onMessage((r=>{i((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return dt(SE,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return e=>{this.Mi.enqueueAndForget((()=>this.D_===t?e():(dt(SE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class kN extends a1{constructor(t,e,i,r,o,l){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,l),this.serializer=o}j_(t,e){return this.connection.T_("Listen",t,e)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=UO(this.serializer,t),i=(function(o){if(!("targetChange"in o))return wt.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?wt.min():l.readTime?es(l.readTime):wt.min()})(t);return this.listener.H_(e,i)}Y_(t){const e={};e.database=Jp(this.serializer),e.addTarget=(function(o,l){let u;const f=l.target;if(u=Yp(f)?{documents:HO(o,f)}:{query:qO(o,f).ft},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=WA(o,l.resumeToken);const d=Xp(o,l.expectedCount);d!==null&&(u.expectedCount=d)}else if(l.snapshotVersion.compareTo(wt.min())>0){u.readTime=hd(o,l.snapshotVersion.toTimestamp());const d=Xp(o,l.expectedCount);d!==null&&(u.expectedCount=d)}return u})(this.serializer,t);const i=YO(this.serializer,t);i&&(e.labels=i),this.q_(e)}Z_(t){const e={};e.database=Jp(this.serializer),e.removeTarget=t,this.q_(e)}}class PN extends a1{constructor(t,e,i,r,o,l){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,l),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}J_(t){return Jt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Jt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Jt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=FO(t.writeResults,t.commitTime),i=es(t.commitTime);return this.listener.na(i,e)}ra(){const t={};t.database=Jp(this.serializer),this.q_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map((i=>BO(this.serializer,i)))};this.q_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{}class LN extends VN{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new ht(it.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,e,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Go(t,Qp(e,i),r,o,l))).catch((o=>{throw o.name==="FirebaseError"?(o.code===it.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ht(it.UNKNOWN,o.toString())}))}Ho(t,e,i,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Ho(t,Qp(e,i),r,l,u,o))).catch((l=>{throw l.name==="FirebaseError"?(l.code===it.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ht(it.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class zN{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(zs(e),this.aa=!1):dt("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wa="RemoteStore";class jN{constructor(t,e,i,r,o){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((l=>{i.enqueueAndForget((async()=>{Za(this)&&(dt(Wa,"Restarting streams for network reachability change."),await(async function(f){const d=It(f);d.Ea.add(4),await Iu(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Ud(d)})(this))}))})),this.Ra=new zN(i,r)}}async function Ud(n){if(Za(n))for(const t of n.da)await t(!0)}async function Iu(n){for(const t of n.da)await t(!1)}function o1(n,t){const e=It(n);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),i_(e)?n_(e):vl(e).O_()&&e_(e,t))}function t_(n,t){const e=It(n),i=vl(e);e.Ia.delete(t),i.O_()&&l1(e,t),e.Ia.size===0&&(i.O_()?i.L_():Za(e)&&e.Ra.set("Unknown"))}function e_(n,t){if(n.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(wt.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}vl(n).Y_(t)}function l1(n,t){n.Va.Ue(t),vl(n).Z_(t)}function n_(n){n.Va=new NO({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),At:t=>n.Ia.get(t)||null,ht:()=>n.datastore.serializer.databaseId}),vl(n).start(),n.Ra.ua()}function i_(n){return Za(n)&&!vl(n).x_()&&n.Ia.size>0}function Za(n){return It(n).Ea.size===0}function c1(n){n.Va=void 0}async function UN(n){n.Ra.set("Online")}async function BN(n){n.Ia.forEach(((t,e)=>{e_(n,t)}))}async function FN(n,t){c1(n),i_(n)?(n.Ra.ha(t),n_(n)):n.Ra.set("Unknown")}async function HN(n,t,e){if(n.Ra.set("Online"),t instanceof KA&&t.state===2&&t.cause)try{await(async function(r,o){const l=o.cause;for(const u of o.targetIds)r.Ia.has(u)&&(await r.remoteSyncer.rejectListen(u,l),r.Ia.delete(u),r.Va.removeTarget(u))})(n,t)}catch(i){dt(Wa,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await dd(n,i)}else if(t instanceof jf?n.Va.Ze(t):t instanceof YA?n.Va.st(t):n.Va.tt(t),!e.isEqual(wt.min()))try{const i=await s1(n.localStore);e.compareTo(i)>=0&&await(function(o,l){const u=o.Va.Tt(l);return u.targetChanges.forEach(((f,d)=>{if(f.resumeToken.approximateByteSize()>0){const p=o.Ia.get(d);p&&o.Ia.set(d,p.withResumeToken(f.resumeToken,l))}})),u.targetMismatches.forEach(((f,d)=>{const p=o.Ia.get(f);if(!p)return;o.Ia.set(f,p.withResumeToken(ln.EMPTY_BYTE_STRING,p.snapshotVersion)),l1(o,f);const _=new Sr(p.target,f,d,p.sequenceNumber);e_(o,_)})),o.remoteSyncer.applyRemoteEvent(u)})(n,e)}catch(i){dt(Wa,"Failed to raise snapshot:",i),await dd(n,i)}}async function dd(n,t,e){if(!bl(t))throw t;n.Ea.add(1),await Iu(n),n.Ra.set("Offline"),e||(e=()=>s1(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{dt(Wa,"Retrying IndexedDB access"),await e(),n.Ea.delete(1),await Ud(n)}))}function u1(n,t){return t().catch((e=>dd(n,e,t)))}async function Bd(n){const t=It(n),e=Br(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Uy;for(;qN(t);)try{const r=await AN(t.localStore,i);if(r===null){t.Ta.length===0&&e.L_();break}i=r.batchId,GN(t,r)}catch(r){await dd(t,r)}h1(t)&&f1(t)}function qN(n){return Za(n)&&n.Ta.length<10}function GN(n,t){n.Ta.push(t);const e=Br(n);e.O_()&&e.X_&&e.ea(t.mutations)}function h1(n){return Za(n)&&!Br(n).x_()&&n.Ta.length>0}function f1(n){Br(n).start()}async function YN(n){Br(n).ra()}async function KN(n){const t=Br(n);for(const e of n.Ta)t.ea(e.mutations)}async function WN(n,t,e){const i=n.Ta.shift(),r=Ky.from(i,t,e);await u1(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await Bd(n)}async function XN(n,t){t&&Br(n).X_&&await(async function(i,r){if((function(l){return DO(l)&&l!==it.ABORTED})(r.code)){const o=i.Ta.shift();Br(i).B_(),await u1(i,(()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r))),await Bd(i)}})(n,t),h1(n)&&f1(n)}async function AE(n,t){const e=It(n);e.asyncQueue.verifyOperationInProgress(),dt(Wa,"RemoteStore received new credentials");const i=Za(e);e.Ea.add(3),await Iu(e),i&&e.Ra.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await Ud(e)}async function QN(n,t){const e=It(n);t?(e.Ea.delete(2),await Ud(e)):t||(e.Ea.add(2),await Iu(e),e.Ra.set("Unknown"))}function vl(n){return n.ma||(n.ma=(function(e,i,r){const o=It(e);return o.sa(),new kN(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(n.datastore,n.asyncQueue,{Xo:UN.bind(null,n),t_:BN.bind(null,n),r_:FN.bind(null,n),H_:HN.bind(null,n)}),n.da.push((async t=>{t?(n.ma.B_(),i_(n)?n_(n):n.Ra.set("Unknown")):(await n.ma.stop(),c1(n))}))),n.ma}function Br(n){return n.fa||(n.fa=(function(e,i,r){const o=It(e);return o.sa(),new PN(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:YN.bind(null,n),r_:XN.bind(null,n),ta:KN.bind(null,n),na:WN.bind(null,n)}),n.da.push((async t=>{t?(n.fa.B_(),await Bd(n)):(await n.fa.stop(),n.Ta.length>0&&(dt(Wa,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{constructor(t,e,i,r,o){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new kr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,r,o){const l=Date.now()+i,u=new s_(t,e,l,r,o);return u.start(i),u}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ht(it.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function r_(n,t){if(zs("AsyncQueue",`${t}: ${n}`),bl(n))return new ht(it.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{static emptySet(t){return new nl(t.comparator)}constructor(t){this.comparator=t?(e,i)=>t(e,i)||_t.comparator(e.key,i.key):(e,i)=>_t.comparator(e.key,i.key),this.keyedMap=Vc(),this.sortedSet=new be(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,i)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof nl)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const i=new nl;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(){this.ga=new be(_t.comparator)}track(t){const e=t.doc.key,i=this.ga.get(e);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(e,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(e):t.type===1&&i.type===2?this.ga=this.ga.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):At(63341,{Rt:t,pa:i}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal(((e,i)=>{t.push(i)})),t}}class ul{constructor(t,e,i,r,o,l,u,f,d){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=f,this.hasCachedResults=d}static fromInitialDocuments(t,e,i,r,o){const l=[];return e.forEach((u=>{l.push({type:0,doc:u})})),new ul(t,e,nl.emptySet(e),l,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Nd(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class JN{constructor(){this.queries=CE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,i){const r=It(e),o=r.queries;r.queries=CE(),o.forEach(((l,u)=>{for(const f of u.Sa)f.onError(i)}))})(this,new ht(it.ABORTED,"Firestore shutting down"))}}function CE(){return new Ja((n=>NA(n)),Nd)}async function d1(n,t){const e=It(n);let i=3;const r=t.query;let o=e.queries.get(r);o?!o.ba()&&t.Da()&&(i=2):(o=new $N,i=t.Da()?0:1);try{switch(i){case 0:o.wa=await e.onListen(r,!0);break;case 1:o.wa=await e.onListen(r,!1);break;case 2:await e.onFirstRemoteStoreListen(r)}}catch(l){const u=r_(l,`Initialization of query '${Qo(t.query)}' failed`);return void t.onError(u)}e.queries.set(r,o),o.Sa.push(t),t.va(e.onlineState),o.wa&&t.Fa(o.wa)&&a_(e)}async function g1(n,t){const e=It(n),i=t.query;let r=3;const o=e.queries.get(i);if(o){const l=o.Sa.indexOf(t);l>=0&&(o.Sa.splice(l,1),o.Sa.length===0?r=t.Da()?0:1:!o.ba()&&t.Da()&&(r=2))}switch(r){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}}function ZN(n,t){const e=It(n);let i=!1;for(const r of t){const o=r.query,l=e.queries.get(o);if(l){for(const u of l.Sa)u.Fa(r)&&(i=!0);l.wa=r}}i&&a_(e)}function tk(n,t,e){const i=It(n),r=i.queries.get(t);if(r)for(const o of r.Sa)o.onError(e);i.queries.delete(t)}function a_(n){n.Ca.forEach((t=>{t.next()}))}var ey,RE;(RE=ey||(ey={})).Ma="default",RE.Cache="cache";class m1{constructor(t,e,i){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)r.type!==3&&i.push(r);t=new ul(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;const i=e!=="Offline";return(!this.options.qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=ul.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==ey.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(t){this.key=t}}class y1{constructor(t){this.key=t}}class ek{constructor(t,e){this.query=t,this.Ya=e,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ft(),this.mutatedKeys=Ft(),this.eu=kA(t),this.tu=new nl(this.eu)}get nu(){return this.Ya}ru(t,e){const i=e?e.iu:new wE,r=e?e.tu:this.tu;let o=e?e.mutatedKeys:this.mutatedKeys,l=r,u=!1;const f=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,d=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal(((p,_)=>{const b=r.get(p),E=kd(this.query,_)?_:null,S=!!b&&this.mutatedKeys.has(b.key),w=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let D=!1;b&&E?b.data.isEqual(E.data)?S!==w&&(i.track({type:3,doc:E}),D=!0):this.su(b,E)||(i.track({type:2,doc:E}),D=!0,(f&&this.eu(E,f)>0||d&&this.eu(E,d)<0)&&(u=!0)):!b&&E?(i.track({type:0,doc:E}),D=!0):b&&!E&&(i.track({type:1,doc:b}),D=!0,(f||d)&&(u=!0)),D&&(E?(l=l.add(E),o=w?o.add(p):o.delete(p)):(l=l.delete(p),o=o.delete(p)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const p=this.query.limitType==="F"?l.last():l.first();l=l.delete(p.key),o=o.delete(p.key),i.track({type:1,doc:p})}return{tu:l,iu:i,Cs:u,mutatedKeys:o}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,r){const o=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const l=t.iu.ya();l.sort(((p,_)=>(function(E,S){const w=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return At(20277,{Rt:D})}};return w(E)-w(S)})(p.type,_.type)||this.eu(p.doc,_.doc))),this.ou(i),r=r??!1;const u=e&&!r?this._u():[],f=this.Xa.size===0&&this.current&&!r?1:0,d=f!==this.Za;return this.Za=f,l.length!==0||d?{snapshot:new ul(this.query,t.tu,o,l,t.mutatedKeys,f===0,d,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new wE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((e=>this.Ya=this.Ya.add(e))),t.modifiedDocuments.forEach((e=>{})),t.removedDocuments.forEach((e=>this.Ya=this.Ya.delete(e))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Ft(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const e=[];return t.forEach((i=>{this.Xa.has(i)||e.push(new y1(i))})),this.Xa.forEach((i=>{t.has(i)||e.push(new p1(i))})),e}cu(t){this.Ya=t.Qs,this.Xa=Ft();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return ul.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const o_="SyncEngine";class nk{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class ik{constructor(t){this.key=t,this.hu=!1}}class sk{constructor(t,e,i,r,o,l){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Ja((u=>NA(u)),Nd),this.Iu=new Map,this.Eu=new Set,this.du=new be(_t.comparator),this.Au=new Map,this.Ru=new Qy,this.Vu={},this.mu=new Map,this.fu=cl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function rk(n,t,e=!0){const i=x1(n);let r;const o=i.Tu.get(t);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.lu()):r=await _1(i,t,e,!0),r}async function ak(n,t){const e=x1(n);await _1(e,t,!0,!1)}async function _1(n,t,e,i){const r=await wN(n.localStore,ts(t)),o=r.targetId,l=n.sharedClientState.addLocalQueryTarget(o,e);let u;return i&&(u=await ok(n,t,o,l==="current",r.resumeToken)),n.isPrimaryClient&&e&&o1(n.remoteStore,r),u}async function ok(n,t,e,i,r){n.pu=(_,b,E)=>(async function(w,D,z,F){let W=D.view.ru(z);W.Cs&&(W=await vE(w.localStore,D.query,!1).then((({documents:M})=>D.view.ru(M,W))));const Z=F&&F.targetChanges.get(D.targetId),$=F&&F.targetMismatches.get(D.targetId)!=null,st=D.view.applyChanges(W,w.isPrimaryClient,Z,$);return DE(w,D.targetId,st.au),st.snapshot})(n,_,b,E);const o=await vE(n.localStore,t,!0),l=new ek(t,o.Qs),u=l.ru(o.documents),f=Ru.createSynthesizedTargetChangeForCurrentChange(e,i&&n.onlineState!=="Offline",r),d=l.applyChanges(u,n.isPrimaryClient,f);DE(n,e,d.au);const p=new nk(t,e,l);return n.Tu.set(t,p),n.Iu.has(e)?n.Iu.get(e).push(t):n.Iu.set(e,[t]),d.snapshot}async function lk(n,t,e){const i=It(n),r=i.Tu.get(t),o=i.Iu.get(r.targetId);if(o.length>1)return i.Iu.set(r.targetId,o.filter((l=>!Nd(l,t)))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Zp(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),e&&t_(i.remoteStore,r.targetId),ny(i,r.targetId)})).catch(_l)):(ny(i,r.targetId),await Zp(i.localStore,r.targetId,!0))}async function ck(n,t){const e=It(n),i=e.Tu.get(t),r=e.Iu.get(i.targetId);e.isPrimaryClient&&r.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),t_(e.remoteStore,i.targetId))}async function uk(n,t,e){const i=yk(n);try{const r=await(function(l,u){const f=It(l),d=fe.now(),p=u.reduce(((E,S)=>E.add(S.key)),Ft());let _,b;return f.persistence.runTransaction("Locally write mutations","readwrite",(E=>{let S=js(),w=Ft();return f.Ns.getEntries(E,p).next((D=>{S=D,S.forEach(((z,F)=>{F.isValidDocument()||(w=w.add(z))}))})).next((()=>f.localDocuments.getOverlayedDocuments(E,S))).next((D=>{_=D;const z=[];for(const F of u){const W=AO(F,_.get(F.key).overlayedDocument);W!=null&&z.push(new Qr(F.key,W,AA(W.value.mapValue),Nn.exists(!0)))}return f.mutationQueue.addMutationBatch(E,d,z,u)})).next((D=>{b=D;const z=D.applyToLocalDocumentSet(_,w);return f.documentOverlayCache.saveOverlays(E,D.batchId,z)}))})).then((()=>({batchId:b.batchId,changes:VA(_)})))})(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),(function(l,u,f){let d=l.Vu[l.currentUser.toKey()];d||(d=new be(Bt)),d=d.insert(u,f),l.Vu[l.currentUser.toKey()]=d})(i,r.batchId,e),await Du(i,r.changes),await Bd(i.remoteStore)}catch(r){const o=r_(r,"Failed to persist write");e.reject(o)}}async function b1(n,t){const e=It(n);try{const i=await xN(e.localStore,t);t.targetChanges.forEach(((r,o)=>{const l=e.Au.get(o);l&&(Jt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?l.hu=!0:r.modifiedDocuments.size>0?Jt(l.hu,14607):r.removedDocuments.size>0&&(Jt(l.hu,42227),l.hu=!1))})),await Du(e,i,t)}catch(i){await _l(i)}}function IE(n,t,e){const i=It(n);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){const r=[];i.Tu.forEach(((o,l)=>{const u=l.view.va(t);u.snapshot&&r.push(u.snapshot)})),(function(l,u){const f=It(l);f.onlineState=u;let d=!1;f.queries.forEach(((p,_)=>{for(const b of _.Sa)b.va(u)&&(d=!0)})),d&&a_(f)})(i.eventManager,t),r.length&&i.Pu.H_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function hk(n,t,e){const i=It(n);i.sharedClientState.updateQueryState(t,"rejected",e);const r=i.Au.get(t),o=r&&r.key;if(o){let l=new be(_t.comparator);l=l.insert(o,gn.newNoDocument(o,wt.min()));const u=Ft().add(o),f=new zd(wt.min(),new Map,new be(Bt),l,u);await b1(i,f),i.du=i.du.remove(o),i.Au.delete(t),l_(i)}else await Zp(i.localStore,t,!1).then((()=>ny(i,t,e))).catch(_l)}async function fk(n,t){const e=It(n),i=t.batch.batchId;try{const r=await EN(e.localStore,t);T1(e,i,null),v1(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),await Du(e,r)}catch(r){await _l(r)}}async function dk(n,t,e){const i=It(n);try{const r=await(function(l,u){const f=It(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",(d=>{let p;return f.mutationQueue.lookupMutationBatch(d,u).next((_=>(Jt(_!==null,37113),p=_.keys(),f.mutationQueue.removeMutationBatch(d,_)))).next((()=>f.mutationQueue.performConsistencyCheck(d))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(d,p,u))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p))).next((()=>f.localDocuments.getDocuments(d,p)))}))})(i.localStore,t);T1(i,t,e),v1(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),await Du(i,r)}catch(r){await _l(r)}}function v1(n,t){(n.mu.get(t)||[]).forEach((e=>{e.resolve()})),n.mu.delete(t)}function T1(n,t,e){const i=It(n);let r=i.Vu[i.currentUser.toKey()];if(r){const o=r.get(t);o&&(e?o.reject(e):o.resolve(),r=r.remove(t)),i.Vu[i.currentUser.toKey()]=r}}function ny(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.Iu.get(t))n.Tu.delete(i),e&&n.Pu.yu(i,e);n.Iu.delete(t),n.isPrimaryClient&&n.Ru.jr(t).forEach((i=>{n.Ru.containsKey(i)||E1(n,i)}))}function E1(n,t){n.Eu.delete(t.path.canonicalString());const e=n.du.get(t);e!==null&&(t_(n.remoteStore,e),n.du=n.du.remove(t),n.Au.delete(e),l_(n))}function DE(n,t,e){for(const i of e)i instanceof p1?(n.Ru.addReference(i.key,t),gk(n,i)):i instanceof y1?(dt(o_,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,t),n.Ru.containsKey(i.key)||E1(n,i.key)):At(19791,{wu:i})}function gk(n,t){const e=t.key,i=e.path.canonicalString();n.du.get(e)||n.Eu.has(i)||(dt(o_,"New document in limbo: "+e),n.Eu.add(i),l_(n))}function l_(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const t=n.Eu.values().next().value;n.Eu.delete(t);const e=new _t(ce.fromString(t)),i=n.fu.next();n.Au.set(i,new ik(e)),n.du=n.du.insert(e,i),o1(n.remoteStore,new Sr(ts(Gy(e.path)),i,"TargetPurposeLimboResolution",Dd.ce))}}async function Du(n,t,e){const i=It(n),r=[],o=[],l=[];i.Tu.isEmpty()||(i.Tu.forEach(((u,f)=>{l.push(i.pu(f,t,e).then((d=>{var p;if((d||e)&&i.isPrimaryClient){const _=d?!d.fromCache:(p=e==null?void 0:e.targetChanges.get(f.targetId))==null?void 0:p.current;i.sharedClientState.updateQueryState(f.targetId,_?"current":"not-current")}if(d){r.push(d);const _=Jy.As(f.targetId,d);o.push(_)}})))})),await Promise.all(l),i.Pu.H_(r),await(async function(f,d){const p=It(f);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>rt.forEach(d,(b=>rt.forEach(b.Es,(E=>p.persistence.referenceDelegate.addReference(_,b.targetId,E))).next((()=>rt.forEach(b.ds,(E=>p.persistence.referenceDelegate.removeReference(_,b.targetId,E)))))))))}catch(_){if(!bl(_))throw _;dt(Zy,"Failed to update sequence numbers: "+_)}for(const _ of d){const b=_.targetId;if(!_.fromCache){const E=p.Ms.get(b),S=E.snapshotVersion,w=E.withLastLimboFreeSnapshotVersion(S);p.Ms=p.Ms.insert(b,w)}}})(i.localStore,o))}async function mk(n,t){const e=It(n);if(!e.currentUser.isEqual(t)){dt(o_,"User change. New user:",t.toKey());const i=await i1(e.localStore,t);e.currentUser=t,(function(o,l){o.mu.forEach((u=>{u.forEach((f=>{f.reject(new ht(it.CANCELLED,l))}))})),o.mu.clear()})(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await Du(e,i.Ls)}}function pk(n,t){const e=It(n),i=e.Au.get(t);if(i&&i.hu)return Ft().add(i.key);{let r=Ft();const o=e.Iu.get(t);if(!o)return r;for(const l of o){const u=e.Tu.get(l);r=r.unionWith(u.view.nu)}return r}}function x1(n){const t=It(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=b1.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=pk.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=hk.bind(null,t),t.Pu.H_=ZN.bind(null,t.eventManager),t.Pu.yu=tk.bind(null,t.eventManager),t}function yk(n){const t=It(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=fk.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=dk.bind(null,t),t}class gd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=jd(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return TN(this.persistence,new _N,t.initialUser,this.serializer)}Cu(t){return new n1($y.mi,this.serializer)}Du(t){return new RN}async terminate(){var t,e;(t=this.gcScheduler)==null||t.stop(),(e=this.indexBackfillerScheduler)==null||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gd.provider={build:()=>new gd};class _k extends gd{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){Jt(this.persistence.referenceDelegate instanceof fd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new iN(i,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?Dn.withCacheSize(this.cacheSizeBytes):Dn.DEFAULT;return new n1((i=>fd.mi(i,e)),this.serializer)}}class iy{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>IE(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=mk.bind(null,this.syncEngine),await QN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new JN})()}createDatastore(t){const e=jd(t.databaseInfo.databaseId),i=(function(o){return new NN(o)})(t.databaseInfo);return(function(o,l,u,f){return new LN(o,l,u,f)})(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return(function(i,r,o,l,u){return new jN(i,r,o,l,u)})(this.localStore,this.datastore,t.asyncQueue,(e=>IE(this.syncEngine,e,0)),(function(){return xE.v()?new xE:new IN})())}createSyncEngine(t,e){return(function(r,o,l,u,f,d,p){const _=new sk(r,o,l,u,f,d);return p&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await(async function(r){const o=It(r);dt(Wa,"RemoteStore shutting down."),o.Ea.add(5),await Iu(o),o.Aa.shutdown(),o.Ra.set("Unknown")})(this.remoteStore),(t=this.datastore)==null||t.terminate(),(e=this.eventManager)==null||e.terminate()}}iy.provider={build:()=>new iy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):zs("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout((()=>{this.muted||t(e)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fr="FirestoreClient";class bk{constructor(t,e,i,r,o){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=fn.UNAUTHENTICATED,this.clientId=jy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,(async l=>{dt(Fr,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(i,(l=>(dt(Fr,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new kr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const i=r_(e,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}async function pp(n,t){n.asyncQueue.verifyOperationInProgress(),dt(Fr,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener((async r=>{i.isEqual(r)||(await i1(t.localStore,r),i=r)})),t.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=t}async function ME(n,t){n.asyncQueue.verifyOperationInProgress();const e=await vk(n);dt(Fr,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener((i=>AE(t.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,r)=>AE(t.remoteStore,r))),n._onlineComponents=t}async function vk(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){dt(Fr,"Using user provided OfflineComponentProvider");try{await pp(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!(function(r){return r.name==="FirebaseError"?r.code===it.FAILED_PRECONDITION||r.code===it.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(e))throw e;rl("Error using user provided cache. Falling back to memory cache: "+e),await pp(n,new gd)}}else dt(Fr,"Using default OfflineComponentProvider"),await pp(n,new _k(void 0));return n._offlineComponents}async function A1(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(dt(Fr,"Using user provided OnlineComponentProvider"),await ME(n,n._uninitializedComponentsProvider._online)):(dt(Fr,"Using default OnlineComponentProvider"),await ME(n,new iy))),n._onlineComponents}function Tk(n){return A1(n).then((t=>t.syncEngine))}async function sy(n){const t=await A1(n),e=t.eventManager;return e.onListen=rk.bind(null,t.syncEngine),e.onUnlisten=lk.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=ak.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=ck.bind(null,t.syncEngine),e}function Ek(n,t,e={}){const i=new kr;return n.asyncQueue.enqueueAndForget((async()=>(function(o,l,u,f,d){const p=new S1({next:b=>{p.Nu(),l.enqueueAndForget((()=>g1(o,_))),b.fromCache&&f.source==="server"?d.reject(new ht(it.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(b)},error:b=>d.reject(b)}),_=new m1(u,p,{includeMetadataChanges:!0,qa:!0});return d1(o,_)})(await sy(n),n.asyncQueue,t,e,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w1(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1="firestore.googleapis.com",NE=!0;class kE{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new ht(it.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=C1,this.ssl=NE}else this.host=t.host,this.ssl=t.ssl??NE;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=e1;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<eN)throw new ht(it.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}jM("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=w1(t.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ht(it.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ht(it.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ht(it.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Fd{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ht(it.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ht(it.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kE(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new IM;switch(i.type){case"firstParty":return new NM(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ht(it.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){const i=OE.get(e);i&&(dt("ComponentProvider","Removing Datastore"),OE.delete(e),i.terminate())})(this),Promise.resolve()}}function xk(n,t,e,i={}){var d;n=Si(n,Fd);const r=gl(t),o=n._getSettings(),l={...o,emulatorOptions:n._getEmulatorOptions()},u=`${t}:${e}`;r&&(bS(`https://${u}`),vS("Firestore",!0)),o.host!==C1&&o.host!==u&&rl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...o,host:u,ssl:r,emulatorOptions:i};if(!Ha(f,l)&&(n._setSettings(f),i.mockUserToken)){let p,_;if(typeof i.mockUserToken=="string")p=i.mockUserToken,_=fn.MOCK_USER;else{p=zR(i.mockUserToken,(d=n._app)==null?void 0:d.options.projectId);const b=i.mockUserToken.sub||i.mockUserToken.user_id;if(!b)throw new ht(it.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new fn(b)}n._authCredentials=new DM(new dA(p,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new to(this.firestore,t,this._query)}}class Be{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Be(this.firestore,t,this._key)}toJSON(){return{type:Be._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,i){if(Au(e,Be._jsonSchema))return new Be(t,i||null,new _t(ce.fromString(e.referencePath)))}}Be._jsonSchemaVersion="firestore/documentReference/1.0",Be._jsonSchema={type:Ue("string",Be._jsonSchemaVersion),referencePath:Ue("string")};class Pr extends to{constructor(t,e,i){super(t,e,Gy(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Be(this.firestore,null,new _t(t))}withConverter(t){return new Pr(this.firestore,t,this._path)}}function Sk(n,t,...e){if(n=Fe(n),gA("collection","path",t),n instanceof Fd){const i=ce.fromString(t,...e);return KT(i),new Pr(n,null,i)}{if(!(n instanceof Be||n instanceof Pr))throw new ht(it.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(ce.fromString(t,...e));return KT(i),new Pr(n.firestore,null,i)}}function md(n,t,...e){if(n=Fe(n),arguments.length===1&&(t=jy.newId()),gA("doc","path",t),n instanceof Fd){const i=ce.fromString(t,...e);return YT(i),new Be(n,null,new _t(i))}{if(!(n instanceof Be||n instanceof Pr))throw new ht(it.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(ce.fromString(t,...e));return YT(i),new Be(n.firestore,n instanceof Pr?n.converter:null,new _t(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE="AsyncQueue";class VE{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new r1(this,"async_queue_retry"),this._c=()=>{const i=mp();i&&dt(PE,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const e=mp();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=mp();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const e=new kr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!bl(t))throw t;dt(PE,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const e=this.ac.then((()=>(this.rc=!0,t().catch((i=>{throw this.nc=i,this.rc=!1,zs("INTERNAL UNHANDLED ERROR: ",LE(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=e,e}enqueueAfterDelay(t,e,i){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const r=s_.createAndSchedule(this,t,e,i,(o=>this.hc(o)));return this.tc.push(r),r}uc(){this.nc&&At(47125,{Pc:LE(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((e,i)=>e.targetTimeMs-i.targetTimeMs));for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function LE(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zE(n){return(function(e,i){if(typeof e!="object"||e===null)return!1;const r=e;for(const o of i)if(o in r&&typeof r[o]=="function")return!0;return!1})(n,["next","error","complete"])}class Hr extends Fd{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=new VE,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new VE(t),this._firestoreClient=void 0,await t}}}function Ak(n,t){const e=typeof n=="object"?n:SS(),i=typeof n=="string"?n:rd,r=Cy(e,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=VR("firestore");o&&xk(r,...o)}return r}function Hd(n){if(n._terminated)throw new ht(it.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||wk(n),n._firestoreClient}function wk(n){var i,r,o;const t=n._freezeSettings(),e=(function(u,f,d,p){return new QM(u,f,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,w1(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,t);n._componentsProvider||(r=t.localCache)!=null&&r._offlineComponentProvider&&((o=t.localCache)!=null&&o._onlineComponentProvider)&&(n._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),n._firestoreClient=new bk(n._authCredentials,n._appCheckCredentials,n._queue,e,n._componentsProvider&&(function(u){const f=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(f),_online:f}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(t){this._byteString=t}static fromBase64String(t){try{return new ai(ln.fromBase64String(t))}catch(e){throw new ht(it.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new ai(ln.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:ai._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Au(t,ai._jsonSchema))return ai.fromBase64String(t.bytes)}}ai._jsonSchemaVersion="firestore/bytes/1.0",ai._jsonSchema={type:Ue("string",ai._jsonSchemaVersion),bytes:Ue("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new ht(it.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new on(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new ht(it.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ht(it.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Bt(this._lat,t._lat)||Bt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ns._jsonSchemaVersion}}static fromJSON(t){if(Au(t,ns._jsonSchema))return new ns(t.latitude,t.longitude)}}ns._jsonSchemaVersion="firestore/geoPoint/1.0",ns._jsonSchema={type:Ue("string",ns._jsonSchemaVersion),latitude:Ue("number"),longitude:Ue("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(t){this._values=(t||[]).map((e=>e))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0})(this._values,t._values)}toJSON(){return{type:is._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Au(t,is._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e=="number")))return new is(t.vectorValues);throw new ht(it.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}is._jsonSchemaVersion="firestore/vectorValue/1.0",is._jsonSchema={type:Ue("string",is._jsonSchemaVersion),vectorValues:Ue("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ck=/^__.*__$/;class Rk{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new Qr(t,this.data,this.fieldMask,e,this.fieldTransforms):new Cu(t,this.data,e,this.fieldTransforms)}}class R1{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new Qr(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function I1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw At(40011,{Ac:n})}}class u_{constructor(t,e,i,r,o,l){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new u_({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var r;const e=(r=this.path)==null?void 0:r.child(t),i=this.Vc({path:e,fc:!1});return i.gc(t),i}yc(t){var r;const e=(r=this.path)==null?void 0:r.child(t),i=this.Vc({path:e,fc:!1});return i.Rc(),i}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return pd(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((e=>t.isPrefixOf(e)))!==void 0||this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(I1(this.Ac)&&Ck.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class Ik{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||jd(t)}Cc(t,e,i,r=!1){return new u_({Ac:t,methodName:e,Dc:i,path:on.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gd(n){const t=n._freezeSettings(),e=jd(n._databaseId);return new Ik(n._databaseId,!!t.ignoreUndefinedProperties,e)}function h_(n,t,e,i,r,o={}){const l=n.Cc(o.merge||o.mergeFields?2:0,t,e,r);f_("Data must be an object, but it was:",l,i);const u=D1(i,l);let f,d;if(o.merge)f=new Gn(l.fieldMask),d=l.fieldTransforms;else if(o.mergeFields){const p=[];for(const _ of o.mergeFields){const b=ry(t,_,e);if(!l.contains(b))throw new ht(it.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);O1(p,b)||p.push(b)}f=new Gn(p),d=l.fieldTransforms.filter((_=>f.covers(_.field)))}else f=null,d=l.fieldTransforms;return new Rk(new Mn(u),f,d)}class Yd extends c_{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Yd}}function Dk(n,t,e,i){const r=n.Cc(1,t,e);f_("Data must be an object, but it was:",r,i);const o=[],l=Mn.empty();Xr(i,((f,d)=>{const p=d_(t,f,e);d=Fe(d);const _=r.yc(p);if(d instanceof Yd)o.push(p);else{const b=Mu(d,_);b!=null&&(o.push(p),l.set(p,b))}}));const u=new Gn(o);return new R1(l,u,r.fieldTransforms)}function Mk(n,t,e,i,r,o){const l=n.Cc(1,t,e),u=[ry(t,i,e)],f=[r];if(o.length%2!=0)throw new ht(it.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<o.length;b+=2)u.push(ry(t,o[b])),f.push(o[b+1]);const d=[],p=Mn.empty();for(let b=u.length-1;b>=0;--b)if(!O1(d,u[b])){const E=u[b];let S=f[b];S=Fe(S);const w=l.yc(E);if(S instanceof Yd)d.push(E);else{const D=Mu(S,w);D!=null&&(d.push(E),p.set(E,D))}}const _=new Gn(d);return new R1(p,_,l.fieldTransforms)}function Ok(n,t,e,i=!1){return Mu(e,n.Cc(i?4:3,t))}function Mu(n,t){if(M1(n=Fe(n)))return f_("Unsupported field value:",t,n),D1(n,t);if(n instanceof c_)return(function(i,r){if(!I1(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)})(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(i,r){const o=[];let l=0;for(const u of i){let f=Mu(u,r.wc(l));f==null&&(f={nullValue:"NULL_VALUE"}),o.push(f),l++}return{arrayValue:{values:o}}})(n,t)}return(function(i,r){if((i=Fe(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return bO(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=fe.fromDate(i);return{timestampValue:hd(r.serializer,o)}}if(i instanceof fe){const o=new fe(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:hd(r.serializer,o)}}if(i instanceof ns)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ai)return{bytesValue:WA(r.serializer,i._byteString)};if(i instanceof Be){const o=r.databaseId,l=i.firestore._databaseId;if(!l.isEqual(o))throw r.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Xy(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof is)return(function(l,u){return{mapValue:{fields:{[xA]:{stringValue:SA},[ad]:{arrayValue:{values:l.toArray().map((d=>{if(typeof d!="number")throw u.Sc("VectorValues must only contain numeric values.");return Yy(u.serializer,d)}))}}}}}})(i,r);throw r.Sc(`Unsupported field value: ${Id(i)}`)})(n,t)}function D1(n,t){const e={};return yA(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Xr(n,((i,r)=>{const o=Mu(r,t.mc(i));o!=null&&(e[i]=o)})),{mapValue:{fields:e}}}function M1(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof fe||n instanceof ns||n instanceof ai||n instanceof Be||n instanceof c_||n instanceof is)}function f_(n,t,e){if(!M1(e)||!mA(e)){const i=Id(e);throw i==="an object"?t.Sc(n+" a custom object"):t.Sc(n+" "+i)}}function ry(n,t,e){if((t=Fe(t))instanceof qd)return t._internalPath;if(typeof t=="string")return d_(n,t);throw pd("Field path arguments must be of type string or ",n,!1,void 0,e)}const Nk=new RegExp("[~\\*/\\[\\]]");function d_(n,t,e){if(t.search(Nk)>=0)throw pd(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new qd(...t.split("."))._internalPath}catch{throw pd(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function pd(n,t,e,i,r){const o=i&&!i.isEmpty(),l=r!==void 0;let u=`Function ${t}() called with invalid data`;e&&(u+=" (via `toFirestore()`)"),u+=". ";let f="";return(o||l)&&(f+=" (found",o&&(f+=` in field ${i}`),l&&(f+=` in document ${r}`),f+=")"),new ht(it.INVALID_ARGUMENT,u+n+f)}function O1(n,t){return n.some((e=>e.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(t,e,i,r,o){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Be(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new kk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(k1("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class kk extends N1{data(){return super.data()}}function k1(n,t){return typeof t=="string"?d_(n,t):t instanceof qd?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ht(it.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class g_{}class Pk extends g_{}function Vk(n,t,...e){let i=[];t instanceof g_&&i.push(t),i=i.concat(e),(function(o){const l=o.filter((f=>f instanceof p_)).length,u=o.filter((f=>f instanceof m_)).length;if(l>1||l>0&&u>0)throw new ht(it.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const r of i)n=r._apply(n);return n}class m_ extends Pk{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new m_(t,e,i)}_apply(t){const e=this._parse(t);return V1(t._query,e),new to(t.firestore,t.converter,Kp(t._query,e))}_parse(t){const e=Gd(t.firestore);return(function(o,l,u,f,d,p,_){let b;if(d.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new ht(it.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){UE(_,p);const S=[];for(const w of _)S.push(jE(f,o,w));b={arrayValue:{values:S}}}else b=jE(f,o,_)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||UE(_,p),b=Ok(u,l,_,p==="in"||p==="not-in");return je.create(d,p,b)})(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}class p_ extends g_{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new p_(t,e)}_parse(t){const e=this._queryConstraints.map((i=>i._parse(t))).filter((i=>i.getFilters().length>0));return e.length===1?e[0]:wi.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:((function(r,o){let l=r;const u=o.getFlattenedFilters();for(const f of u)V1(l,f),l=Kp(l,f)})(t._query,e),new to(t.firestore,t.converter,Kp(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function jE(n,t,e){if(typeof(e=Fe(e))=="string"){if(e==="")throw new ht(it.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!OA(t)&&e.indexOf("/")!==-1)throw new ht(it.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(ce.fromString(e));if(!_t.isDocumentKey(i))throw new ht(it.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return eE(n,new _t(i))}if(e instanceof Be)return eE(n,e._key);throw new ht(it.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Id(e)}.`)}function UE(n,t){if(!Array.isArray(n)||n.length===0)throw new ht(it.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function V1(n,t){const e=(function(r,o){for(const l of r)for(const u of l.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null})(n.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(e!==null)throw e===t.op?new ht(it.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ht(it.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class Lk{convertValue(t,e="none"){switch(Ur(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ce(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(jr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw At(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return Xr(t,((r,o)=>{i[r]=this.convertValue(o,e)})),i}convertVectorValue(t){var i,r,o;const e=(o=(r=(i=t.fields)==null?void 0:i[ad].arrayValue)==null?void 0:r.values)==null?void 0:o.map((l=>Ce(l.doubleValue)));return new is(e)}convertGeoPoint(t){return new ns(Ce(t.latitude),Ce(t.longitude))}convertArray(t,e){return(t.values||[]).map((i=>this.convertValue(i,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const i=Od(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(au(t));default:return null}}convertTimestamp(t){const e=zr(t);return new fe(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=ce.fromString(t);Jt(t1(i),9688,{name:t});const r=new ou(i.get(1),i.get(3)),o=new _t(i.popFirst(5));return r.isEqual(e)||zs(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y_(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}class zc{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class ja extends N1{constructor(t,e,i,r,o,l){super(t,e,i,r,l),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Uf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(k1("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ht(it.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=ja._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}ja._jsonSchemaVersion="firestore/documentSnapshot/1.0",ja._jsonSchema={type:Ue("string",ja._jsonSchemaVersion),bundleSource:Ue("string","DocumentSnapshot"),bundleName:Ue("string"),bundle:Ue("string")};class Uf extends ja{data(t={}){return super.data(t)}}class Ua{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new zc(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach((i=>{t.call(e,new Uf(this._firestore,this._userDataWriter,i.key,i,new zc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ht(it.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=(function(r,o){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map((u=>{const f=new Uf(r._firestore,r._userDataWriter,u.doc.key,u.doc,new zc(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:f,oldIndex:-1,newIndex:l++}}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((u=>o||u.type!==3)).map((u=>{const f=new Uf(r._firestore,r._userDataWriter,u.doc.key,u.doc,new zc(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let d=-1,p=-1;return u.type!==0&&(d=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),u.type!==1&&(l=l.add(u.doc),p=l.indexOf(u.doc.key)),{type:zk(u.type),doc:f,oldIndex:d,newIndex:p}}))}})(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ht(it.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Ua._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=jy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],i=[],r=[];return this.docs.forEach((o=>{o._document!==null&&(e.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function zk(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return At(61501,{type:n})}}Ua._jsonSchemaVersion="firestore/querySnapshot/1.0",Ua._jsonSchema={type:Ue("string",Ua._jsonSchemaVersion),bundleSource:Ue("string","QuerySnapshot"),bundleName:Ue("string"),bundle:Ue("string")};class __ extends Lk{constructor(t){super(),this.firestore=t}convertBytes(t){return new ai(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Be(this.firestore,null,e)}}function jk(n){n=Si(n,to);const t=Si(n.firestore,Hr),e=Hd(t),i=new __(t);return P1(n._query),Ek(e,n._query).then((r=>new Ua(t,i,n,r)))}function ay(n,t,e){n=Si(n,Be);const i=Si(n.firestore,Hr),r=y_(n.converter,t,e);return Kd(i,[h_(Gd(i),"setDoc",n._key,r,n.converter!==null,e).toMutation(n._key,Nn.none())])}function Uk(n){return Kd(Si(n.firestore,Hr),[new Ld(n._key,Nn.none())])}function Bk(n,t){const e=Si(n.firestore,Hr),i=md(n),r=y_(n.converter,t);return Kd(e,[h_(Gd(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,Nn.exists(!1))]).then((()=>i))}function L1(n,...t){var f,d,p;n=Fe(n);let e={includeMetadataChanges:!1,source:"default"},i=0;typeof t[i]!="object"||zE(t[i])||(e=t[i++]);const r={includeMetadataChanges:e.includeMetadataChanges,source:e.source};if(zE(t[i])){const _=t[i];t[i]=(f=_.next)==null?void 0:f.bind(_),t[i+1]=(d=_.error)==null?void 0:d.bind(_),t[i+2]=(p=_.complete)==null?void 0:p.bind(_)}let o,l,u;if(n instanceof Be)l=Si(n.firestore,Hr),u=Gy(n._key.path),o={next:_=>{t[i]&&t[i](Fk(l,n,_))},error:t[i+1],complete:t[i+2]};else{const _=Si(n,to);l=Si(_.firestore,Hr),u=_._query;const b=new __(l);o={next:E=>{t[i]&&t[i](new Ua(l,b,_,E))},error:t[i+1],complete:t[i+2]},P1(n._query)}return(function(b,E,S,w){const D=new S1(w),z=new m1(E,D,S);return b.asyncQueue.enqueueAndForget((async()=>d1(await sy(b),z))),()=>{D.Nu(),b.asyncQueue.enqueueAndForget((async()=>g1(await sy(b),z)))}})(Hd(l),u,r,o)}function Kd(n,t){return(function(i,r){const o=new kr;return i.asyncQueue.enqueueAndForget((async()=>uk(await Tk(i),r,o))),o.promise})(Hd(n),t)}function Fk(n,t,e){const i=e.docs.get(t._key),r=new __(n);return new ja(n,r,t._key,i,new zc(e.hasPendingWrites,e.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Gd(t)}set(t,e,i){this._verifyNotCommitted();const r=yp(t,this._firestore),o=y_(r.converter,e,i),l=h_(this._dataReader,"WriteBatch.set",r._key,o,r.converter!==null,i);return this._mutations.push(l.toMutation(r._key,Nn.none())),this}update(t,e,i,...r){this._verifyNotCommitted();const o=yp(t,this._firestore);let l;return l=typeof(e=Fe(e))=="string"||e instanceof qd?Mk(this._dataReader,"WriteBatch.update",o._key,e,i,r):Dk(this._dataReader,"WriteBatch.update",o._key,e),this._mutations.push(l.toMutation(o._key,Nn.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=yp(t,this._firestore);return this._mutations=this._mutations.concat(new Ld(e._key,Nn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ht(it.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function yp(n,t){if((n=Fe(n)).firestore!==t)throw new ht(it.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qk(n){return Hd(n=Si(n,Hr)),new Hk(n,(t=>Kd(n,t)))}(function(t,e=!0){(function(r){yl=r})(ml),sl(new qa("firestore",((i,{instanceIdentifier:r,options:o})=>{const l=i.getProvider("app").getImmediate(),u=new Hr(new MM(i.getProvider("auth-internal")),new kM(l,i.getProvider("app-check-internal")),(function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ht(it.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ou(d.options.projectId,p)})(l,r),l);return o={useFetchStreams:e,...o},u._setSettings(o),u}),"PUBLIC").setMultipleInstances(!0)),Or(FT,HT,t),Or(FT,HT,"esm2020")})();const Gk={apiKey:"AIzaSyDj9amBZsMkLeDIIWqUXhc19uwrxzhWGrg",authDomain:"trada-1992a.firebaseapp.com",projectId:"trada-1992a",storageBucket:"trada-1992a.firebasestorage.app",messagingSenderId:"835411805747",appId:"1:835411805747:web:447c3f8d2ecf73f3f4c546",measurementId:"G-2BZQ0EBZDF"},z1=xS(Gk),Cc=CM(z1),oy=Ak(z1),Yk=new Is;function Kk(){const[n,t]=pt.useState(null),[e,i]=pt.useState(!0);return pt.useEffect(()=>mD(Cc,d=>{t(d),i(!1)}),[]),{user:n,login:(f,d)=>fD(Cc,f,d),signup:(f,d)=>hD(Cc,f,d),logout:()=>pD(Cc),loginWithGoogle:()=>VD(Cc,Yk),loading:e}}function Wk(){const[n,t]=pt.useState("dark");pt.useEffect(()=>{const i=localStorage.getItem("theme"),r=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;t(i||(r?"dark":"light"))},[]),pt.useEffect(()=>{n==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",n)},[n]);const e=pt.useCallback(()=>{t(i=>i==="light"?"dark":"light")},[]);return[n,e]}const Xk=({login:n,signup:t,loginWithGoogle:e})=>{const[i,r]=pt.useState(!0),[o,l]=pt.useState(""),[u,f]=pt.useState(""),[d,p]=pt.useState(""),[_,b]=pt.useState(!1),E=async w=>{w.preventDefault(),p(""),b(!0);try{i?await n(o,u):await t(o,u)}catch(D){p(D.message||"Failed to authenticate")}b(!1)},S=async()=>{p(""),b(!0);try{await e()}catch(w){p(w.message||"Failed to sign in with Google.")}b(!1)};return R.jsx("div",{className:"bg-gray-100 dark:bg-gray-900 min-h-screen flex items-center justify-center p-4",children:R.jsxs("div",{className:"w-full max-w-md",children:[R.jsxs("div",{className:"text-center mb-8",children:[R.jsx("h1",{className:"text-4xl font-bold text-primary",children:"TRADA"}),R.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Your Personal Crypto Trading Journal"})]}),R.jsxs("div",{className:"bg-white dark:bg-gray-800/50 dark:backdrop-blur-sm border border-gray-200 dark:border-gray-700/50 rounded-xl shadow-lg p-8",children:[R.jsx("h2",{className:"text-xl font-bold mb-4 text-primary text-center",children:i?"Login":"Sign Up"}),R.jsxs("form",{onSubmit:E,className:"space-y-6",children:[d&&R.jsx("p",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded text-sm",children:d}),R.jsxs("div",{children:[R.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email Address"}),R.jsx("div",{className:"mt-1",children:R.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:o,onChange:w=>l(w.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary focus:border-primary sm:text-sm bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-white"})})]}),R.jsxs("div",{children:[R.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),R.jsx("div",{className:"mt-1",children:R.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:u,onChange:w=>f(w.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary focus:border-primary sm:text-sm bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-white"})})]}),R.jsx("div",{children:R.jsx("button",{type:"submit",disabled:_,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-gray-900 bg-primary hover:brightness-95 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:opacity-50",children:_?"Processing...":i?"Sign in":"Create account"})})]}),R.jsxs("div",{className:"mt-6",children:[R.jsxs("div",{className:"relative",children:[R.jsx("div",{className:"absolute inset-0 flex items-center",children:R.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),R.jsx("div",{className:"relative flex justify-center text-sm",children:R.jsx("span",{className:"px-2 bg-white dark:bg-gray-800 text-gray-500 dark:text-gray-400",children:"OR"})})]}),R.jsx("div",{className:"mt-6",children:R.jsxs("button",{onClick:S,disabled:_,type:"button",className:"w-full inline-flex justify-center py-2 px-4 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-800 text-sm font-medium text-gray-500 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50",children:[R.jsxs("svg",{className:"w-5 h-5 mr-2",role:"img","aria-hidden":"true",focusable:"false",viewBox:"0 0 24 24",children:[R.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),R.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),R.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z",fill:"#FBBC05"}),R.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Sign in with Google"]})})]}),R.jsx("div",{className:"mt-6 text-center",children:R.jsx("button",{onClick:()=>r(!i),className:"font-medium text-primary hover:underline text-sm",children:i?"Don't have an account? Sign up":"Already have an account? Sign in"})})]})]})})};function Qk(n,t){const[e,i]=pt.useState([]),[r,o]=pt.useState(!0),[l,u]=pt.useState(null),f=pt.useMemo(()=>t?Sk(oy,"users",t,n):null,[t,n]);pt.useEffect(()=>{if(!f){i([]),o(!1);return}const E=Vk(f),S=L1(E,w=>{const D=[];w.forEach(z=>{D.push({id:z.id,...z.data()})}),i(D),o(!1)},w=>{u(w),o(!1),console.error(`Firestore error listening to ${n}:`,w)});return()=>S()},[f,n]);const d=pt.useCallback(async E=>{if(f)try{await Bk(f,E)}catch(S){u(S),console.error(`Firestore error adding to ${n}:`,S)}},[f,n]),p=pt.useCallback(async()=>{if(f)try{const E=await jk(f),S=qk(oy);E.forEach(w=>{S.delete(w.ref)}),await S.commit()}catch(E){u(E),console.error(`Firestore error clearing ${n}:`,E)}},[f,n]),_=pt.useCallback(async E=>{if(f)try{const S=md(f,E);await Uk(S)}catch(S){u(S),console.error(`Firestore error deleting from ${n}:`,S)}},[f,n]),b=pt.useCallback(async(E,S)=>{if(f)try{const w=md(f,E);await ay(w,S,{merge:!0})}catch(w){u(w),console.error(`Firestore error updating ${n}:`,w)}},[f,n]);return{data:e,loading:r,error:l,addDocument:d,clearCollection:p,deleteDocument:_,updateDocument:b}}function BE(n,t,e){const[i,r]=pt.useState(e),[o,l]=pt.useState(!0),[u,f]=pt.useState(null),d=pt.useMemo(()=>t?md(oy,"users",t,n,"data"):null,[t,n]);pt.useEffect(()=>{if(!d){r(e),l(!1);return}const _=L1(d,b=>{b.exists()?r(b.data()):(ay(d,e),r(e)),l(!1)},b=>{f(b),l(!1),console.error(`Firestore error listening to doc ${n}/data:`,b)});return()=>_()},[d]);const p=pt.useCallback(async _=>{if(d)try{await ay(d,_,{merge:!0})}catch(b){f(b),console.error(`Firestore error updating doc ${n}/data:`,b)}},[d,n]);return{data:i,loading:o,error:u,updateDocument:p}}const $k=n=>{if(n.status!=="closed")throw new Error("Cannot calculate PnL for an open trade");const t=n.exitPrice??n.entryPrice,e=n.fees??0,i=n.margin*n.leverage,r=i/n.entryPrice,o=n.direction==="Long"?1:-1,l=(t-n.entryPrice)*r*o-e,u=(t-n.entryPrice)/n.entryPrice*o*100,f=l/n.margin*100,d=i*(n.riskPercent/100);return{pnlNet:l,pnlAssetPercent:u,pnlMarginPercent:f,positionSize:r,riskAmount:d}},Jk=(n,t)=>{const e=t.reduce((d,p)=>d+p.pnlNet,0),i=n.initial+n.deposits+e,r=t.filter(d=>d.pnlNet>0).length,o=t.length>0?r/t.length*100:0,l=t.filter(d=>d.pnlNet>0).reduce((d,p)=>d+p.pnlNet,0),u=Math.abs(t.filter(d=>d.pnlNet<0).reduce((d,p)=>d+p.pnlNet,0)),f=u>0?l/u:1/0;return{currentCapital:i,totalPnl:e,winRate:o,profitFactor:f}},Xa=({title:n,children:t,className:e="",titleClassName:i=""})=>R.jsxs("div",{className:`bg-white dark:bg-gray-800/50 dark:backdrop-blur-sm border border-gray-200 dark:border-gray-700/50 rounded-xl shadow-lg p-6 ${e}`,children:[n&&R.jsx("h2",{className:`text-xl font-bold mb-4 text-primary ${i}`,children:n}),t]}),Zk=({capital:n,setCapital:t,onAddDeposit:e})=>{const[i,r]=pt.useState(!0),[o,l]=pt.useState(""),[u,f]=pt.useState(n.initial.toString());pt.useEffect(()=>{f(n.initial.toString())},[n.initial]);const d=()=>{const b=parseFloat(o);!isNaN(b)&&b>0&&(e(b),l(""))},p=b=>{f(b.target.value)},_=()=>{const b=parseFloat(u),E=isNaN(b)?0:b;E!==n.initial&&t({initial:E})};return R.jsxs(Xa,{children:[R.jsxs("div",{onClick:()=>r(!i),className:"flex justify-between items-center cursor-pointer",children:[R.jsx("h2",{className:"text-xl font-bold text-primary",children:"Capital Management"}),R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2.5,stroke:"currentColor",className:`w-5 h-5 text-gray-500 dark:text-gray-400 transform transition-transform duration-300 ${i?"":"rotate-180"}`,children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"})})]}),R.jsx("div",{className:`transition-all duration-300 ease-in-out overflow-hidden ${i?"max-h-96 mt-4 opacity-100":"max-h-0 mt-0 opacity-0"}`,children:R.jsxs("div",{className:"space-y-4",children:[R.jsxs("div",{children:[R.jsx("label",{htmlFor:"initialCapital",className:"block text-sm font-medium text-gray-600 dark:text-gray-400",children:"Initial Capital ($)"}),R.jsx("input",{type:"number",id:"initialCapital",value:u,onChange:p,onBlur:_,className:"mt-1 block w-full bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-md shadow-sm py-2 px-3 text-gray-800 dark:text-white focus:outline-none focus:ring-primary focus:border-primary",placeholder:"e.g., 1000"})]}),R.jsxs("div",{className:"flex items-end space-x-2",children:[R.jsxs("div",{className:"flex-grow",children:[R.jsx("label",{htmlFor:"addDeposit",className:"block text-sm font-medium text-gray-600 dark:text-gray-400",children:"Add Deposit ($)"}),R.jsx("input",{type:"number",id:"addDeposit",value:o,onChange:b=>l(b.target.value),className:"mt-1 block w-full bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-md shadow-sm py-2 px-3 text-gray-800 dark:text-white focus:outline-none focus:ring-primary focus:border-primary",placeholder:"e.g., 500"})]}),R.jsx("button",{onClick:d,className:"bg-primary hover:brightness-95 text-gray-900 font-bold py-2 px-4 rounded-md transition duration-300 h-10",children:"Add"})]})]})})]})},tP=({metrics:n,onOpenAnalytics:t})=>{const e=(r,o="",l=2)=>isFinite(r)?`${r.toFixed(l)}${o}`:r>0?`${o}`:"N/A",i=n.totalPnl>=0?"text-green-500":"text-red-500";return R.jsxs(Xa,{title:"Performance Dashboard",children:[R.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[R.jsxs("div",{children:[R.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Current Capital"}),R.jsxs("p",{className:"text-2xl font-bold",children:["$",e(n.currentCapital)]})]}),R.jsxs("div",{children:[R.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total P/L ($)"}),R.jsxs("p",{className:`text-2xl font-bold ${i}`,children:["$",e(n.totalPnl)]})]}),R.jsxs("div",{children:[R.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Win Rate"}),R.jsx("p",{className:"text-2xl font-bold",children:e(n.winRate,"%")})]}),R.jsxs("div",{children:[R.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Profit Factor"}),R.jsx("p",{className:"text-2xl font-bold",children:e(n.profitFactor)})]})]}),R.jsx("div",{className:"mt-6 text-center",children:R.jsx("button",{onClick:t,className:"bg-primary hover:brightness-95 text-gray-900 font-bold py-2 px-6 rounded-md transition duration-300",children:"Performance Analytics"})})]})},FE=6,Rn=n=>{const t=Math.pow(10,FE);return(Math.trunc(n*t)/t).toFixed(FE)},eP=({trades:n,onDeleteTrade:t,onEditTrade:e})=>{const i=pt.useMemo(()=>n.reduce((u,f)=>(u.pnlNet+=f.pnlNet,u.fees+=f.fees,u.riskAmount+=f.riskAmount,u.margin+=f.margin,u),{pnlNet:0,fees:0,riskAmount:0,margin:0}),[n]),r=u=>u>=0?"text-green-500":"text-red-500",o=u=>{window.confirm("Delete this trade? This action cannot be undone.")&&t(u)},l=u=>{e(u)};return R.jsxs(Xa,{children:[R.jsx("div",{className:"flex justify-between items-center mb-4",children:R.jsx("h2",{className:"text-xl font-bold text-primary",children:"Trade Log"})}),R.jsx("div",{className:"overflow-x-auto",children:R.jsxs("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[R.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-100 dark:bg-gray-700 dark:text-gray-300",children:R.jsxs("tr",{children:[R.jsx("th",{scope:"col",className:"py-3 px-2",children:"Date"}),R.jsx("th",{scope:"col",className:"py-3 px-2",children:"Pair"}),R.jsx("th",{scope:"col",className:"py-3 px-2",children:"Direction"}),R.jsx("th",{scope:"col",className:"py-3 px-2",children:"Entry"}),R.jsx("th",{scope:"col",className:"py-3 px-2",children:"Exit"}),R.jsx("th",{scope:"col",className:"py-3 px-2",children:"Closed"}),R.jsx("th",{scope:"col",className:"py-3 px-2",children:"Pos. Size"}),R.jsx("th",{scope:"col",className:"py-3 px-2",children:"Leverage"}),R.jsx("th",{scope:"col",className:"py-3 px-2",children:"Margin ($)"}),R.jsx("th",{scope:"col",className:"py-3 px-2",children:"R/R"}),R.jsx("th",{scope:"col",className:"py-3 px-2",children:"Risk ($)"}),R.jsx("th",{scope:"col",className:"py-3 px-2",children:"Fees ($)"}),R.jsx("th",{scope:"col",className:"py-3 px-2",children:"P/L ($)"}),R.jsx("th",{scope:"col",className:"py-3 px-2",children:"P/L Asset %"}),R.jsx("th",{scope:"col",className:"py-3 px-2",children:"P/L Margin %"}),R.jsx("th",{scope:"col",className:"py-3 px-2",children:"Capital End"}),R.jsx("th",{scope:"col",className:"py-3 px-2",children:"Strategy"}),R.jsx("th",{scope:"col",className:"py-3 px-2",children:"Actions"})]})}),R.jsxs("tbody",{children:[n.map(u=>R.jsxs("tr",{className:"bg-white dark:bg-gray-800 border-b dark:border-gray-700",children:[R.jsx("td",{className:"py-2 px-2",children:new Date(u.dateTime).toLocaleString()}),R.jsx("td",{className:"py-2 px-2 font-medium",children:u.pair}),R.jsx("td",{className:`py-2 px-2 font-semibold ${u.direction==="Long"?"text-green-500":"text-red-500"}`,children:u.direction}),R.jsx("td",{className:"py-2 px-2",children:Rn(u.entryPrice)}),R.jsx("td",{className:"py-2 px-2",children:Rn(u.exitPrice)}),R.jsx("td",{className:"py-2 px-2",children:u.closeDateTime?new Date(u.closeDateTime).toLocaleString():""}),R.jsx("td",{className:"py-2 px-2",children:Rn(u.positionSize)}),R.jsxs("td",{className:"py-2 px-2",children:[u.leverage,"x"]}),R.jsx("td",{className:"py-2 px-2",children:Rn(u.margin)}),R.jsx("td",{className:"py-2 px-2",children:u.riskReward}),R.jsx("td",{className:"py-2 px-2",children:Rn(u.riskAmount)}),R.jsx("td",{className:"py-2 px-2",children:Rn(u.fees)}),R.jsx("td",{className:`py-2 px-2 font-bold ${r(u.pnlNet)}`,children:Rn(u.pnlNet)}),R.jsxs("td",{className:`py-2 px-2 ${r(u.pnlAssetPercent)}`,children:[Rn(u.pnlAssetPercent),"%"]}),R.jsxs("td",{className:`py-2 px-2 ${r(u.pnlMarginPercent)}`,children:[Rn(u.pnlMarginPercent),"%"]}),R.jsx("td",{className:"py-2 px-2",children:Rn(u.capitalEnd)}),R.jsx("td",{className:"py-2 px-2",children:u.strategy}),R.jsxs("td",{className:"py-2 px-2 space-x-2 whitespace-nowrap",children:[R.jsx("button",{onClick:()=>l(u.id),className:"text-primary hover:brightness-90 font-semibold text-xs",children:"Edit"}),R.jsx("button",{onClick:()=>o(u.id),className:"text-red-600 hover:text-red-500 font-semibold text-xs",children:"Delete"})]})]},u.id)),n.length===0&&R.jsx("tr",{children:R.jsx("td",{colSpan:18,className:"text-center py-4",children:"No trades logged yet."})})]}),R.jsx("tfoot",{children:R.jsxs("tr",{className:"font-bold text-gray-800 dark:text-gray-200 bg-gray-100 dark:bg-gray-700",children:[R.jsx("td",{colSpan:8,className:"py-2 px-2 text-right",children:"Totals:"}),R.jsx("td",{className:"py-2 px-2",children:Rn(i.margin)}),R.jsx("td",{className:"py-2 px-2"}),R.jsx("td",{className:"py-2 px-2",children:Rn(i.riskAmount)}),R.jsx("td",{className:"py-2 px-2",children:Rn(i.fees)}),R.jsx("td",{className:`py-2 px-2 ${r(i.pnlNet)}`,children:Rn(i.pnlNet)}),R.jsx("td",{colSpan:4,className:"py-2 px-2"}),R.jsx("td",{className:"py-2 px-2"})]})})]})})]})},nP=["default","gray","red","green","blue","yellow"],HE={default:{bg:"bg-white dark:bg-gray-800/50",text:"text-gray-700 dark:text-gray-300"},gray:{bg:"bg-gray-200 dark:bg-gray-700",text:"text-gray-800 dark:text-gray-200"},red:{bg:"bg-red-200 dark:bg-red-900/50",text:"text-red-800 dark:text-red-200"},green:{bg:"bg-green-200 dark:bg-green-900/50",text:"text-green-800 dark:text-green-200"},blue:{bg:"bg-blue-200 dark:bg-blue-900/50",text:"text-blue-800 dark:text-blue-200"},yellow:{bg:"bg-yellow-200 dark:bg-yellow-800/50",text:"text-yellow-800 dark:text-yellow-200"}},iP={default:"bg-white",gray:"bg-gray-400",red:"bg-red-400",green:"bg-green-400",blue:"bg-blue-400",yellow:"bg-yellow-400"},sP=({note:n,onNoteChange:t})=>{const[e,i]=pt.useState(n.content||""),[r,o]=pt.useState(!1),[l,u]=pt.useState(!1),f=pt.useRef(null);pt.useEffect(()=>{i(n.content||"")},[n.content]);const d=pt.useCallback(()=>{f.current&&u(f.current.scrollHeight>72)},[]);pt.useEffect(()=>{d();const w=new ResizeObserver(d);return f.current&&w.observe(f.current),()=>w.disconnect()},[d,e]);const p=w=>{const D=w.currentTarget.innerHTML;i(D)},_=()=>{n.content!==e&&t({...n,content:e})},b=w=>{t({...n,color:w})},E=w=>{document.execCommand(w,!1)},S=HE[n.color]||HE.default;return R.jsxs("div",{className:`rounded-xl shadow-lg p-6 transition-colors duration-300 border border-gray-200 dark:border-gray-700/50 ${S.bg}`,children:[R.jsxs("div",{className:"flex justify-between items-center mb-4",children:[R.jsx("h2",{className:"text-xl font-bold text-primary",children:"Personal Notes"}),R.jsxs("div",{className:"flex items-center space-x-1",children:[R.jsx("button",{onClick:()=>E("bold"),className:"p-1 rounded hover:bg-gray-300 dark:hover:bg-gray-600",children:R.jsx("b",{children:"B"})}),R.jsx("button",{onClick:()=>E("italic"),className:"p-1 rounded hover:bg-gray-300 dark:hover:bg-gray-600",children:R.jsx("i",{children:"I"})}),R.jsx("button",{onClick:()=>E("underline"),className:"p-1 rounded hover:bg-gray-300 dark:hover:bg-gray-600",children:R.jsx("u",{children:"U"})}),R.jsx("button",{onClick:()=>E("strikeThrough"),className:"p-1 rounded hover:bg-gray-300 dark:hover:bg-gray-600",children:R.jsx("s",{children:"S"})}),R.jsx("div",{className:"w-px h-5 bg-gray-300 dark:bg-gray-600 mx-1"}),nP.map(w=>R.jsx("button",{onClick:()=>b(w),"aria-label":`Set note color to ${w}`,className:`w-5 h-5 rounded-full border-2 transition-transform duration-200 ${n.color===w?"border-primary scale-110":"border-transparent"} ${iP[w]}`},w))]})]}),R.jsx("div",{ref:f,contentEditable:!0,onInput:p,onBlur:_,dangerouslySetInnerHTML:{__html:e},className:`prose dark:prose-invert max-w-none focus:outline-none transition-all duration-300 ${S.text} ${r?"max-h-none":"max-h-18 overflow-hidden"}`,style:{maxHeight:r?"none":"72px"}}),R.jsxs("div",{className:"flex justify-between items-center mt-2 text-xs",children:[l&&R.jsx("button",{onClick:()=>o(!r),className:"text-primary font-semibold",children:r?"Show Less":"Read More"}),R.jsx("span",{className:"ml-auto text-gray-500 dark:text-gray-400",children:"Further reading"})]})]})},rP=()=>{const n=["Log every trade, win or lose.","Be honest with your reasons for entry and exit.","Analyze your emotional state during the trade.","Review your journal weekly to find patterns.","Consistency is more important than perfection."];return R.jsx(Xa,{title:"Journaling Best Practices",children:R.jsx("ul",{className:"space-y-2 list-disc list-inside text-gray-700 dark:text-gray-300",children:n.map((t,e)=>R.jsx("li",{children:t},e))})})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Ou(n){return n+.5|0}const Ar=(n,t,e)=>Math.max(Math.min(n,e),t);function jc(n){return Ar(Ou(n*2.55),0,255)}function Vr(n){return Ar(Ou(n*255),0,255)}function Rs(n){return Ar(Ou(n/2.55)/100,0,1)}function qE(n){return Ar(Ou(n*100),0,100)}const ri={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ly=[..."0123456789ABCDEF"],aP=n=>ly[n&15],oP=n=>ly[(n&240)>>4]+ly[n&15],pf=n=>(n&240)>>4===(n&15),lP=n=>pf(n.r)&&pf(n.g)&&pf(n.b)&&pf(n.a);function cP(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&ri[n[1]]*17,g:255&ri[n[2]]*17,b:255&ri[n[3]]*17,a:t===5?ri[n[4]]*17:255}:(t===7||t===9)&&(e={r:ri[n[1]]<<4|ri[n[2]],g:ri[n[3]]<<4|ri[n[4]],b:ri[n[5]]<<4|ri[n[6]],a:t===9?ri[n[7]]<<4|ri[n[8]]:255})),e}const uP=(n,t)=>n<255?t(n):"";function hP(n){var t=lP(n)?aP:oP;return n?"#"+t(n.r)+t(n.g)+t(n.b)+uP(n.a,t):void 0}const fP=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function j1(n,t,e){const i=t*Math.min(e,1-e),r=(o,l=(o+n/30)%12)=>e-i*Math.max(Math.min(l-3,9-l,1),-1);return[r(0),r(8),r(4)]}function dP(n,t,e){const i=(r,o=(r+n/60)%6)=>e-e*t*Math.max(Math.min(o,4-o,1),0);return[i(5),i(3),i(1)]}function gP(n,t,e){const i=j1(n,1,.5);let r;for(t+e>1&&(r=1/(t+e),t*=r,e*=r),r=0;r<3;r++)i[r]*=1-t-e,i[r]+=t;return i}function mP(n,t,e,i,r){return n===r?(t-e)/i+(t<e?6:0):t===r?(e-n)/i+2:(n-t)/i+4}function b_(n){const e=n.r/255,i=n.g/255,r=n.b/255,o=Math.max(e,i,r),l=Math.min(e,i,r),u=(o+l)/2;let f,d,p;return o!==l&&(p=o-l,d=u>.5?p/(2-o-l):p/(o+l),f=mP(e,i,r,p,o),f=f*60+.5),[f|0,d||0,u]}function v_(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(Vr)}function T_(n,t,e){return v_(j1,n,t,e)}function pP(n,t,e){return v_(gP,n,t,e)}function yP(n,t,e){return v_(dP,n,t,e)}function U1(n){return(n%360+360)%360}function _P(n){const t=fP.exec(n);let e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?jc(+t[5]):Vr(+t[5]));const r=U1(+t[2]),o=+t[3]/100,l=+t[4]/100;return t[1]==="hwb"?i=pP(r,o,l):t[1]==="hsv"?i=yP(r,o,l):i=T_(r,o,l),{r:i[0],g:i[1],b:i[2],a:e}}function bP(n,t){var e=b_(n);e[0]=U1(e[0]+t),e=T_(e),n.r=e[0],n.g=e[1],n.b=e[2]}function vP(n){if(!n)return;const t=b_(n),e=t[0],i=qE(t[1]),r=qE(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${r}%, ${Rs(n.a)})`:`hsl(${e}, ${i}%, ${r}%)`}const GE={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},YE={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function TP(){const n={},t=Object.keys(YE),e=Object.keys(GE);let i,r,o,l,u;for(i=0;i<t.length;i++){for(l=u=t[i],r=0;r<e.length;r++)o=e[r],u=u.replace(o,GE[o]);o=parseInt(YE[l],16),n[u]=[o>>16&255,o>>8&255,o&255]}return n}let yf;function EP(n){yf||(yf=TP(),yf.transparent=[0,0,0,0]);const t=yf[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const xP=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function SP(n){const t=xP.exec(n);let e=255,i,r,o;if(t){if(t[7]!==i){const l=+t[7];e=t[8]?jc(l):Ar(l*255,0,255)}return i=+t[1],r=+t[3],o=+t[5],i=255&(t[2]?jc(i):Ar(i,0,255)),r=255&(t[4]?jc(r):Ar(r,0,255)),o=255&(t[6]?jc(o):Ar(o,0,255)),{r:i,g:r,b:o,a:e}}}function AP(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Rs(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const _p=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Ko=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function wP(n,t,e){const i=Ko(Rs(n.r)),r=Ko(Rs(n.g)),o=Ko(Rs(n.b));return{r:Vr(_p(i+e*(Ko(Rs(t.r))-i))),g:Vr(_p(r+e*(Ko(Rs(t.g))-r))),b:Vr(_p(o+e*(Ko(Rs(t.b))-o))),a:n.a+e*(t.a-n.a)}}function _f(n,t,e){if(n){let i=b_(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=T_(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function B1(n,t){return n&&Object.assign(t||{},n)}function KE(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=Vr(n[3]))):(t=B1(n,{r:0,g:0,b:0,a:1}),t.a=Vr(t.a)),t}function CP(n){return n.charAt(0)==="r"?SP(n):_P(n)}class hu{constructor(t){if(t instanceof hu)return t;const e=typeof t;let i;e==="object"?i=KE(t):e==="string"&&(i=cP(t)||EP(t)||CP(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=B1(this._rgb);return t&&(t.a=Rs(t.a)),t}set rgb(t){this._rgb=KE(t)}rgbString(){return this._valid?AP(this._rgb):void 0}hexString(){return this._valid?hP(this._rgb):void 0}hslString(){return this._valid?vP(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,r=t.rgb;let o;const l=e===o?.5:e,u=2*l-1,f=i.a-r.a,d=((u*f===-1?u:(u+f)/(1+u*f))+1)/2;o=1-d,i.r=255&d*i.r+o*r.r+.5,i.g=255&d*i.g+o*r.g+.5,i.b=255&d*i.b+o*r.b+.5,i.a=l*i.a+(1-l)*r.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=wP(this._rgb,t._rgb,e)),this}clone(){return new hu(this.rgb)}alpha(t){return this._rgb.a=Vr(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=Ou(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return _f(this._rgb,2,t),this}darken(t){return _f(this._rgb,2,-t),this}saturate(t){return _f(this._rgb,1,t),this}desaturate(t){return _f(this._rgb,1,-t),this}rotate(t){return bP(this._rgb,t),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function As(){}const RP=(()=>{let n=0;return()=>n++})();function Lt(n){return n==null}function ye(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Ht(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Ee(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Hn(n,t){return Ee(n)?n:t}function Rt(n,t){return typeof n>"u"?t:n}const IP=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/t,F1=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function le(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function ne(n,t,e,i){let r,o,l;if(ye(n))for(o=n.length,r=0;r<o;r++)t.call(e,n[r],r);else if(Ht(n))for(l=Object.keys(n),o=l.length,r=0;r<o;r++)t.call(e,n[l[r]],l[r])}function yd(n,t){let e,i,r,o;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(r=n[e],o=t[e],r.datasetIndex!==o.datasetIndex||r.index!==o.index)return!1;return!0}function _d(n){if(ye(n))return n.map(_d);if(Ht(n)){const t=Object.create(null),e=Object.keys(n),i=e.length;let r=0;for(;r<i;++r)t[e[r]]=_d(n[e[r]]);return t}return n}function H1(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function DP(n,t,e,i){if(!H1(n))return;const r=t[n],o=e[n];Ht(r)&&Ht(o)?fu(r,o,i):t[n]=_d(o)}function fu(n,t,e){const i=ye(t)?t:[t],r=i.length;if(!Ht(n))return n;e=e||{};const o=e.merger||DP;let l;for(let u=0;u<r;++u){if(l=i[u],!Ht(l))continue;const f=Object.keys(l);for(let d=0,p=f.length;d<p;++d)o(f[d],n,l,e)}return n}function $c(n,t){return fu(n,t,{merger:MP})}function MP(n,t,e){if(!H1(n))return;const i=t[n],r=e[n];Ht(i)&&Ht(r)?$c(i,r):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=_d(r))}const WE={"":n=>n,x:n=>n.x,y:n=>n.y};function OP(n){const t=n.split("."),e=[];let i="";for(const r of t)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function NP(n){const t=OP(n);return e=>{for(const i of t){if(i==="")break;e=e&&e[i]}return e}}function qr(n,t){return(WE[t]||(WE[t]=NP(t)))(n)}function E_(n){return n.charAt(0).toUpperCase()+n.slice(1)}const du=n=>typeof n<"u",Gr=n=>typeof n=="function",XE=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0};function kP(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const Xt=Math.PI,de=2*Xt,PP=de+Xt,bd=Number.POSITIVE_INFINITY,VP=Xt/180,Re=Xt/2,Ia=Xt/4,QE=Xt*2/3,wr=Math.log10,ss=Math.sign;function Jc(n,t,e){return Math.abs(n-t)<e}function $E(n){const t=Math.round(n);n=Jc(n,t,n/1e3)?t:n;const e=Math.pow(10,Math.floor(wr(n))),i=n/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function LP(n){const t=[],e=Math.sqrt(n);let i;for(i=1;i<e;i++)n%i===0&&(t.push(i),t.push(n/i));return e===(e|0)&&t.push(e),t.sort((r,o)=>r-o).pop(),t}function zP(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function hl(n){return!zP(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function jP(n,t){const e=Math.round(n);return e-t<=n&&e+t>=n}function q1(n,t,e){let i,r,o;for(i=0,r=n.length;i<r;i++)o=n[i][e],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function Ei(n){return n*(Xt/180)}function x_(n){return n*(180/Xt)}function JE(n){if(!Ee(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function G1(n,t){const e=t.x-n.x,i=t.y-n.y,r=Math.sqrt(e*e+i*i);let o=Math.atan2(i,e);return o<-.5*Xt&&(o+=de),{angle:o,distance:r}}function cy(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function UP(n,t){return(n-t+PP)%de-Xt}function dn(n){return(n%de+de)%de}function gu(n,t,e,i){const r=dn(n),o=dn(t),l=dn(e),u=dn(o-r),f=dn(l-r),d=dn(r-o),p=dn(r-l);return r===o||r===l||i&&o===l||u>f&&d<p}function Je(n,t,e){return Math.max(t,Math.min(e,n))}function BP(n){return Je(n,-32768,32767)}function Os(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function S_(n,t,e){e=e||(l=>n[l]<t);let i=n.length-1,r=0,o;for(;i-r>1;)o=r+i>>1,e(o)?r=o:i=o;return{lo:r,hi:i}}const Ns=(n,t,e,i)=>S_(n,e,i?r=>{const o=n[r][t];return o<e||o===e&&n[r+1][t]===e}:r=>n[r][t]<e),FP=(n,t,e)=>S_(n,e,i=>n[i][t]>=e);function HP(n,t,e){let i=0,r=n.length;for(;i<r&&n[i]<t;)i++;for(;r>i&&n[r-1]>e;)r--;return i>0||r<n.length?n.slice(i,r):n}const Y1=["push","pop","shift","splice","unshift"];function qP(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),Y1.forEach(e=>{const i="_onData"+E_(e),r=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...o){const l=r.apply(this,o);return n._chartjs.listeners.forEach(u=>{typeof u[i]=="function"&&u[i](...o)}),l}})})}function ZE(n,t){const e=n._chartjs;if(!e)return;const i=e.listeners,r=i.indexOf(t);r!==-1&&i.splice(r,1),!(i.length>0)&&(Y1.forEach(o=>{delete n[o]}),delete n._chartjs)}function K1(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}const W1=(function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame})();function X1(n,t){let e=[],i=!1;return function(...r){e=r,i||(i=!0,W1.call(window,()=>{i=!1,n.apply(t,e)}))}}function GP(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}const A_=n=>n==="start"?"left":n==="end"?"right":"center",hn=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,YP=(n,t,e,i)=>n===(i?"left":"right")?e:n==="center"?(t+e)/2:t;function Q1(n,t,e){const i=t.length;let r=0,o=i;if(n._sorted){const{iScale:l,vScale:u,_parsed:f}=n,d=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,p=l.axis,{min:_,max:b,minDefined:E,maxDefined:S}=l.getUserBounds();if(E){if(r=Math.min(Ns(f,p,_).lo,e?i:Ns(t,p,l.getPixelForValue(_)).lo),d){const w=f.slice(0,r+1).reverse().findIndex(D=>!Lt(D[u.axis]));r-=Math.max(0,w)}r=Je(r,0,i-1)}if(S){let w=Math.max(Ns(f,l.axis,b,!0).hi+1,e?0:Ns(t,p,l.getPixelForValue(b),!0).hi+1);if(d){const D=f.slice(w-1).findIndex(z=>!Lt(z[u.axis]));w+=Math.max(0,D)}o=Je(w,r,i)-r}else o=i-r}return{start:r,count:o}}function $1(n){const{xScale:t,yScale:e,_scaleRanges:i}=n,r={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!i)return n._scaleRanges=r,!0;const o=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==e.min||i.ymax!==e.max;return Object.assign(i,r),o}const bf=n=>n===0||n===1,tx=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*de/e)),ex=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*de/e)+1,Zc={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Re)+1,easeOutSine:n=>Math.sin(n*Re),easeInOutSine:n=>-.5*(Math.cos(Xt*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>bf(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>bf(n)?n:tx(n,.075,.3),easeOutElastic:n=>bf(n)?n:ex(n,.075,.3),easeInOutElastic(n){return bf(n)?n:n<.5?.5*tx(n*2,.1125,.45):.5+.5*ex(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-Zc.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Zc.easeInBounce(n*2)*.5:Zc.easeOutBounce(n*2-1)*.5+.5};function w_(n){if(n&&typeof n=="object"){const t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function nx(n){return w_(n)?n:new hu(n)}function bp(n){return w_(n)?n:new hu(n).saturate(.5).darken(.1).hexString()}const KP=["x","y","borderWidth","radius","tension"],WP=["color","borderColor","backgroundColor"];function XP(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:WP},numbers:{type:"number",properties:KP}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function QP(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const ix=new Map;function $P(n,t){t=t||{};const e=n+JSON.stringify(t);let i=ix.get(e);return i||(i=new Intl.NumberFormat(n,t),ix.set(e,i)),i}function Nu(n,t,e){return $P(t,e).format(n)}const J1={values(n){return ye(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";const i=this.chart.options.locale;let r,o=n;if(e.length>1){const d=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(d<1e-4||d>1e15)&&(r="scientific"),o=JP(n,e)}const l=wr(Math.abs(o)),u=isNaN(l)?1:Math.max(Math.min(-1*Math.floor(l),20),0),f={notation:r,minimumFractionDigits:u,maximumFractionDigits:u};return Object.assign(f,this.options.ticks.format),Nu(n,i,f)},logarithmic(n,t,e){if(n===0)return"0";const i=e[t].significand||n/Math.pow(10,Math.floor(wr(n)));return[1,2,3,5,10,15].includes(i)||t>.8*e.length?J1.numeric.call(this,n,t,e):""}};function JP(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var Wd={formatters:J1};function ZP(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Wd.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Qa=Object.create(null),uy=Object.create(null);function tu(n,t){if(!t)return n;const e=t.split(".");for(let i=0,r=e.length;i<r;++i){const o=e[i];n=n[o]||(n[o]=Object.create(null))}return n}function vp(n,t,e){return typeof t=="string"?fu(tu(n,t),e):fu(tu(n,""),t)}class tV{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>bp(r.backgroundColor),this.hoverBorderColor=(i,r)=>bp(r.borderColor),this.hoverColor=(i,r)=>bp(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return vp(this,t,e)}get(t){return tu(this,t)}describe(t,e){return vp(uy,t,e)}override(t,e){return vp(Qa,t,e)}route(t,e,i,r){const o=tu(this,t),l=tu(this,i),u="_"+e;Object.defineProperties(o,{[u]:{value:o[e],writable:!0},[e]:{enumerable:!0,get(){const f=this[u],d=l[r];return Ht(f)?Object.assign({},d,f):Rt(f,d)},set(f){this[u]=f}}})}apply(t){t.forEach(e=>e(this))}}var _e=new tV({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[XP,QP,ZP]);function eV(n){return!n||Lt(n.size)||Lt(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function vd(n,t,e,i,r){let o=t[r];return o||(o=t[r]=n.measureText(r).width,e.push(r)),o>i&&(i=o),i}function nV(n,t,e,i){i=i||{};let r=i.data=i.data||{},o=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(r=i.data={},o=i.garbageCollect=[],i.font=t),n.save(),n.font=t;let l=0;const u=e.length;let f,d,p,_,b;for(f=0;f<u;f++)if(_=e[f],_!=null&&!ye(_))l=vd(n,r,o,l,_);else if(ye(_))for(d=0,p=_.length;d<p;d++)b=_[d],b!=null&&!ye(b)&&(l=vd(n,r,o,l,b));n.restore();const E=o.length/2;if(E>e.length){for(f=0;f<E;f++)delete r[o[f]];o.splice(0,E)}return l}function Da(n,t,e){const i=n.currentDevicePixelRatio,r=e!==0?Math.max(e/2,.5):0;return Math.round((t-r)*i)/i+r}function sx(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function hy(n,t,e,i){Z1(n,t,e,i,null)}function Z1(n,t,e,i,r){let o,l,u,f,d,p,_,b;const E=t.pointStyle,S=t.rotation,w=t.radius;let D=(S||0)*VP;if(E&&typeof E=="object"&&(o=E.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){n.save(),n.translate(e,i),n.rotate(D),n.drawImage(E,-E.width/2,-E.height/2,E.width,E.height),n.restore();return}if(!(isNaN(w)||w<=0)){switch(n.beginPath(),E){default:r?n.ellipse(e,i,r/2,w,0,0,de):n.arc(e,i,w,0,de),n.closePath();break;case"triangle":p=r?r/2:w,n.moveTo(e+Math.sin(D)*p,i-Math.cos(D)*w),D+=QE,n.lineTo(e+Math.sin(D)*p,i-Math.cos(D)*w),D+=QE,n.lineTo(e+Math.sin(D)*p,i-Math.cos(D)*w),n.closePath();break;case"rectRounded":d=w*.516,f=w-d,l=Math.cos(D+Ia)*f,_=Math.cos(D+Ia)*(r?r/2-d:f),u=Math.sin(D+Ia)*f,b=Math.sin(D+Ia)*(r?r/2-d:f),n.arc(e-_,i-u,d,D-Xt,D-Re),n.arc(e+b,i-l,d,D-Re,D),n.arc(e+_,i+u,d,D,D+Re),n.arc(e-b,i+l,d,D+Re,D+Xt),n.closePath();break;case"rect":if(!S){f=Math.SQRT1_2*w,p=r?r/2:f,n.rect(e-p,i-f,2*p,2*f);break}D+=Ia;case"rectRot":_=Math.cos(D)*(r?r/2:w),l=Math.cos(D)*w,u=Math.sin(D)*w,b=Math.sin(D)*(r?r/2:w),n.moveTo(e-_,i-u),n.lineTo(e+b,i-l),n.lineTo(e+_,i+u),n.lineTo(e-b,i+l),n.closePath();break;case"crossRot":D+=Ia;case"cross":_=Math.cos(D)*(r?r/2:w),l=Math.cos(D)*w,u=Math.sin(D)*w,b=Math.sin(D)*(r?r/2:w),n.moveTo(e-_,i-u),n.lineTo(e+_,i+u),n.moveTo(e+b,i-l),n.lineTo(e-b,i+l);break;case"star":_=Math.cos(D)*(r?r/2:w),l=Math.cos(D)*w,u=Math.sin(D)*w,b=Math.sin(D)*(r?r/2:w),n.moveTo(e-_,i-u),n.lineTo(e+_,i+u),n.moveTo(e+b,i-l),n.lineTo(e-b,i+l),D+=Ia,_=Math.cos(D)*(r?r/2:w),l=Math.cos(D)*w,u=Math.sin(D)*w,b=Math.sin(D)*(r?r/2:w),n.moveTo(e-_,i-u),n.lineTo(e+_,i+u),n.moveTo(e+b,i-l),n.lineTo(e-b,i+l);break;case"line":l=r?r/2:Math.cos(D)*w,u=Math.sin(D)*w,n.moveTo(e-l,i-u),n.lineTo(e+l,i+u);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(D)*(r?r/2:w),i+Math.sin(D)*w);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function ks(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function Xd(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function Qd(n){n.restore()}function iV(n,t,e,i,r){if(!t)return n.lineTo(e.x,e.y);if(r==="middle"){const o=(t.x+e.x)/2;n.lineTo(o,t.y),n.lineTo(o,e.y)}else r==="after"!=!!i?n.lineTo(t.x,e.y):n.lineTo(e.x,t.y);n.lineTo(e.x,e.y)}function sV(n,t,e,i){if(!t)return n.lineTo(e.x,e.y);n.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?e.cp2x:e.cp1x,i?e.cp2y:e.cp1y,e.x,e.y)}function rV(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),Lt(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function aV(n,t,e,i,r){if(r.strikethrough||r.underline){const o=n.measureText(i),l=t-o.actualBoundingBoxLeft,u=t+o.actualBoundingBoxRight,f=e-o.actualBoundingBoxAscent,d=e+o.actualBoundingBoxDescent,p=r.strikethrough?(f+d)/2:d;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=r.decorationWidth||2,n.moveTo(l,p),n.lineTo(u,p),n.stroke()}}function oV(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function $a(n,t,e,i,r,o={}){const l=ye(t)?t:[t],u=o.strokeWidth>0&&o.strokeColor!=="";let f,d;for(n.save(),n.font=r.string,rV(n,o),f=0;f<l.length;++f)d=l[f],o.backdrop&&oV(n,o.backdrop),u&&(o.strokeColor&&(n.strokeStyle=o.strokeColor),Lt(o.strokeWidth)||(n.lineWidth=o.strokeWidth),n.strokeText(d,e,i,o.maxWidth)),n.fillText(d,e,i,o.maxWidth),aV(n,e,i,d,o),i+=Number(r.lineHeight);n.restore()}function mu(n,t){const{x:e,y:i,w:r,h:o,radius:l}=t;n.arc(e+l.topLeft,i+l.topLeft,l.topLeft,1.5*Xt,Xt,!0),n.lineTo(e,i+o-l.bottomLeft),n.arc(e+l.bottomLeft,i+o-l.bottomLeft,l.bottomLeft,Xt,Re,!0),n.lineTo(e+r-l.bottomRight,i+o),n.arc(e+r-l.bottomRight,i+o-l.bottomRight,l.bottomRight,Re,0,!0),n.lineTo(e+r,i+l.topRight),n.arc(e+r-l.topRight,i+l.topRight,l.topRight,0,-Re,!0),n.lineTo(e+l.topLeft,i)}const lV=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,cV=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function uV(n,t){const e=(""+n).match(lV);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}const hV=n=>+n||0;function C_(n,t){const e={},i=Ht(t),r=i?Object.keys(t):t,o=Ht(n)?i?l=>Rt(n[l],n[t[l]]):l=>n[l]:()=>n;for(const l of r)e[l]=hV(o(l));return e}function tw(n){return C_(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Ba(n){return C_(n,["topLeft","topRight","bottomLeft","bottomRight"])}function yn(n){const t=tw(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Ye(n,t){n=n||{},t=t||_e.font;let e=Rt(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=Rt(n.style,t.style);i&&!(""+i).match(cV)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:Rt(n.family,t.family),lineHeight:uV(Rt(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:Rt(n.weight,t.weight),string:""};return r.string=eV(r),r}function Uc(n,t,e,i){let r,o,l;for(r=0,o=n.length;r<o;++r)if(l=n[r],l!==void 0&&l!==void 0)return l}function fV(n,t,e){const{min:i,max:r}=n,o=F1(t,(r-i)/2),l=(u,f)=>e&&u===0?0:u+f;return{min:l(i,-Math.abs(o)),max:l(r,o)}}function $r(n,t){return Object.assign(Object.create(n),t)}function R_(n,t=[""],e,i,r=()=>n[0]){const o=e||n;typeof i>"u"&&(i=sw("_fallback",n));const l={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:o,_fallback:i,_getTarget:r,override:u=>R_([u,...n],t,o,i)};return new Proxy(l,{deleteProperty(u,f){return delete u[f],delete u._keys,delete n[0][f],!0},get(u,f){return nw(u,f,()=>vV(f,t,n,u))},getOwnPropertyDescriptor(u,f){return Reflect.getOwnPropertyDescriptor(u._scopes[0],f)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(u,f){return ax(u).includes(f)},ownKeys(u){return ax(u)},set(u,f,d){const p=u._storage||(u._storage=r());return u[f]=p[f]=d,delete u._keys,!0}})}function fl(n,t,e,i){const r={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:ew(n,i),setContext:o=>fl(n,o,e,i),override:o=>fl(n.override(o),t,e,i)};return new Proxy(r,{deleteProperty(o,l){return delete o[l],delete n[l],!0},get(o,l,u){return nw(o,l,()=>gV(o,l,u))},getOwnPropertyDescriptor(o,l){return o._descriptors.allKeys?Reflect.has(n,l)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,l)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(o,l){return Reflect.has(n,l)},ownKeys(){return Reflect.ownKeys(n)},set(o,l,u){return n[l]=u,delete o[l],!0}})}function ew(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:r=t.allKeys}=n;return{allKeys:r,scriptable:e,indexable:i,isScriptable:Gr(e)?e:()=>e,isIndexable:Gr(i)?i:()=>i}}const dV=(n,t)=>n?n+E_(t):t,I_=(n,t)=>Ht(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function nw(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];const i=e();return n[t]=i,i}function gV(n,t,e){const{_proxy:i,_context:r,_subProxy:o,_descriptors:l}=n;let u=i[t];return Gr(u)&&l.isScriptable(t)&&(u=mV(t,u,n,e)),ye(u)&&u.length&&(u=pV(t,u,n,l.isIndexable)),I_(t,u)&&(u=fl(u,r,o&&o[t],l)),u}function mV(n,t,e,i){const{_proxy:r,_context:o,_subProxy:l,_stack:u}=e;if(u.has(n))throw new Error("Recursion detected: "+Array.from(u).join("->")+"->"+n);u.add(n);let f=t(o,l||i);return u.delete(n),I_(n,f)&&(f=D_(r._scopes,r,n,f)),f}function pV(n,t,e,i){const{_proxy:r,_context:o,_subProxy:l,_descriptors:u}=e;if(typeof o.index<"u"&&i(n))return t[o.index%t.length];if(Ht(t[0])){const f=t,d=r._scopes.filter(p=>p!==f);t=[];for(const p of f){const _=D_(d,r,n,p);t.push(fl(_,o,l&&l[n],u))}}return t}function iw(n,t,e){return Gr(n)?n(t,e):n}const yV=(n,t)=>n===!0?t:typeof n=="string"?qr(t,n):void 0;function _V(n,t,e,i,r){for(const o of t){const l=yV(e,o);if(l){n.add(l);const u=iw(l._fallback,e,r);if(typeof u<"u"&&u!==e&&u!==i)return u}else if(l===!1&&typeof i<"u"&&e!==i)return null}return!1}function D_(n,t,e,i){const r=t._rootScopes,o=iw(t._fallback,e,i),l=[...n,...r],u=new Set;u.add(i);let f=rx(u,l,e,o||e,i);return f===null||typeof o<"u"&&o!==e&&(f=rx(u,l,o,f,i),f===null)?!1:R_(Array.from(u),[""],r,o,()=>bV(t,e,i))}function rx(n,t,e,i,r){for(;e;)e=_V(n,t,e,i,r);return e}function bV(n,t,e){const i=n._getTarget();t in i||(i[t]={});const r=i[t];return ye(r)&&Ht(e)?e:r||{}}function vV(n,t,e,i){let r;for(const o of t)if(r=sw(dV(o,n),e),typeof r<"u")return I_(n,r)?D_(e,i,n,r):r}function sw(n,t){for(const e of t){if(!e)continue;const i=e[n];if(typeof i<"u")return i}}function ax(n){let t=n._keys;return t||(t=n._keys=TV(n._scopes)),t}function TV(n){const t=new Set;for(const e of n)for(const i of Object.keys(e).filter(r=>!r.startsWith("_")))t.add(i);return Array.from(t)}function rw(n,t,e,i){const{iScale:r}=n,{key:o="r"}=this._parsing,l=new Array(i);let u,f,d,p;for(u=0,f=i;u<f;++u)d=u+e,p=t[d],l[u]={r:r.parse(qr(p,o),d)};return l}const EV=Number.EPSILON||1e-14,dl=(n,t)=>t<n.length&&!n[t].skip&&n[t],aw=n=>n==="x"?"y":"x";function xV(n,t,e,i){const r=n.skip?t:n,o=t,l=e.skip?t:e,u=cy(o,r),f=cy(l,o);let d=u/(u+f),p=f/(u+f);d=isNaN(d)?0:d,p=isNaN(p)?0:p;const _=i*d,b=i*p;return{previous:{x:o.x-_*(l.x-r.x),y:o.y-_*(l.y-r.y)},next:{x:o.x+b*(l.x-r.x),y:o.y+b*(l.y-r.y)}}}function SV(n,t,e){const i=n.length;let r,o,l,u,f,d=dl(n,0);for(let p=0;p<i-1;++p)if(f=d,d=dl(n,p+1),!(!f||!d)){if(Jc(t[p],0,EV)){e[p]=e[p+1]=0;continue}r=e[p]/t[p],o=e[p+1]/t[p],u=Math.pow(r,2)+Math.pow(o,2),!(u<=9)&&(l=3/Math.sqrt(u),e[p]=r*l*t[p],e[p+1]=o*l*t[p])}}function AV(n,t,e="x"){const i=aw(e),r=n.length;let o,l,u,f=dl(n,0);for(let d=0;d<r;++d){if(l=u,u=f,f=dl(n,d+1),!u)continue;const p=u[e],_=u[i];l&&(o=(p-l[e])/3,u[`cp1${e}`]=p-o,u[`cp1${i}`]=_-o*t[d]),f&&(o=(f[e]-p)/3,u[`cp2${e}`]=p+o,u[`cp2${i}`]=_+o*t[d])}}function wV(n,t="x"){const e=aw(t),i=n.length,r=Array(i).fill(0),o=Array(i);let l,u,f,d=dl(n,0);for(l=0;l<i;++l)if(u=f,f=d,d=dl(n,l+1),!!f){if(d){const p=d[t]-f[t];r[l]=p!==0?(d[e]-f[e])/p:0}o[l]=u?d?ss(r[l-1])!==ss(r[l])?0:(r[l-1]+r[l])/2:r[l-1]:r[l]}SV(n,r,o),AV(n,o,t)}function vf(n,t,e){return Math.max(Math.min(n,e),t)}function CV(n,t){let e,i,r,o,l,u=ks(n[0],t);for(e=0,i=n.length;e<i;++e)l=o,o=u,u=e<i-1&&ks(n[e+1],t),o&&(r=n[e],l&&(r.cp1x=vf(r.cp1x,t.left,t.right),r.cp1y=vf(r.cp1y,t.top,t.bottom)),u&&(r.cp2x=vf(r.cp2x,t.left,t.right),r.cp2y=vf(r.cp2y,t.top,t.bottom)))}function RV(n,t,e,i,r){let o,l,u,f;if(t.spanGaps&&(n=n.filter(d=>!d.skip)),t.cubicInterpolationMode==="monotone")wV(n,r);else{let d=i?n[n.length-1]:n[0];for(o=0,l=n.length;o<l;++o)u=n[o],f=xV(d,u,n[Math.min(o+1,l-(i?0:1))%l],t.tension),u.cp1x=f.previous.x,u.cp1y=f.previous.y,u.cp2x=f.next.x,u.cp2y=f.next.y,d=u}t.capBezierPoints&&CV(n,e)}function M_(){return typeof window<"u"&&typeof document<"u"}function O_(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Td(n,t,e){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=n,i}const $d=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function IV(n,t){return $d(n).getPropertyValue(t)}const DV=["top","right","bottom","left"];function Fa(n,t,e){const i={};e=e?"-"+e:"";for(let r=0;r<4;r++){const o=DV[r];i[o]=parseFloat(n[t+"-"+o+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const MV=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function OV(n,t){const e=n.touches,i=e&&e.length?e[0]:n,{offsetX:r,offsetY:o}=i;let l=!1,u,f;if(MV(r,o,n.target))u=r,f=o;else{const d=t.getBoundingClientRect();u=i.clientX-d.left,f=i.clientY-d.top,l=!0}return{x:u,y:f,box:l}}function ka(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:i}=t,r=$d(e),o=r.boxSizing==="border-box",l=Fa(r,"padding"),u=Fa(r,"border","width"),{x:f,y:d,box:p}=OV(n,e),_=l.left+(p&&u.left),b=l.top+(p&&u.top);let{width:E,height:S}=t;return o&&(E-=l.width+u.width,S-=l.height+u.height),{x:Math.round((f-_)/E*e.width/i),y:Math.round((d-b)/S*e.height/i)}}function NV(n,t,e){let i,r;if(t===void 0||e===void 0){const o=n&&O_(n);if(!o)t=n.clientWidth,e=n.clientHeight;else{const l=o.getBoundingClientRect(),u=$d(o),f=Fa(u,"border","width"),d=Fa(u,"padding");t=l.width-d.width-f.width,e=l.height-d.height-f.height,i=Td(u.maxWidth,o,"clientWidth"),r=Td(u.maxHeight,o,"clientHeight")}}return{width:t,height:e,maxWidth:i||bd,maxHeight:r||bd}}const Cr=n=>Math.round(n*10)/10;function kV(n,t,e,i){const r=$d(n),o=Fa(r,"margin"),l=Td(r.maxWidth,n,"clientWidth")||bd,u=Td(r.maxHeight,n,"clientHeight")||bd,f=NV(n,t,e);let{width:d,height:p}=f;if(r.boxSizing==="content-box"){const b=Fa(r,"border","width"),E=Fa(r,"padding");d-=E.width+b.width,p-=E.height+b.height}return d=Math.max(0,d-o.width),p=Math.max(0,i?d/i:p-o.height),d=Cr(Math.min(d,l,f.maxWidth)),p=Cr(Math.min(p,u,f.maxHeight)),d&&!p&&(p=Cr(d/2)),(t!==void 0||e!==void 0)&&i&&f.height&&p>f.height&&(p=f.height,d=Cr(Math.floor(p*i))),{width:d,height:p}}function ox(n,t,e){const i=t||1,r=Cr(n.height*i),o=Cr(n.width*i);n.height=Cr(n.height),n.width=Cr(n.width);const l=n.canvas;return l.style&&(e||!l.style.height&&!l.style.width)&&(l.style.height=`${n.height}px`,l.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||l.height!==r||l.width!==o?(n.currentDevicePixelRatio=i,l.height=r,l.width=o,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const PV=(function(){let n=!1;try{const t={get passive(){return n=!0,!1}};M_()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n})();function lx(n,t){const e=IV(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Pa(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}}function VV(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:i==="middle"?e<.5?n.y:t.y:i==="after"?e<1?n.y:t.y:e>0?t.y:n.y}}function LV(n,t,e,i){const r={x:n.cp2x,y:n.cp2y},o={x:t.cp1x,y:t.cp1y},l=Pa(n,r,e),u=Pa(r,o,e),f=Pa(o,t,e),d=Pa(l,u,e),p=Pa(u,f,e);return Pa(d,p,e)}const zV=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},jV=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function il(n,t,e){return n?zV(t,e):jV()}function ow(n,t){let e,i;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function lw(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function cw(n){return n==="angle"?{between:gu,compare:UP,normalize:dn}:{between:Os,compare:(t,e)=>t-e,normalize:t=>t}}function cx({start:n,end:t,count:e,loop:i,style:r}){return{start:n%e,end:t%e,loop:i&&(t-n+1)%e===0,style:r}}function UV(n,t,e){const{property:i,start:r,end:o}=e,{between:l,normalize:u}=cw(i),f=t.length;let{start:d,end:p,loop:_}=n,b,E;if(_){for(d+=f,p+=f,b=0,E=f;b<E&&l(u(t[d%f][i]),r,o);++b)d--,p--;d%=f,p%=f}return p<d&&(p+=f),{start:d,end:p,loop:_,style:n.style}}function uw(n,t,e){if(!e)return[n];const{property:i,start:r,end:o}=e,l=t.length,{compare:u,between:f,normalize:d}=cw(i),{start:p,end:_,loop:b,style:E}=UV(n,t,e),S=[];let w=!1,D=null,z,F,W;const Z=()=>f(r,W,z)&&u(r,W)!==0,$=()=>u(o,z)===0||f(o,W,z),st=()=>w||Z(),M=()=>!w||$();for(let C=p,O=p;C<=_;++C)F=t[C%l],!F.skip&&(z=d(F[i]),z!==W&&(w=f(z,r,o),D===null&&st()&&(D=u(z,r)===0?C:O),D!==null&&M()&&(S.push(cx({start:D,end:C,loop:b,count:l,style:E})),D=null),O=C,W=z));return D!==null&&S.push(cx({start:D,end:_,loop:b,count:l,style:E})),S}function hw(n,t){const e=[],i=n.segments;for(let r=0;r<i.length;r++){const o=uw(i[r],n.points,t);o.length&&e.push(...o)}return e}function BV(n,t,e,i){let r=0,o=t-1;if(e&&!i)for(;r<t&&!n[r].skip;)r++;for(;r<t&&n[r].skip;)r++;for(r%=t,e&&(o+=r);o>r&&n[o%t].skip;)o--;return o%=t,{start:r,end:o}}function FV(n,t,e,i){const r=n.length,o=[];let l=t,u=n[t],f;for(f=t+1;f<=e;++f){const d=n[f%r];d.skip||d.stop?u.skip||(i=!1,o.push({start:t%r,end:(f-1)%r,loop:i}),t=l=d.stop?f:null):(l=f,u.skip&&(t=f)),u=d}return l!==null&&o.push({start:t%r,end:l%r,loop:i}),o}function HV(n,t){const e=n.points,i=n.options.spanGaps,r=e.length;if(!r)return[];const o=!!n._loop,{start:l,end:u}=BV(e,r,o,i);if(i===!0)return ux(n,[{start:l,end:u,loop:o}],e,t);const f=u<l?u+r:u,d=!!n._fullLoop&&l===0&&u===r-1;return ux(n,FV(e,l,f,d),e,t)}function ux(n,t,e,i){return!i||!i.setContext||!e?t:qV(n,t,e,i)}function qV(n,t,e,i){const r=n._chart.getContext(),o=hx(n.options),{_datasetIndex:l,options:{spanGaps:u}}=n,f=e.length,d=[];let p=o,_=t[0].start,b=_;function E(S,w,D,z){const F=u?-1:1;if(S!==w){for(S+=f;e[S%f].skip;)S-=F;for(;e[w%f].skip;)w+=F;S%f!==w%f&&(d.push({start:S%f,end:w%f,loop:D,style:z}),p=z,_=w%f)}}for(const S of t){_=u?_:S.start;let w=e[_%f],D;for(b=_+1;b<=S.end;b++){const z=e[b%f];D=hx(i.setContext($r(r,{type:"segment",p0:w,p1:z,p0DataIndex:(b-1)%f,p1DataIndex:b%f,datasetIndex:l}))),GV(D,p)&&E(_,b-1,S.loop,p),w=z,p=D}_<b-1&&E(_,b-1,S.loop,p)}return d}function hx(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function GV(n,t){if(!t)return!1;const e=[],i=function(r,o){return w_(o)?(e.includes(o)||e.push(o),e.indexOf(o)):o};return JSON.stringify(n,i)!==JSON.stringify(t,i)}function Tf(n,t,e){return n.options.clip?n[e]:t[e]}function YV(n,t){const{xScale:e,yScale:i}=n;return e&&i?{left:Tf(e,t,"left"),right:Tf(e,t,"right"),top:Tf(i,t,"top"),bottom:Tf(i,t,"bottom")}:t}function fw(n,t){const e=t._clip;if(e.disabled)return!1;const i=YV(t,n.chartArea);return{left:e.left===!1?0:i.left-(e.left===!0?0:e.left),right:e.right===!1?n.width:i.right+(e.right===!0?0:e.right),top:e.top===!1?0:i.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?n.height:i.bottom+(e.bottom===!0?0:e.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class KV{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,r){const o=e.listeners[r],l=e.duration;o.forEach(u=>u({chart:t,initial:e.initial,numSteps:l,currentStep:Math.min(i-e.start,l)}))}_refresh(){this._request||(this._running=!0,this._request=W1.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const o=i.items;let l=o.length-1,u=!1,f;for(;l>=0;--l)f=o[l],f._active?(f._total>i.duration&&(i.duration=f._total),f.tick(t),u=!0):(o[l]=o[o.length-1],o.pop());u&&(r.draw(),this._notify(r,i,t,"progress")),o.length||(i.running=!1,this._notify(r,i,t,"complete"),i.initial=!1),e+=o.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var ws=new KV;const fx="transparent",WV={boolean(n,t,e){return e>.5?t:n},color(n,t,e){const i=nx(n||fx),r=i.valid&&nx(t||fx);return r&&r.valid?r.mix(i,e).hexString():t},number(n,t,e){return n+(t-n)*e}};class XV{constructor(t,e,i,r){const o=e[i];r=Uc([t.to,r,o,t.from]);const l=Uc([t.from,o,r]);this._active=!0,this._fn=t.fn||WV[t.type||typeof l],this._easing=Zc[t.easing]||Zc.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=l,this._to=r,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const r=this._target[this._prop],o=i-this._start,l=this._duration-o;this._start=i,this._duration=Math.floor(Math.max(l,t.duration)),this._total+=o,this._loop=!!t.loop,this._to=Uc([t.to,e,r,t.from]),this._from=Uc([t.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,r=this._prop,o=this._from,l=this._loop,u=this._to;let f;if(this._active=o!==u&&(l||e<i),!this._active){this._target[r]=u,this._notify(!0);return}if(e<0){this._target[r]=o;return}f=e/i%2,f=l&&f>1?2-f:f,f=this._easing(Math.min(1,Math.max(0,f))),this._target[r]=this._fn(o,u,f)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][e]()}}class dw{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Ht(t))return;const e=Object.keys(_e.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const o=t[r];if(!Ht(o))return;const l={};for(const u of e)l[u]=o[u];(ye(o.properties)&&o.properties||[r]).forEach(u=>{(u===r||!i.has(u))&&i.set(u,l)})})}_animateOptions(t,e){const i=e.options,r=$V(t,i);if(!r)return[];const o=this._createAnimations(r,i);return i.$shared&&QV(t.options.$animations,i).then(()=>{t.options=i},()=>{}),o}_createAnimations(t,e){const i=this._properties,r=[],o=t.$animations||(t.$animations={}),l=Object.keys(e),u=Date.now();let f;for(f=l.length-1;f>=0;--f){const d=l[f];if(d.charAt(0)==="$")continue;if(d==="options"){r.push(...this._animateOptions(t,e));continue}const p=e[d];let _=o[d];const b=i.get(d);if(_)if(b&&_.active()){_.update(b,p,u);continue}else _.cancel();if(!b||!b.duration){t[d]=p;continue}o[d]=_=new XV(b,t,d,p),r.push(_)}return r}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const i=this._createAnimations(t,e);if(i.length)return ws.add(this._chart,i),!0}}function QV(n,t){const e=[],i=Object.keys(t);for(let r=0;r<i.length;r++){const o=n[i[r]];o&&o.active()&&e.push(o.wait())}return Promise.all(e)}function $V(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function dx(n,t){const e=n&&n.options||{},i=e.reverse,r=e.min===void 0?t:0,o=e.max===void 0?t:0;return{start:i?o:r,end:i?r:o}}function JV(n,t,e){if(e===!1)return!1;const i=dx(n,e),r=dx(t,e);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function ZV(n){let t,e,i,r;return Ht(n)?(t=n.top,e=n.right,i=n.bottom,r=n.left):t=e=i=r=n,{top:t,right:e,bottom:i,left:r,disabled:n===!1}}function gw(n,t){const e=[],i=n._getSortedDatasetMetas(t);let r,o;for(r=0,o=i.length;r<o;++r)e.push(i[r].index);return e}function gx(n,t,e,i={}){const r=n.keys,o=i.mode==="single";let l,u,f,d;if(t===null)return;let p=!1;for(l=0,u=r.length;l<u;++l){if(f=+r[l],f===e){if(p=!0,i.all)continue;break}d=n.values[f],Ee(d)&&(o||t===0||ss(t)===ss(d))&&(t+=d)}return!p&&!i.all?0:t}function tL(n,t){const{iScale:e,vScale:i}=t,r=e.axis==="x"?"x":"y",o=i.axis==="x"?"x":"y",l=Object.keys(n),u=new Array(l.length);let f,d,p;for(f=0,d=l.length;f<d;++f)p=l[f],u[f]={[r]:p,[o]:n[p]};return u}function Tp(n,t){const e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function eL(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function nL(n){const{min:t,max:e,minDefined:i,maxDefined:r}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:r?e:Number.POSITIVE_INFINITY}}function iL(n,t,e){const i=n[t]||(n[t]={});return i[e]||(i[e]={})}function mx(n,t,e,i){for(const r of t.getMatchingVisibleMetas(i).reverse()){const o=n[r.index];if(e&&o>0||!e&&o<0)return r.index}return null}function px(n,t){const{chart:e,_cachedMeta:i}=n,r=e._stacks||(e._stacks={}),{iScale:o,vScale:l,index:u}=i,f=o.axis,d=l.axis,p=eL(o,l,i),_=t.length;let b;for(let E=0;E<_;++E){const S=t[E],{[f]:w,[d]:D}=S,z=S._stacks||(S._stacks={});b=z[d]=iL(r,p,w),b[u]=D,b._top=mx(b,l,!0,i.type),b._bottom=mx(b,l,!1,i.type);const F=b._visualValues||(b._visualValues={});F[u]=D}}function Ep(n,t){const e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function sL(n,t){return $r(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function rL(n,t,e){return $r(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function Rc(n,t){const e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(const r of t){const o=r._stacks;if(!o||o[i]===void 0||o[i][e]===void 0)return;delete o[i][e],o[i]._visualValues!==void 0&&o[i]._visualValues[e]!==void 0&&delete o[i]._visualValues[e]}}}const xp=n=>n==="reset"||n==="none",yx=(n,t)=>t?n:Object.assign({},n),aL=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:gw(e,!0),values:null};class Ai{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Tp(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Rc(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),r=(_,b,E,S)=>_==="x"?b:_==="r"?S:E,o=e.xAxisID=Rt(i.xAxisID,Ep(t,"x")),l=e.yAxisID=Rt(i.yAxisID,Ep(t,"y")),u=e.rAxisID=Rt(i.rAxisID,Ep(t,"r")),f=e.indexAxis,d=e.iAxisID=r(f,o,l,u),p=e.vAxisID=r(f,l,o,u);e.xScale=this.getScaleForId(o),e.yScale=this.getScaleForId(l),e.rScale=this.getScaleForId(u),e.iScale=this.getScaleForId(d),e.vScale=this.getScaleForId(p)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&ZE(this._data,this),t._stacked&&Rc(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(Ht(e)){const r=this._cachedMeta;this._data=tL(e,r)}else if(i!==e){if(i){ZE(i,this);const r=this._cachedMeta;Rc(r),r._parsed=[]}e&&Object.isExtensible(e)&&qP(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const o=e._stacked;e._stacked=Tp(e.vScale,e),e.stack!==i.stack&&(r=!0,Rc(e),e.stack=i.stack),this._resyncElements(t),(r||o!==e._stacked)&&(px(this,e._parsed),e._stacked=Tp(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:r}=this,{iScale:o,_stacked:l}=i,u=o.axis;let f=t===0&&e===r.length?!0:i._sorted,d=t>0&&i._parsed[t-1],p,_,b;if(this._parsing===!1)i._parsed=r,i._sorted=!0,b=r;else{ye(r[t])?b=this.parseArrayData(i,r,t,e):Ht(r[t])?b=this.parseObjectData(i,r,t,e):b=this.parsePrimitiveData(i,r,t,e);const E=()=>_[u]===null||d&&_[u]<d[u];for(p=0;p<e;++p)i._parsed[p+t]=_=b[p],f&&(E()&&(f=!1),d=_);i._sorted=f}l&&px(this,b)}parsePrimitiveData(t,e,i,r){const{iScale:o,vScale:l}=t,u=o.axis,f=l.axis,d=o.getLabels(),p=o===l,_=new Array(r);let b,E,S;for(b=0,E=r;b<E;++b)S=b+i,_[b]={[u]:p||o.parse(d[S],S),[f]:l.parse(e[S],S)};return _}parseArrayData(t,e,i,r){const{xScale:o,yScale:l}=t,u=new Array(r);let f,d,p,_;for(f=0,d=r;f<d;++f)p=f+i,_=e[p],u[f]={x:o.parse(_[0],p),y:l.parse(_[1],p)};return u}parseObjectData(t,e,i,r){const{xScale:o,yScale:l}=t,{xAxisKey:u="x",yAxisKey:f="y"}=this._parsing,d=new Array(r);let p,_,b,E;for(p=0,_=r;p<_;++p)b=p+i,E=e[b],d[p]={x:o.parse(qr(E,u),b),y:l.parse(qr(E,f),b)};return d}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const r=this.chart,o=this._cachedMeta,l=e[t.axis],u={keys:gw(r,!0),values:e._stacks[t.axis]._visualValues};return gx(u,l,o.index,{mode:i})}updateRangeFromParsed(t,e,i,r){const o=i[e.axis];let l=o===null?NaN:o;const u=r&&i._stacks[e.axis];r&&u&&(r.values=u,l=gx(r,o,this._cachedMeta.index)),t.min=Math.min(t.min,l),t.max=Math.max(t.max,l)}getMinMax(t,e){const i=this._cachedMeta,r=i._parsed,o=i._sorted&&t===i.iScale,l=r.length,u=this._getOtherScale(t),f=aL(e,i,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:p,max:_}=nL(u);let b,E;function S(){E=r[b];const w=E[u.axis];return!Ee(E[t.axis])||p>w||_<w}for(b=0;b<l&&!(!S()&&(this.updateRangeFromParsed(d,t,E,f),o));++b);if(o){for(b=l-1;b>=0;--b)if(!S()){this.updateRangeFromParsed(d,t,E,f);break}}return d}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let r,o,l;for(r=0,o=e.length;r<o;++r)l=e[r][t.axis],Ee(l)&&i.push(l);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,r=e.vScale,o=this.getParsed(t);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:r?""+r.getLabelForValue(o[r.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=ZV(Rt(this.options.clip,JV(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,r=i.data||[],o=e.chartArea,l=[],u=this._drawStart||0,f=this._drawCount||r.length-u,d=this.options.drawActiveElementsOnTop;let p;for(i.dataset&&i.dataset.draw(t,o,u,f),p=u;p<u+f;++p){const _=r[p];_.hidden||(_.active&&d?l.push(_):_.draw(t,o))}for(p=0;p<l.length;++p)l[p].draw(t,o)}getStyle(t,e){const i=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const r=this.getDataset();let o;if(t>=0&&t<this._cachedMeta.data.length){const l=this._cachedMeta.data[t];o=l.$context||(l.$context=rL(this.getContext(),t,l)),o.parsed=this.getParsed(t),o.raw=r.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=sL(this.chart.getContext(),this.index)),o.dataset=r,o.index=o.datasetIndex=this.index;return o.active=!!e,o.mode=i,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const r=e==="active",o=this._cachedDataOpts,l=t+"-"+e,u=o[l],f=this.enableOptionSharing&&du(i);if(u)return yx(u,f);const d=this.chart.config,p=d.datasetElementScopeKeys(this._type,t),_=r?[`${t}Hover`,"hover",t,""]:[t,""],b=d.getOptionScopes(this.getDataset(),p),E=Object.keys(_e.elements[t]),S=()=>this.getContext(i,r,e),w=d.resolveNamedOptions(b,E,S,_);return w.$shared&&(w.$shared=f,o[l]=Object.freeze(yx(w,f))),w}_resolveAnimations(t,e,i){const r=this.chart,o=this._cachedDataOpts,l=`animation-${e}`,u=o[l];if(u)return u;let f;if(r.options.animation!==!1){const p=this.chart.config,_=p.datasetAnimationScopeKeys(this._type,e),b=p.getOptionScopes(this.getDataset(),_);f=p.createResolver(b,this.getContext(t,i,e))}const d=new dw(r,f&&f.animations);return f&&f._cacheable&&(o[l]=Object.freeze(d)),d}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||xp(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),r=this._sharedOptions,o=this.getSharedOptions(i),l=this.includeOptions(e,o)||o!==r;return this.updateSharedOptions(o,e,i),{sharedOptions:o,includeOptions:l}}updateElement(t,e,i,r){xp(r)?Object.assign(t,i):this._resolveAnimations(e,r).update(t,i)}updateSharedOptions(t,e,i){t&&!xp(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,r){t.active=r;const o=this.getStyle(e,r);this._resolveAnimations(e,i,r).update(t,{options:!r&&this.getSharedOptions(o)||o})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[u,f,d]of this._syncList)this[u](f,d);this._syncList=[];const r=i.length,o=e.length,l=Math.min(o,r);l&&this.parse(0,l),o>r?this._insertElements(r,o-r,t):o<r&&this._removeElements(o,r-o)}_insertElements(t,e,i=!0){const r=this._cachedMeta,o=r.data,l=t+e;let u;const f=d=>{for(d.length+=e,u=d.length-1;u>=l;u--)d[u]=d[u-e]};for(f(o),u=t;u<l;++u)o[u]=new this.dataElementType;this._parsing&&f(r._parsed),this.parse(t,e),i&&this.updateElements(o,t,e,"reset")}updateElements(t,e,i,r){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(t,e);i._stacked&&Rc(i,r)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,r]=t;this[e](i,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ct(Ai,"defaults",{}),ct(Ai,"datasetElementType",null),ct(Ai,"dataElementType",null);function oL(n,t){if(!n._cache.$bar){const e=n.getMatchingVisibleMetas(t);let i=[];for(let r=0,o=e.length;r<o;r++)i=i.concat(e[r].controller.getAllParsedValues(n));n._cache.$bar=K1(i.sort((r,o)=>r-o))}return n._cache.$bar}function lL(n){const t=n.iScale,e=oL(t,n.type);let i=t._length,r,o,l,u;const f=()=>{l===32767||l===-32768||(du(u)&&(i=Math.min(i,Math.abs(l-u)||i)),u=l)};for(r=0,o=e.length;r<o;++r)l=t.getPixelForValue(e[r]),f();for(u=void 0,r=0,o=t.ticks.length;r<o;++r)l=t.getPixelForTick(r),f();return i}function cL(n,t,e,i){const r=e.barThickness;let o,l;return Lt(r)?(o=t.min*e.categoryPercentage,l=e.barPercentage):(o=r*i,l=1),{chunk:o/i,ratio:l,start:t.pixels[n]-o/2}}function uL(n,t,e,i){const r=t.pixels,o=r[n];let l=n>0?r[n-1]:null,u=n<r.length-1?r[n+1]:null;const f=e.categoryPercentage;l===null&&(l=o-(u===null?t.end-t.start:u-o)),u===null&&(u=o+o-l);const d=o-(o-Math.min(l,u))/2*f;return{chunk:Math.abs(u-l)/2*f/i,ratio:e.barPercentage,start:d}}function hL(n,t,e,i){const r=e.parse(n[0],i),o=e.parse(n[1],i),l=Math.min(r,o),u=Math.max(r,o);let f=l,d=u;Math.abs(l)>Math.abs(u)&&(f=u,d=l),t[e.axis]=d,t._custom={barStart:f,barEnd:d,start:r,end:o,min:l,max:u}}function mw(n,t,e,i){return ye(n)?hL(n,t,e,i):t[e.axis]=e.parse(n,i),t}function _x(n,t,e,i){const r=n.iScale,o=n.vScale,l=r.getLabels(),u=r===o,f=[];let d,p,_,b;for(d=e,p=e+i;d<p;++d)b=t[d],_={},_[r.axis]=u||r.parse(l[d],d),f.push(mw(b,_,o,d));return f}function Sp(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function fL(n,t,e){return n!==0?ss(n):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function dL(n){let t,e,i,r,o;return n.horizontal?(t=n.base>n.x,e="left",i="right"):(t=n.base<n.y,e="bottom",i="top"),t?(r="end",o="start"):(r="start",o="end"),{start:e,end:i,reverse:t,top:r,bottom:o}}function gL(n,t,e,i){let r=t.borderSkipped;const o={};if(!r){n.borderSkipped=o;return}if(r===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:l,end:u,reverse:f,top:d,bottom:p}=dL(n);r==="middle"&&e&&(n.enableBorderRadius=!0,(e._top||0)===i?r=d:(e._bottom||0)===i?r=p:(o[bx(p,l,u,f)]=!0,r=d)),o[bx(r,l,u,f)]=!0,n.borderSkipped=o}function bx(n,t,e,i){return i?(n=mL(n,t,e),n=vx(n,e,t)):n=vx(n,t,e),n}function mL(n,t,e){return n===t?e:n===e?t:n}function vx(n,t,e){return n==="start"?t:n==="end"?e:n}function pL(n,{inflateAmount:t},e){n.inflateAmount=t==="auto"?e===1?.33:0:t}class Bf extends Ai{parsePrimitiveData(t,e,i,r){return _x(t,e,i,r)}parseArrayData(t,e,i,r){return _x(t,e,i,r)}parseObjectData(t,e,i,r){const{iScale:o,vScale:l}=t,{xAxisKey:u="x",yAxisKey:f="y"}=this._parsing,d=o.axis==="x"?u:f,p=l.axis==="x"?u:f,_=[];let b,E,S,w;for(b=i,E=i+r;b<E;++b)w=e[b],S={},S[o.axis]=o.parse(qr(w,d),b),_.push(mw(qr(w,p),S,l,b));return _}updateRangeFromParsed(t,e,i,r){super.updateRangeFromParsed(t,e,i,r);const o=i._custom;o&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:i,vScale:r}=e,o=this.getParsed(t),l=o._custom,u=Sp(l)?"["+l.start+", "+l.end+"]":""+r.getLabelForValue(o[r.axis]);return{label:""+i.getLabelForValue(o[i.axis]),value:u}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,i,r){const o=r==="reset",{index:l,_cachedMeta:{vScale:u}}=this,f=u.getBasePixel(),d=u.isHorizontal(),p=this._getRuler(),{sharedOptions:_,includeOptions:b}=this._getSharedOptions(e,r);for(let E=e;E<e+i;E++){const S=this.getParsed(E),w=o||Lt(S[u.axis])?{base:f,head:f}:this._calculateBarValuePixels(E),D=this._calculateBarIndexPixels(E,p),z=(S._stacks||{})[u.axis],F={horizontal:d,base:w.base,enableBorderRadius:!z||Sp(S._custom)||l===z._top||l===z._bottom,x:d?w.head:D.center,y:d?D.center:w.head,height:d?D.size:Math.abs(w.size),width:d?Math.abs(w.size):D.size};b&&(F.options=_||this.resolveDataElementOptions(E,t[E].active?"active":r));const W=F.options||t[E].options;gL(F,W,z,l),pL(F,W,p.ratio),this.updateElement(t[E],E,F,r)}}_getStacks(t,e){const{iScale:i}=this._cachedMeta,r=i.getMatchingVisibleMetas(this._type).filter(p=>p.controller.options.grouped),o=i.options.stacked,l=[],u=this._cachedMeta.controller.getParsed(e),f=u&&u[i.axis],d=p=>{const _=p._parsed.find(E=>E[i.axis]===f),b=_&&_[p.vScale.axis];if(Lt(b)||isNaN(b))return!0};for(const p of r)if(!(e!==void 0&&d(p))&&((o===!1||l.indexOf(p.stack)===-1||o===void 0&&p.stack===void 0)&&l.push(p.stack),p.index===t))break;return l.length||l.push(void 0),l}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,e=this.chart.options.indexAxis;return Object.keys(t).filter(i=>t[i].axis===e).shift()}_getAxis(){const t={},e=this.getFirstScaleIdForIndexAxis();for(const i of this.chart.data.datasets)t[Rt(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,e)]=!0;return Object.keys(t)}_getStackIndex(t,e,i){const r=this._getStacks(t,i),o=e!==void 0?r.indexOf(e):-1;return o===-1?r.length-1:o}_getRuler(){const t=this.options,e=this._cachedMeta,i=e.iScale,r=[];let o,l;for(o=0,l=e.data.length;o<l;++o)r.push(i.getPixelForValue(this.getParsed(o)[i.axis],o));const u=t.barThickness;return{min:u||lL(e),pixels:r,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:u?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:i,index:r},options:{base:o,minBarLength:l}}=this,u=o||0,f=this.getParsed(t),d=f._custom,p=Sp(d);let _=f[e.axis],b=0,E=i?this.applyStack(e,f,i):_,S,w;E!==_&&(b=E-_,E=_),p&&(_=d.barStart,E=d.barEnd-d.barStart,_!==0&&ss(_)!==ss(d.barEnd)&&(b=0),b+=_);const D=!Lt(o)&&!p?o:b;let z=e.getPixelForValue(D);if(this.chart.getDataVisibility(t)?S=e.getPixelForValue(b+E):S=z,w=S-z,Math.abs(w)<l){w=fL(w,e,u)*l,_===u&&(z-=w/2);const F=e.getPixelForDecimal(0),W=e.getPixelForDecimal(1),Z=Math.min(F,W),$=Math.max(F,W);z=Math.max(Math.min(z,$),Z),S=z+w,i&&!p&&(f._stacks[e.axis]._visualValues[r]=e.getValueForPixel(S)-e.getValueForPixel(z))}if(z===e.getPixelForValue(u)){const F=ss(w)*e.getLineWidthForValue(u)/2;z+=F,w-=F}return{size:w,base:z,head:S,center:S+w/2}}_calculateBarIndexPixels(t,e){const i=e.scale,r=this.options,o=r.skipNull,l=Rt(r.maxBarThickness,1/0);let u,f;const d=this._getAxisCount();if(e.grouped){const p=o?this._getStackCount(t):e.stackCount,_=r.barThickness==="flex"?uL(t,e,r,p*d):cL(t,e,r,p*d),b=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,E=this._getAxis().indexOf(Rt(b,this.getFirstScaleIdForIndexAxis())),S=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0)+E;u=_.start+_.chunk*S+_.chunk/2,f=Math.min(l,_.chunk*_.ratio)}else u=i.getPixelForValue(this.getParsed(t)[i.axis],t),f=Math.min(l,e.min*e.ratio);return{base:u-f/2,head:u+f/2,center:u,size:f}}draw(){const t=this._cachedMeta,e=t.vScale,i=t.data,r=i.length;let o=0;for(;o<r;++o)this.getParsed(o)[e.axis]!==null&&!i[o].hidden&&i[o].draw(this._ctx)}}ct(Bf,"id","bar"),ct(Bf,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),ct(Bf,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Ff extends Ai{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,i,r){const o=super.parsePrimitiveData(t,e,i,r);for(let l=0;l<o.length;l++)o[l]._custom=this.resolveDataElementOptions(l+i).radius;return o}parseArrayData(t,e,i,r){const o=super.parseArrayData(t,e,i,r);for(let l=0;l<o.length;l++){const u=e[i+l];o[l]._custom=Rt(u[2],this.resolveDataElementOptions(l+i).radius)}return o}parseObjectData(t,e,i,r){const o=super.parseObjectData(t,e,i,r);for(let l=0;l<o.length;l++){const u=e[i+l];o[l]._custom=Rt(u&&u.r&&+u.r,this.resolveDataElementOptions(l+i).radius)}return o}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let i=t.length-1;i>=0;--i)e=Math.max(e,t[i].size(this.resolveDataElementOptions(i))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:o}=e,l=this.getParsed(t),u=r.getLabelForValue(l.x),f=o.getLabelForValue(l.y),d=l._custom;return{label:i[t]||"",value:"("+u+", "+f+(d?", "+d:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,i,r){const o=r==="reset",{iScale:l,vScale:u}=this._cachedMeta,{sharedOptions:f,includeOptions:d}=this._getSharedOptions(e,r),p=l.axis,_=u.axis;for(let b=e;b<e+i;b++){const E=t[b],S=!o&&this.getParsed(b),w={},D=w[p]=o?l.getPixelForDecimal(.5):l.getPixelForValue(S[p]),z=w[_]=o?u.getBasePixel():u.getPixelForValue(S[_]);w.skip=isNaN(D)||isNaN(z),d&&(w.options=f||this.resolveDataElementOptions(b,E.active?"active":r),o&&(w.options.radius=0)),this.updateElement(E,b,w,r)}}resolveDataElementOptions(t,e){const i=this.getParsed(t);let r=super.resolveDataElementOptions(t,e);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const o=r.radius;return e!=="active"&&(r.radius=0),r.radius+=Rt(i&&i._custom,o),r}}ct(Ff,"id","bubble"),ct(Ff,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),ct(Ff,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function yL(n,t,e){let i=1,r=1,o=0,l=0;if(t<de){const u=n,f=u+t,d=Math.cos(u),p=Math.sin(u),_=Math.cos(f),b=Math.sin(f),E=(W,Z,$)=>gu(W,u,f,!0)?1:Math.max(Z,Z*e,$,$*e),S=(W,Z,$)=>gu(W,u,f,!0)?-1:Math.min(Z,Z*e,$,$*e),w=E(0,d,_),D=E(Re,p,b),z=S(Xt,d,_),F=S(Xt+Re,p,b);i=(w-z)/2,r=(D-F)/2,o=-(w+z)/2,l=-(D+F)/2}return{ratioX:i,ratioY:r,offsetX:o,offsetY:l}}class za extends Ai{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const i=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=i;else{let o=f=>+i[f];if(Ht(i[t])){const{key:f="value"}=this._parsing;o=d=>+qr(i[d],f)}let l,u;for(l=t,u=t+e;l<u;++l)r._parsed[l]=o(l)}}_getRotation(){return Ei(this.options.rotation-90)}_getCircumference(){return Ei(this.options.circumference)}_getRotationExtents(){let t=de,e=-de;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const r=this.chart.getDatasetMeta(i).controller,o=r._getRotation(),l=r._getCircumference();t=Math.min(t,o),e=Math.max(e,o+l)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:i}=e,r=this._cachedMeta,o=r.data,l=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,u=Math.max((Math.min(i.width,i.height)-l)/2,0),f=Math.min(IP(this.options.cutout,u),1),d=this._getRingWeight(this.index),{circumference:p,rotation:_}=this._getRotationExtents(),{ratioX:b,ratioY:E,offsetX:S,offsetY:w}=yL(_,p,f),D=(i.width-l)/b,z=(i.height-l)/E,F=Math.max(Math.min(D,z)/2,0),W=F1(this.options.radius,F),Z=Math.max(W*f,0),$=(W-Z)/this._getVisibleDatasetWeightTotal();this.offsetX=S*W,this.offsetY=w*W,r.total=this.calculateTotal(),this.outerRadius=W-$*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-$*d,0),this.updateElements(o,0,o.length,t)}_circumference(t,e){const i=this.options,r=this._cachedMeta,o=this._getCircumference();return e&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||r._parsed[t]===null||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*o/de)}updateElements(t,e,i,r){const o=r==="reset",l=this.chart,u=l.chartArea,d=l.options.animation,p=(u.left+u.right)/2,_=(u.top+u.bottom)/2,b=o&&d.animateScale,E=b?0:this.innerRadius,S=b?0:this.outerRadius,{sharedOptions:w,includeOptions:D}=this._getSharedOptions(e,r);let z=this._getRotation(),F;for(F=0;F<e;++F)z+=this._circumference(F,o);for(F=e;F<e+i;++F){const W=this._circumference(F,o),Z=t[F],$={x:p+this.offsetX,y:_+this.offsetY,startAngle:z,endAngle:z+W,circumference:W,outerRadius:S,innerRadius:E};D&&($.options=w||this.resolveDataElementOptions(F,Z.active?"active":r)),z+=W,this.updateElement(Z,F,$,r)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let i=0,r;for(r=0;r<e.length;r++){const o=t._parsed[r];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(r)&&!e[r].hidden&&(i+=Math.abs(o))}return i}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?de*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,r=i.data.labels||[],o=Nu(e._parsed[t],i.options.locale);return{label:r[t]||"",value:o}}getMaxBorderWidth(t){let e=0;const i=this.chart;let r,o,l,u,f;if(!t){for(r=0,o=i.data.datasets.length;r<o;++r)if(i.isDatasetVisible(r)){l=i.getDatasetMeta(r),t=l.data,u=l.controller;break}}if(!t)return 0;for(r=0,o=t.length;r<o;++r)f=u.resolveDataElementOptions(r),f.borderAlign!=="inner"&&(e=Math.max(e,f.borderWidth||0,f.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let i=0,r=t.length;i<r;++i){const o=this.resolveDataElementOptions(i);e=Math.max(e,o.offset||0,o.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i));return e}_getRingWeight(t){return Math.max(Rt(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}ct(za,"id","doughnut"),ct(za,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),ct(za,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),ct(za,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data,{labels:{pointStyle:i,textAlign:r,color:o,useBorderRadius:l,borderRadius:u}}=t.legend.options;return e.labels.length&&e.datasets.length?e.labels.map((f,d)=>{const _=t.getDatasetMeta(0).controller.getStyle(d);return{text:f,fillStyle:_.backgroundColor,fontColor:o,hidden:!t.getDataVisibility(d),lineDash:_.borderDash,lineDashOffset:_.borderDashOffset,lineJoin:_.borderJoinStyle,lineWidth:_.borderWidth,strokeStyle:_.borderColor,textAlign:r,pointStyle:i,borderRadius:l&&(u||_.borderRadius),index:d}}):[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}}});class Hf extends Ai{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:i,data:r=[],_dataset:o}=e,l=this.chart._animationsDisabled;let{start:u,count:f}=Q1(e,r,l);this._drawStart=u,this._drawCount=f,$1(e)&&(u=0,f=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!o._decimated,i.points=r;const d=this.resolveDatasetElementOptions(t);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(i,void 0,{animated:!l,options:d},t),this.updateElements(r,u,f,t)}updateElements(t,e,i,r){const o=r==="reset",{iScale:l,vScale:u,_stacked:f,_dataset:d}=this._cachedMeta,{sharedOptions:p,includeOptions:_}=this._getSharedOptions(e,r),b=l.axis,E=u.axis,{spanGaps:S,segment:w}=this.options,D=hl(S)?S:Number.POSITIVE_INFINITY,z=this.chart._animationsDisabled||o||r==="none",F=e+i,W=t.length;let Z=e>0&&this.getParsed(e-1);for(let $=0;$<W;++$){const st=t[$],M=z?st:{};if($<e||$>=F){M.skip=!0;continue}const C=this.getParsed($),O=Lt(C[E]),P=M[b]=l.getPixelForValue(C[b],$),k=M[E]=o||O?u.getBasePixel():u.getPixelForValue(f?this.applyStack(u,C,f):C[E],$);M.skip=isNaN(P)||isNaN(k)||O,M.stop=$>0&&Math.abs(C[b]-Z[b])>D,w&&(M.parsed=C,M.raw=d.data[$]),_&&(M.options=p||this.resolveDataElementOptions($,st.active?"active":r)),z||this.updateElement(st,$,M,r),Z=C}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,i=e.options&&e.options.borderWidth||0,r=t.data||[];if(!r.length)return i;const o=r[0].size(this.resolveDataElementOptions(0)),l=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,o,l)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}ct(Hf,"id","line"),ct(Hf,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),ct(Hf,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class eu extends Ai{constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,r=i.data.labels||[],o=Nu(e._parsed[t].r,i.options.locale);return{label:r[t]||"",value:o}}parseObjectData(t,e,i,r){return rw.bind(this)(t,e,i,r)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((i,r)=>{const o=this.getParsed(r).r;!isNaN(o)&&this.chart.getDataVisibility(r)&&(o<e.min&&(e.min=o),o>e.max&&(e.max=o))}),e}_updateRadius(){const t=this.chart,e=t.chartArea,i=t.options,r=Math.min(e.right-e.left,e.bottom-e.top),o=Math.max(r/2,0),l=Math.max(i.cutoutPercentage?o/100*i.cutoutPercentage:1,0),u=(o-l)/t.getVisibleDatasetCount();this.outerRadius=o-u*this.index,this.innerRadius=this.outerRadius-u}updateElements(t,e,i,r){const o=r==="reset",l=this.chart,f=l.options.animation,d=this._cachedMeta.rScale,p=d.xCenter,_=d.yCenter,b=d.getIndexAngle(0)-.5*Xt;let E=b,S;const w=360/this.countVisibleElements();for(S=0;S<e;++S)E+=this._computeAngle(S,r,w);for(S=e;S<e+i;S++){const D=t[S];let z=E,F=E+this._computeAngle(S,r,w),W=l.getDataVisibility(S)?d.getDistanceFromCenterForValue(this.getParsed(S).r):0;E=F,o&&(f.animateScale&&(W=0),f.animateRotate&&(z=F=b));const Z={x:p,y:_,innerRadius:0,outerRadius:W,startAngle:z,endAngle:F,options:this.resolveDataElementOptions(S,D.active?"active":r)};this.updateElement(D,S,Z,r)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach((i,r)=>{!isNaN(this.getParsed(r).r)&&this.chart.getDataVisibility(r)&&e++}),e}_computeAngle(t,e,i){return this.chart.getDataVisibility(t)?Ei(this.resolveDataElementOptions(t,e).angle||i):0}}ct(eu,"id","polarArea"),ct(eu,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),ct(eu,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i,color:r}}=t.legend.options;return e.labels.map((o,l)=>{const f=t.getDatasetMeta(0).controller.getStyle(l);return{text:o,fillStyle:f.backgroundColor,strokeStyle:f.borderColor,fontColor:r,lineWidth:f.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(l),index:l}})}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class fy extends za{}ct(fy,"id","pie"),ct(fy,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class qf extends Ai{getLabelAndValue(t){const e=this._cachedMeta.vScale,i=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(i[e.axis])}}parseObjectData(t,e,i,r){return rw.bind(this)(t,e,i,r)}update(t){const e=this._cachedMeta,i=e.dataset,r=e.data||[],o=e.iScale.getLabels();if(i.points=r,t!=="resize"){const l=this.resolveDatasetElementOptions(t);this.options.showLine||(l.borderWidth=0);const u={_loop:!0,_fullLoop:o.length===r.length,options:l};this.updateElement(i,void 0,u,t)}this.updateElements(r,0,r.length,t)}updateElements(t,e,i,r){const o=this._cachedMeta.rScale,l=r==="reset";for(let u=e;u<e+i;u++){const f=t[u],d=this.resolveDataElementOptions(u,f.active?"active":r),p=o.getPointPositionForValue(u,this.getParsed(u).r),_=l?o.xCenter:p.x,b=l?o.yCenter:p.y,E={x:_,y:b,angle:p.angle,skip:isNaN(_)||isNaN(b),options:d};this.updateElement(f,u,E,r)}}}ct(qf,"id","radar"),ct(qf,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),ct(qf,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Gf extends Ai{getLabelAndValue(t){const e=this._cachedMeta,i=this.chart.data.labels||[],{xScale:r,yScale:o}=e,l=this.getParsed(t),u=r.getLabelForValue(l.x),f=o.getLabelForValue(l.y);return{label:i[t]||"",value:"("+u+", "+f+")"}}update(t){const e=this._cachedMeta,{data:i=[]}=e,r=this.chart._animationsDisabled;let{start:o,count:l}=Q1(e,i,r);if(this._drawStart=o,this._drawCount=l,$1(e)&&(o=0,l=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:u,_dataset:f}=e;u._chart=this.chart,u._datasetIndex=this.index,u._decimated=!!f._decimated,u.points=i;const d=this.resolveDatasetElementOptions(t);d.segment=this.options.segment,this.updateElement(u,void 0,{animated:!r,options:d},t)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(i,o,l,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,i,r){const o=r==="reset",{iScale:l,vScale:u,_stacked:f,_dataset:d}=this._cachedMeta,p=this.resolveDataElementOptions(e,r),_=this.getSharedOptions(p),b=this.includeOptions(r,_),E=l.axis,S=u.axis,{spanGaps:w,segment:D}=this.options,z=hl(w)?w:Number.POSITIVE_INFINITY,F=this.chart._animationsDisabled||o||r==="none";let W=e>0&&this.getParsed(e-1);for(let Z=e;Z<e+i;++Z){const $=t[Z],st=this.getParsed(Z),M=F?$:{},C=Lt(st[S]),O=M[E]=l.getPixelForValue(st[E],Z),P=M[S]=o||C?u.getBasePixel():u.getPixelForValue(f?this.applyStack(u,st,f):st[S],Z);M.skip=isNaN(O)||isNaN(P)||C,M.stop=Z>0&&Math.abs(st[E]-W[E])>z,D&&(M.parsed=st,M.raw=d.data[Z]),b&&(M.options=_||this.resolveDataElementOptions(Z,$.active?"active":r)),F||this.updateElement($,Z,M,r),W=st}this.updateSharedOptions(_,r,p)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let u=0;for(let f=e.length-1;f>=0;--f)u=Math.max(u,e[f].size(this.resolveDataElementOptions(f))/2);return u>0&&u}const i=t.dataset,r=i.options&&i.options.borderWidth||0;if(!e.length)return r;const o=e[0].size(this.resolveDataElementOptions(0)),l=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(r,o,l)/2}}ct(Gf,"id","scatter"),ct(Gf,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),ct(Gf,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var _L=Object.freeze({__proto__:null,BarController:Bf,BubbleController:Ff,DoughnutController:za,LineController:Hf,PieController:fy,PolarAreaController:eu,RadarController:qf,ScatterController:Gf});function Ma(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class N_{constructor(t){ct(this,"options");this.options=t||{}}static override(t){Object.assign(N_.prototype,t)}init(){}formats(){return Ma()}parse(){return Ma()}format(){return Ma()}add(){return Ma()}diff(){return Ma()}startOf(){return Ma()}endOf(){return Ma()}}var bL={_date:N_};function vL(n,t,e,i){const{controller:r,data:o,_sorted:l}=n,u=r._cachedMeta.iScale,f=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(u&&t===u.axis&&t!=="r"&&l&&o.length){const d=u._reversePixels?FP:Ns;if(i){if(r._sharedOptions){const p=o[0],_=typeof p.getRange=="function"&&p.getRange(t);if(_){const b=d(o,t,e-_),E=d(o,t,e+_);return{lo:b.lo,hi:E.hi}}}}else{const p=d(o,t,e);if(f){const{vScale:_}=r._cachedMeta,{_parsed:b}=n,E=b.slice(0,p.lo+1).reverse().findIndex(w=>!Lt(w[_.axis]));p.lo-=Math.max(0,E);const S=b.slice(p.hi).findIndex(w=>!Lt(w[_.axis]));p.hi+=Math.max(0,S)}return p}}return{lo:0,hi:o.length-1}}function Jd(n,t,e,i,r){const o=n.getSortedVisibleDatasetMetas(),l=e[t];for(let u=0,f=o.length;u<f;++u){const{index:d,data:p}=o[u],{lo:_,hi:b}=vL(o[u],t,l,r);for(let E=_;E<=b;++E){const S=p[E];S.skip||i(S,d,E)}}}function TL(n){const t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(i,r){const o=t?Math.abs(i.x-r.x):0,l=e?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(l,2))}}function Ap(n,t,e,i,r){const o=[];return!r&&!n.isPointInArea(t)||Jd(n,e,t,function(u,f,d){!r&&!ks(u,n.chartArea,0)||u.inRange(t.x,t.y,i)&&o.push({element:u,datasetIndex:f,index:d})},!0),o}function EL(n,t,e,i){let r=[];function o(l,u,f){const{startAngle:d,endAngle:p}=l.getProps(["startAngle","endAngle"],i),{angle:_}=G1(l,{x:t.x,y:t.y});gu(_,d,p)&&r.push({element:l,datasetIndex:u,index:f})}return Jd(n,e,t,o),r}function xL(n,t,e,i,r,o){let l=[];const u=TL(e);let f=Number.POSITIVE_INFINITY;function d(p,_,b){const E=p.inRange(t.x,t.y,r);if(i&&!E)return;const S=p.getCenterPoint(r);if(!(!!o||n.isPointInArea(S))&&!E)return;const D=u(t,S);D<f?(l=[{element:p,datasetIndex:_,index:b}],f=D):D===f&&l.push({element:p,datasetIndex:_,index:b})}return Jd(n,e,t,d),l}function wp(n,t,e,i,r,o){return!o&&!n.isPointInArea(t)?[]:e==="r"&&!i?EL(n,t,e,r):xL(n,t,e,i,r,o)}function Tx(n,t,e,i,r){const o=[],l=e==="x"?"inXRange":"inYRange";let u=!1;return Jd(n,e,t,(f,d,p)=>{f[l]&&f[l](t[e],r)&&(o.push({element:f,datasetIndex:d,index:p}),u=u||f.inRange(t.x,t.y,r))}),i&&!u?[]:o}var SL={modes:{index(n,t,e,i){const r=ka(t,n),o=e.axis||"x",l=e.includeInvisible||!1,u=e.intersect?Ap(n,r,o,i,l):wp(n,r,o,!1,i,l),f=[];return u.length?(n.getSortedVisibleDatasetMetas().forEach(d=>{const p=u[0].index,_=d.data[p];_&&!_.skip&&f.push({element:_,datasetIndex:d.index,index:p})}),f):[]},dataset(n,t,e,i){const r=ka(t,n),o=e.axis||"xy",l=e.includeInvisible||!1;let u=e.intersect?Ap(n,r,o,i,l):wp(n,r,o,!1,i,l);if(u.length>0){const f=u[0].datasetIndex,d=n.getDatasetMeta(f).data;u=[];for(let p=0;p<d.length;++p)u.push({element:d[p],datasetIndex:f,index:p})}return u},point(n,t,e,i){const r=ka(t,n),o=e.axis||"xy",l=e.includeInvisible||!1;return Ap(n,r,o,i,l)},nearest(n,t,e,i){const r=ka(t,n),o=e.axis||"xy",l=e.includeInvisible||!1;return wp(n,r,o,e.intersect,i,l)},x(n,t,e,i){const r=ka(t,n);return Tx(n,r,"x",e.intersect,i)},y(n,t,e,i){const r=ka(t,n);return Tx(n,r,"y",e.intersect,i)}}};const pw=["left","top","right","bottom"];function Ic(n,t){return n.filter(e=>e.pos===t)}function Ex(n,t){return n.filter(e=>pw.indexOf(e.pos)===-1&&e.box.axis===t)}function Dc(n,t){return n.sort((e,i)=>{const r=t?i:e,o=t?e:i;return r.weight===o.weight?r.index-o.index:r.weight-o.weight})}function AL(n){const t=[];let e,i,r,o,l,u;for(e=0,i=(n||[]).length;e<i;++e)r=n[e],{position:o,options:{stack:l,stackWeight:u=1}}=r,t.push({index:e,box:r,pos:o,horizontal:r.isHorizontal(),weight:r.weight,stack:l&&o+l,stackWeight:u});return t}function wL(n){const t={};for(const e of n){const{stack:i,pos:r,stackWeight:o}=e;if(!i||!pw.includes(r))continue;const l=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});l.count++,l.weight+=o}return t}function CL(n,t){const e=wL(n),{vBoxMaxWidth:i,hBoxMaxHeight:r}=t;let o,l,u;for(o=0,l=n.length;o<l;++o){u=n[o];const{fullSize:f}=u.box,d=e[u.stack],p=d&&u.stackWeight/d.weight;u.horizontal?(u.width=p?p*i:f&&t.availableWidth,u.height=r):(u.width=i,u.height=p?p*r:f&&t.availableHeight)}return e}function RL(n){const t=AL(n),e=Dc(t.filter(d=>d.box.fullSize),!0),i=Dc(Ic(t,"left"),!0),r=Dc(Ic(t,"right")),o=Dc(Ic(t,"top"),!0),l=Dc(Ic(t,"bottom")),u=Ex(t,"x"),f=Ex(t,"y");return{fullSize:e,leftAndTop:i.concat(o),rightAndBottom:r.concat(f).concat(l).concat(u),chartArea:Ic(t,"chartArea"),vertical:i.concat(r).concat(f),horizontal:o.concat(l).concat(u)}}function xx(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function yw(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function IL(n,t,e,i){const{pos:r,box:o}=e,l=n.maxPadding;if(!Ht(r)){e.size&&(n[r]-=e.size);const _=i[e.stack]||{size:0,count:1};_.size=Math.max(_.size,e.horizontal?o.height:o.width),e.size=_.size/_.count,n[r]+=e.size}o.getPadding&&yw(l,o.getPadding());const u=Math.max(0,t.outerWidth-xx(l,n,"left","right")),f=Math.max(0,t.outerHeight-xx(l,n,"top","bottom")),d=u!==n.w,p=f!==n.h;return n.w=u,n.h=f,e.horizontal?{same:d,other:p}:{same:p,other:d}}function DL(n){const t=n.maxPadding;function e(i){const r=Math.max(t[i]-n[i],0);return n[i]+=r,r}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function ML(n,t){const e=t.maxPadding;function i(r){const o={left:0,top:0,right:0,bottom:0};return r.forEach(l=>{o[l]=Math.max(t[l],e[l])}),o}return i(n?["left","right"]:["top","bottom"])}function Bc(n,t,e,i){const r=[];let o,l,u,f,d,p;for(o=0,l=n.length,d=0;o<l;++o){u=n[o],f=u.box,f.update(u.width||t.w,u.height||t.h,ML(u.horizontal,t));const{same:_,other:b}=IL(t,e,u,i);d|=_&&r.length,p=p||b,f.fullSize||r.push(u)}return d&&Bc(r,t,e,i)||p}function Ef(n,t,e,i,r){n.top=e,n.left=t,n.right=t+i,n.bottom=e+r,n.width=i,n.height=r}function Sx(n,t,e,i){const r=e.padding;let{x:o,y:l}=t;for(const u of n){const f=u.box,d=i[u.stack]||{placed:0,weight:1},p=u.stackWeight/d.weight||1;if(u.horizontal){const _=t.w*p,b=d.size||f.height;du(d.start)&&(l=d.start),f.fullSize?Ef(f,r.left,l,e.outerWidth-r.right-r.left,b):Ef(f,t.left+d.placed,l,_,b),d.start=l,d.placed+=_,l=f.bottom}else{const _=t.h*p,b=d.size||f.width;du(d.start)&&(o=d.start),f.fullSize?Ef(f,o,r.top,b,e.outerHeight-r.bottom-r.top):Ef(f,o,t.top+d.placed,b,_),d.start=o,d.placed+=_,o=f.right}}t.x=o,t.y=l}var mn={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;const r=yn(n.options.layout.padding),o=Math.max(t-r.width,0),l=Math.max(e-r.height,0),u=RL(n.boxes),f=u.vertical,d=u.horizontal;ne(n.boxes,w=>{typeof w.beforeLayout=="function"&&w.beforeLayout()});const p=f.reduce((w,D)=>D.box.options&&D.box.options.display===!1?w:w+1,0)||1,_=Object.freeze({outerWidth:t,outerHeight:e,padding:r,availableWidth:o,availableHeight:l,vBoxMaxWidth:o/2/p,hBoxMaxHeight:l/2}),b=Object.assign({},r);yw(b,yn(i));const E=Object.assign({maxPadding:b,w:o,h:l,x:r.left,y:r.top},r),S=CL(f.concat(d),_);Bc(u.fullSize,E,_,S),Bc(f,E,_,S),Bc(d,E,_,S)&&Bc(f,E,_,S),DL(E),Sx(u.leftAndTop,E,_,S),E.x+=E.w,E.y+=E.h,Sx(u.rightAndBottom,E,_,S),n.chartArea={left:E.left,top:E.top,right:E.left+E.w,bottom:E.top+E.h,height:E.h,width:E.w},ne(u.chartArea,w=>{const D=w.box;Object.assign(D,n.chartArea),D.update(E.w,E.h,{left:0,top:0,right:0,bottom:0})})}};class _w{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,r){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):i)}}isAttached(t){return!0}updateConfig(t){}}class OL extends _w{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Yf="$chartjs",NL={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Ax=n=>n===null||n==="";function kL(n,t){const e=n.style,i=n.getAttribute("height"),r=n.getAttribute("width");if(n[Yf]={initial:{height:i,width:r,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",Ax(r)){const o=lx(n,"width");o!==void 0&&(n.width=o)}if(Ax(i))if(n.style.height==="")n.height=n.width/(t||2);else{const o=lx(n,"height");o!==void 0&&(n.height=o)}return n}const bw=PV?{passive:!0}:!1;function PL(n,t,e){n&&n.addEventListener(t,e,bw)}function VL(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,bw)}function LL(n,t){const e=NL[n.type]||n.type,{x:i,y:r}=ka(n,t);return{type:e,chart:t,native:n,x:i!==void 0?i:null,y:r!==void 0?r:null}}function Ed(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function zL(n,t,e){const i=n.canvas,r=new MutationObserver(o=>{let l=!1;for(const u of o)l=l||Ed(u.addedNodes,i),l=l&&!Ed(u.removedNodes,i);l&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}function jL(n,t,e){const i=n.canvas,r=new MutationObserver(o=>{let l=!1;for(const u of o)l=l||Ed(u.removedNodes,i),l=l&&!Ed(u.addedNodes,i);l&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}const pu=new Map;let wx=0;function vw(){const n=window.devicePixelRatio;n!==wx&&(wx=n,pu.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function UL(n,t){pu.size||window.addEventListener("resize",vw),pu.set(n,t)}function BL(n){pu.delete(n),pu.size||window.removeEventListener("resize",vw)}function FL(n,t,e){const i=n.canvas,r=i&&O_(i);if(!r)return;const o=X1((u,f)=>{const d=r.clientWidth;e(u,f),d<r.clientWidth&&e()},window),l=new ResizeObserver(u=>{const f=u[0],d=f.contentRect.width,p=f.contentRect.height;d===0&&p===0||o(d,p)});return l.observe(r),UL(n,o),l}function Cp(n,t,e){e&&e.disconnect(),t==="resize"&&BL(n)}function HL(n,t,e){const i=n.canvas,r=X1(o=>{n.ctx!==null&&e(LL(o,n))},n);return PL(i,t,r),r}class qL extends _w{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(kL(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[Yf])return!1;const i=e[Yf].initial;["height","width"].forEach(o=>{const l=i[o];Lt(l)?e.removeAttribute(o):e.setAttribute(o,l)});const r=i.style||{};return Object.keys(r).forEach(o=>{e.style[o]=r[o]}),e.width=e.width,delete e[Yf],!0}addEventListener(t,e,i){this.removeEventListener(t,e);const r=t.$proxies||(t.$proxies={}),l={attach:zL,detach:jL,resize:FL}[e]||HL;r[e]=l(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),r=i[e];if(!r)return;({attach:Cp,detach:Cp,resize:Cp}[e]||VL)(t,e,r),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,r){return kV(t,e,i,r)}isAttached(t){const e=t&&O_(t);return!!(e&&e.isConnected)}}function GL(n){return!M_()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?OL:qL}class Ci{constructor(){ct(this,"x");ct(this,"y");ct(this,"active",!1);ct(this,"options");ct(this,"$animations")}tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return hl(this.x)&&hl(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const r={};return t.forEach(o=>{r[o]=i[o]&&i[o].active()?i[o]._to:this[o]}),r}}ct(Ci,"defaults",{}),ct(Ci,"defaultRoutes");function YL(n,t){const e=n.options.ticks,i=KL(n),r=Math.min(e.maxTicksLimit||i,i),o=e.major.enabled?XL(t):[],l=o.length,u=o[0],f=o[l-1],d=[];if(l>r)return QL(t,d,o,l/r),d;const p=WL(o,t,r);if(l>0){let _,b;const E=l>1?Math.round((f-u)/(l-1)):null;for(xf(t,d,p,Lt(E)?0:u-E,u),_=0,b=l-1;_<b;_++)xf(t,d,p,o[_],o[_+1]);return xf(t,d,p,f,Lt(E)?t.length:f+E),d}return xf(t,d,p),d}function KL(n){const t=n.options.offset,e=n._tickSize(),i=n._length/e+(t?0:1),r=n._maxLength/e;return Math.floor(Math.min(i,r))}function WL(n,t,e){const i=$L(n),r=t.length/e;if(!i)return Math.max(r,1);const o=LP(i);for(let l=0,u=o.length-1;l<u;l++){const f=o[l];if(f>r)return f}return Math.max(r,1)}function XL(n){const t=[];let e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}function QL(n,t,e,i){let r=0,o=e[0],l;for(i=Math.ceil(i),l=0;l<n.length;l++)l===o&&(t.push(n[l]),r++,o=e[r*i])}function xf(n,t,e,i,r){const o=Rt(i,0),l=Math.min(Rt(r,n.length),n.length);let u=0,f,d,p;for(e=Math.ceil(e),r&&(f=r-i,e=f/Math.floor(f/e)),p=o;p<0;)u++,p=Math.round(o+u*e);for(d=Math.max(o,0);d<l;d++)d===p&&(t.push(n[d]),u++,p=Math.round(o+u*e))}function $L(n){const t=n.length;let e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}const JL=n=>n==="left"?"right":n==="right"?"left":n,Cx=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,Rx=(n,t)=>Math.min(t||n,n);function Ix(n,t){const e=[],i=n.length/t,r=n.length;let o=0;for(;o<r;o+=i)e.push(n[Math.floor(o)]);return e}function ZL(n,t,e){const i=n.ticks.length,r=Math.min(t,i-1),o=n._startPixel,l=n._endPixel,u=1e-6;let f=n.getPixelForTick(r),d;if(!(e&&(i===1?d=Math.max(f-o,l-f):t===0?d=(n.getPixelForTick(1)-f)/2:d=(f-n.getPixelForTick(r-1))/2,f+=r<t?d:-d,f<o-u||f>l+u)))return f}function t4(n,t){ne(n,e=>{const i=e.gc,r=i.length/2;let o;if(r>t){for(o=0;o<r;++o)delete e.data[i[o]];i.splice(0,r)}})}function Mc(n){return n.drawTicks?n.tickLength:0}function Dx(n,t){if(!n.display)return 0;const e=Ye(n.font,t),i=yn(n.padding);return(ye(n.text)?n.text.length:1)*e.lineHeight+i.height}function e4(n,t){return $r(n,{scale:t,type:"scale"})}function n4(n,t,e){return $r(n,{tick:e,index:t,type:"tick"})}function i4(n,t,e){let i=A_(n);return(e&&t!=="right"||!e&&t==="right")&&(i=JL(i)),i}function s4(n,t,e,i){const{top:r,left:o,bottom:l,right:u,chart:f}=n,{chartArea:d,scales:p}=f;let _=0,b,E,S;const w=l-r,D=u-o;if(n.isHorizontal()){if(E=hn(i,o,u),Ht(e)){const z=Object.keys(e)[0],F=e[z];S=p[z].getPixelForValue(F)+w-t}else e==="center"?S=(d.bottom+d.top)/2+w-t:S=Cx(n,e,t);b=u-o}else{if(Ht(e)){const z=Object.keys(e)[0],F=e[z];E=p[z].getPixelForValue(F)-D+t}else e==="center"?E=(d.left+d.right)/2-D+t:E=Cx(n,e,t);S=hn(i,l,r),_=e==="left"?-Re:Re}return{titleX:E,titleY:S,maxWidth:b,rotation:_}}class eo extends Ci{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:r}=this;return t=Hn(t,Number.POSITIVE_INFINITY),e=Hn(e,Number.NEGATIVE_INFINITY),i=Hn(i,Number.POSITIVE_INFINITY),r=Hn(r,Number.NEGATIVE_INFINITY),{min:Hn(t,i),max:Hn(e,r),minDefined:Ee(t),maxDefined:Ee(e)}}getMinMax(t){let{min:e,max:i,minDefined:r,maxDefined:o}=this.getUserBounds(),l;if(r&&o)return{min:e,max:i};const u=this.getMatchingVisibleMetas();for(let f=0,d=u.length;f<d;++f)l=u[f].controller.getMinMax(this,t),r||(e=Math.min(e,l.min)),o||(i=Math.max(i,l.max));return e=o&&e>i?i:e,i=r&&e>i?e:i,{min:Hn(e,Hn(i,e)),max:Hn(i,Hn(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){le(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:r,grace:o,ticks:l}=this.options,u=l.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=fV(this,o,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const f=u<this.ticks.length;this._convertTicksToLabels(f?Ix(this.ticks,u):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),l.display&&(l.autoSkip||l.source==="auto")&&(this.ticks=YL(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),f&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){le(this.options.afterUpdate,[this])}beforeSetDimensions(){le(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){le(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),le(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){le(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,r,o;for(i=0,r=t.length;i<r;i++)o=t[i],o.label=le(e.callback,[o.value,i,t],this)}afterTickToLabelConversion(){le(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){le(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=Rx(this.ticks.length,t.ticks.maxTicksLimit),r=e.minRotation||0,o=e.maxRotation;let l=r,u,f,d;if(!this._isVisible()||!e.display||r>=o||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const p=this._getLabelSizes(),_=p.widest.width,b=p.highest.height,E=Je(this.chart.width-_,0,this.maxWidth);u=t.offset?this.maxWidth/i:E/(i-1),_+6>u&&(u=E/(i-(t.offset?.5:1)),f=this.maxHeight-Mc(t.grid)-e.padding-Dx(t.title,this.chart.options.font),d=Math.sqrt(_*_+b*b),l=x_(Math.min(Math.asin(Je((p.highest.height+6)/u,-1,1)),Math.asin(Je(f/d,-1,1))-Math.asin(Je(b/d,-1,1)))),l=Math.max(r,Math.min(o,l))),this.labelRotation=l}afterCalculateLabelRotation(){le(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){le(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:r,grid:o}}=this,l=this._isVisible(),u=this.isHorizontal();if(l){const f=Dx(r,e.options.font);if(u?(t.width=this.maxWidth,t.height=Mc(o)+f):(t.height=this.maxHeight,t.width=Mc(o)+f),i.display&&this.ticks.length){const{first:d,last:p,widest:_,highest:b}=this._getLabelSizes(),E=i.padding*2,S=Ei(this.labelRotation),w=Math.cos(S),D=Math.sin(S);if(u){const z=i.mirror?0:D*_.width+w*b.height;t.height=Math.min(this.maxHeight,t.height+z+E)}else{const z=i.mirror?0:w*_.width+D*b.height;t.width=Math.min(this.maxWidth,t.width+z+E)}this._calculatePadding(d,p,D,w)}}this._handleMargins(),u?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,r){const{ticks:{align:o,padding:l},position:u}=this.options,f=this.labelRotation!==0,d=u!=="top"&&this.axis==="x";if(this.isHorizontal()){const p=this.getPixelForTick(0)-this.left,_=this.right-this.getPixelForTick(this.ticks.length-1);let b=0,E=0;f?d?(b=r*t.width,E=i*e.height):(b=i*t.height,E=r*e.width):o==="start"?E=e.width:o==="end"?b=t.width:o!=="inner"&&(b=t.width/2,E=e.width/2),this.paddingLeft=Math.max((b-p+l)*this.width/(this.width-p),0),this.paddingRight=Math.max((E-_+l)*this.width/(this.width-_),0)}else{let p=e.height/2,_=t.height/2;o==="start"?(p=0,_=t.height):o==="end"&&(p=e.height,_=0),this.paddingTop=p+l,this.paddingBottom=_+l}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){le(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)Lt(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=Ix(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:r,_longestTextCache:o}=this,l=[],u=[],f=Math.floor(e/Rx(e,i));let d=0,p=0,_,b,E,S,w,D,z,F,W,Z,$;for(_=0;_<e;_+=f){if(S=t[_].label,w=this._resolveTickFontOptions(_),r.font=D=w.string,z=o[D]=o[D]||{data:{},gc:[]},F=w.lineHeight,W=Z=0,!Lt(S)&&!ye(S))W=vd(r,z.data,z.gc,W,S),Z=F;else if(ye(S))for(b=0,E=S.length;b<E;++b)$=S[b],!Lt($)&&!ye($)&&(W=vd(r,z.data,z.gc,W,$),Z+=F);l.push(W),u.push(Z),d=Math.max(W,d),p=Math.max(Z,p)}t4(o,e);const st=l.indexOf(d),M=u.indexOf(p),C=O=>({width:l[O]||0,height:u[O]||0});return{first:C(0),last:C(e-1),widest:C(st),highest:C(M),widths:l,heights:u}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return BP(this._alignToPixels?Da(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=n4(this.getContext(),t,i))}return this.$context||(this.$context=e4(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=Ei(this.labelRotation),i=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),o=this._getLabelSizes(),l=t.autoSkipPadding||0,u=o?o.widest.width+l:0,f=o?o.highest.height+l:0;return this.isHorizontal()?f*i>u*r?u/i:f/r:f*r<u*i?f/i:u/r}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,r=this.options,{grid:o,position:l,border:u}=r,f=o.offset,d=this.isHorizontal(),_=this.ticks.length+(f?1:0),b=Mc(o),E=[],S=u.setContext(this.getContext()),w=S.display?S.width:0,D=w/2,z=function(K){return Da(i,K,w)};let F,W,Z,$,st,M,C,O,P,k,j,N;if(l==="top")F=z(this.bottom),M=this.bottom-b,O=F-D,k=z(t.top)+D,N=t.bottom;else if(l==="bottom")F=z(this.top),k=t.top,N=z(t.bottom)-D,M=F+D,O=this.top+b;else if(l==="left")F=z(this.right),st=this.right-b,C=F-D,P=z(t.left)+D,j=t.right;else if(l==="right")F=z(this.left),P=t.left,j=z(t.right)-D,st=F+D,C=this.left+b;else if(e==="x"){if(l==="center")F=z((t.top+t.bottom)/2+.5);else if(Ht(l)){const K=Object.keys(l)[0],at=l[K];F=z(this.chart.scales[K].getPixelForValue(at))}k=t.top,N=t.bottom,M=F+D,O=M+b}else if(e==="y"){if(l==="center")F=z((t.left+t.right)/2);else if(Ht(l)){const K=Object.keys(l)[0],at=l[K];F=z(this.chart.scales[K].getPixelForValue(at))}st=F-D,C=st-b,P=t.left,j=t.right}const Nt=Rt(r.ticks.maxTicksLimit,_),Et=Math.max(1,Math.ceil(_/Nt));for(W=0;W<_;W+=Et){const K=this.getContext(W),at=o.setContext(K),ft=u.setContext(K),bt=at.lineWidth,kt=at.color,L=ft.dash||[],J=ft.dashOffset,ot=at.tickWidth,ut=at.tickColor,vt=at.tickBorderDash||[],xt=at.tickBorderDashOffset;Z=ZL(this,W,f),Z!==void 0&&($=Da(i,Z,bt),d?st=C=P=j=$:M=O=k=N=$,E.push({tx1:st,ty1:M,tx2:C,ty2:O,x1:P,y1:k,x2:j,y2:N,width:bt,color:kt,borderDash:L,borderDashOffset:J,tickWidth:ot,tickColor:ut,tickBorderDash:vt,tickBorderDashOffset:xt}))}return this._ticksLength=_,this._borderValue=F,E}_computeLabelItems(t){const e=this.axis,i=this.options,{position:r,ticks:o}=i,l=this.isHorizontal(),u=this.ticks,{align:f,crossAlign:d,padding:p,mirror:_}=o,b=Mc(i.grid),E=b+p,S=_?-p:E,w=-Ei(this.labelRotation),D=[];let z,F,W,Z,$,st,M,C,O,P,k,j,N="middle";if(r==="top")st=this.bottom-S,M=this._getXAxisLabelAlignment();else if(r==="bottom")st=this.top+S,M=this._getXAxisLabelAlignment();else if(r==="left"){const Et=this._getYAxisLabelAlignment(b);M=Et.textAlign,$=Et.x}else if(r==="right"){const Et=this._getYAxisLabelAlignment(b);M=Et.textAlign,$=Et.x}else if(e==="x"){if(r==="center")st=(t.top+t.bottom)/2+E;else if(Ht(r)){const Et=Object.keys(r)[0],K=r[Et];st=this.chart.scales[Et].getPixelForValue(K)+E}M=this._getXAxisLabelAlignment()}else if(e==="y"){if(r==="center")$=(t.left+t.right)/2-E;else if(Ht(r)){const Et=Object.keys(r)[0],K=r[Et];$=this.chart.scales[Et].getPixelForValue(K)}M=this._getYAxisLabelAlignment(b).textAlign}e==="y"&&(f==="start"?N="top":f==="end"&&(N="bottom"));const Nt=this._getLabelSizes();for(z=0,F=u.length;z<F;++z){W=u[z],Z=W.label;const Et=o.setContext(this.getContext(z));C=this.getPixelForTick(z)+o.labelOffset,O=this._resolveTickFontOptions(z),P=O.lineHeight,k=ye(Z)?Z.length:1;const K=k/2,at=Et.color,ft=Et.textStrokeColor,bt=Et.textStrokeWidth;let kt=M;l?($=C,M==="inner"&&(z===F-1?kt=this.options.reverse?"left":"right":z===0?kt=this.options.reverse?"right":"left":kt="center"),r==="top"?d==="near"||w!==0?j=-k*P+P/2:d==="center"?j=-Nt.highest.height/2-K*P+P:j=-Nt.highest.height+P/2:d==="near"||w!==0?j=P/2:d==="center"?j=Nt.highest.height/2-K*P:j=Nt.highest.height-k*P,_&&(j*=-1),w!==0&&!Et.showLabelBackdrop&&($+=P/2*Math.sin(w))):(st=C,j=(1-k)*P/2);let L;if(Et.showLabelBackdrop){const J=yn(Et.backdropPadding),ot=Nt.heights[z],ut=Nt.widths[z];let vt=j-J.top,xt=0-J.left;switch(N){case"middle":vt-=ot/2;break;case"bottom":vt-=ot;break}switch(M){case"center":xt-=ut/2;break;case"right":xt-=ut;break;case"inner":z===F-1?xt-=ut:z>0&&(xt-=ut/2);break}L={left:xt,top:vt,width:ut+J.width,height:ot+J.height,color:Et.backdropColor}}D.push({label:Z,font:O,textOffset:j,options:{rotation:w,color:at,strokeColor:ft,strokeWidth:bt,textAlign:kt,textBaseline:N,translation:[$,st],backdrop:L}})}return D}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-Ei(this.labelRotation))return t==="top"?"left":"right";let r="center";return e.align==="start"?r="left":e.align==="end"?r="right":e.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:r,padding:o}}=this.options,l=this._getLabelSizes(),u=t+o,f=l.widest.width;let d,p;return e==="left"?r?(p=this.right+o,i==="near"?d="left":i==="center"?(d="center",p+=f/2):(d="right",p+=f)):(p=this.right-u,i==="near"?d="right":i==="center"?(d="center",p-=f/2):(d="left",p=this.left)):e==="right"?r?(p=this.left+o,i==="near"?d="right":i==="center"?(d="center",p-=f/2):(d="left",p-=f)):(p=this.left+u,i==="near"?d="left":i==="center"?(d="center",p+=f/2):(d="right",p=this.right)):d="right",{textAlign:d,x:p}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:r,width:o,height:l}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,r,o,l),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const r=this.ticks.findIndex(o=>o.value===t);return r>=0?e.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let o,l;const u=(f,d,p)=>{!p.width||!p.color||(i.save(),i.lineWidth=p.width,i.strokeStyle=p.color,i.setLineDash(p.borderDash||[]),i.lineDashOffset=p.borderDashOffset,i.beginPath(),i.moveTo(f.x,f.y),i.lineTo(d.x,d.y),i.stroke(),i.restore())};if(e.display)for(o=0,l=r.length;o<l;++o){const f=r[o];e.drawOnChartArea&&u({x:f.x1,y:f.y1},{x:f.x2,y:f.y2},f),e.drawTicks&&u({x:f.tx1,y:f.ty1},{x:f.tx2,y:f.ty2},{color:f.tickColor,width:f.tickWidth,borderDash:f.tickBorderDash,borderDashOffset:f.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:r}}=this,o=i.setContext(this.getContext()),l=i.display?o.width:0;if(!l)return;const u=r.setContext(this.getContext(0)).lineWidth,f=this._borderValue;let d,p,_,b;this.isHorizontal()?(d=Da(t,this.left,l)-l/2,p=Da(t,this.right,u)+u/2,_=b=f):(_=Da(t,this.top,l)-l/2,b=Da(t,this.bottom,u)+u/2,d=p=f),e.save(),e.lineWidth=o.width,e.strokeStyle=o.color,e.beginPath(),e.moveTo(d,_),e.lineTo(p,b),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&Xd(i,r);const o=this.getLabelItems(t);for(const l of o){const u=l.options,f=l.font,d=l.label,p=l.textOffset;$a(i,d,0,p,f,u)}r&&Qd(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:r}}=this;if(!i.display)return;const o=Ye(i.font),l=yn(i.padding),u=i.align;let f=o.lineHeight/2;e==="bottom"||e==="center"||Ht(e)?(f+=l.bottom,ye(i.text)&&(f+=o.lineHeight*(i.text.length-1))):f+=l.top;const{titleX:d,titleY:p,maxWidth:_,rotation:b}=s4(this,f,e,u);$a(t,i.text,0,0,o,{color:i.color,maxWidth:_,rotation:b,textAlign:i4(u,e,r),textBaseline:"middle",translation:[d,p]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=Rt(t.grid&&t.grid.z,-1),r=Rt(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==eo.prototype.draw?[{z:e,draw:o=>{this.draw(o)}}]:[{z:i,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:e,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let o,l;for(o=0,l=e.length;o<l;++o){const u=e[o];u[i]===this.id&&(!t||u.type===t)&&r.push(u)}return r}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return Ye(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Sf{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;o4(e)&&(i=this.register(e));const r=this.items,o=t.id,l=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+t);return o in r||(r[o]=t,r4(t,l,i),this.override&&_e.override(t.id,t.overrides)),l}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,r=this.scope;i in e&&delete e[i],r&&i in _e[r]&&(delete _e[r][i],this.override&&delete Qa[i])}}function r4(n,t,e){const i=fu(Object.create(null),[e?_e.get(e):{},_e.get(t),n.defaults]);_e.set(t,i),n.defaultRoutes&&a4(t,n.defaultRoutes),n.descriptors&&_e.describe(t,n.descriptors)}function a4(n,t){Object.keys(t).forEach(e=>{const i=e.split("."),r=i.pop(),o=[n].concat(i).join("."),l=t[e].split("."),u=l.pop(),f=l.join(".");_e.route(o,r,f,u)})}function o4(n){return"id"in n&&"defaults"in n}class l4{constructor(){this.controllers=new Sf(Ai,"datasets",!0),this.elements=new Sf(Ci,"elements"),this.plugins=new Sf(Object,"plugins"),this.scales=new Sf(eo,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(r=>{const o=i||this._getRegistryForType(r);i||o.isForType(r)||o===this.plugins&&r.id?this._exec(t,o,r):ne(r,l=>{const u=i||this._getRegistryForType(l);this._exec(t,u,l)})})}_exec(t,e,i){const r=E_(t);le(i["before"+r],[],i),e[t](i),le(i["after"+r],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const r=e.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return r}}var $i=new l4;class c4{constructor(){this._init=void 0}notify(t,e,i,r){if(e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const o=r?this._descriptors(t).filter(r):this._descriptors(t),l=this._notify(o,t,e,i);return e==="afterDestroy"&&(this._notify(o,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),l}_notify(t,e,i,r){r=r||{};for(const o of t){const l=o.plugin,u=l[i],f=[e,r,o.options];if(le(u,f,l)===!1&&r.cancelable)return!1}return!0}invalidate(){Lt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,r=Rt(i.options&&i.options.plugins,{}),o=u4(i);return r===!1&&!e?[]:f4(t,o,r,e)}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,r=(o,l)=>o.filter(u=>!l.some(f=>u.plugin.id===f.plugin.id));this._notify(r(e,i),t,"stop"),this._notify(r(i,e),t,"start")}}function u4(n){const t={},e=[],i=Object.keys($i.plugins.items);for(let o=0;o<i.length;o++)e.push($i.getPlugin(i[o]));const r=n.plugins||[];for(let o=0;o<r.length;o++){const l=r[o];e.indexOf(l)===-1&&(e.push(l),t[l.id]=!0)}return{plugins:e,localIds:t}}function h4(n,t){return!t&&n===!1?null:n===!0?{}:n}function f4(n,{plugins:t,localIds:e},i,r){const o=[],l=n.getContext();for(const u of t){const f=u.id,d=h4(i[f],r);d!==null&&o.push({plugin:u,options:d4(n.config,{plugin:u,local:e[f]},d,l)})}return o}function d4(n,{plugin:t,local:e},i,r){const o=n.pluginScopeKeys(t),l=n.getOptionScopes(i,o);return e&&t.defaults&&l.push(t.defaults),n.createResolver(l,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function dy(n,t){const e=_e.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function g4(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function m4(n,t){return n===t?"_index_":"_value_"}function Mx(n){if(n==="x"||n==="y"||n==="r")return n}function p4(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function gy(n,...t){if(Mx(n))return n;for(const e of t){const i=e.axis||p4(e.position)||n.length>1&&Mx(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function Ox(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function y4(n,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(e.length)return Ox(n,"x",e[0])||Ox(n,"y",e[0])}return{}}function _4(n,t){const e=Qa[n.type]||{scales:{}},i=t.scales||{},r=dy(n.type,t),o=Object.create(null);return Object.keys(i).forEach(l=>{const u=i[l];if(!Ht(u))return console.error(`Invalid scale configuration for scale: ${l}`);if(u._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const f=gy(l,u,y4(l,n),_e.scales[u.type]),d=m4(f,r),p=e.scales||{};o[l]=$c(Object.create(null),[{axis:f},u,p[f],p[d]])}),n.data.datasets.forEach(l=>{const u=l.type||n.type,f=l.indexAxis||dy(u,t),p=(Qa[u]||{}).scales||{};Object.keys(p).forEach(_=>{const b=g4(_,f),E=l[b+"AxisID"]||b;o[E]=o[E]||Object.create(null),$c(o[E],[{axis:b},i[E],p[_]])})}),Object.keys(o).forEach(l=>{const u=o[l];$c(u,[_e.scales[u.type],_e.scale])}),o}function Tw(n){const t=n.options||(n.options={});t.plugins=Rt(t.plugins,{}),t.scales=_4(n,t)}function Ew(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function b4(n){return n=n||{},n.data=Ew(n.data),Tw(n),n}const Nx=new Map,xw=new Set;function Af(n,t){let e=Nx.get(n);return e||(e=t(),Nx.set(n,e),xw.add(e)),e}const Oc=(n,t,e)=>{const i=qr(t,e);i!==void 0&&n.add(i)};class v4{constructor(t){this._config=b4(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Ew(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),Tw(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Af(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return Af(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return Af(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,i=this.type;return Af(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let r=i.get(t);return(!r||e)&&(r=new Map,i.set(t,r)),r}getOptionScopes(t,e,i){const{options:r,type:o}=this,l=this._cachedScopes(t,i),u=l.get(e);if(u)return u;const f=new Set;e.forEach(p=>{t&&(f.add(t),p.forEach(_=>Oc(f,t,_))),p.forEach(_=>Oc(f,r,_)),p.forEach(_=>Oc(f,Qa[o]||{},_)),p.forEach(_=>Oc(f,_e,_)),p.forEach(_=>Oc(f,uy,_))});const d=Array.from(f);return d.length===0&&d.push(Object.create(null)),xw.has(e)&&l.set(e,d),d}chartOptionScopes(){const{options:t,type:e}=this;return[t,Qa[e]||{},_e.datasets[e]||{},{type:e},_e,uy]}resolveNamedOptions(t,e,i,r=[""]){const o={$shared:!0},{resolver:l,subPrefixes:u}=kx(this._resolverCache,t,r);let f=l;if(E4(l,e)){o.$shared=!1,i=Gr(i)?i():i;const d=this.createResolver(t,i,u);f=fl(l,i,d)}for(const d of e)o[d]=f[d];return o}createResolver(t,e,i=[""],r){const{resolver:o}=kx(this._resolverCache,t,i);return Ht(e)?fl(o,e,void 0,r):o}}function kx(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));const r=e.join();let o=i.get(r);return o||(o={resolver:R_(t,e),subPrefixes:e.filter(u=>!u.toLowerCase().includes("hover"))},i.set(r,o)),o}const T4=n=>Ht(n)&&Object.getOwnPropertyNames(n).some(t=>Gr(n[t]));function E4(n,t){const{isScriptable:e,isIndexable:i}=ew(n);for(const r of t){const o=e(r),l=i(r),u=(l||o)&&n[r];if(o&&(Gr(u)||T4(u))||l&&ye(u))return!0}return!1}var x4="4.5.1";const S4=["top","bottom","left","right","chartArea"];function Px(n,t){return n==="top"||n==="bottom"||S4.indexOf(n)===-1&&t==="x"}function Vx(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function Lx(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),le(e&&e.onComplete,[n],t)}function A4(n){const t=n.chart,e=t.options.animation;le(e&&e.onProgress,[n],t)}function Sw(n){return M_()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const Kf={},zx=n=>{const t=Sw(n);return Object.values(Kf).filter(e=>e.canvas===t).pop()};function w4(n,t,e){const i=Object.keys(n);for(const r of i){const o=+r;if(o>=t){const l=n[r];delete n[r],(e>0||o>t)&&(n[o+e]=l)}}}function C4(n,t,e,i){return!e||n.type==="mouseout"?null:i?t:n}class vi{static register(...t){$i.add(...t),jx()}static unregister(...t){$i.remove(...t),jx()}constructor(t,e){const i=this.config=new v4(e),r=Sw(t),o=zx(r);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const l=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||GL(r)),this.platform.updateConfig(i);const u=this.platform.acquireContext(r,l.aspectRatio),f=u&&u.canvas,d=f&&f.height,p=f&&f.width;if(this.id=RP(),this.ctx=u,this.canvas=f,this.width=p,this.height=d,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new c4,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=GP(_=>this.update(_),l.resizeDelay||0),this._dataChanges=[],Kf[this.id]=this,!u||!f){console.error("Failed to create chart: can't acquire context from the given item");return}ws.listen(this,"complete",Lx),ws.listen(this,"progress",A4),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:r,_aspectRatio:o}=this;return Lt(t)?e&&o?o:r?i/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return $i}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():ox(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return sx(this.canvas,this.ctx),this}stop(){return ws.stop(this),this}resize(t,e){ws.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,r=this.canvas,o=i.maintainAspectRatio&&this.aspectRatio,l=this.platform.getMaximumSize(r,t,e,o),u=i.devicePixelRatio||this.platform.getDevicePixelRatio(),f=this.width?"resize":"attach";this.width=l.width,this.height=l.height,this._aspectRatio=this.aspectRatio,ox(this,u,!0)&&(this.notifyPlugins("resize",{size:l}),le(i.onResize,[this,l],this),this.attached&&this._doResize(f)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};ne(e,(i,r)=>{i.id=r})}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,r=Object.keys(i).reduce((l,u)=>(l[u]=!1,l),{});let o=[];e&&(o=o.concat(Object.keys(e).map(l=>{const u=e[l],f=gy(l,u),d=f==="r",p=f==="x";return{options:u,dposition:d?"chartArea":p?"bottom":"left",dtype:d?"radialLinear":p?"category":"linear"}}))),ne(o,l=>{const u=l.options,f=u.id,d=gy(f,u),p=Rt(u.type,l.dtype);(u.position===void 0||Px(u.position,d)!==Px(l.dposition))&&(u.position=l.dposition),r[f]=!0;let _=null;if(f in i&&i[f].type===p)_=i[f];else{const b=$i.getScale(p);_=new b({id:f,type:p,ctx:this.ctx,chart:this}),i[_.id]=_}_.init(u,t)}),ne(r,(l,u)=>{l||delete i[u]}),ne(i,l=>{mn.configure(this,l,l.options),mn.addBox(this,l)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((r,o)=>r.index-o.index),i>e){for(let r=e;r<i;++r)this._destroyDatasetMeta(r);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(Vx("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((i,r)=>{e.filter(o=>o===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=e.length;i<r;i++){const o=e[i];let l=this.getDatasetMeta(i);const u=o.type||this.config.type;if(l.type&&l.type!==u&&(this._destroyDatasetMeta(i),l=this.getDatasetMeta(i)),l.type=u,l.indexAxis=o.indexAxis||dy(u,this.options),l.order=o.order||0,l.index=i,l.label=""+o.label,l.visible=this.isDatasetVisible(i),l.controller)l.controller.updateIndex(i),l.controller.linkScales();else{const f=$i.getController(u),{datasetElementType:d,dataElementType:p}=_e.datasets[u];Object.assign(f,{dataElementType:$i.getElement(p),datasetElementType:d&&$i.getElement(d)}),l.controller=new f(this,i),t.push(l.controller)}}return this._updateMetasets(),t}_resetElements(){ne(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let l=0;for(let d=0,p=this.data.datasets.length;d<p;d++){const{controller:_}=this.getDatasetMeta(d),b=!r&&o.indexOf(_)===-1;_.buildOrUpdateElements(b),l=Math.max(+_.getMaxOverflow(),l)}l=this._minPadding=i.layout.autoPadding?l:0,this._updateLayout(l),r||ne(o,d=>{d.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Vx("z","_idx"));const{_active:u,_lastEvent:f}=this;f?this._eventHandler(f,!0):u.length&&this._updateHoverStyles(u,u,!0),this.render()}_updateScales(){ne(this.scales,t=>{mn.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!XE(e,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:o}of e){const l=i==="_removeElements"?-o:o;w4(t,r,l)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=o=>new Set(t.filter(l=>l[0]===o).map((l,u)=>u+","+l.splice(1).join(","))),r=i(0);for(let o=1;o<e;o++)if(!XE(r,i(o)))return;return Array.from(r).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;mn.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],ne(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,o)=>{r._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,Gr(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),r={meta:i,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(e),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ws.has(this)?this.attached&&!ws.running(this)&&ws.start(this):(this.draw(),Lx({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let r,o;for(r=0,o=e.length;r<o;++r){const l=e[r];(!t||l.visible)&&i.push(l)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i={meta:t,index:t.index,cancelable:!0},r=fw(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(r&&Xd(e,r),t.controller.draw(),r&&Qd(e),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return ks(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,r){const o=SL.modes[e];return typeof o=="function"?o(this,t,i,r):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let r=i.filter(o=>o&&o._dataset===e).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=$r(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!e.hidden}setDatasetVisibility(t,e){const i=this.getDatasetMeta(t);i.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const r=i?"show":"hide",o=this.getDatasetMeta(t),l=o.controller._resolveAnimations(void 0,r);du(e)?(o.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),l.update(o,{visible:i}),this.update(u=>u.datasetIndex===t?r:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),ws.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),sx(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete Kf[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(o,l)=>{e.addEventListener(this,o,l),t[o]=l},r=(o,l,u)=>{o.offsetX=l,o.offsetY=u,this._eventHandler(o)};ne(this.options.events,o=>i(o,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(f,d)=>{e.addEventListener(this,f,d),t[f]=d},r=(f,d)=>{t[f]&&(e.removeEventListener(this,f,d),delete t[f])},o=(f,d)=>{this.canvas&&this.resize(f,d)};let l;const u=()=>{r("attach",u),this.attached=!0,this.resize(),i("resize",o),i("detach",l)};l=()=>{this.attached=!1,r("resize",o),this._stop(),this._resize(0,0),i("attach",u)},e.isAttached(this.canvas)?u():l()}unbindEvents(){ne(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},ne(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const r=i?"set":"remove";let o,l,u,f;for(e==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+r+"DatasetHoverStyle"]()),u=0,f=t.length;u<f;++u){l=t[u];const d=l&&this.getDatasetMeta(l.datasetIndex).controller;d&&d[r+"HoverStyle"](l.element,l.datasetIndex,l.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map(({datasetIndex:o,index:l})=>{const u=this.getDatasetMeta(o);if(!u)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:u.data[l],index:l}});!yd(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,i){const r=this.options.hover,o=(f,d)=>f.filter(p=>!d.some(_=>p.datasetIndex===_.datasetIndex&&p.index===_.index)),l=o(e,t),u=i?t:o(t,e);l.length&&this.updateHoverStyle(l,r.mode,!1),u.length&&r.mode&&this.updateHoverStyle(u,r.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},r=l=>(l.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const o=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(o||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:r=[],options:o}=this,l=e,u=this._getActiveElements(t,r,i,l),f=kP(t),d=C4(t,this._lastEvent,i,f);i&&(this._lastEvent=null,le(o.onHover,[t,u,this],this),f&&le(o.onClick,[t,u,this],this));const p=!yd(u,r);return(p||e)&&(this._active=u,this._updateHoverStyles(u,r,e)),this._lastEvent=d,p}_getActiveElements(t,e,i,r){if(t.type==="mouseout")return[];if(!i)return e;const o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,r)}}ct(vi,"defaults",_e),ct(vi,"instances",Kf),ct(vi,"overrides",Qa),ct(vi,"registry",$i),ct(vi,"version",x4),ct(vi,"getChart",zx);function jx(){return ne(vi.instances,n=>n._plugins.invalidate())}function R4(n,t,e){const{startAngle:i,x:r,y:o,outerRadius:l,innerRadius:u,options:f}=t,{borderWidth:d,borderJoinStyle:p}=f,_=Math.min(d/l,dn(i-e));if(n.beginPath(),n.arc(r,o,l-d/2,i+_/2,e-_/2),u>0){const b=Math.min(d/u,dn(i-e));n.arc(r,o,u+d/2,e-b/2,i+b/2,!0)}else{const b=Math.min(d/2,l*dn(i-e));if(p==="round")n.arc(r,o,b,e-Xt/2,i+Xt/2,!0);else if(p==="bevel"){const E=2*b*b,S=-E*Math.cos(e+Xt/2)+r,w=-E*Math.sin(e+Xt/2)+o,D=E*Math.cos(i+Xt/2)+r,z=E*Math.sin(i+Xt/2)+o;n.lineTo(S,w),n.lineTo(D,z)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function I4(n,t,e){const{startAngle:i,pixelMargin:r,x:o,y:l,outerRadius:u,innerRadius:f}=t;let d=r/u;n.beginPath(),n.arc(o,l,u,i-d,e+d),f>r?(d=r/f,n.arc(o,l,f,e+d,i-d,!0)):n.arc(o,l,r,e+Re,i-Re),n.closePath(),n.clip()}function D4(n){return C_(n,["outerStart","outerEnd","innerStart","innerEnd"])}function M4(n,t,e,i){const r=D4(n.options.borderRadius),o=(e-t)/2,l=Math.min(o,i*t/2),u=f=>{const d=(e-Math.min(o,f))*i/2;return Je(f,0,Math.min(o,d))};return{outerStart:u(r.outerStart),outerEnd:u(r.outerEnd),innerStart:Je(r.innerStart,0,l),innerEnd:Je(r.innerEnd,0,l)}}function Wo(n,t,e,i){return{x:e+n*Math.cos(t),y:i+n*Math.sin(t)}}function xd(n,t,e,i,r,o){const{x:l,y:u,startAngle:f,pixelMargin:d,innerRadius:p}=t,_=Math.max(t.outerRadius+i+e-d,0),b=p>0?p+i+e+d:0;let E=0;const S=r-f;if(i){const Et=p>0?p-i:0,K=_>0?_-i:0,at=(Et+K)/2,ft=at!==0?S*at/(at+i):S;E=(S-ft)/2}const w=Math.max(.001,S*_-e/Xt)/_,D=(S-w)/2,z=f+D+E,F=r-D-E,{outerStart:W,outerEnd:Z,innerStart:$,innerEnd:st}=M4(t,b,_,F-z),M=_-W,C=_-Z,O=z+W/M,P=F-Z/C,k=b+$,j=b+st,N=z+$/k,Nt=F-st/j;if(n.beginPath(),o){const Et=(O+P)/2;if(n.arc(l,u,_,O,Et),n.arc(l,u,_,Et,P),Z>0){const bt=Wo(C,P,l,u);n.arc(bt.x,bt.y,Z,P,F+Re)}const K=Wo(j,F,l,u);if(n.lineTo(K.x,K.y),st>0){const bt=Wo(j,Nt,l,u);n.arc(bt.x,bt.y,st,F+Re,Nt+Math.PI)}const at=(F-st/b+(z+$/b))/2;if(n.arc(l,u,b,F-st/b,at,!0),n.arc(l,u,b,at,z+$/b,!0),$>0){const bt=Wo(k,N,l,u);n.arc(bt.x,bt.y,$,N+Math.PI,z-Re)}const ft=Wo(M,z,l,u);if(n.lineTo(ft.x,ft.y),W>0){const bt=Wo(M,O,l,u);n.arc(bt.x,bt.y,W,z-Re,O)}}else{n.moveTo(l,u);const Et=Math.cos(O)*_+l,K=Math.sin(O)*_+u;n.lineTo(Et,K);const at=Math.cos(P)*_+l,ft=Math.sin(P)*_+u;n.lineTo(at,ft)}n.closePath()}function O4(n,t,e,i,r){const{fullCircles:o,startAngle:l,circumference:u}=t;let f=t.endAngle;if(o){xd(n,t,e,i,f,r);for(let d=0;d<o;++d)n.fill();isNaN(u)||(f=l+(u%de||de))}return xd(n,t,e,i,f,r),n.fill(),f}function N4(n,t,e,i,r){const{fullCircles:o,startAngle:l,circumference:u,options:f}=t,{borderWidth:d,borderJoinStyle:p,borderDash:_,borderDashOffset:b,borderRadius:E}=f,S=f.borderAlign==="inner";if(!d)return;n.setLineDash(_||[]),n.lineDashOffset=b,S?(n.lineWidth=d*2,n.lineJoin=p||"round"):(n.lineWidth=d,n.lineJoin=p||"bevel");let w=t.endAngle;if(o){xd(n,t,e,i,w,r);for(let D=0;D<o;++D)n.stroke();isNaN(u)||(w=l+(u%de||de))}S&&I4(n,t,w),f.selfJoin&&w-l>=Xt&&E===0&&p!=="miter"&&R4(n,t,w),o||(xd(n,t,e,i,w,r),n.stroke())}class Fc extends Ci{constructor(e){super();ct(this,"circumference");ct(this,"endAngle");ct(this,"fullCircles");ct(this,"innerRadius");ct(this,"outerRadius");ct(this,"pixelMargin");ct(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,i,r){const o=this.getProps(["x","y"],r),{angle:l,distance:u}=G1(o,{x:e,y:i}),{startAngle:f,endAngle:d,innerRadius:p,outerRadius:_,circumference:b}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),E=(this.options.spacing+this.options.borderWidth)/2,S=Rt(b,d-f),w=gu(l,f,d)&&f!==d,D=S>=de||w,z=Os(u,p+E,_+E);return D&&z}getCenterPoint(e){const{x:i,y:r,startAngle:o,endAngle:l,innerRadius:u,outerRadius:f}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:d,spacing:p}=this.options,_=(o+l)/2,b=(u+f+p+d)/2;return{x:i+Math.cos(_)*b,y:r+Math.sin(_)*b}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:i,circumference:r}=this,o=(i.offset||0)/4,l=(i.spacing||0)/2,u=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=r>de?Math.floor(r/de):0,r===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const f=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(f)*o,Math.sin(f)*o);const d=1-Math.sin(Math.min(Xt,r||0)),p=o*d;e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,O4(e,this,p,l,u),N4(e,this,p,l,u),e.restore()}}ct(Fc,"id","arc"),ct(Fc,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),ct(Fc,"defaultRoutes",{backgroundColor:"backgroundColor"}),ct(Fc,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"});function Aw(n,t,e=t){n.lineCap=Rt(e.borderCapStyle,t.borderCapStyle),n.setLineDash(Rt(e.borderDash,t.borderDash)),n.lineDashOffset=Rt(e.borderDashOffset,t.borderDashOffset),n.lineJoin=Rt(e.borderJoinStyle,t.borderJoinStyle),n.lineWidth=Rt(e.borderWidth,t.borderWidth),n.strokeStyle=Rt(e.borderColor,t.borderColor)}function k4(n,t,e){n.lineTo(e.x,e.y)}function P4(n){return n.stepped?iV:n.tension||n.cubicInterpolationMode==="monotone"?sV:k4}function ww(n,t,e={}){const i=n.length,{start:r=0,end:o=i-1}=e,{start:l,end:u}=t,f=Math.max(r,l),d=Math.min(o,u),p=r<l&&o<l||r>u&&o>u;return{count:i,start:f,loop:t.loop,ilen:d<f&&!p?i+d-f:d-f}}function V4(n,t,e,i){const{points:r,options:o}=t,{count:l,start:u,loop:f,ilen:d}=ww(r,e,i),p=P4(o);let{move:_=!0,reverse:b}=i||{},E,S,w;for(E=0;E<=d;++E)S=r[(u+(b?d-E:E))%l],!S.skip&&(_?(n.moveTo(S.x,S.y),_=!1):p(n,w,S,b,o.stepped),w=S);return f&&(S=r[(u+(b?d:0))%l],p(n,w,S,b,o.stepped)),!!f}function L4(n,t,e,i){const r=t.points,{count:o,start:l,ilen:u}=ww(r,e,i),{move:f=!0,reverse:d}=i||{};let p=0,_=0,b,E,S,w,D,z;const F=Z=>(l+(d?u-Z:Z))%o,W=()=>{w!==D&&(n.lineTo(p,D),n.lineTo(p,w),n.lineTo(p,z))};for(f&&(E=r[F(0)],n.moveTo(E.x,E.y)),b=0;b<=u;++b){if(E=r[F(b)],E.skip)continue;const Z=E.x,$=E.y,st=Z|0;st===S?($<w?w=$:$>D&&(D=$),p=(_*p+Z)/++_):(W(),n.lineTo(Z,$),S=st,_=0,w=D=$),z=$}W()}function my(n){const t=n.options,e=t.borderDash&&t.borderDash.length;return!n._decimated&&!n._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?L4:V4}function z4(n){return n.stepped?VV:n.tension||n.cubicInterpolationMode==="monotone"?LV:Pa}function j4(n,t,e,i){let r=t._path;r||(r=t._path=new Path2D,t.path(r,e,i)&&r.closePath()),Aw(n,t.options),n.stroke(r)}function U4(n,t,e,i){const{segments:r,options:o}=t,l=my(t);for(const u of r)Aw(n,o,u.style),n.beginPath(),l(n,t,u,{start:e,end:e+i-1})&&n.closePath(),n.stroke()}const B4=typeof Path2D=="function";function F4(n,t,e,i){B4&&!t.options.segment?j4(n,t,e,i):U4(n,t,e,i)}class Rr extends Ci{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;RV(this._points,i,t,r,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=HV(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,i=t.length;return i&&e[t[i-1].end]}interpolate(t,e){const i=this.options,r=t[e],o=this.points,l=hw(this,{property:e,start:r,end:r});if(!l.length)return;const u=[],f=z4(i);let d,p;for(d=0,p=l.length;d<p;++d){const{start:_,end:b}=l[d],E=o[_],S=o[b];if(E===S){u.push(E);continue}const w=Math.abs((r-E[e])/(S[e]-E[e])),D=f(E,S,w,i.stepped);D[e]=t[e],u.push(D)}return u.length===1?u[0]:u}pathSegment(t,e,i){return my(this)(t,this,e,i)}path(t,e,i){const r=this.segments,o=my(this);let l=this._loop;e=e||0,i=i||this.points.length-e;for(const u of r)l&=o(t,this,u,{start:e,end:e+i-1});return!!l}draw(t,e,i,r){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),F4(t,this,i,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ct(Rr,"id","line"),ct(Rr,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ct(Rr,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ct(Rr,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function Ux(n,t,e,i){const r=n.options,{[e]:o}=n.getProps([e],i);return Math.abs(t-o)<r.radius+r.hitRadius}class Wf extends Ci{constructor(e){super();ct(this,"parsed");ct(this,"skip");ct(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,i,r){const o=this.options,{x:l,y:u}=this.getProps(["x","y"],r);return Math.pow(e-l,2)+Math.pow(i-u,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(e,i){return Ux(this,e,"x",i)}inYRange(e,i){return Ux(this,e,"y",i)}getCenterPoint(e){const{x:i,y:r}=this.getProps(["x","y"],e);return{x:i,y:r}}size(e){e=e||this.options||{};let i=e.radius||0;i=Math.max(i,i&&e.hoverRadius||0);const r=i&&e.borderWidth||0;return(i+r)*2}draw(e,i){const r=this.options;this.skip||r.radius<.1||!ks(this,i,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,hy(e,r,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}ct(Wf,"id","point"),ct(Wf,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ct(Wf,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function Cw(n,t){const{x:e,y:i,base:r,width:o,height:l}=n.getProps(["x","y","base","width","height"],t);let u,f,d,p,_;return n.horizontal?(_=l/2,u=Math.min(e,r),f=Math.max(e,r),d=i-_,p=i+_):(_=o/2,u=e-_,f=e+_,d=Math.min(i,r),p=Math.max(i,r)),{left:u,top:d,right:f,bottom:p}}function Ir(n,t,e,i){return n?0:Je(t,e,i)}function H4(n,t,e){const i=n.options.borderWidth,r=n.borderSkipped,o=tw(i);return{t:Ir(r.top,o.top,0,e),r:Ir(r.right,o.right,0,t),b:Ir(r.bottom,o.bottom,0,e),l:Ir(r.left,o.left,0,t)}}function q4(n,t,e){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),r=n.options.borderRadius,o=Ba(r),l=Math.min(t,e),u=n.borderSkipped,f=i||Ht(r);return{topLeft:Ir(!f||u.top||u.left,o.topLeft,0,l),topRight:Ir(!f||u.top||u.right,o.topRight,0,l),bottomLeft:Ir(!f||u.bottom||u.left,o.bottomLeft,0,l),bottomRight:Ir(!f||u.bottom||u.right,o.bottomRight,0,l)}}function G4(n){const t=Cw(n),e=t.right-t.left,i=t.bottom-t.top,r=H4(n,e/2,i/2),o=q4(n,e/2,i/2);return{outer:{x:t.left,y:t.top,w:e,h:i,radius:o},inner:{x:t.left+r.l,y:t.top+r.t,w:e-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,o.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(r.b,r.r))}}}}function Rp(n,t,e,i){const r=t===null,o=e===null,u=n&&!(r&&o)&&Cw(n,i);return u&&(r||Os(t,u.left,u.right))&&(o||Os(e,u.top,u.bottom))}function Y4(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function K4(n,t){n.rect(t.x,t.y,t.w,t.h)}function Ip(n,t,e={}){const i=n.x!==e.x?-t:0,r=n.y!==e.y?-t:0,o=(n.x+n.w!==e.x+e.w?t:0)-i,l=(n.y+n.h!==e.y+e.h?t:0)-r;return{x:n.x+i,y:n.y+r,w:n.w+o,h:n.h+l,radius:n.radius}}class Xf extends Ci{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:i,backgroundColor:r}}=this,{inner:o,outer:l}=G4(this),u=Y4(l.radius)?mu:K4;t.save(),(l.w!==o.w||l.h!==o.h)&&(t.beginPath(),u(t,Ip(l,e,o)),t.clip(),u(t,Ip(o,-e,l)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),u(t,Ip(o,e)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,e,i){return Rp(this,t,e,i)}inXRange(t,e){return Rp(this,t,null,e)}inYRange(t,e){return Rp(this,null,t,e)}getCenterPoint(t){const{x:e,y:i,base:r,horizontal:o}=this.getProps(["x","y","base","horizontal"],t);return{x:o?(e+r)/2:e,y:o?i:(i+r)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}ct(Xf,"id","bar"),ct(Xf,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),ct(Xf,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var W4=Object.freeze({__proto__:null,ArcElement:Fc,BarElement:Xf,LineElement:Rr,PointElement:Wf});const py=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Bx=py.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function Rw(n){return py[n%py.length]}function Iw(n){return Bx[n%Bx.length]}function X4(n,t){return n.borderColor=Rw(t),n.backgroundColor=Iw(t),++t}function Q4(n,t){return n.backgroundColor=n.data.map(()=>Rw(t++)),t}function $4(n,t){return n.backgroundColor=n.data.map(()=>Iw(t++)),t}function J4(n){let t=0;return(e,i)=>{const r=n.getDatasetMeta(i).controller;r instanceof za?t=Q4(e,t):r instanceof eu?t=$4(e,t):r&&(t=X4(e,t))}}function Fx(n){let t;for(t in n)if(n[t].borderColor||n[t].backgroundColor)return!0;return!1}function Z4(n){return n&&(n.borderColor||n.backgroundColor)}function t3(){return _e.borderColor!=="rgba(0,0,0,0.1)"||_e.backgroundColor!=="rgba(0,0,0,0.1)"}var e3={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,t,e){if(!e.enabled)return;const{data:{datasets:i},options:r}=n.config,{elements:o}=r,l=Fx(i)||Z4(r)||o&&Fx(o)||t3();if(!e.forceOverride&&l)return;const u=J4(n);i.forEach(u)}};function n3(n,t,e,i,r){const o=r.samples||i;if(o>=e)return n.slice(t,t+e);const l=[],u=(e-2)/(o-2);let f=0;const d=t+e-1;let p=t,_,b,E,S,w;for(l[f++]=n[p],_=0;_<o-2;_++){let D=0,z=0,F;const W=Math.floor((_+1)*u)+1+t,Z=Math.min(Math.floor((_+2)*u)+1,e)+t,$=Z-W;for(F=W;F<Z;F++)D+=n[F].x,z+=n[F].y;D/=$,z/=$;const st=Math.floor(_*u)+1+t,M=Math.min(Math.floor((_+1)*u)+1,e)+t,{x:C,y:O}=n[p];for(E=S=-1,F=st;F<M;F++)S=.5*Math.abs((C-D)*(n[F].y-O)-(C-n[F].x)*(z-O)),S>E&&(E=S,b=n[F],w=F);l[f++]=b,p=w}return l[f++]=n[d],l}function i3(n,t,e,i){let r=0,o=0,l,u,f,d,p,_,b,E,S,w;const D=[],z=t+e-1,F=n[t].x,Z=n[z].x-F;for(l=t;l<t+e;++l){u=n[l],f=(u.x-F)/Z*i,d=u.y;const $=f|0;if($===p)d<S?(S=d,_=l):d>w&&(w=d,b=l),r=(o*r+u.x)/++o;else{const st=l-1;if(!Lt(_)&&!Lt(b)){const M=Math.min(_,b),C=Math.max(_,b);M!==E&&M!==st&&D.push({...n[M],x:r}),C!==E&&C!==st&&D.push({...n[C],x:r})}l>0&&st!==E&&D.push(n[st]),D.push(u),p=$,o=0,S=w=d,_=b=E=l}}return D}function Dw(n){if(n._decimated){const t=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function Hx(n){n.data.datasets.forEach(t=>{Dw(t)})}function s3(n,t){const e=t.length;let i=0,r;const{iScale:o}=n,{min:l,max:u,minDefined:f,maxDefined:d}=o.getUserBounds();return f&&(i=Je(Ns(t,o.axis,l).lo,0,e-1)),d?r=Je(Ns(t,o.axis,u).hi+1,i,e)-i:r=e-i,{start:i,count:r}}var r3={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,t,e)=>{if(!e.enabled){Hx(n);return}const i=n.width;n.data.datasets.forEach((r,o)=>{const{_data:l,indexAxis:u}=r,f=n.getDatasetMeta(o),d=l||r.data;if(Uc([u,n.options.indexAxis])==="y"||!f.controller.supportsDecimation)return;const p=n.scales[f.xAxisID];if(p.type!=="linear"&&p.type!=="time"||n.options.parsing)return;let{start:_,count:b}=s3(f,d);const E=e.threshold||4*i;if(b<=E){Dw(r);return}Lt(l)&&(r._data=d,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(w){this._data=w}}));let S;switch(e.algorithm){case"lttb":S=n3(d,_,b,i,e);break;case"min-max":S=i3(d,_,b,i);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}r._decimated=S})},destroy(n){Hx(n)}};function a3(n,t,e){const i=n.segments,r=n.points,o=t.points,l=[];for(const u of i){let{start:f,end:d}=u;d=Zd(f,d,r);const p=yy(e,r[f],r[d],u.loop);if(!t.segments){l.push({source:u,target:p,start:r[f],end:r[d]});continue}const _=hw(t,p);for(const b of _){const E=yy(e,o[b.start],o[b.end],b.loop),S=uw(u,r,E);for(const w of S)l.push({source:w,target:b,start:{[e]:qx(p,E,"start",Math.max)},end:{[e]:qx(p,E,"end",Math.min)}})}}return l}function yy(n,t,e,i){if(i)return;let r=t[n],o=e[n];return n==="angle"&&(r=dn(r),o=dn(o)),{property:n,start:r,end:o}}function o3(n,t){const{x:e=null,y:i=null}=n||{},r=t.points,o=[];return t.segments.forEach(({start:l,end:u})=>{u=Zd(l,u,r);const f=r[l],d=r[u];i!==null?(o.push({x:f.x,y:i}),o.push({x:d.x,y:i})):e!==null&&(o.push({x:e,y:f.y}),o.push({x:e,y:d.y}))}),o}function Zd(n,t,e){for(;t>n;t--){const i=e[t];if(!isNaN(i.x)&&!isNaN(i.y))break}return t}function qx(n,t,e,i){return n&&t?i(n[e],t[e]):n?n[e]:t?t[e]:0}function Mw(n,t){let e=[],i=!1;return ye(n)?(i=!0,e=n):e=o3(n,t),e.length?new Rr({points:e,options:{tension:0},_loop:i,_fullLoop:i}):null}function Gx(n){return n&&n.fill!==!1}function l3(n,t,e){let r=n[t].fill;const o=[t];let l;if(!e)return r;for(;r!==!1&&o.indexOf(r)===-1;){if(!Ee(r))return r;if(l=n[r],!l)return!1;if(l.visible)return r;o.push(r),r=l.fill}return!1}function c3(n,t,e){const i=d3(n);if(Ht(i))return isNaN(i.value)?!1:i;let r=parseFloat(i);return Ee(r)&&Math.floor(r)===r?u3(i[0],t,r,e):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function u3(n,t,e,i){return(n==="-"||n==="+")&&(e=t+e),e===t||e<0||e>=i?!1:e}function h3(n,t){let e=null;return n==="start"?e=t.bottom:n==="end"?e=t.top:Ht(n)?e=t.getPixelForValue(n.value):t.getBasePixel&&(e=t.getBasePixel()),e}function f3(n,t,e){let i;return n==="start"?i=e:n==="end"?i=t.options.reverse?t.min:t.max:Ht(n)?i=n.value:i=t.getBaseValue(),i}function d3(n){const t=n.options,e=t.fill;let i=Rt(e&&e.target,e);return i===void 0&&(i=!!t.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function g3(n){const{scale:t,index:e,line:i}=n,r=[],o=i.segments,l=i.points,u=m3(t,e);u.push(Mw({x:null,y:t.bottom},i));for(let f=0;f<o.length;f++){const d=o[f];for(let p=d.start;p<=d.end;p++)p3(r,l[p],u)}return new Rr({points:r,options:{}})}function m3(n,t){const e=[],i=n.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){const o=i[r];if(o.index===t)break;o.hidden||e.unshift(o.dataset)}return e}function p3(n,t,e){const i=[];for(let r=0;r<e.length;r++){const o=e[r],{first:l,last:u,point:f}=y3(o,t,"x");if(!(!f||l&&u)){if(l)i.unshift(f);else if(n.push(f),!u)break}}n.push(...i)}function y3(n,t,e){const i=n.interpolate(t,e);if(!i)return{};const r=i[e],o=n.segments,l=n.points;let u=!1,f=!1;for(let d=0;d<o.length;d++){const p=o[d],_=l[p.start][e],b=l[p.end][e];if(Os(r,_,b)){u=r===_,f=r===b;break}}return{first:u,last:f,point:i}}class Ow{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,i){const{x:r,y:o,radius:l}=this;return e=e||{start:0,end:de},t.arc(r,o,l,e.end,e.start,!0),!i.bounds}interpolate(t){const{x:e,y:i,radius:r}=this,o=t.angle;return{x:e+Math.cos(o)*r,y:i+Math.sin(o)*r,angle:o}}}function _3(n){const{chart:t,fill:e,line:i}=n;if(Ee(e))return b3(t,e);if(e==="stack")return g3(n);if(e==="shape")return!0;const r=v3(n);return r instanceof Ow?r:Mw(r,i)}function b3(n,t){const e=n.getDatasetMeta(t);return e&&n.isDatasetVisible(t)?e.dataset:null}function v3(n){return(n.scale||{}).getPointPositionForValue?E3(n):T3(n)}function T3(n){const{scale:t={},fill:e}=n,i=h3(e,t);if(Ee(i)){const r=t.isHorizontal();return{x:r?i:null,y:r?null:i}}return null}function E3(n){const{scale:t,fill:e}=n,i=t.options,r=t.getLabels().length,o=i.reverse?t.max:t.min,l=f3(e,t,o),u=[];if(i.grid.circular){const f=t.getPointPositionForValue(0,o);return new Ow({x:f.x,y:f.y,radius:t.getDistanceFromCenterForValue(l)})}for(let f=0;f<r;++f)u.push(t.getPointPositionForValue(f,l));return u}function Dp(n,t,e){const i=_3(t),{chart:r,index:o,line:l,scale:u,axis:f}=t,d=l.options,p=d.fill,_=d.backgroundColor,{above:b=_,below:E=_}=p||{},S=r.getDatasetMeta(o),w=fw(r,S);i&&l.points.length&&(Xd(n,e),x3(n,{line:l,target:i,above:b,below:E,area:e,scale:u,axis:f,clip:w}),Qd(n))}function x3(n,t){const{line:e,target:i,above:r,below:o,area:l,scale:u,clip:f}=t,d=e._loop?"angle":t.axis;n.save();let p=o;o!==r&&(d==="x"?(Yx(n,i,l.top),Mp(n,{line:e,target:i,color:r,scale:u,property:d,clip:f}),n.restore(),n.save(),Yx(n,i,l.bottom)):d==="y"&&(Kx(n,i,l.left),Mp(n,{line:e,target:i,color:o,scale:u,property:d,clip:f}),n.restore(),n.save(),Kx(n,i,l.right),p=r)),Mp(n,{line:e,target:i,color:p,scale:u,property:d,clip:f}),n.restore()}function Yx(n,t,e){const{segments:i,points:r}=t;let o=!0,l=!1;n.beginPath();for(const u of i){const{start:f,end:d}=u,p=r[f],_=r[Zd(f,d,r)];o?(n.moveTo(p.x,p.y),o=!1):(n.lineTo(p.x,e),n.lineTo(p.x,p.y)),l=!!t.pathSegment(n,u,{move:l}),l?n.closePath():n.lineTo(_.x,e)}n.lineTo(t.first().x,e),n.closePath(),n.clip()}function Kx(n,t,e){const{segments:i,points:r}=t;let o=!0,l=!1;n.beginPath();for(const u of i){const{start:f,end:d}=u,p=r[f],_=r[Zd(f,d,r)];o?(n.moveTo(p.x,p.y),o=!1):(n.lineTo(e,p.y),n.lineTo(p.x,p.y)),l=!!t.pathSegment(n,u,{move:l}),l?n.closePath():n.lineTo(e,_.y)}n.lineTo(e,t.first().y),n.closePath(),n.clip()}function Mp(n,t){const{line:e,target:i,property:r,color:o,scale:l,clip:u}=t,f=a3(e,i,r);for(const{source:d,target:p,start:_,end:b}of f){const{style:{backgroundColor:E=o}={}}=d,S=i!==!0;n.save(),n.fillStyle=E,S3(n,l,u,S&&yy(r,_,b)),n.beginPath();const w=!!e.pathSegment(n,d);let D;if(S){w?n.closePath():Wx(n,i,b,r);const z=!!i.pathSegment(n,p,{move:w,reverse:!0});D=w&&z,D||Wx(n,i,_,r)}n.closePath(),n.fill(D?"evenodd":"nonzero"),n.restore()}}function S3(n,t,e,i){const r=t.chart.chartArea,{property:o,start:l,end:u}=i||{};if(o==="x"||o==="y"){let f,d,p,_;o==="x"?(f=l,d=r.top,p=u,_=r.bottom):(f=r.left,d=l,p=r.right,_=u),n.beginPath(),e&&(f=Math.max(f,e.left),p=Math.min(p,e.right),d=Math.max(d,e.top),_=Math.min(_,e.bottom)),n.rect(f,d,p-f,_-d),n.clip()}}function Wx(n,t,e,i){const r=t.interpolate(e,i);r&&n.lineTo(r.x,r.y)}var A3={id:"filler",afterDatasetsUpdate(n,t,e){const i=(n.data.datasets||[]).length,r=[];let o,l,u,f;for(l=0;l<i;++l)o=n.getDatasetMeta(l),u=o.dataset,f=null,u&&u.options&&u instanceof Rr&&(f={visible:n.isDatasetVisible(l),index:l,fill:c3(u,l,i),chart:n,axis:o.controller.options.indexAxis,scale:o.vScale,line:u}),o.$filler=f,r.push(f);for(l=0;l<i;++l)f=r[l],!(!f||f.fill===!1)&&(f.fill=l3(r,l,e.propagate))},beforeDraw(n,t,e){const i=e.drawTime==="beforeDraw",r=n.getSortedVisibleDatasetMetas(),o=n.chartArea;for(let l=r.length-1;l>=0;--l){const u=r[l].$filler;u&&(u.line.updateControlPoints(o,u.axis),i&&u.fill&&Dp(n.ctx,u,o))}},beforeDatasetsDraw(n,t,e){if(e.drawTime!=="beforeDatasetsDraw")return;const i=n.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){const o=i[r].$filler;Gx(o)&&Dp(n.ctx,o,n.chartArea)}},beforeDatasetDraw(n,t,e){const i=t.meta.$filler;!Gx(i)||e.drawTime!=="beforeDatasetDraw"||Dp(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Xx=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=n.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}},w3=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index;class Qx extends Ci{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=le(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,r)=>t.sort(i,r,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,r=Ye(i.font),o=r.size,l=this._computeTitleHeight(),{boxWidth:u,itemHeight:f}=Xx(i,o);let d,p;e.font=r.string,this.isHorizontal()?(d=this.maxWidth,p=this._fitRows(l,o,u,f)+10):(p=this.maxHeight,d=this._fitCols(l,r,u,f)+10),this.width=Math.min(d,t.maxWidth||this.maxWidth),this.height=Math.min(p,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,r){const{ctx:o,maxWidth:l,options:{labels:{padding:u}}}=this,f=this.legendHitBoxes=[],d=this.lineWidths=[0],p=r+u;let _=t;o.textAlign="left",o.textBaseline="middle";let b=-1,E=-p;return this.legendItems.forEach((S,w)=>{const D=i+e/2+o.measureText(S.text).width;(w===0||d[d.length-1]+D+2*u>l)&&(_+=p,d[d.length-(w>0?0:1)]=0,E+=p,b++),f[w]={left:0,top:E,row:b,width:D,height:r},d[d.length-1]+=D+u}),_}_fitCols(t,e,i,r){const{ctx:o,maxHeight:l,options:{labels:{padding:u}}}=this,f=this.legendHitBoxes=[],d=this.columnSizes=[],p=l-t;let _=u,b=0,E=0,S=0,w=0;return this.legendItems.forEach((D,z)=>{const{itemWidth:F,itemHeight:W}=C3(i,e,o,D,r);z>0&&E+W+2*u>p&&(_+=b+u,d.push({width:b,height:E}),S+=b+u,w++,b=E=0),f[z]={left:S,top:E,col:w,width:F,height:W},b=Math.max(b,F),E+=W+u}),_+=b,d.push({width:b,height:E}),_}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:r},rtl:o}}=this,l=il(o,this.left,this.width);if(this.isHorizontal()){let u=0,f=hn(i,this.left+r,this.right-this.lineWidths[u]);for(const d of e)u!==d.row&&(u=d.row,f=hn(i,this.left+r,this.right-this.lineWidths[u])),d.top+=this.top+t+r,d.left=l.leftForLtr(l.x(f),d.width),f+=d.width+r}else{let u=0,f=hn(i,this.top+t+r,this.bottom-this.columnSizes[u].height);for(const d of e)d.col!==u&&(u=d.col,f=hn(i,this.top+t+r,this.bottom-this.columnSizes[u].height)),d.top=f,d.left+=this.left+r,d.left=l.leftForLtr(l.x(d.left),d.width),f+=d.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Xd(t,this),this._draw(),Qd(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:r}=this,{align:o,labels:l}=t,u=_e.color,f=il(t.rtl,this.left,this.width),d=Ye(l.font),{padding:p}=l,_=d.size,b=_/2;let E;this.drawTitle(),r.textAlign=f.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=d.string;const{boxWidth:S,boxHeight:w,itemHeight:D}=Xx(l,_),z=function(st,M,C){if(isNaN(S)||S<=0||isNaN(w)||w<0)return;r.save();const O=Rt(C.lineWidth,1);if(r.fillStyle=Rt(C.fillStyle,u),r.lineCap=Rt(C.lineCap,"butt"),r.lineDashOffset=Rt(C.lineDashOffset,0),r.lineJoin=Rt(C.lineJoin,"miter"),r.lineWidth=O,r.strokeStyle=Rt(C.strokeStyle,u),r.setLineDash(Rt(C.lineDash,[])),l.usePointStyle){const P={radius:w*Math.SQRT2/2,pointStyle:C.pointStyle,rotation:C.rotation,borderWidth:O},k=f.xPlus(st,S/2),j=M+b;Z1(r,P,k,j,l.pointStyleWidth&&S)}else{const P=M+Math.max((_-w)/2,0),k=f.leftForLtr(st,S),j=Ba(C.borderRadius);r.beginPath(),Object.values(j).some(N=>N!==0)?mu(r,{x:k,y:P,w:S,h:w,radius:j}):r.rect(k,P,S,w),r.fill(),O!==0&&r.stroke()}r.restore()},F=function(st,M,C){$a(r,C.text,st,M+D/2,d,{strikethrough:C.hidden,textAlign:f.textAlign(C.textAlign)})},W=this.isHorizontal(),Z=this._computeTitleHeight();W?E={x:hn(o,this.left+p,this.right-i[0]),y:this.top+p+Z,line:0}:E={x:this.left+p,y:hn(o,this.top+Z+p,this.bottom-e[0].height),line:0},ow(this.ctx,t.textDirection);const $=D+p;this.legendItems.forEach((st,M)=>{r.strokeStyle=st.fontColor,r.fillStyle=st.fontColor;const C=r.measureText(st.text).width,O=f.textAlign(st.textAlign||(st.textAlign=l.textAlign)),P=S+b+C;let k=E.x,j=E.y;f.setWidth(this.width),W?M>0&&k+P+p>this.right&&(j=E.y+=$,E.line++,k=E.x=hn(o,this.left+p,this.right-i[E.line])):M>0&&j+$>this.bottom&&(k=E.x=k+e[E.line].width+p,E.line++,j=E.y=hn(o,this.top+Z+p,this.bottom-e[E.line].height));const N=f.x(k);if(z(N,j,st),k=YP(O,k+S+b,W?k+P:this.right,t.rtl),F(f.x(k),j,st),W)E.x+=P+p;else if(typeof st.text!="string"){const Nt=d.lineHeight;E.y+=Nw(st,Nt)+p}else E.y+=$}),lw(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=Ye(e.font),r=yn(e.padding);if(!e.display)return;const o=il(t.rtl,this.left,this.width),l=this.ctx,u=e.position,f=i.size/2,d=r.top+f;let p,_=this.left,b=this.width;if(this.isHorizontal())b=Math.max(...this.lineWidths),p=this.top+d,_=hn(t.align,_,this.right-b);else{const S=this.columnSizes.reduce((w,D)=>Math.max(w,D.height),0);p=d+hn(t.align,this.top,this.bottom-S-t.labels.padding-this._computeTitleHeight())}const E=hn(u,_,_+b);l.textAlign=o.textAlign(A_(u)),l.textBaseline="middle",l.strokeStyle=e.color,l.fillStyle=e.color,l.font=i.string,$a(l,e.text,E,p,i)}_computeTitleHeight(){const t=this.options.title,e=Ye(t.font),i=yn(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,r,o;if(Os(t,this.left,this.right)&&Os(e,this.top,this.bottom)){for(o=this.legendHitBoxes,i=0;i<o.length;++i)if(r=o[i],Os(t,r.left,r.left+r.width)&&Os(e,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(t){const e=this.options;if(!D3(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const r=this._hoveredItem,o=w3(r,i);r&&!o&&le(e.onLeave,[t,r,this],this),this._hoveredItem=i,i&&!o&&le(e.onHover,[t,i,this],this)}else i&&le(e.onClick,[t,i,this],this)}}function C3(n,t,e,i,r){const o=R3(i,n,t,e),l=I3(r,i,t.lineHeight);return{itemWidth:o,itemHeight:l}}function R3(n,t,e,i){let r=n.text;return r&&typeof r!="string"&&(r=r.reduce((o,l)=>o.length>l.length?o:l)),t+e.size/2+i.measureText(r).width}function I3(n,t,e){let i=n;return typeof t.text!="string"&&(i=Nw(t,e)),i}function Nw(n,t){const e=n.text?n.text.length:0;return t*e}function D3(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var M3={id:"legend",_element:Qx,start(n,t,e){const i=n.legend=new Qx({ctx:n.ctx,options:e,chart:n});mn.configure(n,i,e),mn.addBox(n,i)},stop(n){mn.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const i=n.legend;mn.configure(n,i,e),i.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const i=t.datasetIndex,r=e.chart;r.isDatasetVisible(i)?(r.hide(i),t.hidden=!0):(r.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:r,color:o,useBorderRadius:l,borderRadius:u}}=n.legend.options;return n._getSortedDatasetMetas().map(f=>{const d=f.controller.getStyle(e?0:void 0),p=yn(d.borderWidth);return{text:t[f.index].label,fillStyle:d.backgroundColor,fontColor:o,hidden:!f.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(p.width+p.height)/4,strokeStyle:d.borderColor,pointStyle:i||d.pointStyle,rotation:d.rotation,textAlign:r||d.textAlign,borderRadius:l&&(u||d.borderRadius),datasetIndex:f.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class k_ extends Ci{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;const r=ye(i.text)?i.text.length:1;this._padding=yn(i.padding);const o=r*Ye(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:e,left:i,bottom:r,right:o,options:l}=this,u=l.align;let f=0,d,p,_;return this.isHorizontal()?(p=hn(u,i,o),_=e+t,d=o-i):(l.position==="left"?(p=i+t,_=hn(u,r,e),f=Xt*-.5):(p=o-t,_=hn(u,e,r),f=Xt*.5),d=r-e),{titleX:p,titleY:_,maxWidth:d,rotation:f}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const i=Ye(e.font),o=i.lineHeight/2+this._padding.top,{titleX:l,titleY:u,maxWidth:f,rotation:d}=this._drawArgs(o);$a(t,e.text,0,0,i,{color:e.color,maxWidth:f,rotation:d,textAlign:A_(e.align),textBaseline:"middle",translation:[l,u]})}}function O3(n,t){const e=new k_({ctx:n.ctx,options:t,chart:n});mn.configure(n,e,t),mn.addBox(n,e),n.titleBlock=e}var N3={id:"title",_element:k_,start(n,t,e){O3(n,e)},stop(n){const t=n.titleBlock;mn.removeBox(n,t),delete n.titleBlock},beforeUpdate(n,t,e){const i=n.titleBlock;mn.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const wf=new WeakMap;var k3={id:"subtitle",start(n,t,e){const i=new k_({ctx:n.ctx,options:e,chart:n});mn.configure(n,i,e),mn.addBox(n,i),wf.set(n,i)},stop(n){mn.removeBox(n,wf.get(n)),wf.delete(n)},beforeUpdate(n,t,e){const i=wf.get(n);mn.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Hc={average(n){if(!n.length)return!1;let t,e,i=new Set,r=0,o=0;for(t=0,e=n.length;t<e;++t){const u=n[t].element;if(u&&u.hasValue()){const f=u.tooltipPosition();i.add(f.x),r+=f.y,++o}}return o===0||i.size===0?!1:{x:[...i].reduce((u,f)=>u+f)/i.size,y:r/o}},nearest(n,t){if(!n.length)return!1;let e=t.x,i=t.y,r=Number.POSITIVE_INFINITY,o,l,u;for(o=0,l=n.length;o<l;++o){const f=n[o].element;if(f&&f.hasValue()){const d=f.getCenterPoint(),p=cy(t,d);p<r&&(r=p,u=f)}}if(u){const f=u.tooltipPosition();e=f.x,i=f.y}return{x:e,y:i}}};function Qi(n,t){return t&&(ye(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function Cs(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function P3(n,t){const{element:e,datasetIndex:i,index:r}=t,o=n.getDatasetMeta(i).controller,{label:l,value:u}=o.getLabelAndValue(r);return{chart:n,label:l,parsed:o.getParsed(r),raw:n.data.datasets[i].data[r],formattedValue:u,dataset:o.getDataset(),dataIndex:r,datasetIndex:i,element:e}}function $x(n,t){const e=n.chart.ctx,{body:i,footer:r,title:o}=n,{boxWidth:l,boxHeight:u}=t,f=Ye(t.bodyFont),d=Ye(t.titleFont),p=Ye(t.footerFont),_=o.length,b=r.length,E=i.length,S=yn(t.padding);let w=S.height,D=0,z=i.reduce((Z,$)=>Z+$.before.length+$.lines.length+$.after.length,0);if(z+=n.beforeBody.length+n.afterBody.length,_&&(w+=_*d.lineHeight+(_-1)*t.titleSpacing+t.titleMarginBottom),z){const Z=t.displayColors?Math.max(u,f.lineHeight):f.lineHeight;w+=E*Z+(z-E)*f.lineHeight+(z-1)*t.bodySpacing}b&&(w+=t.footerMarginTop+b*p.lineHeight+(b-1)*t.footerSpacing);let F=0;const W=function(Z){D=Math.max(D,e.measureText(Z).width+F)};return e.save(),e.font=d.string,ne(n.title,W),e.font=f.string,ne(n.beforeBody.concat(n.afterBody),W),F=t.displayColors?l+2+t.boxPadding:0,ne(i,Z=>{ne(Z.before,W),ne(Z.lines,W),ne(Z.after,W)}),F=0,e.font=p.string,ne(n.footer,W),e.restore(),D+=S.width,{width:D,height:w}}function V3(n,t){const{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}function L3(n,t,e,i){const{x:r,width:o}=i,l=e.caretSize+e.caretPadding;if(n==="left"&&r+o+l>t.width||n==="right"&&r-o-l<0)return!0}function z3(n,t,e,i){const{x:r,width:o}=e,{width:l,chartArea:{left:u,right:f}}=n;let d="center";return i==="center"?d=r<=(u+f)/2?"left":"right":r<=o/2?d="left":r>=l-o/2&&(d="right"),L3(d,n,t,e)&&(d="center"),d}function Jx(n,t,e){const i=e.yAlign||t.yAlign||V3(n,e);return{xAlign:e.xAlign||t.xAlign||z3(n,t,e,i),yAlign:i}}function j3(n,t){let{x:e,width:i}=n;return t==="right"?e-=i:t==="center"&&(e-=i/2),e}function U3(n,t,e){let{y:i,height:r}=n;return t==="top"?i+=e:t==="bottom"?i-=r+e:i-=r/2,i}function Zx(n,t,e,i){const{caretSize:r,caretPadding:o,cornerRadius:l}=n,{xAlign:u,yAlign:f}=e,d=r+o,{topLeft:p,topRight:_,bottomLeft:b,bottomRight:E}=Ba(l);let S=j3(t,u);const w=U3(t,f,d);return f==="center"?u==="left"?S+=d:u==="right"&&(S-=d):u==="left"?S-=Math.max(p,b)+r:u==="right"&&(S+=Math.max(_,E)+r),{x:Je(S,0,i.width-t.width),y:Je(w,0,i.height-t.height)}}function Cf(n,t,e){const i=yn(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-i.right:n.x+i.left}function tS(n){return Qi([],Cs(n))}function B3(n,t,e){return $r(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function eS(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}const kw={beforeTitle:As,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:As,beforeBody:As,beforeLabel:As,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return Lt(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:As,afterBody:As,beforeFooter:As,footer:As,afterFooter:As};function In(n,t,e,i){const r=n[t].call(e,i);return typeof r>"u"?kw[t].call(e,i):r}class _y extends Ci{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&e.options.animation&&i.animations,o=new dw(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=B3(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:i}=e,r=In(i,"beforeTitle",this,t),o=In(i,"title",this,t),l=In(i,"afterTitle",this,t);let u=[];return u=Qi(u,Cs(r)),u=Qi(u,Cs(o)),u=Qi(u,Cs(l)),u}getBeforeBody(t,e){return tS(In(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:i}=e,r=[];return ne(t,o=>{const l={before:[],lines:[],after:[]},u=eS(i,o);Qi(l.before,Cs(In(u,"beforeLabel",this,o))),Qi(l.lines,In(u,"label",this,o)),Qi(l.after,Cs(In(u,"afterLabel",this,o))),r.push(l)}),r}getAfterBody(t,e){return tS(In(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:i}=e,r=In(i,"beforeFooter",this,t),o=In(i,"footer",this,t),l=In(i,"afterFooter",this,t);let u=[];return u=Qi(u,Cs(r)),u=Qi(u,Cs(o)),u=Qi(u,Cs(l)),u}_createItems(t){const e=this._active,i=this.chart.data,r=[],o=[],l=[];let u=[],f,d;for(f=0,d=e.length;f<d;++f)u.push(P3(this.chart,e[f]));return t.filter&&(u=u.filter((p,_,b)=>t.filter(p,_,b,i))),t.itemSort&&(u=u.sort((p,_)=>t.itemSort(p,_,i))),ne(u,p=>{const _=eS(t.callbacks,p);r.push(In(_,"labelColor",this,p)),o.push(In(_,"labelPointStyle",this,p)),l.push(In(_,"labelTextColor",this,p))}),this.labelColors=r,this.labelPointStyles=o,this.labelTextColors=l,this.dataPoints=u,u}update(t,e){const i=this.options.setContext(this.getContext()),r=this._active;let o,l=[];if(!r.length)this.opacity!==0&&(o={opacity:0});else{const u=Hc[i.position].call(this,r,this._eventPosition);l=this._createItems(i),this.title=this.getTitle(l,i),this.beforeBody=this.getBeforeBody(l,i),this.body=this.getBody(l,i),this.afterBody=this.getAfterBody(l,i),this.footer=this.getFooter(l,i);const f=this._size=$x(this,i),d=Object.assign({},u,f),p=Jx(this.chart,i,d),_=Zx(i,d,p,this.chart);this.xAlign=p.xAlign,this.yAlign=p.yAlign,o={opacity:1,x:_.x,y:_.y,width:f.width,height:f.height,caretX:u.x,caretY:u.y}}this._tooltipItems=l,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,r){const o=this.getCaretPosition(t,i,r);e.lineTo(o.x1,o.y1),e.lineTo(o.x2,o.y2),e.lineTo(o.x3,o.y3)}getCaretPosition(t,e,i){const{xAlign:r,yAlign:o}=this,{caretSize:l,cornerRadius:u}=i,{topLeft:f,topRight:d,bottomLeft:p,bottomRight:_}=Ba(u),{x:b,y:E}=t,{width:S,height:w}=e;let D,z,F,W,Z,$;return o==="center"?(Z=E+w/2,r==="left"?(D=b,z=D-l,W=Z+l,$=Z-l):(D=b+S,z=D+l,W=Z-l,$=Z+l),F=D):(r==="left"?z=b+Math.max(f,p)+l:r==="right"?z=b+S-Math.max(d,_)-l:z=this.caretX,o==="top"?(W=E,Z=W-l,D=z-l,F=z+l):(W=E+w,Z=W+l,D=z+l,F=z-l),$=W),{x1:D,x2:z,x3:F,y1:W,y2:Z,y3:$}}drawTitle(t,e,i){const r=this.title,o=r.length;let l,u,f;if(o){const d=il(i.rtl,this.x,this.width);for(t.x=Cf(this,i.titleAlign,i),e.textAlign=d.textAlign(i.titleAlign),e.textBaseline="middle",l=Ye(i.titleFont),u=i.titleSpacing,e.fillStyle=i.titleColor,e.font=l.string,f=0;f<o;++f)e.fillText(r[f],d.x(t.x),t.y+l.lineHeight/2),t.y+=l.lineHeight+u,f+1===o&&(t.y+=i.titleMarginBottom-u)}}_drawColorBox(t,e,i,r,o){const l=this.labelColors[i],u=this.labelPointStyles[i],{boxHeight:f,boxWidth:d}=o,p=Ye(o.bodyFont),_=Cf(this,"left",o),b=r.x(_),E=f<p.lineHeight?(p.lineHeight-f)/2:0,S=e.y+E;if(o.usePointStyle){const w={radius:Math.min(d,f)/2,pointStyle:u.pointStyle,rotation:u.rotation,borderWidth:1},D=r.leftForLtr(b,d)+d/2,z=S+f/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,hy(t,w,D,z),t.strokeStyle=l.borderColor,t.fillStyle=l.backgroundColor,hy(t,w,D,z)}else{t.lineWidth=Ht(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,t.strokeStyle=l.borderColor,t.setLineDash(l.borderDash||[]),t.lineDashOffset=l.borderDashOffset||0;const w=r.leftForLtr(b,d),D=r.leftForLtr(r.xPlus(b,1),d-2),z=Ba(l.borderRadius);Object.values(z).some(F=>F!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,mu(t,{x:w,y:S,w:d,h:f,radius:z}),t.fill(),t.stroke(),t.fillStyle=l.backgroundColor,t.beginPath(),mu(t,{x:D,y:S+1,w:d-2,h:f-2,radius:z}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(w,S,d,f),t.strokeRect(w,S,d,f),t.fillStyle=l.backgroundColor,t.fillRect(D,S+1,d-2,f-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:r}=this,{bodySpacing:o,bodyAlign:l,displayColors:u,boxHeight:f,boxWidth:d,boxPadding:p}=i,_=Ye(i.bodyFont);let b=_.lineHeight,E=0;const S=il(i.rtl,this.x,this.width),w=function(C){e.fillText(C,S.x(t.x+E),t.y+b/2),t.y+=b+o},D=S.textAlign(l);let z,F,W,Z,$,st,M;for(e.textAlign=l,e.textBaseline="middle",e.font=_.string,t.x=Cf(this,D,i),e.fillStyle=i.bodyColor,ne(this.beforeBody,w),E=u&&D!=="right"?l==="center"?d/2+p:d+2+p:0,Z=0,st=r.length;Z<st;++Z){for(z=r[Z],F=this.labelTextColors[Z],e.fillStyle=F,ne(z.before,w),W=z.lines,u&&W.length&&(this._drawColorBox(e,t,Z,S,i),b=Math.max(_.lineHeight,f)),$=0,M=W.length;$<M;++$)w(W[$]),b=_.lineHeight;ne(z.after,w)}E=0,b=_.lineHeight,ne(this.afterBody,w),t.y-=o}drawFooter(t,e,i){const r=this.footer,o=r.length;let l,u;if(o){const f=il(i.rtl,this.x,this.width);for(t.x=Cf(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=f.textAlign(i.footerAlign),e.textBaseline="middle",l=Ye(i.footerFont),e.fillStyle=i.footerColor,e.font=l.string,u=0;u<o;++u)e.fillText(r[u],f.x(t.x),t.y+l.lineHeight/2),t.y+=l.lineHeight+i.footerSpacing}}drawBackground(t,e,i,r){const{xAlign:o,yAlign:l}=this,{x:u,y:f}=t,{width:d,height:p}=i,{topLeft:_,topRight:b,bottomLeft:E,bottomRight:S}=Ba(r.cornerRadius);e.fillStyle=r.backgroundColor,e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.beginPath(),e.moveTo(u+_,f),l==="top"&&this.drawCaret(t,e,i,r),e.lineTo(u+d-b,f),e.quadraticCurveTo(u+d,f,u+d,f+b),l==="center"&&o==="right"&&this.drawCaret(t,e,i,r),e.lineTo(u+d,f+p-S),e.quadraticCurveTo(u+d,f+p,u+d-S,f+p),l==="bottom"&&this.drawCaret(t,e,i,r),e.lineTo(u+E,f+p),e.quadraticCurveTo(u,f+p,u,f+p-E),l==="center"&&o==="left"&&this.drawCaret(t,e,i,r),e.lineTo(u,f+_),e.quadraticCurveTo(u,f,u+_,f),e.closePath(),e.fill(),r.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,r=i&&i.x,o=i&&i.y;if(r||o){const l=Hc[t.position].call(this,this._active,this._eventPosition);if(!l)return;const u=this._size=$x(this,t),f=Object.assign({},l,this._size),d=Jx(e,t,f),p=Zx(t,f,d,e);(r._to!==p.x||o._to!==p.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=u.width,this.height=u.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,p))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const r={width:this.width,height:this.height},o={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const l=yn(e.padding),u=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&u&&(t.save(),t.globalAlpha=i,this.drawBackground(o,t,r,e),ow(t,e.textDirection),o.y+=l.top,this.drawTitle(o,t,e),this.drawBody(o,t,e),this.drawFooter(o,t,e),lw(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,r=t.map(({datasetIndex:u,index:f})=>{const d=this.chart.getDatasetMeta(u);if(!d)throw new Error("Cannot find a dataset at index "+u);return{datasetIndex:u,element:d.data[f],index:f}}),o=!yd(i,r),l=this._positionChanged(r,e);(o||l)&&(this._active=r,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,o=this._active||[],l=this._getActiveElements(t,o,e,i),u=this._positionChanged(l,t),f=e||!yd(l,o)||u;return f&&(this._active=l,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),f}_getActiveElements(t,e,i,r){const o=this.options;if(t.type==="mouseout")return[];if(!r)return e.filter(u=>this.chart.data.datasets[u.datasetIndex]&&this.chart.getDatasetMeta(u.datasetIndex).controller.getParsed(u.index)!==void 0);const l=this.chart.getElementsAtEventForMode(t,o.mode,o,i);return o.reverse&&l.reverse(),l}_positionChanged(t,e){const{caretX:i,caretY:r,options:o}=this,l=Hc[o.position].call(this,t,e);return l!==!1&&(i!==l.x||r!==l.y)}}ct(_y,"positioners",Hc);var F3={id:"tooltip",_element:_y,positioners:Hc,afterInit(n,t,e){e&&(n.tooltip=new _y({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){const e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:kw},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},H3=Object.freeze({__proto__:null,Colors:e3,Decimation:r3,Filler:A3,Legend:M3,SubTitle:k3,Title:N3,Tooltip:F3});const q3=(n,t,e,i)=>(typeof t=="string"?(e=n.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function G3(n,t,e,i){const r=n.indexOf(t);if(r===-1)return q3(n,t,e,i);const o=n.lastIndexOf(t);return r!==o?e:r}const Y3=(n,t)=>n===null?null:Je(Math.round(n),0,t);function nS(n){const t=this.getLabels();return n>=0&&n<t.length?t[n]:n}class by extends eo{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const i=this.getLabels();for(const{index:r,label:o}of e)i[r]===o&&i.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(Lt(t))return null;const i=this.getLabels();return e=isFinite(e)&&i[e]===t?e:G3(i,t,Rt(e,t),this._addedLabels),Y3(e,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),e||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const t=this.min,e=this.max,i=this.options.offset,r=[];let o=this.getLabels();o=t===0&&e===o.length-1?o:o.slice(t,e+1),this._valueRange=Math.max(o.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let l=t;l<=e;l++)r.push({value:l});return r}getLabelForValue(t){return nS.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}ct(by,"id","category"),ct(by,"defaults",{ticks:{callback:nS}});function K3(n,t){const e=[],{bounds:r,step:o,min:l,max:u,precision:f,count:d,maxTicks:p,maxDigits:_,includeBounds:b}=n,E=o||1,S=p-1,{min:w,max:D}=t,z=!Lt(l),F=!Lt(u),W=!Lt(d),Z=(D-w)/(_+1);let $=$E((D-w)/S/E)*E,st,M,C,O;if($<1e-14&&!z&&!F)return[{value:w},{value:D}];O=Math.ceil(D/$)-Math.floor(w/$),O>S&&($=$E(O*$/S/E)*E),Lt(f)||(st=Math.pow(10,f),$=Math.ceil($*st)/st),r==="ticks"?(M=Math.floor(w/$)*$,C=Math.ceil(D/$)*$):(M=w,C=D),z&&F&&o&&jP((u-l)/o,$/1e3)?(O=Math.round(Math.min((u-l)/$,p)),$=(u-l)/O,M=l,C=u):W?(M=z?l:M,C=F?u:C,O=d-1,$=(C-M)/O):(O=(C-M)/$,Jc(O,Math.round(O),$/1e3)?O=Math.round(O):O=Math.ceil(O));const P=Math.max(JE($),JE(M));st=Math.pow(10,Lt(f)?P:f),M=Math.round(M*st)/st,C=Math.round(C*st)/st;let k=0;for(z&&(b&&M!==l?(e.push({value:l}),M<l&&k++,Jc(Math.round((M+k*$)*st)/st,l,iS(l,Z,n))&&k++):M<l&&k++);k<O;++k){const j=Math.round((M+k*$)*st)/st;if(F&&j>u)break;e.push({value:j})}return F&&b&&C!==u?e.length&&Jc(e[e.length-1].value,u,iS(u,Z,n))?e[e.length-1].value=u:e.push({value:u}):(!F||C===u)&&e.push({value:C}),e}function iS(n,t,{horizontal:e,minRotation:i}){const r=Ei(i),o=(e?Math.sin(r):Math.cos(r))||.001,l=.75*t*(""+n).length;return Math.min(t/o,l)}class Sd extends eo{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return Lt(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:r,max:o}=this;const l=f=>r=e?r:f,u=f=>o=i?o:f;if(t){const f=ss(r),d=ss(o);f<0&&d<0?u(0):f>0&&d>0&&l(0)}if(r===o){let f=o===0?1:Math.abs(o*.05);u(o+f),t||l(r-f)}this.min=r,this.max=o}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:i}=t,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),e=e||11),e&&(r=Math.min(e,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},o=this._range||this,l=K3(r,o);return t.bounds==="ticks"&&q1(l,this,"value"),t.reverse?(l.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),l}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const r=(i-e)/Math.max(t.length-1,1)/2;e-=r,i+=r}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return Nu(t,this.chart.options.locale,this.options.ticks.format)}}class vy extends Sd{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Ee(t)?t:0,this.max=Ee(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=Ei(this.options.ticks.minRotation),r=(t?Math.sin(i):Math.cos(i))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,o.lineHeight/r))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}ct(vy,"id","linear"),ct(vy,"defaults",{ticks:{callback:Wd.formatters.numeric}});const yu=n=>Math.floor(wr(n)),Oa=(n,t)=>Math.pow(10,yu(n)+t);function sS(n){return n/Math.pow(10,yu(n))===1}function rS(n,t,e){const i=Math.pow(10,e),r=Math.floor(n/i);return Math.ceil(t/i)-r}function W3(n,t){const e=t-n;let i=yu(e);for(;rS(n,t,i)>10;)i++;for(;rS(n,t,i)<10;)i--;return Math.min(i,yu(n))}function X3(n,{min:t,max:e}){t=Hn(n.min,t);const i=[],r=yu(t);let o=W3(t,e),l=o<0?Math.pow(10,Math.abs(o)):1;const u=Math.pow(10,o),f=r>o?Math.pow(10,r):0,d=Math.round((t-f)*l)/l,p=Math.floor((t-f)/u/10)*u*10;let _=Math.floor((d-p)/Math.pow(10,o)),b=Hn(n.min,Math.round((f+p+_*Math.pow(10,o))*l)/l);for(;b<e;)i.push({value:b,major:sS(b),significand:_}),_>=10?_=_<15?15:20:_++,_>=20&&(o++,_=2,l=o>=0?1:l),b=Math.round((f+p+_*Math.pow(10,o))*l)/l;const E=Hn(n.max,b);return i.push({value:E,major:sS(E),significand:_}),i}class Ty extends eo{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const i=Sd.prototype.parse.apply(this,[t,e]);if(i===0){this._zero=!0;return}return Ee(i)&&i>0?i:null}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Ee(t)?Math.max(0,t):null,this.max=Ee(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Ee(this._userMin)&&(this.min=t===Oa(this.min,0)?Oa(this.min,-1):Oa(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let i=this.min,r=this.max;const o=u=>i=t?i:u,l=u=>r=e?r:u;i===r&&(i<=0?(o(1),l(10)):(o(Oa(i,-1)),l(Oa(r,1)))),i<=0&&o(Oa(r,-1)),r<=0&&l(Oa(i,1)),this.min=i,this.max=r}buildTicks(){const t=this.options,e={min:this._userMin,max:this._userMax},i=X3(e,this);return t.bounds==="ticks"&&q1(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(t){return t===void 0?"0":Nu(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=wr(t),this._valueRange=wr(this.max)-wr(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(wr(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}ct(Ty,"id","logarithmic"),ct(Ty,"defaults",{ticks:{callback:Wd.formatters.logarithmic,major:{enabled:!0}}});function Ey(n){const t=n.ticks;if(t.display&&n.display){const e=yn(t.backdropPadding);return Rt(t.font&&t.font.size,_e.font.size)+e.height}return 0}function Q3(n,t,e){return e=ye(e)?e:[e],{w:nV(n,t.string,e),h:e.length*t.lineHeight}}function aS(n,t,e,i,r){return n===i||n===r?{start:t-e/2,end:t+e/2}:n<i||n>r?{start:t-e,end:t}:{start:t,end:t+e}}function $3(n){const t={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},e=Object.assign({},t),i=[],r=[],o=n._pointLabels.length,l=n.options.pointLabels,u=l.centerPointLabels?Xt/o:0;for(let f=0;f<o;f++){const d=l.setContext(n.getPointLabelContext(f));r[f]=d.padding;const p=n.getPointPosition(f,n.drawingArea+r[f],u),_=Ye(d.font),b=Q3(n.ctx,_,n._pointLabels[f]);i[f]=b;const E=dn(n.getIndexAngle(f)+u),S=Math.round(x_(E)),w=aS(S,p.x,b.w,0,180),D=aS(S,p.y,b.h,90,270);J3(e,t,E,w,D)}n.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),n._pointLabelItems=e5(n,i,r)}function J3(n,t,e,i,r){const o=Math.abs(Math.sin(e)),l=Math.abs(Math.cos(e));let u=0,f=0;i.start<t.l?(u=(t.l-i.start)/o,n.l=Math.min(n.l,t.l-u)):i.end>t.r&&(u=(i.end-t.r)/o,n.r=Math.max(n.r,t.r+u)),r.start<t.t?(f=(t.t-r.start)/l,n.t=Math.min(n.t,t.t-f)):r.end>t.b&&(f=(r.end-t.b)/l,n.b=Math.max(n.b,t.b+f))}function Z3(n,t,e){const i=n.drawingArea,{extra:r,additionalAngle:o,padding:l,size:u}=e,f=n.getPointPosition(t,i+r+l,o),d=Math.round(x_(dn(f.angle+Re))),p=s5(f.y,u.h,d),_=n5(d),b=i5(f.x,u.w,_);return{visible:!0,x:f.x,y:p,textAlign:_,left:b,top:p,right:b+u.w,bottom:p+u.h}}function t5(n,t){if(!t)return!0;const{left:e,top:i,right:r,bottom:o}=n;return!(ks({x:e,y:i},t)||ks({x:e,y:o},t)||ks({x:r,y:i},t)||ks({x:r,y:o},t))}function e5(n,t,e){const i=[],r=n._pointLabels.length,o=n.options,{centerPointLabels:l,display:u}=o.pointLabels,f={extra:Ey(o)/2,additionalAngle:l?Xt/r:0};let d;for(let p=0;p<r;p++){f.padding=e[p],f.size=t[p];const _=Z3(n,p,f);i.push(_),u==="auto"&&(_.visible=t5(_,d),_.visible&&(d=_))}return i}function n5(n){return n===0||n===180?"center":n<180?"left":"right"}function i5(n,t,e){return e==="right"?n-=t:e==="center"&&(n-=t/2),n}function s5(n,t,e){return e===90||e===270?n-=t/2:(e>270||e<90)&&(n-=t),n}function r5(n,t,e){const{left:i,top:r,right:o,bottom:l}=e,{backdropColor:u}=t;if(!Lt(u)){const f=Ba(t.borderRadius),d=yn(t.backdropPadding);n.fillStyle=u;const p=i-d.left,_=r-d.top,b=o-i+d.width,E=l-r+d.height;Object.values(f).some(S=>S!==0)?(n.beginPath(),mu(n,{x:p,y:_,w:b,h:E,radius:f}),n.fill()):n.fillRect(p,_,b,E)}}function a5(n,t){const{ctx:e,options:{pointLabels:i}}=n;for(let r=t-1;r>=0;r--){const o=n._pointLabelItems[r];if(!o.visible)continue;const l=i.setContext(n.getPointLabelContext(r));r5(e,l,o);const u=Ye(l.font),{x:f,y:d,textAlign:p}=o;$a(e,n._pointLabels[r],f,d+u.lineHeight/2,u,{color:l.color,textAlign:p,textBaseline:"middle"})}}function Pw(n,t,e,i){const{ctx:r}=n;if(e)r.arc(n.xCenter,n.yCenter,t,0,de);else{let o=n.getPointPosition(0,t);r.moveTo(o.x,o.y);for(let l=1;l<i;l++)o=n.getPointPosition(l,t),r.lineTo(o.x,o.y)}}function o5(n,t,e,i,r){const o=n.ctx,l=t.circular,{color:u,lineWidth:f}=t;!l&&!i||!u||!f||e<0||(o.save(),o.strokeStyle=u,o.lineWidth=f,o.setLineDash(r.dash||[]),o.lineDashOffset=r.dashOffset,o.beginPath(),Pw(n,e,l,i),o.closePath(),o.stroke(),o.restore())}function l5(n,t,e){return $r(n,{label:e,index:t,type:"pointLabel"})}class qc extends Sd{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=yn(Ey(this.options)/2),e=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(e,i)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=Ee(t)&&!isNaN(t)?t:0,this.max=Ee(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Ey(this.options))}generateTickLabels(t){Sd.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,i)=>{const r=le(this.options.pointLabels.callback,[e,i],this);return r||r===0?r:""}).filter((e,i)=>this.chart.getDataVisibility(i))}fit(){const t=this.options;t.display&&t.pointLabels.display?$3(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,i,r){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,i,r))}getIndexAngle(t){const e=de/(this._pointLabels.length||1),i=this.options.startAngle||0;return dn(t*e+Ei(i))}getDistanceFromCenterForValue(t){if(Lt(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(Lt(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const i=e[t];return l5(this.getContext(),t,i)}}getPointPosition(t,e,i=0){const r=this.getIndexAngle(t)-Re+i;return{x:Math.cos(r)*e+this.xCenter,y:Math.sin(r)*e+this.yCenter,angle:r}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:i,right:r,bottom:o}=this._pointLabelItems[t];return{left:e,top:i,right:r,bottom:o}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const i=this.ctx;i.save(),i.beginPath(),Pw(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:i,grid:r,border:o}=e,l=this._pointLabels.length;let u,f,d;if(e.pointLabels.display&&a5(this,l),r.display&&this.ticks.forEach((p,_)=>{if(_!==0||_===0&&this.min<0){f=this.getDistanceFromCenterForValue(p.value);const b=this.getContext(_),E=r.setContext(b),S=o.setContext(b);o5(this,E,f,l,S)}}),i.display){for(t.save(),u=l-1;u>=0;u--){const p=i.setContext(this.getPointLabelContext(u)),{color:_,lineWidth:b}=p;!b||!_||(t.lineWidth=b,t.strokeStyle=_,t.setLineDash(p.borderDash),t.lineDashOffset=p.borderDashOffset,f=this.getDistanceFromCenterForValue(e.reverse?this.min:this.max),d=this.getPointPosition(u,f),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(d.x,d.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,i=e.ticks;if(!i.display)return;const r=this.getIndexAngle(0);let o,l;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(r),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((u,f)=>{if(f===0&&this.min>=0&&!e.reverse)return;const d=i.setContext(this.getContext(f)),p=Ye(d.font);if(o=this.getDistanceFromCenterForValue(this.ticks[f].value),d.showLabelBackdrop){t.font=p.string,l=t.measureText(u.label).width,t.fillStyle=d.backdropColor;const _=yn(d.backdropPadding);t.fillRect(-l/2-_.left,-o-p.size/2-_.top,l+_.width,p.size+_.height)}$a(t,u.label,0,-o,p,{color:d.color,strokeColor:d.textStrokeColor,strokeWidth:d.textStrokeWidth})}),t.restore()}drawTitle(){}}ct(qc,"id","radialLinear"),ct(qc,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Wd.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}}),ct(qc,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),ct(qc,"descriptors",{angleLines:{_fallback:"grid"}});const tg={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},On=Object.keys(tg);function oS(n,t){return n-t}function lS(n,t){if(Lt(t))return null;const e=n._adapter,{parser:i,round:r,isoWeekday:o}=n._parseOpts;let l=t;return typeof i=="function"&&(l=i(l)),Ee(l)||(l=typeof i=="string"?e.parse(l,i):e.parse(l)),l===null?null:(r&&(l=r==="week"&&(hl(o)||o===!0)?e.startOf(l,"isoWeek",o):e.startOf(l,r)),+l)}function cS(n,t,e,i){const r=On.length;for(let o=On.indexOf(n);o<r-1;++o){const l=tg[On[o]],u=l.steps?l.steps:Number.MAX_SAFE_INTEGER;if(l.common&&Math.ceil((e-t)/(u*l.size))<=i)return On[o]}return On[r-1]}function c5(n,t,e,i,r){for(let o=On.length-1;o>=On.indexOf(e);o--){const l=On[o];if(tg[l].common&&n._adapter.diff(r,i,l)>=t-1)return l}return On[e?On.indexOf(e):0]}function u5(n){for(let t=On.indexOf(n)+1,e=On.length;t<e;++t)if(tg[On[t]].common)return On[t]}function uS(n,t,e){if(!e)n[t]=!0;else if(e.length){const{lo:i,hi:r}=S_(e,t),o=e[i]>=t?e[i]:e[r];n[o]=!0}}function h5(n,t,e,i){const r=n._adapter,o=+r.startOf(t[0].value,i),l=t[t.length-1].value;let u,f;for(u=o;u<=l;u=+r.add(u,1,i))f=e[u],f>=0&&(t[f].major=!0);return t}function hS(n,t,e){const i=[],r={},o=t.length;let l,u;for(l=0;l<o;++l)u=t[l],r[u]=l,i.push({value:u,major:!1});return o===0||!e?i:h5(n,i,r,e)}class _u extends eo{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const i=t.time||(t.time={}),r=this._adapter=new bL._date(t.adapters.date);r.init(e),$c(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:lS(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:r,max:o,minDefined:l,maxDefined:u}=this.getUserBounds();function f(d){!l&&!isNaN(d.min)&&(r=Math.min(r,d.min)),!u&&!isNaN(d.max)&&(o=Math.max(o,d.max))}(!l||!u)&&(f(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&f(this.getMinMax(!1))),r=Ee(r)&&!isNaN(r)?r:+e.startOf(Date.now(),i),o=Ee(o)&&!isNaN(o)?o:+e.endOf(Date.now(),i)+1,this.min=Math.min(r,o-1),this.max=Math.max(r+1,o)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const o=this.min,l=this.max,u=HP(r,o,l);return this._unit=e.unit||(i.autoSkip?cS(e.minUnit,this.min,this.max,this._getLabelCapacity(o)):c5(this,u.length,e.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:u5(this._unit),this.initOffsets(r),t.reverse&&u.reverse(),hS(this,u,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,i=0,r,o;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),t.length===1?e=1-r:e=(this.getDecimalForValue(t[1])-r)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?i=o:i=(o-this.getDecimalForValue(t[t.length-2]))/2);const l=t.length<3?.5:.25;e=Je(e,0,l),i=Je(i,0,l),this._offsets={start:e,end:i,factor:1/(e+1+i)}}_generate(){const t=this._adapter,e=this.min,i=this.max,r=this.options,o=r.time,l=o.unit||cS(o.minUnit,e,i,this._getLabelCapacity(e)),u=Rt(r.ticks.stepSize,1),f=l==="week"?o.isoWeekday:!1,d=hl(f)||f===!0,p={};let _=e,b,E;if(d&&(_=+t.startOf(_,"isoWeek",f)),_=+t.startOf(_,d?"day":l),t.diff(i,e,l)>1e5*u)throw new Error(e+" and "+i+" are too far apart with stepSize of "+u+" "+l);const S=r.ticks.source==="data"&&this.getDataTimestamps();for(b=_,E=0;b<i;b=+t.add(b,u,l),E++)uS(p,b,S);return(b===i||r.bounds==="ticks"||E===1)&&uS(p,b,S),Object.keys(p).sort(oS).map(w=>+w)}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){const r=this.options.time.displayFormats,o=this._unit,l=e||r[o];return this._adapter.format(t,l)}_tickFormatFunction(t,e,i,r){const o=this.options,l=o.ticks.callback;if(l)return le(l,[t,e,i],this);const u=o.time.displayFormats,f=this._unit,d=this._majorUnit,p=f&&u[f],_=d&&u[d],b=i[e],E=d&&_&&b&&b.major;return this._adapter.format(t,r||(E?_:p))}generateTickLabels(t){let e,i,r;for(e=0,i=t.length;e<i;++e)r=t[e],r.label=this._tickFormatFunction(r.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,r=Ei(this.isHorizontal()?e.maxRotation:e.minRotation),o=Math.cos(r),l=Math.sin(r),u=this._resolveTickFontOptions(0).size;return{w:i*o+u*l,h:i*l+u*o}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,r=i[e.unit]||i.millisecond,o=this._tickFormatFunction(t,0,hS(this,[t],this._majorUnit),r),l=this._getLabelSize(o),u=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return u>0?u:1}getDataTimestamps(){let t=this._cache.data||[],e,i;if(t.length)return t;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,i=r.length;e<i;++e)t=t.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const r=this.getLabels();for(e=0,i=r.length;e<i;++e)t.push(lS(this,r[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return K1(t.sort(oS))}}ct(_u,"id","time"),ct(_u,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Rf(n,t,e){let i=0,r=n.length-1,o,l,u,f;e?(t>=n[i].pos&&t<=n[r].pos&&({lo:i,hi:r}=Ns(n,"pos",t)),{pos:o,time:u}=n[i],{pos:l,time:f}=n[r]):(t>=n[i].time&&t<=n[r].time&&({lo:i,hi:r}=Ns(n,"time",t)),{time:o,pos:u}=n[i],{time:l,pos:f}=n[r]);const d=l-o;return d?u+(f-u)*(t-o)/d:u}class xy extends _u{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Rf(e,this.min),this._tableRange=Rf(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,r=[],o=[];let l,u,f,d,p;for(l=0,u=t.length;l<u;++l)d=t[l],d>=e&&d<=i&&r.push(d);if(r.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(l=0,u=r.length;l<u;++l)p=r[l+1],f=r[l-1],d=r[l],Math.round((p+f)/2)!==d&&o.push({time:d,pos:l/(u-1)});return o}_generate(){const t=this.min,e=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(e)||i.length===1)&&i.push(e),i.sort((r,o)=>r-o)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(Rf(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return Rf(this._table,i*this._tableRange+this._minPos,!0)}}ct(xy,"id","timeseries"),ct(xy,"defaults",_u.defaults);var f5=Object.freeze({__proto__:null,CategoryScale:by,LinearScale:vy,LogarithmicScale:Ty,RadialLinearScale:qc,TimeScale:_u,TimeSeriesScale:xy});const d5=[_L,W4,H3,f5];vi.register(...d5);const g5=({onClose:n,trades:t,capital:e})=>{const i=pt.useRef(null),r=pt.useRef(null),o=pt.useRef(null);return pt.useEffect(()=>{const l=[];if(i.current){const u=i.current.getContext("2d");if(u){const f=new vi(u,{type:"line",data:{labels:["Initial",...t.map((d,p)=>`Trade ${p+1}`)],datasets:[{label:"Equity Curve",data:[e.initial+e.deposits,...t.map(d=>d.capitalEnd)],borderColor:"rgb(75, 192, 192)",tension:.1,fill:!1}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Equity Curve"}},scales:{y:{beginAtZero:!1,ticks:{callback:d=>`$${d}`}}}}});l.push(f)}}if(r.current){const u=r.current.getContext("2d");if(u){const f=new vi(u,{type:"bar",data:{labels:t.map((d,p)=>`Trade ${p+1}`),datasets:[{label:"P/L per Trade ($)",data:t.map(d=>d.pnlNet),backgroundColor:t.map(d=>d.pnlNet>=0?"rgba(75, 192, 192, 0.6)":"rgba(255, 99, 132, 0.6)"),borderColor:t.map(d=>d.pnlNet>=0?"rgba(75, 192, 192, 1)":"rgba(255, 99, 132, 1)"),borderWidth:1}]},options:{responsive:!0,plugins:{title:{display:!0,text:"P/L Distribution"}},scales:{y:{ticks:{callback:d=>`$${d}`}}}}});l.push(f)}}if(o.current){const u=t.reduce((_,b)=>{const E=b.strategy||"Uncategorized";return _[E]||(_[E]=0),_[E]+=b.pnlNet,_},{}),f=Object.keys(u),d=Object.values(u),p=o.current.getContext("2d");if(p){const _=new vi(p,{type:"bar",data:{labels:f,datasets:[{label:"Net P/L by Strategy ($)",data:d,backgroundColor:d.map(b=>b>=0?"rgba(75, 192, 192, 0.6)":"rgba(255, 99, 132, 0.6)"),borderColor:d.map(b=>b>=0?"rgba(75, 192, 192, 1)":"rgba(255, 99, 132, 1)"),borderWidth:1}]},options:{indexAxis:"y",responsive:!0,plugins:{title:{display:!0,text:"Net Profit by Strategy"}},scales:{x:{ticks:{callback:b=>`$${b}`}}}}});l.push(_)}}return()=>{l.forEach(u=>u.destroy())}},[t,e]),R.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50 animate-fade-in",children:R.jsxs("div",{className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl shadow-2xl w-full max-w-6xl max-h-[90vh] flex flex-col",children:[R.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700",children:[R.jsx("h2",{className:"text-2xl font-bold text-primary",children:"Performance Analytics"}),R.jsx("button",{onClick:n,className:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-white text-2xl",children:""})]}),R.jsx("main",{className:"p-6 overflow-y-auto",children:t.length===0?R.jsx("div",{className:"text-center py-10",children:R.jsx("p",{className:"text-lg text-gray-500",children:"Log some trades to see your performance analytics."})}):R.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[R.jsx("div",{className:"xl:col-span-2",children:R.jsx("canvas",{ref:i})}),R.jsx("div",{children:R.jsx("canvas",{ref:r})}),R.jsx("div",{children:R.jsx("canvas",{ref:o})})]})})]})})},m5=`
Crea una aplicacin web de "Crypto Trading Journal" en un **nico archivo HTML**. La aplicacin debe usar **Tailwind CSS** para el estilo y **JavaScript** para toda la funcionalidad, incluyendo \`Chart.js\` para los grficos. No debe haber archivos CSS o JS externos, excepto los enlaces CDN para Tailwind y Chart.js.

La aplicacin debe tener un diseo de dos columnas en pantallas grandes (un formulario a la izquierda y el dashboard/log a la derecha).

**1. Columna Izquierda (Fija al hacer scroll):**

*   **Tarjeta "Capital Management":**
    *   Input "Initial Capital ($)".
    *   Input "Add Deposit ($)".
    *   Botn "Add Capital Deposit".
    *   Estos valores deben guardarse en \`localStorage\`.

*   **Tarjeta "Journaling Best Practices":**
    *   Una lista esttica de consejos sobre trading.

*   **Tarjeta "Personal Notes":**
    *   Un ttulo "Personal Notes".
    *   En la misma lnea del ttulo, botones de formato (Negrita, Itlica, Subrayado, Tachado) y 6 selectores de color (swatches) para cambiar el color de fondo de la tarjeta (incluyendo default, gris, rojo, verde, azul, amarillo).
    *   Un rea de \`contenteditable\` para escribir notas.
    *   Un botn "Read More / Show Less" que aparece si el texto excede 3 lneas.
    *   Un texto "Further reading" en la esquina inferior derecha.
    *   El contenido de la nota, su formato (HTML) y el color de la tarjeta deben guardarse en \`localStorage\`.

*   **Tarjeta "Log a New Trade" (Formulario):**
    *   **Inputs:** Date & Time, Pair, Strategy, Direction (Long/Short), Risk/Reward (ej. "2:1"), Entry Price, Exit Price, **Margin ($) (manual)**, Leverage (Select 1x-100x), **Risk (%) (manual)**, **Fees ($) (manual)**.
    *   **Campos Auto-calculados (solo lectura):**
        1.  \`Position Value ($)\` = Margin * Leverage
        2.  \`Position Size (Asset)\` = Position Value / Entry Price
        3.  \`Risk ($)\` = Position Value * (Risk % / 100)
    *   Toda la lgica de auto-clculo debe funcionar en tiempo real (\`oninput\`).
    *   Botn "Log Trade".

**2. Columna Derecha:**

*   **Tarjeta "Performance Dashboard":**
    *   Debe mostrar mtricas clave calculadas a partir del log de trades:
    *   \`Current Capital\`: Calculado como (Initial Capital + Total Deposits + Total P/L).
    *   \`Total P/L ($)\`: Suma de todos los P/L netos.
    *   \`Win Rate\`: (Trades ganadores / Total Trades) %.
    *   \`Profit Factor\`: (Suma de P/L de trades ganadores / Suma de P/L de trades perdedores).
    *   Botn "Performance Analytics" que abre un modal.

*   **Tarjeta "Trade Log":**
    *   Una tabla que muestra todos los trades.
    *   **Columnas:** Date, Pair, Direction, Entry, Exit, Position Size, Leverage, Margin ($), R/R, Risk ($), Fees ($), **P/L ($) (Neto)**, **P/L % (Asset)**, **P/L % (Margin) (ROI)**, **Capital (End)**, Strategy.
    *   **Clculos del Log (por operacin):**
        *   \`P/L ($) (Neto)\`: (Exit - Entry) * Position Size * (Direction) - Fees
        *   \`P/L % (Asset)\`: (Exit - Entry) / Entry * (Direction)
        *   \`P/L % (Margin)\`: P/L ($) (Neto) / Margin ($)
        *   \`Capital (End)\`: Saldo de capital corriente despus de cerrar la operacin.
    *   Debe tener una **fila de Totales (\`<tfoot>\`)** que sume P/L ($), Fees ($), Risk ($) y Margin ($).
    *   Botn "Clear All Trades".

**3. Modales:**

*   **Modal "Performance Analytics":**
    *   Se abre desde el Dashboard.
    *   Debe mostrar 3 grficos usando \`Chart.js\`:
        1.  **Equity Curve:** Un grfico de lnea que muestra \`Capital (End)\` despus de cada trade, en orden cronolgico.
        2.  **P/L Distribution:** Un grfico de barras que muestra el \`P/L ($)\` de cada trade individual.
        3.  **Net Profit by Strategy:** Un **grfico de barras horizontal** que muestra el P/L neto total para cada 'Strategy'. Las barras deben ser verdes para ganancias y rojas para prdidas.

*   **Modal "Prompt de Creacin" (Este mismo modal):**
    *   Un botn en el header principal ("Ver Prompt de Creacin").
    *   Muestra un texto preformateado (este prompt) que explica cmo construir la app.

**4. Lgica de JavaScript (localStorage):**

*   Toda la aplicacin debe usar \`localStorage\` para persistir datos.
*   **Claves de \`localStorage\`:**
    *   \`tradingJournal_trades_v3\`: Array de todos los objetos de trade.
    *   \`tradingJournal_capital_v3\`: Objeto con \`{ initial: 1000, deposits: 0 }\`.
    *   \`tradingJournal_note_v3\`: Objeto con \`{ content: "...", color: "..." }\`.
*   El P/L de los trades debe afectar el \`Current Capital\` en el dashboard.
*   El formulario de "Log a New Trade" debe auto-completar la fecha y hora actuales.
*   Todas las funciones (guardar, cargar, renderizar, calcular dashboard) deben estar bien organizadas y ejecutarse al cargar la pgina (\`DOMContentLoaded\`).
`,p5=({onClose:n})=>R.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:R.jsxs("div",{className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[R.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700",children:[R.jsx("h2",{className:"text-2xl font-bold text-primary",children:"Prompt de Creacin de la App"}),R.jsx("button",{onClick:n,className:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-white text-2xl",children:""})]}),R.jsx("main",{className:"p-6 overflow-y-auto",children:R.jsx("pre",{className:"whitespace-pre-wrap text-sm text-gray-700 dark:text-gray-300 font-sans",children:m5.trim()})})]})}),If=()=>{const n=new Date().toISOString().slice(0,16);return{dateTime:n,pair:"",strategy:"",direction:"Long",riskReward:"2:1",entryPrice:0,exitPrice:0,margin:0,leverage:1,riskPercent:1,fees:0,status:"closed",closeDateTime:n,notes:""}},Df=1e-6,Vw=({onSubmit:n,initialValues:t,submitLabel:e="Log Trade",onCancel:i,title:r="Log a New Trade"})=>{const[o,l]=pt.useState(()=>t??If()),[u,f]=pt.useState({positionValue:0,positionSize:0,riskAmount:0});pt.useEffect(()=>{l(t?{...If(),...t,exitPrice:t.status==="closed"?t.exitPrice??t.entryPrice:null,fees:t.status==="closed"?t.fees??0:null,closeDateTime:t.status==="closed"?t.closeDateTime??t.dateTime:null}:If())},[t]),pt.useEffect(()=>{const b=o.margin*o.leverage,E=o.entryPrice>0?b/o.entryPrice:0,S=b*(o.riskPercent/100);f({positionValue:b,positionSize:E,riskAmount:S})},[o.margin,o.leverage,o.entryPrice,o.riskPercent]);const d=b=>{l(E=>({...E,status:b,exitPrice:b==="closed"?E.exitPrice??E.entryPrice:null,fees:b==="closed"?E.fees??0:null,closeDateTime:b==="closed"?E.closeDateTime??new Date().toISOString().slice(0,16):null}))},p=b=>{const{name:E,value:S}=b.target;if(E==="status"){d(S);return}const D=["entryPrice","exitPrice","margin","leverage","riskPercent","fees"].includes(E);l(z=>({...z,[E]:D?isNaN(parseFloat(S))?0:parseFloat(S):S}))},_=async b=>{b.preventDefault();const E={...o,exitPrice:o.status==="closed"?o.exitPrice??o.entryPrice:null,fees:o.status==="closed"?o.fees??0:null,closeDateTime:o.status==="closed"?o.closeDateTime??new Date().toISOString().slice(0,16):null};await n(E),t||l(If())};return R.jsxs(Xa,{title:r,children:[R.jsxs("form",{onSubmit:_,className:"space-y-4",children:[R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[R.jsxs("div",{children:[R.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-600 dark:text-gray-400",children:"Status"}),R.jsxs("select",{name:"status",id:"status",value:o.status,onChange:p,className:"input-field",children:[R.jsx("option",{value:"closed",children:"Closed"}),R.jsx("option",{value:"open",children:"Open"})]})]}),R.jsxs("div",{children:[R.jsx("label",{htmlFor:"dateTime",className:"block text-sm font-medium text-gray-600 dark:text-gray-400",children:"Date & Time"}),R.jsx("input",{type:"datetime-local",name:"dateTime",id:"dateTime",value:o.dateTime,onChange:p,required:!0,className:"input-field"})]}),R.jsxs("div",{children:[R.jsx("label",{htmlFor:"pair",className:"block text-sm font-medium text-gray-600 dark:text-gray-400",children:"Pair"}),R.jsx("input",{type:"text",name:"pair",id:"pair",placeholder:"e.g., BTC/USDT",value:o.pair,onChange:p,required:!0,className:"input-field"})]})]}),R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[R.jsxs("div",{children:[R.jsx("label",{htmlFor:"strategy",className:"block text-sm font-medium text-gray-600 dark:text-gray-400",children:"Strategy"}),R.jsx("input",{type:"text",name:"strategy",id:"strategy",placeholder:"e.g., Breakout",value:o.strategy,onChange:p,required:!0,className:"input-field"})]}),R.jsxs("div",{children:[R.jsx("label",{htmlFor:"direction",className:"block text-sm font-medium text-gray-600 dark:text-gray-400",children:"Direction"}),R.jsxs("select",{name:"direction",id:"direction",value:o.direction,onChange:p,className:"input-field",children:[R.jsx("option",{value:"Long",children:"Long"}),R.jsx("option",{value:"Short",children:"Short"})]})]})]}),R.jsxs("div",{children:[R.jsx("label",{htmlFor:"riskReward",className:"block text-sm font-medium text-gray-600 dark:text-gray-400",children:"Risk/Reward Ratio"}),R.jsx("input",{type:"text",name:"riskReward",id:"riskReward",placeholder:"e.g., 2:1",value:o.riskReward,onChange:p,className:"input-field"})]}),R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[R.jsxs("div",{children:[R.jsx("label",{htmlFor:"entryPrice",className:"block text-sm font-medium text-gray-600 dark:text-gray-400",children:"Entry Price"}),R.jsx("input",{type:"number",step:Df,name:"entryPrice",id:"entryPrice",value:o.entryPrice,onChange:p,required:!0,className:"input-field"})]}),o.status==="closed"&&R.jsxs("div",{children:[R.jsx("label",{htmlFor:"exitPrice",className:"block text-sm font-medium text-gray-600 dark:text-gray-400",children:"Exit Price"}),R.jsx("input",{type:"number",step:Df,name:"exitPrice",id:"exitPrice",value:o.exitPrice??"",onChange:p,required:!0,className:"input-field"})]})]}),R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[R.jsxs("div",{children:[R.jsx("label",{htmlFor:"margin",className:"block text-sm font-medium text-gray-600 dark:text-gray-400",children:"Margin ($)"}),R.jsx("input",{type:"number",step:Df,name:"margin",id:"margin",value:o.margin,onChange:p,required:!0,className:"input-field"})]}),R.jsxs("div",{children:[R.jsx("label",{htmlFor:"leverage",className:"block text-sm font-medium text-gray-600 dark:text-gray-400",children:"Leverage"}),R.jsx("select",{name:"leverage",id:"leverage",value:o.leverage,onChange:p,className:"input-field",children:[...Array(100).keys()].map(b=>R.jsxs("option",{value:b+1,children:[b+1,"x"]},b+1))})]})]}),R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[R.jsxs("div",{children:[R.jsx("label",{htmlFor:"riskPercent",className:"block text-sm font-medium text-gray-600 dark:text-gray-400",children:"Risk (%)"}),R.jsx("input",{type:"number",step:"any",name:"riskPercent",id:"riskPercent",value:o.riskPercent,onChange:p,required:!0,className:"input-field"})]}),o.status==="closed"&&R.jsxs("div",{children:[R.jsx("label",{htmlFor:"fees",className:"block text-sm font-medium text-gray-600 dark:text-gray-400",children:"Fees ($)"}),R.jsx("input",{type:"number",step:Df,name:"fees",id:"fees",value:o.fees??"",onChange:p,required:!0,className:"input-field"})]})]}),o.status==="closed"&&R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[R.jsxs("div",{children:[R.jsx("label",{htmlFor:"closeDateTime",className:"block text-sm font-medium text-gray-600 dark:text-gray-400",children:"Close Date & Time"}),R.jsx("input",{type:"datetime-local",name:"closeDateTime",id:"closeDateTime",value:o.closeDateTime??"",onChange:p,required:!0,className:"input-field"})]}),R.jsxs("div",{children:[R.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-600 dark:text-gray-400",children:"Notes"}),R.jsx("input",{type:"text",name:"notes",id:"notes",value:o.notes??"",onChange:p,className:"input-field",placeholder:"Optional notes"})]})]}),o.status==="open"&&R.jsxs("div",{children:[R.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-600 dark:text-gray-400",children:"Notes"}),R.jsx("input",{type:"text",name:"notes",id:"notes",value:o.notes??"",onChange:p,className:"input-field",placeholder:"Optional notes"})]}),R.jsxs("div",{className:"bg-gray-100 dark:bg-gray-900/50 p-4 rounded-lg space-y-2 text-sm",children:[R.jsx("h3",{className:"font-bold text-gray-700 dark:text-gray-300",children:"Auto-Calculated Values"}),R.jsxs("div",{className:"flex justify-between",children:[R.jsx("span",{children:"Position Value ($):"})," ",R.jsx("span",{children:u.positionValue.toFixed(2)})]}),R.jsxs("div",{className:"flex justify-between",children:[R.jsx("span",{children:"Position Size (Asset):"})," ",R.jsx("span",{children:u.positionSize.toFixed(8)})]}),R.jsxs("div",{className:"flex justify-between",children:[R.jsx("span",{children:"Risk Amount ($):"})," ",R.jsx("span",{children:u.riskAmount.toFixed(2)})]})]}),R.jsxs("div",{className:"flex space-x-2",children:[i&&R.jsx("button",{type:"button",onClick:i,className:"flex-1 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 font-bold py-2 px-4 rounded-md transition duration-300",children:"Cancel"}),R.jsx("button",{type:"submit",className:"flex-1 bg-primary hover:brightness-95 text-gray-900 font-bold py-2 px-4 rounded-md transition duration-300",children:e})]})]}),R.jsx("style",{children:`
        .input-field {
            margin-top: 4px;
            display: block;
            width: 100%;
            background-color: rgb(249 250 251);
            border: 1px solid rgb(209 213 219);
            border-radius: 0.375rem;
            box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            padding: 0.5rem 0.75rem;
            color: rgb(17 24 39);
        }
        .dark .input-field {
            background-color: rgb(17 24 39);
            border-color: rgb(55 65 81);
            color: rgb(249 250 251);
        }
        .input-field:focus {
            outline: 2px solid transparent;
            outline-offset: 2px;
            --tw-ring-color: var(--color-primary);
            border-color: var(--color-primary);
        }
      `})]})},y5=({trade:n,onClose:t,onSubmit:e})=>{const i=async l=>{await e(n.id,l),t()},{id:r,...o}=n;return R.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50",children:R.jsxs("div",{className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[R.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700",children:[R.jsx("h2",{className:"text-2xl font-bold text-primary",children:"Edit Trade"}),R.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-white text-2xl",children:""})]}),R.jsx("main",{className:"p-6",children:R.jsx(Vw,{initialValues:o,submitLabel:"Save Changes",onSubmit:i,onCancel:t,title:"Trade Details"})})]})})},_5=({trades:n,onEditTrade:t,onDeleteTrade:e})=>{const i=r=>{window.confirm("Delete this open position? This action cannot be undone.")&&e(r)};return n.length===0?R.jsx(Xa,{title:"Open Positions",children:R.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center",children:"No open positions at the moment."})}):R.jsx(Xa,{title:"Open Positions",children:R.jsx("div",{className:"overflow-x-auto",children:R.jsxs("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[R.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-100 dark:bg-gray-700 dark:text-gray-300",children:R.jsxs("tr",{children:[R.jsx("th",{scope:"col",className:"py-3 px-2",children:"Opened"}),R.jsx("th",{scope:"col",className:"py-3 px-2",children:"Pair"}),R.jsx("th",{scope:"col",className:"py-3 px-2",children:"Direction"}),R.jsx("th",{scope:"col",className:"py-3 px-2",children:"Entry"}),R.jsx("th",{scope:"col",className:"py-3 px-2",children:"Margin ($)"}),R.jsx("th",{scope:"col",className:"py-3 px-2",children:"Leverage"}),R.jsx("th",{scope:"col",className:"py-3 px-2",children:"Risk (%)"}),R.jsx("th",{scope:"col",className:"py-3 px-2",children:"Notes"}),R.jsx("th",{scope:"col",className:"py-3 px-2",children:"Actions"})]})}),R.jsx("tbody",{children:n.map(r=>R.jsxs("tr",{className:"bg-white dark:bg-gray-800 border-b dark:border-gray-700",children:[R.jsx("td",{className:"py-2 px-2",children:new Date(r.dateTime).toLocaleString()}),R.jsx("td",{className:"py-2 px-2 font-medium",children:r.pair}),R.jsx("td",{className:`py-2 px-2 font-semibold ${r.direction==="Long"?"text-green-500":"text-red-500"}`,children:r.direction}),R.jsx("td",{className:"py-2 px-2",children:r.entryPrice.toFixed(2)}),R.jsx("td",{className:"py-2 px-2",children:r.margin.toFixed(2)}),R.jsxs("td",{className:"py-2 px-2",children:[r.leverage,"x"]}),R.jsxs("td",{className:"py-2 px-2",children:[r.riskPercent.toFixed(2),"%"]}),R.jsx("td",{className:"py-2 px-2",children:r.notes||""}),R.jsxs("td",{className:"py-2 px-2 space-x-2 whitespace-nowrap",children:[R.jsx("button",{onClick:()=>t(r.id),className:"text-primary hover:brightness-90 font-semibold text-xs",children:"Edit"}),R.jsx("button",{onClick:()=>i(r.id),className:"text-red-600 hover:text-red-500 font-semibold text-xs",children:"Delete"})]})]},r.id))})]})})})},b5=({onClose:n,onSubmit:t})=>{const e=async i=>{await t(i),n()};return R.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50",children:R.jsxs("div",{className:"bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[R.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700",children:[R.jsx("h2",{className:"text-2xl font-bold text-primary",children:"Log a New Trade"}),R.jsx("button",{onClick:n,className:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-white text-2xl",children:""})]}),R.jsx("main",{className:"p-6",children:R.jsx(Vw,{onSubmit:e,submitLabel:"Save Trade",onCancel:n,title:"Trade Details"})})]})})},v5=({user:n,logout:t,theme:e,toggleTheme:i})=>{const[r,o]=pt.useState(!1),[l,u]=pt.useState(!1),[f,d]=pt.useState(null),[p,_]=pt.useState(!1),{data:b,addDocument:E,deleteDocument:S,updateDocument:w,loading:D}=Qk("trades",n.uid),{data:z,updateDocument:F,loading:W}=BE("capital",n.uid,{initial:1e3,deposits:0}),{data:Z,updateDocument:$,loading:st}=BE("note",n.uid,{content:"Start typing your notes here...",color:"default"}),M=D||W||st,C=pt.useMemo(()=>b.map(L=>({...L,status:L.status??"closed"})),[b]),O=pt.useMemo(()=>C.filter(L=>L.status==="open"),[C]),P=pt.useMemo(()=>C.filter(L=>L.status==="closed"),[C]),k=pt.useMemo(()=>{let L=z.initial+z.deposits;return P.sort((J,ot)=>new Date(J.dateTime).getTime()-new Date(ot.dateTime).getTime()).map(J=>{const ot=$k(J),ut={...J,...ot,status:"closed",exitPrice:J.exitPrice??J.entryPrice,fees:J.fees??0};return L+=ut.pnlNet,{...ut,capitalEnd:L}})},[P,z]),j=pt.useMemo(()=>Jk(z,k),[z,k]),N=async L=>{await E(L)},Nt=L=>{F(L)},Et=L=>{F({deposits:(z.deposits||0)+L})},K=L=>{$(L)},at=L=>{S(L)},ft=L=>{const J=b.find(ot=>ot.id===L);J&&d(J)},bt=(L,J)=>w(L,J),kt=()=>{d(null)};return M?R.jsx("div",{className:"bg-gray-100 dark:bg-gray-900 min-h-screen flex items-center justify-center",children:R.jsx("div",{className:"animate-pulse text-primary text-xl font-bold",children:"Loading Journal..."})}):R.jsxs(R.Fragment,{children:[R.jsxs("div",{className:"bg-gray-100 dark:bg-gray-900 min-h-screen font-sans text-gray-800 dark:text-gray-300",children:[R.jsx("header",{className:"bg-white dark:bg-gray-800/50 dark:backdrop-blur-sm border-b border-gray-200 dark:border-gray-700/50 shadow-md sticky top-0 z-40",children:R.jsxs("div",{className:"container mx-auto px-4 py-3 flex justify-between items-center",children:[R.jsx("h1",{className:"text-2xl font-bold text-primary",children:"TRADA"}),R.jsxs("div",{className:"flex items-center space-x-3",children:[R.jsx("button",{onClick:()=>u(!0),className:"text-sm font-medium text-primary hover:underline hidden md:block",children:"View Creation Prompt"}),R.jsx("button",{onClick:()=>_(!0),className:"hidden md:inline-flex items-center bg-primary hover:brightness-95 text-gray-900 font-bold py-2 px-4 rounded-md transition duration-300 text-sm",children:"Log Trade"}),R.jsx("button",{onClick:i,className:"p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 text-2xl leading-none",children:e==="dark"?"":""}),R.jsx("button",{onClick:t,className:"bg-primary hover:brightness-95 text-gray-900 font-bold py-2 px-4 rounded-md transition duration-300 text-sm",children:"Logout"})]})]})}),R.jsx("main",{className:"container mx-auto p-4 lg:p-6",children:R.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 lg:gap-6",children:[R.jsxs("div",{className:"lg:col-span-1 space-y-6 lg:sticky lg:top-24 self-start",children:[R.jsx(Zk,{capital:z,setCapital:Nt,onAddDeposit:Et}),R.jsx(rP,{}),R.jsx(sP,{note:Z,onNoteChange:K}),R.jsx("button",{onClick:()=>_(!0),className:"w-full bg-primary hover:brightness-95 text-gray-900 font-bold py-3 px-4 rounded-md transition duration-300 text-sm",children:"Log a New Trade"})]}),R.jsxs("div",{className:"lg:col-span-2 space-y-6 mt-6 lg:mt-0",children:[R.jsx(tP,{metrics:j,onOpenAnalytics:()=>o(!0)}),R.jsx(_5,{trades:O,onEditTrade:ft,onDeleteTrade:at})]}),R.jsx("div",{className:"lg:col-span-3 mt-6 space-y-6",children:R.jsx(eP,{trades:k,onDeleteTrade:at,onEditTrade:ft})})]})})]}),r&&R.jsx(g5,{onClose:()=>o(!1),trades:k,capital:z}),l&&R.jsx(p5,{onClose:()=>u(!1)}),f&&R.jsx(y5,{trade:f,onClose:kt,onSubmit:bt}),p&&R.jsx(b5,{onClose:()=>_(!1),onSubmit:N})]})},T5=()=>{const{user:n,logout:t,loading:e,loginWithGoogle:i,login:r,signup:o}=Kk(),[l,u]=Wk();if(e)return R.jsx("div",{className:"bg-gray-100 dark:bg-gray-900 min-h-screen flex items-center justify-center",children:R.jsx("div",{className:"animate-pulse text-primary text-xl font-bold",children:"Loading..."})});if(n){const f={uid:n.uid,email:n.email};return R.jsx(v5,{user:f,logout:t,theme:l,toggleTheme:u})}return R.jsx(Xk,{login:r,signup:o,loginWithGoogle:i})},Lw=document.getElementById("root");if(!Lw)throw new Error("Could not find root element to mount to");const E5=CR.createRoot(Lw);E5.render(R.jsx(bR.StrictMode,{children:R.jsx(T5,{})}));
